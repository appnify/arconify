{
  "version": 3,
  "sources": ["../../../node_modules/vexip-ui/components/spin/props.ts", "../../../node_modules/vexip-ui/components/spin/spin.vue", "../../../node_modules/vexip-ui/components/spin/spin.vue", "../../../node_modules/vexip-ui/directives/loading/index.ts", "../../../node_modules/vexip-ui/directives/resize/index.ts", "../../../node_modules/vexip-ui/directives/index.ts", "../../../node_modules/vexip-ui/components/affix/props.ts", "../../../node_modules/vexip-ui/components/affix/helpers.ts", "../../../node_modules/vexip-ui/components/affix/affix.vue", "../../../node_modules/vexip-ui/components/alert/props.ts", "../../../node_modules/vexip-ui/components/alert/symbol.ts", "../../../node_modules/vexip-ui/components/alert/alert.vue", "../../../node_modules/vexip-ui/components/anchor/props.ts", "../../../node_modules/vexip-ui/components/anchor/symbol.ts", "../../../node_modules/vexip-ui/components/anchor/anchor-link.vue", "../../../node_modules/vexip-ui/components/anchor/helper.ts", "../../../node_modules/vexip-ui/components/anchor/anchor.vue", "../../../node_modules/vexip-ui/components/scrollbar/props.ts", "../../../node_modules/vexip-ui/components/scrollbar/symbol.ts", "../../../node_modules/vexip-ui/components/scrollbar/hooks.ts", "../../../node_modules/vexip-ui/components/scrollbar/scrollbar.vue", "../../../node_modules/vexip-ui/components/resize-observer/props.ts", "../../../node_modules/vexip-ui/components/resize-observer/resize-observer.ts", "../../../node_modules/vexip-ui/components/native-scroll/props.ts", "../../../node_modules/vexip-ui/components/native-scroll/helper.ts", "../../../node_modules/vexip-ui/components/native-scroll/hooks.ts", "../../../node_modules/vexip-ui/components/native-scroll/native-scroll.tsx", "../../../node_modules/vexip-ui/components/option/props.ts", "../../../node_modules/vexip-ui/components/option/option.vue", "../../../node_modules/vexip-ui/components/option/option.vue", "../../../node_modules/vexip-ui/components/overflow/props.ts", "../../../node_modules/vexip-ui/components/overflow/overflow.tsx", "../../../node_modules/vexip-ui/components/tag/props.ts", "../../../node_modules/vexip-ui/components/tag/tag.tsx", "../../../node_modules/vexip-ui/components/virtual-list/props.ts", "../../../node_modules/vexip-ui/components/virtual-list/virtual-list.tsx", "../../../node_modules/vexip-ui/components/row/props.ts", "../../../node_modules/vexip-ui/components/row/symbol.ts", "../../../node_modules/vexip-ui/components/row/row.ts", "../../../node_modules/vexip-ui/components/form/props.ts", "../../../node_modules/vexip-ui/components/form/symbol.ts", "../../../node_modules/vexip-ui/components/form/form.vue", "../../../node_modules/vexip-ui/components/form/helper.ts", "../../../node_modules/vexip-ui/components/form/validator.ts", "../../../node_modules/vexip-ui/components/select/props.ts", "../../../node_modules/vexip-ui/components/select/select.vue", "../../../node_modules/vexip-ui/components/select/select.vue", "../../../node_modules/vexip-ui/components/auto-complete/props.ts", "../../../node_modules/vexip-ui/components/auto-complete/auto-complete.vue", "../../../node_modules/vexip-ui/components/avatar/props.ts", "../../../node_modules/vexip-ui/components/avatar/symbol.ts", "../../../node_modules/vexip-ui/components/avatar/avatar.vue", "../../../node_modules/vexip-ui/components/avatar/avatar-group.vue", "../../../node_modules/vexip-ui/components/badge/props.ts", "../../../node_modules/vexip-ui/components/badge/symbol.ts", "../../../node_modules/vexip-ui/components/badge/badge.vue", "../../../node_modules/vexip-ui/components/renderer/props.ts", "../../../node_modules/vexip-ui/components/renderer/renderer.ts", "../../../node_modules/vexip-ui/components/breadcrumb/props.ts", "../../../node_modules/vexip-ui/components/breadcrumb/symbol.ts", "../../../node_modules/vexip-ui/components/breadcrumb/breadcrumb-item.vue", "../../../node_modules/vexip-ui/components/breadcrumb/breadcrumb.vue", "../../../node_modules/vexip-ui/components/bubble/props.ts", "../../../node_modules/vexip-ui/components/bubble/symbol.ts", "../../../node_modules/vexip-ui/components/bubble/bubble.vue", "../../../node_modules/vexip-ui/components/button/props.ts", "../../../node_modules/vexip-ui/components/button/symbol.ts", "../../../node_modules/vexip-ui/components/button/button.tsx", "../../../node_modules/vexip-ui/components/button/button-group.vue", "../../../node_modules/vexip-ui/components/row/column.ts", "../../../node_modules/vexip-ui/components/number-input/props.ts", "../../../node_modules/vexip-ui/components/number-input/number-input.vue", "../../../node_modules/vexip-ui/components/calendar/props.ts", "../../../node_modules/vexip-ui/components/calendar/calendar-panel.vue", "../../../node_modules/vexip-ui/components/calendar/calendar.vue", "../../../node_modules/vexip-ui/components/captcha/props.ts", "../../../node_modules/vexip-ui/components/captcha/captcha-slider.vue", "../../../node_modules/vexip-ui/components/captcha/hollow-paths.ts", "../../../node_modules/vexip-ui/components/captcha/captcha.tsx", "../../../node_modules/vexip-ui/components/card/props.ts", "../../../node_modules/vexip-ui/components/card/card.vue", "../../../node_modules/vexip-ui/components/carousel/props.ts", "../../../node_modules/vexip-ui/components/carousel/symbol.ts", "../../../node_modules/vexip-ui/components/carousel/carousel.vue", "../../../node_modules/vexip-ui/components/carousel/carousel.vue", "../../../node_modules/vexip-ui/components/carousel/carousel-item.vue", "../../../node_modules/vexip-ui/components/carousel/carousel-item.vue", "../../../node_modules/vexip-ui/components/checkbox/props.ts", "../../../node_modules/vexip-ui/components/checkbox/symbol.ts", "../../../node_modules/vexip-ui/components/checkbox/checkbox.vue", "../../../node_modules/vexip-ui/components/checkbox/checkbox.vue", "../../../node_modules/vexip-ui/components/cascader/cascader-panel.vue", "../../../node_modules/vexip-ui/components/cascader/cascader-panel.vue", "../../../node_modules/vexip-ui/components/cascader/props.ts", "../../../node_modules/vexip-ui/components/cascader/cascader.vue", "../../../node_modules/vexip-ui/components/cascader/cascader.vue", "../../../node_modules/vexip-ui/components/grid/props.ts", "../../../node_modules/vexip-ui/components/grid/helper.ts", "../../../node_modules/vexip-ui/components/grid/symbol.ts", "../../../node_modules/vexip-ui/components/grid/cell.ts", "../../../node_modules/vexip-ui/components/checkbox/checkbox-group.vue", "../../../node_modules/vexip-ui/components/checkbox/checkbox-group.vue", "../../../node_modules/vexip-ui/components/collapse/symbol.ts", "../../../node_modules/vexip-ui/components/collapse/collapse.vue", "../../../node_modules/vexip-ui/components/collapse/collapse.vue", "../../../node_modules/vexip-ui/components/collapse/collapse-panel.vue", "../../../node_modules/vexip-ui/components/collapse/collapse-panel.vue", "../../../node_modules/vexip-ui/components/input/props.ts", "../../../node_modules/vexip-ui/components/input/input.tsx", "../../../node_modules/vexip-ui/components/color-picker/color-palette.vue", "../../../node_modules/vexip-ui/components/color-picker/color-palette.vue", "../../../node_modules/vexip-ui/components/color-picker/color-hue.vue", "../../../node_modules/vexip-ui/components/color-picker/color-hue.vue", "../../../node_modules/vexip-ui/components/color-picker/color-alpha.vue", "../../../node_modules/vexip-ui/components/color-picker/color-alpha.vue", "../../../node_modules/vexip-ui/components/color-picker/props.ts", "../../../node_modules/vexip-ui/components/color-picker/symbol.ts", "../../../node_modules/vexip-ui/components/color-picker/color-picker.vue", "../../../node_modules/vexip-ui/components/config-provider/props.ts", "../../../node_modules/vexip-ui/components/config-provider/config-provider.tsx", "../../../node_modules/vexip-ui/components/masker/props.ts", "../../../node_modules/vexip-ui/components/masker/masker.vue", "../../../node_modules/vexip-ui/components/modal/props.ts", "../../../node_modules/vexip-ui/components/modal/symbol.ts", "../../../node_modules/vexip-ui/components/modal/modal.vue", "../../../node_modules/vexip-ui/components/modal/index.ts", "../../../node_modules/vexip-ui/components/confirm/props.ts", "../../../node_modules/vexip-ui/components/confirm/confirm.vue", "../../../node_modules/vexip-ui/components/confirm/index.ts", "../../../node_modules/vexip-ui/components/dropdown/symbol.ts", "../../../node_modules/vexip-ui/components/dropdown/dropdown-drop.ts", "../../../node_modules/vexip-ui/components/dropdown/props.ts", "../../../node_modules/vexip-ui/components/dropdown/hooks.ts", "../../../node_modules/vexip-ui/components/dropdown/dropdown.vue", "../../../node_modules/vexip-ui/components/dropdown/dropdown-list.vue", "../../../node_modules/vexip-ui/components/dropdown/dropdown-item.vue", "../../../node_modules/vexip-ui/components/contextmenu/render.tsx", "../../../node_modules/vexip-ui/components/contextmenu/contextmenu.vue", "../../../node_modules/vexip-ui/components/contextmenu/index.ts", "../../../node_modules/vexip-ui/components/date-picker/symbol.ts", "../../../node_modules/vexip-ui/components/date-picker/helper.ts", "../../../node_modules/vexip-ui/components/date-picker/date-control.vue", "../../../node_modules/vexip-ui/components/scroll/props.ts", "../../../node_modules/vexip-ui/components/scroll/hooks.ts", "../../../node_modules/vexip-ui/components/scroll/symbol.ts", "../../../node_modules/vexip-ui/components/scroll/scroll.vue", "../../../node_modules/vexip-ui/components/wheel/symbol.ts", "../../../node_modules/vexip-ui/components/wheel/wheel-item.vue", "../../../node_modules/vexip-ui/components/wheel/wheel-item.vue", "../../../node_modules/vexip-ui/components/wheel/props.ts", "../../../node_modules/vexip-ui/components/wheel/wheel.vue", "../../../node_modules/vexip-ui/components/date-picker/time-wheel.vue", "../../../node_modules/vexip-ui/components/date-picker/date-panel.vue", "../../../node_modules/vexip-ui/components/date-picker/props.ts", "../../../node_modules/vexip-ui/components/date-picker/date-picker.vue", "../../../node_modules/vexip-ui/components/divider/props.ts", "../../../node_modules/vexip-ui/components/divider/divider.vue", "../../../node_modules/vexip-ui/components/drawer/props.ts", "../../../node_modules/vexip-ui/components/drawer/symbol.ts", "../../../node_modules/vexip-ui/components/drawer/drawer.vue", "../../../node_modules/vexip-ui/components/ellipsis/props.ts", "../../../node_modules/vexip-ui/components/ellipsis/ellipsis.vue", "../../../node_modules/vexip-ui/components/form/form-item.vue", "../../../node_modules/vexip-ui/components/form/form-reset.vue", "../../../node_modules/vexip-ui/components/form/form-submit.vue", "../../../node_modules/vexip-ui/components/full-screen/props.ts", "../../../node_modules/vexip-ui/components/full-screen/symbol.ts", "../../../node_modules/vexip-ui/components/full-screen/full-screen.vue", "../../../node_modules/vexip-ui/components/grid/grid.ts", "../../../node_modules/vexip-ui/components/highlight/props.ts", "../../../node_modules/vexip-ui/components/highlight/highlight.vue", "../../../node_modules/vexip-ui/components/viewer/props.ts", "../../../node_modules/vexip-ui/components/viewer/symbol.ts", "../../../node_modules/vexip-ui/components/viewer/viewer.vue", "../../../node_modules/vexip-ui/components/image/props.ts", "../../../node_modules/vexip-ui/components/image/image-viewer.vue", "../../../node_modules/vexip-ui/components/skeleton/props.ts", "../../../node_modules/vexip-ui/components/skeleton/symbol.ts", "../../../node_modules/vexip-ui/components/skeleton/skeleton.tsx", "../../../node_modules/vexip-ui/components/image/symbol.ts", "../../../node_modules/vexip-ui/components/image/image.vue", "../../../node_modules/vexip-ui/components/image/image-group.vue", "../../../node_modules/vexip-ui/components/layout/props.ts", "../../../node_modules/vexip-ui/components/layout/symbol.ts", "../../../node_modules/vexip-ui/components/layout/helper.ts", "../../../node_modules/vexip-ui/components/layout/layout-main.tsx", "../../../node_modules/vexip-ui/components/menu/menu-rest.tsx", "../../../node_modules/vexip-ui/components/menu/menu.tsx", "../../../node_modules/vexip-ui/components/switch/props.ts", "../../../node_modules/vexip-ui/components/switch/switch.vue", "../../../node_modules/vexip-ui/components/switch/switch.vue", "../../../node_modules/vexip-ui/components/layout/layout-header.tsx", "../../../node_modules/vexip-ui/components/linker/props.ts", "../../../node_modules/vexip-ui/components/linker/linker.vue", "../../../node_modules/vexip-ui/components/layout/layout-footer.tsx", "../../../node_modules/vexip-ui/components/layout/layout-aside.tsx", "../../../node_modules/vexip-ui/components/layout/layout.tsx", "../../../node_modules/vexip-ui/components/loading/loading.vue", "../../../node_modules/vexip-ui/components/loading/index.ts", "../../../node_modules/vexip-ui/components/popup/symbol.ts", "../../../node_modules/vexip-ui/components/popup/popup-item.vue", "../../../node_modules/vexip-ui/components/popup/popup.vue", "../../../node_modules/vexip-ui/components/message/symbol.ts", "../../../node_modules/vexip-ui/components/message/message.vue", "../../../node_modules/vexip-ui/components/message/index.ts", "../../../node_modules/vexip-ui/components/notice/symbol.ts", "../../../node_modules/vexip-ui/components/notice/notice.vue", "../../../node_modules/vexip-ui/components/notice/index.ts", "../../../node_modules/vexip-ui/components/option/option-group.vue", "../../../node_modules/vexip-ui/components/option/option-group.vue", "../../../node_modules/vexip-ui/components/pagination/props.ts", "../../../node_modules/vexip-ui/components/pagination/pagination.tsx", "../../../node_modules/vexip-ui/components/progress/props.ts", "../../../node_modules/vexip-ui/components/progress/progress.vue", "../../../node_modules/vexip-ui/components/progress/progress.vue", "../../../node_modules/vexip-ui/components/radio/props.ts", "../../../node_modules/vexip-ui/components/radio/symbol.ts", "../../../node_modules/vexip-ui/components/radio/radio.vue", "../../../node_modules/vexip-ui/components/radio/radio-group.vue", "../../../node_modules/vexip-ui/components/result/props.ts", "../../../node_modules/vexip-ui/components/result/symbol.ts", "../../../node_modules/vexip-ui/components/result/result.vue", "../../../node_modules/vexip-ui/components/skeleton/skeleton-group.ts", "../../../node_modules/vexip-ui/components/slider/slider-trigger.vue", "../../../node_modules/vexip-ui/components/slider/props.ts", "../../../node_modules/vexip-ui/components/slider/slider.vue", "../../../node_modules/vexip-ui/components/space/props.ts", "../../../node_modules/vexip-ui/components/space/space.tsx", "../../../node_modules/vexip-ui/components/split/props.ts", "../../../node_modules/vexip-ui/components/split/split.vue", "../../../node_modules/vexip-ui/components/split/split.vue", "../../../node_modules/vexip-ui/components/tab-nav/props.ts", "../../../node_modules/vexip-ui/components/tab-nav/symbol.ts", "../../../node_modules/vexip-ui/components/tab-nav/tab-nav-item.vue", "../../../node_modules/vexip-ui/components/tab-nav/tab-nav-item.vue", "../../../node_modules/vexip-ui/components/tab-nav/tab-nav.vue", "../../../node_modules/vexip-ui/components/tab-nav/tab-nav.vue", "../../../node_modules/vexip-ui/components/tabs/props.ts", "../../../node_modules/vexip-ui/components/tabs/symbol.ts", "../../../node_modules/vexip-ui/components/tabs/tab-panel.vue", "../../../node_modules/vexip-ui/components/tabs/tab-panel.vue", "../../../node_modules/vexip-ui/components/table/props.ts", "../../../node_modules/vexip-ui/components/table/symbol.ts", "../../../node_modules/vexip-ui/components/table/table-column.ts", "../../../node_modules/vexip-ui/components/table/table-column-group.tsx", "../../../node_modules/vexip-ui/components/table/table-summary.ts", "../../../node_modules/vexip-ui/components/table/table-icon.vue", "../../../node_modules/vexip-ui/components/table/table-head-cell.vue", "../../../node_modules/vexip-ui/components/table/table-row.vue", "../../../node_modules/vexip-ui/components/table/table-head.vue", "../../../node_modules/vexip-ui/components/table/table-cell.vue", "../../../node_modules/vexip-ui/components/table/table-body.vue", "../../../node_modules/vexip-ui/components/table/table-foot-cell.vue", "../../../node_modules/vexip-ui/components/table/table-foot.vue", "../../../node_modules/vexip-ui/components/tree/hooks.ts", "../../../node_modules/vexip-ui/components/table/store.ts", "../../../node_modules/vexip-ui/components/table/table.vue", "../../../node_modules/vexip-ui/components/table/helper.ts", "../../../node_modules/vexip-ui/components/tabs/tabs.vue", "../../../node_modules/vexip-ui/components/tabs/tabs.vue", "../../../node_modules/vexip-ui/components/textarea/props.ts", "../../../node_modules/vexip-ui/components/textarea/textarea.vue", "../../../node_modules/vexip-ui/components/time-ago/helper.ts", "../../../node_modules/vexip-ui/components/time-ago/props.ts", "../../../node_modules/vexip-ui/components/time-ago/time-ago.vue", "../../../node_modules/vexip-ui/components/date-picker/time-control.vue", "../../../node_modules/vexip-ui/components/date-picker/time-picker.vue", "../../../node_modules/vexip-ui/components/timeline/props.ts", "../../../node_modules/vexip-ui/components/timeline/symbol.ts", "../../../node_modules/vexip-ui/components/timeline/timeline.vue", "../../../node_modules/vexip-ui/components/timeline/timeline-item.vue", "../../../node_modules/vexip-ui/components/toast/props.ts", "../../../node_modules/vexip-ui/components/toast/symbol.ts", "../../../node_modules/vexip-ui/components/toast/toast.vue", "../../../node_modules/vexip-ui/components/toast/index.ts", "../../../node_modules/vexip-ui/components/tour/props.ts", "../../../node_modules/vexip-ui/components/tour/symbol.ts", "../../../node_modules/vexip-ui/components/tour/tour.vue", "../../../node_modules/vexip-ui/components/tour/tour-step.ts", "../../../node_modules/vexip-ui/components/transfer/transfer-panel.tsx", "../../../node_modules/vexip-ui/components/transfer/props.ts", "../../../node_modules/vexip-ui/components/transfer/transfer.tsx", "../../../node_modules/vexip-ui/components/tree/symbol.ts", "../../../node_modules/vexip-ui/components/tree/tree-node.vue", "../../../node_modules/vexip-ui/components/tree/props.ts", "../../../node_modules/vexip-ui/components/tree/tree.vue", "../../../node_modules/vexip-ui/components/upload/props.ts", "../../../node_modules/vexip-ui/components/upload/file-icon.ts", "../../../node_modules/vexip-ui/components/upload/symbol.ts", "../../../node_modules/vexip-ui/components/upload/upload-file.vue", "../../../node_modules/vexip-ui/components/upload/upload-list.vue", "../../../node_modules/vexip-ui/components/upload/request.ts", "../../../node_modules/vexip-ui/components/upload/upload.tsx", "../../../node_modules/vexip-ui/components/video/props.ts", "../../../node_modules/vexip-ui/components/video/symbol.ts", "../../../node_modules/vexip-ui/components/video/video-control.vue", "../../../node_modules/vexip-ui/components/video/helper.ts", "../../../node_modules/vexip-ui/components/video/video-progress.vue", "../../../node_modules/vexip-ui/components/video/video-timer.vue", "../../../node_modules/vexip-ui/components/video/video-volume.vue", "../../../node_modules/vexip-ui/components/video/video.tsx", "../../../node_modules/vexip-ui/components/typography/props.ts", "../../../node_modules/vexip-ui/components/typography/title.tsx", "../../../node_modules/vexip-ui/components/typography/text.tsx", "../../../node_modules/vexip-ui/components/typography/blockquote.tsx", "../../../node_modules/vexip-ui/components/typography/ol.tsx", "../../../node_modules/vexip-ui/components/typography/ul.tsx", "../../../node_modules/vexip-ui/components/typography/h.tsx", "../../../node_modules/vexip-ui/components/typography/p.tsx", "../../../node_modules/vexip-ui/components/typography/strong.tsx", "../../../node_modules/vexip-ui/components/create.ts", "../../../node_modules/vexip-ui/components/version.ts", "../../../node_modules/vexip-ui/components/index.ts"],
  "sourcesContent": ["import { booleanProp, buildProps, classProp, eventProp, iconProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const spinProps = buildProps({\n  active: booleanProp,\n  icon: iconProp,\n  inner: booleanProp,\n  delay: {\n    type: [Boolean, Number, Array] as PropType<boolean | number | number[]>,\n    default: null\n  },\n  tip: String,\n  hideMask: booleanProp,\n  maskColor: String,\n  maskClass: classProp,\n  transitionName: String,\n  iconEffect: String as PropType<IconEffect>,\n  onMaskClick: eventProp<(event: MouseEvent) => void>(),\n  onShow: eventProp(),\n  onHide: eventProp()\n})\n\nexport type SpinProps = ExtractPropTypes<typeof spinProps>\nexport type SpinCProps = ConfigurableProps<SpinProps>\n", "<template>\n  <div\n    v-if=\"!props.inner\"\n    :class=\"[nh.b(), nh.bs('vars'), props.inherit && nh.bm('inherit')]\"\n    :aria-busy=\"currentActive ? 'true' : undefined\"\n  >\n    <slot></slot>\n    <Transition\n      appear\n      :name=\"props.transitionName\"\n      @after-enter=\"handleShow\"\n      @after-leave=\"handleHide\"\n    >\n      <div v-if=\"currentActive\" :class=\"nh.be('loading')\">\n        <div\n          v-if=\"!props.hideMask\"\n          :class=\"[nh.be('mask'), props.maskClass]\"\n          :style=\"maskStyle\"\n          @click=\"handleMaskClick\"\n        ></div>\n        <slot name=\"content\">\n          <div :class=\"nh.be('icon')\">\n            <slot name=\"icon\">\n              <Icon\n                v-bind=\"icons.loading\"\n                :icon=\"props.icon || icons.loading.icon\"\n                :effect=\"props.iconEffect || icons.loading.effect\"\n                label=\"loading\"\n              ></Icon>\n            </slot>\n          </div>\n          <div v-if=\"hasTip\" :class=\"nh.be('tip')\">\n            <slot name=\"tip\">\n              {{ props.tip }}\n            </slot>\n          </div>\n        </slot>\n      </div>\n    </Transition>\n  </div>\n  <Transition\n    v-else\n    appear\n    :name=\"props.transitionName\"\n    @after-enter=\"handleShow\"\n    @after-leave=\"handleHide\"\n  >\n    <div v-if=\"currentActive\" :class=\"[nh.b(), nh.bs('vars'), nh.bm('inner')]\">\n      <div\n        v-if=\"!props.hideMask\"\n        :class=\"[nh.be('mask'), props.maskClass]\"\n        :style=\"maskStyle\"\n        @click=\"handleMaskClick\"\n      ></div>\n      <slot name=\"content\">\n        <div :class=\"nh.be('icon')\">\n          <slot name=\"icon\">\n            <Icon\n              v-bind=\"icons.loading\"\n              :icon=\"props.icon || icons.loading.icon\"\n              :effect=\"props.iconEffect || icons.loading.effect\"\n              label=\"loading\"\n            ></Icon>\n          </slot>\n        </div>\n        <div v-if=\"hasTip\" :class=\"nh.be('tip')\">\n          <slot name=\"tip\">\n            {{ props.tip }}\n          </slot>\n        </div>\n      </slot>\n    </div>\n  </Transition>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport { createIconProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { toNumber } from '@vexip-ui/utils'\nimport { spinProps } from './props'\n\nexport default defineComponent({\n  name: 'Spin',\n  components: {\n    Icon\n  },\n  props: spinProps,\n  setup(_props, { slots }) {\n    const nh = useNameHelper('spin')\n    const props = useProps('spin', _props, {\n      active: {\n        default: false,\n        static: true\n      },\n      icon: createIconProp(),\n      inner: false,\n      delay: false,\n      tip: '',\n      hideMask: false,\n      maskColor: '',\n      maskClass: null,\n      transitionName: () => nh.ns('fade'),\n      iconEffect: null\n    })\n\n    const currentActive = ref(props.active)\n\n    const hasTip = computed(() => !!(props.tip || slots.tip))\n    const maskStyle = computed(() => {\n      const style = {} as any\n\n      if (props.maskColor) {\n        style[nh.cv('mask-bg-color')] = props.maskColor\n      }\n\n      return style\n    })\n    const delayTime = computed(() => {\n      if (props.delay) {\n        if (props.delay === true) {\n          return { enter: 500, leave: 500 }\n        }\n\n        if (typeof props.delay === 'number') {\n          return { enter: props.delay, leave: props.delay }\n        }\n\n        if (Array.isArray(props.delay)) {\n          return { enter: toNumber(props.delay[0]), leave: toNumber(props.delay[1]) }\n        }\n      }\n\n      return { enter: 0, leave: 0 }\n    })\n\n    let timer: ReturnType<typeof setTimeout>\n\n    watch(\n      () => props.active,\n      value => {\n        clearTimeout(timer)\n\n        const delay = value ? delayTime.value.enter : delayTime.value.leave\n\n        if (delay) {\n          timer = setTimeout(() => {\n            currentActive.value = value\n          }, delay)\n        } else {\n          currentActive.value = value\n        }\n      }\n    )\n\n    function handleMaskClick(event: MouseEvent) {\n      emitEvent(props.onMaskClick, event)\n    }\n\n    function handleShow() {\n      emitEvent(props.onShow)\n    }\n\n    function handleHide() {\n      emitEvent(props.onHide)\n    }\n\n    return {\n      props,\n      nh,\n      icons: useIcons(),\n\n      currentActive,\n\n      hasTip,\n      maskStyle,\n\n      handleMaskClick,\n      handleShow,\n      handleHide\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    v-if=\"!props.inner\"\n    :class=\"[nh.b(), nh.bs('vars'), props.inherit && nh.bm('inherit')]\"\n    :aria-busy=\"currentActive ? 'true' : undefined\"\n  >\n    <slot></slot>\n    <Transition\n      appear\n      :name=\"props.transitionName\"\n      @after-enter=\"handleShow\"\n      @after-leave=\"handleHide\"\n    >\n      <div v-if=\"currentActive\" :class=\"nh.be('loading')\">\n        <div\n          v-if=\"!props.hideMask\"\n          :class=\"[nh.be('mask'), props.maskClass]\"\n          :style=\"maskStyle\"\n          @click=\"handleMaskClick\"\n        ></div>\n        <slot name=\"content\">\n          <div :class=\"nh.be('icon')\">\n            <slot name=\"icon\">\n              <Icon\n                v-bind=\"icons.loading\"\n                :icon=\"props.icon || icons.loading.icon\"\n                :effect=\"props.iconEffect || icons.loading.effect\"\n                label=\"loading\"\n              ></Icon>\n            </slot>\n          </div>\n          <div v-if=\"hasTip\" :class=\"nh.be('tip')\">\n            <slot name=\"tip\">\n              {{ props.tip }}\n            </slot>\n          </div>\n        </slot>\n      </div>\n    </Transition>\n  </div>\n  <Transition\n    v-else\n    appear\n    :name=\"props.transitionName\"\n    @after-enter=\"handleShow\"\n    @after-leave=\"handleHide\"\n  >\n    <div v-if=\"currentActive\" :class=\"[nh.b(), nh.bs('vars'), nh.bm('inner')]\">\n      <div\n        v-if=\"!props.hideMask\"\n        :class=\"[nh.be('mask'), props.maskClass]\"\n        :style=\"maskStyle\"\n        @click=\"handleMaskClick\"\n      ></div>\n      <slot name=\"content\">\n        <div :class=\"nh.be('icon')\">\n          <slot name=\"icon\">\n            <Icon\n              v-bind=\"icons.loading\"\n              :icon=\"props.icon || icons.loading.icon\"\n              :effect=\"props.iconEffect || icons.loading.effect\"\n              label=\"loading\"\n            ></Icon>\n          </slot>\n        </div>\n        <div v-if=\"hasTip\" :class=\"nh.be('tip')\">\n          <slot name=\"tip\">\n            {{ props.tip }}\n          </slot>\n        </div>\n      </slot>\n    </div>\n  </Transition>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport { createIconProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { toNumber } from '@vexip-ui/utils'\nimport { spinProps } from './props'\n\nexport default defineComponent({\n  name: 'Spin',\n  components: {\n    Icon\n  },\n  props: spinProps,\n  setup(_props, { slots }) {\n    const nh = useNameHelper('spin')\n    const props = useProps('spin', _props, {\n      active: {\n        default: false,\n        static: true\n      },\n      icon: createIconProp(),\n      inner: false,\n      delay: false,\n      tip: '',\n      hideMask: false,\n      maskColor: '',\n      maskClass: null,\n      transitionName: () => nh.ns('fade'),\n      iconEffect: null\n    })\n\n    const currentActive = ref(props.active)\n\n    const hasTip = computed(() => !!(props.tip || slots.tip))\n    const maskStyle = computed(() => {\n      const style = {} as any\n\n      if (props.maskColor) {\n        style[nh.cv('mask-bg-color')] = props.maskColor\n      }\n\n      return style\n    })\n    const delayTime = computed(() => {\n      if (props.delay) {\n        if (props.delay === true) {\n          return { enter: 500, leave: 500 }\n        }\n\n        if (typeof props.delay === 'number') {\n          return { enter: props.delay, leave: props.delay }\n        }\n\n        if (Array.isArray(props.delay)) {\n          return { enter: toNumber(props.delay[0]), leave: toNumber(props.delay[1]) }\n        }\n      }\n\n      return { enter: 0, leave: 0 }\n    })\n\n    let timer: ReturnType<typeof setTimeout>\n\n    watch(\n      () => props.active,\n      value => {\n        clearTimeout(timer)\n\n        const delay = value ? delayTime.value.enter : delayTime.value.leave\n\n        if (delay) {\n          timer = setTimeout(() => {\n            currentActive.value = value\n          }, delay)\n        } else {\n          currentActive.value = value\n        }\n      }\n    )\n\n    function handleMaskClick(event: MouseEvent) {\n      emitEvent(props.onMaskClick, event)\n    }\n\n    function handleShow() {\n      emitEvent(props.onShow)\n    }\n\n    function handleHide() {\n      emitEvent(props.onHide)\n    }\n\n    return {\n      props,\n      nh,\n      icons: useIcons(),\n\n      currentActive,\n\n      hasTip,\n      maskStyle,\n\n      handleMaskClick,\n      handleShow,\n      handleHide\n    }\n  }\n})\n</script>\n", "import { Spin } from '@/components/spin'\n\nimport { createVNode, nextTick, render } from 'vue'\n\nimport { isObject } from '@vexip-ui/utils'\n\nimport type { SpinProps } from '@/components/spin'\nimport type { DirectiveBinding, ObjectDirective, VNode } from 'vue'\n\ninterface LoadingRecord {\n  spin: VNode,\n  props: SpinProps,\n  originPosition: string\n}\n\nfunction createSpin(\n  el: HTMLElement & { __loading?: LoadingRecord },\n  binding: DirectiveBinding<boolean | SpinProps>\n) {\n  const props: SpinProps = isObject(binding.value)\n    ? { ...binding.value }\n    : { active: binding.value }\n\n  props.inner = true\n\n  const spin = createVNode(Spin, props, null, 0, Object.keys(props))\n  const position = getComputedStyle(el).position\n\n  el.__loading = {\n    spin,\n    props,\n    originPosition: position\n  }\n\n  if (position === 'static') {\n    el.style.position = 'relative'\n  }\n\n  render(spin, el)\n}\n\nexport const vLoading: ObjectDirective<\n  HTMLElement & { __loading?: LoadingRecord },\n  boolean | SpinProps\n> = {\n  mounted(el, binding) {\n    nextTick(() => createSpin(el, binding))\n  },\n  updated(el, binding) {\n    nextTick(() => {\n      if (!el.__loading) {\n        createSpin(el, binding)\n        return\n      }\n\n      const props: SpinProps = isObject(binding.value) ? binding.value : { active: binding.value }\n      const component = el.__loading.spin.component\n\n      if (component) {\n        Object.keys(props).forEach(key => {\n          component.props[key] = props[key as keyof SpinProps]\n        })\n\n        component.props.inner = true\n      }\n    })\n  },\n  beforeUnmount(el) {\n    if (!el.__loading) return\n\n    render(null, el)\n    delete el.__loading\n  }\n}\n", "import { useResize } from '@vexip-ui/hooks'\nimport { noop, throttle } from '@vexip-ui/utils'\n\nimport type { DirectiveBinding, ObjectDirective } from 'vue'\nimport type { ResizeHandler } from '@vexip-ui/hooks'\n\nconst { observeResize, unobserveResize } = useResize()\n\nexport interface VResizeOptions {\n  handler: ResizeHandler,\n  throttle?: boolean | number,\n  disabled?: boolean\n}\n\ninterface ResizeRecord {\n  useThrottle: boolean | number,\n  observed: boolean\n}\n\nfunction createObserver(\n  el: HTMLElement & { __resize?: ResizeRecord },\n  binding: DirectiveBinding<ResizeHandler | VResizeOptions>\n) {\n  const options: VResizeOptions =\n    typeof binding.value === 'function' ? { handler: binding.value } : { ...binding.value }\n  const useThrottle = options.throttle || binding.modifiers.throttle\n\n  el.__resize = {\n    useThrottle,\n    observed: false\n  }\n\n  if (options.disabled) {\n    unobserveResize(el)\n    el.__resize.observed = false\n    return\n  }\n\n  const throttleResize = useThrottle\n    ? throttle(options.handler, typeof useThrottle === 'boolean' ? 16 : useThrottle)\n    : options.handler\n\n  observeResize(el, throttleResize)\n  el.__resize.observed = true\n}\n\nexport const vResize: ObjectDirective<\n  HTMLElement & { __resize?: ResizeRecord },\n  ResizeHandler | VResizeOptions\n> = {\n  mounted(el, binding) {\n    createObserver(el, binding)\n  },\n  updated(el, binding) {\n    if (!el.__resize) {\n      createObserver(el, binding)\n      return\n    }\n\n    const options: VResizeOptions =\n      typeof binding.value === 'function' ? { handler: binding.value } : { ...binding.value }\n    const useThrottle = options.throttle || binding.modifiers.throttle\n\n    const getHandler = () =>\n      useThrottle\n        ? throttle(options.handler, typeof useThrottle === 'boolean' ? 16 : useThrottle)\n        : options.handler\n\n    if (options.disabled) {\n      if (el.__resize.observed) {\n        unobserveResize(el)\n        el.__resize.observed = false\n      }\n    } else if (!el.__resize.observed) {\n      observeResize(el, getHandler())\n      el.__resize.observed = true\n    } else {\n      const prevOptions: VResizeOptions =\n        typeof binding.oldValue === 'function'\n          ? { handler: binding.oldValue }\n          : { ...(binding.oldValue || { handler: noop }) }\n\n      if (useThrottle !== el.__resize.useThrottle || options.handler !== prevOptions.handler) {\n        unobserveResize(el)\n        observeResize(el, getHandler())\n      }\n    }\n  },\n  beforeUnmount(el) {\n    if (el.__resize?.observed) {\n      unobserveResize(el)\n    }\n\n    delete el.__resize\n  }\n}\n", "import { vLoading } from './loading'\nimport { vResize } from './resize'\n\nimport type { App } from 'vue'\n\nexport function installDirectives(app: App) {\n  app.directive('loading', vLoading)\n  app.directive('resize', vResize)\n}\n\nexport * from './loading'\nexport * from './resize'\n", "import { buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { AffixPositionType } from './symbol'\n\nexport const affixProps = buildProps({\n  offset: Number,\n  zIndex: Number,\n  position: String as PropType<AffixPositionType>,\n  target: [String, Object, Function] as PropType<unknown>,\n\n  onScroll: eventProp(),\n  onChange: eventProp()\n})\n\nexport type AffixProps = ExtractPropTypes<typeof affixProps>\nexport type AffixCProps = ConfigurableProps<ExtractPropTypes<typeof affixProps>>\n", "import { unref } from 'vue'\n\nimport type { MaybeRef } from 'vue'\n\nlet lastScroller: Window | HTMLElement | null | undefined = null\n\nexport function handleLastScroller(target: MaybeRef<HTMLElement | null | undefined>) {\n  target = unref(target)\n\n  if (lastScroller !== unref(target)) {\n    if (lastScroller && lastScroller !== window && lastScroller !== document.documentElement) {\n      const targetAffix = (lastScroller as HTMLElement).querySelector(\n        '.vxp-affix--fixed'\n      ) as HTMLElement\n\n      if (targetAffix) {\n        targetAffix.classList.remove('vxp-affix--fixed')\n      }\n    }\n\n    lastScroller = target\n  }\n}\n\nexport function clearLastScroller(target: MaybeRef<HTMLElement | null | undefined>) {\n  if (lastScroller && lastScroller === unref(target)) {\n    lastScroller = null\n  }\n}\n", "<script setup lang=\"ts\">\nimport {\n  computed,\n  getCurrentInstance,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n  shallowRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { affixProps } from './props'\nimport { callIfFunc, isClient, isElement } from '@vexip-ui/utils'\nimport { clearLastScroller, handleLastScroller } from './helpers'\n\nimport type { NativeScrollExposed } from '@/components/native-scroll'\nimport type { ScrollExposed } from '@/components/scroll'\n\nimport type { CSSProperties, ComponentInternalInstance } from 'vue'\n\ntype ScrollType = NativeScrollExposed & ScrollExposed\n\ndefineOptions({ name: 'Affix' })\n\nconst _props = defineProps(affixProps)\nconst props = useProps('affix', _props, {\n  offset: 0,\n  zIndex: 100,\n  position: 'top',\n  target: null\n})\n\nconst nh = useNameHelper('affix')\n\nconst instance = getCurrentInstance()!\n\nconst wrapper = shallowRef<HTMLElement>()\nconst target = shallowRef<HTMLElement>()\nconst container = shallowRef<Window | HTMLElement>()\n\nlet isRawViewer = false\nlet scroller: ScrollType | null = null\n\nconst fixed = ref(false)\nconst affixHeight = ref(0)\nconst affixWidth = ref(0)\nconst scrollTop = ref(0)\nconst clientHeight = ref(0)\nconst transform = ref(0)\n\nconst affixStyle = computed<CSSProperties>(() => {\n  return {\n    height: fixed.value ? `${affixHeight.value}px` : '',\n    width: fixed.value ? `${affixWidth.value}px` : ''\n  }\n})\nconst fixedStyle = computed<CSSProperties>(() => {\n  if (!fixed.value) return {}\n\n  let _top = props.offset\n  let _bottom = props.offset\n\n  if (isElement(container.value)) {\n    if (props.target && props.position === 'top') {\n      _top += transform.value\n    } else {\n      _bottom += transform.value\n    }\n  }\n\n  return {\n    height: `${affixHeight.value}px`,\n    width: `${affixWidth.value}px`,\n    top: props.position === 'top' ? `${_top}px` : '',\n    bottom: props.position === 'bottom' ? `${_bottom}px` : '',\n    zIndex: props.zIndex\n  }\n})\n\nwatchEffect(update)\nwatch(fixed, fixed => {\n  emitEvent(props.onChange, fixed)\n})\n\ndefineExpose({ update })\n\nonMounted(() => {\n  if (props.target) {\n    const _target: unknown = callIfFunc(props.target)\n\n    if (typeof _target === 'string') {\n      target.value = document.querySelector<HTMLElement>(_target) ?? undefined\n\n      if (!target.value) {\n        throw new Error(`[vexip-ui:Affix] target not exists: ${props.target}`)\n      }\n    } else {\n      target.value = _target as any\n    }\n  } else {\n    target.value = document.documentElement\n  }\n\n  updateContainer()\n})\n\nonBeforeUnmount(() => {\n  removeListener()\n})\n\nfunction update() {\n  if (!wrapper.value || !target.value || !container.value) return\n\n  const wrapperRect = wrapper.value.getBoundingClientRect()\n  const targetRect = target.value.getBoundingClientRect()\n\n  affixHeight.value = wrapperRect.height\n  affixWidth.value = wrapperRect.width\n  scrollTop.value =\n    container.value === window\n      ? document.documentElement.scrollTop\n      : (container.value as unknown as ScrollType).scrollY || 0\n  scrollTop.value = document.documentElement.scrollTop\n  clientHeight.value = document.documentElement.clientHeight\n\n  if (props.position === 'top') {\n    if (props.target) {\n      transform.value = targetRect.top\n      fixed.value = wrapperRect.top < targetRect.top + props.offset\n    } else {\n      fixed.value = props.offset > wrapperRect.top\n    }\n  } else {\n    if (props.target) {\n      transform.value = clientHeight.value - targetRect.bottom\n      fixed.value = targetRect.bottom < props.offset + wrapperRect.bottom\n    } else {\n      fixed.value = clientHeight.value - props.offset < wrapperRect.bottom\n    }\n  }\n}\n\nfunction handleContainerScroll() {\n  handleLastScroller(target)\n  update()\n\n  emitEvent(props.onScroll, {\n    scrollTop: scrollTop.value,\n    fixed: fixed.value\n  })\n}\n\nfunction updateContainer() {\n  removeListener()\n\n  if (!isClient) return\n\n  if (props.target) {\n    container.value = target.value!\n    container.value.addEventListener('scroll', handleContainerScroll)\n  } else {\n    let _container: ComponentInternalInstance | null = instance.parent!\n    const refName = 'scroll'\n\n    while (_container) {\n      const name = _container.type?.name\n\n      if (name === 'Scroll' || name === 'NativeScroll') {\n        const { exposeProxy, exposed, proxy } = _container\n        const _scroller = new Proxy({} as any, {\n          get(_, key) {\n            return (proxy as any)?.[key] ?? (exposeProxy as any)?.[key] ?? (exposed as any)?.[key]\n          }\n        })\n        const scrollerEl = _scroller?.$el as HTMLElement\n\n        if (!scrollerEl.getAttribute('class')?.includes('vxp-native-scroll--horizontal')) {\n          scroller = _scroller\n          break\n        }\n      }\n\n      const refTemp = _container.refs?.[refName]\n\n      if (refTemp) {\n        if (isElement(refTemp)) {\n          isRawViewer = true\n          container.value = refTemp as HTMLElement\n        } else {\n          scroller = refTemp as ScrollType\n        }\n\n        break\n      }\n\n      _container = _container.parent\n    }\n\n    if (scroller) {\n      scroller.addScrollListener(handleContainerScroll)\n      container.value = scroller.$el\n    } else if (!container.value) {\n      isRawViewer = true\n      container.value = window\n    }\n\n    if (isRawViewer && container.value) {\n      container.value.addEventListener('scroll', handleContainerScroll)\n    }\n  }\n}\n\nfunction removeListener() {\n  if (scroller) {\n    scroller.removeScrollListener(handleContainerScroll)\n    scroller = null\n  }\n\n  if (container.value) {\n    container.value.removeEventListener('scroll', handleContainerScroll)\n    container.value = undefined\n  }\n\n  clearLastScroller(target)\n}\n</script>\n\n<template>\n  <div ref=\"wrapper\" :class=\"nh.b()\" :style=\"affixStyle\">\n    <div :class=\"{ [nh.bm('fixed')]: fixed }\" :style=\"fixedStyle\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n", "import { booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { AlertType } from './symbol'\n\nexport const alertProps = buildProps({\n  type: String as PropType<AlertType>,\n  title: String,\n  colorfulText: booleanProp,\n  icon: {\n    type: [Boolean, Object, Function],\n    default: null\n  },\n  closable: booleanProp,\n  iconColor: String,\n  noBorder: booleanProp,\n  banner: booleanProp,\n  manual: booleanProp,\n  scroll: booleanProp,\n  scrollSpeed: Number,\n  color: String,\n  onClose: eventProp(),\n  onHide: eventProp(),\n  onScrollEnd: eventProp()\n})\n\nexport type AlertProps = ExtractPropTypes<typeof alertProps>\nexport type AlertCProps = ConfigurableProps<ExtractPropTypes<typeof alertProps>>\n", "export type AlertType = 'default' | 'primary' | 'info' | 'success' | 'warning' | 'error'\n\nexport const alertTypes = Object.freeze<AlertType[]>([\n  'default',\n  'primary',\n  'info',\n  'success',\n  'warning',\n  'error'\n])\n", "<script setup lang=\"ts\">\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Icon } from '@/components/icon'\n\nimport { computed, onMounted, ref, watch } from 'vue'\n\nimport { emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { adjustAlpha, getRangeWidth, isClient, mixColor, parseColorToRgba } from '@vexip-ui/utils'\nimport { alertProps } from './props'\nimport { alertTypes } from './symbol'\n\ndefineOptions({ name: 'Alert' })\n\nconst _props = defineProps(alertProps)\nconst props = useProps('alert', _props, {\n  type: {\n    default: 'primary',\n    validator: value => alertTypes.includes(value)\n  },\n  title: '',\n  colorfulText: false,\n  icon: {\n    isFunc: true,\n    default: false\n  },\n  closable: false,\n  iconColor: '',\n  noBorder: false,\n  banner: false,\n  manual: false,\n  scroll: false,\n  scrollSpeed: 1,\n  color: null\n})\n\nconst slots = defineSlots<{\n  default: () => any,\n  title: () => any,\n  close: () => any,\n  icon: () => any\n}>()\n\nconst nh = useNameHelper('alert')\nconst icons = useIcons()\n\nconst predefinedIcons = computed(() => ({\n  default: icons.value.alert,\n  primary: icons.value.info,\n  info: icons.value.info,\n  success: icons.value.success,\n  warning: icons.value.warning,\n  error: icons.value.error\n}))\n\nconst closed = ref(false)\nconst hidden = ref(false)\nconst scrollDuration = ref(0)\nconst scrollOffset = ref(0)\nconst scrollWidth = ref(0)\n\nconst content = ref<HTMLElement>()\nconst scrollEl = ref<HTMLElement>()\n\nconst hasTitle = computed(() => {\n  return !!(props.title || slots.title)\n})\nconst hasIcon = computed(() => {\n  return !!(props.icon || slots.icon)\n})\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm(props.type)]: props.type,\n    [nh.bm('colorful-text')]: props.colorfulText,\n    [nh.bm('has-title')]: hasTitle.value,\n    [nh.bm('has-icon')]: hasIcon.value,\n    [nh.bm('closable')]: props.closable,\n    [nh.bm('no-border')]: !props.banner && props.noBorder,\n    [nh.bm('banner')]: props.banner\n  }\n})\nconst style = computed(() => {\n  if (!props.color) return undefined\n\n  const rootStyle = isClient ? getComputedStyle(document.documentElement) : null\n  const black = parseColorToRgba(rootStyle?.getPropertyValue(nh.nv('color-black')) || '#000')\n  const baseColor = parseColorToRgba(props.color)\n\n  return nh.cvm({\n    'bg-color': adjustAlpha(baseColor, 0.2).toString(),\n    'b-color': adjustAlpha(baseColor, 0.5).toString(),\n    'icon-color': mixColor(black, baseColor, 0.2).toString(),\n    ...(props.colorfulText\n      ? {\n          'text-color': mixColor(black, baseColor, 0.2).toString(),\n          'title-color': mixColor(black, baseColor, 0.2).toString()\n        }\n      : {})\n  })\n})\nconst iconComp = computed(() => {\n  if (typeof props.icon === 'boolean') {\n    return predefinedIcons.value[props.type] ?? {}\n  }\n\n  return { icon: props.icon }\n})\nconst scrollStyle = computed(() => {\n  return {\n    width: `${scrollWidth.value}px`,\n    transitionDuration: `${scrollDuration.value}ms`,\n    transform: `translateX(${scrollOffset.value}px)`\n  }\n})\n\nwatch(\n  () => props.scroll,\n  value => {\n    value && startScroll()\n  }\n)\n\nonMounted(() => {\n  props.scroll && startScroll()\n})\n\nfunction handleClose() {\n  if (!props.manual) {\n    closed.value = true\n  }\n\n  emitEvent(props.onClose)\n}\n\nfunction handleAfterLeave() {\n  emitEvent(props.onHide)\n  hidden.value = true\n}\n\nfunction startScroll() {\n  if (content.value && scrollEl.value) {\n    const contentRect = content.value.getBoundingClientRect()\n    const rangeWidth = getRangeWidth(scrollEl.value)\n    const duration = ((contentRect.width + rangeWidth) * 12) / (Math.max(props.scrollSpeed, 0) || 1)\n\n    scrollDuration.value = 0\n    scrollOffset.value = contentRect.width\n    scrollWidth.value = rangeWidth\n\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        scrollDuration.value = duration\n        scrollOffset.value = -rangeWidth\n      })\n    })\n  }\n}\n\nfunction handleScrollEnd() {\n  emitEvent(props.onScrollEnd)\n  requestAnimationFrame(startScroll)\n}\n</script>\n\n<template>\n  <CollapseTransition v-if=\"!hidden\" fade-effect @after-leave=\"handleAfterLeave\">\n    <div\n      v-if=\"!closed\"\n      :class=\"className\"\n      role=\"alert\"\n      :style=\"style\"\n    >\n      <div :class=\"nh.be('wrapper')\">\n        <div v-if=\"hasTitle\" :class=\"nh.be('title')\">\n          <slot name=\"title\">\n            {{ title }}\n          </slot>\n        </div>\n        <div ref=\"content\" :class=\"[nh.be('content'), props.scroll && nh.bem('content', 'scroll')]\">\n          <span\n            v-if=\"props.scroll\"\n            ref=\"scrollEl\"\n            :class=\"nh.be('scroll')\"\n            :style=\"scrollStyle\"\n            @transitionend=\"handleScrollEnd\"\n          >\n            <slot></slot>\n          </span>\n          <slot v-else></slot>\n        </div>\n      </div>\n      <button\n        v-if=\"props.closable\"\n        type=\"button\"\n        :class=\"nh.be('close')\"\n        @click=\"handleClose\"\n      >\n        <slot name=\"close\">\n          <Icon v-bind=\"icons.close\" label=\"close\"></Icon>\n        </slot>\n      </button>\n      <div v-if=\"hasIcon\" :class=\"nh.be('icon')\">\n        <slot name=\"icon\">\n          <Icon\n            v-bind=\"iconComp\"\n            :scale=\"hasTitle ? 2 : 1\"\n            :style=\"{ color: props.iconColor }\"\n          ></Icon>\n        </slot>\n      </div>\n    </div>\n  </CollapseTransition>\n</template>\n", "import { booleanProp, buildProps, eventProp, wrapProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { AnchorLinkOptions } from './symbol'\n\nexport const anchorProps = buildProps({\n  active: String,\n  viewer: [String, Object, Function] as PropType<unknown>,\n  offset: Number,\n  marker: booleanProp,\n  scrollDuration: Number,\n  markerTransition: String,\n  options: Array as PropType<AnchorLinkOptions[]>,\n  bindHash: booleanProp,\n  forceActive: booleanProp,\n  onChange: eventProp<(value: string) => void>()\n})\n\nexport type AnchorProps = ExtractPropTypes<typeof anchorProps>\nexport type AnchorCProps = ConfigurableProps<AnchorProps, 'viewer'>\n\nexport const anchorLinkProps = wrapProps({\n  to: {\n    type: String,\n    default: ''\n  },\n  title: {\n    type: String,\n    default: ''\n  },\n  children: {\n    type: Array as PropType<AnchorLinkOptions[]>,\n    default: () => []\n  }\n})\n\nexport type AnchorLinkProps = ExtractPropTypes<typeof anchorLinkProps>\n", "import type { InjectionKey } from 'vue'\n\nexport interface AnchorLinkOptions {\n  to: string,\n  label: string,\n  title?: string,\n  children?: AnchorLinkOptions[]\n}\n\nexport interface AnchorLinkState {\n  el?: HTMLElement,\n  to: string,\n  active: boolean,\n  indent: number\n}\n\nexport interface AnchorState {\n  currentActive: string,\n  increaseLink(state: AnchorLinkState): void,\n  decreaseLink(state: AnchorLinkState): void,\n  handleActive(label: string): void\n}\n\nexport const baseIndentWidth = 14 // px\nexport const LINK_STATE: InjectionKey<AnchorLinkState> = Symbol('ANCHOR_LINK_STATE')\nexport const ANCHOR_STATE: InjectionKey<AnchorState> = Symbol('ANCHOR_STATE')\n", "<script setup lang=\"ts\">\nimport {\n  computed,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRef,\n  watch\n} from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { anchorLinkProps } from './props'\nimport { ANCHOR_STATE, LINK_STATE, baseIndentWidth } from './symbol'\n\ndefineOptions({ name: 'AnchorLink' })\n\nconst props = defineProps(anchorLinkProps)\n\nconst anchorState = inject(ANCHOR_STATE, null)\nconst parentLinkState = inject(LINK_STATE, null)\n\nconst nh = useNameHelper('anchor')\nconst indent = ref(parentLinkState?.indent ? parentLinkState?.indent + 1 : 1)\nconst active = ref(false)\n\nconst link = ref<HTMLElement>()\n\nconst state = reactive({\n  el: link,\n  to: toRef(props, 'to'),\n  active,\n  indent\n})\n\nconst linkClass = computed(() => {\n  return {\n    [nh.be('link')]: true,\n    [nh.bem('link', 'active')]: state.active\n  }\n})\nconst linkStyle = computed(() => {\n  return {\n    paddingInlineStart: `${baseIndentWidth * indent.value}px`\n  }\n})\n\nprovide(LINK_STATE, state)\n\nif (anchorState) {\n  watch(\n    () => anchorState.currentActive,\n    value => {\n      active.value = value === props.to\n    }\n  )\n\n  onMounted(() => {\n    anchorState.increaseLink(state)\n  })\n\n  onBeforeUnmount(() => {\n    anchorState.decreaseLink(state)\n  })\n}\n\nfunction handleSelect() {\n  if (anchorState) {\n    anchorState.handleActive(props.to)\n  }\n\n  return false\n}\n</script>\n\n<template>\n  <li :class=\"nh.be('item')\">\n    <a\n      ref=\"link\"\n      :class=\"linkClass\"\n      :href=\"to\"\n      :style=\"linkStyle\"\n      :title=\"title\"\n      @click.prevent=\"handleSelect\"\n    >\n      <slot></slot>\n    </a>\n    <ul v-if=\"$slots.group || (children && children.length)\" :class=\"nh.be('list')\">\n      <slot name=\"group\">\n        <template v-if=\"children && children.length\">\n          <AnchorLink\n            v-for=\"child in children\"\n            :key=\"child.to\"\n            :to=\"child.to\"\n            :title=\"child.title\"\n            :children=\"child.children\"\n          >\n            {{ child.label }}\n          </AnchorLink>\n        </template>\n      </slot>\n    </ul>\n  </li>\n</template>\n", "export interface ScrollElement {\n  scrollTo(x: number, y: number): void,\n  [prop: string]: any\n}\n\nexport function animateScrollTo(\n  el: ScrollElement,\n  from: number,\n  to: number,\n  duration: number,\n  callback: unknown\n): void {\n  const distance = to - from\n  const step = Math.ceil((distance / duration) * 16)\n\n  if (!distance) return\n  if (duration <= 0) {\n    el.scrollTo(0, to)\n    return\n  }\n\n  let current = from\n\n  const scroll = () => {\n    if (!distance) return\n\n    current = current + step\n\n    if ((to - current) / distance <= 0) {\n      current = to\n    }\n\n    el.scrollTo(0, current)\n\n    if (current === to) {\n      typeof callback === 'function' && callback()\n    } else {\n      requestAnimationFrame(scroll)\n    }\n  }\n\n  scroll()\n}\n", "<script setup lang=\"ts\">\nimport { AnchorLink } from '@/components/anchor-link'\n\nimport {\n  getCurrentInstance,\n  isVNode,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  watch\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { proxyExposed } from '@vexip-ui/hooks'\nimport { isClient, isElement } from '@vexip-ui/utils'\nimport { anchorProps } from './props'\nimport { animateScrollTo } from './helper'\nimport { ANCHOR_STATE } from './symbol'\n\nimport type { ComponentInternalInstance } from 'vue'\nimport type { NativeScrollExposed } from '@/components/native-scroll'\nimport type { Scroll } from '@/components/scroll'\nimport type { AnchorLinkState, AnchorState } from './symbol'\n\ntype ScrollType = NativeScrollExposed & InstanceType<typeof Scroll>\n\ndefineOptions({ name: 'Anchor' })\n\nconst nh = useNameHelper('anchor')\n\nconst _props = defineProps(anchorProps)\nconst props = useProps('anchor', _props, {\n  active: {\n    default: '',\n    static: true\n  },\n  viewer: {\n    default: null,\n    static: true\n  },\n  offset: 8,\n  marker: false,\n  scrollDuration: 500,\n  markerTransition: () => nh.ns('fade'),\n  options: {\n    default: () => [],\n    static: true\n  },\n  bindHash: false,\n  forceActive: false\n})\n\nconst emit = defineEmits(['update:active'])\n\nconst currentActive = ref(props.active)\nconst animating = ref(false)\nconst markerTop = ref(0)\nconst linkStates = new Set<AnchorLinkState>()\n\nconst wrapper = ref<HTMLElement>()\n\nlet timer: ReturnType<typeof setTimeout>\n\nlet isRawViewer = false\nlet container: Window | HTMLElement | null = null\nlet scroller: ScrollType | null = null\nlet prevScrollTop = 0\n\nif (isClient && !currentActive.value && props.bindHash) {\n  currentActive.value = decodeURIComponent(location.hash)\n}\n\nprovide<AnchorState>(\n  ANCHOR_STATE,\n  reactive({\n    currentActive,\n    increaseLink,\n    decreaseLink,\n    handleActive\n  })\n)\n\nwatch(\n  () => props.active,\n  value => {\n    currentActive.value = value\n  }\n)\nwatch(() => props.viewer, updateContainer)\n\nonMounted(() => {\n  updateContainer()\n  computeMarkerPosition()\n})\n\nonBeforeUnmount(() => {\n  removeListener()\n  clearTimeout(timer)\n})\n\nfunction increaseLink(state: AnchorLinkState) {\n  linkStates.add(state)\n  state.active = currentActive.value === state.to\n}\n\nfunction decreaseLink(state: AnchorLinkState) {\n  linkStates.delete(state)\n}\n\nconst instance = getCurrentInstance()!\n\nfunction updateContainer() {\n  removeListener()\n  isClient &&\n    nextTick(() => {\n      const viewer: unknown = props.viewer\n\n      prevScrollTop = 0\n\n      let _container: Window | Node | ComponentInternalInstance | null = null\n      let refName = 'scroll'\n\n      if (typeof viewer === 'string') {\n        if (viewer.startsWith('ref:')) {\n          refName = viewer.substring(4)\n          refName = refName || 'scroll'\n        } else if (['window', 'document', 'html'].includes(viewer)) {\n          _container = window\n        } else if (viewer === 'body') {\n          _container = document.body\n        } else if (viewer === 'root') {\n          _container = instance.root\n        } else {\n          _container = document.querySelector(viewer)\n        }\n      } else if (typeof viewer === 'function') {\n        _container = viewer()\n      } else if (isElement(viewer)) {\n        _container = viewer\n      }\n\n      if (_container === window || isElement(_container)) {\n        isRawViewer = true\n      } else {\n        isRawViewer = false\n        // container = this.$parent\n      }\n\n      if (!isRawViewer) {\n        // ComponentInternalInstance\n        _container = _container as ComponentInternalInstance\n        _container = isVNode(_container?.vnode) ? _container : instance.parent\n\n        while (_container) {\n          const name = _container.type?.name\n\n          if (name === 'Scroll' || name === 'NativeScroll') {\n            scroller = proxyExposed({ component: _container } as any)\n\n            break\n          }\n\n          const refTemp = _container.refs?.[refName]\n\n          if (refTemp) {\n            if (isElement(refTemp)) {\n              isRawViewer = true\n              container = refTemp as HTMLElement\n            } else {\n              scroller = refTemp as ScrollType\n            }\n\n            break\n          }\n\n          _container = _container.parent\n        }\n\n        if (scroller) {\n          scroller.addScrollListener(handleContainerScroll)\n          container = scroller.$el\n        } else if (!container) {\n          isRawViewer = true\n          container = instance.parent?.proxy?.$el as HTMLElement\n        }\n\n        if (isRawViewer && container) {\n          container.addEventListener('scroll', handleContainerScroll)\n        }\n      } else {\n        container = _container as HTMLElement\n        container.addEventListener('scroll', handleContainerScroll)\n      }\n    })\n}\n\nfunction getContainerEl() {\n  if (!container) return null\n\n  return container === window ? document.documentElement : (container as HTMLElement)\n}\n\nfunction computeCurrentLink(scrollTop: number) {\n  if (!linkStates.size || !container) return\n\n  const containerTop = getContainerEl()!.offsetTop\n  const offsetList: { link: string, offset: number }[] = []\n\n  let offset = scrollTop + props.offset\n\n  if (isRawViewer) {\n    offset += containerTop\n  }\n\n  linkStates.forEach(state => {\n    const id = state.to\n\n    if (!id.startsWith('#')) return\n\n    const element = document.querySelector(id) as HTMLElement | null\n\n    if (element) {\n      offsetList.push({\n        link: id,\n        offset: element.offsetTop\n      })\n    }\n  })\n\n  offsetList.sort((prev, next) => prev.offset - next.offset)\n  offsetList.push({\n    link: '',\n    offset: Infinity\n  })\n\n  let currentLink = ''\n\n  for (let i = 0, len = offsetList.length - 1; i < len; ++i) {\n    const current = offsetList[i]\n    const next = offsetList[i + 1]\n\n    if (current.offset <= offset && next.offset > offset) {\n      currentLink = current.link\n\n      break\n    }\n  }\n\n  prevScrollTop = scrollTop\n\n  if (currentActive.value !== currentLink) {\n    currentActive.value = currentLink\n    emit('update:active', currentLink)\n    emitEvent(props.onChange, currentLink)\n  }\n}\n\nfunction handleContainerScroll(event: Event) {\n  if (animating.value) return\n\n  const scrollTop = isRawViewer\n    ? (\n        (event.target === window || event.target === document\n          ? document.documentElement\n          : event.target) as HTMLElement\n      ).scrollTop\n    : (event as MouseEvent).clientY\n\n  computeCurrentLink(scrollTop)\n  computeMarkerPosition()\n}\n\nfunction removeListener() {\n  if (scroller) {\n    scroller.removeScrollListener(handleContainerScroll)\n    scroller = null\n  }\n\n  if (container) {\n    container.removeEventListener('scroll', handleContainerScroll)\n  }\n}\n\nfunction handleActive(link: string) {\n  if (\n    (!props.forceActive && link === currentActive.value) ||\n    !link.startsWith('#') ||\n    link.length < 2\n  ) {\n    return\n  }\n\n  const element = document.querySelector(link) as HTMLElement | null\n\n  if (!element) return\n\n  clearTimeout(timer)\n\n  animating.value = true\n\n  const elementTop = element.offsetTop\n  const duration = Math.max(props.scrollDuration, 0)\n\n  if (isRawViewer && container) {\n    const containerEl = getContainerEl()!\n    // const from = containerEl.scrollTop\n    const to = Math.min(\n      elementTop - containerEl.offsetTop - props.offset,\n      containerEl.scrollHeight - containerEl.clientHeight\n    )\n\n    animateScrollTo(containerEl, prevScrollTop, to, duration, () => {\n      timer = setTimeout(() => {\n        animating.value = false\n      }, 10)\n    })\n    computeCurrentLink(to)\n    computeMarkerPosition()\n  } else if (scroller) {\n    const [min, max] = scroller.getYScrollLimit()\n    const clientY = Math.max(Math.min(elementTop - props.offset, max), min)\n\n    scroller.scrollTo(0, clientY, duration).then(() => {\n      timer = setTimeout(() => {\n        animating.value = false\n      }, duration + 10)\n    })\n\n    computeCurrentLink(clientY)\n    computeMarkerPosition()\n  } else {\n    animating.value = false\n  }\n\n  if (isClient && props.bindHash && location) {\n    location.hash = encodeURIComponent(currentActive.value.replace(/^#/, ''))\n  }\n}\n\nfunction computeMarkerPosition() {\n  const currentLink = Array.from(linkStates).find(\n    state => state.to && state.to === currentActive.value\n  )\n\n  if (currentLink?.el) {\n    const linkRect = currentLink.el.getBoundingClientRect()\n    const wrapperTop = wrapper.value?.getBoundingClientRect().top ?? 0\n\n    markerTop.value = linkRect.top - wrapperTop + linkRect.height / 2 + 0.5\n  }\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"{\n      [nh.b()]: true,\n      [nh.bs('vars')]: true,\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('no-marker')]: !props.marker\n    }\"\n  >\n    <ul :class=\"nh.be('list')\">\n      <slot>\n        <AnchorLink\n          v-for=\"link in props.options\"\n          :key=\"link.to\"\n          :to=\"link.to\"\n          :title=\"link.title\"\n          :children=\"link.children\"\n        >\n          {{ link.label }}\n        </AnchorLink>\n      </slot>\n    </ul>\n    <Transition appear :name=\"props.markerTransition\">\n      <div\n        v-if=\"props.marker && currentActive\"\n        :class=\"nh.be('marker')\"\n        :style=\"{ top: `${markerTop}px` }\"\n      >\n        <slot name=\"marker\">\n          <div :class=\"nh.be('pointer')\"></div>\n        </slot>\n      </div>\n    </Transition>\n  </div>\n</template>\n", "import { booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ScrollbarPlacement } from './symbol'\n\nexport const scrollbarProps = buildProps({\n  placement: String as PropType<ScrollbarPlacement>,\n  scroll: Number,\n  barLength: Number,\n  width: Number,\n  appear: booleanProp,\n  fade: Number,\n  barColor: String,\n  trackColor: String,\n  disabled: booleanProp,\n  wrapper: [String, Object] as PropType<string | HTMLElement>,\n  duration: Number,\n  useTrack: booleanProp,\n  trackSpeed: Number,\n  onScrollStart: eventProp<(percent: number) => void>(),\n  onScroll: eventProp<(percent: number) => void>(),\n  onScrollEnd: eventProp<(percent: number) => void>()\n})\n\nexport type ScrollbarProps = ExtractPropTypes<typeof scrollbarProps>\nexport type ScrollbarCProps = ConfigurableProps<ScrollbarProps, 'scroll'>\n", "export type ScrollbarPlacement = 'top' | 'right' | 'bottom' | 'left'\n\nexport const enum ScrollbarType {\n  HORIZONTAL,\n  VERTICAL\n}\n\nexport const scrollbarPlacements = Object.freeze<ScrollbarPlacement[]>([\n  'top',\n  'right',\n  'bottom',\n  'left'\n])\n", "import { ref } from 'vue'\n\nimport { USE_TOUCH, noop } from '@vexip-ui/utils'\nimport { ScrollbarType } from './symbol'\n\nimport type { Ref } from 'vue'\n\nexport function useTrack({\n  currentScroll = ref(0),\n  trackSpeed = ref(2),\n  track = ref(null),\n  bar = ref(null),\n  tracking = ref(false),\n  type = ref(ScrollbarType.VERTICAL),\n  barLength = ref(35),\n  disabled = ref(false),\n  onDown = noop,\n  onMove = noop,\n  onUp = noop,\n  onScroll = noop\n}: {\n  currentScroll: Ref<number>,\n  type: Ref<ScrollbarType>,\n  trackSpeed?: Ref<number>,\n  track?: Ref<HTMLElement | null | undefined>,\n  bar?: Ref<HTMLElement | null | undefined>,\n  tracking?: Ref<boolean>,\n  barLength?: Ref<number>,\n  disabled?: Ref<boolean>,\n  onDown?: (scroll: number) => void,\n  onMove?: (scroll: number) => void,\n  onUp?: (scroll: number) => void,\n  onScroll?: (scroll: number) => void\n}) {\n  let length: number\n  let startAt: number\n  let cursorAt: number\n  let targetScroll: number\n  let forward = true\n  let processing = false\n\n  function animateMoveBar() {\n    if (!tracking.value) return\n\n    processing = true\n\n    const speedRate = computeSpeedRate(targetScroll, currentScroll.value)\n    let changed = false\n\n    if (forward) {\n      if (currentScroll.value < targetScroll) {\n        currentScroll.value += speedRate * trackSpeed.value\n        changed = true\n      }\n    } else if (currentScroll.value > targetScroll) {\n      currentScroll.value -= speedRate * trackSpeed.value\n      changed = true\n    }\n\n    if (changed) {\n      verifyScroll()\n      onScroll(currentScroll.value)\n    }\n\n    if (\n      tracking.value && forward\n        ? currentScroll.value < targetScroll\n        : currentScroll.value > targetScroll\n    ) {\n      requestAnimationFrame(animateMoveBar)\n    } else {\n      processing = false\n    }\n  }\n\n  function handleMouseDown(event: PointerEvent) {\n    if (disabled.value || event.button > 0) {\n      return false\n    }\n\n    event.stopPropagation()\n    event.preventDefault()\n\n    if (!track.value || !bar.value) return false\n\n    document.addEventListener('pointermove', handleMouseMove)\n    document.addEventListener('pointerup', handleMouseUp)\n\n    const rect = track.value.getBoundingClientRect()\n    const barRect = bar.value.getBoundingClientRect()\n\n    let position: number\n\n    if (type.value === ScrollbarType.VERTICAL) {\n      length = rect.height\n      startAt = barRect.top - rect.top\n      cursorAt = barRect.top\n      position = startAt + event.clientY - cursorAt\n    } else {\n      length = rect.width\n      startAt = barRect.left - rect.left\n      cursorAt = barRect.left\n      position = startAt + event.clientX - cursorAt\n    }\n\n    targetScroll = Math.max(\n      0,\n      Math.min((position / length / (100 - barLength.value / 2)) * 1e4, 100)\n    )\n    forward = targetScroll >= currentScroll.value\n\n    tracking.value = true\n\n    onDown(currentScroll.value)\n    animateMoveBar()\n  }\n\n  function handleMouseMove(event: PointerEvent) {\n    event.stopPropagation()\n\n    if (!USE_TOUCH) {\n      event.preventDefault()\n    }\n\n    onMove(currentScroll.value)\n\n    let position: number\n\n    if (type.value === ScrollbarType.VERTICAL) {\n      position = startAt + event.clientY - cursorAt\n    } else {\n      position = startAt + event.clientX - cursorAt\n    }\n\n    targetScroll = Math.max(\n      0,\n      Math.min((position / length / (100 - barLength.value / 2)) * 1e4, 100)\n    )\n\n    !processing && animateMoveBar()\n  }\n\n  function handleMouseUp(event: PointerEvent) {\n    event.preventDefault()\n\n    document.removeEventListener('pointermove', handleMouseMove)\n    document.removeEventListener('pointerup', handleMouseUp)\n\n    tracking.value = false\n\n    onUp(currentScroll.value)\n  }\n\n  function verifyScroll() {\n    currentScroll.value = Math.max(0, Math.min(currentScroll.value, 100))\n  }\n\n  return {\n    currentScroll,\n    trackSpeed,\n    track,\n    bar,\n    tracking,\n    type,\n    barLength,\n    disabled,\n\n    handleMouseDown\n  }\n}\n\nfunction computeSpeedRate(start: number, end: number) {\n  const span = Math.abs(start - end)\n\n  for (let i = 0; i < 5; ++i) {\n    if (span < (i + 1) * 20) {\n      return 1 + 0.25 * i\n    }\n  }\n\n  return 2\n}\n", "<script setup lang=\"ts\">\nimport {\n  computed,\n  getCurrentInstance,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useManualRef, useRtl, useSetTimeout } from '@vexip-ui/hooks'\nimport { USE_TOUCH, boundRange, isDefined, throttle } from '@vexip-ui/utils'\nimport { scrollbarProps } from './props'\nimport { useTrack } from './hooks'\nimport { ScrollbarType, scrollbarPlacements } from './symbol'\n\ndefineOptions({ name: 'Scrollbar' })\n\nconst _props = defineProps(scrollbarProps)\nconst props = useProps('scrollbar', _props, {\n  placement: {\n    default: 'right',\n    validator: value => scrollbarPlacements.includes(value)\n  },\n  scroll: {\n    default: 0,\n    validator: value => value >= 0 && value <= 100,\n    static: true\n  },\n  barLength: {\n    default: 35,\n    validator: value => value > 0 && value < 100\n  },\n  width: null,\n  appear: false,\n  fade: 1500,\n  barColor: null,\n  trackColor: null,\n  disabled: false,\n  wrapper: null,\n  duration: null,\n  useTrack: false,\n  trackSpeed: {\n    default: 2,\n    validator: value => value > 0 && value < 10\n  }\n})\n\nconst nh = useNameHelper('scrollbar')\nconst active = ref(false)\nconst scrolling = ref(false)\n\nconst { manualRef, triggerUpdate } = useManualRef()\n\nconst { isRtl } = useRtl()\n\nconst currentScroll = manualRef(props.scroll)\n\nconst container = ref<HTMLElement>()\nconst bar = ref<HTMLElement>()\nconst track = ref<HTMLElement>()\n\nconst { timer } = useSetTimeout()\n\nconst type = computed(() => {\n  return props.placement === 'right' || props.placement === 'left'\n    ? ScrollbarType.VERTICAL\n    : ScrollbarType.HORIZONTAL\n})\n\nconst { tracking, handleMouseDown: handleTrackMouseDown } = useTrack({\n  currentScroll,\n  track,\n  bar,\n  type,\n  trackSpeed: toRef(props, 'trackSpeed'),\n  barLength: toRef(props, 'barLength'),\n  disabled: toRef(props, 'disabled'),\n  onDown: scroll => {\n    clearTimeout(timer.fade)\n    emitEvent(props.onScrollStart, scroll)\n  },\n  // onMove: () => clearTimeout(timer.fade),\n  onUp: scroll => {\n    setScrollbarFade()\n    triggerUpdate()\n    emitEvent(props.onScrollEnd, scroll)\n  },\n  onScroll: scroll => {\n    triggerUpdate()\n    emitEvent(props.onScroll, scroll)\n  }\n})\n\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.bm(props.placement),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('fade')]: props.fade,\n      [nh.bm('scrolling')]: scrolling.value,\n      [nh.bm('tracking')]: tracking.value,\n      [nh.bm('active')]: active.value,\n      [nh.bm('disabled')]: props.disabled\n    }\n  ]\n})\nconst style = computed<Record<string, string>>(() => {\n  return {\n    [nh.cv('bar-bg-color')]: props.barColor,\n    [nh.cv('track-bg-color')]: props.trackColor,\n    [nh.cv('width')]: props.width ? `${props.width}px` : null!\n  }\n})\n\nwatch(\n  () => props.scroll,\n  value => {\n    currentScroll.value = value\n    triggerUpdate()\n  }\n)\nwatchEffect(() => {\n  if (!bar.value) return\n\n  const position = `${((100 - props.barLength) * currentScroll.value) / props.barLength}%`\n  const length = `${props.barLength}%`\n\n  if (type.value === ScrollbarType.VERTICAL) {\n    bar.value.style.height = length\n    bar.value.style.transform = `translate3d(0, ${position}, 0)`\n  } else {\n    bar.value.style.width = length\n    bar.value.style.transform = `translate3d(${isRtl.value ? '-' : ''}${position}, 0, 0)`\n  }\n})\nwatchEffect(() => {\n  if (!bar.value) return\n\n  bar.value.style.transitionDuration =\n    isDefined(props.duration) && props.duration >= 0 ? `${props.duration}ms` : ''\n})\n\nif (props.appear) {\n  watch(currentScroll, () => {\n    clearTimeout(timer.fade)\n    active.value = true\n\n    if (!scrolling.value && !tracking.value) {\n      setScrollbarFade()\n    }\n  })\n}\n\nconst handleWrapperMouseMove = throttle(() => {\n  clearTimeout(timer.fade)\n\n  if (props.disabled) {\n    active.value = false\n  } else {\n    active.value = true\n\n    if (!scrolling.value && !tracking.value) {\n      setScrollbarFade()\n    }\n  }\n})\n\nlet wrapperElement: HTMLElement | null\n\nonMounted(() => {\n  let instance = getCurrentInstance()\n\n  nextTick(() => {\n    if (typeof props.wrapper === 'string') {\n      wrapperElement = document.querySelector(props.wrapper)\n    } else {\n      wrapperElement = props.wrapper\n    }\n\n    if (!wrapperElement) {\n      if (instance?.parent) {\n        wrapperElement = instance.parent.proxy?.$el\n\n        if (!wrapperElement) {\n          wrapperElement = container.value?.parentElement ?? null\n        }\n      } else {\n        wrapperElement = container.value?.parentElement ?? null\n      }\n    }\n\n    if (wrapperElement && props.fade >= 300) {\n      wrapperElement.addEventListener('mousemove', handleWrapperMouseMove)\n    }\n\n    instance = null\n\n    if (!props.appear) {\n      watch(currentScroll, () => {\n        clearInterval(timer.fade)\n        active.value = true\n        setScrollbarFade()\n      })\n    }\n  })\n})\n\nonBeforeUnmount(() => {\n  if (wrapperElement) {\n    wrapperElement.removeEventListener('mousemove', handleWrapperMouseMove)\n  }\n\n  wrapperElement = null\n  clearTimeout(timer.fade)\n})\n\ndefineExpose({\n  currentScroll,\n  container,\n  bar,\n  track,\n  handleScroll\n})\n\nlet length: number\nlet startAt: number\nlet cursorAt: number\n\nfunction handleMouseDown(event: PointerEvent) {\n  if (event.button !== 0 || props.disabled) {\n    return false\n  }\n\n  event.stopPropagation()\n  event.preventDefault()\n\n  if (!track.value || !bar.value) return false\n\n  document.addEventListener('pointermove', handleMouseMove)\n  document.addEventListener('pointerup', handleMouseUp)\n\n  const rect = track.value.getBoundingClientRect()\n  const barRect = bar.value.getBoundingClientRect()\n\n  if (type.value === ScrollbarType.VERTICAL) {\n    length = rect.height\n    startAt = barRect.top - rect.top\n    cursorAt = event.clientY\n  } else {\n    length = rect.width\n    startAt = isRtl.value ? barRect.right - rect.right : barRect.left - rect.left\n    cursorAt = event.clientX\n  }\n\n  clearTimeout(timer.fade)\n\n  scrolling.value = true\n  emitEvent(props.onScrollStart, currentScroll.value)\n}\n\nfunction handleMouseMove(event: PointerEvent) {\n  event.stopPropagation()\n\n  if (!USE_TOUCH) {\n    event.preventDefault()\n  }\n\n  let position: number\n\n  if (type.value === ScrollbarType.VERTICAL) {\n    position = startAt + event.clientY - cursorAt\n  } else {\n    position = isRtl.value\n      ? -(startAt + event.clientX - cursorAt)\n      : startAt + event.clientX - cursorAt\n  }\n\n  // position / length * 100 === (100 - barLength) * currentScroll / 100\n  currentScroll.value = (position / length / (100 - props.barLength)) * 1e4\n\n  verifyScroll()\n  triggerUpdate()\n  emitEvent(props.onScroll, currentScroll.value)\n}\n\nfunction handleMouseUp(event: PointerEvent) {\n  event.preventDefault()\n\n  document.removeEventListener('pointermove', handleMouseMove)\n  document.removeEventListener('pointerup', handleMouseUp)\n\n  setScrollbarFade()\n\n  scrolling.value = false\n  emitEvent(props.onScrollEnd, currentScroll.value)\n}\n\nfunction verifyScroll() {\n  currentScroll.value = Math.max(0, Math.min(currentScroll.value, 100))\n}\n\nfunction setScrollbarFade() {\n  if (props.fade >= 300) {\n    timer.fade = setTimeout(() => {\n      active.value = false\n    }, props.fade)\n  }\n}\n\nfunction handleScroll(scroll: number) {\n  if (Math.abs(currentScroll.value - scroll) < 0.0001) return\n\n  currentScroll.value = boundRange(scroll, 0, 100)\n  triggerUpdate()\n}\n\nfunction disableEvent<E extends Event>(event: E) {\n  if (event.cancelable) {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n}\n</script>\n\n<template>\n  <div\n    ref=\"container\"\n    :class=\"className\"\n    role=\"scrollbar\"\n    :style=\"style\"\n  >\n    <div\n      ref=\"track\"\n      :class=\"[nh.be('track'), props.useTrack ? null : nh.bem('track', 'disabled')]\"\n      @touchstart=\"disableEvent\"\n      @pointerdown=\"handleTrackMouseDown\"\n    ></div>\n    <div\n      ref=\"bar\"\n      :class=\"nh.be('bar')\"\n      @touchstart=\"disableEvent\"\n      @pointerdown=\"handleMouseDown\"\n    ></div>\n  </div>\n</template>\n", "import { booleanNumberProp, booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const resizeObserverProps = buildProps({\n  throttle: booleanNumberProp,\n  disabled: booleanProp,\n  onResize: eventProp<(entry: ResizeObserverEntry) => void>()\n})\n\nexport type ResizeObserverProps = ExtractPropTypes<typeof resizeObserverProps>\nexport type ResizeObserverCProps = ConfigurableProps<ResizeObserverProps>\n", "import {\n  defineComponent,\n  getCurrentInstance,\n  onBeforeUnmount,\n  onMounted,\n  renderSlot,\n  watch\n} from 'vue'\n\nimport { emitEvent, useProps } from '@vexip-ui/config'\nimport { useResize } from '@vexip-ui/hooks'\nimport { throttle } from '@vexip-ui/utils'\nimport { resizeObserverProps } from './props'\n\nexport default defineComponent({\n  name: 'ResizeObserver',\n  props: resizeObserverProps,\n  setup(_props, { slots }) {\n    const props = useProps('resizeObserver', _props, {\n      throttle: {\n        default: false,\n        validator: value => typeof value === 'boolean' || value > 0\n      },\n      disabled: false\n    })\n\n    const { observeResize, unobserveResize } = useResize()\n\n    let observed = false\n\n    function handleResize(entry: ResizeObserverEntry) {\n      emitEvent(props.onResize, entry)\n    }\n\n    const throttleResize = props.throttle\n      ? throttle(handleResize, typeof props.throttle === 'boolean' ? 16 : props.throttle)\n      : handleResize\n\n    const instance = getCurrentInstance()\n\n    onMounted(() => {\n      watch(\n        () => props.disabled,\n        value => {\n          value ? unobserve() : observe()\n        },\n        { immediate: true, flush: 'post' }\n      )\n    })\n\n    onBeforeUnmount(() => {\n      if (observed) {\n        const el = getCurrentInstance()?.proxy?.$el as Element | null\n\n        if (el?.nextElementSibling) {\n          unobserveResize(el.nextElementSibling)\n        }\n      }\n    })\n\n    function observe() {\n      if (observed) return\n\n      const el = instance?.proxy?.$el as Element | null\n\n      if (el?.nextElementSibling) {\n        if (el.nextElementSibling !== el.nextSibling && el.nodeType === 3 && el.nodeValue !== '') {\n          return\n        }\n\n        observeResize(el.nextElementSibling, throttleResize)\n        observed = true\n      }\n    }\n\n    function unobserve() {\n      if (observed) {\n        const el = instance?.proxy?.$el as Element | null\n\n        if (el?.nextElementSibling) {\n          unobserveResize(el.nextElementSibling)\n        }\n\n        observed = false\n      }\n    }\n\n    return () => renderSlot(slots, 'default')\n  }\n})\n", "import {\n  booleanNumberProp,\n  booleanProp,\n  buildProps,\n  classProp,\n  eventProp,\n  styleProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { BarScrollPayload } from '@/components/scroll'\nimport type { NativeScrollMode, NativeScrollPayload } from './symbol'\n\nexport const nativeScrollProps = buildProps({\n  scrollClass: classProp,\n  scrollStyle: styleProp,\n  scrollAttrs: Object as PropType<Record<string, any>>,\n  mode: String as PropType<NativeScrollMode>,\n  width: [Number, String],\n  height: [Number, String],\n  disabled: booleanProp,\n  pointer: booleanProp,\n  scrollX: Number,\n  scrollY: Number,\n  useXBar: booleanProp,\n  useYBar: booleanProp,\n  barFade: Number,\n  barClass: classProp,\n  autoplay: booleanNumberProp,\n  playWaiting: Number,\n  appear: booleanProp,\n  barDuration: Number,\n  useBarTrack: booleanProp,\n  scrollTag: String,\n  observeDeep: booleanProp,\n  scrollOnly: booleanProp,\n  onResize: eventProp<(entry: ResizeObserverEntry) => void>(),\n  onXEnabledChange: eventProp<(enabled: boolean) => void>(),\n  onYEnabledChange: eventProp<(enabled: boolean) => void>(),\n  onWheel: eventProp<(event: WheelEvent, type: 'vertical' | 'horizontal') => void>(),\n  onScrollStart: eventProp<(payload: Omit<NativeScrollPayload, 'type'>) => void>(),\n  onScroll: eventProp<(payload: NativeScrollPayload) => void>(),\n  onScrollEnd: eventProp<(payload: Omit<NativeScrollPayload, 'type'>) => void>(),\n  onBarScrollStart: eventProp<(payload: BarScrollPayload) => void>(),\n  onBarScroll: eventProp<(payload: BarScrollPayload) => void>(),\n  onBarScrollEnd: eventProp<(payload: BarScrollPayload) => void>()\n})\n\nexport type NativeScrollProps = ExtractPropTypes<typeof nativeScrollProps>\nexport type NativeScrollCProps = ConfigurableProps<\n  NativeScrollProps,\n  'scrollX' | 'scrollY',\n  'onBeforeScroll'\n>\n", "interface ScrollElement {\n  scrollTo(x: number, y: number): void,\n  [prop: string]: any\n}\n\nexport function animateScrollTo(options: {\n  el: ScrollElement,\n  xFrom?: number,\n  xTo?: number,\n  yFrom?: number,\n  yTo?: number,\n  duration?: number,\n  callback?: null | (() => any)\n}): void {\n  const { el, xFrom = 0, xTo = 0, yFrom = 0, yTo = 0, duration = 500, callback = null } = options\n\n  if (!el) return\n\n  if (duration <= 0) {\n    el.scrollTo(xTo, yTo)\n    return\n  }\n\n  const xDistance = xTo - xFrom\n  const yDistance = yTo - yFrom\n\n  if (!xDistance && !yDistance) return\n\n  const xStep = Math.ceil((xDistance / duration) * 16)\n  const yStep = Math.ceil((yDistance / duration) * 16)\n\n  let currentX = xFrom\n  let currentY = yFrom\n\n  const scroll = () => {\n    currentX += xStep\n    currentY += yStep\n\n    if (xDistance && (xTo - currentX) / xDistance <= 0) {\n      currentX = xTo\n    }\n\n    if (yDistance && (yTo - currentY) / yDistance <= 0) {\n      currentY = yTo\n    }\n\n    el.scrollTo(currentX, currentY)\n\n    if ((!xDistance || currentX === xTo) && (!yDistance || currentY === yTo)) {\n      typeof callback === 'function' && callback()\n    } else {\n      requestAnimationFrame(scroll)\n    }\n  }\n\n  scroll()\n}\n", "import { computed, onMounted, reactive, ref, watch } from 'vue'\n\nimport { isHiddenElement, useManualRef, useMounted, useRtl } from '@vexip-ui/hooks'\nimport { boundRange, debounce, debounceMinor, isElement, multipleFixed } from '@vexip-ui/utils'\nimport { animateScrollTo } from './helper'\n\nimport type { Ref } from 'vue'\nimport type { NativeScrollMode } from './symbol'\n\nexport function useScrollWrapper({\n  mode,\n  disabled,\n  appear,\n  scrollX,\n  scrollY,\n  onResize,\n  onBeforeRefresh,\n  onAfterRefresh\n}: {\n  mode: Ref<NativeScrollMode>,\n  disabled: Ref<boolean>,\n  appear: Ref<boolean>,\n  // width: Ref<number | string>,\n  // height: Ref<number | string>,\n  scrollX: Ref<number>,\n  scrollY: Ref<number>,\n  onResize?: (entity: ResizeObserverEntry) => void,\n  onBeforeRefresh?: () => void,\n  onAfterRefresh?: () => void\n}) {\n  const { manualRef, triggerUpdate } = useManualRef()\n\n  const { isRtl } = useRtl()\n  const syncing = ref(false)\n\n  const contentEl = ref<HTMLElement>()\n\n  const content = reactive({\n    el: contentEl,\n    scrollWidth: 0,\n    offsetWidth: 0,\n    scrollHeight: 0,\n    offsetHeight: 0\n  })\n\n  // 当前滚动位置\n  const x = manualRef(0)\n  const y = manualRef(0)\n\n  const percentX = manualRef(0)\n  const percentY = manualRef(0)\n\n  const xScrollLimit = computed(() => {\n    return content.el ? content.scrollWidth - content.offsetWidth : 0\n  })\n  const yScrollLimit = computed(() => {\n    return content.el ? content.scrollHeight - content.offsetHeight : 0\n  })\n  const enableXScroll = computed(() => {\n    return (\n      !disabled.value &&\n      mode.value !== 'vertical' &&\n      !!content.el &&\n      content.scrollWidth > content.offsetWidth\n    )\n  })\n  const enableYScroll = computed(() => {\n    return (\n      !disabled.value &&\n      mode.value !== 'horizontal' &&\n      !!content.el &&\n      content.scrollHeight > content.offsetHeight\n    )\n  })\n  const xBarLength = computed(() => {\n    if (content.el) {\n      return boundRange((content.offsetWidth / (content.scrollWidth || 1)) * 100, 5, 99)\n    }\n\n    return 35\n  })\n  const yBarLength = computed(() => {\n    if (content.el) {\n      return boundRange((content.offsetHeight / (content.scrollHeight || 1)) * 100, 5, 99)\n    }\n\n    return 35\n  })\n\n  watch(contentEl, () => {\n    computeContentSize()\n  })\n  watch(scrollX, value => {\n    setScrollX(value)\n  })\n  watch(scrollY, value => {\n    setScrollY(value)\n  })\n\n  function setScrollX(value: number) {\n    x.value = boundRange(value, 0, xScrollLimit.value)\n    syncScroll()\n  }\n\n  function setScrollY(value: number) {\n    y.value = boundRange(value, 0, yScrollLimit.value)\n    syncScroll()\n  }\n\n  function syncScroll() {\n    syncing.value = true\n\n    if (content.el) {\n      content.el.scrollTo({\n        top: y.value,\n        left: isRtl.value ? -x.value : x.value,\n        behavior: 'instant'\n      })\n    }\n\n    setTimeout(() => {\n      syncing.value = false\n    }, 0)\n  }\n\n  const { isMounted } = useMounted()\n\n  function computeContentSize() {\n    if (!content.el || isHiddenElement(content.el)) return\n\n    content.scrollWidth = content.el.scrollWidth\n    content.offsetWidth = content.el.offsetWidth\n    content.scrollHeight = content.el.scrollHeight\n    content.offsetHeight = content.el.offsetHeight\n\n    if (mode.value !== 'vertical') {\n      setScrollX(!isMounted.value && appear.value ? scrollX.value : x.value || 0)\n    }\n\n    if (mode.value !== 'horizontal') {\n      setScrollY(!isMounted.value && appear.value ? scrollY.value : y.value || 0)\n    }\n\n    computePercent()\n    triggerUpdate()\n  }\n\n  function computePercent() {\n    if (content.el) {\n      percentX.value = isRtl.value\n        ? -multipleFixed(x.value / (xScrollLimit.value || 1), 100, 2)\n        : multipleFixed(x.value / (xScrollLimit.value || 1), 100, 2)\n      percentY.value = multipleFixed(y.value / (yScrollLimit.value || 1), 100, 2)\n    }\n  }\n\n  function handleResize(entity: ResizeObserverEntry) {\n    refresh()\n    onResize?.(entity)\n  }\n\n  onMounted(() => {\n    refresh()\n\n    if (appear.value) {\n      scrollTo(scrollX.value, scrollY.value)\n    }\n  })\n\n  const refresh = debounceMinor(() => {\n    return new Promise<void>(resolve => {\n      if (typeof onBeforeRefresh === 'function') {\n        onBeforeRefresh()\n      }\n\n      computeContentSize()\n      setTimeout(() => {\n        if (typeof onAfterRefresh === 'function') {\n          onAfterRefresh()\n        }\n\n        resolve()\n      }, 0)\n    })\n  })\n\n  function scrollTo(clientX: number, clientY: number, duration = 500) {\n    return new Promise<void>(resolve => {\n      if (!content.el) return\n\n      if (!enableXScroll.value || Math.abs(x.value - clientX) < 0.01) {\n        clientX = x.value\n      }\n\n      if (!enableYScroll.value || Math.abs(y.value - clientY) < 0.01) {\n        clientY = y.value\n      }\n\n      animateScrollTo({\n        duration,\n        el: content.el,\n        xFrom: x.value,\n        xTo: boundRange(clientX, 0, xScrollLimit.value),\n        yFrom: y.value,\n        yTo: boundRange(clientY, 0, yScrollLimit.value),\n        callback: resolve\n      })\n    })\n  }\n\n  function scrollBy(deltaX: number, deltaY: number, duration = 500) {\n    return scrollTo(x.value + deltaX, y.value + deltaY, duration)\n  }\n\n  function scrollToElement(el: string | Element, duration?: number, offset = 0) {\n    if (!content.el) return Promise.resolve()\n\n    if (typeof el === 'string') {\n      el = content.el.querySelector(el)!\n    }\n\n    if (!isElement(el)) return Promise.resolve()\n\n    const wrapperRect = content.el.getBoundingClientRect()\n    const elRect = el.getBoundingClientRect()\n\n    let clientX = 0\n    let clientY = 0\n\n    if (mode.value !== 'vertical') {\n      clientX = elRect.left - wrapperRect.left + offset\n    }\n\n    if (mode.value !== 'horizontal') {\n      clientY = elRect.top - wrapperRect.top + offset\n    }\n\n    return scrollTo(clientX, clientY, duration)\n  }\n\n  return {\n    contentEl,\n\n    syncing,\n    content,\n    x,\n    y,\n    percentX,\n    percentY,\n    xScrollLimit,\n    yScrollLimit,\n    enableXScroll,\n    enableYScroll,\n    xBarLength,\n    yBarLength,\n\n    handleResize: debounce(handleResize),\n    setScrollX,\n    setScrollY,\n    computePercent,\n    refresh,\n    scrollTo,\n    scrollBy,\n    scrollToElement,\n    triggerUpdate\n  }\n}\n", "import { Scrollbar } from '@/components/scrollbar'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onBeforeUnmount,\n  ref,\n  renderSlot,\n  shallowReadonly,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { createSlotRender, flatVNodes, useRtl } from '@vexip-ui/hooks'\nimport { USE_TOUCH, createEventEmitter, isClient, isElement, isTrue } from '@vexip-ui/utils'\nimport { nativeScrollProps } from './props'\nimport { useScrollWrapper } from './hooks'\n\nimport type { EventHandler } from '@vexip-ui/utils'\nimport type { NativeScrollMode } from './symbol'\n\nconst scrollModes = Object.freeze<NativeScrollMode[]>(['horizontal', 'vertical', 'both'])\n\nconst MOVE_EVENT = 'mousemove'\nconst UP_EVENT = 'mouseup'\n\nexport default defineComponent({\n  name: 'NativeScroll',\n  inheritAttrs: false,\n  props: nativeScrollProps,\n  emits: [],\n  setup(_props, { attrs, slots, expose }) {\n    const props = useProps('nativeScroll', _props, {\n      scrollClass: null,\n      scrollStyle: null,\n      scrollAttrs: null,\n      mode: {\n        default: 'vertical',\n        validator: value => scrollModes.includes(value)\n      },\n      width: '',\n      height: '',\n      disabled: false,\n      pointer: false,\n      scrollX: {\n        default: 0,\n        static: true\n      },\n      scrollY: {\n        default: 0,\n        static: true\n      },\n      useXBar: false,\n      useYBar: false,\n      barFade: 1500,\n      barClass: null,\n      autoplay: false,\n      playWaiting: 500,\n      appear: false,\n      barDuration: null,\n      useBarTrack: false,\n      scrollTag: 'div',\n      observeDeep: false,\n      scrollOnly: false\n    })\n\n    const emitter = createEventEmitter()\n\n    const nh = useNameHelper('native-scroll')\n    const { isRtl } = useRtl()\n    const usingBar = ref(false)\n    const scrolling = ref(false)\n\n    const wrapper = ref<HTMLElement>()\n    const xBar = ref<InstanceType<typeof Scrollbar>>()\n    const yBar = ref<InstanceType<typeof Scrollbar>>()\n\n    let initialized = false\n\n    const {\n      contentEl,\n\n      syncing,\n      content,\n      x,\n      y,\n      percentX,\n      percentY,\n      xScrollLimit,\n      yScrollLimit,\n      enableXScroll,\n      enableYScroll,\n      xBarLength,\n      yBarLength,\n\n      handleResize,\n      setScrollX,\n      setScrollY,\n      computePercent,\n      refresh,\n      scrollTo,\n      scrollBy,\n      scrollToElement,\n      triggerUpdate\n    } = useScrollWrapper({\n      mode: toRef(props, 'mode'),\n      disabled: toRef(props, 'disabled'),\n      appear: toRef(props, 'appear'),\n      // width: toRef(props, 'width'),\n      // height: toRef(props, 'height'),\n      scrollX: toRef(props, 'scrollX'),\n      scrollY: toRef(props, 'scrollY'),\n      onResize: entry => {\n        emitEvent(props.onResize, entry)\n      },\n      // onBeforeRefresh: stopAutoplay,\n      onAfterRefresh: () => {\n        syncBarScroll()\n\n        if (!initialized) {\n          initialized = true\n          startAutoplay()\n        }\n      }\n    })\n\n    const slotParams = shallowReadonly({\n      getState,\n      refresh,\n      scrollTo,\n      scrollBy,\n      scrollToElement,\n      ensureInView\n    })\n\n    /* autoplay */\n    const canPlay = ref(false)\n\n    const canAutoplay = computed(() => {\n      return (\n        props.mode !== 'both' &&\n        (isTrue(props.autoplay) || +props.autoplay > 1000) &&\n        ((props.mode === 'horizontal' && enableXScroll.value) ||\n          (props.mode === 'vertical' && enableYScroll.value))\n      )\n    })\n\n    watch([() => props.autoplay, () => props.playWaiting, contentEl], () => {\n      stopAutoplay()\n      nextTick(startAutoplay)\n    })\n\n    let playTimer: ReturnType<typeof setTimeout>\n    let startTimer: ReturnType<typeof setTimeout>\n    let endTimer: ReturnType<typeof setTimeout>\n\n    onBeforeUnmount(stopAutoplay)\n\n    function startAutoplay() {\n      stopAutoplay()\n\n      if (!canAutoplay.value || !contentEl.value) return\n\n      const mode = props.mode\n      const distance = mode === 'horizontal' ? 'offsetWidth' : 'offsetHeight'\n      const limit = mode === 'horizontal' ? xScrollLimit : yScrollLimit\n      const prop = mode === 'horizontal' ? x : y\n      const waiting = props.playWaiting < 20 ? 20 : props.playWaiting\n      const setScroll = mode === 'horizontal' ? setScrollX : setScrollY\n\n      let playSpeed = 0.5\n\n      if (typeof props.autoplay === 'number') {\n        playSpeed = (contentEl.value[distance] / props.autoplay) * 16\n      }\n\n      const scroll = () => {\n        setScroll(prop.value + playSpeed)\n\n        if (prop.value >= limit.value) {\n          setScroll(limit.value)\n          canPlay.value = false\n\n          computePercent()\n          triggerUpdate()\n          syncBarScroll()\n\n          endTimer = setTimeout(() => {\n            scrollTo(0, 0, 500)\n\n            startTimer = setTimeout(() => {\n              canPlay.value = true\n              scroll()\n            }, 500 + waiting)\n          }, waiting)\n        } else {\n          computePercent()\n          triggerUpdate()\n          syncBarScroll()\n\n          if (canPlay.value) {\n            requestAnimationFrame(scroll)\n          }\n        }\n      }\n\n      playTimer = setTimeout(() => {\n        canPlay.value = true\n        scroll()\n      }, waiting)\n    }\n\n    function stopAutoplay() {\n      canPlay.value = false\n\n      clearTimeout(playTimer)\n      clearTimeout(startTimer)\n      clearTimeout(endTimer)\n    }\n    /* autoplay */\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bm(props.mode),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('scrolling')]: scrolling.value,\n          [nh.bm('using-bar')]: usingBar.value\n        }\n      ]\n    })\n    const style = computed(() => {\n      const { width, height } = props\n\n      return {\n        width: width\n          ? typeof width === 'string'\n            ? Number.isNaN(Number(width))\n              ? width\n              : `${Number(width)}px`\n            : `${width}px`\n          : undefined,\n        height: height\n          ? typeof height === 'string'\n            ? Number.isNaN(Number(height))\n              ? height\n              : `${Number(height)}px`\n            : `${height}px`\n          : undefined\n      }\n    })\n    const wrapperClass = computed(() => {\n      return [props.scrollAttrs?.class, props.scrollClass, nh.be('wrapper')]\n    })\n    const barFade = computed(() => (canAutoplay.value ? 0 : props.barFade))\n\n    const willMutate = ref(false)\n\n    function handleMutate() {\n      willMutate.value = true\n      nextTick(refresh)\n      requestAnimationFrame(() => {\n        willMutate.value = false\n      })\n    }\n\n    let observer: MutationObserver | undefined\n\n    function createMutation() {\n      if (!isClient || !contentEl.value) return\n\n      observer = new MutationObserver(handleMutate)\n      observer.observe(contentEl.value, {\n        childList: true\n      })\n    }\n\n    function clearMutation() {\n      observer?.disconnect()\n      observer = undefined\n    }\n\n    watch(\n      contentEl,\n      () => {\n        clearMutation()\n        createMutation()\n      },\n      { immediate: true }\n    )\n    watch(enableXScroll, value => {\n      emitEvent(props.onXEnabledChange, value)\n    })\n    watch(enableYScroll, value => {\n      emitEvent(props.onYEnabledChange, value)\n    })\n\n    expose({\n      x,\n      y,\n      percentX,\n      percentY,\n      xScrollLimit,\n      yScrollLimit,\n\n      xBarLength,\n      yBarLength,\n      enableXScroll,\n      enableYScroll,\n\n      wrapper,\n      content: contentEl,\n      xBar,\n      yBar,\n\n      refresh,\n      scrollTo,\n      scrollBy,\n      scrollToElement,\n      ensureInView,\n      getXScrollLimit,\n      getYScrollLimit,\n      addScrollListener,\n      removeScrollListener\n    })\n\n    function getCommonPayload() {\n      return {\n        clientX: (isRtl.value ? -1 : 1) * x.value,\n        clientY: y.value,\n        percentX: percentX.value,\n        percentY: percentY.value\n      }\n    }\n\n    function syncBarScroll() {\n      xBar.value?.handleScroll(percentX.value)\n      yBar.value?.handleScroll(percentY.value)\n    }\n\n    function handleMouseDown(event: MouseEvent) {\n      if (!props.pointer || event.button !== 0 || USE_TOUCH) {\n        return false\n      }\n\n      handlePointerDown(event)\n    }\n\n    // 记录滚动开始位置\n    let xScrollStartAt = 0\n    let yScrollStartAt = 0\n\n    // 记录滚动开始鼠标位置\n    let cursorXPosition = 0\n    let cursorYPosition = 0\n\n    function handlePointerDown(event: MouseEvent) {\n      if (!enableXScroll.value && !enableYScroll.value) {\n        return false\n      }\n\n      prepareScroll()\n\n      xScrollStartAt = x.value\n      yScrollStartAt = y.value\n      cursorXPosition = event.clientX\n      cursorYPosition = event.clientY\n\n      document.addEventListener(MOVE_EVENT, handlePointerMove)\n      document.addEventListener(UP_EVENT, handlePointerUp)\n\n      emitEvent(props.onScrollStart, getCommonPayload())\n    }\n\n    function handlePointerMove(event: MouseEvent) {\n      event.stopPropagation()\n      event.preventDefault()\n\n      scrolling.value = true\n\n      if (enableXScroll.value) {\n        setScrollX(xScrollStartAt - (event.clientX - cursorXPosition))\n      }\n\n      if (enableYScroll.value) {\n        setScrollY(yScrollStartAt - (event.clientY - cursorYPosition))\n      }\n\n      computePercent()\n      triggerUpdate()\n      syncBarScroll()\n      emitScrollEvent(props.mode)\n    }\n\n    function handlePointerUp() {\n      document.removeEventListener(MOVE_EVENT, handlePointerMove)\n      document.removeEventListener(UP_EVENT, handlePointerUp)\n\n      emitEvent(props.onScrollEnd, getCommonPayload())\n      startAutoplay()\n    }\n\n    function handleWheel(event: WheelEvent, type: 'vertical' | 'horizontal') {\n      const isVerticalScroll = enableYScroll.value && type === 'vertical'\n      const isHorizontalScroll = enableXScroll.value && type === 'horizontal'\n      const sign = event.deltaY > 0 ? 1 : -1\n\n      emitEvent(props.onWheel, event, type)\n\n      if (isVerticalScroll || isHorizontalScroll) {\n        const maxLimit = isVerticalScroll ? yScrollLimit.value : xScrollLimit.value\n        const scroll = isVerticalScroll ? y.value : x.value\n\n        if (sign > 0 ? scroll < maxLimit : scroll > 0) {\n          event.stopPropagation()\n\n          return false\n        }\n      }\n    }\n\n    function handleScroll(event: UIEvent) {\n      if (!contentEl.value || syncing.value) return\n\n      event.stopPropagation()\n\n      const type = contentEl.value?.scrollLeft !== x.value ? 'horizontal' : 'vertical'\n\n      y.value = contentEl.value.scrollTop\n      x.value = contentEl.value.scrollLeft\n\n      computePercent()\n      triggerUpdate()\n      syncBarScroll()\n      emitScrollEvent(type)\n    }\n\n    function prepareScroll() {\n      stopAutoplay()\n    }\n\n    function handleBarScrollStart(type: 'vertical' | 'horizontal') {\n      usingBar.value = true\n      prepareScroll()\n      emitEvent(props.onBarScrollStart, {\n        ...getCommonPayload(),\n        type\n      })\n    }\n\n    function handleBarScrollEnd(type: 'vertical' | 'horizontal') {\n      usingBar.value = false\n      startAutoplay()\n      emitEvent(props.onBarScrollEnd, {\n        ...getCommonPayload(),\n        type\n      })\n    }\n\n    function handleXBarScroll(percent: number) {\n      percentX.value = percent\n      setScrollX((percent * xScrollLimit.value) / 100)\n      triggerUpdate()\n      emitEvent(props.onBarScroll, {\n        ...getCommonPayload(),\n        type: 'horizontal'\n      })\n      emitScrollEvent('horizontal')\n    }\n\n    function handleYBarScroll(percent: number) {\n      percentY.value = percent\n      setScrollY((percent * yScrollLimit.value) / 100)\n      triggerUpdate()\n      emitEvent(props.onBarScroll, {\n        ...getCommonPayload(),\n        type: 'vertical'\n      })\n      emitScrollEvent('vertical')\n    }\n\n    function emitScrollEvent(type: NativeScrollMode) {\n      emitEvent(props.onScroll, {\n        ...getCommonPayload(),\n        type\n      })\n      emitter.emit('scroll', {\n        ...getCommonPayload(),\n        type\n      })\n    }\n\n    function getState() {\n      const { clientX: scrollX, clientY: scrollY, percentX, percentY } = getCommonPayload()\n\n      return {\n        scrollX,\n        scrollY,\n        percentX,\n        percentY,\n        enableXScroll: enableXScroll.value,\n        enableYScroll: enableYScroll.value\n      }\n    }\n\n    function getXScrollLimit() {\n      return [0, xScrollLimit.value]\n    }\n\n    function getYScrollLimit() {\n      return [0, yScrollLimit.value]\n    }\n\n    function ensureInView(el: string | Element, duration?: number, offset = 0) {\n      if (!wrapper.value) return Promise.resolve()\n\n      if (typeof el === 'string') {\n        el = wrapper.value.querySelector(el)!\n      }\n\n      if (!isElement(el)) return Promise.resolve()\n\n      const wrapperRect = wrapper.value.getBoundingClientRect()\n      const elRect = el.getBoundingClientRect()\n\n      let clientX = 0\n      let clientY = 0\n\n      if (props.mode !== 'vertical') {\n        if (elRect.left < wrapperRect.left + offset) {\n          clientX = elRect.left - wrapperRect.left - offset\n        } else if (elRect.right > wrapperRect.right - offset) {\n          clientX = elRect.right - wrapperRect.right + offset\n        }\n      }\n\n      if (props.mode !== 'horizontal') {\n        if (elRect.top < wrapperRect.top + offset) {\n          clientY = elRect.top - wrapperRect.top - offset\n        } else if (elRect.bottom > wrapperRect.bottom - offset) {\n          clientY = elRect.bottom - wrapperRect.bottom + offset\n        }\n      }\n\n      return scrollBy(clientX, clientY, duration)\n    }\n\n    function addScrollListener(listener: EventHandler) {\n      emitter.on('scroll', listener)\n    }\n\n    function removeScrollListener(listener: EventHandler) {\n      emitter.off('scroll', listener)\n    }\n\n    function renderContent() {\n      const Content = (props.scrollTag || 'div') as any\n      const children =\n        props.observeDeep && slots.default ? renderSlot(slots, 'default', slotParams).children : []\n\n      return (\n        <Content\n          {...props.scrollAttrs}\n          {...(props.scrollOnly ? attrs : {})}\n          ref={contentEl}\n          class={wrapperClass.value}\n          style={[props.scrollAttrs?.style, props.scrollStyle, props.scrollOnly && style.value]}\n          onMousedown={handleMouseDown}\n          onWheelPassive={(event: WheelEvent) =>\n            handleWheel(event, event.shiftKey ? 'horizontal' : 'vertical')}\n          onScroll={handleScroll}\n        >\n          {slots.extra && (\n            <div\n              class={nh.be('extra')}\n              style={{\n                width: willMutate.value ? undefined : `${content.scrollWidth}px`,\n                height: willMutate.value ? undefined : `${content.scrollHeight}px`\n              }}\n            >\n              <div\n                class={nh.be('extra-inner')}\n                style={{\n                  width: `${content.offsetWidth}px`,\n                  height: `${content.offsetHeight}px`\n                }}\n              >\n                {renderSlot(slots, 'extra', slotParams)}\n              </div>\n            </div>\n          )}\n          {slots.default &&\n            (props.observeDeep\n              ? flatVNodes(children).map((vnode, index) => {\n                return (\n                  <ResizeObserver key={vnode.key ?? index} on-resize={handleResize}>\n                    {() => vnode}\n                  </ResizeObserver>\n                )\n              })\n              : renderSlot(slots, 'default', slotParams))}\n        </Content>\n      )\n    }\n\n    return () => {\n      if (props.scrollOnly) {\n        return <ResizeObserver on-resize={handleResize}>{renderContent()}</ResizeObserver>\n      }\n\n      return (\n        <div\n          {...attrs}\n          ref={wrapper}\n          class={[className.value, attrs.class]}\n          style={[style.value, attrs.style as any]}\n        >\n          {createSlotRender(slots, ['prefix-trap', 'prefixTrap'])?.()}\n          <ResizeObserver on-resize={handleResize}>{renderContent()}</ResizeObserver>\n          {props.useXBar && (\n            <Scrollbar\n              ref={xBar}\n              inherit\n              placement={'bottom'}\n              class={[nh.bem('bar', 'horizontal'), props.barClass]}\n              fade={barFade.value}\n              bar-length={xBarLength.value}\n              disabled={!enableXScroll.value}\n              appear={props.appear}\n              duration={props.barDuration}\n              use-track={props.useBarTrack}\n              onScrollStart={() => handleBarScrollStart('horizontal')}\n              onScroll={handleXBarScroll}\n              onScrollEnd={() => handleBarScrollEnd('horizontal')}\n            ></Scrollbar>\n          )}\n          {props.useYBar && (\n            <Scrollbar\n              ref={yBar}\n              inherit\n              placement={'right'}\n              class={[nh.bem('bar', 'vertical'), props.barClass]}\n              fade={barFade.value}\n              bar-length={yBarLength.value}\n              disabled={!enableYScroll.value}\n              appear={props.appear}\n              duration={props.barDuration}\n              use-track={props.useBarTrack}\n              onScrollStart={() => handleBarScrollStart('vertical')}\n              onScroll={handleYBarScroll}\n              onScrollEnd={() => handleBarScrollEnd('vertical')}\n            ></Scrollbar>\n          )}\n          {createSlotRender(slots, ['suffix-trap', 'suffixTrap'])?.()}\n        </div>\n      )\n    }\n  }\n})\n", "import { eventProp, valueProp, wrapProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes } from 'vue'\n\nexport const optionProps = wrapProps({\n  value: valueProp,\n  label: {\n    type: String,\n    default: ''\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  divided: {\n    type: Boolean,\n    default: false\n  },\n  title: {\n    type: String,\n    default: ''\n  },\n  hitting: {\n    type: Boolean,\n    default: false\n  },\n  noHover: {\n    type: Boolean,\n    default: false\n  },\n  selected: {\n    type: Boolean,\n    default: false\n  },\n  onSelect: eventProp()\n})\n\nexport type OptionProps = ExtractPropTypes<typeof optionProps>\n\nexport const optionGroupProps = wrapProps({\n  label: {\n    type: String,\n    default: ''\n  },\n  divided: {\n    type: Boolean,\n    default: false\n  }\n})\n\nexport type OptionGroupProps = ExtractPropTypes<typeof optionGroupProps>\n", "<template>\n  <li\n    ref=\"wrapper\"\n    :class=\"className\"\n    :title=\"title || undefined\"\n    role=\"option\"\n    :aria-disabled=\"disabled ? 'true' : undefined\"\n    :aria-selected=\"selected\"\n    @click=\"handleSelect\"\n  >\n    <slot>{{ label || value }}</slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent } from 'vue'\n\nimport { emitEvent, useNameHelper } from '@vexip-ui/config'\nimport { optionProps } from './props'\n\nexport default defineComponent({\n  name: 'Option',\n  props: optionProps,\n  emits: [],\n  setup(props) {\n    const nh = useNameHelper('option')\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('disabled')]: props.disabled,\n        [nh.bm('selected')]: !props.disabled && props.selected,\n        [nh.bm('divided')]: props.divided,\n        [nh.bm('hitting')]: props.hitting,\n        [nh.bm('no-hover')]: props.noHover\n      }\n    })\n\n    function handleSelect() {\n      if (props.disabled) return\n\n      emitEvent(props.onSelect!)\n    }\n\n    return {\n      className,\n      handleSelect\n    }\n  }\n})\n</script>\n", "<template>\n  <li\n    ref=\"wrapper\"\n    :class=\"className\"\n    :title=\"title || undefined\"\n    role=\"option\"\n    :aria-disabled=\"disabled ? 'true' : undefined\"\n    :aria-selected=\"selected\"\n    @click=\"handleSelect\"\n  >\n    <slot>{{ label || value }}</slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent } from 'vue'\n\nimport { emitEvent, useNameHelper } from '@vexip-ui/config'\nimport { optionProps } from './props'\n\nexport default defineComponent({\n  name: 'Option',\n  props: optionProps,\n  emits: [],\n  setup(props) {\n    const nh = useNameHelper('option')\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('disabled')]: props.disabled,\n        [nh.bm('selected')]: !props.disabled && props.selected,\n        [nh.bm('divided')]: props.divided,\n        [nh.bm('hitting')]: props.hitting,\n        [nh.bm('no-hover')]: props.noHover\n      }\n    })\n\n    function handleSelect() {\n      if (props.disabled) return\n\n      emitEvent(props.onSelect!)\n    }\n\n    return {\n      className,\n      handleSelect\n    }\n  }\n})\n</script>\n", "import { booleanProp, booleanStringProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const overflowProps = buildProps({\n  items: Array as PropType<any[]>,\n  tag: String,\n  attrFlag: booleanStringProp,\n  static: booleanProp,\n  maxCount: Number,\n  onRestChange: eventProp<(rest: number) => void>(),\n  onToggle: eventProp<(overflow: boolean) => void>()\n})\n\nexport type OverflowProps = ExtractPropTypes<typeof overflowProps>\nexport type OverflowCProps = ConfigurableProps<OverflowProps, 'items'>\n", "import { ResizeObserver } from '@/components/resize-observer'\n\nimport {\n  Fragment,\n  computed,\n  createTextVNode,\n  defineComponent,\n  nextTick,\n  onMounted,\n  ref,\n  watch\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { isDefined } from '@vexip-ui/utils'\nimport { overflowProps } from './props'\n\nconst TEXT_VNODE = createTextVNode('').type\n\nexport default defineComponent({\n  name: 'Overflow',\n  inheritAttrs: false,\n  props: overflowProps,\n  emits: [],\n  setup(_props, { attrs, slots, expose }) {\n    const props = useProps('overflow', _props, {\n      items: {\n        default: null,\n        static: true\n      },\n      tag: 'div',\n      attrFlag: false,\n      static: false,\n      maxCount: 0\n    })\n\n    const nh = useNameHelper('overflow')\n    const restCount = ref(0)\n\n    const wrapper = ref<HTMLElement>()\n    const counter = ref<HTMLElement>()\n    const suffix = ref<HTMLElement>()\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('manual')]: props.maxCount > 0\n        }\n      ]\n    })\n    const hiddenFlag = computed(() => {\n      return props.attrFlag ? (props.attrFlag === true ? 'hidden' : props.attrFlag) : false\n    })\n\n    watch([() => props.items?.length, () => props.maxCount], () => {\n      nextTick(refresh)\n    })\n\n    expose({ refresh })\n\n    onMounted(refresh)\n\n    function toggleDisplay(el: HTMLElement, show: boolean) {\n      if (hiddenFlag.value) {\n        show ? el.removeAttribute(hiddenFlag.value) : el.setAttribute(hiddenFlag.value, '')\n      } else {\n        if (show) {\n          el.style.display = ''\n        } else {\n          el.style.display = 'none'\n        }\n      }\n    }\n\n    function computeHorizontalMargin(el: HTMLElement) {\n      const style = getComputedStyle(el)\n      const marginLeft = parseFloat(style.marginLeft) || 0\n      const marginRight = parseFloat(style.marginRight) || 0\n\n      return marginLeft + marginRight\n    }\n\n    function computeHorizontalPadding(el: HTMLElement) {\n      const style = getComputedStyle(el)\n      const paddingLeft = parseFloat(style.paddingLeft) || 0\n      const paddingRight = parseFloat(style.paddingRight) || 0\n\n      return paddingLeft + paddingRight\n    }\n\n    function computeOuterWidth(el: HTMLElement) {\n      return el.offsetWidth + computeHorizontalMargin(el)\n    }\n\n    let lastOverflow = false\n    let lastRestCount = restCount.value\n\n    function refresh() {\n      const counterEl = counter.value\n\n      if (!wrapper.value || !counterEl) return\n\n      toggleDisplay(counterEl, true)\n\n      const children = wrapper.value.children\n      const childCount = children.length\n\n      let overflow = false\n\n      if (props.maxCount > 0) {\n        for (let i = 0, len = childCount - 1; i < len; ++i) {\n          const child = children[i] as HTMLElement\n\n          child.style.display = i < props.maxCount ? '' : 'none'\n        }\n\n        if (props.maxCount > childCount - 1) {\n          toggleDisplay(counterEl, false)\n\n          restCount.value = 0\n        } else {\n          restCount.value = childCount - 1 - props.maxCount - (slots.suffix ? 1 : 0)\n          overflow = restCount.value > 0\n        }\n\n        postRefresh(overflow)\n        return\n      }\n\n      const suffixEl = suffix.value\n      const wrapperWidth = wrapper.value.offsetWidth - computeHorizontalPadding(wrapper.value)\n      const childWidths: number[] = []\n\n      let totalWidth = suffixEl ? suffixEl.offsetWidth : 0\n\n      const counterMargin = computeHorizontalMargin(counterEl)\n      const length = childCount - (suffixEl ? 2 : 1)\n\n      for (let i = 0; i < length; ++i) {\n        if (i < 0) continue\n\n        const child = children[i] as HTMLElement\n\n        if (overflow) {\n          toggleDisplay(child, false)\n          continue\n        } else {\n          toggleDisplay(child, true)\n        }\n\n        const childWidth = computeOuterWidth(child)\n\n        totalWidth += childWidth\n        childWidths[i] = childWidth\n\n        if (totalWidth > wrapperWidth) {\n          for (let j = i; j >= 0; --j) {\n            restCount.value = length - j\n            totalWidth -= childWidths[j]\n\n            if (totalWidth + counterEl.offsetWidth + counterMargin <= wrapperWidth || !j) {\n              overflow = true\n              i = j - 1\n\n              if (suffixEl) {\n                suffixEl.style.maxWidth =\n                  i === -1 ? `${wrapperWidth - counterEl.offsetWidth}px` : ''\n              }\n\n              break\n            }\n          }\n        }\n      }\n\n      postRefresh(overflow)\n    }\n\n    function postRefresh(overflow: boolean) {\n      if (lastRestCount !== restCount.value) {\n        lastRestCount = restCount.value\n        emitEvent(props.onRestChange, restCount.value)\n      }\n\n      counter.value && toggleDisplay(counter.value, overflow)\n\n      if (overflow !== lastOverflow) {\n        lastOverflow = overflow\n        emitEvent(props.onToggle, overflow)\n      }\n    }\n\n    function syncCounterRef(el?: HTMLElement | null) {\n      if (el) {\n        counter.value = el.nextElementSibling as HTMLElement | undefined\n      } else {\n        counter.value = undefined\n      }\n    }\n\n    return () => {\n      const CustomTag = (props.tag || 'div') as any\n      const itemSlot = slots.default\n      const staticItem = props.static\n      const counterVNode = slots.counter?.({ count: restCount.value })[0] || null\n\n      const renderCounter = () =>\n        counterVNode?.type === TEXT_VNODE ? <span>{counterVNode}</span> : counterVNode\n      const render = () => (\n        <CustomTag {...attrs} ref={wrapper} class={className.value}>\n          {itemSlot && isDefined(props.items)\n            ? props.items.map((item, index) => {\n              const vnode = itemSlot({ item, index })[0]\n\n              if (staticItem) {\n                vnode.key = index\n\n                return vnode\n              }\n\n              return (\n                <ResizeObserver key={index} onResize={refresh}>\n                  {() => vnode}\n                </ResizeObserver>\n              )\n            })\n            : itemSlot?.()}\n          {counterVNode\n            ? (\n              <Fragment ref={syncCounterRef as any}>{renderCounter()}</Fragment>\n              )\n            : (\n              <span ref={counter} style={{ display: 'inline-block' }}></span>\n              )}\n          {slots.suffix\n            ? (\n              <ResizeObserver onResize={refresh}>\n                <div ref={suffix} class={nh.be('suffix')}>\n                  {slots.suffix()}\n                </div>\n              </ResizeObserver>\n              )\n            : null}\n        </CustomTag>\n      )\n\n      if (import.meta.env.MODE === 'test') {\n        // It is difficult to test ResizeObserver in vitest, so directly rendering all items\n        return render()\n      }\n\n      return <ResizeObserver onResize={refresh}>{render()}</ResizeObserver>\n    }\n  }\n})\n", "import { booleanProp, buildProps, eventProp, sizeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { TagType } from './symbol'\n\nexport const tagProps = buildProps({\n  size: sizeProp,\n  type: String as PropType<TagType>,\n  border: booleanProp,\n  closable: booleanProp,\n  color: String,\n  simple: booleanProp,\n  circle: booleanProp,\n  prefix: [String, Number],\n  prefixBg: String,\n  prefixColor: String,\n  suffix: [String, Number],\n  suffixBg: String,\n  suffixColor: String,\n  disabled: booleanProp,\n  onClose: eventProp()\n})\n\nexport type TagProps = ExtractPropTypes<typeof tagProps>\nexport type TagCProps = ConfigurableProps<TagProps>\n", "import { Icon } from '@/components/icon'\n\nimport { computed, defineComponent } from 'vue'\n\nimport { createSizeProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { adjustAlpha, isClient, mixColor, parseColorToRgba } from '@vexip-ui/utils'\nimport { tagProps } from './props'\n\nimport type { TagType } from './symbol'\n\nconst tagTypes = Object.freeze<TagType[]>([\n  'default',\n  'primary',\n  'info',\n  'success',\n  'error',\n  'warning',\n  'lime',\n  'pink',\n  'magenta',\n  'tomato',\n  'orange',\n  'cyan',\n  'navy',\n  'gold',\n  'purple'\n])\n\nexport default defineComponent({\n  name: 'Tag',\n  components: {\n    Icon\n  },\n  props: tagProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('tag', _props, {\n      size: createSizeProp(),\n      type: {\n        default: 'default',\n        validator: (value: TagType) => tagTypes.includes(value)\n      },\n      border: false,\n      closable: false,\n      color: null,\n      simple: false,\n      circle: false,\n      prefix: '',\n      prefixBg: '',\n      prefixColor: '',\n      suffix: '',\n      suffixBg: '',\n      suffixColor: '',\n      disabled: false\n    })\n\n    const nh = useNameHelper('tag')\n    const icons = useIcons()\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.size)]: props.size !== 'default',\n        [nh.bm(props.type)]: props.type !== 'default',\n        [nh.bm('border')]: props.border,\n        [nh.bm('simple')]: props.simple,\n        [nh.bm('circle')]: props.circle,\n        [nh.bm('closable')]: props.closable,\n        [nh.bm('disabled')]: props.disabled\n      }\n    })\n    const style = computed(() => {\n      if (!props.color) return undefined\n\n      const rootStyle = isClient ? getComputedStyle(document.documentElement) : null\n      const white = parseColorToRgba(rootStyle?.getPropertyValue(nh.nv('color-white')) || '#fff')\n      const baseColor = parseColorToRgba(props.color)\n      const base = baseColor.toString()\n\n      return nh.cvm({\n        color: 'var(--vxp-color-white)',\n        'bg-color': base,\n        'b-color': base,\n        'close-color': 'var(--vxp-color-white)',\n        'd-color': mixColor(white, baseColor, 0.3).toString(),\n        ...(props.simple || props.border\n          ? {\n              color: base,\n              'close-color': base\n            }\n          : {}),\n        ...(props.simple\n          ? {\n              'bg-color': adjustAlpha(baseColor, 0.2).toString()\n            }\n          : {})\n      })\n    })\n\n    function handleClose(event: MouseEvent) {\n      if (!props.closable || props.disabled || event.button > 0) {\n        return false\n      }\n\n      event.stopPropagation()\n      emitEvent(props.onClose)\n    }\n\n    function renderClose() {\n      if (!props.closable) return null\n\n      return (\n        <button type={'button'} class={nh.be('close')} onClick={handleClose}>\n          <Icon {...icons.value.close} label={'close'}></Icon>\n        </button>\n      )\n    }\n\n    return () => {\n      const hasSuffix = props.suffix === 0 || props.suffix || slots.suffix\n\n      return (\n        <div class={className.value} style={style.value}>\n          {props.prefix === 0 || props.prefix || slots.prefix\n            ? (\n              <span\n                class={[nh.be('unit'), nh.be('prefix')]}\n                style={{\n                  color: props.prefixColor,\n                  backgroundColor: props.prefixBg,\n                  borderColor: props.prefixBg\n                }}\n              >\n                {slots.prefix ? slots.prefix() : props.prefix}\n              </span>\n              )\n            : null}\n          <span class={[nh.be('unit'), nh.be('content')]}>\n            {slots.default?.()}\n            {!hasSuffix && renderClose()}\n          </span>\n          {hasSuffix\n            ? (\n              <span\n                class={[nh.be('unit'), nh.be('suffix')]}\n                style={{\n                  color: props.suffixColor,\n                  backgroundColor: props.suffixBg,\n                  borderColor: props.suffixBg\n                }}\n              >\n                {slots.suffix ? slots.suffix() : props.suffix}\n                {renderClose()}\n              </span>\n              )\n            : null}\n        </div>\n      )\n    }\n  }\n})\n", "import { booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ScrollPayload } from './symbol'\n\nexport const virtualListProps = buildProps({\n  items: Array as PropType<Array<Record<string, any>>>,\n  itemSize: Number,\n  itemFixed: booleanProp,\n  idKey: String,\n  defaultKeyAt: [Number, String, Symbol],\n  bufferSize: Number,\n  listTag: String,\n  itemsTag: String,\n  hideBar: booleanProp,\n  lockItems: booleanProp,\n  itemsAttrs: Object as PropType<Record<string, any>>,\n  autoplay: booleanProp,\n  ignoreResize: booleanProp,\n  onScroll: eventProp<(payload: ScrollPayload) => void>(),\n  onResize: eventProp<(entry: ResizeObserverEntry) => void>()\n})\n\nexport type VirtualListProps = ExtractPropTypes<typeof virtualListProps>\nexport type VirtualListCProps = ConfigurableProps<VirtualListProps, 'items'>\n", "import { NativeScroll } from '@/components/native-scroll'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport { computed, defineComponent, nextTick, ref, renderSlot, toRefs, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { createSlotRender, useVirtual } from '@vexip-ui/hooks'\nimport { virtualListProps } from './props'\n\nimport type { NativeScrollExposed } from '@/components/native-scroll'\nimport type { ScrollPayload } from './symbol'\n\nexport default defineComponent({\n  name: 'VirtualList',\n  components: {\n    NativeScroll,\n    ResizeObserver\n  },\n  inheritAttrs: false,\n  props: virtualListProps,\n  emits: [],\n  setup(_props, { slots, attrs, expose }) {\n    const props = useProps('virtualList', _props, {\n      items: {\n        default: () => [],\n        static: true\n      },\n      itemSize: 36,\n      itemFixed: false,\n      idKey: 'id',\n      defaultKeyAt: null,\n      bufferSize: 5,\n      listTag: 'div',\n      itemsTag: 'ul',\n      itemsAttrs: null,\n      hideBar: false,\n      lockItems: false,\n      autoplay: false,\n      ignoreResize: false\n    })\n\n    const nh = useNameHelper('virtual-list')\n\n    const { items, itemSize, itemFixed, idKey, bufferSize } = toRefs(props)\n\n    const scroll = ref<NativeScrollExposed>()\n    const list = ref<HTMLElement>()\n    const wrapper = computed(() => scroll.value?.content)\n\n    const {\n      indexMap,\n      heightTree,\n      scrollOffset,\n      visibleItems,\n      listStyle,\n      itemsStyle,\n      handleScroll,\n      handleResize,\n      handleItemResize,\n      scrollTo,\n      scrollBy,\n      scrollToKey,\n      scrollToIndex,\n      ensureIndexInView,\n      ensureKeyInView\n    } = useVirtual({\n      items,\n      itemSize,\n      itemFixed,\n      idKey,\n      bufferSize,\n      wrapper,\n      defaultKeyAt: props.defaultKeyAt,\n      autoResize: false\n    })\n\n    expose({\n      scroll,\n      wrapper,\n      list,\n      indexMap,\n      heightTree,\n      scrollOffset,\n      scrollTo,\n      scrollBy,\n      scrollToKey,\n      scrollToIndex,\n      ensureIndexInView,\n      ensureKeyInView,\n      refresh\n    })\n\n    watch(\n      () => props.items.length,\n      () => {\n        nextTick(refresh)\n      }\n    )\n\n    function onScroll(payload: ScrollPayload) {\n      handleScroll()\n      emitEvent(props.onScroll, payload)\n    }\n\n    function onResize(entry: ResizeObserverEntry) {\n      if (props.ignoreResize) return\n\n      handleResize(entry)\n      emitEvent(props.onResize, entry)\n    }\n\n    function onItemResize(key: number | string | symbol, entry: ResizeObserverEntry) {\n      if (!props.lockItems && !props.ignoreResize) {\n        handleItemResize(key, entry)\n      }\n    }\n\n    function refresh() {\n      return scroll.value?.refresh() ?? Promise.resolve()\n    }\n\n    return () => {\n      const keyField = props.idKey\n      const itemFixed = props.itemFixed\n      const keyIndexMap = indexMap.value\n      const { class: itemsClass, style: itemsOtherStyle, ...itemsAttrs } = props.itemsAttrs || {}\n\n      const ListTag = (props.listTag || 'div') as any\n      const ItemsTag = (props.itemsTag || 'ul') as any\n\n      let renderingItems = visibleItems.value\n\n      if (import.meta.env.MODE === 'test') {\n        // It is difficult to test ResizeObserver in vitest, so directly rendering all items\n        renderingItems = props.items\n      }\n\n      return (\n        <NativeScroll\n          {...attrs}\n          ref={scroll}\n          class={[nh.b(), props.inherit && nh.bm('inherit'), attrs.class]}\n          inherit={props.inherit}\n          use-y-bar={!props.hideBar}\n          scroll-y={scrollOffset.value}\n          autoplay={props.autoplay}\n          onScroll={onScroll}\n          onResize={onResize}\n        >\n          {{\n            default: () => (\n              <ResizeObserver onResize={refresh}>\n                <ListTag ref={list} class={nh.be('list')} style={listStyle.value}>\n                  <ItemsTag\n                    {...itemsAttrs}\n                    class={[nh.be('items'), itemsClass]}\n                    style={[itemsStyle.value, itemsOtherStyle]}\n                  >\n                    {slots.default && props.items.length\n                      ? renderingItems.map(item => {\n                        const key = item[keyField]\n                        const index = keyIndexMap.get(key)\n                        const vnode = renderSlot(slots, 'default', { item, index })\n\n                        if (itemFixed) {\n                          vnode.key = key\n\n                          return vnode\n                        }\n\n                        const onResize = onItemResize.bind(null, key)\n\n                        return (\n                          <ResizeObserver key={key} onResize={onResize}>\n                            {() => vnode}\n                          </ResizeObserver>\n                        )\n                      })\n                      : slots.empty?.()}\n                  </ItemsTag>\n                </ListTag>\n              </ResizeObserver>\n            ),\n            prefixTrap: createSlotRender(slots, ['prefix-trap', 'prefixTrap']),\n            suffixTrap: createSlotRender(slots, ['suffix-trap', 'suffixTrap'])\n          }}\n        </NativeScroll>\n      )\n    }\n  }\n})\n", "import { buildProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ColumnFlex, ColumnOptions, RowGridAlign, RowGridJustify } from './symbol'\n\nexport const rowProps = buildProps({\n  tag: String,\n  gap: [Number, Array] as PropType<number | number[]>,\n  justify: String as PropType<RowGridJustify>,\n  align: String as PropType<RowGridAlign>,\n  columnFlex: {\n    type: [Boolean, Object] as PropType<boolean | Partial<ColumnFlex>>,\n    default: null\n  }\n})\n\nexport type RowProps = ExtractPropTypes<typeof rowProps>\nexport type RowCProps = ConfigurableProps<RowProps>\n\nconst mediaProp = [Number, Object] as PropType<number | ColumnOptions>\n\nexport const columnProps = buildProps({\n  tag: String,\n  span: Number,\n  offset: Number,\n  push: Number,\n  pull: Number,\n  order: Number,\n  xs: mediaProp,\n  sm: mediaProp,\n  md: mediaProp,\n  lg: mediaProp,\n  xl: mediaProp,\n  xxl: mediaProp,\n  flex: [Number, String],\n  useFlex: {\n    type: [Boolean, Object] as PropType<boolean | Partial<ColumnFlex>>,\n    default: null\n  }\n})\n\nexport type ColumnProps = ExtractPropTypes<typeof columnProps>\nexport type ColumnCProps = ConfigurableProps<ColumnProps>\n", "import type { InjectionKey } from 'vue'\n\nexport type BreakPoint = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl'\n\nexport type RowGridJustify =\n  | 'start'\n  | 'end'\n  | 'center'\n  | 'space-around'\n  | 'space-between'\n  | 'space-evenly'\nexport type RowGridAlign = 'top' | 'middle' | 'bottom' | 'stretch'\n\nexport interface ColumnFlex {\n  justify: RowGridJustify,\n  align: RowGridAlign\n}\n\nexport interface RowState {\n  columnFlex: ColumnFlex | false,\n  gap: number | number[]\n}\n\nexport interface ColumnOptions {\n  span?: number,\n  offset?: number,\n  pull?: number,\n  push?: number,\n  order?: number\n}\n\nexport const breakPoints = Object.freeze<BreakPoint[]>(['xs', 'sm', 'md', 'lg', 'xl', 'xxl'])\n\nexport const ROW_STATE: InjectionKey<RowState> = Symbol('ROW_STATE')\n", "import { computed, defineComponent, h, provide, reactive, toRef } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { rowProps } from './props'\nimport { ROW_STATE } from './symbol'\n\nimport type { RowGridAlign, RowGridJustify } from './symbol'\n\nconst justifyList = Object.freeze<RowGridJustify[]>([\n  'start',\n  'end',\n  'center',\n  'space-around',\n  'space-between',\n  'space-evenly'\n])\nconst alignList = Object.freeze<RowGridAlign[]>(['top', 'middle', 'bottom', 'stretch'])\n\nexport default defineComponent({\n  name: 'Row',\n  props: rowProps,\n  setup(_props, { slots }) {\n    const props = useProps('row', _props, {\n      tag: 'div',\n      gap: 0,\n      justify: {\n        default: 'start',\n        validator: value => justifyList.includes(value)\n      },\n      align: {\n        default: 'top',\n        validator: value => alignList.includes(value)\n      },\n      columnFlex: false\n    })\n\n    const nh = useNameHelper('row')\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(props.justify),\n        nh.bm(props.align),\n        {\n          [nh.bm('inherit')]: props.inherit\n        }\n      ]\n    })\n    const style = computed(() => {\n      if (!props.gap) return null\n\n      if (typeof props.gap === 'number') {\n        return {\n          [nh.cv('h-gap')]: `${props.gap}px`\n        }\n      }\n\n      if (Array.isArray(props.gap)) {\n        const [horizontal, vertical] = props.gap\n\n        return {\n          [nh.cv('h-gap')]: `${horizontal}px`,\n          [nh.cv('v-gap')]: `${vertical}px`\n        }\n      }\n\n      return null\n    })\n    const columnFlex = computed(() => {\n      if (props.columnFlex === true) {\n        return {\n          justify: 'start',\n          align: 'top'\n        }\n      } else if (props.columnFlex) {\n        return {\n          justify: 'start',\n          align: 'top',\n          ...props.columnFlex\n        }\n      }\n\n      return false\n    })\n\n    provide(\n      ROW_STATE,\n      reactive({\n        columnFlex,\n        gap: toRef(props, 'gap')\n      })\n    )\n\n    return () =>\n      h(\n        props.tag || 'div',\n        {\n          class: className.value,\n          style: style.value\n        },\n        {\n          default: () => slots.default && slots.default()\n        }\n      )\n  }\n})\n", "import {\n  booleanProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ButtonAttrType, ButtonType } from '@/components/button'\nimport type { RowGridAlign, RowGridJustify } from '@/components/row'\nimport type { ColumnOptions } from '@/components/column'\nimport type { Rule } from './validator'\nimport type { FormLabelAlign, SubmitMethod } from './symbol'\n\nexport const formProps = buildProps({\n  method: String as PropType<SubmitMethod>,\n  action: String,\n  model: Object,\n  rules: Object,\n  labelWidth: [Number, String] as PropType<number | 'auto'>,\n  labelAlign: String as PropType<FormLabelAlign>,\n  allRequired: booleanProp,\n  labelSuffix: String,\n  hideAsterisk: booleanProp,\n  validateAll: booleanProp,\n  hideLabel: booleanProp,\n  disabled: booleanProp,\n  loading: booleanProp,\n  size: sizeProp,\n  inline: booleanProp,\n  gap: [Number, Array] as PropType<number | number[]>,\n  justify: String as PropType<RowGridJustify>,\n  align: String as PropType<RowGridAlign>\n})\n\nexport type FormProps = ExtractPropTypes<typeof formProps>\nexport type FormCProps = ConfigurableProps<FormProps, 'model'>\n\nconst mediaProp = [Number, Object] as PropType<number | ColumnOptions>\n\nexport const formItemProps = buildProps({\n  locale: localeProp('form'),\n  label: String,\n  prop: String,\n  name: String,\n  rules: [Object, Array] as PropType<Rule | Rule[]>,\n  labelWidth: Number,\n  required: booleanProp,\n  htmlFor: String,\n  errorTransition: String,\n  defaultValue: Object as PropType<any>,\n  hideErrorTip: booleanProp,\n  validateAll: booleanProp,\n  hideAsterisk: booleanProp,\n  hideLabel: booleanProp,\n  action: booleanProp,\n  help: String,\n  pure: booleanProp,\n  span: Number,\n  offset: Number,\n  push: Number,\n  pull: Number,\n  order: Number,\n  xs: mediaProp,\n  sm: mediaProp,\n  md: mediaProp,\n  lg: mediaProp,\n  xl: mediaProp,\n  xxl: mediaProp,\n  flex: [Number, String]\n})\n\nexport type FormItemProps = ExtractPropTypes<typeof formItemProps>\nexport type FormItemCProps = ConfigurableProps<FormItemProps, 'prop' | 'htmlFor' | 'defaultValue'>\n\nexport const formSubmitProps = buildProps({\n  size: sizeProp,\n  locale: localeProp('form'),\n  type: String as PropType<ButtonType>,\n  label: String,\n  dashed: booleanProp,\n  text: booleanProp,\n  simple: booleanProp,\n  ghost: booleanProp,\n  disabled: booleanProp,\n  circle: booleanProp,\n  loadingIcon: iconProp,\n  loadingEffect: String as PropType<IconEffect>,\n  icon: iconProp,\n  color: String,\n  buttonType: String as PropType<ButtonAttrType>,\n  block: booleanProp,\n  tag: String,\n  onBeforeSubmit: Function as PropType<() => unknown>,\n  onSubmit: eventProp(),\n  onError: eventProp<(errors: string[]) => void>()\n})\n\nexport type FormSubmitProps = ExtractPropTypes<typeof formSubmitProps>\nexport type FormSubmitCProps = ConfigurableProps<FormSubmitProps, never, 'onBeforeReset'>\n\nexport const formResetProps = buildProps({\n  size: sizeProp,\n  locale: localeProp('form'),\n  type: String as PropType<ButtonType>,\n  label: String,\n  dashed: booleanProp,\n  text: booleanProp,\n  simple: booleanProp,\n  ghost: booleanProp,\n  disabled: booleanProp,\n  loading: booleanProp,\n  circle: booleanProp,\n  loadingIcon: iconProp,\n  loadingEffect: String as PropType<IconEffect>,\n  icon: iconProp,\n  color: String,\n  buttonType: String as PropType<ButtonAttrType>,\n  block: booleanProp,\n  tag: String,\n  onBeforeReset: Function as PropType<() => unknown>,\n  onReset: eventProp()\n})\n\nexport type FormResetProps = ExtractPropTypes<typeof formResetProps>\nexport type FormResetCProps = ConfigurableProps<FormResetProps, never, 'onBeforeReset'>\n", "import type { ComputedRef, InjectionKey, Ref } from 'vue'\nimport type { ComponentSize, ComponentState } from '@vexip-ui/config'\nimport type { EventEmitter } from '@vexip-ui/utils'\nimport type { Rule } from './validator'\n\nexport type FormLabelAlign = 'right' | 'top' | 'left'\nexport type SubmitMethod = 'get' | 'post' | 'put' | 'delete'\n\nexport interface FormProps {\n  method: SubmitMethod,\n  action: string,\n  model: Record<string, any>,\n  rules: Record<string, any>,\n  labelWidth: number | 'auto',\n  labelAlign: FormLabelAlign,\n  allRequired: boolean,\n  labelSuffix: string,\n  hideAsterisk: boolean,\n  validateAll: boolean,\n  hideLabel: boolean,\n  disabled: boolean,\n  loading: boolean,\n  size: ComponentSize,\n  inline: boolean\n}\n\nexport interface FormItemProps {\n  label: string,\n  prop: string,\n  rules: Rule | Rule[],\n  labelWidth: number | 'auto',\n  required: boolean,\n  htmlFor: string,\n  errorTransition: string,\n  defaultValue: unknown,\n  hideErrorTip: boolean,\n  validateAll: boolean,\n  hideAsterisk: boolean\n}\n\nexport interface FieldOptions {\n  prop: ComputedRef<string>,\n  idFor: ComputedRef<string>,\n  state: ComputedRef<ComponentState>,\n  disabled: ComputedRef<boolean>,\n  loading: ComputedRef<boolean>,\n  size: ComputedRef<ComponentSize>,\n  emitter: EventEmitter,\n  labelWidth: Ref<number>,\n  validate: () => Promise<string[] | null>,\n  reset: () => boolean,\n  clearError: () => void,\n  getValue: (defaultValue?: unknown) => unknown,\n  setValue: (value: unknown, strict?: boolean) => void,\n  sync: (instance: any) => void,\n  unSync: (instance: any) => void\n}\n\nexport interface FormActions {\n  getLabelWidth: () => number,\n  validate: () => Promise<string[]>,\n  validateFields: (props: string | string[]) => Promise<string[]>,\n  reset: () => void,\n  resetFields: (props: string | string[]) => void,\n  clearError: () => void,\n  clearFieldsError: (props: string | string[]) => void\n}\n\n// form\nexport const FORM_PROPS: InjectionKey<Partial<FormProps>> = Symbol('FORM_PROPS')\nexport const FORM_FIELDS: InjectionKey<Set<FieldOptions>> = Symbol('FORM_FIELDS')\nexport const FORM_ACTIONS: InjectionKey<FormActions> = Symbol('FORM_ACTIONS')\n\n// form-item\nexport const FIELD_OPTIONS: InjectionKey<FieldOptions> = Symbol('FIELD_OPTIONS')\n\nexport const submitMethods = Object.freeze<SubmitMethod[]>(['get', 'post', 'put', 'delete'])\nexport const labelAligns = Object.freeze<FormLabelAlign[]>(['right', 'top', 'left'])\n", "<script setup lang=\"ts\">\nimport { Row } from '@/components/row'\n\nimport { computed, provide, reactive } from 'vue'\n\nimport { createSizeProp, useNameHelper, useProps } from '@vexip-ui/config'\nimport { formProps } from './props'\nimport { FORM_ACTIONS, FORM_FIELDS, FORM_PROPS, labelAligns, submitMethods } from './symbol'\n\nimport type { FieldOptions } from './symbol'\n\ndefineOptions({ name: 'Form', inheritAttrs: true })\n\nconst _props = defineProps(formProps)\nconst props = useProps('form', _props, {\n  method: {\n    default: 'post',\n    validator: value => submitMethods.includes(value)\n  },\n  action: null,\n  model: {\n    default: () => ({}),\n    static: true\n  },\n  rules: () => ({}),\n  labelWidth: 'auto',\n  labelAlign: {\n    default: 'right',\n    validator: value => labelAligns.includes(value)\n  },\n  allRequired: false,\n  labelSuffix: '',\n  hideAsterisk: false,\n  validateAll: false,\n  hideLabel: false,\n  disabled: false,\n  loading: false,\n  size: createSizeProp(),\n  inline: false,\n  gap: [8, 0],\n  justify: 'start',\n  align: 'top'\n})\n\nconst nh = useNameHelper('form')\nconst fieldSet: Set<FieldOptions> = reactive(new Set<any>())\n\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.bm(`label-${props.labelAlign}`),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('disabled')]: props.disabled,\n      [nh.bm('loading')]: props.loading,\n      [nh.bm(props.size)]: props.size !== 'default',\n      [nh.bm('inline')]: props.inline\n    }\n  ]\n})\nconst labelWidth = computed(() => {\n  return Math.max(...Array.from(fieldSet).map(field => field.labelWidth.value))\n})\n\nprovide(FORM_PROPS, props)\nprovide(FORM_FIELDS, fieldSet)\nprovide(FORM_ACTIONS, {\n  getLabelWidth,\n  validate,\n  validateFields,\n  reset,\n  resetFields,\n  clearError,\n  clearFieldsError\n})\n\ndefineExpose({\n  validate,\n  validateFields,\n  reset,\n  resetFields,\n  clearError,\n  clearFieldsError\n})\n\nfunction getLabelWidth() {\n  if (typeof props.labelWidth === 'number') {\n    return props.labelWidth\n  }\n\n  return labelWidth.value\n}\n\nfunction getPropMap() {\n  const propMap: Record<string, FieldOptions> = {}\n\n  for (const field of fieldSet) {\n    if (field.prop.value) {\n      propMap[field.prop.value] = field\n    }\n  }\n\n  return propMap\n}\n\nfunction validate() {\n  return validateItems(fieldSet)\n}\n\nfunction validateFields(props: string | string[]) {\n  if (!Array.isArray(props)) {\n    props = [props]\n  }\n\n  const propMap = getPropMap()\n  const fields = new Set<FieldOptions>()\n\n  props.forEach(prop => {\n    if (propMap[prop]) {\n      fields.add(propMap[prop])\n    }\n  })\n\n  return validateItems(fields)\n}\n\nfunction validateItems(items: Set<FieldOptions>) {\n  const validations: Promise<string[] | null>[] = []\n\n  items.forEach(item => {\n    validations.push(item.validate())\n  })\n\n  return new Promise<string[]>(resolve => {\n    Promise.all(validations).then(errors => {\n      resolve(errors.flat().filter(Boolean) as string[])\n    })\n  })\n}\n\nfunction reset() {\n  fieldSet.forEach(field => {\n    field.reset()\n  })\n}\n\nfunction resetFields(props: string | string[]) {\n  if (!Array.isArray(props)) {\n    props = [props]\n  }\n\n  const propMap = getPropMap()\n\n  props.forEach(prop => {\n    if (propMap[prop]) {\n      propMap[prop].reset()\n    }\n  })\n}\n\nfunction clearError() {\n  fieldSet.forEach(field => {\n    field.clearError()\n  })\n}\n\nfunction clearFieldsError(props: string | string[]) {\n  if (!Array.isArray(props)) {\n    props = [props]\n  }\n\n  const propMap = getPropMap()\n\n  props.forEach(prop => {\n    if (propMap[prop]) {\n      propMap[prop].clearError()\n    }\n  })\n}\n</script>\n\n<template>\n  <Row\n    v-bind=\"$attrs\"\n    :class=\"className\"\n    :inherit=\"props.inherit\"\n    tag=\"form\"\n    :method=\"props.action && props.method\"\n    :action=\"props.action\"\n    :gap=\"props.gap\"\n    :justify=\"props.justify\"\n    :align=\"props.align\"\n    :column-flex=\"undefined\"\n  >\n    <slot></slot>\n  </Row>\n</template>\n", "import { computed, getCurrentInstance, inject, onBeforeUnmount, provide } from 'vue'\n\nimport { isNull, noop } from '@vexip-ui/utils'\nimport { FIELD_OPTIONS } from './symbol'\n\nimport type { ComponentSize, ComponentState } from '@vexip-ui/config'\nimport type { FieldOptions } from './symbol'\n\n/**\n * 根据路径读取对象中的值 (实现 ?. 的逻辑)\n *\n * @param obj 需要被读取的对象\n * @param path 读取的路径\n * @param strict 是否开启严格模式 (非法路径报错)\n */\nexport function getValueByPath<T = unknown>(\n  obj: Record<string, any>,\n  path: string | string[],\n  strict = false\n): T | null {\n  if (!obj || !path) return null\n\n  if (typeof path === 'string') {\n    if (path in obj) return obj[path]\n\n    path = path.split('.')\n  }\n\n  if (Array.isArray(path) && path.length) {\n    const lastKey = path.pop()\n\n    if (!lastKey) return null\n\n    for (let i = 0, len = path.length; i < len; ++i) {\n      const key = String(path[i])\n\n      if (!key) break\n\n      obj = obj[key]\n\n      if (isNull(obj)) {\n        if (strict) {\n          throw new Error('[vexip-ui:Form] Get value by an invalid path')\n        }\n\n        return obj\n      }\n    }\n\n    if (strict && isNull(obj[lastKey])) {\n      throw new Error('[vexip-ui:Form] Get value by an invalid path')\n    }\n\n    return obj[lastKey]\n  }\n\n  return null\n}\n\n/**\n * 根据路径设置对象中的值\n *\n * @param obj 需要被设置的对象\n * @param path 设置的路径\n * @param value 需要设置的值\n * @param strict 是否开启严格模式 (非法路径报错)\n */\nexport function setValueByPath(\n  obj: Record<string, any>,\n  path: string | string[],\n  value: unknown,\n  strict = false\n): boolean {\n  if (!obj || !path) return false\n\n  if (typeof path === 'string') {\n    if (path in obj) {\n      obj[path] = value\n\n      return true\n    }\n\n    path = path.split('.')\n  }\n\n  if (Array.isArray(path) && path.length) {\n    const lastKey = path.pop()\n\n    if (!lastKey) return false\n\n    for (let i = 0, len = path.length; i < len; ++i) {\n      const key = String(path[i])\n\n      if (!key) {\n        return false\n      }\n\n      if (typeof obj[key] !== 'object') {\n        if (strict) {\n          throw new Error('[vexip-ui:Form] Set value by an invalid path')\n        }\n\n        obj[key] = {}\n      }\n\n      obj = obj[key]\n    }\n\n    if (strict && typeof obj !== 'object') {\n      throw new Error('[vexip-ui:Form] Set value by an invalid path')\n    }\n\n    obj[lastKey] = value\n\n    return true\n  }\n\n  return false\n}\n\nconst defaultProp = computed(() => '')\nconst defaultState = computed(() => 'default' as ComponentState)\nconst defaultFalse = computed(() => false)\nconst defaultSize = computed(() => 'default' as ComponentSize)\n\nfunction getEmptyActions<V = unknown>() {\n  return {\n    isField: false,\n    idFor: defaultProp,\n    state: defaultState,\n    disabled: defaultFalse,\n    loading: defaultFalse,\n    size: defaultSize,\n    validateField: noop as FieldOptions['validate'],\n    clearField: noop as FieldOptions['clearError'],\n    resetField: noop as FieldOptions['reset'],\n    getFieldValue: (v => v) as (defaultValue?: V) => V,\n    setFieldValue: noop as (value: V, strict?: boolean) => void\n  }\n}\n\n/**\n * Create a field store, provide field states and control methods\n *\n * @param onFocus a focus method for focusing when label is clicked\n */\nexport function useFieldStore<V = unknown>(onFocus?: () => void) {\n  const instance = getCurrentInstance()\n\n  if (!instance) return getEmptyActions<V>()\n\n  const fieldOptions = inject(FIELD_OPTIONS, null)\n\n  if (!fieldOptions) {\n    return getEmptyActions<V>()\n  }\n\n  // Block the provided if there are dependencies between control components.\n  // e.g. AutoComplete -> Select, ColorPicker -> Input\n  provide(FIELD_OPTIONS, null!)\n  fieldOptions.sync(instance)\n  onFocus && fieldOptions.emitter.on('focus', onFocus)\n\n  onBeforeUnmount(() => {\n    fieldOptions.unSync(instance)\n    onFocus && fieldOptions.emitter.off('focus', onFocus)\n  })\n\n  function clearField(defaultValue?: V) {\n    if (!fieldOptions) return\n\n    fieldOptions.setValue(defaultValue)\n    fieldOptions.clearError()\n  }\n\n  return {\n    isField: true,\n    idFor: fieldOptions.idFor,\n    state: fieldOptions.state,\n    disabled: fieldOptions.disabled,\n    loading: fieldOptions.loading,\n    size: fieldOptions.size,\n    validateField: fieldOptions.validate,\n    clearField,\n    resetField: fieldOptions.reset,\n    getFieldValue: fieldOptions.getValue as (defaultValue?: V) => V,\n    setFieldValue: fieldOptions.setValue as (value: V, strict?: boolean) => void\n  }\n}\n", "import { isColor, isDefined, isObject, isPromise, toDate, toNumber } from '@vexip-ui/utils'\n\n// export type Trigger = 'blur' | 'change'\n\nexport type Types =\n  | 'string'\n  | 'number'\n  | 'boolean'\n  | 'int'\n  | 'float'\n  | 'array'\n  | 'object'\n  | 'date'\n  | 'url'\n  | 'color'\n  | 'email'\ntype Range = [number, number]\ntype ValidatorResult = boolean | string | Error | Promise<boolean | string | Error>\n\nexport interface Rule<T = any> {\n  // trigger?: Trigger,\n  required?: boolean,\n  type?: Types,\n  length?: number,\n  range?: Range,\n  strict?: boolean,\n  enums?: T[],\n  message?: string,\n  validator?(value: T, model: Record<string, any>): ValidatorResult\n}\n\ntype TypeOptions = Pick<Rule, 'length' | 'range' | 'strict'>\n\nconst DEFAULT_MESSAGE = 'Validate failed'\n\nconst N_100_200 = '1\\\\d\\\\d|2([0-4]\\\\d|5[0-5])'\nconst IPV4_FIRST = `[1-9](\\\\d)?|${N_100_200}`\nconst IPV4_UNIT = `\\\\d{1,2}|${N_100_200}`\nconst IPV4_REG = `(?:${IPV4_FIRST})\\\\.(?:${IPV4_UNIT})\\\\.(?:${IPV4_UNIT})\\\\.(?:${IPV4_UNIT})`\n\nconst HOST_REG = '(?:[a-zA-Z0-9][\\\\w-]*\\\\.)?(?:[a-zA-Z0-9][\\\\w-]*)(?:\\\\.[a-zA-Z]+){1,2}'\nconst PARAM_REG =\n  '(?:(?:[\\\\/]+[^\\\\?\\\\.]+)+)?(?:[\\\\/]*)?(\\\\?([^&\\\\.]+=[^&\\\\.]*)(&[^&\\\\.]+=[^&\\\\.]*)*)?(#.*)?'\nconst URL_REG = new RegExp(\n  `^(?:[a-z]{2,5}:(\\\\/+)?)?\\\\/\\\\/((?:${IPV4_REG})|(?:${HOST_REG}))(?:${PARAM_REG})?$`\n)\n\nconst EMAIL_REG = /^(?:[a-zA-Z0-9][\\w-]*)@(?:[a-zA-Z0-9][\\w-]*)(?:\\.[a-zA-Z]+){1,2}$/\n\nconst TYPE_LIST = new Set([\n  'string',\n  'number',\n  'boolean',\n  'int',\n  'float',\n  'array',\n  'object',\n  'date',\n  'url',\n  'color',\n  'email'\n] as Types[])\n\nexport async function validate(\n  rules: Rule | Rule[],\n  value: unknown,\n  model: Record<string, unknown>,\n  validateAll = true,\n  defaultMsg = DEFAULT_MESSAGE\n) {\n  if (!Array.isArray(rules)) {\n    rules = [rules]\n  }\n\n  const errors: string[] = []\n\n  for (const rule of rules as Rule[]) {\n    const { message = defaultMsg, validator } = rule\n\n    if (typeof validator === 'function') {\n      let result\n\n      try {\n        result = validator(value, model)\n\n        if (isPromise(result)) {\n          result = await result\n        }\n      } catch (error) {\n        result = error instanceof Error ? error.message : error\n      }\n\n      if (result !== true) {\n        const errorMessage = typeof result === 'string' ? result : message\n\n        errors.push(errorMessage)\n\n        if (!validateAll) break\n      }\n    }\n\n    if (rule.required && !validateRequirement(value)) {\n      errors.push(message)\n\n      if (!validateAll) break\n    }\n\n    if (isDefined(value) && value !== '') {\n      if (rule.enums && !validateEnumeration(value, rule.enums)) {\n        errors.push(message)\n\n        if (!validateAll) break\n      }\n\n      if (rule.type && !validateType(value, rule.type, rule)) {\n        errors.push(message)\n\n        if (!validateAll) break\n      }\n    }\n  }\n\n  return errors\n}\n\nexport function validateRequirement(value: any) {\n  return !(\n    !isDefined(value) ||\n    value.toString().trim() === '' ||\n    (Array.isArray(value) && !value.length) ||\n    (isObject(value) && !Object.keys(value).length)\n  )\n}\n\nexport function validateEnumeration<T>(value: T | T[], options: T[]) {\n  if (!Array.isArray(options) || !options.length) return true\n\n  if (Array.isArray(value)) {\n    const enumSet = new Set(options)\n\n    for (const item of value) {\n      if (!enumSet.has(item)) {\n        return false\n      }\n    }\n\n    return true\n  } else {\n    return options.includes(value)\n  }\n}\n\nexport function validateType(value: unknown, type: Types, options: TypeOptions = {}) {\n  if (!TYPE_LIST.has(type)) return true\n\n  switch (type) {\n    case 'string':\n      return validateString(value, options.length, options.range)\n    case 'number':\n      return validateNumber(value, options.strict, options.length, options.range)\n    case 'boolean':\n      return validateBoolean(value, options.strict)\n    case 'int':\n      return validateInt(value, options.strict, options.length, options.range)\n    case 'float':\n      return validateFloat(value, options.strict, options.length, options.range)\n    case 'array':\n      return Array.isArray(value)\n    case 'object':\n      return isObject(value)\n    case 'date':\n      return validateDate(value, options.strict)\n    case 'url':\n      return validateUrl(value)\n    case 'color':\n      return typeof value === 'string' && isColor(value)\n    case 'email':\n      return validateEmail(value)\n  }\n}\n\nexport function validateString(value: unknown, length?: number, range?: Range) {\n  if (typeof value !== 'string') return false\n\n  if (isDefined(length) && value.length !== length) {\n    return false\n  }\n\n  if (Array.isArray(range)) {\n    const [min, max] = range\n\n    if (min && value.length < min) return false\n\n    if (max && value.length > max) return false\n  }\n\n  return true\n}\n\nexport function validateNumber(value: unknown, strict?: boolean, length?: number, range?: Range) {\n  if (strict) {\n    if (typeof value !== 'number') return false\n  } else {\n    value = Number(value)\n\n    if (Number.isNaN(value)) return false\n  }\n\n  const number = value as number\n\n  if (isDefined(length) && number.toString().length !== length) {\n    return false\n  }\n\n  if (Array.isArray(range)) {\n    const [min, max] = range\n\n    if (isDefined(min) && number < min) return false\n\n    if (isDefined(max) && number > max) return false\n  }\n\n  return true\n}\n\nexport function validateBoolean(value: unknown, strict?: boolean) {\n  if (!strict) {\n    if (typeof value === 'string') {\n      return value === 'true' || value === 'false'\n    }\n\n    if (typeof value === 'number') {\n      return value === 1 || value === 0\n    }\n  }\n\n  return typeof value === 'boolean'\n}\n\nexport function validateInt(value: unknown, strict?: boolean, length?: number, range?: Range) {\n  if (validateNumber(value, strict, length, range)) {\n    const number = toNumber(value as any)\n\n    return Math.ceil(number) === number\n  }\n\n  return false\n}\n\nexport function validateFloat(value: unknown, strict?: boolean, length?: number, range?: Range) {\n  if (validateNumber(value, strict, length, range)) {\n    const number = toNumber(value as any)\n\n    return strict ? Math.ceil(number) !== number : number.toString().includes('.')\n  }\n\n  return false\n}\n\nexport function validateDate(value: unknown, strict?: boolean) {\n  if (strict && !(value instanceof Date)) {\n    return false\n  }\n\n  try {\n    toDate(value as any)\n  } catch (e) {\n    return false\n  }\n\n  return true\n}\n\nexport function validateUrl(value: unknown) {\n  return typeof value === 'string' && URL_REG.test(value)\n}\n\nexport function validateEmail(value: unknown) {\n  return typeof value === 'string' && EMAIL_REG.test(value)\n}\n", "import {\n  booleanNumberProp,\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  classProp,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp,\n  stateProp,\n  valuesProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps, EventListener } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { TagType } from '@/components/tag'\nimport type {\n  ChangeEvent,\n  SelectBaseValue,\n  SelectEvent,\n  SelectFilter,\n  SelectKeyConfig,\n  SelectRawOption\n} from './symbol'\n\ntype CustomChangeEvent =\n  | ChangeEvent\n  | ((value: SelectBaseValue, data: any) => void)\n  | ((value: string, data: any) => void)\n  | ((value: number, data: any) => void)\n  | ((value: boolean, data: any) => void)\n  | ((values: SelectBaseValue[], data: any[]) => void)\n  | ((values: string[], data: any[]) => void)\n  | ((values: number[], data: any[]) => void)\n  | ((value: boolean[], data: any) => void)\n\nexport const selectProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('select'),\n  visible: booleanProp,\n  options: Array as PropType<SelectRawOption[]>,\n  disabled: booleanProp,\n  transitionName: String,\n  outsideClose: booleanProp,\n  placeholder: String,\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  noSuffix: booleanProp,\n  value: valuesProp,\n  multiple: booleanProp,\n  clearable: booleanProp,\n  maxListHeight: Number,\n  listClass: classProp,\n  placement: String as PropType<Placement>,\n  transfer: booleanStringProp,\n  optionCheck: booleanProp,\n  emptyText: String,\n  staticSuffix: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  keyConfig: Object as PropType<SelectKeyConfig>,\n  filter: {\n    type: [Boolean, Function] as PropType<boolean | SelectFilter>,\n    default: null\n  },\n  ignoreCase: booleanProp,\n  creatable: booleanProp,\n  transparent: booleanProp,\n  maxTagCount: Number,\n  noRestTip: booleanProp,\n  tagType: String as PropType<TagType>,\n  noPreview: booleanProp,\n  remote: booleanProp,\n  fitPopper: booleanNumberProp,\n  name: String,\n  popperAlive: booleanProp,\n  countLimit: Number,\n  onFocus: eventProp<(event: FocusEvent) => void>(),\n  onBlur: eventProp<(event: FocusEvent) => void>(),\n  onToggle: eventProp<(visible: boolean) => void>(),\n  onSelect: eventProp<EventListener<SelectEvent>>(),\n  onCancel: eventProp<EventListener<SelectEvent>>(),\n  onChange: eventProp<CustomChangeEvent>(),\n  onClickOutside: eventProp(),\n  onOutsideClose: eventProp(),\n  onClear: eventProp(),\n  onFilterInput: eventProp<(value: string) => void>()\n})\n\nexport type SelectProps = ExtractPropTypes<typeof selectProps>\nexport type SelectCProps = ConfigurableProps<SelectProps>\n", "<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    :aria-disabled=\"props.disabled ? 'true' : undefined\"\n    @click=\"toggleVisible\"\n  >\n    <div\n      ref=\"reference\"\n      :class=\"selectorClass\"\n      tabindex=\"0\"\n      @focus=\"handleFocus\"\n      @blur=\";(!props.filter || !currentVisible) && handleBlur($event)\"\n    >\n      <div\n        v-if=\"hasPrefix\"\n        :class=\"[nh.be('icon'), nh.be('prefix')]\"\n        :style=\"{ color: props.prefixColor }\"\n      >\n        <slot name=\"prefix\">\n          <Icon :icon=\"props.prefix\"></Icon>\n        </slot>\n      </div>\n      <div :class=\"nh.be('control')\">\n        <slot name=\"control\">\n          <template v-if=\"props.multiple\">\n            <Overflow\n              inherit\n              :class=\"[nh.be('tags')]\"\n              :items=\"currentValues\"\n              :max-count=\"props.maxTagCount\"\n              :style=\"{\n                maxWidth: props.maxTagCount <= 0 && `calc(100% - ${anchorWidth}px)`\n              }\"\n              @rest-change=\"restTagCount = $event\"\n            >\n              <template #default=\"{ item: value, index }\">\n                <Tag\n                  inherit\n                  :class=\"nh.be('tag')\"\n                  :type=\"props.tagType\"\n                  closable\n                  :disabled=\"props.disabled\"\n                  @click.stop=\"toggleVisible\"\n                  @close=\"handleTagClose(value)\"\n                >\n                  <span :class=\"nh.be('label')\">\n                    <slot name=\"selected\" :option=\"getOptionFromMap(value)\">\n                      {{ currentLabels[index] }}\n                    </slot>\n                  </span>\n                </Tag>\n              </template>\n              <template #counter=\"{ count }\">\n                <Tag\n                  v-if=\"props.noRestTip\"\n                  inherit\n                  :class=\"[nh.be('tag'), nh.be('counter')]\"\n                  :type=\"props.tagType\"\n                  :disabled=\"props.disabled\"\n                  @click.stop=\"toggleVisible\"\n                >\n                  {{ `+${count}` }}\n                </Tag>\n                <span v-else>\n                  <Tooltip\n                    ref=\"restTip\"\n                    inherit\n                    :transfer=\"false\"\n                    :visible=\"restTipShow\"\n                    trigger=\"custom\"\n                    placement=\"top-end\"\n                    :tip-class=\"nh.be('rest-tip')\"\n                    @click.stop=\"toggleShowRestTip\"\n                  >\n                    <template #trigger>\n                      <Tag\n                        inherit\n                        :class=\"[nh.be('tag'), nh.be('counter')]\"\n                        :type=\"props.tagType\"\n                        :disabled=\"props.disabled\"\n                      >\n                        {{ `+${count}` }}\n                      </Tag>\n                    </template>\n                    <NativeScroll inherit use-y-bar>\n                      <template v-for=\"(value, index) in currentValues\" :key=\"index\">\n                        <Tag\n                          v-if=\"index >= currentValues.length - restTagCount\"\n                          inherit\n                          :class=\"nh.be('tag')\"\n                          closable\n                          :type=\"props.tagType\"\n                          :disabled=\"props.disabled\"\n                          @close=\"handleRestTagClose(value)\"\n                        >\n                          <span :class=\"nh.be('label')\">\n                            <slot name=\"selected\" :option=\"getOptionFromMap(value)\">\n                              {{ currentLabels[index] }}\n                            </slot>\n                          </span>\n                        </Tag>\n                      </template>\n                    </NativeScroll>\n                  </Tooltip>\n                </span>\n              </template>\n              <!-- <template v-if=\"!limited && previewOption\" #suffix>\n                <Tag\n                  inherit\n                  :class=\"[\n                    nh.be('tag'),\n                    nh.bem('tag', 'preview'),\n                    currentValues.includes(previewOption.value) && nh.bem('tag', 'deleted')\n                  ]\"\n                  :type=\"props.tagType\"\n                  closable\n                >\n                  <slot name=\"selected\" :preview=\"true\" :option=\"previewOption\">\n                    {{ previewOption.label }}\n                  </slot>\n                </Tag>\n              </template> -->\n            </Overflow>\n            <div\n              v-if=\"props.filter\"\n              :class=\"nh.be('anchor')\"\n              :style=\"{\n                width: `${anchorWidth}px`\n              }\"\n            >\n              <input\n                ref=\"input\"\n                :class=\"[\n                  nh.be('input'),\n                  nh.bem('input', 'multiple'),\n                  currentVisible && nh.bem('input', 'visible')\n                ]\"\n                :disabled=\"props.disabled\"\n                autocomplete=\"off\"\n                tabindex=\"-1\"\n                role=\"combobox\"\n                aria-autocomplete=\"list\"\n                :name=\"props.name\"\n                @submit.prevent\n                @input=\"handleFilterInput\"\n                @keydown=\"handleFilterKeyDown\"\n                @focus=\"handleFocus($event)\"\n                @blur=\"handleBlur($event)\"\n                @compositionstart=\"composing = true\"\n                @compositionend=\"handleCompositionEnd\"\n                @change=\"handleCompositionEnd\"\n              />\n              <span ref=\"device\" :class=\"nh.be('device')\" aria-hidden=\"true\">\n                {{ currentFilter }}\n              </span>\n            </div>\n          </template>\n          <template v-else>\n            <input\n              v-if=\"props.filter\"\n              ref=\"input\"\n              :class=\"[nh.be('input'), currentVisible && nh.bem('input', 'visible')]\"\n              :disabled=\"props.disabled\"\n              autocomplete=\"off\"\n              tabindex=\"-1\"\n              role=\"combobox\"\n              aria-autocomplete=\"list\"\n              :name=\"props.name\"\n              :style=\"{\n                opacity: currentVisible ? undefined : '0%'\n              }\"\n              @submit.prevent\n              @input=\"handleFilterInput\"\n              @focus=\"handleFocus($event)\"\n              @blur=\"handleBlur($event)\"\n              @compositionstart=\"composing = true\"\n              @compositionend=\"handleCompositionEnd\"\n              @change=\"handleCompositionEnd\"\n            />\n            <span\n              v-if=\"(props.noPreview || !currentVisible) && hasValue && !currentFilter\"\n              :class=\"{\n                [nh.be('selected')]: true,\n                [nh.bem('selected', 'placeholder')]: props.filter && currentVisible && hasValue\n              }\"\n            >\n              <slot\n                v-if=\"getOptionFromMap(currentValues[0])\"\n                name=\"selected\"\n                :option=\"getOptionFromMap(currentValues[0])\"\n              >\n                {{ currentLabels[0] }}\n              </slot>\n              <template v-else>\n                {{ currentLabels[0] }}\n              </template>\n            </span>\n          </template>\n          <span v-if=\"showPlaceholder\" :class=\"nh.be('placeholder')\">\n            <slot\n              v-if=\"previewOption\"\n              name=\"selected\"\n              :preview=\"true\"\n              :option=\"previewOption\"\n            >\n              {{ previewOption.label }}\n            </slot>\n            <template v-else>\n              {{ props.placeholder ?? locale.placeholder }}\n            </template>\n          </span>\n        </slot>\n      </div>\n      <div\n        v-if=\"!props.noSuffix\"\n        :class=\"[nh.be('icon'), nh.be('suffix')]\"\n        :style=\"{\n          color: props.suffixColor,\n          opacity: showClear || props.loading ? '0%' : ''\n        }\"\n      >\n        <slot name=\"suffix\">\n          <Icon\n            v-if=\"props.suffix\"\n            :icon=\"props.suffix\"\n            :class=\"{\n              [nh.be('arrow')]: !props.staticSuffix\n            }\"\n          ></Icon>\n          <Icon v-else v-bind=\"icons.angleDown\" :class=\"nh.be('arrow')\"></Icon>\n        </slot>\n      </div>\n      <div\n        v-else-if=\"props.clearable || props.loading\"\n        :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n      ></div>\n      <Transition :name=\"nh.ns('fade')\" appear>\n        <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear\">\n          <Icon v-bind=\"icons.clear\" label=\"clear\"></Icon>\n        </div>\n        <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n            label=\"loading\"\n          ></Icon>\n        </div>\n      </Transition>\n    </div>\n    <Popper\n      ref=\"popper\"\n      :class=\"[nh.be('popper'), nh.bs('vars')]\"\n      :visible=\"currentVisible\"\n      :to=\"transferTo\"\n      :transition=\"props.transitionName\"\n      :alive=\"props.popperAlive ?? !transferTo\"\n      @click.stop=\"focus\"\n      @after-leave=\"currentFilter = ''\"\n    >\n      <div\n        :class=\"[\n          nh.be('list'),\n          ($slots.prepend || $slots.append) && nh.bem('list', 'with-extra'),\n          props.listClass\n        ]\"\n      >\n        <slot v-if=\"$slots.prepend\" name=\"prepend\"></slot>\n        <VirtualList\n          ref=\"virtualList\"\n          inherit\n          :style=\"{\n            height: undefined,\n            maxHeight: `${props.maxListHeight}px`\n          }\"\n          :items=\"totalOptions\"\n          :item-size=\"32\"\n          use-y-bar\n          :height=\"'100%'\"\n          id-key=\"value\"\n          :items-attrs=\"{\n            class: [nh.be('options'), props.optionCheck ? nh.bem('options', 'has-check') : ''],\n            role: 'listbox',\n            ariaLabel: 'options'\n          }\"\n        >\n          <template #default=\"{ item: option, index }\">\n            <li\n              v-if=\"option.group\"\n              :class=\"[nh.ns('option-vars'), nh.be('group')]\"\n              :title=\"option.label\"\n            >\n              <slot name=\"group\" :option=\"option\" :index=\"index\">\n                <div\n                  :class=\"[nh.be('label'), nh.bem('label', 'group')]\"\n                  :style=\"{ paddingInlineStart: `${option.depth * 6}px` }\"\n                >\n                  {{ option.label }}\n                </div>\n              </slot>\n            </li>\n            <Option\n              v-else\n              :label=\"option.label\"\n              :value=\"option.value\"\n              :disabled=\"option.disabled || (limited && !isSelected(option))\"\n              :divided=\"option.divided\"\n              :no-title=\"option.title\"\n              :hitting=\"option.hitting\"\n              :selected=\"isSelected(option)\"\n              no-hover\n              @select=\"handleSelect(option)\"\n              @mousemove=\"updateHitting(index, false)\"\n            >\n              <slot :option=\"option\" :index=\"index\" :selected=\"isSelected(option)\">\n                <span\n                  :class=\"nh.be('label')\"\n                  :style=\"{ paddingInlineStart: `${option.depth * 6}px` }\"\n                >\n                  {{ option.label }}\n                </span>\n                <Transition v-if=\"props.optionCheck\" :name=\"nh.ns('fade')\" appear>\n                  <Icon\n                    v-if=\"isSelected(option)\"\n                    v-bind=\"icons.check\"\n                    :class=\"nh.be('check')\"\n                  ></Icon>\n                </Transition>\n              </slot>\n            </Option>\n          </template>\n          <template #empty>\n            <div :class=\"nh.be('empty')\">\n              <slot name=\"empty\">\n                {{ props.emptyText ?? locale.empty }}\n              </slot>\n            </div>\n          </template>\n        </VirtualList>\n        <slot v-if=\"$slots.append\" name=\"append\"></slot>\n      </div>\n    </Popper>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { NativeScroll } from '@/components/native-scroll'\nimport { Option } from '@/components/option'\nimport { Overflow } from '@/components/overflow'\nimport { Popper } from '@/components/popper'\nimport { Tag } from '@/components/tag'\nimport { Tooltip } from '@/components/tooltip'\nimport { VirtualList } from '@/components/virtual-list'\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  reactive,\n  ref,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport {\n  placementWhileList,\n  useClickOutside,\n  useHover,\n  useModifier,\n  useMounted,\n  usePopper\n} from '@vexip-ui/hooks'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { decide, getLast, getRangeWidth, isNull, removeArrayItem } from '@vexip-ui/utils'\nimport { selectProps } from './props'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { TooltipExposed } from '@/components/tooltip'\nimport type { VirtualListExposed } from '@/components/virtual-list'\nimport type {\n  ChangeEvent,\n  SelectBaseValue,\n  SelectEvent,\n  SelectKeyConfig,\n  SelectOptionState,\n  SelectValue\n} from './symbol'\n\nconst defaultKeyConfig: Required<SelectKeyConfig> = {\n  value: 'value',\n  label: 'label',\n  disabled: 'disabled',\n  divided: 'divided',\n  title: 'title',\n  group: 'group',\n  children: 'children'\n}\n\nfunction isSameValue(newValue: SelectValue, oldValue: SelectValue) {\n  const isNewArray = Array.isArray(newValue)\n  const isOldArray = Array.isArray(oldValue)\n\n  if (isNewArray !== isOldArray) return false\n\n  if (isNewArray && isOldArray) {\n    if (newValue.length !== oldValue.length) return false\n\n    for (let i = 0, len = newValue.length; i < len; ++i) {\n      if (newValue[i] !== oldValue[i]) return false\n    }\n\n    return true\n  }\n\n  if (isNull(newValue)) return isNull(oldValue)\n\n  return newValue === oldValue\n}\n\nexport default defineComponent({\n  name: 'Select',\n  components: {\n    Icon,\n    NativeScroll,\n    Option,\n    Overflow,\n    Popper,\n    Tag,\n    Tooltip,\n    VirtualList\n  },\n  props: selectProps,\n  emits: ['update:value', 'update:visible', 'update:label'],\n  setup(_props, { emit, slots }) {\n    const {\n      idFor,\n      state,\n      disabled,\n      loading,\n      size,\n      validateField,\n      clearField,\n      getFieldValue,\n      setFieldValue\n    } = useFieldStore<SelectValue>(focus)\n\n    const nh = useNameHelper('select')\n    const props = useProps('select', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      locale: null,\n      visible: {\n        default: false,\n        static: true\n      },\n      options: {\n        default: () => [],\n        static: true\n      },\n      disabled: () => disabled.value,\n      transitionName: () => nh.ns('drop'),\n      outsideClose: true,\n      placeholder: null,\n      prefix: createIconProp(),\n      prefixColor: '',\n      suffix: createIconProp(),\n      suffixColor: '',\n      noSuffix: false,\n      value: {\n        default: () => getFieldValue(null)!,\n        static: true\n      },\n      multiple: false,\n      clearable: false,\n      maxListHeight: 300,\n      listClass: null,\n      placement: {\n        default: 'bottom',\n        validator: value => placementWhileList.includes(value)\n      },\n      transfer: false,\n      optionCheck: false,\n      emptyText: null,\n      staticSuffix: false,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingLock: false,\n      loadingEffect: null,\n      keyConfig: () => ({}),\n      filter: false,\n      ignoreCase: false,\n      creatable: false,\n      transparent: false,\n      maxTagCount: 0,\n      noRestTip: false,\n      tagType: null,\n      noPreview: true,\n      remote: false,\n      fitPopper: false,\n      name: {\n        default: '',\n        static: true\n      },\n      popperAlive: null,\n      countLimit: 0\n    })\n\n    const locale = useLocale('select', toRef(props, 'locale'))\n    const currentVisible = ref(props.visible)\n    const currentLabels = ref<string[]>([])\n    const currentValues = ref<SelectBaseValue[]>([])\n    const currentIndex = ref(-1)\n    const placement = toRef(props, 'placement')\n    const transfer = toRef(props, 'transfer')\n    // const listHeight = ref<string>()\n    const baseOptions = ref<SelectOptionState[]>([])\n    const currentFilter = ref('')\n    const anchorWidth = ref(0)\n    const userOptions = ref<SelectOptionState[]>([])\n    const restTagCount = ref(0)\n    const restTipShow = ref(false)\n    const composing = ref(false)\n\n    const { isMounted } = useMounted()\n\n    const dynamicOption = reactive<SelectOptionState>({\n      disabled: false,\n      divided: false,\n      title: '',\n      value: '',\n      label: '',\n      group: false,\n      depth: 0,\n      parent: null,\n      hidden: false,\n      hitting: true,\n      data: ''\n    })\n\n    const optionValues = reactive(new Set<string | number>())\n    const hittingOption = ref<SelectOptionState>()\n    const optionStates = computed(() => userOptions.value.concat(baseOptions.value))\n    const visibleOptions = computed(() => optionStates.value.filter(state => !state.hidden))\n\n    const keyConfig = computed(() => ({ ...defaultKeyConfig, ...props.keyConfig }))\n\n    const wrapper = useClickOutside(handleClickOutside)\n    const input = ref<HTMLInputElement>()\n    const device = ref<HTMLElement>()\n    const virtualList = ref<VirtualListExposed>()\n    const popper = ref<PopperExposed>()\n    const restTip = ref<TooltipExposed>()\n\n    const { reference, transferTo, updatePopper } = usePopper({\n      placement,\n      transfer,\n      wrapper,\n      popper: computed(() => popper.value?.wrapper),\n      isDrop: true\n    })\n    const { isHover } = useHover(reference)\n\n    const cachedSelected = reactive(new Map<SelectBaseValue, SelectOptionState>())\n    const optionValueMap = ref(new Map<SelectBaseValue, SelectOptionState>())\n\n    let emittedValue: typeof props.value | null = props.value\n\n    const updateTrigger = ref(0)\n\n    watchEffect(() => {\n      /* eslint-disable @typescript-eslint/no-unused-expressions */\n      props.keyConfig.value\n      props.keyConfig.label\n      props.keyConfig.disabled\n      props.keyConfig.divided\n      props.keyConfig.title\n      props.keyConfig.group\n      props.keyConfig.children\n\n      // If we only read the `props.options`, when user use Array native methods to\n      // change options, Vue will not trigger the watch callback\n      for (let i = 0, len = props.options.length; i < len; ++i) {\n        props.options[i]\n      }\n      /* eslint-enable */\n\n      updateTrigger.value++\n    })\n\n    watch(updateTrigger, initOptionState, { immediate: true })\n\n    function initOptionState() {\n      const {\n        value: valueKey,\n        label: labelKey,\n        disabled: disabledKey,\n        divided: dividedKey,\n        title: titleKey,\n        group: groupKey,\n        children: childrenKey\n      } = keyConfig.value\n      const oldMap = optionValueMap.value\n      const map = new Map<string | number, SelectOptionState>()\n      const states: SelectOptionState[] = []\n      const loop = props.options\n        .map(option => ({ option, depth: 0, parent: null as SelectOptionState | null }))\n        .reverse()\n\n      optionValues.clear()\n\n      for (const option of userOptions.value) {\n        map.set(option.value, option)\n        optionValues.add(option.value)\n      }\n\n      while (loop.length) {\n        const { option, depth, parent } = loop.pop()!\n        const rawOption = typeof option === 'string' ? { [valueKey]: option } : option\n        const group = !!rawOption[groupKey]\n        const value = rawOption[valueKey]\n\n        if (!group && isNull(value)) continue\n\n        const label = rawOption[labelKey] || String(value)\n        const {\n          [disabledKey]: disabled = false,\n          [dividedKey]: divided = false,\n          [titleKey]: title = '',\n          [childrenKey]: children = null\n        } = rawOption\n        const oldState = oldMap.get(rawOption.value)\n        const optionState = reactive({\n          disabled,\n          divided,\n          title,\n          value,\n          label,\n          group,\n          depth,\n          parent,\n          hidden: oldState?.hidden ?? false,\n          hitting: oldState?.hitting ?? false,\n          data: option\n        }) as SelectOptionState\n\n        states.push(optionState)\n\n        if (!group) {\n          map.set(value, optionState)\n          optionValues.add(String(value))\n        }\n\n        if (Array.isArray(children) && children.length) {\n          loop.push(\n            ...children\n              .map(child => {\n                return { option: child, depth: depth + 1, parent: optionState }\n              })\n              .reverse()\n          )\n        }\n      }\n\n      optionValueMap.value = map\n      baseOptions.value = states\n\n      initValueAndLabel(emittedValue)\n    }\n\n    useModifier({\n      target: wrapper,\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (composing.value) {\n          event.stopPropagation()\n          return\n        }\n\n        if (!currentVisible.value) {\n          if (modifier.space || modifier.enter) {\n            event.preventDefault()\n            event.stopPropagation()\n            toggleVisible()\n          }\n\n          return\n        }\n\n        if (modifier.tab || modifier.escape) {\n          setVisible(false)\n          modifier.resetAll()\n\n          return\n        }\n\n        decide(\n          [\n            [\n              () => modifier.up || modifier.down,\n              () => {\n                const options = visibleOptions.value\n                const length = options.length\n\n                if (!length) return\n\n                const step = modifier.down ? 1 : -1\n\n                let index = (Math.max(-1, currentIndex.value + step) + length) % length\n                let option = options[index]\n\n                for (let i = 0; (option.disabled || option.group) && i < length; ++i) {\n                  index += step\n                  index = (index + length) % length\n                  option = options[index]\n                }\n\n                updateHitting(index)\n              }\n            ],\n            [\n              () => modifier.enter || (!props.filter && modifier.space),\n              () => {\n                if (currentIndex.value >= 0) {\n                  handleSelect(totalOptions.value[currentIndex.value])\n                } else if (showDynamic.value) {\n                  handleSelect(dynamicOption)\n                } else {\n                  setVisible(false)\n                }\n              }\n            ]\n          ],\n          {\n            beforeMatchAny: () => {\n              event.preventDefault()\n              event.stopPropagation()\n            },\n            afterMatchAny: modifier.resetAll\n          }\n        )\n      }\n    })\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.ns('input-vars')]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('multiple')]: props.multiple,\n        [nh.bm('filter')]: props.filter,\n        [nh.bm('responsive')]: props.multiple && props.maxTagCount <= 0,\n        [nh.bm('disabled')]: props.disabled\n      }\n    })\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const selectorClass = computed(() => {\n      const baseCls = nh.be('selector')\n\n      return {\n        [baseCls]: true,\n        [`${baseCls}--focused`]: !props.disabled && currentVisible.value,\n        [`${baseCls}--disabled`]: props.disabled,\n        [`${baseCls}--readonly`]: readonly.value,\n        [`${baseCls}--loading`]: props.loading,\n        [`${baseCls}--${props.size}`]: props.size !== 'default',\n        [`${baseCls}--${props.state}`]: props.state !== 'default',\n        [`${baseCls}--has-prefix`]: hasPrefix.value,\n        [`${baseCls}--has-suffix`]: !props.noSuffix,\n        [`${baseCls}--transparent`]: props.transparent\n      }\n    })\n    const hasValue = computed(() => !isNull(currentValues.value[0]))\n    const hasPrefix = computed(() => !!(slots.prefix || props.prefix))\n    const showDynamic = computed(() => {\n      return !!(\n        props.filter &&\n        props.creatable &&\n        dynamicOption.value &&\n        !optionValues.has(dynamicOption.value)\n      )\n    })\n    const totalOptions = computed(() => {\n      return showDynamic.value ? [dynamicOption].concat(visibleOptions.value) : visibleOptions.value\n    })\n    const normalOptions = computed(() => optionStates.value.filter(option => !option.group))\n    const optionParentMap = computed(() => {\n      const options = normalOptions.value\n      const map = new Map<string | number, SelectOptionState>()\n\n      for (let i = 0, len = options.length; i < len; ++i) {\n        const option = options[i]\n\n        if (option.parent) {\n          map.set(option.value, option.parent)\n        }\n      }\n\n      return map\n    })\n    const showClear = computed(() => {\n      return (\n        !props.disabled && !readonly.value && props.clearable && isHover.value && hasValue.value\n      )\n    })\n    const previewOption = computed(() => {\n      return !props.noPreview && currentVisible.value ? hittingOption.value : undefined\n    })\n    const limited = computed(() => {\n      return (\n        props.multiple && props.countLimit > 0 && currentValues.value.length >= props.countLimit\n      )\n    })\n    const showPlaceholder = computed(() => {\n      // 采用反推，出现下列情况时不显示：\n      // 1. 开始组合（如输入了任意拼音）\n      // 2. 有值且 未开预览/多选模式/未打开列表\n      // 3. 没有预览选项且没有合法的占位值\n      // 4. 打开列表且输入了过滤值\n      return (\n        !composing.value &&\n        !(hasValue.value && (props.noPreview || props.multiple || !currentVisible.value)) &&\n        !(!previewOption.value && !(props.placeholder ?? locale.value.placeholder)) &&\n        !(currentVisible.value && currentFilter.value)\n      )\n    })\n\n    function getOptionFromMap(value?: SelectBaseValue | null) {\n      if (isNull(value)) return null\n\n      return optionValueMap.value.get(value) ?? cachedSelected.get(value) ?? null\n    }\n\n    function fitPopperWidth() {\n      requestAnimationFrame(() => {\n        updatePopper()\n\n        if (wrapper.value && popper.value?.wrapper) {\n          if (typeof props.fitPopper === 'number') {\n            popper.value.wrapper.style.width = `${props.fitPopper}px`\n          } else if (props.fitPopper) {\n            popper.value.wrapper.style.width = `${wrapper.value.offsetWidth}px`\n          } else {\n            popper.value.wrapper.style.minWidth = `${wrapper.value.offsetWidth}px`\n          }\n        }\n      })\n    }\n\n    watch(\n      () => props.visible,\n      value => {\n        currentVisible.value = value\n      }\n    )\n    watch(currentVisible, value => {\n      if (value) {\n        restTipShow.value = false\n        initHittingIndex()\n        fitPopperWidth()\n      }\n\n      syncInputValue()\n    })\n    watch(\n      () => props.value,\n      value => {\n        if (!emittedValue || !isSameValue(value, emittedValue)) {\n          emittedValue = value\n          initValueAndLabel(value)\n          syncInputValue()\n        }\n      }\n    )\n    watch(\n      () => props.disabled,\n      value => {\n        if (value) {\n          setVisible(false)\n        }\n      }\n    )\n    watch(readonly, value => {\n      if (value) {\n        setVisible(false)\n      }\n    })\n    watch(currentFilter, value => {\n      dynamicOption.value = value\n      dynamicOption.label = value\n      dynamicOption.data = value\n\n      filterOptions(value)\n    })\n\n    onMounted(() => {\n      syncInputValue()\n\n      if (props.visible) {\n        restTipShow.value = false\n        initHittingIndex()\n        fitPopperWidth()\n      }\n    })\n\n    function initValueAndLabel(value: SelectValue | null) {\n      if (isNull(value)) {\n        currentValues.value = []\n        currentLabels.value = []\n        return\n      }\n\n      const normalizedValue = !Array.isArray(value) ? [value] : value\n\n      const valueSet = new Set(normalizedValue)\n      const selectedValues: SelectBaseValue[] = []\n      const selectedLabels: string[] = []\n\n      valueSet.forEach(value => {\n        let option = getOptionFromMap(value)\n\n        if (option) {\n          selectedValues.push(option.value)\n          selectedLabels.push(option.label)\n\n          if (!cachedSelected.has(option.value)) {\n            cachedSelected.set(option.value, option)\n          }\n        } else if (props.remote) {\n          option = reactive({\n            value,\n            disabled: false,\n            divided: false,\n            title: '',\n            label: String(value),\n            group: false,\n            depth: -1,\n            parent: null,\n            hidden: true,\n            hitting: false,\n            data: value\n          }) as SelectOptionState\n\n          cachedSelected.set(value, option)\n          selectedValues.push(value)\n          selectedLabels.push(option.label)\n        }\n      })\n\n      for (const cachedValue of Array.from(cachedSelected.keys())) {\n        if (!valueSet.has(cachedValue)) {\n          cachedSelected.delete(cachedValue)\n        }\n      }\n\n      currentValues.value = selectedValues\n      currentLabels.value = selectedLabels\n\n      initHittingIndex()\n      filterOptions(currentFilter.value)\n    }\n\n    function initHittingIndex() {\n      const value = currentValues.value[0]\n\n      if (isNull(value)) {\n        updateHitting(-1)\n      } else {\n        if (!isMounted.value) return\n\n        updateHitting(visibleOptions.value.findIndex(option => option.value === value))\n      }\n    }\n\n    function setVisible(visible: boolean) {\n      if (currentVisible.value === visible) return\n\n      currentVisible.value = visible\n\n      emit('update:visible', visible)\n      emitEvent(props.onToggle, visible)\n    }\n\n    function updateHitting(hitting: number, ensureInView = true) {\n      currentIndex.value = hitting\n      hittingOption.value = undefined\n\n      let index = -1\n\n      optionStates.value.forEach(option => {\n        if (!option.hidden) {\n          index += 1\n          option.hitting = hitting === index\n\n          if (option.hitting) {\n            hittingOption.value = option\n          }\n        } else {\n          option.hitting = false\n        }\n      })\n\n      if (ensureInView && currentVisible.value && virtualList.value) {\n        virtualList.value.ensureIndexInView(hitting)\n      }\n    }\n\n    function isSelected(option: SelectOptionState) {\n      if (props.multiple) {\n        return currentValues.value.includes(option.value)\n      }\n\n      return currentValues.value[0] === option.value\n    }\n\n    function filterOptions(inputValue: string) {\n      const filter = props.filter\n\n      if (!filter || props.remote) return\n\n      if (!inputValue) {\n        optionStates.value.forEach(state => {\n          state.hidden = false\n        })\n      } else {\n        optionStates.value.forEach(state => {\n          state.hidden = true\n        })\n\n        if (typeof filter === 'function') {\n          normalOptions.value.forEach(state => {\n            state.hidden = !filter(inputValue, state)\n          })\n        } else {\n          if (props.ignoreCase) {\n            const ignoreCaseValue = inputValue.toString().toLocaleLowerCase()\n\n            normalOptions.value.forEach(state => {\n              state.hidden = !state.label?.toString().toLocaleLowerCase().includes(ignoreCaseValue)\n            })\n          } else {\n            normalOptions.value.forEach(state => {\n              state.hidden = !state.label?.toString().includes(inputValue?.toString())\n            })\n          }\n        }\n\n        const parentMap = optionParentMap.value\n\n        normalOptions.value.forEach(option => {\n          if (!option.hidden && option.parent) {\n            let parent = parentMap.get(option.value) || null\n\n            while (parent && parent.hidden) {\n              parent.hidden = false\n              parent = parent.parent\n            }\n          }\n        })\n      }\n\n      updateHitting(currentIndex.value)\n    }\n\n    function handleTagClose(value?: SelectBaseValue | null) {\n      if (props.disabled || readonly.value) return\n\n      !isNull(value) && handleSelect(getOptionFromMap(value))\n    }\n\n    function handleRestTagClose(value?: SelectBaseValue | null) {\n      handleTagClose(value)\n\n      if (restTipShow.value) {\n        restTip.value?.updatePopper()\n      }\n    }\n\n    function handleSelect(option?: SelectOptionState | null) {\n      if (!option) return\n\n      const selected = isSelected(option)\n      const value = option.value\n\n      if (selected) {\n        if (userOptions.value.find(item => item.value === value)) {\n          removeArrayItem(userOptions.value, item => item.value === value)\n          optionValueMap.value.delete(value)\n        }\n\n        cachedSelected.delete(value)\n      } else {\n        if (!props.multiple) {\n          userOptions.value.length = 0\n        }\n\n        if (limited.value) return\n\n        if (dynamicOption.value && value === dynamicOption.value) {\n          const newOption = { ...dynamicOption }\n\n          userOptions.value.push(newOption)\n          optionValueMap.value.set(value, newOption)\n        }\n\n        cachedSelected.set(option.value, option)\n      }\n\n      emitEvent(\n        props[props.multiple && selected ? 'onCancel' : 'onSelect'] as SelectEvent,\n        value,\n        option.data\n      )\n      handleChange(option)\n\n      if (props.multiple) {\n        currentFilter.value = ''\n\n        syncInputValue()\n        requestAnimationFrame(updatePopper)\n      } else {\n        setVisible(false)\n      }\n\n      anchorWidth.value = 0\n    }\n\n    function handleChange(option: SelectOptionState) {\n      if (props.multiple) {\n        if (isSelected(option)) {\n          const index = currentValues.value.findIndex(v => v === option.value)\n\n          if (~index) {\n            currentValues.value.splice(index, 1)\n            currentLabels.value.splice(index, 1)\n          }\n        } else {\n          currentValues.value.push(option.value)\n          currentLabels.value.push(option.label)\n        }\n\n        emittedValue = Array.from(currentValues.value)\n\n        emit('update:value', emittedValue)\n        emit('update:label', currentLabels.value)\n        setFieldValue(emittedValue)\n        emitEvent(\n          props.onChange as ChangeEvent,\n          emittedValue,\n          emittedValue.map(value => getOptionFromMap(value)?.data ?? value)\n        )\n        validateField()\n      } else {\n        const prevValue = currentValues.value[0]\n\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n        currentValues.value.push(option.value)\n        currentLabels.value.push(option.label)\n\n        if (prevValue !== option.value) {\n          emittedValue = option.value\n\n          emit('update:value', emittedValue)\n          emit('update:label', currentLabels.value[0])\n          setFieldValue(emittedValue)\n          emitEvent(props.onChange as ChangeEvent, emittedValue, option.data)\n          validateField()\n        }\n      }\n    }\n\n    function toggleVisible() {\n      if (props.disabled || readonly.value) return\n\n      setVisible(!currentVisible.value)\n    }\n\n    function handleClickOutside() {\n      restTipShow.value = false\n      emitEvent(props.onClickOutside)\n\n      if (props.outsideClose && currentVisible.value) {\n        setVisible(false)\n        emitEvent(props.onOutsideClose)\n      }\n    }\n\n    function handleClear() {\n      if (props.disabled || readonly.value) return\n\n      if (props.clearable) {\n        for (const option of userOptions.value) {\n          optionValueMap.value.delete(option.value)\n        }\n\n        cachedSelected.clear()\n\n        userOptions.value.length = 0\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n        restTipShow.value = false\n\n        emittedValue = props.multiple ? [] : ''\n\n        syncInputValue()\n        emit('update:value', emittedValue)\n        emitEvent(props.onChange as ChangeEvent, emittedValue, props.multiple ? [] : '')\n        emitEvent(props.onClear)\n        clearField(emittedValue!)\n        updatePopper()\n      }\n    }\n\n    let focused = false\n\n    function handleFocus(event: FocusEvent) {\n      if (!focused) {\n        focused = true\n        emitEvent(props.onFocus, event)\n      }\n    }\n\n    function handleBlur(event: FocusEvent) {\n      if (focused) {\n        focused = false\n\n        setTimeout(() => {\n          if (!focused) {\n            emitEvent(props.onBlur, event)\n          }\n        }, 120)\n      }\n    }\n\n    function syncInputValue() {\n      if (!input.value) return\n\n      const visible = currentVisible.value\n\n      if (props.multiple) {\n        input.value.value = ''\n      } else {\n        input.value.value = visible ? '' : currentLabels.value[0] || ''\n      }\n\n      visible ? input.value.focus() : input.value.blur()\n    }\n\n    function handleFilterInput() {\n      if (!input.value || composing.value) return\n\n      let hittingIndex: number\n\n      currentFilter.value = input.value.value\n\n      if (!currentFilter.value) {\n        hittingIndex = -1\n      } else if (showDynamic.value || currentIndex.value !== -1) {\n        hittingIndex = 0\n      } else {\n        hittingIndex = visibleOptions.value.findIndex(\n          option => String(option.label) === currentFilter.value\n        )\n        hittingIndex = hittingIndex === -1 ? 0 : hittingIndex\n      }\n\n      requestAnimationFrame(() => {\n        if (!hittingIndex) {\n          hittingIndex = visibleOptions.value.findIndex(\n            option => !currentValues.value.includes(option.value)\n          )\n        }\n\n        if (hittingIndex !== currentIndex.value) {\n          updateHitting(hittingIndex)\n        }\n\n        if (props.multiple && device.value) {\n          anchorWidth.value = getRangeWidth(device.value)\n        }\n\n        updatePopper()\n      })\n\n      emitEvent(props.onFilterInput, currentFilter.value)\n    }\n\n    function handleCompositionEnd() {\n      if (!composing.value) return\n\n      composing.value = false\n\n      if (input.value) {\n        input.value.dispatchEvent(new Event('input'))\n      }\n    }\n\n    function handleFilterKeyDown(event: KeyboardEvent) {\n      if (!input.value) return\n\n      if (\n        event.key === 'Backspace' &&\n        !input.value.value &&\n        !isNull(getLast(currentValues.value))\n      ) {\n        event.stopPropagation()\n        handleTagClose(getLast(currentValues.value))\n      }\n    }\n\n    function toggleShowRestTip() {\n      if (!currentVisible.value) {\n        restTipShow.value = !restTipShow.value\n\n        if (restTipShow.value) {\n          nextTick(() => {\n            restTip.value?.updatePopper()\n          })\n        }\n      } else {\n        toggleVisible()\n        restTipShow.value = false\n      }\n    }\n\n    function focus(options?: FocusOptions) {\n      if (currentVisible.value) {\n        ;(input.value || reference.value)?.focus(options)\n      } else {\n        reference.value?.focus(options)\n      }\n    }\n\n    return {\n      props,\n      nh,\n      locale,\n      icons: useIcons(),\n      idFor,\n      currentVisible,\n      currentValues,\n      currentLabels,\n      transferTo,\n      // listHeight,\n      optionStates,\n      isHover,\n      currentFilter,\n      anchorWidth,\n      restTagCount,\n      restTipShow,\n      composing,\n\n      className,\n      selectorClass,\n      hasValue,\n      hasPrefix,\n      visibleOptions,\n      totalOptions,\n      showClear,\n      normalOptions,\n      optionParentMap,\n      previewOption,\n      limited,\n      showPlaceholder,\n\n      wrapper,\n      reference,\n      popper,\n      input,\n      device,\n      virtualList,\n      restTip,\n\n      getOptionFromMap,\n      isSelected,\n      filterOptions,\n      updateHitting,\n      handleTagClose,\n      handleRestTagClose,\n      handleSelect,\n      toggleVisible,\n      handleClear,\n      handleFocus,\n      handleBlur,\n      handleFilterInput,\n      handleCompositionEnd,\n      handleFilterKeyDown,\n      toggleShowRestTip,\n\n      focus,\n      blur: () => {\n        input.value?.blur()\n        reference.value?.blur()\n      }\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    :aria-disabled=\"props.disabled ? 'true' : undefined\"\n    @click=\"toggleVisible\"\n  >\n    <div\n      ref=\"reference\"\n      :class=\"selectorClass\"\n      tabindex=\"0\"\n      @focus=\"handleFocus\"\n      @blur=\";(!props.filter || !currentVisible) && handleBlur($event)\"\n    >\n      <div\n        v-if=\"hasPrefix\"\n        :class=\"[nh.be('icon'), nh.be('prefix')]\"\n        :style=\"{ color: props.prefixColor }\"\n      >\n        <slot name=\"prefix\">\n          <Icon :icon=\"props.prefix\"></Icon>\n        </slot>\n      </div>\n      <div :class=\"nh.be('control')\">\n        <slot name=\"control\">\n          <template v-if=\"props.multiple\">\n            <Overflow\n              inherit\n              :class=\"[nh.be('tags')]\"\n              :items=\"currentValues\"\n              :max-count=\"props.maxTagCount\"\n              :style=\"{\n                maxWidth: props.maxTagCount <= 0 && `calc(100% - ${anchorWidth}px)`\n              }\"\n              @rest-change=\"restTagCount = $event\"\n            >\n              <template #default=\"{ item: value, index }\">\n                <Tag\n                  inherit\n                  :class=\"nh.be('tag')\"\n                  :type=\"props.tagType\"\n                  closable\n                  :disabled=\"props.disabled\"\n                  @click.stop=\"toggleVisible\"\n                  @close=\"handleTagClose(value)\"\n                >\n                  <span :class=\"nh.be('label')\">\n                    <slot name=\"selected\" :option=\"getOptionFromMap(value)\">\n                      {{ currentLabels[index] }}\n                    </slot>\n                  </span>\n                </Tag>\n              </template>\n              <template #counter=\"{ count }\">\n                <Tag\n                  v-if=\"props.noRestTip\"\n                  inherit\n                  :class=\"[nh.be('tag'), nh.be('counter')]\"\n                  :type=\"props.tagType\"\n                  :disabled=\"props.disabled\"\n                  @click.stop=\"toggleVisible\"\n                >\n                  {{ `+${count}` }}\n                </Tag>\n                <span v-else>\n                  <Tooltip\n                    ref=\"restTip\"\n                    inherit\n                    :transfer=\"false\"\n                    :visible=\"restTipShow\"\n                    trigger=\"custom\"\n                    placement=\"top-end\"\n                    :tip-class=\"nh.be('rest-tip')\"\n                    @click.stop=\"toggleShowRestTip\"\n                  >\n                    <template #trigger>\n                      <Tag\n                        inherit\n                        :class=\"[nh.be('tag'), nh.be('counter')]\"\n                        :type=\"props.tagType\"\n                        :disabled=\"props.disabled\"\n                      >\n                        {{ `+${count}` }}\n                      </Tag>\n                    </template>\n                    <NativeScroll inherit use-y-bar>\n                      <template v-for=\"(value, index) in currentValues\" :key=\"index\">\n                        <Tag\n                          v-if=\"index >= currentValues.length - restTagCount\"\n                          inherit\n                          :class=\"nh.be('tag')\"\n                          closable\n                          :type=\"props.tagType\"\n                          :disabled=\"props.disabled\"\n                          @close=\"handleRestTagClose(value)\"\n                        >\n                          <span :class=\"nh.be('label')\">\n                            <slot name=\"selected\" :option=\"getOptionFromMap(value)\">\n                              {{ currentLabels[index] }}\n                            </slot>\n                          </span>\n                        </Tag>\n                      </template>\n                    </NativeScroll>\n                  </Tooltip>\n                </span>\n              </template>\n              <!-- <template v-if=\"!limited && previewOption\" #suffix>\n                <Tag\n                  inherit\n                  :class=\"[\n                    nh.be('tag'),\n                    nh.bem('tag', 'preview'),\n                    currentValues.includes(previewOption.value) && nh.bem('tag', 'deleted')\n                  ]\"\n                  :type=\"props.tagType\"\n                  closable\n                >\n                  <slot name=\"selected\" :preview=\"true\" :option=\"previewOption\">\n                    {{ previewOption.label }}\n                  </slot>\n                </Tag>\n              </template> -->\n            </Overflow>\n            <div\n              v-if=\"props.filter\"\n              :class=\"nh.be('anchor')\"\n              :style=\"{\n                width: `${anchorWidth}px`\n              }\"\n            >\n              <input\n                ref=\"input\"\n                :class=\"[\n                  nh.be('input'),\n                  nh.bem('input', 'multiple'),\n                  currentVisible && nh.bem('input', 'visible')\n                ]\"\n                :disabled=\"props.disabled\"\n                autocomplete=\"off\"\n                tabindex=\"-1\"\n                role=\"combobox\"\n                aria-autocomplete=\"list\"\n                :name=\"props.name\"\n                @submit.prevent\n                @input=\"handleFilterInput\"\n                @keydown=\"handleFilterKeyDown\"\n                @focus=\"handleFocus($event)\"\n                @blur=\"handleBlur($event)\"\n                @compositionstart=\"composing = true\"\n                @compositionend=\"handleCompositionEnd\"\n                @change=\"handleCompositionEnd\"\n              />\n              <span ref=\"device\" :class=\"nh.be('device')\" aria-hidden=\"true\">\n                {{ currentFilter }}\n              </span>\n            </div>\n          </template>\n          <template v-else>\n            <input\n              v-if=\"props.filter\"\n              ref=\"input\"\n              :class=\"[nh.be('input'), currentVisible && nh.bem('input', 'visible')]\"\n              :disabled=\"props.disabled\"\n              autocomplete=\"off\"\n              tabindex=\"-1\"\n              role=\"combobox\"\n              aria-autocomplete=\"list\"\n              :name=\"props.name\"\n              :style=\"{\n                opacity: currentVisible ? undefined : '0%'\n              }\"\n              @submit.prevent\n              @input=\"handleFilterInput\"\n              @focus=\"handleFocus($event)\"\n              @blur=\"handleBlur($event)\"\n              @compositionstart=\"composing = true\"\n              @compositionend=\"handleCompositionEnd\"\n              @change=\"handleCompositionEnd\"\n            />\n            <span\n              v-if=\"(props.noPreview || !currentVisible) && hasValue && !currentFilter\"\n              :class=\"{\n                [nh.be('selected')]: true,\n                [nh.bem('selected', 'placeholder')]: props.filter && currentVisible && hasValue\n              }\"\n            >\n              <slot\n                v-if=\"getOptionFromMap(currentValues[0])\"\n                name=\"selected\"\n                :option=\"getOptionFromMap(currentValues[0])\"\n              >\n                {{ currentLabels[0] }}\n              </slot>\n              <template v-else>\n                {{ currentLabels[0] }}\n              </template>\n            </span>\n          </template>\n          <span v-if=\"showPlaceholder\" :class=\"nh.be('placeholder')\">\n            <slot\n              v-if=\"previewOption\"\n              name=\"selected\"\n              :preview=\"true\"\n              :option=\"previewOption\"\n            >\n              {{ previewOption.label }}\n            </slot>\n            <template v-else>\n              {{ props.placeholder ?? locale.placeholder }}\n            </template>\n          </span>\n        </slot>\n      </div>\n      <div\n        v-if=\"!props.noSuffix\"\n        :class=\"[nh.be('icon'), nh.be('suffix')]\"\n        :style=\"{\n          color: props.suffixColor,\n          opacity: showClear || props.loading ? '0%' : ''\n        }\"\n      >\n        <slot name=\"suffix\">\n          <Icon\n            v-if=\"props.suffix\"\n            :icon=\"props.suffix\"\n            :class=\"{\n              [nh.be('arrow')]: !props.staticSuffix\n            }\"\n          ></Icon>\n          <Icon v-else v-bind=\"icons.angleDown\" :class=\"nh.be('arrow')\"></Icon>\n        </slot>\n      </div>\n      <div\n        v-else-if=\"props.clearable || props.loading\"\n        :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n      ></div>\n      <Transition :name=\"nh.ns('fade')\" appear>\n        <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear\">\n          <Icon v-bind=\"icons.clear\" label=\"clear\"></Icon>\n        </div>\n        <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n            label=\"loading\"\n          ></Icon>\n        </div>\n      </Transition>\n    </div>\n    <Popper\n      ref=\"popper\"\n      :class=\"[nh.be('popper'), nh.bs('vars')]\"\n      :visible=\"currentVisible\"\n      :to=\"transferTo\"\n      :transition=\"props.transitionName\"\n      :alive=\"props.popperAlive ?? !transferTo\"\n      @click.stop=\"focus\"\n      @after-leave=\"currentFilter = ''\"\n    >\n      <div\n        :class=\"[\n          nh.be('list'),\n          ($slots.prepend || $slots.append) && nh.bem('list', 'with-extra'),\n          props.listClass\n        ]\"\n      >\n        <slot v-if=\"$slots.prepend\" name=\"prepend\"></slot>\n        <VirtualList\n          ref=\"virtualList\"\n          inherit\n          :style=\"{\n            height: undefined,\n            maxHeight: `${props.maxListHeight}px`\n          }\"\n          :items=\"totalOptions\"\n          :item-size=\"32\"\n          use-y-bar\n          :height=\"'100%'\"\n          id-key=\"value\"\n          :items-attrs=\"{\n            class: [nh.be('options'), props.optionCheck ? nh.bem('options', 'has-check') : ''],\n            role: 'listbox',\n            ariaLabel: 'options'\n          }\"\n        >\n          <template #default=\"{ item: option, index }\">\n            <li\n              v-if=\"option.group\"\n              :class=\"[nh.ns('option-vars'), nh.be('group')]\"\n              :title=\"option.label\"\n            >\n              <slot name=\"group\" :option=\"option\" :index=\"index\">\n                <div\n                  :class=\"[nh.be('label'), nh.bem('label', 'group')]\"\n                  :style=\"{ paddingInlineStart: `${option.depth * 6}px` }\"\n                >\n                  {{ option.label }}\n                </div>\n              </slot>\n            </li>\n            <Option\n              v-else\n              :label=\"option.label\"\n              :value=\"option.value\"\n              :disabled=\"option.disabled || (limited && !isSelected(option))\"\n              :divided=\"option.divided\"\n              :no-title=\"option.title\"\n              :hitting=\"option.hitting\"\n              :selected=\"isSelected(option)\"\n              no-hover\n              @select=\"handleSelect(option)\"\n              @mousemove=\"updateHitting(index, false)\"\n            >\n              <slot :option=\"option\" :index=\"index\" :selected=\"isSelected(option)\">\n                <span\n                  :class=\"nh.be('label')\"\n                  :style=\"{ paddingInlineStart: `${option.depth * 6}px` }\"\n                >\n                  {{ option.label }}\n                </span>\n                <Transition v-if=\"props.optionCheck\" :name=\"nh.ns('fade')\" appear>\n                  <Icon\n                    v-if=\"isSelected(option)\"\n                    v-bind=\"icons.check\"\n                    :class=\"nh.be('check')\"\n                  ></Icon>\n                </Transition>\n              </slot>\n            </Option>\n          </template>\n          <template #empty>\n            <div :class=\"nh.be('empty')\">\n              <slot name=\"empty\">\n                {{ props.emptyText ?? locale.empty }}\n              </slot>\n            </div>\n          </template>\n        </VirtualList>\n        <slot v-if=\"$slots.append\" name=\"append\"></slot>\n      </div>\n    </Popper>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { NativeScroll } from '@/components/native-scroll'\nimport { Option } from '@/components/option'\nimport { Overflow } from '@/components/overflow'\nimport { Popper } from '@/components/popper'\nimport { Tag } from '@/components/tag'\nimport { Tooltip } from '@/components/tooltip'\nimport { VirtualList } from '@/components/virtual-list'\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  reactive,\n  ref,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport {\n  placementWhileList,\n  useClickOutside,\n  useHover,\n  useModifier,\n  useMounted,\n  usePopper\n} from '@vexip-ui/hooks'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { decide, getLast, getRangeWidth, isNull, removeArrayItem } from '@vexip-ui/utils'\nimport { selectProps } from './props'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { TooltipExposed } from '@/components/tooltip'\nimport type { VirtualListExposed } from '@/components/virtual-list'\nimport type {\n  ChangeEvent,\n  SelectBaseValue,\n  SelectEvent,\n  SelectKeyConfig,\n  SelectOptionState,\n  SelectValue\n} from './symbol'\n\nconst defaultKeyConfig: Required<SelectKeyConfig> = {\n  value: 'value',\n  label: 'label',\n  disabled: 'disabled',\n  divided: 'divided',\n  title: 'title',\n  group: 'group',\n  children: 'children'\n}\n\nfunction isSameValue(newValue: SelectValue, oldValue: SelectValue) {\n  const isNewArray = Array.isArray(newValue)\n  const isOldArray = Array.isArray(oldValue)\n\n  if (isNewArray !== isOldArray) return false\n\n  if (isNewArray && isOldArray) {\n    if (newValue.length !== oldValue.length) return false\n\n    for (let i = 0, len = newValue.length; i < len; ++i) {\n      if (newValue[i] !== oldValue[i]) return false\n    }\n\n    return true\n  }\n\n  if (isNull(newValue)) return isNull(oldValue)\n\n  return newValue === oldValue\n}\n\nexport default defineComponent({\n  name: 'Select',\n  components: {\n    Icon,\n    NativeScroll,\n    Option,\n    Overflow,\n    Popper,\n    Tag,\n    Tooltip,\n    VirtualList\n  },\n  props: selectProps,\n  emits: ['update:value', 'update:visible', 'update:label'],\n  setup(_props, { emit, slots }) {\n    const {\n      idFor,\n      state,\n      disabled,\n      loading,\n      size,\n      validateField,\n      clearField,\n      getFieldValue,\n      setFieldValue\n    } = useFieldStore<SelectValue>(focus)\n\n    const nh = useNameHelper('select')\n    const props = useProps('select', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      locale: null,\n      visible: {\n        default: false,\n        static: true\n      },\n      options: {\n        default: () => [],\n        static: true\n      },\n      disabled: () => disabled.value,\n      transitionName: () => nh.ns('drop'),\n      outsideClose: true,\n      placeholder: null,\n      prefix: createIconProp(),\n      prefixColor: '',\n      suffix: createIconProp(),\n      suffixColor: '',\n      noSuffix: false,\n      value: {\n        default: () => getFieldValue(null)!,\n        static: true\n      },\n      multiple: false,\n      clearable: false,\n      maxListHeight: 300,\n      listClass: null,\n      placement: {\n        default: 'bottom',\n        validator: value => placementWhileList.includes(value)\n      },\n      transfer: false,\n      optionCheck: false,\n      emptyText: null,\n      staticSuffix: false,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingLock: false,\n      loadingEffect: null,\n      keyConfig: () => ({}),\n      filter: false,\n      ignoreCase: false,\n      creatable: false,\n      transparent: false,\n      maxTagCount: 0,\n      noRestTip: false,\n      tagType: null,\n      noPreview: true,\n      remote: false,\n      fitPopper: false,\n      name: {\n        default: '',\n        static: true\n      },\n      popperAlive: null,\n      countLimit: 0\n    })\n\n    const locale = useLocale('select', toRef(props, 'locale'))\n    const currentVisible = ref(props.visible)\n    const currentLabels = ref<string[]>([])\n    const currentValues = ref<SelectBaseValue[]>([])\n    const currentIndex = ref(-1)\n    const placement = toRef(props, 'placement')\n    const transfer = toRef(props, 'transfer')\n    // const listHeight = ref<string>()\n    const baseOptions = ref<SelectOptionState[]>([])\n    const currentFilter = ref('')\n    const anchorWidth = ref(0)\n    const userOptions = ref<SelectOptionState[]>([])\n    const restTagCount = ref(0)\n    const restTipShow = ref(false)\n    const composing = ref(false)\n\n    const { isMounted } = useMounted()\n\n    const dynamicOption = reactive<SelectOptionState>({\n      disabled: false,\n      divided: false,\n      title: '',\n      value: '',\n      label: '',\n      group: false,\n      depth: 0,\n      parent: null,\n      hidden: false,\n      hitting: true,\n      data: ''\n    })\n\n    const optionValues = reactive(new Set<string | number>())\n    const hittingOption = ref<SelectOptionState>()\n    const optionStates = computed(() => userOptions.value.concat(baseOptions.value))\n    const visibleOptions = computed(() => optionStates.value.filter(state => !state.hidden))\n\n    const keyConfig = computed(() => ({ ...defaultKeyConfig, ...props.keyConfig }))\n\n    const wrapper = useClickOutside(handleClickOutside)\n    const input = ref<HTMLInputElement>()\n    const device = ref<HTMLElement>()\n    const virtualList = ref<VirtualListExposed>()\n    const popper = ref<PopperExposed>()\n    const restTip = ref<TooltipExposed>()\n\n    const { reference, transferTo, updatePopper } = usePopper({\n      placement,\n      transfer,\n      wrapper,\n      popper: computed(() => popper.value?.wrapper),\n      isDrop: true\n    })\n    const { isHover } = useHover(reference)\n\n    const cachedSelected = reactive(new Map<SelectBaseValue, SelectOptionState>())\n    const optionValueMap = ref(new Map<SelectBaseValue, SelectOptionState>())\n\n    let emittedValue: typeof props.value | null = props.value\n\n    const updateTrigger = ref(0)\n\n    watchEffect(() => {\n      /* eslint-disable @typescript-eslint/no-unused-expressions */\n      props.keyConfig.value\n      props.keyConfig.label\n      props.keyConfig.disabled\n      props.keyConfig.divided\n      props.keyConfig.title\n      props.keyConfig.group\n      props.keyConfig.children\n\n      // If we only read the `props.options`, when user use Array native methods to\n      // change options, Vue will not trigger the watch callback\n      for (let i = 0, len = props.options.length; i < len; ++i) {\n        props.options[i]\n      }\n      /* eslint-enable */\n\n      updateTrigger.value++\n    })\n\n    watch(updateTrigger, initOptionState, { immediate: true })\n\n    function initOptionState() {\n      const {\n        value: valueKey,\n        label: labelKey,\n        disabled: disabledKey,\n        divided: dividedKey,\n        title: titleKey,\n        group: groupKey,\n        children: childrenKey\n      } = keyConfig.value\n      const oldMap = optionValueMap.value\n      const map = new Map<string | number, SelectOptionState>()\n      const states: SelectOptionState[] = []\n      const loop = props.options\n        .map(option => ({ option, depth: 0, parent: null as SelectOptionState | null }))\n        .reverse()\n\n      optionValues.clear()\n\n      for (const option of userOptions.value) {\n        map.set(option.value, option)\n        optionValues.add(option.value)\n      }\n\n      while (loop.length) {\n        const { option, depth, parent } = loop.pop()!\n        const rawOption = typeof option === 'string' ? { [valueKey]: option } : option\n        const group = !!rawOption[groupKey]\n        const value = rawOption[valueKey]\n\n        if (!group && isNull(value)) continue\n\n        const label = rawOption[labelKey] || String(value)\n        const {\n          [disabledKey]: disabled = false,\n          [dividedKey]: divided = false,\n          [titleKey]: title = '',\n          [childrenKey]: children = null\n        } = rawOption\n        const oldState = oldMap.get(rawOption.value)\n        const optionState = reactive({\n          disabled,\n          divided,\n          title,\n          value,\n          label,\n          group,\n          depth,\n          parent,\n          hidden: oldState?.hidden ?? false,\n          hitting: oldState?.hitting ?? false,\n          data: option\n        }) as SelectOptionState\n\n        states.push(optionState)\n\n        if (!group) {\n          map.set(value, optionState)\n          optionValues.add(String(value))\n        }\n\n        if (Array.isArray(children) && children.length) {\n          loop.push(\n            ...children\n              .map(child => {\n                return { option: child, depth: depth + 1, parent: optionState }\n              })\n              .reverse()\n          )\n        }\n      }\n\n      optionValueMap.value = map\n      baseOptions.value = states\n\n      initValueAndLabel(emittedValue)\n    }\n\n    useModifier({\n      target: wrapper,\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (composing.value) {\n          event.stopPropagation()\n          return\n        }\n\n        if (!currentVisible.value) {\n          if (modifier.space || modifier.enter) {\n            event.preventDefault()\n            event.stopPropagation()\n            toggleVisible()\n          }\n\n          return\n        }\n\n        if (modifier.tab || modifier.escape) {\n          setVisible(false)\n          modifier.resetAll()\n\n          return\n        }\n\n        decide(\n          [\n            [\n              () => modifier.up || modifier.down,\n              () => {\n                const options = visibleOptions.value\n                const length = options.length\n\n                if (!length) return\n\n                const step = modifier.down ? 1 : -1\n\n                let index = (Math.max(-1, currentIndex.value + step) + length) % length\n                let option = options[index]\n\n                for (let i = 0; (option.disabled || option.group) && i < length; ++i) {\n                  index += step\n                  index = (index + length) % length\n                  option = options[index]\n                }\n\n                updateHitting(index)\n              }\n            ],\n            [\n              () => modifier.enter || (!props.filter && modifier.space),\n              () => {\n                if (currentIndex.value >= 0) {\n                  handleSelect(totalOptions.value[currentIndex.value])\n                } else if (showDynamic.value) {\n                  handleSelect(dynamicOption)\n                } else {\n                  setVisible(false)\n                }\n              }\n            ]\n          ],\n          {\n            beforeMatchAny: () => {\n              event.preventDefault()\n              event.stopPropagation()\n            },\n            afterMatchAny: modifier.resetAll\n          }\n        )\n      }\n    })\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.ns('input-vars')]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('multiple')]: props.multiple,\n        [nh.bm('filter')]: props.filter,\n        [nh.bm('responsive')]: props.multiple && props.maxTagCount <= 0,\n        [nh.bm('disabled')]: props.disabled\n      }\n    })\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const selectorClass = computed(() => {\n      const baseCls = nh.be('selector')\n\n      return {\n        [baseCls]: true,\n        [`${baseCls}--focused`]: !props.disabled && currentVisible.value,\n        [`${baseCls}--disabled`]: props.disabled,\n        [`${baseCls}--readonly`]: readonly.value,\n        [`${baseCls}--loading`]: props.loading,\n        [`${baseCls}--${props.size}`]: props.size !== 'default',\n        [`${baseCls}--${props.state}`]: props.state !== 'default',\n        [`${baseCls}--has-prefix`]: hasPrefix.value,\n        [`${baseCls}--has-suffix`]: !props.noSuffix,\n        [`${baseCls}--transparent`]: props.transparent\n      }\n    })\n    const hasValue = computed(() => !isNull(currentValues.value[0]))\n    const hasPrefix = computed(() => !!(slots.prefix || props.prefix))\n    const showDynamic = computed(() => {\n      return !!(\n        props.filter &&\n        props.creatable &&\n        dynamicOption.value &&\n        !optionValues.has(dynamicOption.value)\n      )\n    })\n    const totalOptions = computed(() => {\n      return showDynamic.value ? [dynamicOption].concat(visibleOptions.value) : visibleOptions.value\n    })\n    const normalOptions = computed(() => optionStates.value.filter(option => !option.group))\n    const optionParentMap = computed(() => {\n      const options = normalOptions.value\n      const map = new Map<string | number, SelectOptionState>()\n\n      for (let i = 0, len = options.length; i < len; ++i) {\n        const option = options[i]\n\n        if (option.parent) {\n          map.set(option.value, option.parent)\n        }\n      }\n\n      return map\n    })\n    const showClear = computed(() => {\n      return (\n        !props.disabled && !readonly.value && props.clearable && isHover.value && hasValue.value\n      )\n    })\n    const previewOption = computed(() => {\n      return !props.noPreview && currentVisible.value ? hittingOption.value : undefined\n    })\n    const limited = computed(() => {\n      return (\n        props.multiple && props.countLimit > 0 && currentValues.value.length >= props.countLimit\n      )\n    })\n    const showPlaceholder = computed(() => {\n      // 采用反推，出现下列情况时不显示：\n      // 1. 开始组合（如输入了任意拼音）\n      // 2. 有值且 未开预览/多选模式/未打开列表\n      // 3. 没有预览选项且没有合法的占位值\n      // 4. 打开列表且输入了过滤值\n      return (\n        !composing.value &&\n        !(hasValue.value && (props.noPreview || props.multiple || !currentVisible.value)) &&\n        !(!previewOption.value && !(props.placeholder ?? locale.value.placeholder)) &&\n        !(currentVisible.value && currentFilter.value)\n      )\n    })\n\n    function getOptionFromMap(value?: SelectBaseValue | null) {\n      if (isNull(value)) return null\n\n      return optionValueMap.value.get(value) ?? cachedSelected.get(value) ?? null\n    }\n\n    function fitPopperWidth() {\n      requestAnimationFrame(() => {\n        updatePopper()\n\n        if (wrapper.value && popper.value?.wrapper) {\n          if (typeof props.fitPopper === 'number') {\n            popper.value.wrapper.style.width = `${props.fitPopper}px`\n          } else if (props.fitPopper) {\n            popper.value.wrapper.style.width = `${wrapper.value.offsetWidth}px`\n          } else {\n            popper.value.wrapper.style.minWidth = `${wrapper.value.offsetWidth}px`\n          }\n        }\n      })\n    }\n\n    watch(\n      () => props.visible,\n      value => {\n        currentVisible.value = value\n      }\n    )\n    watch(currentVisible, value => {\n      if (value) {\n        restTipShow.value = false\n        initHittingIndex()\n        fitPopperWidth()\n      }\n\n      syncInputValue()\n    })\n    watch(\n      () => props.value,\n      value => {\n        if (!emittedValue || !isSameValue(value, emittedValue)) {\n          emittedValue = value\n          initValueAndLabel(value)\n          syncInputValue()\n        }\n      }\n    )\n    watch(\n      () => props.disabled,\n      value => {\n        if (value) {\n          setVisible(false)\n        }\n      }\n    )\n    watch(readonly, value => {\n      if (value) {\n        setVisible(false)\n      }\n    })\n    watch(currentFilter, value => {\n      dynamicOption.value = value\n      dynamicOption.label = value\n      dynamicOption.data = value\n\n      filterOptions(value)\n    })\n\n    onMounted(() => {\n      syncInputValue()\n\n      if (props.visible) {\n        restTipShow.value = false\n        initHittingIndex()\n        fitPopperWidth()\n      }\n    })\n\n    function initValueAndLabel(value: SelectValue | null) {\n      if (isNull(value)) {\n        currentValues.value = []\n        currentLabels.value = []\n        return\n      }\n\n      const normalizedValue = !Array.isArray(value) ? [value] : value\n\n      const valueSet = new Set(normalizedValue)\n      const selectedValues: SelectBaseValue[] = []\n      const selectedLabels: string[] = []\n\n      valueSet.forEach(value => {\n        let option = getOptionFromMap(value)\n\n        if (option) {\n          selectedValues.push(option.value)\n          selectedLabels.push(option.label)\n\n          if (!cachedSelected.has(option.value)) {\n            cachedSelected.set(option.value, option)\n          }\n        } else if (props.remote) {\n          option = reactive({\n            value,\n            disabled: false,\n            divided: false,\n            title: '',\n            label: String(value),\n            group: false,\n            depth: -1,\n            parent: null,\n            hidden: true,\n            hitting: false,\n            data: value\n          }) as SelectOptionState\n\n          cachedSelected.set(value, option)\n          selectedValues.push(value)\n          selectedLabels.push(option.label)\n        }\n      })\n\n      for (const cachedValue of Array.from(cachedSelected.keys())) {\n        if (!valueSet.has(cachedValue)) {\n          cachedSelected.delete(cachedValue)\n        }\n      }\n\n      currentValues.value = selectedValues\n      currentLabels.value = selectedLabels\n\n      initHittingIndex()\n      filterOptions(currentFilter.value)\n    }\n\n    function initHittingIndex() {\n      const value = currentValues.value[0]\n\n      if (isNull(value)) {\n        updateHitting(-1)\n      } else {\n        if (!isMounted.value) return\n\n        updateHitting(visibleOptions.value.findIndex(option => option.value === value))\n      }\n    }\n\n    function setVisible(visible: boolean) {\n      if (currentVisible.value === visible) return\n\n      currentVisible.value = visible\n\n      emit('update:visible', visible)\n      emitEvent(props.onToggle, visible)\n    }\n\n    function updateHitting(hitting: number, ensureInView = true) {\n      currentIndex.value = hitting\n      hittingOption.value = undefined\n\n      let index = -1\n\n      optionStates.value.forEach(option => {\n        if (!option.hidden) {\n          index += 1\n          option.hitting = hitting === index\n\n          if (option.hitting) {\n            hittingOption.value = option\n          }\n        } else {\n          option.hitting = false\n        }\n      })\n\n      if (ensureInView && currentVisible.value && virtualList.value) {\n        virtualList.value.ensureIndexInView(hitting)\n      }\n    }\n\n    function isSelected(option: SelectOptionState) {\n      if (props.multiple) {\n        return currentValues.value.includes(option.value)\n      }\n\n      return currentValues.value[0] === option.value\n    }\n\n    function filterOptions(inputValue: string) {\n      const filter = props.filter\n\n      if (!filter || props.remote) return\n\n      if (!inputValue) {\n        optionStates.value.forEach(state => {\n          state.hidden = false\n        })\n      } else {\n        optionStates.value.forEach(state => {\n          state.hidden = true\n        })\n\n        if (typeof filter === 'function') {\n          normalOptions.value.forEach(state => {\n            state.hidden = !filter(inputValue, state)\n          })\n        } else {\n          if (props.ignoreCase) {\n            const ignoreCaseValue = inputValue.toString().toLocaleLowerCase()\n\n            normalOptions.value.forEach(state => {\n              state.hidden = !state.label?.toString().toLocaleLowerCase().includes(ignoreCaseValue)\n            })\n          } else {\n            normalOptions.value.forEach(state => {\n              state.hidden = !state.label?.toString().includes(inputValue?.toString())\n            })\n          }\n        }\n\n        const parentMap = optionParentMap.value\n\n        normalOptions.value.forEach(option => {\n          if (!option.hidden && option.parent) {\n            let parent = parentMap.get(option.value) || null\n\n            while (parent && parent.hidden) {\n              parent.hidden = false\n              parent = parent.parent\n            }\n          }\n        })\n      }\n\n      updateHitting(currentIndex.value)\n    }\n\n    function handleTagClose(value?: SelectBaseValue | null) {\n      if (props.disabled || readonly.value) return\n\n      !isNull(value) && handleSelect(getOptionFromMap(value))\n    }\n\n    function handleRestTagClose(value?: SelectBaseValue | null) {\n      handleTagClose(value)\n\n      if (restTipShow.value) {\n        restTip.value?.updatePopper()\n      }\n    }\n\n    function handleSelect(option?: SelectOptionState | null) {\n      if (!option) return\n\n      const selected = isSelected(option)\n      const value = option.value\n\n      if (selected) {\n        if (userOptions.value.find(item => item.value === value)) {\n          removeArrayItem(userOptions.value, item => item.value === value)\n          optionValueMap.value.delete(value)\n        }\n\n        cachedSelected.delete(value)\n      } else {\n        if (!props.multiple) {\n          userOptions.value.length = 0\n        }\n\n        if (limited.value) return\n\n        if (dynamicOption.value && value === dynamicOption.value) {\n          const newOption = { ...dynamicOption }\n\n          userOptions.value.push(newOption)\n          optionValueMap.value.set(value, newOption)\n        }\n\n        cachedSelected.set(option.value, option)\n      }\n\n      emitEvent(\n        props[props.multiple && selected ? 'onCancel' : 'onSelect'] as SelectEvent,\n        value,\n        option.data\n      )\n      handleChange(option)\n\n      if (props.multiple) {\n        currentFilter.value = ''\n\n        syncInputValue()\n        requestAnimationFrame(updatePopper)\n      } else {\n        setVisible(false)\n      }\n\n      anchorWidth.value = 0\n    }\n\n    function handleChange(option: SelectOptionState) {\n      if (props.multiple) {\n        if (isSelected(option)) {\n          const index = currentValues.value.findIndex(v => v === option.value)\n\n          if (~index) {\n            currentValues.value.splice(index, 1)\n            currentLabels.value.splice(index, 1)\n          }\n        } else {\n          currentValues.value.push(option.value)\n          currentLabels.value.push(option.label)\n        }\n\n        emittedValue = Array.from(currentValues.value)\n\n        emit('update:value', emittedValue)\n        emit('update:label', currentLabels.value)\n        setFieldValue(emittedValue)\n        emitEvent(\n          props.onChange as ChangeEvent,\n          emittedValue,\n          emittedValue.map(value => getOptionFromMap(value)?.data ?? value)\n        )\n        validateField()\n      } else {\n        const prevValue = currentValues.value[0]\n\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n        currentValues.value.push(option.value)\n        currentLabels.value.push(option.label)\n\n        if (prevValue !== option.value) {\n          emittedValue = option.value\n\n          emit('update:value', emittedValue)\n          emit('update:label', currentLabels.value[0])\n          setFieldValue(emittedValue)\n          emitEvent(props.onChange as ChangeEvent, emittedValue, option.data)\n          validateField()\n        }\n      }\n    }\n\n    function toggleVisible() {\n      if (props.disabled || readonly.value) return\n\n      setVisible(!currentVisible.value)\n    }\n\n    function handleClickOutside() {\n      restTipShow.value = false\n      emitEvent(props.onClickOutside)\n\n      if (props.outsideClose && currentVisible.value) {\n        setVisible(false)\n        emitEvent(props.onOutsideClose)\n      }\n    }\n\n    function handleClear() {\n      if (props.disabled || readonly.value) return\n\n      if (props.clearable) {\n        for (const option of userOptions.value) {\n          optionValueMap.value.delete(option.value)\n        }\n\n        cachedSelected.clear()\n\n        userOptions.value.length = 0\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n        restTipShow.value = false\n\n        emittedValue = props.multiple ? [] : ''\n\n        syncInputValue()\n        emit('update:value', emittedValue)\n        emitEvent(props.onChange as ChangeEvent, emittedValue, props.multiple ? [] : '')\n        emitEvent(props.onClear)\n        clearField(emittedValue!)\n        updatePopper()\n      }\n    }\n\n    let focused = false\n\n    function handleFocus(event: FocusEvent) {\n      if (!focused) {\n        focused = true\n        emitEvent(props.onFocus, event)\n      }\n    }\n\n    function handleBlur(event: FocusEvent) {\n      if (focused) {\n        focused = false\n\n        setTimeout(() => {\n          if (!focused) {\n            emitEvent(props.onBlur, event)\n          }\n        }, 120)\n      }\n    }\n\n    function syncInputValue() {\n      if (!input.value) return\n\n      const visible = currentVisible.value\n\n      if (props.multiple) {\n        input.value.value = ''\n      } else {\n        input.value.value = visible ? '' : currentLabels.value[0] || ''\n      }\n\n      visible ? input.value.focus() : input.value.blur()\n    }\n\n    function handleFilterInput() {\n      if (!input.value || composing.value) return\n\n      let hittingIndex: number\n\n      currentFilter.value = input.value.value\n\n      if (!currentFilter.value) {\n        hittingIndex = -1\n      } else if (showDynamic.value || currentIndex.value !== -1) {\n        hittingIndex = 0\n      } else {\n        hittingIndex = visibleOptions.value.findIndex(\n          option => String(option.label) === currentFilter.value\n        )\n        hittingIndex = hittingIndex === -1 ? 0 : hittingIndex\n      }\n\n      requestAnimationFrame(() => {\n        if (!hittingIndex) {\n          hittingIndex = visibleOptions.value.findIndex(\n            option => !currentValues.value.includes(option.value)\n          )\n        }\n\n        if (hittingIndex !== currentIndex.value) {\n          updateHitting(hittingIndex)\n        }\n\n        if (props.multiple && device.value) {\n          anchorWidth.value = getRangeWidth(device.value)\n        }\n\n        updatePopper()\n      })\n\n      emitEvent(props.onFilterInput, currentFilter.value)\n    }\n\n    function handleCompositionEnd() {\n      if (!composing.value) return\n\n      composing.value = false\n\n      if (input.value) {\n        input.value.dispatchEvent(new Event('input'))\n      }\n    }\n\n    function handleFilterKeyDown(event: KeyboardEvent) {\n      if (!input.value) return\n\n      if (\n        event.key === 'Backspace' &&\n        !input.value.value &&\n        !isNull(getLast(currentValues.value))\n      ) {\n        event.stopPropagation()\n        handleTagClose(getLast(currentValues.value))\n      }\n    }\n\n    function toggleShowRestTip() {\n      if (!currentVisible.value) {\n        restTipShow.value = !restTipShow.value\n\n        if (restTipShow.value) {\n          nextTick(() => {\n            restTip.value?.updatePopper()\n          })\n        }\n      } else {\n        toggleVisible()\n        restTipShow.value = false\n      }\n    }\n\n    function focus(options?: FocusOptions) {\n      if (currentVisible.value) {\n        ;(input.value || reference.value)?.focus(options)\n      } else {\n        reference.value?.focus(options)\n      }\n    }\n\n    return {\n      props,\n      nh,\n      locale,\n      icons: useIcons(),\n      idFor,\n      currentVisible,\n      currentValues,\n      currentLabels,\n      transferTo,\n      // listHeight,\n      optionStates,\n      isHover,\n      currentFilter,\n      anchorWidth,\n      restTagCount,\n      restTipShow,\n      composing,\n\n      className,\n      selectorClass,\n      hasValue,\n      hasPrefix,\n      visibleOptions,\n      totalOptions,\n      showClear,\n      normalOptions,\n      optionParentMap,\n      previewOption,\n      limited,\n      showPlaceholder,\n\n      wrapper,\n      reference,\n      popper,\n      input,\n      device,\n      virtualList,\n      restTip,\n\n      getOptionFromMap,\n      isSelected,\n      filterOptions,\n      updateHitting,\n      handleTagClose,\n      handleRestTagClose,\n      handleSelect,\n      toggleVisible,\n      handleClear,\n      handleFocus,\n      handleBlur,\n      handleFilterInput,\n      handleCompositionEnd,\n      handleFilterKeyDown,\n      toggleShowRestTip,\n\n      focus,\n      blur: () => {\n        input.value?.blur()\n        reference.value?.blur()\n      }\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps, EventListener } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type {\n  AutoCompleteFilter,\n  AutoCompleteKeyConfig,\n  AutoCompleteRawOption,\n  ChangeEvent,\n  EnterEvent\n} from './symbol'\n\nexport const autoCompleteProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('input'),\n  transfer: booleanStringProp,\n  value: [String, Number],\n  options: Array as PropType<AutoCompleteRawOption[]>,\n  filter: {\n    type: [Boolean, Function] as PropType<boolean | AutoCompleteFilter>,\n    default: null\n  },\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  placeholder: String,\n  disabled: booleanProp,\n  transitionName: String,\n  dropDisabled: booleanProp,\n  placement: String as PropType<Placement>,\n  clearable: booleanProp,\n  ignoreCase: booleanProp,\n  autofocus: booleanProp,\n  spellcheck: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  transparent: booleanProp,\n  debounce: booleanProp,\n  delay: Number,\n  keyConfig: Object as PropType<Omit<AutoCompleteKeyConfig, 'label'>>,\n  showEmpty: booleanProp,\n  name: String,\n  popperAlive: booleanProp,\n  onFocus: eventProp<(event: FocusEvent) => void>(),\n  onBlur: eventProp<(event: FocusEvent) => void>(),\n  onSelect: eventProp<EventListener<ChangeEvent>>(),\n  onInput: eventProp<(value: string) => void>(),\n  onChange: eventProp<EventListener<ChangeEvent>>(),\n  onToggle: eventProp<(visible: boolean) => void>(),\n  onEnter: eventProp<EventListener<EnterEvent>>(),\n  onClear: eventProp()\n})\n\nexport type AutoCompleteProps = ExtractPropTypes<typeof autoCompleteProps>\nexport type AutoCompleteCProps = ConfigurableProps<ExtractPropTypes<typeof autoCompleteProps>>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Select } from '@/components/select'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, nextTick, onMounted, ref, toRef, watch, watchEffect } from 'vue'\n\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { placementWhileList, useSetTimeout } from '@vexip-ui/hooks'\nimport { debounce, isNull, throttle, toNumber } from '@vexip-ui/utils'\nimport { autoCompleteProps } from './props'\n\nimport type {\n  AutoCompleteOptionState,\n  AutoCompleteRawOption,\n  ChangeEvent,\n  EnterEvent\n} from './symbol'\n\ndefineOptions({ name: 'AutoComplete' })\n\nconst select = ref<InstanceType<typeof Select>>()\nconst control = ref<HTMLInputElement>()\n\nconst {\n  idFor,\n  state,\n  disabled,\n  loading,\n  size,\n  validateField,\n  clearField,\n  getFieldValue,\n  setFieldValue\n} = useFieldStore<string | number>(() => control.value?.focus())\n\nconst nh = useNameHelper('auto-complete')\n\nconst _props = defineProps(autoCompleteProps)\nconst props = useProps('autoComplete', _props, {\n  size: createSizeProp(size),\n  state: createStateProp(state),\n  locale: null,\n  transfer: false,\n  value: {\n    default: () => getFieldValue(''),\n    static: true\n  },\n  options: {\n    default: () => [],\n    static: true\n  },\n  filter: false,\n  prefix: createIconProp(),\n  prefixColor: '',\n  suffix: createIconProp(),\n  suffixColor: '',\n  placeholder: null,\n  disabled: () => disabled.value,\n  transitionName: () => nh.ns('drop'),\n  dropDisabled: false,\n  placement: {\n    default: 'bottom',\n    validator: value => placementWhileList.includes(value)\n  },\n  clearable: false,\n  ignoreCase: false,\n  autofocus: false,\n  spellcheck: false,\n  keyConfig: () => ({}),\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  transparent: false,\n  debounce: false,\n  delay: null,\n  showEmpty: false,\n  name: {\n    default: '',\n    static: true\n  },\n  popperAlive: null\n})\n\nconst emit = defineEmits(['update:value'])\n\nconst slots = defineSlots<{\n  prefix: () => any,\n  control: (params: {\n    value: string | number,\n    onInput: (event: string | Event) => void,\n    onChange: (valid?: boolean) => void,\n    onEnter: (event: KeyboardEvent) => void,\n    onClear: () => void\n  }) => any,\n  suffix: () => any,\n  default: (params: { option: AutoCompleteOptionState, index: number, selected: boolean }) => any,\n  group: (params: { option: AutoCompleteOptionState, index: number }) => any,\n  prepend: () => any,\n  append: () => any\n}>()\n\nconst locale = useLocale('input', toRef(props, 'locale'))\n\nconst { timer } = useSetTimeout()\n\nconst currentValue = ref(props.value)\nconst currentIndex = ref(-1)\nconst currentVisible = ref(false)\nconst composing = ref(false)\n\nlet changed = false\nlet lastValue = props.value\nlet lastInput = String(lastValue)\n\nconst isReadonly = computed(() => props.loading && props.loadingLock)\nconst optionStates = computed(() => select.value?.optionStates || [])\nconst filteredOptions = computed(() => select.value?.visibleOptions || [])\nconst hasPrefix = computed(() => !!(slots.prefix || props.prefix))\nconst hasSuffix = computed(() => !!(slots.suffix || props.suffix))\n\nwatch(\n  () => props.value,\n  value => {\n    currentValue.value = value\n    lastValue = value\n    lastInput = String(value)\n\n    if (control.value) {\n      control.value.value = String(value)\n    }\n  }\n)\nwatch(currentIndex, computeHitting)\nwatch(currentVisible, value => {\n  if (!value) {\n    currentIndex.value = -1\n  } else {\n    control.value?.focus()\n  }\n})\nwatch(currentValue, value => {\n  if (props.filter && select.value) {\n    select.value.currentFilter = `${value}`\n  }\n})\nwatchEffect(() => {\n  if (!props.filter || !currentVisible.value || !select.value) return\n\n  select.value.currentFilter = String(currentValue.value)\n})\n\ndefineExpose({\n  idFor,\n  composing,\n  select,\n  control,\n  focus: (options?: FocusOptions) => control.value?.focus(options),\n  blur: () => control.value?.blur()\n})\n\nonMounted(() => {\n  nextTick(() => {\n    if (control.value && !isNull(currentValue.value)) {\n      control.value.value = String(currentValue.value)\n    }\n  })\n})\n\nfunction computeHitting() {\n  const hitting = currentIndex.value\n  let index = -1\n\n  optionStates.value.forEach(state => {\n    if (!state.hidden) {\n      index += 1\n      state.hitting = hitting === index\n\n      if (state.hitting) {\n        if (control.value) {\n          control.value.value = String(state.value)\n        }\n      }\n    } else {\n      state.hitting = false\n    }\n  })\n\n  if (control.value && hitting < 0) {\n    control.value.value = lastInput\n  }\n}\n\nlet focused = false\n\nfunction handleFocus(event: FocusEvent) {\n  if (!focused) {\n    focused = true\n    emitEvent(props.onFocus, event)\n  }\n}\n\nfunction handleBlur(event: FocusEvent) {\n  if (focused) {\n    focused = false\n\n    timer.focus = setTimeout(() => {\n      if (!focused) {\n        emitEvent(props.onBlur, event)\n        handleChange()\n      }\n    }, 120)\n  }\n}\n\nfunction handleSelect(value: string | number, data: AutoCompleteRawOption) {\n  if (composing.value || isNull(value)) {\n    return\n  }\n\n  const prevValue = currentValue.value\n  currentValue.value = value\n\n  emitEvent(props.onSelect as ChangeEvent, value, data)\n\n  if (value !== prevValue) {\n    changed = true\n    handleChange()\n  } else {\n    currentVisible.value = false\n  }\n}\n\nfunction handleInputInternal(event: string | Event) {\n  const value = typeof event === 'string' ? event : (event.target as HTMLInputElement).value\n\n  currentValue.value = value\n  changed = true\n  lastInput = value\n\n  if (currentIndex.value !== -1) {\n    currentIndex.value = 0\n  }\n\n  if (props.showEmpty) {\n    currentVisible.value = !props.dropDisabled\n\n    if (select.value) {\n      select.value.currentVisible = currentVisible.value\n    }\n  }\n\n  emitEvent(props.onInput, value)\n  nextTick(testOptionCanDrop)\n}\n\nconst delay = toNumber(props.delay)\nconst handleInput = props.debounce\n  ? debounce(handleInputInternal, delay || 100)\n  : throttle(handleInputInternal, delay || 16)\n\nfunction handleChange(valid = true) {\n  if (!changed || currentValue.value === lastValue) return\n\n  changed = false\n  lastValue = currentValue.value\n  lastInput = String(lastValue)\n\n  const option = optionStates.value.find(option => option.value === lastValue)\n\n  if (select.value) {\n    select.value.currentValues.length = 0\n    ;(currentValue.value || currentValue.value === 0) &&\n      select.value.currentValues.push(currentValue.value)\n  }\n\n  emit('update:value', currentValue.value)\n  setFieldValue(currentValue.value)\n  emitEvent(props.onChange as ChangeEvent, currentValue.value, option?.data || null!)\n  valid && validateField()\n\n  currentVisible.value = false\n\n  if (control.value) {\n    control.value.value = String(lastValue)\n  }\n}\n\nlet beforeVisible = false\nlet inClickProcess = false\n\nfunction beforeClick() {\n  if (props.disabled || isReadonly.value) return\n\n  beforeVisible = currentVisible.value\n  inClickProcess = true\n\n  if (select.value) {\n    select.value.currentFilter = String(currentValue.value)\n  }\n}\n\nfunction handleClick() {\n  if (props.disabled || isReadonly.value) return\n\n  inClickProcess = false\n\n  if (!select.value) return\n\n  currentVisible.value = true\n\n  if (!beforeVisible) {\n    testOptionCanDrop()\n    beforeVisible = currentVisible.value\n    beforeVisible && emitEvent(props.onToggle, beforeVisible)\n  } else {\n    select.value.currentVisible = true\n  }\n}\n\nfunction handleToggle(visible: boolean) {\n  if (props.disabled || isReadonly.value || inClickProcess) return\n\n  currentVisible.value = visible\n\n  visible && testOptionCanDrop()\n  beforeVisible = currentVisible.value\n\n  if (currentVisible.value !== visible) {\n    emitEvent(props.onToggle, currentVisible.value)\n  }\n\n  if (!currentVisible.value) {\n    currentIndex.value = -1\n  }\n}\n\nfunction testOptionCanDrop() {\n  currentVisible.value = !(\n    props.dropDisabled ||\n    (!props.showEmpty && !filteredOptions.value.length)\n  )\n\n  if (select.value) {\n    select.value.currentVisible = currentVisible.value\n  }\n}\n\nfunction handleKeyDown(event: KeyboardEvent) {\n  if (composing.value) {\n    event.stopPropagation()\n    return\n  }\n\n  const key = event.code || event.key\n\n  if (key === 'Enter' || key === 'NumpadEnter') {\n    handleEnter(event)\n  } else if (key === 'ArrowDown' || key === 'ArrowUp') {\n    event.preventDefault()\n    event.stopPropagation()\n\n    const options = filteredOptions.value\n    const length = options.length\n\n    if (!length) return\n\n    const step = key === 'ArrowDown' ? 1 : -1\n\n    // 初始状态时 currentIndex 为 -1，往上时会得到 -2 导致行为不按预期，需限制\n    let index = (Math.max(currentIndex.value + step, -1) + length) % length\n    let option = options[index]\n\n    for (let i = 0; (option.disabled || option.group) && i < length; ++i) {\n      index += step\n      index = (index + length) % length\n      option = options[index]\n    }\n\n    currentIndex.value = index\n  } else {\n    if (['Space', ' '].includes(key)) {\n      event.stopPropagation()\n    }\n\n    if (!['Enter', 'ArrowLeft', 'ArrowRight'].includes(key)) {\n      // 进行了其他按键则重置\n      currentIndex.value = -1\n    }\n  }\n}\n\nfunction handleEnter(event: KeyboardEvent) {\n  event.stopPropagation()\n\n  if (composing.value) return\n\n  if (currentIndex.value >= 0 && filteredOptions.value.length) {\n    const option = filteredOptions.value[currentIndex.value === -1 ? 0 : currentIndex.value]\n\n    handleSelect(option.value, option.data)\n  } else {\n    handleChange()\n  }\n\n  emitEvent(props.onEnter as EnterEvent, currentValue.value)\n  currentVisible.value = false\n}\n\nfunction handleClear() {\n  if (props.clearable) {\n    const prevValue = currentValue.value\n\n    currentValue.value = ''\n    currentVisible.value = false\n\n    if (!isNull(prevValue) && prevValue !== currentValue.value) {\n      changed = true\n    }\n\n    handleChange(false)\n    emitEvent(props.onClear)\n    nextTick(clearField)\n    control.value?.focus()\n  }\n}\n\nfunction handleCompositionEnd() {\n  if (composing.value) {\n    composing.value = false\n\n    if (control.value) {\n      control.value.dispatchEvent(new Event('input'))\n    }\n  }\n}\n</script>\n\n<template>\n  <Select\n    :id=\"idFor\"\n    ref=\"select\"\n    v-model:visible=\"currentVisible\"\n    :class=\"[nh.b(), props.inherit && nh.bm('inherit')]\"\n    :inherit=\"props.inherit\"\n    :list-class=\"nh.be('list')\"\n    :value=\"currentValue\"\n    :size=\"props.size\"\n    :state=\"props.state\"\n    :clearable=\"props.clearable\"\n    :transition-name=\"props.transitionName\"\n    :disabled=\"props.disabled\"\n    :transfer=\"props.transfer\"\n    :placement=\"props.placement\"\n    :prefix-color=\"props.prefixColor\"\n    :suffix-color=\"props.suffixColor\"\n    :no-suffix=\"!hasSuffix\"\n    :placeholder=\"props.placeholder\"\n    :options=\"props.options\"\n    :key-config=\"props.keyConfig\"\n    :loading=\"props.loading\"\n    :loading-icon=\"props.loadingIcon\"\n    :loading-lock=\"props.loadingLock\"\n    :loading-effect=\"props.loadingEffect\"\n    :transparent=\"transparent\"\n    :filter=\"props.filter\"\n    :ignore-case=\"props.ignoreCase\"\n    :popper-alive=\"props.popperAlive\"\n    @toggle=\"handleToggle\"\n    @select=\"handleSelect\"\n    @clear=\"handleClear\"\n    @focus=\"control?.focus()\"\n    @outside-close=\"handleChange\"\n    @click=\"handleClick\"\n    @click.capture=\"beforeClick\"\n  >\n    <template v-if=\"hasPrefix\" #prefix>\n      <slot name=\"prefix\">\n        <Icon :icon=\"props.prefix\"></Icon>\n      </slot>\n    </template>\n    <template #control>\n      <slot\n        name=\"control\"\n        :value=\"currentValue\"\n        :on-input=\"handleInput\"\n        :on-change=\"handleChange\"\n        :on-enter=\"handleEnter\"\n        :on-clear=\"handleClear\"\n      >\n        <input\n          ref=\"control\"\n          :class=\"nh.be('input')\"\n          :autofocus=\"props.autofocus\"\n          :spellcheck=\"props.spellcheck\"\n          :disabled=\"props.disabled\"\n          :placeholder=\"props.placeholder ?? locale.placeholder\"\n          :readonly=\"isReadonly\"\n          :name=\"props.name\"\n          autocomplete=\"off\"\n          tabindex=\"-1\"\n          role=\"combobox\"\n          aria-autocomplete=\"list\"\n          @submit.prevent\n          @input=\"handleInput\"\n          @keydown=\"handleKeyDown\"\n          @focus=\"handleFocus($event)\"\n          @blur=\"handleBlur($event)\"\n          @compositionstart=\"composing = true\"\n          @compositionend=\"handleCompositionEnd\"\n          @change=\"handleCompositionEnd\"\n        />\n      </slot>\n    </template>\n    <template v-if=\"hasSuffix\" #suffix>\n      <slot name=\"suffix\">\n        <Icon :icon=\"props.suffix\"></Icon>\n      </slot>\n    </template>\n    <template v-if=\"$slots.default\" #default=\"{ option, index, selected }\">\n      <slot :option=\"option\" :index=\"index\" :selected=\"selected\"></slot>\n    </template>\n    <template v-if=\"$slots.group\" #group=\"{ option, index }\">\n      <slot name=\"group\" :option=\"option\" :index=\"index\"></slot>\n    </template>\n    <template v-if=\"$slots.prepend\" #prepend>\n      <slot name=\"prepend\"></slot>\n    </template>\n    <template v-if=\"$slots.append\" #append>\n      <slot name=\"append\"></slot>\n    </template>\n  </Select>\n</template>\n", "import { booleanProp, buildProps, eventProp, iconProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ComponentSize, ConfigurableProps } from '@vexip-ui/config'\nimport type { AvatarObjectFit, AvatarOption } from './symbol'\n\nexport const avatarProps = buildProps({\n  size: [Number, String] as PropType<number | ComponentSize>,\n  src: String,\n  icon: iconProp,\n  circle: booleanProp,\n  alt: String,\n  fit: String as PropType<AvatarObjectFit>,\n  srcSet: String,\n  gap: Number,\n  iconScale: Number,\n  fallbackSrc: String,\n  color: String,\n  background: String,\n  onError: eventProp<(event: Event) => void>(),\n  onClick: eventProp<(event: MouseEvent) => void>()\n})\n\nexport type AvatarProps = ExtractPropTypes<typeof avatarProps>\nexport type AvatarCProps = ConfigurableProps<ExtractPropTypes<typeof avatarProps>, 'src'>\n\nexport const avatarGroupProps = buildProps({\n  size: [Number, String] as PropType<number | ComponentSize>,\n  options: Object as PropType<AvatarOption[]>,\n  circle: booleanProp,\n  max: Number,\n  showTip: booleanProp,\n  tipTrigger: String as PropType<'hover' | 'click'>,\n  vertical: booleanProp,\n  offset: Number,\n  restColor: String,\n  restBackground: String\n})\n\nexport type AvatarGroupProps = ExtractPropTypes<typeof avatarGroupProps>\nexport type AvatarGroupCProps = ConfigurableProps<ExtractPropTypes<typeof avatarGroupProps>>\n", "import type { InjectionKey } from 'vue'\nimport type { ComponentSize } from '@vexip-ui/config'\n\nexport type AvatarObjectFit = 'fill' | 'contain' | 'cover' | 'none' | 'scale-down'\nexport type AvatarOption = ({ src: string } | { icon: Record<string, any> } | { text: string }) &\nRecord<string, any>\n\nexport interface AvatarGroupState {\n  size: number | ComponentSize\n}\n\nexport const GROUP_STATE: InjectionKey<AvatarGroupState> = Symbol('GROUP_STATE')\n\nexport const objectFitValues = Object.freeze<AvatarObjectFit[]>([\n  'fill',\n  'contain',\n  'cover',\n  'none',\n  'scale-down'\n])\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport { computed, inject, ref, watch } from 'vue'\n\nimport { createIconProp, emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { avatarProps } from './props'\nimport { GROUP_STATE, objectFitValues } from './symbol'\n\nimport type { ComponentSize, StyleType } from '@vexip-ui/config'\n\ndefineOptions({ name: 'Avatar' })\n\nconst _props = defineProps(avatarProps)\nconst props = useProps('avatar', _props, {\n  size: 'default',\n  src: {\n    default: '',\n    static: true\n  },\n  icon: createIconProp(),\n  circle: false,\n  alt: '',\n  fit: {\n    default: 'cover',\n    validator: value => objectFitValues.includes(value)\n  },\n  srcSet: '',\n  gap: 4,\n  iconScale: 1.4,\n  fallbackSrc: '',\n  color: null,\n  background: null\n})\n\ndefineSlots<{\n  default: () => any,\n  icon: () => any\n}>()\n\nconst groupState = inject(GROUP_STATE, null)\n\nconst nh = useNameHelper('avatar')\n\nconst loadFail = ref(false)\nconst fallbackFail = ref(false)\n\nconst wrapper = ref<HTMLElement>()\nconst text = ref<HTMLElement>()\n\nconst size = computed(() => {\n  return groupState?.size ?? props.size\n})\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm(size.value as ComponentSize)]:\n      typeof size.value !== 'number' && size.value !== 'default',\n    [nh.bm('circle')]: props.circle\n  }\n})\nconst style = computed(() => {\n  const style: StyleType = {\n    [nh.cv('color')]: props.color,\n    [nh.cv('bg-color')]: props.background,\n    [nh.cv('image-fit')]: props.fit\n  }\n\n  if (typeof size.value === 'number') {\n    style[nh.cv('size')] = `${size.value}px`\n  }\n\n  return style\n})\n\nwatch(\n  () => props.src,\n  () => {\n    loadFail.value = false\n    fallbackFail.value = false\n    scaleText()\n  }\n)\nwatch(\n  () => props.fallbackSrc,\n  () => {\n    fallbackFail.value = false\n    scaleText()\n  }\n)\nwatch(() => props.gap, scaleText)\n\ndefineExpose({ loadFail, fallbackFail })\n\nfunction handleError(event: Event) {\n  loadFail.value = true\n  emitEvent(props.onError, event)\n}\n\nlet lastText: string | null = null\n\nfunction scaleText() {\n  const avatarEl = wrapper.value\n  const textEl = text.value\n\n  if (avatarEl && textEl && (lastText === null || lastText !== textEl.textContent)) {\n    lastText = textEl.textContent\n\n    const { offsetWidth: avatarWidth, offsetHeight: avatarHeight } = avatarEl\n    const { offsetWidth: textWidth, offsetHeight: textHeight } = textEl\n    const padding = props.gap * 2\n\n    const ratio = Math.min(\n      (avatarWidth - padding) / (textWidth || 1),\n      (avatarHeight - padding) / (textHeight || 1),\n      1\n    )\n\n    textEl.style.transform = `scale(${ratio})`\n  }\n}\n\nfunction handleClick(event: MouseEvent) {\n  emitEvent(props.onClick, event)\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    :style=\"style\"\n    @click=\"handleClick\"\n  >\n    <img\n      v-if=\"(props.src || props.srcSet) && !loadFail\"\n      :class=\"nh.be('image')\"\n      :src=\"props.src\"\n      :alt=\"props.alt\"\n      :srcset=\"props.srcSet\"\n      @error=\"handleError\"\n    />\n    <img\n      v-else-if=\"loadFail && props.fallbackSrc && !fallbackFail\"\n      :class=\"nh.be('image')\"\n      :src=\"props.fallbackSrc\"\n      :alt=\"props.alt\"\n      @error=\"fallbackFail = true\"\n    />\n    <template v-else-if=\"icon || $slots.icon\">\n      <slot name=\"icon\">\n        <Icon :class=\"nh.be('icon')\" :icon=\"icon\" :scale=\"props.iconScale\"></Icon>\n      </slot>\n    </template>\n    <ResizeObserver v-else :on-resize=\"scaleText\">\n      <span ref=\"text\" :class=\"nh.be('text')\">\n        <slot></slot>\n      </span>\n    </ResizeObserver>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Avatar } from '@/components/avatar'\nimport { Tooltip } from '@/components/tooltip'\n\nimport { computed, provide, ref, watchEffect } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { avatarGroupProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nimport type { ComponentSize } from '@vexip-ui/config'\nimport type { AvatarOption } from './symbol'\n\ndefineOptions({ name: 'AvatarGroup' })\n\nconst _props = defineProps(avatarGroupProps)\nconst props = useProps('avatarGroup', _props, {\n  size: 'default',\n  options: {\n    default: () => [],\n    static: true\n  },\n  circle: false,\n  max: null,\n  showTip: false,\n  tipTrigger: 'hover',\n  vertical: false,\n  offset: null,\n  restColor: null,\n  restBackground: null\n})\n\ndefineSlots<{\n  default: (params: { option: AvatarOption, index: number }) => any,\n  rest: (params: { options: AvatarOption[], count: number }) => any,\n  tip: (params: { options: AvatarOption[], count: number }) => any\n}>()\n\nconst nh = useNameHelper('avatar-group')\n\nconst renderAvatars = ref<AvatarOption[]>([])\nconst restAvatars = ref<AvatarOption[]>([])\n\nwatchEffect(() => {\n  const size = props.options.length\n\n  if (props.max > 0 && size > props.max) {\n    renderAvatars.value = props.options.slice(0, props.max - 1)\n    restAvatars.value = props.options.slice(props.max - 1)\n  } else {\n    renderAvatars.value = Array.from(props.options)\n    restAvatars.value = []\n  }\n})\n\nprovide(GROUP_STATE, props)\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.ns('avatar-vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm(props.size as ComponentSize)]:\n      typeof props.size !== 'number' && props.size !== 'default',\n    [nh.bm('circle')]: props.circle,\n    [nh.bm('vertical')]: props.vertical\n  }\n})\nconst style = computed(() => {\n  const style: Record<string, string> = {}\n\n  if (typeof props.offset === 'number') {\n    style[nh.cv('offset')] = `${props.offset}px`\n  }\n\n  return style\n})\n</script>\n\n<template>\n  <div :class=\"className\" role=\"group\" :style=\"style\">\n    <div v-for=\"(option, index) in renderAvatars\" :key=\"index\" :class=\"nh.be('item')\">\n      <slot :option=\"option\" :index=\"index\">\n        <Avatar\n          inherit\n          :src=\"option.src\"\n          :icon=\"option.icon\"\n          :alt=\"option.alt\"\n          :fit=\"option.fit\"\n          :src-set=\"option.srcSet\"\n          :gap=\"option.gap\"\n          :icon-scale=\"option.iconScale\"\n          :fallback-src=\"option.fallbackSrc\"\n        >\n          {{ option.text }}\n        </Avatar>\n      </slot>\n    </div>\n    <div v-if=\"restAvatars.length\" :class=\"[nh.be('item'), nh.bem('item', 'rest')]\">\n      <Tooltip\n        v-if=\"props.showTip\"\n        inherit\n        :trigger=\"props.tipTrigger\"\n        :tip-class=\"nh.be('rest')\"\n      >\n        <template #trigger>\n          <slot name=\"rest\" :options=\"restAvatars\" :count=\"restAvatars.length\">\n            <Avatar inherit :color=\"props.restColor\" :background=\"props.restBackground\">\n              {{ `+${restAvatars.length}` }}\n            </Avatar>\n          </slot>\n        </template>\n        <slot name=\"tip\" :options=\"restAvatars\" :count=\"restAvatars.length\">\n          <Avatar\n            v-for=\"(option, index) in restAvatars\"\n            :key=\"index\"\n            inherit\n            :src=\"option.src\"\n            :icon=\"option.icon\"\n            :alt=\"option.alt\"\n            :fit=\"option.fit\"\n            :src-set=\"option.srcSet\"\n            :gap=\"option.gap\"\n            :icon-scale=\"option.iconScale\"\n            :fallback-src=\"option.fallbackSrc\"\n          >\n            {{ option.text }}\n          </Avatar>\n        </slot>\n      </Tooltip>\n      <slot\n        v-else\n        name=\"rest\"\n        :options=\"restAvatars\"\n        :count=\"restAvatars.length\"\n      >\n        <Avatar inherit :color=\"props.restColor\" :background=\"props.restBackground\">\n          {{ `+${restAvatars.length}` }}\n        </Avatar>\n      </slot>\n    </div>\n  </div>\n</template>\n", "import { booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { BadgeType } from './symbol'\n\nexport const badgeProps = buildProps({\n  content: [Number, String],\n  max: Number,\n  disabled: booleanProp,\n  isDot: booleanProp,\n  type: String as PropType<BadgeType>,\n  color: String,\n  onBadgeClick: eventProp<(event: MouseEvent) => void>()\n})\n\nexport type BadgeProps = ExtractPropTypes<typeof badgeProps>\nexport type BadgeCProps = ConfigurableProps<BadgeProps, 'content'>\n", "export type BadgeType = 'error' | 'primary' | 'success' | 'warning' | 'info' | 'disabled'\n\nexport const badgeTypes = Object.freeze<BadgeType[]>([\n  'error',\n  'primary',\n  'success',\n  'warning',\n  'info',\n  'disabled'\n])\n", "<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { badgeProps } from './props'\nimport { badgeTypes } from './symbol'\n\ndefineOptions({ name: 'Badge' })\n\nconst _props = defineProps(badgeProps)\nconst props = useProps('badge', _props, {\n  content: {\n    default: null,\n    static: true\n  },\n  max: 0,\n  disabled: false,\n  isDot: false,\n  type: {\n    default: 'error',\n    validator: value => badgeTypes.includes(value)\n  },\n  color: null\n})\n\nconst slots = defineSlots<{\n  default: () => any,\n  content: (params: { content: number | string }) => any\n}>()\n\nconst nh = useNameHelper('badge')\n\nconst hasSlot = computed(() => {\n  return !!slots.default\n})\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('not-wrapper')]: !hasSlot.value,\n    [nh.bm('is-dot')]: props.isDot\n  }\n})\nconst renderContent = computed(() => {\n  if (props.isDot) return ''\n\n  if (typeof props.content === 'number' && props.max > 0) {\n    return props.content > props.max ? `${props.max}+` : props.content\n  }\n\n  return props.content\n})\nconst transitionName = computed(() => {\n  return hasSlot.value ? nh.bs('badge-zoom') : nh.bs('zoom')\n})\nconst title = computed(() => {\n  return props.content || props.content === 0 ? props.content.toString() : undefined\n})\nconst showSub = computed(() => {\n  return !props.disabled && (props.content || props.content === 0 || props.isDot)\n})\n\nfunction handleBadgeClick(event: MouseEvent) {\n  emitEvent(props.onBadgeClick, event)\n}\n</script>\n\n<template>\n  <div :class=\"className\">\n    <slot></slot>\n    <Transition :name=\"transitionName\">\n      <sup\n        v-show=\"showSub\"\n        :class=\"{\n          [nh.be('content')]: true,\n          [nh.bem('content', 'fixed')]: hasSlot,\n          [nh.bem('content', props.type)]: props.type !== 'error'\n        }\"\n        :style=\"{ backgroundColor: props.color }\"\n        :title=\"title\"\n        @click=\"handleBadgeClick\"\n      >\n        <slot name=\"content\" :content=\"renderContent\">\n          {{ renderContent }}\n        </slot>\n      </sup>\n    </Transition>\n  </div>\n</template>\n", "import { wrapProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\n\nexport const rendererProps = wrapProps({\n  renderer: {\n    type: Function,\n    default: null\n  },\n  data: {\n    type: Object as PropType<Record<string, any>>,\n    default: undefined\n  }\n})\n\nexport type RendererProps = ExtractPropTypes<typeof rendererProps>\n", "import { defineComponent, renderSlot } from 'vue'\n\nimport { rendererProps } from './props'\n\nexport default defineComponent({\n  name: 'Renderer',\n  props: rendererProps,\n  setup(props, { slots }) {\n    return () => {\n      if (typeof props.renderer !== 'function') {\n        return renderSlot(slots, 'default', props.data)\n      }\n\n      return props.renderer(props.data)\n    }\n  }\n})\n", "import { booleanProp, buildProps, eventProp, wrapProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { Router } from 'vue-router'\nimport type { ConfigurableProps, EventListener } from '@vexip-ui/config'\nimport type { BreadcrumbOptions, SelectEvent } from './symbol'\n\nexport const breadcrumbProps = buildProps({\n  separator: String,\n  border: booleanProp,\n  options: Array as PropType<(string | BreadcrumbOptions)[]>,\n  router: Object as PropType<Router>,\n  onSelect: eventProp<EventListener<SelectEvent>>(),\n  onSeparatorClick: eventProp<EventListener<SelectEvent>>()\n})\n\nexport type BreadcrumbProps = ExtractPropTypes<typeof breadcrumbProps>\nexport type BreadcrumbCProps = ConfigurableProps<BreadcrumbProps>\n\nexport const breadcrumbItemProps = wrapProps({\n  label: {\n    type: [String, Number],\n    default: null\n  },\n  onSelect: eventProp<EventListener<SelectEvent>>(),\n  onSeparatorClick: eventProp<EventListener<SelectEvent>>()\n})\n\nexport type BreadcrumbItemProps = ExtractPropTypes<typeof breadcrumbItemProps>\n", "import type { InjectionKey } from 'vue'\n\nexport interface BreadcrumbOptions {\n  label: string,\n  name?: string | (() => string)\n}\n\nexport type SeparatorRenderFn = (data: { label: string | number }) => any\n\nexport interface BreadcrumbItemState {\n  label: string | number\n}\n\nexport interface BreadcrumbState {\n  separator: string,\n  separatorRenderer: null | SeparatorRenderFn,\n  increaseItem: (item: BreadcrumbItemState) => void,\n  decreaseItem: (item: BreadcrumbItemState) => void,\n  handleSelect: (label: string | number) => void,\n  refreshLabels: () => void,\n  handleSeparatorClick: (label: string | number) => void\n}\n\nexport type SelectEvent = (label: string | number) => void\n\nexport const BREADCRUMB_STATE: InjectionKey<BreadcrumbState> = Symbol('BREADCRUMB_STATE')\n", "<script setup lang=\"ts\">\nimport { Renderer } from '@/components/renderer'\n\nimport { inject, onBeforeUnmount, reactive, ref, watch } from 'vue'\n\nimport { emitEvent, useNameHelper } from '@vexip-ui/config'\nimport { isFunction } from '@vexip-ui/utils'\nimport { breadcrumbItemProps } from './props'\nimport { BREADCRUMB_STATE } from './symbol'\n\nimport type { BreadcrumbItemState, SelectEvent, SeparatorRenderFn } from './symbol'\n\ndefineOptions({ name: 'BreadcrumbItem' })\n\nconst props = defineProps(breadcrumbItemProps)\n\ndefineSlots<{\n  default: () => any,\n  separator: () => any\n}>()\n\nconst nh = useNameHelper('breadcrumb')\n\nconst breadcrumbState = inject(BREADCRUMB_STATE, null)\n\nconst currentLabel = ref(props.label)\nconst separator = ref('/')\nconst separatorRenderer = ref<SeparatorRenderFn | null>(null)\n\nwatch(\n  () => props.label,\n  value => {\n    currentLabel.value = value\n    breadcrumbState?.refreshLabels()\n  }\n)\n\nif (breadcrumbState) {\n  const state: BreadcrumbItemState = reactive({\n    label: currentLabel\n  })\n\n  watch(\n    () => breadcrumbState.separator,\n    value => {\n      separator.value = value\n    },\n    { immediate: true }\n  )\n  watch(\n    () => breadcrumbState.separatorRenderer,\n    value => {\n      separatorRenderer.value = value\n    },\n    { immediate: true }\n  )\n\n  breadcrumbState.increaseItem(state)\n\n  onBeforeUnmount(() => {\n    breadcrumbState.decreaseItem(state)\n  })\n}\n\nfunction handleClick() {\n  emitEvent(props.onSelect! as SelectEvent, currentLabel.value)\n  breadcrumbState?.handleSelect(currentLabel.value)\n}\n\nfunction handleSeparatorClick() {\n  emitEvent(props.onSeparatorClick! as SelectEvent, currentLabel.value)\n  breadcrumbState?.handleSeparatorClick(currentLabel.value)\n}\n</script>\n\n<template>\n  <li :class=\"nh.be('item')\">\n    <a\n      :class=\"nh.be('label')\"\n      tabindex=\"0\"\n      @click=\"handleClick\"\n      @keydown.enter=\"handleClick\"\n    >\n      <slot>{{ label }}</slot>\n    </a>\n    <span :class=\"nh.be('separator')\" role=\"separator\" @click=\"handleSeparatorClick\">\n      <slot name=\"separator\">\n        <Renderer\n          v-if=\"isFunction(separatorRenderer)\"\n          :renderer=\"separatorRenderer\"\n          :data=\"{ label: currentLabel }\"\n        ></Renderer>\n        <template v-else>\n          {{ separator }}\n        </template>\n      </slot>\n    </span>\n  </li>\n</template>\n", "<script setup lang=\"ts\">\nimport { BreadcrumbItem } from '@/components/breadcrumb-item'\n\nimport { computed, provide, reactive, toRef, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { callIfFunc, debounceMinor, isNull } from '@vexip-ui/utils'\nimport { breadcrumbProps } from './props'\nimport { BREADCRUMB_STATE } from './symbol'\n\nimport type { BreadcrumbItemState, BreadcrumbOptions, BreadcrumbState, SelectEvent } from './symbol'\n\ndefineOptions({ name: 'Breadcrumb' })\n\nconst _props = defineProps(breadcrumbProps)\nconst props = useProps('breadcrumb', _props, {\n  separator: '/',\n  border: false,\n  options: {\n    default: () => [],\n    static: true\n  },\n  router: null\n})\n\nconst slots = defineSlots<{\n  default: () => any,\n  item: (params: { option: BreadcrumbOptions, index: number }) => any,\n  separator: (params: { label: string | number }) => any\n}>()\n\nconst nh = useNameHelper('breadcrumb')\nconst itemStates = new Set<BreadcrumbItemState>()\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('border')]: props.border\n  }\n})\nconst normalizedOptions = computed(() => {\n  if (props.router && !props.options?.length) {\n    const matched = props.router.currentRoute.value.matched\n    const options: BreadcrumbOptions[] = []\n\n    for (const route of matched) {\n      const meta = (route.meta || {}) as any\n\n      if (meta.menu === false) {\n        continue\n      }\n\n      options.push({\n        label: meta.label || route.path,\n        name: meta.name || route.name\n      })\n    }\n\n    return options\n  }\n\n  return props.options.map(option => {\n    if (typeof option === 'string') {\n      return { label: option }\n    }\n\n    return option\n  })\n})\n\nconst refreshLabels = debounceMinor(() => {\n  Array.from(itemStates).forEach((item, index) => {\n    if (isNull(item.label)) {\n      item.label = index + 1\n    }\n  })\n})\n\nconst state: BreadcrumbState = reactive({\n  separator: toRef(props, 'separator'),\n  separatorRenderer: null,\n  increaseItem,\n  decreaseItem,\n  handleSelect,\n  refreshLabels,\n  handleSeparatorClick\n})\n\nprovide(BREADCRUMB_STATE, state)\n\nwatch(\n  () => slots.separator,\n  value => {\n    state.separatorRenderer = value ? data => value(data) : null\n  },\n  { immediate: true }\n)\n\nfunction increaseItem(item: BreadcrumbItemState) {\n  itemStates.add(item)\n  refreshLabels()\n}\n\nfunction decreaseItem(item: BreadcrumbItemState) {\n  itemStates.delete(item)\n  refreshLabels()\n}\n\nfunction handleSelect(label: string | number) {\n  emitEvent(props.onSelect as SelectEvent, label)\n}\n\nfunction handleSeparatorClick(label: string | number) {\n  emitEvent(props.onSeparatorClick as SelectEvent, label)\n}\n</script>\n\n<template>\n  <ol :class=\"className\">\n    <slot>\n      <BreadcrumbItem\n        v-for=\"(option, index) in normalizedOptions\"\n        :key=\"option.label\"\n        :label=\"option.label\"\n      >\n        <slot name=\"item\" :option=\"option\" :index=\"index\">\n          {{ option.name ? callIfFunc(option.name) : option.label }}\n        </slot>\n      </BreadcrumbItem>\n    </slot>\n  </ol>\n</template>\n", "import { booleanStringProp, buildProps, classProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { BubbleType } from './symbol'\n\nexport const bubbleProps = buildProps({\n  placement: String as PropType<Placement>,\n  type: String as PropType<BubbleType>,\n  background: String,\n  shadow: booleanStringProp,\n  contentClass: classProp\n})\n\nexport type BubbleProps = ExtractPropTypes<typeof bubbleProps>\nexport type BubbleCProps = ConfigurableProps<BubbleProps>\n", "export type BubbleType = 'default' | 'primary' | 'info' | 'success' | 'warning' | 'error'\n\nexport const bubbleTypes = Object.freeze<BubbleType[]>([\n  'default',\n  'primary',\n  'info',\n  'success',\n  'warning',\n  'error'\n])\n", "<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\n\nimport { placementWhileList } from '@vexip-ui/hooks'\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { bubbleProps } from './props'\nimport { bubbleTypes } from './symbol'\n\ndefineOptions({ name: 'Bubble' })\n\nconst _props = defineProps(bubbleProps)\nconst props = useProps('bubble', _props, {\n  placement: {\n    default: 'right',\n    validator: value => placementWhileList.includes(value)\n  },\n  type: {\n    default: null,\n    validator: value => bubbleTypes.includes(value)\n  },\n  background: '',\n  shadow: false,\n  contentClass: null\n})\n\nconst nh = useNameHelper('bubble')\n\nconst wrapper = ref<HTMLElement>()\nconst arrow = ref<HTMLElement>()\n\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.bm(props.placement),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('background')]: props.background,\n      [nh.bm('shadow')]: props.shadow,\n      [nh.bm(props.type)]: props.type !== 'default'\n    }\n  ]\n})\nconst style = computed(() => {\n  if (props.background) {\n    return {\n      [nh.cv('color')]: nh.gnv('color-white'),\n      [nh.cv('bg-color')]: props.background\n    }\n  }\n\n  return undefined\n})\n\ndefineExpose({ wrapper, arrow })\n</script>\n\n<template>\n  <div ref=\"wrapper\" :class=\"className\" :style=\"style\">\n    <div\n      :class=\"[nh.be('content'), props.contentClass]\"\n      :style=\"{\n        boxShadow: props.shadow ? `0 0 4px ${props.shadow}` : undefined\n      }\"\n    >\n      <slot></slot>\n    </div>\n    <div ref=\"arrow\" :class=\"nh.be('arrow')\"></div>\n  </div>\n</template>\n", "import { booleanProp, buildProps, eventProp, iconProp, sizeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ButtonAttrType, ButtonType } from './symbol'\n\nexport const buttonProps = buildProps({\n  size: sizeProp,\n  type: String as PropType<ButtonType>,\n  dashed: booleanProp,\n  text: booleanProp,\n  simple: booleanProp,\n  ghost: booleanProp,\n  disabled: booleanProp,\n  loading: booleanProp,\n  circle: booleanProp,\n  loadingIcon: iconProp,\n  loadingEffect: String as PropType<IconEffect>,\n  icon: iconProp,\n  color: String,\n  buttonType: String as PropType<ButtonAttrType>,\n  block: booleanProp,\n  tag: String,\n  noPulse: booleanProp,\n  badge: [String, Number],\n  onClick: eventProp<(event: MouseEvent) => void>()\n})\n\nexport type ButtonProps = ExtractPropTypes<typeof buttonProps>\nexport type ButtonCProps = ConfigurableProps<ButtonProps>\n\nexport const buttonGroupProps = buildProps({\n  size: sizeProp,\n  type: String as PropType<ButtonType>,\n  circle: booleanProp\n})\n\nexport type ButtonGroupProps = ExtractPropTypes<typeof buttonGroupProps>\nexport type ButtonGroupCProps = ConfigurableProps<ButtonGroupProps>\n", "import type { InjectionKey } from 'vue'\nimport type { ComponentSize } from '@vexip-ui/config'\n\nexport type ButtonType = 'default' | 'primary' | 'info' | 'success' | 'warning' | 'error'\nexport type ButtonAttrType = 'button' | 'submit' | 'reset'\n\nexport interface ButtonState {\n  index: number,\n  isLast: boolean\n}\n\nexport interface ButtonGroupState {\n  type: ButtonType,\n  size: ComponentSize,\n  increaseItem: (item: ButtonState) => void,\n  decreaseItem: (item: ButtonState) => void,\n  refreshIndexes: () => void\n}\n\nexport const GROUP_STATE: InjectionKey<ButtonGroupState> = Symbol('GROUP_STATE')\n\nexport const buttonTypes = Object.freeze<ButtonType[]>([\n  'default',\n  'primary',\n  'info',\n  'success',\n  'warning',\n  'error'\n])\n", "import { Badge } from '@/components/badge'\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Icon } from '@/components/icon'\nimport { FIELD_OPTIONS } from '@/components/form/symbol'\n\nimport { computed, defineComponent, inject, onBeforeUnmount, reactive, ref } from 'vue'\n\nimport {\n  createIconProp,\n  createSizeProp,\n  emitEvent,\n  useIcons,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { adjustAlpha, isClient, mixColor, parseColorToRgba } from '@vexip-ui/utils'\nimport { buttonProps } from './props'\nimport { GROUP_STATE, buttonTypes } from './symbol'\n\nexport default defineComponent({\n  name: 'Button',\n  props: buttonProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const fieldActions = inject(FIELD_OPTIONS, null)\n\n    const props = useProps('button', _props, {\n      size: createSizeProp(fieldActions ? fieldActions.size : undefined),\n      type: {\n        default: null,\n        validator: value => buttonTypes.includes(value)\n      },\n      dashed: false,\n      text: false,\n      simple: false,\n      ghost: false,\n      disabled: () => (fieldActions ? fieldActions.disabled.value : false),\n      loading: () => (fieldActions ? fieldActions.loading.value : false),\n      circle: false,\n      loadingIcon: createIconProp(),\n      loadingEffect: null,\n      icon: createIconProp(),\n      color: null,\n      buttonType: {\n        default: 'button',\n        validator: value => ['button', 'submit', 'reset'].includes(value)\n      },\n      block: false,\n      tag: 'button',\n      noPulse: false,\n      badge: null\n    })\n\n    const groupState = inject(GROUP_STATE, null)\n\n    const nh = useNameHelper('button')\n    const icons = useIcons()\n    const pulsing = ref(false)\n    const index = ref(0)\n    const isLast = ref(false)\n\n    const isIconOnly = computed(() => {\n      return !slots.default\n    })\n    const type = computed(() => {\n      return props.type ?? groupState?.type ?? 'default'\n    })\n    const size = computed(() => {\n      return groupState?.size ?? props.size\n    })\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(type.value)]: type.value !== 'default',\n        [nh.bm('simple')]: !props.ghost && props.simple,\n        [nh.bm('ghost')]: props.ghost,\n        [nh.bm('text')]: props.text,\n        [nh.bm('dashed')]: props.dashed,\n        [nh.bm('disabled')]: props.disabled,\n        [nh.bm('loading')]: props.loading,\n        [nh.bm('circle')]: props.circle,\n        [nh.bm('icon-only')]: isIconOnly.value,\n        [nh.bm(size.value)]: size.value !== 'default',\n        [nh.bm('pulsing')]: pulsing.value,\n        [nh.bm('first')]: index.value === 1,\n        [nh.bm('last')]: isLast.value,\n        [nh.bm('block')]: props.block\n      }\n    })\n    const colorMap = computed(() => {\n      if (!props.color) return null\n\n      const rootStyle = isClient ? getComputedStyle(document.documentElement) : null\n      const black = parseColorToRgba(rootStyle?.getPropertyValue(nh.nv('color-black')) || '#000')\n      const white = parseColorToRgba(rootStyle?.getPropertyValue(nh.nv('color-white')) || '#fff')\n      const baseColor = parseColorToRgba(props.color)\n\n      return {\n        base: baseColor.toString(),\n        light2: mixColor(white, baseColor, 0.2).toString(),\n        dark1: mixColor(black, baseColor, 0.1).toString(),\n        opacity1: adjustAlpha(baseColor, 0.9).toString(),\n        opacity3: adjustAlpha(baseColor, 0.7).toString(),\n        opacity4: adjustAlpha(baseColor, 0.6).toString(),\n        opacity7: adjustAlpha(baseColor, 0.3).toString(),\n        opacity8: adjustAlpha(baseColor, 0.2).toString(),\n        white8: adjustAlpha(white, 0.2).toString(),\n        white9: adjustAlpha(white, 0.1).toString()\n      }\n    })\n    const style = computed<Record<string, string>>(() => {\n      if (!colorMap.value) return {}\n\n      const {\n        base,\n        light2,\n        dark1,\n        opacity1,\n        opacity3,\n        opacity4,\n        opacity7,\n        opacity8,\n        white8,\n        white9\n      } = colorMap.value\n      const { cvm, gnv } = nh\n\n      if (props.ghost) {\n        return cvm({\n          color: base,\n          'color-hover': base,\n          'color-focus': base,\n          'color-active': base,\n          'color-disabled': base,\n          'bg-color': 'transparent',\n          'bg-color-hover': white9,\n          'bg-color-focus': white9,\n          'bg-color-active': white8,\n          'bg-color-disabled': 'transparent',\n          'b-color': base,\n          'b-color-hover': light2,\n          'b-color-focus': light2,\n          'b-color-active': dark1,\n          'b-color-disabled': gnv('content-color-disabled'),\n          'pulse-s-color': dark1\n        })\n      }\n\n      if (props.simple) {\n        return cvm({\n          color: base,\n          'color-hover': base,\n          'color-focus': gnv('color-white'),\n          'color-active': gnv('color-white'),\n          'color-disabled': gnv('content-color-disabled'),\n          'bg-color': opacity8,\n          'bg-color-hover': opacity7,\n          'bg-color-focus': opacity1,\n          'bg-color-active': opacity1,\n          'bg-color-disabled': gnv('fill-color-background'),\n          'b-color': opacity4,\n          'b-color-hover': opacity4,\n          'b-color-focus': opacity3,\n          'b-color-active': opacity3,\n          'b-color-disabled': gnv('border-color-light-1'),\n          'pulse-s-color': dark1\n        })\n      }\n\n      if (props.text || props.dashed) {\n        return cvm({\n          ...(props.dashed\n            ? {\n                'b-color': base,\n                'b-color-hover': light2,\n                'b-color-focus': light2,\n                'b-color-active': dark1,\n                'pulse-s-color': dark1\n              }\n            : {}),\n          color: base,\n          'color-hover': light2,\n          'color-focus': light2,\n          'color-active': dark1,\n          'color-disabled': opacity4\n        })\n      }\n\n      return cvm({\n        color: gnv('color-white'),\n        'color-hover': gnv('color-white'),\n        'color-focus': gnv('color-white'),\n        'color-active': gnv('color-white'),\n        'color-disabled': gnv('content-color-disabled'),\n        'bg-color': base,\n        'bg-color-hover': light2,\n        'bg-color-focus': light2,\n        'bg-color-active': dark1,\n        'bg-color-disabled': gnv('fill-color-background'),\n        'b-color': base,\n        'b-color-hover': light2,\n        'b-color-focus': light2,\n        'b-color-active': dark1,\n        'b-color-disabled': gnv('border-color-light-1'),\n        'pulse-s-color': dark1\n      })\n    })\n\n    if (groupState) {\n      const state = reactive({ index, isLast })\n\n      groupState.increaseItem(state)\n\n      onBeforeUnmount(() => {\n        groupState.decreaseItem(state)\n      })\n    }\n\n    function handleClick(event: MouseEvent) {\n      if (props.disabled || props.loading || event.button) return\n\n      if (!props.noPulse) {\n        pulsing.value = false\n        requestAnimationFrame(() => {\n          pulsing.value = true\n        })\n      }\n\n      emitEvent(props.onClick, event)\n    }\n\n    function handleAnimationEnd() {\n      pulsing.value = false\n    }\n\n    function renderLoadingIcon() {\n      return (\n        <div class={[nh.be('icon'), nh.bem('icon', 'loading')]}>\n          {slots.loading\n            ? (\n                slots.loading()\n              )\n            : (\n              <Icon\n                {...icons.value.loading}\n                effect={props.loadingEffect || icons.value.loading.effect}\n                icon={props.loadingIcon || icons.value.loading.icon}\n                label={'loading'}\n              ></Icon>\n              )}\n        </div>\n      )\n    }\n\n    function renderSingleIcon() {\n      return props.loading\n        ? (\n            renderLoadingIcon()\n          )\n        : (\n          <div class={nh.be('icon')}>\n            {slots.icon ? slots.icon() : props.icon ? <Icon icon={props.icon}></Icon> : null}\n          </div>\n          )\n    }\n\n    function renderCollapseIcon() {\n      if (props.icon || slots.icon) {\n        return props.loading\n          ? (\n              renderLoadingIcon()\n            )\n          : (\n            <div class={nh.be('icon')}>\n              {slots.icon ? slots.icon() : <Icon icon={props.icon}></Icon>}\n            </div>\n            )\n      }\n\n      return (\n        <CollapseTransition appear horizontal fade-effect>\n          {props.loading && renderLoadingIcon()}\n        </CollapseTransition>\n      )\n    }\n\n    function renderBadge() {\n      const badgeType = props.disabled\n        ? 'disabled'\n        : props.type === 'default'\n          ? 'error'\n          : props.type\n\n      return (\n        <Badge\n          inherit\n          class={[nh.be('badge'), nh.bem('badge', badgeType)]}\n          content={props.badge}\n          type={badgeType}\n        ></Badge>\n      )\n    }\n\n    return () => {\n      const Button = (props.tag || 'button') as any\n\n      return (\n        <Button\n          type={props.buttonType}\n          class={className.value}\n          role={'button'}\n          style={style.value}\n          disabled={props.disabled}\n          onClick={handleClick}\n          onAnimationend={handleAnimationEnd}\n        >\n          {isIconOnly.value ? renderSingleIcon() : renderCollapseIcon()}\n          {!isIconOnly.value && slots.default ? slots.default() : null}\n          {!isIconOnly.value && (props.badge || props.badge === 0) ? renderBadge() : null}\n        </Button>\n      )\n    }\n  }\n})\n", "<script setup lang=\"ts\">\nimport { computed, provide, reactive, toRef } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { debounceMinor } from '@vexip-ui/utils'\nimport { buttonGroupProps } from './props'\nimport { GROUP_STATE, buttonTypes } from './symbol'\n\nimport type { ButtonState, ButtonType } from './symbol'\n\ndefineOptions({ name: 'ButtonGroup' })\n\nconst _props = defineProps(buttonGroupProps)\nconst props = useProps('buttonGroup', _props, {\n  size: null,\n  type: {\n    default: 'default' as ButtonType,\n    validator: (value: ButtonType) => buttonTypes.includes(value)\n  },\n  circle: false\n})\n\ndefineSlots<{ default: () => any }>()\n\nconst nh = useNameHelper('button-group')\n\nconst itemStates = reactive(new Set<ButtonState>())\nconst size = toRef(props, 'size')\nconst type = toRef(props, 'type')\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('circle')]: props.circle\n  }\n})\nconst itemList = computed(() => Array.from(itemStates))\n\nconst refreshIndexes = debounceMinor(() => {\n  for (let i = 0, len = itemList.value.length; i < len; ++i) {\n    const item = itemList.value[i]\n\n    item.index = i + 1\n    item.isLast = i === len - 1\n  }\n})\n\nprovide(\n  GROUP_STATE,\n  reactive({\n    size,\n    type,\n    increaseItem,\n    decreaseItem,\n    refreshIndexes\n  })\n)\n\nfunction increaseItem(item: ButtonState) {\n  itemStates.add(item)\n  refreshIndexes()\n}\n\nfunction decreaseItem(item: ButtonState) {\n  itemStates.delete(item)\n  refreshIndexes()\n}\n</script>\n\n<template>\n  <div :class=\"className\" role=\"group\">\n    <slot></slot>\n  </div>\n</template>\n", "import { computed, defineComponent, h, inject, provide } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { columnProps } from './props'\nimport { ROW_STATE, breakPoints } from './symbol'\n\nimport type { CSSProperties } from 'vue'\nimport type { ClassType } from '@vexip-ui/config'\n\ntype LayerProp = 'span' | 'offset' | 'pull' | 'push' | 'order'\n\nconst colProps: LayerProp[] = ['span', 'offset', 'pull', 'push', 'order']\n\nexport default defineComponent({\n  name: 'Column',\n  props: columnProps,\n  setup(_props, { slots }) {\n    const props = useProps('column', _props, {\n      tag: 'div',\n      span: 24,\n      offset: null,\n      push: null,\n      pull: null,\n      order: null,\n      xs: null,\n      sm: null,\n      md: null,\n      lg: null,\n      xl: null,\n      xxl: null,\n      flex: null,\n      useFlex: null\n    })\n\n    const rowState = inject(ROW_STATE, null)\n    const nh = useNameHelper('column')\n\n    provide(ROW_STATE, null!)\n\n    const className = computed(() => {\n      const columnFlex = (props.useFlex || rowState?.columnFlex) && {\n        ...(rowState?.columnFlex || {}),\n        ...(props.useFlex\n          ? props.useFlex === true\n            ? { justify: 'start', align: 'top' }\n            : props.useFlex\n          : {})\n      }\n      const className: ClassType = [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('flex')]: columnFlex,\n          [nh.bm('inherit')]: rowState || props.inherit\n        }\n      ]\n\n      if (columnFlex) {\n        columnFlex.justify && className.push(nh.bm(columnFlex.justify))\n        columnFlex.align && className.push(nh.bm(columnFlex.align))\n      }\n\n      colProps.forEach(prop => {\n        if (typeof props[prop] === 'number') {\n          className.push(\n            prop === 'span' ? nh.bm(`${props[prop]}`) : nh.bm(`${prop}-${props[prop]}`)\n          )\n        }\n      })\n\n      breakPoints.forEach(size => {\n        const sizeProp = props[size]\n\n        if (!sizeProp && sizeProp !== 0) return\n\n        if (typeof sizeProp === 'number') {\n          className.push(nh.bm(`${size}-${sizeProp}`))\n        } else if (typeof sizeProp === 'object') {\n          colProps.forEach(prop => {\n            const value = sizeProp[prop]\n\n            if (!value && value !== 0) return\n\n            className.push(prop === 'span' ? nh.bm(`${value}`) : nh.bm(`${prop}-${value}`))\n          })\n        }\n      })\n\n      return className\n    })\n    const style = computed(() => {\n      const flex = props.flex\n      const style: CSSProperties = {}\n\n      if (rowState) {\n        if (typeof rowState.gap === 'number') {\n          style.paddingInlineStart = style.paddingInlineEnd = `${rowState.gap / 2}px`\n        } else if (Array.isArray(rowState.gap)) {\n          style.paddingInlineStart = style.paddingInlineEnd = `${rowState.gap[0] / 2}px`\n        }\n      }\n\n      if (flex) {\n        if (typeof flex === 'number') {\n          style.flex = `${flex} ${flex} auto`\n        } else if (typeof flex === 'string') {\n          if (/^\\d+\\s\\d+\\s\\d+(\\w+)?$/.test(flex)) {\n            style.flex = flex\n          } else {\n            style.flex = flex === 'auto' ? '1 1 auto' : `0 0 ${flex}`\n          }\n        }\n      }\n\n      return style\n    })\n\n    return () =>\n      h(\n        props.tag || 'div',\n        {\n          class: className.value,\n          style: style.value\n        },\n        {\n          default: () => slots.default && slots.default()\n        }\n      )\n  }\n})\n", "import {\n  booleanProp,\n  buildProps,\n  classProp,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { NumberInputControlType, NumberInputEmptyType } from './symbol'\n\nexport const numberInputProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('input'),\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  /**\n   * 格式化后显示\n   */\n  formatter: Function as PropType<(value: number) => number | string>,\n  value: Number,\n  min: Number,\n  max: Number,\n  placeholder: String,\n  autofocus: booleanProp,\n  spellcheck: booleanProp,\n  autocomplete: booleanProp,\n  precision: Number,\n  readonly: booleanProp,\n  step: Number,\n  ctrlStep: Number,\n  shiftStep: Number,\n  altStep: Number,\n  disabled: booleanProp,\n  controlClass: classProp,\n  debounce: booleanProp,\n  delay: Number,\n  clearable: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  sync: booleanProp,\n  syncStep: booleanProp,\n  controlType: String as PropType<NumberInputControlType>,\n  emptyType: String as PropType<NumberInputEmptyType>,\n  controlAttrs: Object as PropType<Record<string, any>>,\n  name: String,\n  onFocus: eventProp<(event: FocusEvent) => void>(),\n  onBlur: eventProp<(event: FocusEvent) => void>(),\n  onInput: eventProp<(value: number) => void>(),\n  onChange: eventProp<(value: number) => void>(),\n  onEnter: eventProp(),\n  onClear: eventProp(),\n  onPrefixClick: eventProp<(event: MouseEvent) => void>(),\n  onSuffixClick: eventProp<(event: MouseEvent) => void>(),\n  onKeyDown: eventProp<(event: KeyboardEvent) => void>(),\n  onKeyPress: eventProp<(event: KeyboardEvent) => void>(),\n  onKeyUp: eventProp<(event: KeyboardEvent) => void>()\n})\n\nexport type NumberInputProps = ExtractPropTypes<typeof numberInputProps>\nexport type NumberInputCProps = ConfigurableProps<NumberInputProps>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, ref, toRef, watch } from 'vue'\n\nimport { useHover, useModifier, useTimerRecord } from '@vexip-ui/hooks'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport {\n  boundRange,\n  debounce,\n  isNull,\n  isValidNumber,\n  minus,\n  plus,\n  throttle,\n  toFixed,\n  toNumber\n} from '@vexip-ui/utils'\nimport { numberInputProps } from './props'\n\ntype InputEventType = 'input' | 'change'\n\nconst isEmpty = (value: unknown) => !value && value !== 0\nconst isNullOrNaN = (value: unknown) => isNull(value) || Number.isNaN(value)\n\ndefineOptions({ name: 'NumberInput' })\n\nconst {\n  idFor,\n  state,\n  disabled,\n  loading,\n  size,\n  validateField,\n  clearField,\n  getFieldValue,\n  setFieldValue\n} = useFieldStore<number>(focus)\n\nconst _props = defineProps(numberInputProps)\nconst props = useProps('numberInput', _props, {\n  size: createSizeProp(size),\n  state: createStateProp(state),\n  locale: null,\n  prefix: createIconProp(),\n  prefixColor: '',\n  suffix: createIconProp(),\n  suffixColor: '',\n  // 格式化后显示\n  formatter: {\n    default: null,\n    isFunc: true\n  },\n  value: {\n    default: () => getFieldValue(null!),\n    static: true\n  },\n  min: -Infinity,\n  max: Infinity,\n  placeholder: null,\n  autofocus: false,\n  spellcheck: false,\n  autocomplete: false,\n  precision: -1,\n  readonly: false,\n  step: 1,\n  ctrlStep: 100,\n  shiftStep: 10,\n  altStep: 0.1,\n  disabled: () => disabled.value,\n  controlClass: null,\n  debounce: false,\n  delay: null,\n  clearable: false,\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  sync: false,\n  syncStep: false,\n  controlType: 'right',\n  emptyType: 'NaN',\n  controlAttrs: null,\n  name: {\n    default: '',\n    static: true\n  }\n})\n\nconst emit = defineEmits(['update:value'])\n\nconst slots = defineSlots<{\n  prefix: () => any,\n  suffix: () => any\n}>()\n\nconst nh = useNameHelper('number-input')\nconst locale = useLocale('numberInput', toRef(props, 'locale'))\nconst icons = useIcons()\n\nconst { timeout, interval } = useTimerRecord()\n\nconst focused = ref(false)\nconst currentValue = ref<string | number>(props.value)\nconst inputting = ref(false)\nconst plusHolding = ref(false)\nconst minusHolding = ref(false)\n\nconst control = ref<HTMLInputElement>()\nconst { wrapper, isHover } = useHover()\n\nuseModifier({\n  target: control,\n  passive: false,\n  onKeyDown: (event, modifier) => {\n    emitEvent(props.onKeyDown, event)\n\n    if (modifier.up || modifier.down) {\n      event.preventDefault()\n      event.stopPropagation()\n\n      if ((modifier.up && plusDisabled.value) || (modifier.down && minusDisabled.value)) {\n        return\n      }\n\n      changeStep(\n        modifier.up ? 'plus' : 'minus',\n        event.ctrlKey ? 'ctrl' : event.shiftKey ? 'shift' : event.altKey ? 'alt' : undefined\n      )\n      modifier.resetAll()\n    } else if (modifier.enter) {\n      event.preventDefault()\n      event.stopPropagation()\n      emitChangeEvent('change')\n      modifier.resetAll()\n    }\n  },\n  onKeyUp: event => {\n    emitEvent(props.onKeyUp, event)\n\n    if (event.key === 'Enter') {\n      handleEnter()\n    }\n  }\n})\n\nlet lastValue: number\n\nconst outOfRange = computed(() => {\n  return (\n    !isNullOrNaN(currentValue.value) &&\n    (toNumber(currentValue.value) > props.max || toNumber(currentValue.value) < props.min)\n  )\n})\nconst isReadonly = computed(() => (props.loading && props.loadingLock) || props.readonly)\nconst plusDisabled = computed(() => {\n  return (\n    props.disabled ||\n    isReadonly.value ||\n    (!isNullOrNaN(currentValue.value) && toNumber(currentValue.value) >= props.max)\n  )\n})\nconst minusDisabled = computed(() => {\n  return (\n    props.disabled ||\n    isReadonly.value ||\n    (!isNullOrNaN(currentValue.value) && toNumber(currentValue.value) <= props.min)\n  )\n})\nconst className = computed(() => {\n  const [display, fade] = (props.controlType || 'right').split('-')\n\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.ns('input-vars'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('focused')]: inputting.value,\n      [nh.bm('disabled')]: props.disabled,\n      [nh.bm('readonly')]: isReadonly.value,\n      [nh.bm('loading')]: props.loading,\n      [nh.bm(props.size)]: props.size !== 'default',\n      [nh.bm(props.state)]: props.state !== 'default',\n      [nh.bm(`control-${display}`)]: display !== 'right',\n      [nh.bm('control-fade')]: fade,\n      [nh.bm('out-of-range')]: outOfRange.value\n    }\n  ]\n})\nconst hasPrefix = computed(() => {\n  return !!(slots.prefix || props.prefix)\n})\nconst hasSuffix = computed(() => {\n  return !!(slots.suffix || props.suffix)\n})\nconst preciseNumber = computed(() => {\n  return !inputting.value && typeof currentValue.value === 'number' && props.precision >= 0\n    ? toFixed(currentValue.value, props.precision)\n    : currentValue.value\n})\nconst formattedValue = computed(() => {\n  if (typeof preciseNumber.value !== 'number') return preciseNumber.value ?? ''\n\n  return !inputting.value && typeof props.formatter === 'function'\n    ? props.formatter(preciseNumber.value as number)\n    : preciseNumber.value.toString()\n})\nconst hasValue = computed(() => !!(currentValue.value || currentValue.value === 0))\nconst showClear = computed(() => {\n  return !props.disabled && !isReadonly.value && props.clearable && isHover.value && hasValue.value\n})\nconst inputValue = computed(() => {\n  if (Number.isNaN(currentValue.value)) {\n    return ''\n  }\n\n  return inputting.value ? preciseNumber.value : formattedValue.value\n})\n\nconst delay = toNumber(props.delay)\nconst handleInput = props.debounce\n  ? debounce(handleChange, delay || 100)\n  : throttle(handleChange, delay || 16)\n\nwatch(\n  () => props.value,\n  value => {\n    if (value !== lastValue) {\n      parseValue()\n    }\n  },\n  { immediate: true }\n)\n\ndefineExpose({\n  idFor,\n  focused,\n  isHover,\n  outOfRange,\n  preciseNumber,\n  formattedValue,\n  isReadonly,\n  wrapper,\n  input: control,\n  focus,\n  blur: () => control.value?.blur()\n})\n\nfunction boundValueRange(value: number) {\n  return boundRange(value, props.min, props.max)\n}\n\nfunction parseValue() {\n  let value = props.value\n  value = inputting.value ? value : isValidNumber(value, true) ? toNumber(value) : getEmptyValue()\n\n  if (props.precision >= 0 && !isNullOrNaN(value)) {\n    value = toFixed(boundValueRange(value), props.precision)\n  }\n\n  currentValue.value = value\n  lastValue = value\n}\n\nfunction focus(options?: FocusOptions) {\n  control.value?.focus(options)\n}\n\nfunction handleFocus(event: FocusEvent) {\n  focused.value = true\n  inputting.value = true\n  emitEvent(props.onFocus, event)\n}\n\nfunction handleBlur(event: FocusEvent) {\n  focused.value = false\n\n  setTimeout(() => {\n    if (!focused.value) {\n      inputting.value = false\n      emitEvent(props.onBlur, event)\n      emitChangeEvent('change')\n    }\n  }, 120)\n}\n\nfunction handleHold(type: 'plus' | 'minus', event: PointerEvent) {\n  const disabled = type === 'plus' ? plusDisabled : minusDisabled\n  const change = type === 'plus' ? plusNumber : minusNumber\n\n  if (event.button !== 0 || disabled.value) return\n\n  change(event)\n  document.addEventListener('pointerup', cancelStep)\n  document.addEventListener('touchend', cancelStep)\n  clearTimeout(timeout.step)\n  clearInterval(interval.step)\n  ;(type === 'plus' ? plusHolding : minusHolding).value = true\n\n  timeout.step = setTimeout(() => {\n    interval.step = setInterval(() => {\n      disabled.value ? cancelStep() : change(event)\n    }, 32)\n  }, 500)\n}\n\nfunction cancelStep() {\n  document.removeEventListener('pointerup', cancelStep)\n  document.removeEventListener('touchend', cancelStep)\n  clearTimeout(timeout.step)\n  clearInterval(interval.step)\n\n  plusHolding.value = false\n  minusHolding.value = false\n}\n\nfunction plusNumber(event: PointerEvent) {\n  !focused.value && focus()\n  changeStep(\n    'plus',\n    event.ctrlKey ? 'ctrl' : event.shiftKey ? 'shift' : event.altKey ? 'alt' : undefined\n  )\n}\n\nfunction minusNumber(event: PointerEvent) {\n  !focused.value && focus()\n  changeStep(\n    'minus',\n    event.ctrlKey ? 'ctrl' : event.shiftKey ? 'shift' : event.altKey ? 'alt' : undefined\n  )\n}\n\nfunction changeStep(type: 'plus' | 'minus', modifier?: 'ctrl' | 'shift' | 'alt') {\n  if (props.disabled || isReadonly.value) return\n\n  let value = currentValue.value || 0\n  let step!: number\n\n  switch (modifier) {\n    case 'ctrl':\n      step = props.ctrlStep\n      break\n    case 'shift':\n      step = props.shiftStep\n      break\n    case 'alt':\n      step = props.altStep\n      break\n    default:\n      step = props.step\n  }\n\n  const stringValue = value.toString().trim()\n\n  if (stringValue.endsWith('.')) {\n    value = toNumber(stringValue.slice(0, -1))\n  }\n\n  if (type === 'plus') {\n    value = plus(value, step)\n  } else {\n    value = minus(value, step)\n  }\n\n  setValue(value, props.syncStep && !props.sync ? 'change' : 'input')\n}\n\nfunction handleChange(event: Event) {\n  const type = event.type as InputEventType\n  const stringValue = (event.target as HTMLInputElement).value\n\n  let value = stringValue.trim()\n\n  // to rollback invalid value to empty in `<input>` when change\n  if (type === 'change' && stringValue && !isValidNumber(stringValue, true)) {\n    const floatValue = parseFloat(stringValue)\n\n    if (Number.isNaN(floatValue)) {\n      value = ''\n    } else {\n      value = floatValue.toString()\n    }\n\n    ;(event.target as HTMLInputElement).value = value\n  }\n\n  inputting.value = type === 'input'\n\n  setValue(value, type)\n}\n\nfunction setValue(value: string | number, type: InputEventType, sync = props.sync) {\n  if (type !== 'input') {\n    currentValue.value = isEmpty(value) ? getEmptyValue() : toNumber(value)\n  } else {\n    currentValue.value = value\n  }\n\n  emitChangeEvent(type, sync)\n}\n\nfunction getEmptyValue() {\n  switch (props.emptyType) {\n    case 'undefined':\n      return undefined! as number\n    case 'null':\n      return null! as number\n    default:\n      return NaN\n  }\n}\n\nfunction emitChangeEvent(type: InputEventType, sync = props.sync) {\n  const empty = isEmpty(currentValue.value)\n  const value = empty ? getEmptyValue() : toNumber(currentValue.value)\n\n  type = type === 'input' ? 'input' : 'change'\n\n  if (type === 'change') {\n    let boundValue = empty ? value : boundValueRange(toNumber(value))\n\n    if (props.precision >= 0) {\n      boundValue = toFixed(boundValue, props.precision)\n    }\n\n    const changed = !Object.is(boundValue, value)\n\n    if (!empty) {\n      currentValue.value = boundValue\n    }\n\n    if (!sync && Object.is(lastValue, boundValue)) {\n      !Object.is(props.value, value) && emit('update:value', boundValue)\n      return\n    }\n\n    lastValue = boundValue\n\n    if (!sync || changed) {\n      emit('update:value', boundValue)\n      setFieldValue(boundValue)\n    }\n\n    emitEvent(props.onChange, boundValue)\n\n    if (!sync || changed) {\n      validateField()\n    }\n  } else {\n    if (sync) {\n      emit('update:value', value)\n      setFieldValue(value)\n    }\n\n    emitEvent(props.onInput, value)\n\n    if (sync) {\n      validateField()\n    }\n  }\n}\n\nfunction handleClear() {\n  if (props.disabled || isReadonly.value) return\n\n  setValue(NaN, 'change', false)\n  emitEvent(props.onClear)\n  clearField()\n  focus()\n}\n\nfunction handleEnter() {\n  emitEvent(props.onEnter)\n}\n\nfunction handlePrefixClick(event: MouseEvent) {\n  emitEvent(props.onPrefixClick, event)\n}\n\nfunction handleSuffixClick(event: MouseEvent) {\n  emitEvent(props.onSuffixClick, event)\n}\n\nfunction handleKeyPress(event: KeyboardEvent) {\n  emitEvent(props.onKeyPress, event)\n}\n</script>\n\n<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    @click=\"control?.focus()\"\n  >\n    <div\n      v-if=\"hasPrefix\"\n      :class=\"[nh.be('icon'), nh.be('prefix')]\"\n      :style=\"{ color: props.prefixColor }\"\n      @click=\"handlePrefixClick\"\n    >\n      <slot name=\"prefix\">\n        <Icon :icon=\"props.prefix\"></Icon>\n      </slot>\n    </div>\n    <input\n      v-bind=\"props.controlAttrs\"\n      ref=\"control\"\n      :class=\"[nh.be('control'), props.controlAttrs?.class, props.controlClass]\"\n      :value=\"inputValue\"\n      type=\"text\"\n      :autofocus=\"props.autofocus\"\n      :autocomplete=\"props.autocomplete ? 'on' : 'off'\"\n      :spellcheck=\"props.spellcheck\"\n      :disabled=\"props.disabled\"\n      :readonly=\"isReadonly\"\n      :placeholder=\"props.placeholder ?? locale.placeholder\"\n      :name=\"props.name || props.controlAttrs?.name\"\n      role=\"spinbutton\"\n      :title=\"outOfRange ? locale.outOfRange : undefined\"\n      :aria-valuenow=\"preciseNumber\"\n      :aria-valuemin=\"props.min !== -Infinity ? props.min : undefined\"\n      :aria-valuemax=\"props.max !== Infinity ? props.max : undefined\"\n      @submit.prevent\n      @blur=\"handleBlur\"\n      @focus=\"handleFocus\"\n      @keypress=\"handleKeyPress\"\n      @input=\"handleInput\"\n      @change=\"handleChange\"\n    />\n    <div\n      v-if=\"hasSuffix\"\n      :class=\"[nh.be('icon'), nh.be('suffix')]\"\n      :style=\"{\n        color: props.suffixColor,\n        opacity: showClear || props.loading ? '0%' : ''\n      }\"\n      @click=\"handleSuffixClick\"\n    >\n      <slot name=\"suffix\">\n        <Icon :icon=\"props.suffix\"></Icon>\n      </slot>\n    </div>\n    <div\n      v-else-if=\"props.clearable || props.loading\"\n      :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n    ></div>\n    <Transition :name=\"nh.ns('fade')\" appear>\n      <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear\">\n        <Icon v-bind=\"icons.clear\" label=\"clear\"></Icon>\n      </div>\n      <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n        <Icon\n          v-bind=\"icons.loading\"\n          :effect=\"props.loadingEffect || icons.loading.effect\"\n          :icon=\"props.loadingIcon || icons.loading.icon\"\n          label=\"loading\"\n        ></Icon>\n      </div>\n    </Transition>\n    <template v-if=\"props.controlType !== 'none'\">\n      <div\n        :class=\"{\n          [nh.be('plus')]: true,\n          [nh.bem('plus', 'disabled')]: plusDisabled,\n          [nh.bem('plus', 'holding')]: plusHolding\n        }\"\n        @pointerdown.prevent=\"handleHold('plus', $event)\"\n        @mousedown.prevent\n        @touchstart.prevent\n      >\n        <Icon v-bind=\"icons.angleUp\" :scale=\"+(icons.angleUp.scale || 1) * 0.8\"></Icon>\n      </div>\n      <div\n        :class=\"{\n          [nh.be('minus')]: true,\n          [nh.bem('minus', 'disabled')]: minusDisabled,\n          [nh.bem('minus', 'holding')]: minusHolding\n        }\"\n        @pointerdown.prevent=\"handleHold('minus', $event)\"\n        @mousedown.prevent\n        @touchstart.prevent\n      >\n        <Icon v-bind=\"icons.angleDown\" :scale=\"+(icons.angleDown.scale || 1) * 0.8\"></Icon>\n      </div>\n    </template>\n  </div>\n</template>\n", "import { booleanProp, buildProps, eventProp, localeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Dateable } from '@vexip-ui/utils'\n\nexport const calendarProps = buildProps({\n  locale: localeProp('calendar'),\n  value: [Number, String, Date] as PropType<Dateable | Dateable[]>,\n  year: Number,\n  /**\n   * 当前日历显示的月份 (1 ~ 12)\n   */\n  month: Number,\n  /**\n   * 头部星期显示的内容，数量须为 7 个\n   */\n  weekDays: Array as PropType<string[]>,\n  weekStart: Number,\n  today: [Number, String, Date] as PropType<Dateable>,\n  disabledDate: Function as PropType<(data: Date) => boolean>,\n  onSelect: eventProp<(date: Date) => void>(),\n  onYearChange: eventProp<(year: number, month: number) => void>(),\n  onMonthChange: eventProp<(year: number, month: number) => void>()\n})\n\nexport type CalendarProps = ExtractPropTypes<typeof calendarProps>\nexport type CalendarCProps = ConfigurableProps<CalendarProps>\n\nexport const calendarPanelProps = buildProps({\n  locale: localeProp('calendar'),\n  /**\n   * 选中的日期\n   */\n  value: [Number, String, Date, Array] as PropType<Dateable | Dateable[]>,\n  /**\n   * 当前日历显示的年份\n   */\n  year: Number,\n  /**\n   * 当前日历显示的月份 (1 ~ 12)\n   */\n  month: Number,\n  /**\n   * 头部星期显示的内容，数量须为 7 个\n   */\n  weekDays: Array as PropType<string[]>,\n  weekStart: Number,\n  today: [Number, String, Date] as PropType<Dateable>,\n  disabledDate: Function as PropType<(data: Date) => boolean>,\n  valueType: String as PropType<'start' | 'end'>,\n  min: [Number, String, Date] as PropType<Dateable>,\n  max: [Number, String, Date] as PropType<Dateable>,\n  range: booleanProp,\n  onSelect: eventProp<(date: Date) => void>(),\n  onHover: eventProp<(date: Date | null) => void>()\n})\n\nexport type CalendarPanelProps = ExtractPropTypes<typeof calendarPanelProps>\nexport type CalendarPanelCProps = ConfigurableProps<CalendarPanelProps>\n", "<script setup lang=\"ts\">\nimport { computed, ref, toRef, watch } from 'vue'\n\nimport { useHover } from '@vexip-ui/hooks'\nimport { emitEvent, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport {\n  debounceMinor,\n  differenceDays,\n  endOfDay,\n  rangeDate,\n  startOfDay,\n  startOfWeek,\n  toFalse\n} from '@vexip-ui/utils'\nimport { calendarPanelProps } from './props'\n\nimport type { Dateable } from '@vexip-ui/utils'\nimport type { WeekIndex } from './symbol'\n\ndefineOptions({ name: 'CalendarPanel' })\n\nconst _props = defineProps(calendarPanelProps)\nconst props = useProps('calendarBase', _props, {\n  locale: null,\n  value: {\n    default: null,\n    static: true\n  },\n  year: () => new Date().getFullYear(),\n  month: {\n    default: () => new Date().getMonth() + 1,\n    validator: value => value > 0 && value <= 12\n  },\n  weekDays: {\n    default: null,\n    validator: value => !value || value.length === 0 || value.length === 7\n  },\n  weekStart: {\n    default: 0,\n    validator: value => value >= 0 && value < 7\n  },\n  today: {\n    default: () => new Date(),\n    validator: value => !Number.isNaN(+new Date(value))\n  },\n  disabledDate: {\n    default: toFalse,\n    isFunc: true\n  },\n  valueType: {\n    default: 'start',\n    validator: value => value === 'start' || value === 'end'\n  },\n  min: null,\n  max: null,\n  range: null\n})\n\nconst emit = defineEmits(['update:value'])\n\ndefineSlots<{\n  header: () => any,\n  week: (params: { label: string, index: number, week: number }) => any,\n  item: (params: {\n    selected: boolean,\n    hovered: boolean,\n    date: Date,\n    isPrev: boolean,\n    isNext: boolean,\n    isToday: boolean,\n    disabled: boolean,\n    inRange: boolean\n  }) => any,\n  footer: () => any\n}>()\n\nconst nh = useNameHelper('calendar')\n\nconst startValue = ref<Date | null>(null)\nconst endValue = ref<Date | null>(null)\nconst dateRange = ref<Date[]>([])\nconst hoveredDate = ref<Date | null>(null)\n\nconst { wrapper, isHover } = useHover()\nconst locale = useLocale('calendar', toRef(props, 'locale'))\n\nconst min = computed(() => (props.min ? +startOfDay(props.min) : -Infinity))\nconst max = computed(() => (props.max ? +endOfDay(props.max) : Infinity))\nconst reversed = computed(() => {\n  if (Number.isNaN(min.value) || Number.isNaN(max.value)) {\n    return false\n  }\n\n  return min.value > max.value\n})\n\nconst updateDateRange = debounceMinor(setDateRange)\n\nparseValue(props.value)\nsetDateRange()\n\nwatch(() => props.value, parseValue)\nwatch([() => props.year, () => props.month, () => props.weekStart], updateDateRange)\nwatch(isHover, value => {\n  if (!value) {\n    hoveredDate.value = null\n  }\n})\nwatch(hoveredDate, value => {\n  emitEvent(props.onHover, value)\n})\n\ndefineExpose({\n  startValue,\n  endValue,\n  body: wrapper,\n  isSelected,\n  isHovered,\n  isPrevMonth,\n  isNextMonth,\n  isDisabled,\n  isToday,\n  isInRange\n})\n\nfunction getWeekLabel(index: number) {\n  return props.weekDays?.[index] || locale.value[`week${(index || 7) as WeekIndex}`]\n}\n\nfunction setDateRange() {\n  dateRange.value = rangeDate(\n    startOfWeek(new Date(props.year, props.month - 1, 1), props.weekStart),\n    42\n  )\n}\n\nfunction parseValue(value: Dateable | Dateable[]) {\n  if (!Array.isArray(value)) {\n    value = [value, value]\n  }\n\n  for (let i = 0; i < 2; ++i) {\n    const date = new Date(value[i] ?? '')\n\n    if (i === 0) {\n      startValue.value = Number.isNaN(+date) ? null : date\n    } else {\n      endValue.value = Number.isNaN(+date) ? null : date\n    }\n\n    if (!props.range) break\n  }\n}\n\nfunction isSelected(date: Date) {\n  if (!date || (!startValue.value && !endValue.value)) {\n    return false\n  }\n\n  return !!(\n    (startValue.value && !differenceDays(date, startValue.value)) ||\n    (endValue.value && !differenceDays(date, endValue.value))\n  )\n}\n\nfunction isDisabled(date: Date) {\n  if (typeof props.disabledDate === 'function') {\n    if (props.disabledDate(date)) {\n      return true\n    }\n  }\n\n  const time = date.getTime()\n\n  if (reversed.value) {\n    if (time > max.value && time < min.value) {\n      return true\n    }\n  } else {\n    if (time < min.value || time > max.value) {\n      return true\n    }\n  }\n\n  return false\n}\n\nfunction isHovered(date: Date) {\n  if (!date || !hoveredDate.value) {\n    return false\n  }\n\n  return !differenceDays(date, hoveredDate.value)\n}\n\nfunction isPrevMonth(date: Date) {\n  const { year, month } = props\n  const dateYear = date.getFullYear()\n  const dateMonth = date.getMonth()\n\n  return dateYear < year || (dateYear === year && dateMonth < month - 1)\n}\n\nfunction isNextMonth(date: Date) {\n  const { year, month } = props\n  const dateYear = date.getFullYear()\n  const dateMonth = date.getMonth()\n\n  return dateYear > year || (dateYear === year && dateMonth > month - 1)\n}\n\nfunction isToday(date: Date) {\n  return differenceDays(date, props.today) === 0\n}\n\nfunction handleClick(date: Date) {\n  if (isDisabled(date)) {\n    return\n  }\n\n  if (props.valueType === 'start') {\n    startValue.value = date\n  } else {\n    endValue.value = date\n  }\n\n  emitEvent(props.onSelect, date)\n  emit('update:value', date)\n}\n\nfunction handleHover(date: Date) {\n  hoveredDate.value = isDisabled(date) ? null : date\n}\n\nfunction isInRange(date: Date) {\n  if (!hoveredDate.value && !startValue.value && !endValue.value) {\n    return false\n  }\n\n  let min: number\n  let max: number\n\n  if (startValue.value && endValue.value) {\n    const startTime = startValue.value.getTime()\n    const endTime = endValue.value.getTime()\n\n    min = Math.min(startTime, endTime)\n    max = Math.max(startTime, endTime)\n  } else if (hoveredDate.value) {\n    if (!startValue.value && !endValue.value) return false\n\n    const hoveredTime = hoveredDate.value.getTime()\n\n    if (!startValue.value || !endValue.value) {\n      const selectedTime = (startValue.value ?? endValue.value)!.getTime()\n\n      min = Math.min(hoveredTime, selectedTime)\n      max = Math.max(hoveredTime, selectedTime)\n    } else {\n      const startTime = startValue.value.getTime()\n      const endTime = endValue.value.getTime()\n      const minTime = Math.min(startTime, endTime)\n      const maxTime = Math.max(startTime, endTime)\n\n      min = Math.min(hoveredTime, minTime)\n      max = Math.max(hoveredTime, maxTime)\n    }\n  } else {\n    return false\n  }\n\n  return date.getTime() >= min && date.getTime() <= max\n}\n</script>\n\n<template>\n  <div :class=\"[nh.be('panel'), nh.bs('vars'), props.inherit && nh.bem('panel', 'inherit')]\">\n    <slot name=\"header\"></slot>\n    <div :class=\"[nh.be('row'), nh.bem('row', 'week')]\">\n      <div v-for=\"week in 7\" :key=\"week\" :class=\"[nh.be('cell'), nh.be('cell-week')]\">\n        <slot\n          name=\"week\"\n          :label=\"getWeekLabel((week - 1 + props.weekStart) % 7)\"\n          :index=\"week - 1\"\n          :week=\"(week - 1 + props.weekStart) % 7\"\n        >\n          <div :class=\"nh.be('index')\">\n            {{ getWeekLabel((week - 1 + props.weekStart) % 7) }}\n          </div>\n        </slot>\n      </div>\n    </div>\n    <div ref=\"body\" :class=\"nh.be('body')\">\n      <div v-for=\"row in 6\" :key=\"row\" :class=\"nh.be('row')\">\n        <div\n          v-for=\"cell in 7\"\n          :key=\"(row - 1) * 7 + cell\"\n          :class=\"nh.be('cell')\"\n          @mouseenter=\"handleHover(dateRange[(row - 1) * 7 + cell - 1])\"\n        >\n          <slot\n            name=\"item\"\n            :selected=\"isSelected(dateRange[(row - 1) * 7 + cell - 1])\"\n            :hovered=\"isHovered(dateRange[(row - 1) * 7 + cell - 1])\"\n            :date=\"dateRange[(row - 1) * 7 + cell - 1]\"\n            :is-prev=\"isPrevMonth(dateRange[(row - 1) * 7 + cell - 1])\"\n            :is-next=\"isNextMonth(dateRange[(row - 1) * 7 + cell - 1])\"\n            :is-today=\"isToday(dateRange[(row - 1) * 7 + cell - 1])\"\n            :disabled=\"isDisabled(dateRange[(row - 1) * 7 + cell - 1])\"\n            :in-range=\"props.range && isInRange(dateRange[(row - 1) * 7 + cell - 1])\"\n          >\n            <div\n              :class=\"{\n                [nh.be('index')]: true,\n                [nh.bem('index', 'selected')]: isSelected(dateRange[(row - 1) * 7 + cell - 1]),\n                [nh.bem('index', 'prev')]: isPrevMonth(dateRange[(row - 1) * 7 + cell - 1]),\n                [nh.bem('index', 'next')]: isNextMonth(dateRange[(row - 1) * 7 + cell - 1]),\n                [nh.bem('index', 'today')]: isToday(dateRange[(row - 1) * 7 + cell - 1]),\n                [nh.bem('index', 'disabled')]: isDisabled(dateRange[(row - 1) * 7 + cell - 1]),\n                [nh.bem('index', 'in-range')]:\n                  props.range && isInRange(dateRange[(row - 1) * 7 + cell - 1])\n              }\"\n              tabindex=\"0\"\n              @click=\"handleClick(dateRange[(row - 1) * 7 + cell - 1])\"\n              @keydown.enter.prevent=\"handleClick(dateRange[(row - 1) * 7 + cell - 1])\"\n              @keydown.space.prevent=\"handleClick(dateRange[(row - 1) * 7 + cell - 1])\"\n            >\n              <div :class=\"nh.be('index-inner')\">\n                {{ dateRange[(row - 1) * 7 + cell - 1].getDate() }}\n              </div>\n            </div>\n          </slot>\n        </div>\n      </div>\n    </div>\n    <slot name=\"footer\"></slot>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Column } from '@/components/column'\nimport { NumberInput } from '@/components/number-input'\nimport { Row } from '@/components/row'\n\nimport { ref, toRef, watch } from 'vue'\n\nimport CalendarPanel from './calendar-panel.vue'\nimport { emitEvent, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { calendarProps } from './props'\n\ndefineOptions({ name: 'Calendar' })\n\nconst _props = defineProps(calendarProps)\nconst props = useProps('calendar', _props, {\n  locale: null,\n  value: {\n    default: null,\n    static: true\n  },\n  year: () => new Date().getFullYear(),\n  month: {\n    default: () => new Date().getMonth() + 1,\n    validator: value => value > 0 && value <= 12\n  },\n  weekDays: {\n    default: null,\n    validator: value => !value || value.length === 0 || value.length === 7\n  },\n  weekStart: {\n    default: 0,\n    validator: value => value >= 0 && value < 7\n  },\n  today: {\n    default: () => new Date(),\n    validator: value => !Number.isNaN(+new Date(value))\n  },\n  disabledDate: {\n    default: () => false,\n    isFunc: true\n  }\n})\n\nconst emit = defineEmits(['update:value', 'update:year', 'update:month'])\n\ndefineSlots<{\n  header: () => any,\n  title: () => any,\n  week: (params: { label: string, index: number, week: number }) => any,\n  content: (params: {\n    selected: boolean,\n    hovered: boolean,\n    date: Date,\n    isPrev: boolean,\n    isNext: boolean,\n    isToday: boolean,\n    disabled: boolean\n  }) => any\n}>()\n\nconst nh = useNameHelper('calendar')\nconst locale = useLocale('calendar', toRef(props, 'locale'))\n\nconst calendarValue = ref(props.value)\nconst calendarYear = ref(props.year)\nconst calendarMonth = ref(props.month)\n\nwatch(\n  () => props.value,\n  value => {\n    calendarValue.value = value\n  }\n)\nwatch(\n  () => props.year,\n  value => {\n    calendarYear.value = value\n  }\n)\nwatch(\n  () => props.month,\n  value => {\n    calendarMonth.value = value\n  }\n)\n\ndefineExpose({ calendarValue, calendarYear, calendarMonth })\n\nfunction formatYearInput(value: number) {\n  return `${value}${locale.value.year}`\n}\n\nfunction formatMonthInput(value: number) {\n  return `${value}${locale.value.month}`\n}\n\nfunction isDisabled(date: Date) {\n  if (typeof props.disabledDate !== 'function') {\n    return true\n  }\n\n  return props.disabledDate(date)\n}\n\nfunction handleClick(date: Date) {\n  if (!isDisabled(date)) {\n    calendarValue.value = date\n  }\n\n  emitEvent(props.onSelect, date)\n  emit('update:value', date)\n}\n\nfunction handleYearChange(value: number) {\n  calendarYear.value = value\n\n  emitEvent(props.onYearChange, value, calendarMonth.value)\n  emit('update:year', value)\n}\n\nfunction handleMonthChange(value: number) {\n  calendarMonth.value = value\n\n  emitEvent(props.onMonthChange, calendarYear.value, value)\n  emit('update:month', value)\n}\n</script>\n\n<template>\n  <CalendarPanel\n    v-model:value=\"calendarValue\"\n    :inherit=\"props.inherit\"\n    :class=\"[nh.b()]\"\n    :year=\"calendarYear\"\n    :month=\"calendarMonth\"\n    :week-start=\"props.weekStart\"\n    :today=\"props.today\"\n    :disabled-date=\"props.disabledDate\"\n  >\n    <template #header>\n      <slot name=\"header\">\n        <Row inherit :class=\"nh.be('header')\" align=\"middle\">\n          <Column flex=\"auto\">\n            <slot name=\"title\"></slot>\n          </Column>\n          <Column :class=\"nh.be('actions')\" flex=\"0\">\n            <NumberInput\n              :value=\"calendarYear\"\n              inherit\n              :class=\"nh.be('year-input')\"\n              :min=\"1970\"\n              :max=\"2300\"\n              :formatter=\"formatYearInput\"\n              @change=\"handleYearChange\"\n            ></NumberInput>\n            <NumberInput\n              :value=\"calendarMonth\"\n              inherit\n              :class=\"nh.be('month-input')\"\n              :min=\"1\"\n              :max=\"12\"\n              :formatter=\"formatMonthInput\"\n              @change=\"handleMonthChange\"\n            ></NumberInput>\n          </Column>\n        </Row>\n      </slot>\n    </template>\n    <template #week=\"{ label, index, week }\">\n      <div :class=\"nh.be('week')\">\n        <slot\n          name=\"week\"\n          :label=\"label\"\n          :index=\"index\"\n          :week=\"week\"\n        >\n          <div :class=\"nh.be('week-value')\">\n            {{ label }}\n          </div>\n        </slot>\n      </div>\n    </template>\n    <template #item=\"{ selected, hovered, date, isPrev, isNext, isToday, disabled }\">\n      <div\n        :class=\"{\n          [nh.be('date')]: true,\n          [nh.bem('date', 'selected')]: selected,\n          [nh.bem('date', 'prev')]: isPrev,\n          [nh.bem('date', 'next')]: isNext,\n          [nh.bem('date', 'today')]: isToday,\n          [nh.bem('date', 'disabled')]: disabled\n        }\"\n        tabindex=\"0\"\n        @click=\"handleClick(date)\"\n        @keydown.enter.prevent=\"handleClick(date)\"\n        @keydown.space.prevent=\"handleClick(date)\"\n      >\n        <div :class=\"nh.be('date-header')\">\n          <div :class=\"nh.be('date-value')\">\n            {{ date.getDate() }}\n          </div>\n        </div>\n        <div :class=\"nh.be('date-content')\">\n          <slot\n            name=\"content\"\n            :selected=\"selected\"\n            :hovered=\"hovered\"\n            :date=\"date\"\n            :is-prev=\"isPrev\"\n            :is-next=\"isNext\"\n            :is-today=\"isToday\"\n            :disabled=\"disabled\"\n          ></slot>\n        </div>\n      </div>\n    </template>\n  </CalendarPanel>\n</template>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  sizeProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps, EventListener } from '@vexip-ui/config'\nimport type { CaptchaHollowProcess, CaptchaHollowType } from './hollow-paths'\nimport type { CaptchaBeforeTest, CaptchaType, SuccessEvent } from './symbol'\n\nexport const captchaProps = buildProps({\n  type: String as PropType<CaptchaType>,\n  slideTarget: [Number, Array] as PropType<number | number[]>,\n  title: String,\n  tip: String,\n  successTip: String,\n  failTip: String,\n  image: [String, Function] as PropType<string | (() => Promise<string>)>,\n  tolerance: Number,\n  canvasSize: Array as PropType<number[]>,\n  refreshIcon: iconProp,\n  disabled: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingEffect: String as PropType<IconEffect>,\n  onBeforeTest: Function as PropType<CaptchaBeforeTest>,\n  texts: Array as PropType<string[]>,\n  failLimit: Number,\n  remotePoint: booleanProp,\n  useTrigger: booleanProp,\n  triggerSize: sizeProp,\n  triggerText: String,\n  transfer: booleanStringProp,\n  hideDelay: Number,\n  hollowShape: [String, Function] as PropType<CaptchaHollowType | CaptchaHollowProcess>,\n  onSuccess: eventProp<EventListener<SuccessEvent>>(),\n  onFail: eventProp(),\n  onDragStart: eventProp<(percent: number) => void>(),\n  onDrag: eventProp<(percent: number) => void>(),\n  onDragEnd: eventProp<(percent: number) => void>(),\n  onRefresh: eventProp()\n})\n\nexport type CaptchaProps = ExtractPropTypes<typeof captchaProps>\nexport type CaptchaCProps = ConfigurableProps<ExtractPropTypes<typeof captchaProps>>\n\nexport const captchaSliderProps = buildProps({\n  size: sizeProp,\n  target: Number,\n  tip: String,\n  successTip: String,\n  tolerance: Number,\n  disabled: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  onBeforeTest: Function as PropType<(percent: number, matched: boolean) => unknown>,\n  onSuccess: eventProp<(percent: number) => void>(),\n  onFail: eventProp(),\n  onDragStart: eventProp<(percent: number) => void>(),\n  onDrag: eventProp<(percent: number) => void>(),\n  onDragEnd: eventProp<(percent: number) => void>()\n})\n\nexport type CaptchaSliderProps = ExtractPropTypes<typeof captchaSliderProps>\nexport type CaptchaSliderCProps = ConfigurableProps<ExtractPropTypes<typeof captchaSliderProps>>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, nextTick, ref, watch } from 'vue'\n\nimport {\n  createIconProp,\n  createSizeProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { useMoving, useSetTimeout } from '@vexip-ui/hooks'\nimport { boundRange, toFixed } from '@vexip-ui/utils'\nimport { captchaSliderProps } from './props'\n\ndefineOptions({ name: 'CaptchaSlider' })\n\nconst { idFor, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n  useFieldStore<boolean>(focus)\n\nconst _props = defineProps(captchaSliderProps)\nconst props = useProps('captcha', _props, {\n  size: createSizeProp(size),\n  target: {\n    default: 100,\n    validator: value => value >= 0 && value <= 100\n  },\n  tip: null,\n  successTip: null,\n  tolerance: {\n    default: 1,\n    validator: value => value >= 0\n  },\n  disabled: () => disabled.value,\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  onBeforeTest: {\n    default: null,\n    isFunc: true\n  }\n})\n\nconst nh = useNameHelper('captcha')\nconst locale = useLocale('captcha')\nconst icons = useIcons()\n\nconst { timer } = useSetTimeout()\n\nconst currentLeft = ref(0)\nconst testing = ref(false)\nconst resetting = ref(false)\nconst isSuccess = ref(false)\nconst testLoading = ref(false)\n\nconst track = ref<HTMLElement>()\n\nconst readonly = computed(() => props.disabled || (props.loading && props.loadingLock))\n\nlet widthLimit: number\n\nconst { target: trigger, moving: dragging } = useMoving({\n  onStart: (_, event) => {\n    if (\n      testing.value ||\n      readonly.value ||\n      !track.value ||\n      !trigger.value ||\n      isSuccess.value ||\n      resetting.value ||\n      event.button > 0\n    ) {\n      return false\n    }\n\n    widthLimit = track.value.getBoundingClientRect().width\n    currentLeft.value = 0\n    verifyPosition()\n    trigger.value.focus()\n    emitEvent(props.onDragStart, currentLeft.value)\n  },\n  onMove: state => {\n    if (testing.value || readonly.value || isSuccess.value || resetting.value) {\n      return false\n    }\n\n    currentLeft.value = (state.deltaX / widthLimit) * 100\n    verifyPosition()\n    emitEvent(props.onDrag, currentLeft.value)\n  },\n  onEnd: async () => {\n    if (testing.value || readonly.value) return\n\n    testing.value = true\n\n    const matched = matchTarget(currentLeft.value)\n    let customResult: unknown\n\n    if (typeof props.onBeforeTest === 'function') {\n      nextTick(() => {\n        testLoading.value = true\n      })\n      customResult = await props.onBeforeTest(currentLeft.value, matched)\n      nextTick(() => {\n        testLoading.value = false\n      })\n    }\n\n    if (currentLeft.value && (customResult === false || (!matched && customResult !== true))) {\n      resetting.value = true\n      currentLeft.value = 0\n      isSuccess.value = false\n\n      setFieldValue(false)\n      emitEvent(props.onFail)\n    } else if (matched || customResult === true) {\n      isSuccess.value = true\n\n      if (customResult && !matched) {\n        resetting.value = true\n        currentLeft.value = props.target\n      }\n\n      setFieldValue(true)\n      emitEvent(props.onSuccess, currentLeft.value)\n    }\n\n    validateField()\n    trigger.value?.blur()\n    emitEvent(props.onDragEnd, currentLeft.value)\n\n    clearTimeout(timer.testing)\n    testing.value = false\n  }\n})\n\nconst isLoading = computed(() => props.loading || testLoading.value)\nconst className = computed(() => {\n  const baseCls = nh.be('slider')\n\n  return {\n    [baseCls]: true,\n    [nh.bs('vars')]: true,\n    [`${baseCls}--success`]: isSuccess.value,\n    [`${baseCls}--disabled`]: props.disabled,\n    [`${baseCls}--loading`]: isLoading.value,\n    [`${baseCls}--${props.size}`]: props.size !== 'default'\n  }\n})\nconst fillerStyle = computed(() => {\n  return {\n    [nh.cv('filler-transition')]: resetting.value ? 'transform 250ms ease' : undefined,\n    transform: `scaleX(${currentLeft.value / 100})`\n  }\n})\nconst tipStyle = computed(() => {\n  return {\n    [nh.cv('tip-transition')]: resetting.value ? 'background-position 250ms ease' : undefined,\n    backgroundPosition: `-${currentLeft.value}%`\n  }\n})\nconst triggerStyle = computed(() => {\n  return {\n    left: `${currentLeft.value}%`,\n    [nh.cv('trigger-transition')]: resetting.value ? 'left 250ms ease' : undefined\n  }\n})\n\nwatch(\n  () => getFieldValue(false),\n  value => {\n    if (!value) {\n      reset()\n    } else {\n      if (!matchTarget(currentLeft.value)) {\n        resetting.value = true\n        currentLeft.value = props.target\n      }\n\n      isSuccess.value = true\n    }\n  }\n)\nwatch(readonly, value => value && reset())\n\ndefineExpose({\n  idFor,\n  currentLeft,\n  resetting,\n  isSuccess,\n  dragging,\n  isLoading,\n  track,\n  trigger,\n  reset\n})\n\nfunction verifyPosition() {\n  currentLeft.value = toFixed(boundRange(currentLeft.value, 0, 100), 3)\n}\n\nfunction reset() {\n  resetting.value = true\n  currentLeft.value = 0\n  isSuccess.value = false\n}\n\nfunction afterReset() {\n  resetting.value = false\n}\n\nfunction matchTarget(value: number) {\n  return Math.abs(props.target - value) <= props.tolerance\n}\n\nfunction focus(options?: FocusOptions) {\n  trigger.value?.focus(options)\n}\n</script>\n\n<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    tabindex=\"-1\"\n  >\n    <div\n      :class=\"{\n        [nh.be('filler')]: true,\n        [nh.bem('filler', 'loading')]: isLoading,\n        [nh.bem('filler', 'success')]: isSuccess\n      }\"\n      :style=\"fillerStyle\"\n    ></div>\n    <div\n      :class=\"{\n        [nh.be('tip')]: true,\n        [nh.bem('tip', 'focused')]: dragging,\n        [nh.bem('tip', 'loading')]: isLoading,\n        [nh.bem('tip', 'success')]: isSuccess\n      }\"\n      :style=\"tipStyle\"\n    >\n      <slot name=\"tip\" :success=\"isSuccess\">\n        {{ isSuccess ? props.successTip ?? locale.success : props.tip ?? locale.slideEnd }}\n      </slot>\n    </div>\n    <div ref=\"track\" :class=\"nh.be('track')\">\n      <div\n        ref=\"trigger\"\n        :class=\"{\n          [nh.be('trigger')]: true,\n          [nh.bem('trigger', 'focused')]: dragging,\n          [nh.bem('trigger', 'loading')]: isLoading,\n          [nh.bem('trigger', 'success')]: isSuccess\n        }\"\n        tabindex=\"0\"\n        :style=\"triggerStyle\"\n        @transitionend=\"afterReset\"\n      >\n        <slot name=\"trigger\" :success=\"isSuccess\">\n          <Icon v-if=\"isSuccess\" v-bind=\"icons.check\"></Icon>\n          <Icon\n            v-else-if=\"isLoading\"\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n          ></Icon>\n          <Icon v-else v-bind=\"icons.anglesRight\"></Icon>\n        </slot>\n      </div>\n    </div>\n  </div>\n</template>\n", "export interface CaptchaHollowOptions {\n  ctx: CanvasRenderingContext2D,\n  /**\n   * The x coordinate of slide target center\n   */\n  x: number,\n  /**\n   * The y coordinate of slide target center\n   */\n  y: number,\n  /**\n   * Current canvas width\n   */\n  width: number,\n  /**\n   * Current canvas height\n   */\n  height: number\n}\n\n/**\n * Specify the react of the hollow's shape\n */\nexport type CaptchaHollowResult = [x: number, y: number, width: number, height: number]\nexport type CaptchaHollowProcess = (options: CaptchaHollowOptions) => CaptchaHollowResult\n\nexport type CaptchaHollowType = 'square' | 'puzzle' | 'shield' | 'heart'\n\nexport const squarePath: CaptchaHollowProcess = ({ ctx, x, y, width, height }) => {\n  const side = Math.min(width, height) * 0.25\n  const halfSide = side * 0.5\n\n  ctx.moveTo(x - halfSide, y - halfSide)\n  ctx.lineTo(x + halfSide, y - halfSide)\n  ctx.lineTo(x + halfSide, y + halfSide)\n  ctx.lineTo(x - halfSide, y + halfSide)\n  ctx.closePath()\n\n  return [x - halfSide - 2, y - halfSide - 2, side + 4, side + 4]\n}\n\nexport const puzzlePath: CaptchaHollowProcess = ({ ctx, x, y, width, height }) => {\n  const side = Math.min(width, height) * 0.2\n  const halfSide = side * 0.5\n  const left = x - halfSide\n  const top = y - halfSide\n  const radius = side * 0.2\n\n  ctx.moveTo(left, top)\n  ctx.arc(left + halfSide, top - radius + 2, radius, 0.72 * Math.PI, 2.26 * Math.PI)\n  ctx.lineTo(left + side, top)\n  ctx.arc(left + side + radius - 2, top + halfSide, radius, 1.21 * Math.PI, 2.78 * Math.PI)\n  ctx.lineTo(left + side, top + side)\n  ctx.lineTo(left, top + side)\n  ctx.arc(left + radius - 2, top + halfSide, radius + 0.4, 2.76 * Math.PI, 1.24 * Math.PI, true)\n  ctx.lineTo(left, top)\n\n  return [x - halfSide - 2, y - side * 0.9 - 2, side * 1.4 + 4, side * 1.4 + 4]\n}\n\nexport const shieldPath: CaptchaHollowProcess = ({ ctx, x, y, width, height }) => {\n  const side = Math.min(width, height) * 0.25\n  const halfSide = side * 0.5\n\n  ctx.moveTo(x, y - halfSide)\n  ctx.bezierCurveTo(\n    x,\n    y - halfSide + side * 0.05,\n    x - halfSide + side * 0.3,\n    y - halfSide * 0.5 + side * 0.1,\n    x - halfSide,\n    y - halfSide * 0.7\n  )\n  ctx.bezierCurveTo(x - halfSide, y + side * 0.3, x - side * 0.1, y + halfSide, x, y + halfSide)\n  ctx.bezierCurveTo(\n    x + side * 0.1,\n    y + halfSide,\n    x + halfSide,\n    y + side * 0.3,\n    x + halfSide,\n    y - halfSide * 0.7\n  )\n  ctx.bezierCurveTo(\n    x + halfSide - side * 0.3,\n    y - halfSide * 0.5 + side * 0.1,\n    x,\n    y - halfSide + side * 0.05,\n    x,\n    y - halfSide\n  )\n\n  return [x - halfSide - 2, y - halfSide - 2, side + 4, side + 4]\n}\n\nexport const heartPath: CaptchaHollowProcess = ({ ctx, x, y, width, height }) => {\n  const side = Math.min(width, height) * 0.25\n  const halfSide = side * 0.5\n\n  ctx.moveTo(x, y - side * 0.25)\n  ctx.bezierCurveTo(\n    x,\n    y - side * 0.4,\n    x - side * 0.1,\n    y - halfSide,\n    x - halfSide * 0.5,\n    y - halfSide\n  )\n  ctx.bezierCurveTo(\n    x - halfSide * 0.5 - side * 0.1,\n    y - halfSide,\n    x - halfSide,\n    y - side * 0.4,\n    x - halfSide,\n    y - side * 0.2\n  )\n  ctx.bezierCurveTo(\n    x - halfSide,\n    y + side * 0.2,\n    x - side * 0.05,\n    y + halfSide * 0.8,\n    x,\n    y + halfSide * 0.8\n  )\n  ctx.bezierCurveTo(\n    x + side * 0.05,\n    y + halfSide * 0.8,\n    x + halfSide,\n    y + side * 0.2,\n    x + halfSide,\n    y - side * 0.2\n  )\n  ctx.bezierCurveTo(\n    x + halfSide,\n    y - side * 0.4,\n    x + halfSide * 0.5 + side * 0.1,\n    y - halfSide,\n    x + halfSide * 0.5,\n    y - halfSide\n  )\n  ctx.bezierCurveTo(x + side * 0.1, y - halfSide, x, y - side * 0.4, x, y - side * 0.25)\n\n  return [x - halfSide - 2, y - halfSide - 2, side + 4, side * 0.9 + 4]\n}\n", "import { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { Spin } from '@/components/spin'\nimport { Tooltip } from '@/components/tooltip'\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  Transition,\n  TransitionGroup,\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  reactive,\n  ref,\n  renderSlot,\n  shallowRef,\n  toRef,\n  watch\n} from 'vue'\n\nimport CaptchaSlider from './captcha-slider.vue'\nimport {\n  createIconProp,\n  createSizeProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { createSlotRender, useSetTimeout } from '@vexip-ui/hooks'\nimport {\n  ensureArray,\n  isClient,\n  isNull,\n  nextFrameOnce,\n  random,\n  randomHardColor\n} from '@vexip-ui/utils'\nimport { captchaProps } from './props'\nimport { heartPath, puzzlePath, shieldPath, squarePath } from './hollow-paths'\n\nimport type { CaptchaSliderExposed } from '@/components/captcha-slider'\nimport type { SuccessEvent } from './symbol'\n\nexport default defineComponent({\n  name: 'Captcha',\n  props: captchaProps,\n  emits: ['update:visible'],\n  setup(_props, { slots, expose }) {\n    const { idFor, disabled, loading, validateField, setFieldValue } = useFieldStore<\n      number | number[]\n    >(focus)\n\n    const props = useProps('captcha', _props, {\n      type: 'slide',\n      slideTarget: {\n        default: null,\n        validator: value => {\n          if (isNull(value)) return true\n\n          if (Array.isArray(value)) {\n            return value[0] >= 0 && value[0] <= 100 && value[1] >= 0 && value[1] <= 100\n          } else {\n            return value >= 0 && value <= 100\n          }\n        }\n      },\n      title: null,\n      tip: null,\n      successTip: null,\n      failTip: null,\n      image: null,\n      tolerance: {\n        default: 1,\n        validator: value => value >= 0\n      },\n      canvasSize: () => [1000, 600],\n      refreshIcon: createIconProp(),\n      disabled: () => disabled.value,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingEffect: null,\n      onBeforeTest: {\n        default: null,\n        isFunc: true\n      },\n      texts: {\n        default: () => [],\n        validator: value => !value.find(text => text.length > 1)\n      },\n      failLimit: 0,\n      remotePoint: false,\n      useTrigger: false,\n      triggerSize: createSizeProp(),\n      triggerText: null,\n      transfer: false,\n      hideDelay: {\n        default: 3000,\n        validator: value => value >= 0\n      },\n      hollowShape: {\n        default: squarePath,\n        isFunc: true\n      }\n    })\n\n    const nh = useNameHelper('captcha')\n    const locale = useLocale('captcha')\n    const icons = useIcons()\n\n    const { timer } = useSetTimeout()\n\n    const currentTarget = ref(parseTarget(props.slideTarget))\n    const dragging = ref(false)\n    const pointers = reactive<number[][]>([])\n    const testLoading = ref(false)\n    const success = ref(false)\n    const failed = ref(false)\n    const failedCount = ref(0)\n    const visible = ref(false)\n\n    const wrapper = ref<HTMLElement>()\n    const canvas = ref<HTMLCanvasElement>()\n    const subCanvas = ref<HTMLCanvasElement>()\n    const slider = ref<CaptchaSliderExposed>()\n\n    const track = computed(() => slider.value?.track)\n\n    const isSuccess = computed(() => !!slider.value?.isSuccess || success.value)\n    const currentLeft = computed(() => slider.value?.currentLeft || 0)\n    const resetting = computed(() => slider.value?.resetting)\n\n    const usedTarget = computed(() => currentTarget.value[0])\n\n    const imageLoading = ref(false)\n    const imagePromise = shallowRef(Promise.resolve())\n\n    const pointerTargets: number[][] = []\n\n    const fontRate = 0.108\n\n    let imageLoaded = false\n    let image: HTMLImageElement | undefined\n    let memoryCanvas: HTMLCanvasElement | undefined\n\n    const isLoading = computed(() => props.loading || imageLoading.value || testLoading.value)\n    const failLocked = computed(() => props.failLimit > 0 && failedCount.value >= props.failLimit)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(props.type),\n        {\n          [nh.bm('success')]: isSuccess.value,\n          [nh.bm('fail')]: !isSuccess.value && failed.value,\n          [nh.bm('dragging')]: dragging.value,\n          [nh.bm('disabled')]: props.disabled,\n          [nh.bm('loading')]: isLoading.value,\n          [nh.bm('fail-locked')]: failLocked.value\n        }\n      ]\n    })\n    const subCanvasStyle = computed(() => {\n      return {\n        left: `${currentLeft.value}%`,\n        [nh.cv('trigger-transition')]: resetting.value ? 'left 250ms ease' : undefined\n      }\n    })\n    const canvasSize = computed(() => {\n      return [props.canvasSize[0] || 1000, props.canvasSize[1] || 600]\n    })\n    const actionLocked = computed(() => props.disabled || isSuccess.value || isLoading.value)\n\n    watch(\n      () => props.slideTarget,\n      value => {\n        currentTarget.value = parseTarget(value)\n      }\n    )\n    watch([() => props.image, wrapper], async () => {\n      image = undefined\n      await (imagePromise.value = loadImage())\n      drawImageNextFrame()\n    })\n    watch(\n      [\n        currentTarget,\n        () => props.canvasSize[0],\n        () => props.canvasSize[1],\n        () => props.hollowShape\n      ],\n      drawImageNextFrame\n    )\n    watch(\n      [() => props.type, () => props.remotePoint],\n      () => {\n        if (\n          props.type !== 'slide' &&\n          props.remotePoint &&\n          typeof props.onBeforeTest !== 'function'\n        ) {\n          console.warn(\n            \"[vexip-ui:Captcha] You should specify 'on-before-test' prop to valid the captcha \" +\n              \"if you are using the 'point' type in remote\"\n          )\n        }\n      },\n      { immediate: true }\n    )\n    watch(\n      [() => props.type, () => props.texts, () => props.texts.length, () => props.remotePoint],\n      () => {\n        if (props.type === 'point' && props.texts.length && !props.remotePoint && image) {\n          drawImageNextFrame()\n        }\n      }\n    )\n    watch(visible, async value => {\n      if (value) {\n        await (imagePromise.value = loadImage())\n        drawImageNextFrame()\n      }\n    })\n    watch(isSuccess, value => {\n      if (value && props.useTrigger && visible.value) {\n        clearTimeout(timer.hideTrigger)\n\n        timer.hideTrigger = setTimeout(() => {\n          visible.value = false\n        }, props.hideDelay)\n      }\n    })\n\n    onMounted(async () => {\n      await (imagePromise.value = loadImage())\n      drawImage()\n    })\n\n    expose({\n      dragging,\n      resetting,\n      isSuccess,\n      imageLoading,\n      imagePromise,\n      wrapper,\n      canvas,\n      subCanvas,\n      slider,\n      reset\n    })\n\n    // 避免多次触发时发生竞态问题\n    let loadFlag: string\n\n    async function loadImage() {\n      if (image) return\n\n      imageLoading.value = true\n      loadFlag = `${Date.now()}${Math.round(Math.random() * 10e6)}`\n\n      const flag = loadFlag\n      const src = typeof props.image === 'function' ? await props.image() : props.image\n\n      await new Promise<void>(resolve => {\n        if (!isClient || flag !== loadFlag || !src) {\n          resolve()\n          return\n        }\n\n        image = new Image()\n        imageLoaded = false\n        image.src = src\n\n        if (src.trim().startsWith('data:image')) {\n          imageLoaded = true\n          resolve()\n        } else {\n          image.onload = () => {\n            imageLoaded = true\n            resolve()\n          }\n        }\n      }).finally(() => {\n        imageLoading.value = false\n      })\n    }\n\n    function drawImageWithTexts() {\n      const canvasEl = canvas.value\n      const ctx = canvasEl?.getContext?.('2d')\n\n      if (!image || !canvasEl || !ctx) return\n\n      const { width, height } = canvasEl\n\n      ctx.drawImage(image, 0, 0, width, height)\n\n      if (!props.texts.length || props.remotePoint) return\n\n      pointerTargets.length = 0\n\n      const fontSize = Math.max(width, height) * fontRate\n\n      ctx.textBaseline = 'middle'\n      ctx.textAlign = 'center'\n      ctx.font = `bold ${fontSize}px sans-serif`\n      ctx.lineWidth = 2\n      ctx.strokeStyle = '#fff'\n\n      const drawText = (\n        text: string,\n        x: number,\n        y: number,\n        radian = 0,\n        color = randomHardColor()\n      ) => {\n        ctx.save()\n        ctx.translate(x, y)\n        radian && ctx.rotate(radian * Math.PI)\n        ctx.fillStyle = color\n        ctx.fillText(text, 0, 0)\n        ctx.strokeText(text, 0, 0)\n        ctx.restore()\n      }\n\n      const metrics = ctx.measureText(props.texts[0])\n      const xLimit = Math.max(fontSize, metrics.width) * 1.2\n      const yLimit =\n        Math.max(fontSize, metrics.fontBoundingBoxAscent + metrics.fontBoundingBoxDescent) * 1.2\n\n      let prevX = -2 * fontSize\n      let prevY = -2 * fontSize\n\n      for (const text of props.texts) {\n        let x = prevX\n        let y = prevY\n\n        while (Math.abs(x - prevX) < xLimit && Math.abs(y - prevY) < yLimit) {\n          x = width * 0.1 + Math.random() * width * 0.8\n          y = height * 0.1 + Math.random() * height * 0.8\n        }\n\n        prevX = x\n        prevY = y\n\n        pointerTargets.push([(x / width) * 100, (y / height) * 100])\n        drawText(text, x, y, Math.random() * 2)\n      }\n    }\n\n    function getHollowProcess() {\n      if (typeof props.hollowShape === 'function') return props.hollowShape\n\n      switch (props.hollowShape) {\n        case 'puzzle':\n          return puzzlePath\n        case 'shield':\n          return shieldPath\n        case 'heart':\n          return heartPath\n        default:\n          return squarePath\n      }\n    }\n\n    function drawImage() {\n      const canvasEl = canvas.value\n      const ctx = canvasEl?.getContext?.('2d')\n      const subCanvasEl = subCanvas.value\n      const subCtx = subCanvasEl?.getContext?.('2d')\n\n      if (!image || !imageLoaded || !canvasEl || !ctx || !props.image) return\n\n      if (props.type === 'point') {\n        drawImageWithTexts()\n        return\n      }\n\n      if (!subCanvasEl || !subCtx || !track.value) return\n\n      if (!memoryCanvas) {\n        if (!isClient) return\n\n        memoryCanvas = document.createElement('canvas')\n      }\n\n      memoryCanvas.width = canvasEl.width\n      memoryCanvas.height = canvasEl.height\n\n      const pathCtx = memoryCanvas.getContext('2d')\n\n      if (!pathCtx) return\n\n      ctx.clearRect(0, 0, canvasEl.width, canvasEl.height)\n      subCtx.clearRect(0, 0, subCanvasEl.width, subCanvasEl.height)\n      pathCtx.clearRect(0, 0, memoryCanvas.width, memoryCanvas.height)\n\n      const canvasRect = canvasEl.getBoundingClientRect()\n      const trackRect = track.value.getBoundingClientRect()\n      // 滑动时以轨道为准，所以需要补正 canvas 宽度和 track 宽度的差值\n      const widthFix = ((canvasRect.width - trackRect.width) / canvasRect.width) * canvasEl.width\n\n      const targetX = widthFix / 2 + currentTarget.value[0] * (canvasEl.width - widthFix) * 0.01\n      const targetY = currentTarget.value[1] * canvasEl.height * 0.01\n\n      const hollowProcess = getHollowProcess()\n\n      pathCtx.beginPath()\n      pathCtx.strokeStyle = 'rgba(255, 255, 255, 0.5)'\n      pathCtx.lineWidth = 4\n\n      const [clipX, clipY, clipWidth, clipHeight] = hollowProcess({\n        ctx: pathCtx,\n        x: targetX,\n        y: targetY,\n        width: props.canvasSize[0],\n        height: props.canvasSize[1]\n      })\n\n      pathCtx.stroke()\n      pathCtx.clip()\n      pathCtx.drawImage(image, 0, 0, canvasEl.width, canvasEl.height)\n\n      // 中心点偏移修正\n      const xLeftWidth = targetX - clipX\n      const translateFix = ((clipWidth * 0.5 - xLeftWidth) / clipWidth) * 100\n\n      subCanvasEl.style.transform = `translate3d(${translateFix - 50}%, 0, 0)`\n      subCanvasEl.width = clipWidth\n\n      subCtx.drawImage(\n        memoryCanvas,\n        clipX,\n        clipY,\n        clipWidth,\n        clipHeight,\n        0,\n        clipY,\n        clipWidth,\n        clipHeight\n      )\n\n      ctx.save()\n      ctx.beginPath()\n      ctx.fillStyle = 'rgba(255, 255, 255, 0.75)'\n      ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)'\n      ctx.lineWidth = 10\n\n      hollowProcess({\n        ctx,\n        x: targetX,\n        y: targetY,\n        width: props.canvasSize[0],\n        height: props.canvasSize[1]\n      })\n\n      ctx.stroke()\n      ctx.fill()\n      ctx.restore()\n      ctx.globalCompositeOperation = 'destination-over'\n      ctx.drawImage(image, 0, 0, canvasEl.width, canvasEl.height)\n    }\n\n    function drawImageNextFrame() {\n      nextFrameOnce(drawImage)\n    }\n\n    async function reset(newImage?: string | (() => Promise<string>)) {\n      if (newImage) {\n        image = undefined\n        await (imagePromise.value = loadImage())\n        drawImage()\n      }\n\n      success.value = false\n      failed.value = false\n      failedCount.value = 0\n      currentTarget.value = parseTarget()\n      pointers.length = 0\n\n      slider.value?.reset()\n      props.type === 'point' && drawImageWithTexts()\n    }\n\n    function parseTarget(target = props.slideTarget) {\n      if (isNull(target)) return [random(75, 25), random(75, 25)]\n\n      const [targetX = random(75, 25), targetY = random(75, 25)] = ensureArray(target)\n\n      return [targetX, targetY]\n    }\n\n    function focus(options?: FocusOptions) {\n      slider.value?.focus(options)\n    }\n\n    function handleDragStart(percent: number) {\n      dragging.value = true\n      emitEvent(props.onDragStart, percent)\n    }\n\n    function handleDrag(percent: number) {\n      emitEvent(props.onDrag, percent)\n    }\n\n    function handleDragEnd(percent: number) {\n      dragging.value = false\n      emitEvent(props.onDragEnd, percent)\n    }\n\n    function handleSlideSuccess(percent: number) {\n      success.value = true\n      failed.value = false\n\n      emitEvent(props.onSuccess as SuccessEvent, percent)\n      setFieldValue(percent)\n      validateField()\n    }\n\n    function handleSlideFail() {\n      failed.value = true\n      ++failedCount.value\n\n      emitEvent(props.onFail)\n    }\n\n    function handleRefresh() {\n      !actionLocked.value && emitEvent(props.onRefresh)\n    }\n\n    function stopPropagation(event: Event) {\n      event.stopPropagation()\n    }\n\n    async function verifyPointers() {\n      if (isLoading.value) return\n\n      pointers.length = props.texts.length\n\n      let result = props.remotePoint\n      let customResult: unknown\n\n      if (!props.remotePoint && canvas.value) {\n        const { width, height } = canvas.value\n        const fontSize = Math.max(width, height) * fontRate\n        const xTolerance = (fontSize / width) * 50 + props.tolerance\n        const yTolerance = (fontSize / height) * 50 + props.tolerance\n\n        result = true\n\n        for (let i = 0, len = pointers.length; i < len; ++i) {\n          const [x, y] = pointers[i]\n          const [targetX, targetY] = pointerTargets[i]\n\n          if (Math.abs(x - targetX) > xTolerance || Math.abs(y - targetY) > yTolerance) {\n            result = false\n            break\n          }\n        }\n      }\n\n      if (typeof props.onBeforeTest === 'function') {\n        nextTick(() => {\n          testLoading.value = true\n        })\n        customResult = await (props.onBeforeTest as any)(pointers.flat())\n        nextTick(() => {\n          testLoading.value = false\n        })\n      }\n\n      if (!result || customResult === false) {\n        success.value = false\n        pointers.length = 0\n        failed.value = true\n        ++failedCount.value\n\n        emitEvent(props.onFail)\n      } else {\n        success.value = true\n        failed.value = false\n\n        emitEvent(props.onSuccess as SuccessEvent, pointers.flat())\n      }\n    }\n\n    function handleImageClick(event: MouseEvent) {\n      if (props.type !== 'point' || actionLocked.value || !canvas.value) return\n\n      const { clientWidth: canvasWidth, clientHeight: canvasHeight } = canvas.value\n      const { offsetX, offsetY } = event\n\n      pointers.push([(offsetX / canvasWidth) * 100, (offsetY / canvasHeight) * 100])\n\n      if (pointers.length >= props.texts.length) {\n        nextTick(verifyPointers)\n      }\n    }\n\n    function cancelPointer(index: number, event: Event) {\n      event.stopPropagation()\n\n      if (actionLocked.value || index !== pointers.length - 1) return\n\n      pointers.pop()\n    }\n\n    function handleTrigger() {\n      if (!isSuccess.value) {\n        visible.value = true\n      }\n    }\n\n    function renderImage() {\n      return (\n        <div\n          class={[nh.be('image'), actionLocked.value && nh.bem('image', 'locked')]}\n          onClick={handleImageClick}\n        >\n          {props.image && (\n            <div class={nh.be('image-inner')}>\n              <canvas\n                ref={canvas}\n                class={nh.be('canvas')}\n                width={canvasSize.value[0]}\n                height={canvasSize.value[1]}\n              ></canvas>\n              {props.type === 'slide' && (\n                <div class={nh.be('sub-image')}>\n                  <canvas\n                    ref={subCanvas}\n                    class={nh.be('sub-canvas')}\n                    height={canvasSize.value[1]}\n                    style={subCanvasStyle.value}\n                  ></canvas>\n                </div>\n              )}\n            </div>\n          )}\n          {props.type === 'point' && (\n            <TransitionGroup name={nh.ns('fade')} appear>\n              {pointers.map(([x, y], index) => (\n                <span\n                  key={index}\n                  class={nh.be('pointer')}\n                  style={{ top: `${y}%`, left: `${x}%` }}\n                  onClick={cancelPointer.bind(null, index)}\n                >\n                  {index + 1}\n                </span>\n              ))}\n            </TransitionGroup>\n          )}\n          <Transition name={nh.ns('fade')}>\n            {(isSuccess.value || failed.value) && (\n              <div\n                class={[\n                  nh.be('image-tip'),\n                  nh.bem('image-tip', isSuccess.value ? 'success' : 'fail')\n                ]}\n                onClick={stopPropagation}\n              >\n                {isSuccess.value\n                  ? props.successTip ?? locale.value.success\n                  : props.failTip ?? locale.value.fail}\n              </div>\n            )}\n          </Transition>\n        </div>\n      )\n    }\n\n    function renderSlider() {\n      return (\n        <CaptchaSlider\n          ref={slider}\n          class={nh.bem('slider', 'inner')}\n          target={usedTarget.value}\n          tolerance={props.tolerance}\n          loading={isLoading.value}\n          loading-icon={props.loadingIcon}\n          loading-lock\n          loading-effect={props.loadingEffect}\n          disabled={props.disabled || failLocked.value}\n          onBeforeTest={props.onBeforeTest}\n          onSuccess={handleSlideSuccess}\n          onFail={handleSlideFail}\n          onDragStart={handleDragStart}\n          onDrag={handleDrag}\n          onDragEnd={handleDragEnd}\n        >\n          {{\n            tip: () =>\n              renderSlot(slots, 'tip', { success: isSuccess.value }, () => [\n                props.tip ?? locale.value.slide\n              ])\n          }}\n        </CaptchaSlider>\n      )\n    }\n\n    function renderTextList() {\n      return (\n        <div class={nh.be('text-list')}>\n          <div class={nh.be('tip')}>\n            {renderSlot(slots, 'tip', { success: isSuccess.value }, () => [\n              props.tip ?? locale.value.pointInOrder\n            ])}\n          </div>\n          <span>{':'}</span>\n          {renderSlot(slots, 'texts', { texts: toRef(props, 'texts') }, () =>\n            props.texts.map((text, index) => (\n              <span key={index} class={nh.be('text')}>\n                {text}\n              </span>\n            ))\n          )}\n        </div>\n      )\n    }\n\n    function renderFooter() {\n      if (props.type === 'slide') return renderSlider()\n      if (props.type === 'point') return renderTextList()\n\n      return null\n    }\n\n    function renderPanel() {\n      return (\n        <div ref={wrapper} id={idFor.value} class={className.value} tabindex={-1}>\n          <div class={nh.be('header')}>\n            <div class={nh.be('title')}>\n              {renderSlot(slots, 'title', { success: isSuccess.value }, () => [\n                props.title ?? locale.value.doCaptcha\n              ])}\n            </div>\n            <span role={'none'} style={'flex: auto'}></span>\n            <button\n              class={[\n                nh.be('action'),\n                nh.be('refresh'),\n                actionLocked.value && nh.bem('action', 'disabled')\n              ]}\n              onClick={handleRefresh}\n            >\n              {renderSlot(slots, 'refresh', undefined, () => [\n                <Icon\n                  {...icons.value.refresh}\n                  icon={props.refreshIcon || icons.value.refresh.icon}\n                ></Icon>\n              ])}\n            </button>\n          </div>\n          <Spin active={isLoading.value || slider.value?.isLoading} delay={false}>\n            {{\n              default: renderImage,\n              icon: createSlotRender(slots, ['loading-icon', 'loadingIcon'])\n            }}\n          </Spin>\n          {renderFooter()}\n        </div>\n      )\n    }\n\n    function renderTrigger() {\n      return renderSlot(\n        slots,\n        'trigger',\n        { visible: visible.value, success: isSuccess.value },\n        () => [\n          <Button\n            class={[nh.be('button'), isSuccess.value && nh.bem('button', 'success')]}\n            type={isSuccess.value ? 'success' : 'primary'}\n            size={props.triggerSize}\n            block\n            loading={visible.value && !isSuccess.value}\n            icon={isSuccess.value ? icons.value.success.icon : null}\n            onClick={handleTrigger}\n          >\n            {props.triggerText ?? (isSuccess.value ? locale.value.completed : locale.value.trigger)}\n          </Button>\n        ]\n      )\n    }\n\n    return () => {\n      if (props.useTrigger) {\n        return (\n          <Tooltip\n            class={nh.bs('wrapper')}\n            visible={visible.value}\n            trigger={'custom'}\n            raw\n            wrapper\n            transfer={props.transfer}\n          >\n            {{\n              trigger: renderTrigger,\n              default: renderPanel\n            }}\n          </Tooltip>\n        )\n      }\n\n      return renderPanel()\n    }\n  }\n})\n", "import { buildProps, styleProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { CardShadowType } from './symbol'\n\nexport const cardProps = buildProps({\n  title: String,\n  shadow: String as PropType<CardShadowType>,\n  contentStyle: styleProp\n})\n\nexport type CardProps = ExtractPropTypes<typeof cardProps>\nexport type CardCProps = ConfigurableProps<CardProps>\n", "<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { cardProps } from './props'\n\nimport type { CardShadowType } from './symbol'\n\ndefineOptions({ name: 'Card' })\n\nconst _props = defineProps(cardProps)\nconst props = useProps('card', _props, {\n  title: '',\n  shadow: {\n    default: 'always' as CardShadowType,\n    validator: (value: CardShadowType) => ['always', 'hover', 'never'].includes(value)\n  },\n  contentStyle: () => ({})\n})\n\nconst slots = defineSlots<{\n  default: () => any,\n  header: () => any,\n  title: () => any,\n  extra: () => any\n}>()\n\nconst nh = useNameHelper('card')\n\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.bm(`shadow-${props.shadow}`),\n    {\n      [nh.bm('inherit')]: props.inherit\n    }\n  ]\n})\nconst hasTitle = computed(() => !!slots.title || props.title)\nconst hasExtra = computed(() => !!slots.extra)\nconst hasHeader = computed(() => !!slots.header || hasTitle.value || hasExtra.value)\n</script>\n\n<template>\n  <article :class=\"className\">\n    <div v-if=\"hasHeader\" :class=\"nh.be('header')\">\n      <slot name=\"header\">\n        <div v-if=\"hasTitle\" :class=\"nh.be('title')\">\n          <slot name=\"title\">\n            {{ props.title }}\n          </slot>\n        </div>\n        <div v-if=\"hasExtra\" :class=\"nh.be('extra')\">\n          <slot name=\"extra\"></slot>\n        </div>\n      </slot>\n    </div>\n    <div :class=\"nh.be('content')\" :style=\"props.contentStyle\">\n      <slot></slot>\n    </div>\n  </article>\n</template>\n", "import { booleanNumberProp, booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { CarouselArrowTrigger, CarouselArrowType, CarouselPointerType } from './symbol'\n\nexport const carouselProps = buildProps({\n  active: Number,\n  viewSize: Number,\n  vertical: booleanProp,\n  disabled: booleanProp,\n  loop: booleanProp,\n  arrow: String as PropType<CarouselArrowType>,\n  arrowTrigger: String as PropType<CarouselArrowTrigger>,\n  autoplay: booleanNumberProp,\n  pointer: String as PropType<CarouselPointerType>,\n  speed: Number,\n  activeOffset: Number,\n  height: [Number, String],\n  ignoreHover: booleanProp,\n  onChange: eventProp<(active: number) => void>(),\n  onPrev: eventProp<(active: number) => void>(),\n  onNext: eventProp<(active: number) => void>(),\n  onSelect: eventProp<(active: number) => void>()\n})\n\nexport type CarouselProps = ExtractPropTypes<typeof carouselProps>\nexport type CarouselCProps = ConfigurableProps<CarouselProps>\n", "import type { InjectionKey } from 'vue'\n\nexport type CarouselArrowType = 'outside' | 'inside' | 'none'\nexport type CarouselArrowTrigger = 'hover' | 'always'\nexport type CarouselPointerType = 'outside' | 'inside' | 'none'\n\nexport interface ItemState {\n  label: number,\n  width: number,\n  height: number,\n  offset: number\n}\n\nexport interface CarouselState {\n  vertical: boolean,\n  increaseItem: (item: ItemState) => void,\n  decreaseItem: (item: ItemState) => void,\n  isItemActive: (label: number) => boolean,\n  handleSelect: (label: number) => void\n}\n\nexport const CAROUSEL_STATE: InjectionKey<CarouselState> = Symbol('CAROUSEL_STATE')\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"list\"\n    :style=\"style\"\n  >\n    <div\n      :style=\"{\n        position: 'relative',\n        display: 'flex',\n        flexDirection: props.vertical ? 'column' : 'row',\n        width: '100%'\n      }\"\n    >\n      <div\n        v-if=\"props.arrow !== 'none'\"\n        ref=\"prev\"\n        :class=\"[\n          nh.bem('arrow', props.arrow),\n          nh.bem('arrow', 'prev'),\n          arrowActive ? nh.bem('arrow', 'show') : ''\n        ]\"\n      >\n        <div\n          :class=\"{\n            [nh.be('handler')]: true,\n            [nh.bem('handler', 'disabled')]: disabledPrev\n          }\"\n          @click=\"handlePrevClick\"\n        >\n          <slot name=\"prev-arrow\" :disabled=\"disabledPrev\">\n            <Icon v-bind=\"arrowIcons[0]\" :scale=\"+(arrowIcons[0].scale || 1) * 1.5\"></Icon>\n          </slot>\n        </div>\n      </div>\n      <div :class=\"nh.be('list')\" :style=\"listStyle\">\n        <div :class=\"nh.be('track')\" :style=\"trackStyle\" @transitionend.self=\"handleAfterMove\">\n          <slot></slot>\n        </div>\n      </div>\n      <div\n        v-if=\"props.arrow !== 'none'\"\n        ref=\"next\"\n        :class=\"[\n          nh.bem('arrow', props.arrow),\n          nh.bem('arrow', 'next'),\n          arrowActive ? nh.bem('arrow', 'show') : ''\n        ]\"\n      >\n        <div\n          :class=\"{\n            [nh.be('handler')]: true,\n            [nh.bem('handler', 'disabled')]: disabledNext\n          }\"\n          @click=\"handleNextClick\"\n        >\n          <slot name=\"next-arrow\" :disabled=\"disabledNext\">\n            <Icon v-bind=\"arrowIcons[1]\" :scale=\"+(arrowIcons[1].scale || 1) * 1.5\"></Icon>\n          </slot>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"props.pointer !== 'none'\" :class=\"nh.bem('pointers', props.pointer)\">\n      <div\n        v-for=\"index in itemStates.size\"\n        :key=\"index\"\n        :class=\"{\n          [nh.be('pointer')]: true,\n          [nh.bem('pointer', 'active')]:\n            index - 1 === (currentActive + props.activeOffset) % itemStates.size,\n          [nh.bem('pointer', 'disabled')]: isPointerDisabled(index - props.activeOffset - 1)\n        }\"\n        @click=\"handleWheel(index - props.activeOffset - 1)\"\n      >\n        <slot\n          name=\"pointer\"\n          :active=\"index - 1 === (currentActive + props.activeOffset) % itemStates.size\"\n        >\n          <span :class=\"nh.be('pointer-inner')\"></span>\n        </slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport {\n  computed,\n  defineComponent,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useHoverDelay, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useHover, useRtl, useSetTimeout } from '@vexip-ui/hooks'\nimport { debounceMinor } from '@vexip-ui/utils'\nimport { carouselProps } from './props'\nimport { CAROUSEL_STATE } from './symbol'\n\nimport type { CarouselState, ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'Carousel',\n  components: {\n    Icon\n  },\n  props: carouselProps,\n  emits: ['update:active'],\n  setup(_props, { emit }) {\n    const props = useProps('carousel', _props, {\n      active: {\n        default: 0,\n        static: true\n      },\n      viewSize: {\n        default: 3,\n        validator: value => value > 0\n      },\n      vertical: false,\n      disabled: false,\n      loop: false,\n      arrow: {\n        default: 'outside',\n        validator: value => ['outside', 'inside', 'none'].includes(value)\n      },\n      arrowTrigger: {\n        default: 'hover',\n        validator: value => ['hover', 'always'].includes(value)\n      },\n      autoplay: {\n        default: false,\n        validator: value => (typeof value === 'number' ? value > 500 : true)\n      },\n      pointer: {\n        default: 'none',\n        validator: value => ['outside', 'inside', 'none'].includes(value)\n      },\n      speed: 300,\n      activeOffset: 0,\n      height: null,\n      ignoreHover: false\n    })\n\n    const nh = useNameHelper('carousel')\n    const icons = useIcons()\n    const hoverDelay = useHoverDelay()\n    const { isRtl } = useRtl()\n    const itemStates = ref(new Set<ItemState>())\n    const currentActive = ref(0)\n    const isLocked = ref(false) // 用于控制阻断快速连点\n    const arrowActive = ref(props.arrowTrigger === 'always')\n\n    const listRect = reactive({\n      width: 0,\n      height: 0\n    })\n    const trackRect = reactive({\n      width: 0,\n      height: 0,\n      offset: 0\n    })\n    const itemRect = reactive({\n      width: 0,\n      height: 0\n    })\n\n    const { wrapper, isHover } = useHover()\n\n    const prev = ref<HTMLElement>()\n    const next = ref<HTMLElement>()\n\n    const isDisabled = computed(() => {\n      return props.disabled || itemStates.value.size <= props.viewSize\n    })\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('vertical')]: props.vertical,\n        [nh.bm('disabled')]: isDisabled.value\n      }\n    })\n    const style = computed(() => {\n      return {\n        height:\n          props.vertical && props.height\n            ? `${props.height}${typeof props.height === 'number' ? 'px' : ''}`\n            : undefined\n      }\n    })\n    const listStyle = computed(() => {\n      return {\n        width: listRect.width ? `${listRect.width}px` : undefined,\n        height: listRect.height ? `${listRect.height}px` : undefined\n      }\n    })\n    const trackStyle = computed(() => {\n      return {\n        width: trackRect.width ? `${trackRect.width}px` : undefined,\n        height: trackRect.height ? `${trackRect.height}px` : undefined,\n        transform: trackRect.offset\n          ? `translate${props.vertical ? 'Y' : 'X'}(${\n              isRtl.value && !props.vertical ? `${-trackRect.offset}` : trackRect.offset\n            }px) translateZ(0)`\n          : undefined,\n        transitionDuration: isLocked.value ? '0ms' : `${props.speed}ms`\n      }\n    })\n    const disabledPrev = computed(() => {\n      return isDisabled.value || (!props.loop && currentActive.value <= 0)\n    })\n    const disabledNext = computed(() => {\n      return (\n        isDisabled.value ||\n        (!props.loop && currentActive.value >= itemStates.value.size - props.viewSize)\n      )\n    })\n    const arrowIcons = computed(() => {\n      return props.vertical\n        ? [icons.value.angleUp, icons.value.angleDown]\n        : isRtl.value\n          ? [icons.value.angleRight, icons.value.angleLeft]\n          : [icons.value.angleLeft, icons.value.angleRight]\n    })\n\n    watch(\n      () => props.active,\n      value => {\n        handleWheel(value - props.activeOffset)\n      }\n    )\n    watch(isHover, value => {\n      if (props.ignoreHover) return\n\n      if (value) {\n        handleMouseEnter()\n      } else {\n        handleMouseLeave()\n      }\n    })\n    watch(() => props.viewSize, refresh)\n    watch(() => props.autoplay, setAutoplay)\n\n    const refreshLabels = debounceMinor(() => {\n      Array.from(itemStates.value).forEach((item, index) => {\n        item.label = index\n      })\n    })\n    const updateItemRect = debounceMinor(() => {\n      itemStates.value.forEach(state => {\n        state.width = itemRect.width\n        state.height = itemRect.height\n      })\n    })\n    const updateListRect = debounceMinor(() => {\n      trackRect.width = itemRect.width * itemStates.value.size\n      trackRect.height = itemRect.height * itemStates.value.size\n    })\n\n    provide<CarouselState>(\n      CAROUSEL_STATE,\n      reactive({\n        vertical: toRef(props, 'vertical'),\n        increaseItem,\n        decreaseItem,\n        isItemActive,\n        handleSelect\n      })\n    )\n\n    // 初始化时不使用过渡效果\n    let inTransition = false\n    let shouldReset = false\n\n    isLocked.value = true\n\n    let observer: MutationObserver | null\n\n    onMounted(() => {\n      computeItemRect()\n      handleWheel(props.active - props.activeOffset)\n      handleAfterMove()\n\n      setTimeout(() => {\n        isLocked.value = false\n        inTransition = false\n\n        setAutoplay()\n      }, 0)\n\n      window.addEventListener('resize', refresh)\n\n      if (wrapper.value) {\n        observer = new MutationObserver(() => {\n          refresh()\n        })\n\n        observer.observe(wrapper.value, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          attributeFilter: ['style']\n        })\n      }\n    })\n\n    onBeforeUnmount(() => {\n      observer?.disconnect()\n      observer = null\n      window.removeEventListener('resize', refresh)\n    })\n\n    function increaseItem(item: ItemState) {\n      itemStates.value.add(item)\n      refreshLabels()\n      updateItemRect()\n      updateListRect()\n    }\n\n    function decreaseItem(item: ItemState) {\n      itemStates.value.delete(item)\n      refreshLabels()\n      updateListRect()\n    }\n\n    function isItemActive(label: number) {\n      return (currentActive.value + props.activeOffset) % itemStates.value.size === label\n    }\n\n    function computeItemRect() {\n      if (!wrapper.value) return\n\n      let prevFix = 0\n      let nextFix = 0\n\n      if (props.arrow === 'outside') {\n        if (props.vertical) {\n          prevFix = prev.value ? prev.value.offsetHeight : 0\n          nextFix = next.value ? next.value.offsetHeight : 0\n        } else {\n          prevFix = prev.value ? prev.value.offsetWidth : 0\n          nextFix = next.value ? next.value.offsetWidth : 0\n        }\n      }\n\n      if (props.vertical) {\n        listRect.width = 0\n        listRect.height = wrapper.value.offsetHeight - prevFix - nextFix\n\n        itemRect.width = 0\n        itemRect.height = listRect.height / props.viewSize\n      } else {\n        listRect.width = wrapper.value.offsetWidth - prevFix - nextFix\n        listRect.height = 0\n\n        itemRect.width = listRect.width / props.viewSize\n        itemRect.height = 0\n      }\n    }\n\n    function refresh() {\n      computeItemRect()\n      updateItemRect()\n      updateListRect()\n\n      if (trackRect.offset > 0) {\n        handlePrev(0)\n      } else {\n        handleNext(0)\n      }\n\n      setTimeout(() => {\n        isLocked.value = false\n        inTransition = false\n      }, 0)\n    }\n\n    function emitChangeEvent() {\n      const active = (currentActive.value + props.activeOffset) % itemStates.value.size\n\n      emit('update:active', active)\n      emitEvent(props.onChange, active)\n    }\n\n    function handlePrev(amount = 1) {\n      if (isDisabled.value || inTransition) return\n\n      const itemLength = props.vertical ? itemRect.height : itemRect.width\n      const itemList = Array.from(itemStates.value)\n      const itemCount = itemList.length\n      const targetIndex = (currentActive.value - amount + itemCount) % itemCount\n      const prevActive = currentActive.value\n\n      if (targetIndex >= itemCount - props.viewSize) {\n        if (!props.loop) return\n\n        if (trackRect.offset < 0) {\n          if (amount < currentActive.value) {\n            trackRect.offset = -targetIndex * itemLength\n          } else {\n            trackRect.offset = itemLength * (itemCount - targetIndex)\n\n            for (let i = targetIndex; i < itemCount; ++i) {\n              itemList[i].offset = -itemCount * itemLength\n            }\n          }\n        } else {\n          for (let i = 0; i < itemCount; ++i) {\n            itemList[i].offset =\n              i < targetIndex\n                ? 0\n                : (isRtl.value && !props.vertical ? itemCount : -itemCount) * itemLength\n          }\n\n          trackRect.offset = itemLength * (itemCount - targetIndex)\n        }\n\n        currentActive.value = targetIndex\n      } else {\n        currentActive.value = targetIndex\n        trackRect.offset = -currentActive.value * itemLength\n      }\n\n      shouldReset = currentActive.value <= itemCount - props.viewSize\n      inTransition = true\n\n      currentActive.value !== prevActive && emitChangeEvent()\n    }\n\n    function handleNext(amount = 1) {\n      if (isDisabled.value || inTransition) return\n\n      const itemLength = props.vertical ? itemRect.height : itemRect.width\n      const itemList = Array.from(itemStates.value)\n      const itemCount = itemList.length\n      const targetIndex = currentActive.value + amount\n      const prevActive = currentActive.value\n\n      if (targetIndex > itemStates.value.size - props.viewSize) {\n        if (!props.loop) return\n\n        if (trackRect.offset > 0) {\n          trackRect.offset = itemLength * (itemCount - targetIndex)\n        } else {\n          const anchorIndex = targetIndex + props.viewSize - itemCount\n\n          for (let i = 0, len = itemList.length; i < len; ++i) {\n            itemList[i].offset =\n              i < anchorIndex\n                ? (isRtl.value && !props.vertical ? -itemCount : itemCount) * itemLength\n                : 0\n          }\n\n          trackRect.offset = -targetIndex * itemLength\n        }\n\n        currentActive.value = targetIndex % itemCount\n      } else {\n        currentActive.value = targetIndex\n        trackRect.offset = -currentActive.value * itemLength\n      }\n\n      shouldReset = currentActive.value <= itemCount - props.viewSize\n      inTransition = true\n\n      currentActive.value !== prevActive && emitChangeEvent()\n    }\n\n    function handleWheel(active: number) {\n      if (isDisabled.value || inTransition || active === currentActive.value) return\n\n      const itemCount = itemStates.value.size\n\n      active = (active % itemCount) + (active < 0 ? itemCount : 0)\n\n      if (props.loop) {\n        let forward: number\n        let back: number\n\n        if (active > currentActive.value) {\n          forward = active - currentActive.value\n          back = itemCount - active + currentActive.value\n        } else {\n          forward = itemCount - currentActive.value + active\n          back = currentActive.value - active\n        }\n\n        if (forward < back) {\n          handleNext(forward)\n        } else if (forward > back) {\n          handlePrev(back)\n        } else {\n          if (trackRect.offset > 0) {\n            handlePrev(forward)\n          } else {\n            handleNext(forward)\n          }\n        }\n      } else {\n        if (active < currentActive.value) {\n          handlePrev(currentActive.value - active)\n        } else {\n          handleNext(active - currentActive.value)\n        }\n      }\n    }\n\n    function handleAfterMove() {\n      if (!shouldReset) {\n        inTransition = false\n      } else {\n        itemStates.value.forEach(state => {\n          state.offset = 0\n        })\n\n        shouldReset = false\n        isLocked.value = true\n\n        requestAnimationFrame(() => {\n          trackRect.offset =\n            -currentActive.value * (props.vertical ? itemRect.height : itemRect.width)\n\n          requestAnimationFrame(() => {\n            isLocked.value = false\n            inTransition = false\n          })\n        })\n      }\n    }\n\n    function handlePrevClick() {\n      handlePrev(1)\n      emitEvent(props.onPrev, (currentActive.value + props.activeOffset) % itemStates.value.size)\n    }\n\n    function handleNextClick() {\n      handleNext(1)\n      emitEvent(props.onNext, (currentActive.value + props.activeOffset) % itemStates.value.size)\n    }\n\n    function handleSelect(label: number) {\n      emitEvent(props.onSelect, label)\n    }\n\n    const { timer } = useSetTimeout()\n\n    function setAutoplay() {\n      clearInterval(timer.play)\n\n      if (!props.autoplay) return\n\n      let waiting = 4000\n\n      if (typeof props.autoplay === 'number') {\n        waiting = props.autoplay\n      }\n\n      timer.play = window.setInterval(() => {\n        if (!props.loop && disabledNext.value) {\n          handleWheel(0)\n        } else {\n          handleNext()\n        }\n      }, waiting)\n    }\n\n    function handleMouseEnter() {\n      if (props.autoplay) {\n        clearTimeout(timer.hover)\n\n        timer.hover = setTimeout(() => {\n          clearInterval(timer.play)\n        }, hoverDelay.value)\n      }\n\n      if (props.arrowTrigger === 'hover' && props.arrow === 'inside') {\n        arrowActive.value = true\n      }\n    }\n\n    function handleMouseLeave() {\n      if (props.autoplay) {\n        clearTimeout(timer.hover)\n\n        timer.hover = setTimeout(() => {\n          setAutoplay()\n        }, hoverDelay.value)\n      }\n\n      if (props.arrowTrigger === 'hover') {\n        arrowActive.value = false\n      }\n    }\n\n    function isPointerDisabled(index: number) {\n      if (props.loop) return false\n\n      return !(\n        index >= props.activeOffset - 1 && index < itemStates.value.size - props.activeOffset - 1\n      )\n    }\n\n    return {\n      props,\n      nh,\n      itemStates,\n      currentActive,\n      arrowActive,\n\n      className,\n      style,\n      listStyle,\n      trackStyle,\n      disabledPrev,\n      disabledNext,\n      arrowIcons,\n\n      wrapper,\n      prev,\n      next,\n\n      handlePrevClick,\n      handleNextClick,\n      handleWheel,\n      handleAfterMove,\n      isPointerDisabled,\n\n      refresh\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"list\"\n    :style=\"style\"\n  >\n    <div\n      :style=\"{\n        position: 'relative',\n        display: 'flex',\n        flexDirection: props.vertical ? 'column' : 'row',\n        width: '100%'\n      }\"\n    >\n      <div\n        v-if=\"props.arrow !== 'none'\"\n        ref=\"prev\"\n        :class=\"[\n          nh.bem('arrow', props.arrow),\n          nh.bem('arrow', 'prev'),\n          arrowActive ? nh.bem('arrow', 'show') : ''\n        ]\"\n      >\n        <div\n          :class=\"{\n            [nh.be('handler')]: true,\n            [nh.bem('handler', 'disabled')]: disabledPrev\n          }\"\n          @click=\"handlePrevClick\"\n        >\n          <slot name=\"prev-arrow\" :disabled=\"disabledPrev\">\n            <Icon v-bind=\"arrowIcons[0]\" :scale=\"+(arrowIcons[0].scale || 1) * 1.5\"></Icon>\n          </slot>\n        </div>\n      </div>\n      <div :class=\"nh.be('list')\" :style=\"listStyle\">\n        <div :class=\"nh.be('track')\" :style=\"trackStyle\" @transitionend.self=\"handleAfterMove\">\n          <slot></slot>\n        </div>\n      </div>\n      <div\n        v-if=\"props.arrow !== 'none'\"\n        ref=\"next\"\n        :class=\"[\n          nh.bem('arrow', props.arrow),\n          nh.bem('arrow', 'next'),\n          arrowActive ? nh.bem('arrow', 'show') : ''\n        ]\"\n      >\n        <div\n          :class=\"{\n            [nh.be('handler')]: true,\n            [nh.bem('handler', 'disabled')]: disabledNext\n          }\"\n          @click=\"handleNextClick\"\n        >\n          <slot name=\"next-arrow\" :disabled=\"disabledNext\">\n            <Icon v-bind=\"arrowIcons[1]\" :scale=\"+(arrowIcons[1].scale || 1) * 1.5\"></Icon>\n          </slot>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"props.pointer !== 'none'\" :class=\"nh.bem('pointers', props.pointer)\">\n      <div\n        v-for=\"index in itemStates.size\"\n        :key=\"index\"\n        :class=\"{\n          [nh.be('pointer')]: true,\n          [nh.bem('pointer', 'active')]:\n            index - 1 === (currentActive + props.activeOffset) % itemStates.size,\n          [nh.bem('pointer', 'disabled')]: isPointerDisabled(index - props.activeOffset - 1)\n        }\"\n        @click=\"handleWheel(index - props.activeOffset - 1)\"\n      >\n        <slot\n          name=\"pointer\"\n          :active=\"index - 1 === (currentActive + props.activeOffset) % itemStates.size\"\n        >\n          <span :class=\"nh.be('pointer-inner')\"></span>\n        </slot>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport {\n  computed,\n  defineComponent,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useHoverDelay, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useHover, useRtl, useSetTimeout } from '@vexip-ui/hooks'\nimport { debounceMinor } from '@vexip-ui/utils'\nimport { carouselProps } from './props'\nimport { CAROUSEL_STATE } from './symbol'\n\nimport type { CarouselState, ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'Carousel',\n  components: {\n    Icon\n  },\n  props: carouselProps,\n  emits: ['update:active'],\n  setup(_props, { emit }) {\n    const props = useProps('carousel', _props, {\n      active: {\n        default: 0,\n        static: true\n      },\n      viewSize: {\n        default: 3,\n        validator: value => value > 0\n      },\n      vertical: false,\n      disabled: false,\n      loop: false,\n      arrow: {\n        default: 'outside',\n        validator: value => ['outside', 'inside', 'none'].includes(value)\n      },\n      arrowTrigger: {\n        default: 'hover',\n        validator: value => ['hover', 'always'].includes(value)\n      },\n      autoplay: {\n        default: false,\n        validator: value => (typeof value === 'number' ? value > 500 : true)\n      },\n      pointer: {\n        default: 'none',\n        validator: value => ['outside', 'inside', 'none'].includes(value)\n      },\n      speed: 300,\n      activeOffset: 0,\n      height: null,\n      ignoreHover: false\n    })\n\n    const nh = useNameHelper('carousel')\n    const icons = useIcons()\n    const hoverDelay = useHoverDelay()\n    const { isRtl } = useRtl()\n    const itemStates = ref(new Set<ItemState>())\n    const currentActive = ref(0)\n    const isLocked = ref(false) // 用于控制阻断快速连点\n    const arrowActive = ref(props.arrowTrigger === 'always')\n\n    const listRect = reactive({\n      width: 0,\n      height: 0\n    })\n    const trackRect = reactive({\n      width: 0,\n      height: 0,\n      offset: 0\n    })\n    const itemRect = reactive({\n      width: 0,\n      height: 0\n    })\n\n    const { wrapper, isHover } = useHover()\n\n    const prev = ref<HTMLElement>()\n    const next = ref<HTMLElement>()\n\n    const isDisabled = computed(() => {\n      return props.disabled || itemStates.value.size <= props.viewSize\n    })\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('vertical')]: props.vertical,\n        [nh.bm('disabled')]: isDisabled.value\n      }\n    })\n    const style = computed(() => {\n      return {\n        height:\n          props.vertical && props.height\n            ? `${props.height}${typeof props.height === 'number' ? 'px' : ''}`\n            : undefined\n      }\n    })\n    const listStyle = computed(() => {\n      return {\n        width: listRect.width ? `${listRect.width}px` : undefined,\n        height: listRect.height ? `${listRect.height}px` : undefined\n      }\n    })\n    const trackStyle = computed(() => {\n      return {\n        width: trackRect.width ? `${trackRect.width}px` : undefined,\n        height: trackRect.height ? `${trackRect.height}px` : undefined,\n        transform: trackRect.offset\n          ? `translate${props.vertical ? 'Y' : 'X'}(${\n              isRtl.value && !props.vertical ? `${-trackRect.offset}` : trackRect.offset\n            }px) translateZ(0)`\n          : undefined,\n        transitionDuration: isLocked.value ? '0ms' : `${props.speed}ms`\n      }\n    })\n    const disabledPrev = computed(() => {\n      return isDisabled.value || (!props.loop && currentActive.value <= 0)\n    })\n    const disabledNext = computed(() => {\n      return (\n        isDisabled.value ||\n        (!props.loop && currentActive.value >= itemStates.value.size - props.viewSize)\n      )\n    })\n    const arrowIcons = computed(() => {\n      return props.vertical\n        ? [icons.value.angleUp, icons.value.angleDown]\n        : isRtl.value\n          ? [icons.value.angleRight, icons.value.angleLeft]\n          : [icons.value.angleLeft, icons.value.angleRight]\n    })\n\n    watch(\n      () => props.active,\n      value => {\n        handleWheel(value - props.activeOffset)\n      }\n    )\n    watch(isHover, value => {\n      if (props.ignoreHover) return\n\n      if (value) {\n        handleMouseEnter()\n      } else {\n        handleMouseLeave()\n      }\n    })\n    watch(() => props.viewSize, refresh)\n    watch(() => props.autoplay, setAutoplay)\n\n    const refreshLabels = debounceMinor(() => {\n      Array.from(itemStates.value).forEach((item, index) => {\n        item.label = index\n      })\n    })\n    const updateItemRect = debounceMinor(() => {\n      itemStates.value.forEach(state => {\n        state.width = itemRect.width\n        state.height = itemRect.height\n      })\n    })\n    const updateListRect = debounceMinor(() => {\n      trackRect.width = itemRect.width * itemStates.value.size\n      trackRect.height = itemRect.height * itemStates.value.size\n    })\n\n    provide<CarouselState>(\n      CAROUSEL_STATE,\n      reactive({\n        vertical: toRef(props, 'vertical'),\n        increaseItem,\n        decreaseItem,\n        isItemActive,\n        handleSelect\n      })\n    )\n\n    // 初始化时不使用过渡效果\n    let inTransition = false\n    let shouldReset = false\n\n    isLocked.value = true\n\n    let observer: MutationObserver | null\n\n    onMounted(() => {\n      computeItemRect()\n      handleWheel(props.active - props.activeOffset)\n      handleAfterMove()\n\n      setTimeout(() => {\n        isLocked.value = false\n        inTransition = false\n\n        setAutoplay()\n      }, 0)\n\n      window.addEventListener('resize', refresh)\n\n      if (wrapper.value) {\n        observer = new MutationObserver(() => {\n          refresh()\n        })\n\n        observer.observe(wrapper.value, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          attributeFilter: ['style']\n        })\n      }\n    })\n\n    onBeforeUnmount(() => {\n      observer?.disconnect()\n      observer = null\n      window.removeEventListener('resize', refresh)\n    })\n\n    function increaseItem(item: ItemState) {\n      itemStates.value.add(item)\n      refreshLabels()\n      updateItemRect()\n      updateListRect()\n    }\n\n    function decreaseItem(item: ItemState) {\n      itemStates.value.delete(item)\n      refreshLabels()\n      updateListRect()\n    }\n\n    function isItemActive(label: number) {\n      return (currentActive.value + props.activeOffset) % itemStates.value.size === label\n    }\n\n    function computeItemRect() {\n      if (!wrapper.value) return\n\n      let prevFix = 0\n      let nextFix = 0\n\n      if (props.arrow === 'outside') {\n        if (props.vertical) {\n          prevFix = prev.value ? prev.value.offsetHeight : 0\n          nextFix = next.value ? next.value.offsetHeight : 0\n        } else {\n          prevFix = prev.value ? prev.value.offsetWidth : 0\n          nextFix = next.value ? next.value.offsetWidth : 0\n        }\n      }\n\n      if (props.vertical) {\n        listRect.width = 0\n        listRect.height = wrapper.value.offsetHeight - prevFix - nextFix\n\n        itemRect.width = 0\n        itemRect.height = listRect.height / props.viewSize\n      } else {\n        listRect.width = wrapper.value.offsetWidth - prevFix - nextFix\n        listRect.height = 0\n\n        itemRect.width = listRect.width / props.viewSize\n        itemRect.height = 0\n      }\n    }\n\n    function refresh() {\n      computeItemRect()\n      updateItemRect()\n      updateListRect()\n\n      if (trackRect.offset > 0) {\n        handlePrev(0)\n      } else {\n        handleNext(0)\n      }\n\n      setTimeout(() => {\n        isLocked.value = false\n        inTransition = false\n      }, 0)\n    }\n\n    function emitChangeEvent() {\n      const active = (currentActive.value + props.activeOffset) % itemStates.value.size\n\n      emit('update:active', active)\n      emitEvent(props.onChange, active)\n    }\n\n    function handlePrev(amount = 1) {\n      if (isDisabled.value || inTransition) return\n\n      const itemLength = props.vertical ? itemRect.height : itemRect.width\n      const itemList = Array.from(itemStates.value)\n      const itemCount = itemList.length\n      const targetIndex = (currentActive.value - amount + itemCount) % itemCount\n      const prevActive = currentActive.value\n\n      if (targetIndex >= itemCount - props.viewSize) {\n        if (!props.loop) return\n\n        if (trackRect.offset < 0) {\n          if (amount < currentActive.value) {\n            trackRect.offset = -targetIndex * itemLength\n          } else {\n            trackRect.offset = itemLength * (itemCount - targetIndex)\n\n            for (let i = targetIndex; i < itemCount; ++i) {\n              itemList[i].offset = -itemCount * itemLength\n            }\n          }\n        } else {\n          for (let i = 0; i < itemCount; ++i) {\n            itemList[i].offset =\n              i < targetIndex\n                ? 0\n                : (isRtl.value && !props.vertical ? itemCount : -itemCount) * itemLength\n          }\n\n          trackRect.offset = itemLength * (itemCount - targetIndex)\n        }\n\n        currentActive.value = targetIndex\n      } else {\n        currentActive.value = targetIndex\n        trackRect.offset = -currentActive.value * itemLength\n      }\n\n      shouldReset = currentActive.value <= itemCount - props.viewSize\n      inTransition = true\n\n      currentActive.value !== prevActive && emitChangeEvent()\n    }\n\n    function handleNext(amount = 1) {\n      if (isDisabled.value || inTransition) return\n\n      const itemLength = props.vertical ? itemRect.height : itemRect.width\n      const itemList = Array.from(itemStates.value)\n      const itemCount = itemList.length\n      const targetIndex = currentActive.value + amount\n      const prevActive = currentActive.value\n\n      if (targetIndex > itemStates.value.size - props.viewSize) {\n        if (!props.loop) return\n\n        if (trackRect.offset > 0) {\n          trackRect.offset = itemLength * (itemCount - targetIndex)\n        } else {\n          const anchorIndex = targetIndex + props.viewSize - itemCount\n\n          for (let i = 0, len = itemList.length; i < len; ++i) {\n            itemList[i].offset =\n              i < anchorIndex\n                ? (isRtl.value && !props.vertical ? -itemCount : itemCount) * itemLength\n                : 0\n          }\n\n          trackRect.offset = -targetIndex * itemLength\n        }\n\n        currentActive.value = targetIndex % itemCount\n      } else {\n        currentActive.value = targetIndex\n        trackRect.offset = -currentActive.value * itemLength\n      }\n\n      shouldReset = currentActive.value <= itemCount - props.viewSize\n      inTransition = true\n\n      currentActive.value !== prevActive && emitChangeEvent()\n    }\n\n    function handleWheel(active: number) {\n      if (isDisabled.value || inTransition || active === currentActive.value) return\n\n      const itemCount = itemStates.value.size\n\n      active = (active % itemCount) + (active < 0 ? itemCount : 0)\n\n      if (props.loop) {\n        let forward: number\n        let back: number\n\n        if (active > currentActive.value) {\n          forward = active - currentActive.value\n          back = itemCount - active + currentActive.value\n        } else {\n          forward = itemCount - currentActive.value + active\n          back = currentActive.value - active\n        }\n\n        if (forward < back) {\n          handleNext(forward)\n        } else if (forward > back) {\n          handlePrev(back)\n        } else {\n          if (trackRect.offset > 0) {\n            handlePrev(forward)\n          } else {\n            handleNext(forward)\n          }\n        }\n      } else {\n        if (active < currentActive.value) {\n          handlePrev(currentActive.value - active)\n        } else {\n          handleNext(active - currentActive.value)\n        }\n      }\n    }\n\n    function handleAfterMove() {\n      if (!shouldReset) {\n        inTransition = false\n      } else {\n        itemStates.value.forEach(state => {\n          state.offset = 0\n        })\n\n        shouldReset = false\n        isLocked.value = true\n\n        requestAnimationFrame(() => {\n          trackRect.offset =\n            -currentActive.value * (props.vertical ? itemRect.height : itemRect.width)\n\n          requestAnimationFrame(() => {\n            isLocked.value = false\n            inTransition = false\n          })\n        })\n      }\n    }\n\n    function handlePrevClick() {\n      handlePrev(1)\n      emitEvent(props.onPrev, (currentActive.value + props.activeOffset) % itemStates.value.size)\n    }\n\n    function handleNextClick() {\n      handleNext(1)\n      emitEvent(props.onNext, (currentActive.value + props.activeOffset) % itemStates.value.size)\n    }\n\n    function handleSelect(label: number) {\n      emitEvent(props.onSelect, label)\n    }\n\n    const { timer } = useSetTimeout()\n\n    function setAutoplay() {\n      clearInterval(timer.play)\n\n      if (!props.autoplay) return\n\n      let waiting = 4000\n\n      if (typeof props.autoplay === 'number') {\n        waiting = props.autoplay\n      }\n\n      timer.play = window.setInterval(() => {\n        if (!props.loop && disabledNext.value) {\n          handleWheel(0)\n        } else {\n          handleNext()\n        }\n      }, waiting)\n    }\n\n    function handleMouseEnter() {\n      if (props.autoplay) {\n        clearTimeout(timer.hover)\n\n        timer.hover = setTimeout(() => {\n          clearInterval(timer.play)\n        }, hoverDelay.value)\n      }\n\n      if (props.arrowTrigger === 'hover' && props.arrow === 'inside') {\n        arrowActive.value = true\n      }\n    }\n\n    function handleMouseLeave() {\n      if (props.autoplay) {\n        clearTimeout(timer.hover)\n\n        timer.hover = setTimeout(() => {\n          setAutoplay()\n        }, hoverDelay.value)\n      }\n\n      if (props.arrowTrigger === 'hover') {\n        arrowActive.value = false\n      }\n    }\n\n    function isPointerDisabled(index: number) {\n      if (props.loop) return false\n\n      return !(\n        index >= props.activeOffset - 1 && index < itemStates.value.size - props.activeOffset - 1\n      )\n    }\n\n    return {\n      props,\n      nh,\n      itemStates,\n      currentActive,\n      arrowActive,\n\n      className,\n      style,\n      listStyle,\n      trackStyle,\n      disabledPrev,\n      disabledNext,\n      arrowIcons,\n\n      wrapper,\n      prev,\n      next,\n\n      handlePrevClick,\n      handleNextClick,\n      handleWheel,\n      handleAfterMove,\n      isPointerDisabled,\n\n      refresh\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    :class=\"className\"\n    role=\"listitem\"\n    :style=\"style\"\n    @click=\"handleClick\"\n  >\n    <slot :active=\"active\"></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, onBeforeUnmount, reactive } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { CAROUSEL_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'CarouselItem',\n  setup() {\n    const carouselState = inject(CAROUSEL_STATE, null)\n\n    const nh = useNameHelper('carousel')\n    const state: ItemState = reactive({\n      label: -1,\n      width: 0,\n      height: 0,\n      offset: 0\n    })\n\n    const active = computed(() => {\n      return carouselState?.isItemActive(state.label) ?? false\n    })\n    const className = computed(() => {\n      return {\n        [nh.be('item')]: true,\n        [nh.bem('item', 'active')]: active.value\n      }\n    })\n    const style = computed(() => {\n      const { width, height, offset } = state\n\n      return {\n        width: width ? `${width}px` : undefined,\n        height: height ? `${height}px` : undefined,\n        transform: offset\n          ? `translate${carouselState?.vertical ? 'Y' : 'X'}(${offset}px)`\n          : undefined\n      }\n    })\n\n    if (carouselState) {\n      carouselState.increaseItem(state)\n\n      onBeforeUnmount(() => {\n        carouselState.decreaseItem(state)\n      })\n    }\n\n    function handleClick() {\n      carouselState?.handleSelect(state.label)\n    }\n\n    return {\n      active,\n      className,\n      style,\n\n      handleClick\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    :class=\"className\"\n    role=\"listitem\"\n    :style=\"style\"\n    @click=\"handleClick\"\n  >\n    <slot :active=\"active\"></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, onBeforeUnmount, reactive } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { CAROUSEL_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'CarouselItem',\n  setup() {\n    const carouselState = inject(CAROUSEL_STATE, null)\n\n    const nh = useNameHelper('carousel')\n    const state: ItemState = reactive({\n      label: -1,\n      width: 0,\n      height: 0,\n      offset: 0\n    })\n\n    const active = computed(() => {\n      return carouselState?.isItemActive(state.label) ?? false\n    })\n    const className = computed(() => {\n      return {\n        [nh.be('item')]: true,\n        [nh.bem('item', 'active')]: active.value\n      }\n    })\n    const style = computed(() => {\n      const { width, height, offset } = state\n\n      return {\n        width: width ? `${width}px` : undefined,\n        height: height ? `${height}px` : undefined,\n        transform: offset\n          ? `translate${carouselState?.vertical ? 'Y' : 'X'}(${offset}px)`\n          : undefined\n      }\n    })\n\n    if (carouselState) {\n      carouselState.increaseItem(state)\n\n      onBeforeUnmount(() => {\n        carouselState.decreaseItem(state)\n      })\n    }\n\n    function handleClick() {\n      carouselState?.handleSelect(state.label)\n    }\n\n    return {\n      active,\n      className,\n      style,\n\n      handleClick\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  classProp,\n  eventProp,\n  localeProp,\n  sizeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const checkboxProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  checked: booleanProp,\n  label: String,\n  value: [String, Number],\n  labelClass: classProp,\n  disabled: booleanProp,\n  border: booleanProp,\n  control: booleanProp,\n  partial: booleanProp,\n  tabIndex: [String, Number],\n  loading: booleanProp,\n  loadingLock: booleanProp,\n  name: String,\n  color: String,\n  stateColor: booleanProp,\n  onChange: eventProp<(checked: boolean) => void>(),\n  onClick: eventProp<(event: MouseEvent) => void>()\n})\n\nexport type CheckboxProps = ExtractPropTypes<typeof checkboxProps>\nexport type CheckboxCProps = ConfigurableProps<CheckboxProps>\n\nexport type RawOption =\n  | string\n  | {\n    value: string | number,\n    label?: string,\n    control?: boolean,\n    disabled?: boolean\n  }\n\nexport const checkboxGroupProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('checkbox'),\n  value: Array as PropType<(string | number)[]>,\n  vertical: booleanProp,\n  disabled: booleanProp,\n  border: booleanProp,\n  options: Array as PropType<RawOption[]>,\n  loading: booleanProp,\n  loadingLock: booleanProp,\n  control: booleanStringProp,\n  color: String,\n  stateColor: booleanProp,\n  onChange: eventProp<(value: (string | number)[]) => void>()\n})\n\nexport type CheckboxGroupProps = ExtractPropTypes<typeof checkboxGroupProps>\nexport type CheckboxGroupCProps = ConfigurableProps<CheckboxGroupProps>\n", "import type { InjectionKey, Ref } from 'vue'\nimport type { ComponentSize, ComponentState } from '@vexip-ui/config'\n\nexport interface ControlState {\n  checked: boolean,\n  partial: boolean\n}\n\nexport interface GroupState {\n  currentValues: (string | number)[],\n  size: ComponentSize,\n  state: ComponentState,\n  disabled: boolean,\n  loading: boolean,\n  loadingLock: boolean,\n  colorMap: Record<string, string> | null,\n  stateColor: boolean,\n  increaseItem(\n    value: string | number,\n    checked: boolean,\n    input: Ref<HTMLElement | null | undefined>\n  ): void,\n  decreaseItem(value: string | number, input: Ref<HTMLElement | null | undefined>): void,\n  increaseControl(state: ControlState): void,\n  decreaseControl(state: ControlState): void,\n  handleControlChange(): void,\n  setItemChecked(value: string | number, checked: boolean): void,\n  replaceValue(prevValue: string | number, newValue: string | number): void\n}\n\nexport const GROUP_STATE: InjectionKey<GroupState> = Symbol('CHECKBOX_GROUP_STATE')\n", "<template>\n  <label\n    :id=\"idFor\"\n    :class=\"className\"\n    :style=\"style\"\n    :aria-disabled=\"isDisabled\"\n    @click=\"handleClick\"\n  >\n    <input\n      ref=\"input\"\n      type=\"checkbox\"\n      :class=\"nh.be('input')\"\n      :checked=\"currentChecked\"\n      :disabled=\"isDisabled || readonly\"\n      :tabindex=\"props.tabIndex\"\n      :name=\"props.name\"\n      @submit.prevent\n      @change=\"handleChange(!currentChecked)\"\n      @click.stop\n    />\n    <span :class=\"[nh.be('signal'), isLoading && nh.bem('signal', 'active')]\"></span>\n    <span v-if=\"hasLabel || hasSlot\" :class=\"[nh.be('label'), props.labelClass]\">\n      <slot>{{ props.label }}</slot>\n    </span>\n  </label>\n</template>\n\n<script lang=\"ts\">\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n  watch\n} from 'vue'\n\nimport {\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { adjustAlpha, isDefined, isFunction, parseColorToRgba } from '@vexip-ui/utils'\nimport { checkboxProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nexport default defineComponent({\n  name: 'Checkbox',\n  props: checkboxProps,\n  emits: ['update:checked'],\n  setup(_props, { slots, emit }) {\n    const { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<boolean>(() => input.value?.focus())\n\n    const props = useProps('checkbox', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      checked: {\n        default: () => getFieldValue(false),\n        static: true\n      },\n      label: null,\n      value: {\n        default: null,\n        static: true\n      },\n      labelClass: null,\n      disabled: () => disabled.value,\n      border: false,\n      control: false,\n      partial: false,\n      tabIndex: 0,\n      loading: () => loading.value,\n      loadingLock: false,\n      name: {\n        default: '',\n        static: true\n      },\n      color: null,\n      stateColor: false\n    })\n\n    const groupState = inject(GROUP_STATE, null)\n\n    const nh = useNameHelper('checkbox')\n    const currentChecked = ref(props.checked)\n    const currentPartial = ref(props.partial)\n\n    const input = ref<HTMLInputElement>()\n\n    const controlState = reactive({\n      checked: currentChecked,\n      partial: currentPartial\n    })\n\n    const computedSize = computed(() => groupState?.size || props.size)\n    const computedState = computed(() => groupState?.state || props.state)\n    const isDisabled = computed(() => groupState?.disabled || props.disabled)\n    const isLoading = computed(() => groupState?.loading || props.loading)\n    const isLoadingLock = computed(() => groupState?.loadingLock || props.loadingLock)\n    const stateColor = computed(() => groupState?.stateColor || props.stateColor)\n    const readonly = computed(() => isLoading.value && isLoadingLock.value)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('checked')]: currentChecked.value,\n          [nh.bm('disabled')]: isDisabled.value,\n          [nh.bm('readonly')]: readonly.value,\n          [nh.bm('loading')]: isLoading.value,\n          [nh.bm(computedSize.value)]: computedSize.value !== 'default',\n          [nh.bm('border')]: props.border,\n          [nh.bm('partial')]: props.control && currentPartial.value,\n          [nh.bm(computedState.value)]: computedState.value !== 'default'\n        }\n      ]\n    })\n    const colorMap = computed(() => {\n      if (!props.color) return groupState?.colorMap\n\n      const baseColor = parseColorToRgba(props.color)\n\n      return {\n        base: baseColor.toString(),\n        opacity6: adjustAlpha(baseColor, 0.4).toString()\n      }\n    })\n    const style = computed<Record<string, string>>(() => {\n      if (!colorMap.value) return {}\n\n      const { base, opacity6 } = colorMap.value\n\n      return nh.cvm({\n        'label-color-checked': base,\n        'b-color': stateColor.value ? base : undefined,\n        'b-color-hover': base,\n        'b-color-checked': base,\n        'signal-bg-color-checked': base,\n        's-color-focus': opacity6\n      })\n    })\n    const hasLabel = computed(() => {\n      return isDefined(props.label) && props.label !== ''\n    })\n    const hasSlot = computed(() => {\n      return !!slots.default\n    })\n    const currentValue = computed(() => {\n      return props.value ?? props.label\n    })\n\n    watch(\n      () => props.checked,\n      value => {\n        setCurrentChecked(value)\n      }\n    )\n    watch(\n      () => props.partial,\n      value => {\n        currentPartial.value = value\n      }\n    )\n\n    if (groupState) {\n      let increased = false\n\n      watch(currentValue, (value, prevValue) => {\n        if (isFunction(groupState.replaceValue)) {\n          groupState.replaceValue(prevValue, value)\n        }\n      })\n      watch(\n        () => props.control,\n        value => {\n          if (value) {\n            if (increased) {\n              groupState.decreaseItem(currentValue.value, input)\n              increased = false\n            }\n\n            groupState.increaseControl(controlState)\n          } else {\n            groupState.decreaseControl(controlState)\n          }\n        },\n        { immediate: true }\n      )\n      watch(\n        () => groupState.currentValues,\n        value => {\n          if (!props.control) {\n            setCurrentChecked(value.includes(currentValue.value))\n          }\n        },\n        { immediate: true }\n      )\n\n      onMounted(() => {\n        if (!props.control) {\n          groupState.increaseItem(currentValue.value, currentChecked.value, input)\n          increased = true\n        }\n      })\n\n      onBeforeUnmount(() => {\n        if (!props.control) {\n          groupState.decreaseItem(currentValue.value, input)\n        } else {\n          groupState.decreaseControl(controlState)\n        }\n      })\n    }\n\n    function emitCheckEvent() {\n      const checked = currentChecked.value\n\n      emit('update:checked', checked)\n      setFieldValue(checked)\n      emitEvent(props.onChange, checked)\n    }\n\n    function setCurrentChecked(checked: boolean) {\n      if (props.control && isFunction(groupState?.handleControlChange)) {\n        groupState!.handleControlChange()\n      } else if (currentChecked.value !== checked) {\n        currentChecked.value = checked\n        emitCheckEvent()\n      }\n    }\n\n    function handleChange(checked: boolean) {\n      if (isDisabled.value || readonly.value) {\n        return\n      }\n\n      setCurrentChecked(checked)\n\n      if (!props.control && groupState) {\n        isFunction(groupState.setItemChecked) &&\n          groupState.setItemChecked(currentValue.value, checked)\n      }\n\n      if (!groupState) {\n        validateField()\n      }\n    }\n\n    function handleClick(event: MouseEvent) {\n      emitEvent(props.onClick, event)\n    }\n\n    return {\n      props,\n      nh,\n      idFor,\n      currentChecked,\n\n      readonly,\n      isDisabled,\n      className,\n      style,\n      hasLabel,\n      hasSlot,\n      isLoading,\n\n      input,\n\n      handleChange,\n      handleClick,\n\n      focus: (options?: FocusOptions) => input.value?.focus(options),\n      blur: () => input.value?.blur()\n    }\n  }\n})\n</script>\n", "<template>\n  <label\n    :id=\"idFor\"\n    :class=\"className\"\n    :style=\"style\"\n    :aria-disabled=\"isDisabled\"\n    @click=\"handleClick\"\n  >\n    <input\n      ref=\"input\"\n      type=\"checkbox\"\n      :class=\"nh.be('input')\"\n      :checked=\"currentChecked\"\n      :disabled=\"isDisabled || readonly\"\n      :tabindex=\"props.tabIndex\"\n      :name=\"props.name\"\n      @submit.prevent\n      @change=\"handleChange(!currentChecked)\"\n      @click.stop\n    />\n    <span :class=\"[nh.be('signal'), isLoading && nh.bem('signal', 'active')]\"></span>\n    <span v-if=\"hasLabel || hasSlot\" :class=\"[nh.be('label'), props.labelClass]\">\n      <slot>{{ props.label }}</slot>\n    </span>\n  </label>\n</template>\n\n<script lang=\"ts\">\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n  watch\n} from 'vue'\n\nimport {\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { adjustAlpha, isDefined, isFunction, parseColorToRgba } from '@vexip-ui/utils'\nimport { checkboxProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nexport default defineComponent({\n  name: 'Checkbox',\n  props: checkboxProps,\n  emits: ['update:checked'],\n  setup(_props, { slots, emit }) {\n    const { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<boolean>(() => input.value?.focus())\n\n    const props = useProps('checkbox', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      checked: {\n        default: () => getFieldValue(false),\n        static: true\n      },\n      label: null,\n      value: {\n        default: null,\n        static: true\n      },\n      labelClass: null,\n      disabled: () => disabled.value,\n      border: false,\n      control: false,\n      partial: false,\n      tabIndex: 0,\n      loading: () => loading.value,\n      loadingLock: false,\n      name: {\n        default: '',\n        static: true\n      },\n      color: null,\n      stateColor: false\n    })\n\n    const groupState = inject(GROUP_STATE, null)\n\n    const nh = useNameHelper('checkbox')\n    const currentChecked = ref(props.checked)\n    const currentPartial = ref(props.partial)\n\n    const input = ref<HTMLInputElement>()\n\n    const controlState = reactive({\n      checked: currentChecked,\n      partial: currentPartial\n    })\n\n    const computedSize = computed(() => groupState?.size || props.size)\n    const computedState = computed(() => groupState?.state || props.state)\n    const isDisabled = computed(() => groupState?.disabled || props.disabled)\n    const isLoading = computed(() => groupState?.loading || props.loading)\n    const isLoadingLock = computed(() => groupState?.loadingLock || props.loadingLock)\n    const stateColor = computed(() => groupState?.stateColor || props.stateColor)\n    const readonly = computed(() => isLoading.value && isLoadingLock.value)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('checked')]: currentChecked.value,\n          [nh.bm('disabled')]: isDisabled.value,\n          [nh.bm('readonly')]: readonly.value,\n          [nh.bm('loading')]: isLoading.value,\n          [nh.bm(computedSize.value)]: computedSize.value !== 'default',\n          [nh.bm('border')]: props.border,\n          [nh.bm('partial')]: props.control && currentPartial.value,\n          [nh.bm(computedState.value)]: computedState.value !== 'default'\n        }\n      ]\n    })\n    const colorMap = computed(() => {\n      if (!props.color) return groupState?.colorMap\n\n      const baseColor = parseColorToRgba(props.color)\n\n      return {\n        base: baseColor.toString(),\n        opacity6: adjustAlpha(baseColor, 0.4).toString()\n      }\n    })\n    const style = computed<Record<string, string>>(() => {\n      if (!colorMap.value) return {}\n\n      const { base, opacity6 } = colorMap.value\n\n      return nh.cvm({\n        'label-color-checked': base,\n        'b-color': stateColor.value ? base : undefined,\n        'b-color-hover': base,\n        'b-color-checked': base,\n        'signal-bg-color-checked': base,\n        's-color-focus': opacity6\n      })\n    })\n    const hasLabel = computed(() => {\n      return isDefined(props.label) && props.label !== ''\n    })\n    const hasSlot = computed(() => {\n      return !!slots.default\n    })\n    const currentValue = computed(() => {\n      return props.value ?? props.label\n    })\n\n    watch(\n      () => props.checked,\n      value => {\n        setCurrentChecked(value)\n      }\n    )\n    watch(\n      () => props.partial,\n      value => {\n        currentPartial.value = value\n      }\n    )\n\n    if (groupState) {\n      let increased = false\n\n      watch(currentValue, (value, prevValue) => {\n        if (isFunction(groupState.replaceValue)) {\n          groupState.replaceValue(prevValue, value)\n        }\n      })\n      watch(\n        () => props.control,\n        value => {\n          if (value) {\n            if (increased) {\n              groupState.decreaseItem(currentValue.value, input)\n              increased = false\n            }\n\n            groupState.increaseControl(controlState)\n          } else {\n            groupState.decreaseControl(controlState)\n          }\n        },\n        { immediate: true }\n      )\n      watch(\n        () => groupState.currentValues,\n        value => {\n          if (!props.control) {\n            setCurrentChecked(value.includes(currentValue.value))\n          }\n        },\n        { immediate: true }\n      )\n\n      onMounted(() => {\n        if (!props.control) {\n          groupState.increaseItem(currentValue.value, currentChecked.value, input)\n          increased = true\n        }\n      })\n\n      onBeforeUnmount(() => {\n        if (!props.control) {\n          groupState.decreaseItem(currentValue.value, input)\n        } else {\n          groupState.decreaseControl(controlState)\n        }\n      })\n    }\n\n    function emitCheckEvent() {\n      const checked = currentChecked.value\n\n      emit('update:checked', checked)\n      setFieldValue(checked)\n      emitEvent(props.onChange, checked)\n    }\n\n    function setCurrentChecked(checked: boolean) {\n      if (props.control && isFunction(groupState?.handleControlChange)) {\n        groupState!.handleControlChange()\n      } else if (currentChecked.value !== checked) {\n        currentChecked.value = checked\n        emitCheckEvent()\n      }\n    }\n\n    function handleChange(checked: boolean) {\n      if (isDisabled.value || readonly.value) {\n        return\n      }\n\n      setCurrentChecked(checked)\n\n      if (!props.control && groupState) {\n        isFunction(groupState.setItemChecked) &&\n          groupState.setItemChecked(currentValue.value, checked)\n      }\n\n      if (!groupState) {\n        validateField()\n      }\n    }\n\n    function handleClick(event: MouseEvent) {\n      emitEvent(props.onClick, event)\n    }\n\n    return {\n      props,\n      nh,\n      idFor,\n      currentChecked,\n\n      readonly,\n      isDisabled,\n      className,\n      style,\n      hasLabel,\n      hasSlot,\n      isLoading,\n\n      input,\n\n      handleChange,\n      handleClick,\n\n      focus: (options?: FocusOptions) => input.value?.focus(options),\n      blur: () => input.value?.blur()\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"nh.be('panel')\"\n    tabindex=\"-1\"\n    @mouseleave=\"handleMouseLeave\"\n  >\n    <VirtualList\n      ref=\"list\"\n      inherit\n      :items=\"options\"\n      :item-size=\"32\"\n      height=\"100%\"\n      id-key=\"id\"\n      :items-attrs=\"{\n        class: [\n          nh.be('options'),\n          multiple ? nh.bem('options', 'multiple') : null,\n          noCascaded ? nh.bem('options', 'no-cascaded') : null\n        ],\n        role: 'listbox'\n      }\"\n      @resize=\"computeListHeight\"\n    >\n      <template #default=\"{ item, index }\">\n        <Option\n          :class=\"{\n            [nh.ns('option--error')]: item.error\n          }\"\n          :value=\"item.value\"\n          :label=\"item.label\"\n          :disabled=\"item.disabled\"\n          :selected=\"isSelected(item)\"\n          :hitting=\"index === currentHitting\"\n          @select=\"handleSelect(item, index)\"\n          @mouseenter=\"handleMouseEnter(item)\"\n        >\n          <slot\n            :option=\"item\"\n            :index=\"index\"\n            :selected=\"isSelected(item)\"\n            :can-check=\"isCheckboxDisabled(item)\"\n            :has-child=\"hasChildren(item)\"\n          >\n            <Checkbox\n              v-if=\"multiple || noCascaded\"\n              inherit\n              :class=\"nh.be('checkbox')\"\n              :checked=\"item.checked\"\n              :control=\"hasChildren(item)\"\n              :partial=\"item.partial\"\n              :disabled=\"isCheckboxDisabled(item)\"\n              size=\"small\"\n              @click.prevent.stop=\"handleToggleCheck(item)\"\n            ></Checkbox>\n            <span :class=\"nh.be('label')\">\n              <slot\n                name=\"label\"\n                :option=\"item\"\n                :index=\"index\"\n                :selected=\"isSelected(item)\"\n                :can-check=\"isCheckboxDisabled(item)\"\n                :has-child=\"hasChildren(item)\"\n                :handle-select=\"() => handleSelect(item, index)\"\n              >\n                {{ item.label }}\n              </slot>\n            </span>\n            <div :class=\"nh.be('icon')\">\n              <Icon v-if=\"item.loading\" v-bind=\"icons.loading\"></Icon>\n              <Icon v-else-if=\"item.error\" v-bind=\"icons.refresh\"></Icon>\n              <template v-else-if=\"hasChildren(item)\">\n                <Icon v-if=\"isRtl\" v-bind=\"icons.angleLeft\"></Icon>\n                <Icon v-else v-bind=\"icons.angleRight\"></Icon>\n              </template>\n              <Icon\n                v-else-if=\"!multiple && !noCascaded && checkIcon && values.includes(item.fullValue)\"\n                v-bind=\"icons.check\"\n                :icon=\"checkIcon || icons.check.icon\"\n              ></Icon>\n            </div>\n          </slot>\n        </Option>\n      </template>\n    </VirtualList>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Checkbox } from '@/components/checkbox'\nimport { Icon } from '@/components/icon'\nimport { Option } from '@/components/option'\nimport { VirtualList } from '@/components/virtual-list'\n\nimport { defineComponent, onBeforeUnmount, onMounted, ref, watch } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useRtl } from '@vexip-ui/hooks'\nimport { boundRange, decide } from '@vexip-ui/utils'\n\nimport type { PropType } from 'vue'\nimport type { VirtualListExposed } from '@/components/virtual-list'\nimport type { CascaderOptionState } from './symbol'\n\nexport default defineComponent({\n  name: 'CascaderPanel',\n  components: {\n    Checkbox,\n    Icon,\n    Option,\n    VirtualList\n  },\n  props: {\n    options: {\n      type: Array as PropType<CascaderOptionState[]>,\n      default: () => []\n    },\n    openedId: {\n      type: Number,\n      default: null\n    },\n    values: {\n      type: Array as PropType<string[]>,\n      default: () => []\n    },\n    ready: {\n      type: Boolean,\n      default: false\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    checkIcon: {\n      type: Object,\n      default: null\n    },\n    isAsync: {\n      type: Boolean,\n      default: false\n    },\n    merged: {\n      type: Boolean,\n      default: false\n    },\n    noCascaded: {\n      type: Boolean,\n      default: false\n    },\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['select', 'check', 'hover', 'open', 'back', 'close'],\n  setup(props, { emit }) {\n    const nh = useNameHelper('cascader')\n    const icons = useIcons()\n    const { isRtl } = useRtl()\n    const currentHitting = ref(-1)\n\n    const list = ref<VirtualListExposed>()\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.escape) {\n          emit('close')\n          return\n        }\n\n        decide(\n          [\n            [\n              () => modifier.up || modifier.down,\n              () => {\n                if (currentHitting.value < 0) {\n                  currentHitting.value = props.options.findIndex(isSelected)\n\n                  if (currentHitting.value < 0) {\n                    currentHitting.value = 0\n                  }\n\n                  return\n                }\n\n                currentHitting.value = boundRange(\n                  findEnabledIndex(\n                    currentHitting.value + (modifier.up ? -1 : 1),\n                    modifier.up ? -1 : 1\n                  ),\n                  0,\n                  props.options.length - 1\n                )\n                ensureOptionInView(currentHitting.value, modifier.up ? 'top' : 'bottom')\n              }\n            ],\n            [\n              () => modifier.left || modifier.right,\n              () => {\n                if (modifier.right) {\n                  const option = props.options[currentHitting.value]\n\n                  if (option && hasChildren(option)) {\n                    emit('open', option)\n                  }\n                } else {\n                  emit('back')\n                }\n              }\n            ],\n            [\n              () => modifier.enter || modifier.space,\n              () => {\n                event.stopPropagation()\n\n                const option = props.options[currentHitting.value]\n\n                if (option) {\n                  if (props.multiple) {\n                    handleToggleCheck(option)\n                  } else {\n                    handleSelect(option, currentHitting.value)\n                  }\n                }\n              }\n            ]\n          ],\n          {\n            beforeMatchAny: () => event.preventDefault(),\n            afterMatchAny: modifier.resetAll\n          }\n        )\n      }\n    })\n\n    let listHeight = 0\n    let hoverTimer: ReturnType<typeof setTimeout>\n\n    watch([() => props.ready, () => props.options], () => {\n      requestAnimationFrame(computeListHeight)\n\n      if (props.ready) {\n        list.value?.refresh()\n        currentHitting.value = props.options.findIndex(isSelected)\n      } else {\n        currentHitting.value = -1\n      }\n    })\n\n    onMounted(() => {\n      requestAnimationFrame(computeListHeight)\n    })\n    onBeforeUnmount(handleMouseLeave)\n\n    function hasChildren(option: CascaderOptionState) {\n      return !!(option.hasChild || option.children?.length)\n    }\n\n    function isSelected(option: CascaderOptionState) {\n      return (\n        (hasChildren(option) && option.id === props.openedId) ||\n        props.values.includes(option.fullValue)\n      )\n    }\n\n    function isCheckboxDisabled(option: CascaderOptionState) {\n      return (\n        option.disabled ||\n        (!props.merged &&\n          props.multiple &&\n          props.isAsync &&\n          hasChildren(option) &&\n          !option.childrenLoaded)\n      )\n    }\n\n    function handleSelect(option: CascaderOptionState, index: number) {\n      if (option.disabled) return\n\n      currentHitting.value = index\n\n      if (props.multiple || props.noCascaded) {\n        hasChildren(option) ? emit('select', option) : handleToggleCheck(option)\n      } else {\n        emit('select', option)\n      }\n    }\n\n    function handleToggleCheck(option: CascaderOptionState) {\n      !isCheckboxDisabled(option) && emit('check', option)\n    }\n\n    function handleMouseEnter(option: CascaderOptionState) {\n      clearTimeout(hoverTimer)\n\n      hoverTimer = setTimeout(() => {\n        !option.disabled && emit('hover', option)\n      }, 100)\n    }\n\n    function handleMouseLeave() {\n      clearTimeout(hoverTimer)\n    }\n\n    function computeListHeight() {\n      const el = list.value?.wrapper\n\n      if (el) {\n        const style = getComputedStyle(el)\n        const paddingTop = parseInt(style.paddingTop)\n        const paddingBottom = parseInt(style.paddingBottom)\n\n        listHeight = el.offsetHeight - paddingTop - paddingBottom\n      }\n    }\n\n    function queryEnabledIndex(index: number, step: number) {\n      const options = props.options\n      step = step / Math.abs(step)\n\n      while (options[index]?.disabled) {\n        index += step\n\n        if (index < 0 || index >= options.length) break\n      }\n\n      return index\n    }\n\n    function findEnabledIndex(index: number, sign: 1 | -1 = 1) {\n      const options = props.options\n\n      if (options[index]?.disabled) {\n        index = queryEnabledIndex(index, sign)\n\n        if (sign > 0 ? index >= options.length : index < 0) {\n          index = queryEnabledIndex(index, -sign)\n\n          // 全禁用\n          if (sign > 0 ? index < 0 : index >= options.length) index = -1\n        }\n      }\n\n      return index\n    }\n\n    function ensureOptionInView(index: number, direction: 'top' | 'bottom') {\n      const option = props.options[index]\n      const optionHeight = 32\n\n      if (!option || !list.value) return\n\n      if (direction === 'bottom') {\n        const target = (index + 1) * optionHeight\n\n        if (list.value.scrollOffset + listHeight < target) {\n          list.value.scrollTo(target - listHeight)\n        }\n      } else {\n        const target = index * optionHeight\n\n        if (list.value.scrollOffset > target) {\n          list.value.scrollTo(target)\n        }\n      }\n    }\n\n    return {\n      nh,\n      icons,\n      isRtl,\n      currentHitting,\n\n      wrapper,\n      list,\n\n      hasChildren,\n      isSelected,\n      isCheckboxDisabled,\n      handleSelect,\n      handleToggleCheck,\n      handleMouseEnter,\n      handleMouseLeave,\n      computeListHeight\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"nh.be('panel')\"\n    tabindex=\"-1\"\n    @mouseleave=\"handleMouseLeave\"\n  >\n    <VirtualList\n      ref=\"list\"\n      inherit\n      :items=\"options\"\n      :item-size=\"32\"\n      height=\"100%\"\n      id-key=\"id\"\n      :items-attrs=\"{\n        class: [\n          nh.be('options'),\n          multiple ? nh.bem('options', 'multiple') : null,\n          noCascaded ? nh.bem('options', 'no-cascaded') : null\n        ],\n        role: 'listbox'\n      }\"\n      @resize=\"computeListHeight\"\n    >\n      <template #default=\"{ item, index }\">\n        <Option\n          :class=\"{\n            [nh.ns('option--error')]: item.error\n          }\"\n          :value=\"item.value\"\n          :label=\"item.label\"\n          :disabled=\"item.disabled\"\n          :selected=\"isSelected(item)\"\n          :hitting=\"index === currentHitting\"\n          @select=\"handleSelect(item, index)\"\n          @mouseenter=\"handleMouseEnter(item)\"\n        >\n          <slot\n            :option=\"item\"\n            :index=\"index\"\n            :selected=\"isSelected(item)\"\n            :can-check=\"isCheckboxDisabled(item)\"\n            :has-child=\"hasChildren(item)\"\n          >\n            <Checkbox\n              v-if=\"multiple || noCascaded\"\n              inherit\n              :class=\"nh.be('checkbox')\"\n              :checked=\"item.checked\"\n              :control=\"hasChildren(item)\"\n              :partial=\"item.partial\"\n              :disabled=\"isCheckboxDisabled(item)\"\n              size=\"small\"\n              @click.prevent.stop=\"handleToggleCheck(item)\"\n            ></Checkbox>\n            <span :class=\"nh.be('label')\">\n              <slot\n                name=\"label\"\n                :option=\"item\"\n                :index=\"index\"\n                :selected=\"isSelected(item)\"\n                :can-check=\"isCheckboxDisabled(item)\"\n                :has-child=\"hasChildren(item)\"\n                :handle-select=\"() => handleSelect(item, index)\"\n              >\n                {{ item.label }}\n              </slot>\n            </span>\n            <div :class=\"nh.be('icon')\">\n              <Icon v-if=\"item.loading\" v-bind=\"icons.loading\"></Icon>\n              <Icon v-else-if=\"item.error\" v-bind=\"icons.refresh\"></Icon>\n              <template v-else-if=\"hasChildren(item)\">\n                <Icon v-if=\"isRtl\" v-bind=\"icons.angleLeft\"></Icon>\n                <Icon v-else v-bind=\"icons.angleRight\"></Icon>\n              </template>\n              <Icon\n                v-else-if=\"!multiple && !noCascaded && checkIcon && values.includes(item.fullValue)\"\n                v-bind=\"icons.check\"\n                :icon=\"checkIcon || icons.check.icon\"\n              ></Icon>\n            </div>\n          </slot>\n        </Option>\n      </template>\n    </VirtualList>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Checkbox } from '@/components/checkbox'\nimport { Icon } from '@/components/icon'\nimport { Option } from '@/components/option'\nimport { VirtualList } from '@/components/virtual-list'\n\nimport { defineComponent, onBeforeUnmount, onMounted, ref, watch } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useRtl } from '@vexip-ui/hooks'\nimport { boundRange, decide } from '@vexip-ui/utils'\n\nimport type { PropType } from 'vue'\nimport type { VirtualListExposed } from '@/components/virtual-list'\nimport type { CascaderOptionState } from './symbol'\n\nexport default defineComponent({\n  name: 'CascaderPanel',\n  components: {\n    Checkbox,\n    Icon,\n    Option,\n    VirtualList\n  },\n  props: {\n    options: {\n      type: Array as PropType<CascaderOptionState[]>,\n      default: () => []\n    },\n    openedId: {\n      type: Number,\n      default: null\n    },\n    values: {\n      type: Array as PropType<string[]>,\n      default: () => []\n    },\n    ready: {\n      type: Boolean,\n      default: false\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    checkIcon: {\n      type: Object,\n      default: null\n    },\n    isAsync: {\n      type: Boolean,\n      default: false\n    },\n    merged: {\n      type: Boolean,\n      default: false\n    },\n    noCascaded: {\n      type: Boolean,\n      default: false\n    },\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['select', 'check', 'hover', 'open', 'back', 'close'],\n  setup(props, { emit }) {\n    const nh = useNameHelper('cascader')\n    const icons = useIcons()\n    const { isRtl } = useRtl()\n    const currentHitting = ref(-1)\n\n    const list = ref<VirtualListExposed>()\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.escape) {\n          emit('close')\n          return\n        }\n\n        decide(\n          [\n            [\n              () => modifier.up || modifier.down,\n              () => {\n                if (currentHitting.value < 0) {\n                  currentHitting.value = props.options.findIndex(isSelected)\n\n                  if (currentHitting.value < 0) {\n                    currentHitting.value = 0\n                  }\n\n                  return\n                }\n\n                currentHitting.value = boundRange(\n                  findEnabledIndex(\n                    currentHitting.value + (modifier.up ? -1 : 1),\n                    modifier.up ? -1 : 1\n                  ),\n                  0,\n                  props.options.length - 1\n                )\n                ensureOptionInView(currentHitting.value, modifier.up ? 'top' : 'bottom')\n              }\n            ],\n            [\n              () => modifier.left || modifier.right,\n              () => {\n                if (modifier.right) {\n                  const option = props.options[currentHitting.value]\n\n                  if (option && hasChildren(option)) {\n                    emit('open', option)\n                  }\n                } else {\n                  emit('back')\n                }\n              }\n            ],\n            [\n              () => modifier.enter || modifier.space,\n              () => {\n                event.stopPropagation()\n\n                const option = props.options[currentHitting.value]\n\n                if (option) {\n                  if (props.multiple) {\n                    handleToggleCheck(option)\n                  } else {\n                    handleSelect(option, currentHitting.value)\n                  }\n                }\n              }\n            ]\n          ],\n          {\n            beforeMatchAny: () => event.preventDefault(),\n            afterMatchAny: modifier.resetAll\n          }\n        )\n      }\n    })\n\n    let listHeight = 0\n    let hoverTimer: ReturnType<typeof setTimeout>\n\n    watch([() => props.ready, () => props.options], () => {\n      requestAnimationFrame(computeListHeight)\n\n      if (props.ready) {\n        list.value?.refresh()\n        currentHitting.value = props.options.findIndex(isSelected)\n      } else {\n        currentHitting.value = -1\n      }\n    })\n\n    onMounted(() => {\n      requestAnimationFrame(computeListHeight)\n    })\n    onBeforeUnmount(handleMouseLeave)\n\n    function hasChildren(option: CascaderOptionState) {\n      return !!(option.hasChild || option.children?.length)\n    }\n\n    function isSelected(option: CascaderOptionState) {\n      return (\n        (hasChildren(option) && option.id === props.openedId) ||\n        props.values.includes(option.fullValue)\n      )\n    }\n\n    function isCheckboxDisabled(option: CascaderOptionState) {\n      return (\n        option.disabled ||\n        (!props.merged &&\n          props.multiple &&\n          props.isAsync &&\n          hasChildren(option) &&\n          !option.childrenLoaded)\n      )\n    }\n\n    function handleSelect(option: CascaderOptionState, index: number) {\n      if (option.disabled) return\n\n      currentHitting.value = index\n\n      if (props.multiple || props.noCascaded) {\n        hasChildren(option) ? emit('select', option) : handleToggleCheck(option)\n      } else {\n        emit('select', option)\n      }\n    }\n\n    function handleToggleCheck(option: CascaderOptionState) {\n      !isCheckboxDisabled(option) && emit('check', option)\n    }\n\n    function handleMouseEnter(option: CascaderOptionState) {\n      clearTimeout(hoverTimer)\n\n      hoverTimer = setTimeout(() => {\n        !option.disabled && emit('hover', option)\n      }, 100)\n    }\n\n    function handleMouseLeave() {\n      clearTimeout(hoverTimer)\n    }\n\n    function computeListHeight() {\n      const el = list.value?.wrapper\n\n      if (el) {\n        const style = getComputedStyle(el)\n        const paddingTop = parseInt(style.paddingTop)\n        const paddingBottom = parseInt(style.paddingBottom)\n\n        listHeight = el.offsetHeight - paddingTop - paddingBottom\n      }\n    }\n\n    function queryEnabledIndex(index: number, step: number) {\n      const options = props.options\n      step = step / Math.abs(step)\n\n      while (options[index]?.disabled) {\n        index += step\n\n        if (index < 0 || index >= options.length) break\n      }\n\n      return index\n    }\n\n    function findEnabledIndex(index: number, sign: 1 | -1 = 1) {\n      const options = props.options\n\n      if (options[index]?.disabled) {\n        index = queryEnabledIndex(index, sign)\n\n        if (sign > 0 ? index >= options.length : index < 0) {\n          index = queryEnabledIndex(index, -sign)\n\n          // 全禁用\n          if (sign > 0 ? index < 0 : index >= options.length) index = -1\n        }\n      }\n\n      return index\n    }\n\n    function ensureOptionInView(index: number, direction: 'top' | 'bottom') {\n      const option = props.options[index]\n      const optionHeight = 32\n\n      if (!option || !list.value) return\n\n      if (direction === 'bottom') {\n        const target = (index + 1) * optionHeight\n\n        if (list.value.scrollOffset + listHeight < target) {\n          list.value.scrollTo(target - listHeight)\n        }\n      } else {\n        const target = index * optionHeight\n\n        if (list.value.scrollOffset > target) {\n          list.value.scrollTo(target)\n        }\n      }\n    }\n\n    return {\n      nh,\n      icons,\n      isRtl,\n      currentHitting,\n\n      wrapper,\n      list,\n\n      hasChildren,\n      isSelected,\n      isCheckboxDisabled,\n      handleSelect,\n      handleToggleCheck,\n      handleMouseEnter,\n      handleMouseLeave,\n      computeListHeight\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { TagType } from '@/components/tag'\nimport type { CascaderKeyConfig, CascaderValue, Data } from './symbol'\n\ntype ChangeEvent =\n  | ((value: CascaderValue, data: Data[] | Data[][]) => void)\n  | ((value: (string | number)[], data: Data[]) => void)\n  | ((value: string[], data: Data[]) => void)\n  | ((value: number[], data: Data[]) => void)\n  | ((value: (string | number)[][], data: Data[][]) => void)\n  | ((value: string[][], data: Data[][]) => void)\n  | ((value: number[][], data: Data[][]) => void)\n\nexport const cascaderProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('select'),\n  value: Array as PropType<CascaderValue>,\n  visible: booleanProp,\n  options: Array as PropType<Data[]>,\n  placeholder: String,\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  noCascaded: booleanProp,\n  multiple: booleanProp,\n  disabled: booleanProp,\n  clearable: booleanProp,\n  placement: String as PropType<Placement>,\n  transfer: booleanStringProp,\n  staticSuffix: booleanProp,\n  noSuffix: booleanProp,\n  transitionName: String,\n  outsideClose: booleanProp,\n  keyConfig: Object as PropType<CascaderKeyConfig>,\n  separator: String,\n  hoverTrigger: booleanProp,\n  maxTagCount: Number,\n  briefLabel: booleanProp,\n  noRestTip: booleanProp,\n  onAsyncLoad: Function as PropType<(data: Data) => any[] | Promise<any[]>>,\n  mergeTags: booleanProp,\n  tagType: String as PropType<TagType>,\n  emptyText: String,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  transparent: booleanProp,\n  popperAlive: booleanProp,\n  onToggle: eventProp<(visible: boolean) => void>(),\n  onSelect: eventProp<(fullValue: string, data: Data) => void>(),\n  onCancel: eventProp<(fullValue: string, data: Data) => void>(),\n  onChange: eventProp<ChangeEvent>(),\n  onClickOutside: eventProp(),\n  onOutsideClose: eventProp(),\n  onClear: eventProp()\n})\n\nexport type CascaderProps = ExtractPropTypes<typeof cascaderProps>\nexport type CascaderCProps = ConfigurableProps<CascaderProps, never, 'onAsyncLoad'>\n", "<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    @click=\"toggleVisible()\"\n  >\n    <div\n      ref=\"reference\"\n      :class=\"selectorClass\"\n      tabindex=\"0\"\n      @keydown.space.prevent=\"toggleVisible()\"\n      @keydown.tab=\"toggleVisible(false)\"\n    >\n      <div\n        v-if=\"hasPrefix\"\n        :class=\"[nh.be('icon'), nh.be('prefix')]\"\n        :style=\"{ color: props.prefixColor }\"\n      >\n        <slot name=\"prefix\">\n          <Icon :icon=\"props.prefix\"></Icon>\n        </slot>\n      </div>\n      <div :class=\"nh.be('control')\">\n        <slot name=\"control\">\n          <Overflow\n            v-if=\"props.multiple\"\n            inherit\n            :class=\"[nh.be('tags')]\"\n            :items=\"templateValues\"\n            :max-count=\"props.maxTagCount\"\n            @rest-change=\"restTagCount = $event\"\n          >\n            <template #default=\"{ item, index }\">\n              <Tag\n                inherit\n                :class=\"nh.be('tag')\"\n                :type=\"props.tagType\"\n                closable\n                :disabled=\"props.disabled\"\n                @click.stop=\"toggleVisible()\"\n                @close=\"handleTipClose(item)\"\n              >\n                {{ templateLabels[index] }}\n              </Tag>\n            </template>\n            <template #counter=\"{ count }\">\n              <Tag\n                v-if=\"props.noRestTip\"\n                inherit\n                :class=\"[nh.be('tag'), nh.be('counter')]\"\n                :type=\"props.tagType\"\n                :disabled=\"props.disabled\"\n              >\n                {{ `+${count}` }}\n              </Tag>\n              <span v-else>\n                <Tooltip\n                  inherit\n                  :transfer=\"false\"\n                  :visible=\"restTipShow\"\n                  trigger=\"custom\"\n                  placement=\"top-end\"\n                  :tip-class=\"nh.be('rest-tip')\"\n                  @click.stop=\"toggleShowRestTip\"\n                >\n                  <template #trigger>\n                    <Tag\n                      inherit\n                      :class=\"[nh.be('tag'), nh.be('counter')]\"\n                      :type=\"props.tagType\"\n                      :disabled=\"props.disabled\"\n                    >\n                      {{ `+${count}` }}\n                    </Tag>\n                  </template>\n                  <NativeScroll inherit use-y-bar>\n                    <template v-for=\"(item, index) in templateValues\" :key=\"index\">\n                      <Tag\n                        v-if=\"index >= templateValues.length - restTagCount\"\n                        inherit\n                        :class=\"nh.be('tag')\"\n                        closable\n                        :type=\"props.tagType\"\n                        :disabled=\"props.disabled\"\n                        @close=\"handleTipClose(item)\"\n                      >\n                        {{ templateLabels[index] }}\n                      </Tag>\n                    </template>\n                  </NativeScroll>\n                </Tooltip>\n              </span>\n            </template>\n          </Overflow>\n          <template v-else>\n            {{ currentLabels[0] }}\n          </template>\n          <span\n            v-if=\"(props.placeholder ?? locale.placeholder) && !hasValue\"\n            :class=\"nh.be('placeholder')\"\n          >\n            {{ props.placeholder ?? locale.placeholder }}\n          </span>\n        </slot>\n      </div>\n      <div\n        v-if=\"!props.noSuffix\"\n        :class=\"[nh.be('icon'), nh.be('suffix')]\"\n        :style=\"{\n          color: props.suffixColor,\n          opacity: showClear || props.loading ? '0%' : ''\n        }\"\n      >\n        <slot name=\"suffix\">\n          <Icon\n            v-if=\"props.suffix\"\n            :icon=\"props.suffix\"\n            :class=\"{\n              [nh.be('arrow')]: !props.staticSuffix\n            }\"\n          ></Icon>\n          <Icon v-else v-bind=\"icons.angleDown\" :class=\"nh.be('arrow')\"></Icon>\n        </slot>\n      </div>\n      <div\n        v-else-if=\"props.clearable || props.loading\"\n        :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n      ></div>\n      <Transition :name=\"nh.ns('fade')\" appear>\n        <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear\">\n          <Icon v-bind=\"icons.clear\"></Icon>\n        </div>\n        <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n          ></Icon>\n        </div>\n      </Transition>\n    </div>\n    <Popper\n      ref=\"popper\"\n      :class=\"[nh.be('popper'), nh.ns('input-vars'), nh.bs('vars')]\"\n      :visible=\"currentVisible\"\n      :to=\"transferTo\"\n      :transition=\"props.transitionName\"\n      :alive=\"props.popperAlive ?? !transferTo\"\n      @click.stop\n      @enter=\"handlePanelsEnter\"\n    >\n      <div\n        :class=\"{\n          [nh.be('panels')]: true,\n          [nh.bem('panels', 'empty')]: !optionsList[0] || !optionsList[0].length\n        }\"\n      >\n        <template v-if=\"optionsList[0] && optionsList[0].length\">\n          <CascaderPanel\n            v-for=\"(items, index) in optionsList\"\n            :key=\"index\"\n            :ref=\"(panel: any) => panel && panelElList.push(panel)\"\n            :options=\"items\"\n            :opened-id=\"openedIds[index]\"\n            :values=\"currentValues\"\n            :ready=\"isPopperShow\"\n            :multiple=\"props.multiple\"\n            :is-async=\"isAsyncLoad\"\n            :merged=\"usingMerged\"\n            :no-cascaded=\"props.noCascaded\"\n            @select=\"handleOptionSelect($event, index)\"\n            @hover=\"usingHover && handlePanelOpen($event, index)\"\n            @check=\"handleOptionCheck($event)\"\n            @open=\"handlePanelKeyOpen($event, index)\"\n            @back=\"handlePanelBack\"\n            @close=\"currentVisible = false\"\n          >\n            <template #default=\"payload\">\n              <slot v-bind=\"payload\"></slot>\n            </template>\n            <template #label=\"payload\">\n              <slot name=\"label\" v-bind=\"payload\"></slot>\n            </template>\n          </CascaderPanel>\n        </template>\n        <div v-else :class=\"nh.be('empty')\" :style=\"{ width: `${selectorWidth}px` }\">\n          <slot name=\"empty\">\n            {{ props.emptyText ?? locale.empty }}\n          </slot>\n        </div>\n      </div>\n    </Popper>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { NativeScroll } from '@/components/native-scroll'\nimport { Overflow } from '@/components/overflow'\nimport { Popper } from '@/components/popper'\nimport { Tag } from '@/components/tag'\nimport { Tooltip } from '@/components/tooltip'\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onBeforeUpdate,\n  reactive,\n  ref,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport CascaderPanel from './cascader-panel.vue'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { placementWhileList, useClickOutside, useHover, usePopper } from '@vexip-ui/hooks'\nimport { flatTree, getLast, isNull, isPromise, transformTree } from '@vexip-ui/utils'\nimport { cascaderProps } from './props'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { CascaderKeyConfig, CascaderOptionState, CascaderValue, Data } from './symbol'\n\ntype ChangeListener = (value: CascaderValue, data: Data[] | Data[][]) => void\n\nconst ID_KEY = Symbol('ID_KEY')\nconst PARENT_KEY = Symbol('PARENT_KEY')\n\nconst defaultKeyConfig: Required<CascaderKeyConfig> = {\n  value: 'value',\n  label: 'label',\n  children: 'children',\n  disabled: 'disabled',\n  hasChild: 'hasChild'\n}\n\nexport default defineComponent({\n  name: 'Cascader',\n  components: {\n    CascaderPanel,\n    Icon,\n    NativeScroll,\n    Overflow,\n    Popper,\n    Tag,\n    Tooltip\n  },\n  props: cascaderProps,\n  emits: ['update:value', 'update:visible'],\n  setup(_props, { emit, slots }) {\n    const {\n      idFor,\n      state,\n      disabled,\n      loading,\n      size,\n      validateField,\n      clearField,\n      getFieldValue,\n      setFieldValue\n    } = useFieldStore<CascaderValue>(() => reference.value?.focus())\n\n    const nh = useNameHelper('cascader')\n    const props = useProps('cascader', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      locale: null,\n      value: {\n        default: () => getFieldValue([]),\n        static: true\n      },\n      visible: {\n        default: false,\n        static: true\n      },\n      options: {\n        default: () => [],\n        static: true\n      },\n      placeholder: null,\n      prefix: createIconProp(),\n      prefixColor: '',\n      suffix: createIconProp(),\n      suffixColor: '',\n      noCascaded: false,\n      multiple: false,\n      disabled: () => disabled.value,\n      clearable: false,\n      placement: {\n        default: 'bottom-start',\n        validator: value => placementWhileList.includes(value)\n      },\n      transfer: false,\n      staticSuffix: false,\n      noSuffix: false,\n      transitionName: () => nh.ns('drop'),\n      outsideClose: true,\n      keyConfig: () => ({}),\n      separator: {\n        default: '/',\n        validator: value => value.length === 1\n      },\n      hoverTrigger: false,\n      maxTagCount: 0,\n      briefLabel: false,\n      noRestTip: false,\n      onAsyncLoad: {\n        default: null,\n        isFunc: true\n      },\n      mergeTags: false,\n      tagType: null,\n      emptyText: null,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingLock: false,\n      loadingEffect: null,\n      transparent: false,\n      popperAlive: null\n    })\n\n    const icons = useIcons()\n    const locale = useLocale('select', toRef(props, 'locale'))\n\n    const currentVisible = ref(props.visible)\n    const currentValues = ref<string[]>([])\n    const currentLabels = ref<string[]>([])\n    const mergedValues = ref<string[]>([])\n    const mergedLabels = ref<string[]>([])\n    const isPopperShow = ref(false)\n    const placement = toRef(props, 'placement')\n    const transfer = toRef(props, 'transfer')\n\n    const emittedValue = ref<CascaderValue | null>(null)\n    const optionTree = ref<CascaderOptionState[]>(null!)\n    const isAsyncLoad = computed(() => typeof props.onAsyncLoad === 'function')\n\n    let optionList: CascaderOptionState[] = null!\n    let optionIdMap: Map<number, CascaderOptionState> = null!\n    let optionValueMap: Map<string, CascaderOptionState> = null!\n    let outsideClosed = false\n    let prevClosedId = -1\n    let flattedOptions: Record<any, any>[]\n\n    const updateTrigger = ref(0)\n\n    watchEffect(() => {\n      /* eslint-disable @typescript-eslint/no-unused-expressions */\n      props.keyConfig.value\n      props.keyConfig.label\n      props.keyConfig.disabled\n      props.keyConfig.hasChild\n      props.separator\n      isAsyncLoad.value\n      /* eslint-enable */\n\n      flattedOptions = flatTree(props.options as Record<any, any>[], {\n        keyField: ID_KEY,\n        parentField: PARENT_KEY,\n        childField: props.keyConfig.children ?? defaultKeyConfig.children,\n        forceInject: true\n      })\n\n      updateTrigger.value++\n    })\n\n    watch(updateTrigger, initOptionStates, { immediate: true })\n\n    function initOptionStates() {\n      const separator = props.separator\n      const isAsync = isAsyncLoad.value\n\n      optionList = createOptionStates(flattedOptions)\n      optionIdMap = new Map()\n      optionValueMap = new Map()\n\n      for (let i = 0, len = optionList.length; i < len; ++i) {\n        const option = optionList[i]\n\n        initOptionFull(option, separator)\n        optionIdMap.set(option.id, option)\n        optionValueMap.set(option.fullValue, option)\n\n        if (isAsync) {\n          option.childrenLoaded = queryChildrenLoaded(option)\n        }\n      }\n\n      optionTree.value = transformTree(optionList)\n      initValueAndLabel(emittedValue.value)\n    }\n\n    const openedIds = ref<number[]>([])\n    const optionsList = computed(() => {\n      return [\n        optionTree.value,\n        ...openedIds.value.map(id => optionIdMap.get(id)?.children).filter(Boolean)\n      ]\n    })\n\n    const wrapper = useClickOutside(handleClickOutside)\n    const popper = ref<PopperExposed>()\n    const { reference, transferTo, updatePopper } = usePopper({\n      placement,\n      transfer,\n      wrapper,\n      popper: computed(() => popper.value?.wrapper),\n      isDrop: true\n    })\n    const { isHover } = useHover(reference)\n\n    const panelElList = ref<InstanceType<typeof CascaderPanel>[]>([])\n    const restTagCount = ref(0)\n    const restTipShow = ref(false)\n    const selectorWidth = ref(0)\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.ns('input-vars')]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('multiple')]: props.multiple,\n        [nh.bm('responsive')]: props.multiple && props.maxTagCount <= 0\n      }\n    })\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const selectorClass = computed(() => {\n      const baseCls = nh.be('selector')\n\n      return {\n        [baseCls]: true,\n        [`${baseCls}--focused`]: !props.disabled && currentVisible.value,\n        [`${baseCls}--disabled`]: props.disabled,\n        [`${baseCls}--readonly`]: readonly.value,\n        [`${baseCls}--loading`]: props.loading,\n        [`${baseCls}--${props.size}`]: props.size !== 'default',\n        [`${baseCls}--${props.state}`]: props.state !== 'default',\n        [`${baseCls}--has-prefix`]: hasPrefix.value,\n        [`${baseCls}--has-suffix`]: !props.noSuffix,\n        [`${baseCls}--transparent`]: props.transparent\n      }\n    })\n    const hasPrefix = computed(() => {\n      return !!(slots.prefix || props.prefix)\n    })\n    const usingMerged = computed(() => props.mergeTags && !props.noCascaded)\n    const templateValues = computed(() =>\n      usingMerged.value ? mergedValues.value : currentValues.value\n    )\n    const templateLabels = computed(() =>\n      usingMerged.value ? mergedLabels.value : currentLabels.value\n    )\n    const hasValue = computed(() => !!templateValues.value[0])\n    const usingHover = computed(() => props.hoverTrigger && !isAsyncLoad.value)\n    const showClear = computed(() => {\n      return (\n        !props.disabled && !readonly.value && props.clearable && isHover.value && hasValue.value\n      )\n    })\n\n    watch(\n      () => props.visible,\n      value => {\n        currentVisible.value = value\n      }\n    )\n    watch(currentVisible, async value => {\n      if (value) {\n        restTipShow.value = false\n        selectorWidth.value = wrapper.value?.offsetWidth || 0\n\n        await updatePopper()\n        nextTick(() => {\n          getLast(panelElList.value)?.$el?.focus()\n        })\n      } else {\n        isPopperShow.value = false\n\n        if (reference.value && !outsideClosed) {\n          reference.value.focus()\n        }\n      }\n\n      outsideClosed = false\n    })\n\n    let outsideChanged = false\n\n    watch(emittedValue, () => {\n      outsideChanged = true\n    })\n    watch(\n      () => props.value,\n      value => {\n        if (value !== emittedValue.value || outsideChanged) {\n          emittedValue.value = value\n          initValueAndLabel(value)\n          nextTick(() => {\n            outsideChanged = false\n          })\n        }\n      },\n      { immediate: true }\n    )\n    watch(\n      () => props.briefLabel,\n      brief => {\n        currentLabels.value = currentValues.value\n          .map(value => optionValueMap.get(value)?.[brief ? 'label' : 'fullLabel'] as string)\n          .filter(Boolean)\n\n        // nextTick(computeTagsOverflow)\n      }\n    )\n    watch(isAsyncLoad, value => {\n      if (value) {\n        for (const option of optionIdMap.values()) {\n          option.childrenLoaded = queryChildrenLoaded(option)\n        }\n      }\n    })\n    watch(usingMerged, value => {\n      if (value) {\n        mergedValues.value.length = 0\n        mergedLabels.value.length = 0\n\n        updateMergedProps()\n      }\n\n      if (isAsyncLoad.value) {\n        const originalOptions: CascaderOptionState[] = []\n\n        for (const option of optionIdMap.values()) {\n          if (option.checked) {\n            originalOptions.push(option)\n          }\n\n          if (option.hasChild && !option.children.length && !option.loaded) {\n            option.checked = false\n          }\n        }\n\n        for (let i = 0, len = originalOptions.length; i < len; ++i) {\n          const option = originalOptions[i]\n\n          updateCheckedUpward(option)\n          updateCheckedDown(option)\n        }\n      }\n\n      emitMultipleChange()\n    })\n    watch(\n      () => optionsList.value.length,\n      () => {\n        updatePopper()\n        nextTick(() => {\n          getLast(panelElList.value)?.$el?.focus()\n          prevClosedId = -1\n        })\n      }\n    )\n    watch(\n      () => props.disabled,\n      value => {\n        if (value) {\n          setVisible(false)\n        }\n      }\n    )\n    watch(readonly, value => {\n      if (value) {\n        setVisible(false)\n      }\n    })\n\n    onBeforeUpdate(() => {\n      panelElList.value.length = 0\n    })\n\n    function createOptionStates(rawOptions: Record<string | symbol, any>[]) {\n      const {\n        value: valueKey,\n        label: labelKey,\n        disabled: disabledKey,\n        hasChild: hasChildKey\n      } = { ...defaultKeyConfig, ...props.keyConfig }\n\n      return rawOptions.map(rawOption => {\n        const {\n          [ID_KEY]: id,\n          [PARENT_KEY]: parent,\n          [valueKey]: value,\n          [labelKey]: label,\n          [disabledKey]: disabled,\n          [hasChildKey]: hasChild\n        } = rawOption\n\n        return reactive<CascaderOptionState>({\n          id,\n          parent,\n          value,\n          disabled,\n          hasChild,\n          label: label || String(value),\n          fullValue: '',\n          fullLabel: '',\n          children: [],\n          checked: false,\n          partial: false,\n          loading: false,\n          loaded: false,\n          error: false,\n          childrenLoaded: false,\n          data: rawOption\n        })\n      })\n    }\n\n    function initOptionFull(option: CascaderOptionState, separator: string) {\n      let value = option.value as string\n      let label = option.label\n      let parent = optionIdMap.get(option.parent)\n\n      while (parent) {\n        value = `${parent.value}${separator}${value}`\n        label = `${parent.label}${separator}${label}`\n        parent = optionIdMap.get(parent.parent)\n      }\n\n      option.fullValue = value\n      option.fullLabel = label\n    }\n\n    function queryChildrenLoaded(option: CascaderOptionState) {\n      if (option.hasChild && !option.children?.length) {\n        return option.loaded\n      }\n\n      const loop: CascaderOptionState[] = [...option.children]\n\n      while (loop.length) {\n        const child = loop.shift()!\n\n        if (child.childrenLoaded) continue\n\n        if (child.hasChild && !child.children?.length) {\n          child.childrenLoaded = child.loaded\n\n          if (!child.loaded) return false\n        }\n\n        loop.push(...child.children)\n      }\n\n      return true\n    }\n\n    function updateMergedProps() {\n      const baseValues = isAsyncLoad.value\n        ? currentValues.value.concat(mergedValues.value)\n        : currentValues.value\n      const values = new Set(baseValues)\n      const loop = [...baseValues]\n\n      while (loop.length) {\n        const value = loop.shift()!\n\n        const option = optionValueMap.get(value)\n\n        if (option) {\n          const parent = optionIdMap.get(option.parent)\n\n          if (parent?.checked) {\n            values.delete(value)\n            values.add(parent.fullValue)\n            loop.push(parent.fullValue)\n          }\n        }\n      }\n\n      const briefLabel = props.briefLabel\n\n      mergedValues.value = Array.from(values).filter(value => optionValueMap.has(value))\n      mergedLabels.value = mergedValues.value\n        .map(value => {\n          const option = optionValueMap.get(value)!\n\n          return briefLabel ? option.label : option.fullLabel\n        })\n        .filter(Boolean)\n    }\n\n    function isFlatArray<T extends string | number>(value: T[] | T[][]): value is T[] {\n      return !!value.length && !Array.isArray(value[0])\n    }\n\n    function isComplexArray<T extends string | number>(value: T[] | T[][]): value is T[][] {\n      return !!value.length && Array.isArray(value[0])\n    }\n\n    function initValueAndLabel(value: CascaderValue | null) {\n      for (const option of optionList) {\n        option.checked = false\n        option.partial = false\n      }\n\n      if (!value?.length) {\n        currentValues.value = []\n        currentLabels.value = []\n        return\n      }\n\n      const briefLabel = props.briefLabel\n\n      if (props.multiple) {\n        const normalizedValue = isFlatArray(value) ? [value] : value\n        const valueSet = new Set<string>(normalizedValue.map(v => v.join(props.separator)))\n        const selectedValues: string[] = []\n        const selectedLabels: string[] = []\n        const selectedOptions: CascaderOptionState[] = []\n\n        valueSet.forEach(value => {\n          const option = optionValueMap.get(value)\n\n          if (option) {\n            option.checked = true\n            option.partial = false\n\n            selectedValues.push(value)\n            selectedLabels.push(briefLabel ? option.label : option.fullLabel)\n            selectedOptions.push(option)\n          }\n        })\n\n        if (!props.noCascaded) {\n          const originalOptions = selectedOptions.concat(\n            Array.from(optionIdMap.values()).filter(option => option.disabled && option.checked)\n          )\n\n          for (let i = 0, len = originalOptions.length; i < len; ++i) {\n            const option = originalOptions[i]\n\n            updateCheckedUpward(option)\n            updateCheckedDown(option)\n          }\n        }\n\n        currentValues.value = selectedValues\n        currentLabels.value = selectedLabels\n      } else {\n        const normalizedValue = isComplexArray(value) ? value[0] : value\n        const stringValue = normalizedValue.join(props.separator)\n        const option = optionValueMap.get(stringValue)\n\n        if (option) {\n          currentValues.value = [stringValue]\n          currentLabels.value = [briefLabel ? option.label : option.fullLabel]\n\n          if (props.noCascaded) {\n            option.checked = true\n            option.partial = false\n          }\n        } else {\n          currentValues.value = []\n          currentLabels.value = []\n        }\n      }\n\n      if (openedIds.value.length) return\n\n      const firstValue = currentValues.value[0]\n\n      if (firstValue) {\n        const option = optionValueMap.get(firstValue)!\n        const ids = [option.id]\n\n        let parent = optionIdMap.get(option.parent)\n\n        while (parent) {\n          ids.push(parent.id)\n          parent = optionIdMap.get(parent.parent)\n        }\n\n        openedIds.value = ids.reverse().slice(0, -1)\n      }\n    }\n\n    function setVisible(visible: boolean) {\n      if (currentVisible.value === visible) return\n\n      currentVisible.value = visible\n\n      emit('update:visible', visible)\n      emitEvent(props.onToggle, visible)\n    }\n\n    async function handlePanelOpen(option: CascaderOptionState, depth: number) {\n      if (!option.hasChild && !option.children?.length) return\n\n      if (isAsyncLoad.value && !option.children?.length && !option.loaded) {\n        option.loading = true\n\n        let result: ReturnType<typeof props.onAsyncLoad>\n\n        try {\n          result = props.onAsyncLoad(option.data)\n          result = isPromise(result) ? await result : result\n        } catch (e) {\n          option.error = true\n          option.loading = false\n          return\n        }\n\n        const rawOptions = result as any[]\n\n        if (!Array.isArray(rawOptions) || !rawOptions.length) {\n          option.hasChild = false\n        } else {\n          const options = createOptionStates(rawOptions)\n          const parentId = option.id\n          const separator = props.separator\n\n          option.children.push(...options)\n\n          let idCount = Math.max(...Array.from(optionIdMap.keys()).map(Number)) + 1\n\n          options.forEach(option => {\n            option.id = idCount++\n            option.parent = parentId\n\n            initOptionFull(option, separator)\n\n            optionIdMap.set(option.id, option)\n            optionValueMap.set(option.fullValue, option)\n          })\n\n          optionList.push(...options)\n        }\n\n        option.loaded = true\n        option.loading = false\n\n        const upstream = queryUpstreamOptions(option)\n        upstream.forEach(option => {\n          option.childrenLoaded = queryChildrenLoaded(option)\n        })\n      }\n\n      if (depth < openedIds.value.length) {\n        openedIds.value = openedIds.value.slice(0, depth)\n      }\n\n      openedIds.value.push(option.id)\n      requestAnimationFrame(() => {\n        getLast(panelElList.value)?.$el?.focus()\n      })\n    }\n\n    function handleOptionSelect(option: CascaderOptionState, depth: number) {\n      if (!option) return\n\n      if (option.hasChild || option.children?.length) {\n        handlePanelOpen(option, depth)\n      } else {\n        handleSingleSelect(option.fullValue)\n      }\n    }\n\n    function queryUpstreamOptions(option: CascaderOptionState) {\n      const options = [option]\n      let parent = optionIdMap.get(option.parent)\n\n      while (parent) {\n        options.push(parent)\n        parent = optionIdMap.get(parent.parent)\n      }\n\n      return options\n    }\n\n    function updateCheckedUpward(originalOption: CascaderOptionState) {\n      let option = originalOption\n\n      while (!isNull(option.parent)) {\n        const parent = optionIdMap.get(option.parent)\n\n        if (!parent) break\n\n        if (option.checked === parent.checked && option.partial === parent.partial) {\n          break\n        }\n\n        if (option.checked) {\n          parent.checked = parent.children.every(item => item.disabled || item.checked)\n          parent.partial = !parent.checked\n        } else {\n          parent.checked = false\n          parent.partial = parent.children.some(item => item.checked || item.partial)\n        }\n\n        option = parent\n      }\n    }\n\n    function updateCheckedDown(originalOption: CascaderOptionState) {\n      const checked = originalOption.checked\n      const partial = originalOption.partial\n\n      const loop = [...originalOption.children]\n\n      let option\n\n      while (loop.length) {\n        option = loop.shift()!\n\n        if (option.disabled) continue\n\n        option.checked = checked\n        option.partial = partial\n\n        if (option.children?.length) {\n          loop.push(...option.children)\n        }\n      }\n    }\n\n    function handleOptionCheck(option: CascaderOptionState) {\n      if (!option) return\n\n      const options = Array.from(optionIdMap.values())\n      const checked = !option.checked\n\n      if (!props.multiple) {\n        for (let i = 0, len = options.length; i < len; ++i) {\n          options[i].checked = false\n        }\n\n        option.checked = checked\n        option.partial = false\n\n        return handleSingleSelect(option.fullValue)\n      }\n\n      option.checked = checked\n      option.partial = false\n\n      if (!props.noCascaded) {\n        const originalOptions = [option].concat(\n          options.filter(option => option.disabled && option.checked)\n        )\n\n        for (let i = 0, len = originalOptions.length; i < len; ++i) {\n          const option = originalOptions[i]\n\n          updateCheckedUpward(option)\n          updateCheckedDown(option)\n        }\n      }\n\n      emitEvent(props[checked ? 'onSelect' : 'onCancel'], option.fullValue, option.data)\n      emitMultipleChange()\n    }\n\n    function emitMultipleChange() {\n      const options = Array.from(optionIdMap.values())\n      const selectedOptions = props.noCascaded\n        ? options.filter(option => option.checked)\n        : options.filter(option => option.checked && !(option.hasChild || option.children?.length))\n\n      const selectedValues: string[] = []\n      const selectedLabels: string[] = []\n\n      const values: (string | number)[][] = []\n      const dataList: Data[][] = []\n      const briefLabel = props.briefLabel\n\n      selectedOptions.forEach(option => {\n        selectedValues.push(option.fullValue)\n        selectedLabels.push(briefLabel ? option.label : option.fullLabel)\n\n        const { value, data } = queryArrayMeta(option.fullValue)\n\n        values.push(value)\n        dataList.push(data)\n      })\n\n      currentValues.value = selectedValues\n      currentLabels.value = selectedLabels\n\n      if (usingMerged.value) {\n        if (isAsyncLoad.value) {\n          mergedValues.value = options\n            .filter(option => option.checked)\n            .map(option => option.fullValue)\n        }\n\n        updateMergedProps()\n      }\n\n      if (usingMerged.value && isAsyncLoad.value) {\n        values.length = 0\n        dataList.length = 0\n\n        mergedValues.value.forEach(fullValue => {\n          const option = optionValueMap.get(fullValue)\n\n          if (option) {\n            const { value, data } = queryArrayMeta(option.fullValue)\n\n            values.push(value)\n            dataList.push(data)\n          }\n        })\n      }\n\n      emitChangeEvent(values, dataList)\n      nextTick(updatePopper)\n    }\n\n    function handleSingleSelect(fullValue: string) {\n      const option = optionValueMap.get(fullValue)\n\n      if (!option) return\n\n      emitEvent(props.onSelect, fullValue, option.data)\n\n      if (fullValue) {\n        currentValues.value[0] = fullValue\n        currentLabels.value[0] = props.briefLabel ? option.label : option.fullLabel\n      } else {\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n      }\n\n      const { value, data } = queryArrayMeta(fullValue)\n\n      emitChangeEvent(value, data)\n      setVisible(false)\n    }\n\n    function emitChangeEvent(value: CascaderValue, data: Data[] | Data[][]) {\n      emittedValue.value = value\n\n      nextTick(() => {\n        outsideChanged = false\n\n        emit('update:value', value)\n        setFieldValue(value)\n        emitEvent(props.onChange as ChangeListener, value, data)\n        validateField()\n      })\n    }\n\n    function queryArrayMeta(fullValue: string) {\n      let option = optionValueMap.get(fullValue)!\n\n      if (!option) return { value: [], data: [] }\n\n      const value = [option.value]\n      const data = [option.data]\n\n      while (option.parent) {\n        const parent = optionIdMap.get(option.parent)\n\n        if (!parent) break\n\n        value.push(parent.value)\n        data.push(parent.data)\n        option = parent\n      }\n\n      return {\n        value: value.reverse(),\n        data: data.reverse()\n      }\n    }\n\n    function toggleVisible(visible = !currentVisible.value) {\n      if (props.disabled || readonly.value) return\n\n      setVisible(visible)\n    }\n\n    function handleClickOutside() {\n      restTipShow.value = false\n      emitEvent(props.onClickOutside)\n\n      if (props.outsideClose && currentVisible.value) {\n        setVisible(false)\n        outsideClosed = true\n        emitEvent(props.onOutsideClose)\n      }\n    }\n\n    function handleClear() {\n      if (props.disabled || readonly.value) return\n\n      if (props.clearable) {\n        const prev = emittedValue.value\n\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n        mergedValues.value.length = 0\n        mergedLabels.value.length = 0\n        openedIds.value.length = 0\n        emittedValue.value = prev?.length === 0 ? prev : []\n        restTipShow.value = false\n\n        for (const option of optionIdMap.values()) {\n          option.checked = false\n          option.partial = false\n        }\n\n        if (prev?.length !== 0) {\n          emit('update:value', emittedValue.value)\n          emitEvent(props.onChange as ChangeListener, emittedValue.value, [])\n        }\n\n        emitEvent(props.onClear)\n        clearField(emittedValue.value)\n      }\n    }\n\n    function toggleShowRestTip() {\n      if (!currentVisible.value) {\n        restTipShow.value = !restTipShow.value\n      } else {\n        restTipShow.value = false\n      }\n    }\n\n    function handleTipClose(fullValue: string) {\n      if (props.disabled || readonly.value) return\n\n      if (props.multiple) {\n        handleOptionCheck(optionValueMap.get(fullValue)!)\n      } else {\n        handleSingleSelect(fullValue)\n      }\n    }\n\n    function handlePanelKeyOpen(option: CascaderOptionState, depth: number) {\n      handlePanelOpen(option, depth)\n\n      requestAnimationFrame(() => {\n        const panel = getLast(panelElList.value)\n\n        if (panel && panel.currentHitting < 0) {\n          panel.currentHitting = panel.options.findIndex(option => option.id === prevClosedId)\n\n          if (panel.currentHitting < 0) {\n            panel.currentHitting = 0\n          }\n        }\n      })\n    }\n\n    function handlePanelBack() {\n      prevClosedId = openedIds.value.pop()!\n    }\n\n    function handlePanelsEnter() {\n      requestAnimationFrame(() => {\n        isPopperShow.value = true\n      })\n    }\n\n    return {\n      props,\n      nh,\n      icons,\n      locale,\n      idFor,\n      currentVisible,\n      isPopperShow,\n      currentValues,\n      currentLabels,\n      transferTo,\n      isHover,\n      openedIds,\n      restTagCount,\n      restTipShow,\n      selectorWidth,\n\n      optionsList,\n      className,\n      selectorClass,\n      hasValue,\n      hasPrefix,\n      isAsyncLoad,\n      usingMerged,\n      templateValues,\n      templateLabels,\n      usingHover,\n      showClear,\n\n      wrapper,\n      reference,\n      popper,\n      panelElList,\n\n      handlePanelOpen,\n      handleOptionSelect,\n      handleOptionCheck,\n      toggleVisible,\n      handleClear,\n      toggleShowRestTip,\n      handleTipClose,\n      handlePanelKeyOpen,\n      handlePanelBack,\n      handlePanelsEnter,\n\n      focus: (options?: FocusOptions) => reference.value?.focus(options),\n      blur: () => reference.value?.blur()\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    @click=\"toggleVisible()\"\n  >\n    <div\n      ref=\"reference\"\n      :class=\"selectorClass\"\n      tabindex=\"0\"\n      @keydown.space.prevent=\"toggleVisible()\"\n      @keydown.tab=\"toggleVisible(false)\"\n    >\n      <div\n        v-if=\"hasPrefix\"\n        :class=\"[nh.be('icon'), nh.be('prefix')]\"\n        :style=\"{ color: props.prefixColor }\"\n      >\n        <slot name=\"prefix\">\n          <Icon :icon=\"props.prefix\"></Icon>\n        </slot>\n      </div>\n      <div :class=\"nh.be('control')\">\n        <slot name=\"control\">\n          <Overflow\n            v-if=\"props.multiple\"\n            inherit\n            :class=\"[nh.be('tags')]\"\n            :items=\"templateValues\"\n            :max-count=\"props.maxTagCount\"\n            @rest-change=\"restTagCount = $event\"\n          >\n            <template #default=\"{ item, index }\">\n              <Tag\n                inherit\n                :class=\"nh.be('tag')\"\n                :type=\"props.tagType\"\n                closable\n                :disabled=\"props.disabled\"\n                @click.stop=\"toggleVisible()\"\n                @close=\"handleTipClose(item)\"\n              >\n                {{ templateLabels[index] }}\n              </Tag>\n            </template>\n            <template #counter=\"{ count }\">\n              <Tag\n                v-if=\"props.noRestTip\"\n                inherit\n                :class=\"[nh.be('tag'), nh.be('counter')]\"\n                :type=\"props.tagType\"\n                :disabled=\"props.disabled\"\n              >\n                {{ `+${count}` }}\n              </Tag>\n              <span v-else>\n                <Tooltip\n                  inherit\n                  :transfer=\"false\"\n                  :visible=\"restTipShow\"\n                  trigger=\"custom\"\n                  placement=\"top-end\"\n                  :tip-class=\"nh.be('rest-tip')\"\n                  @click.stop=\"toggleShowRestTip\"\n                >\n                  <template #trigger>\n                    <Tag\n                      inherit\n                      :class=\"[nh.be('tag'), nh.be('counter')]\"\n                      :type=\"props.tagType\"\n                      :disabled=\"props.disabled\"\n                    >\n                      {{ `+${count}` }}\n                    </Tag>\n                  </template>\n                  <NativeScroll inherit use-y-bar>\n                    <template v-for=\"(item, index) in templateValues\" :key=\"index\">\n                      <Tag\n                        v-if=\"index >= templateValues.length - restTagCount\"\n                        inherit\n                        :class=\"nh.be('tag')\"\n                        closable\n                        :type=\"props.tagType\"\n                        :disabled=\"props.disabled\"\n                        @close=\"handleTipClose(item)\"\n                      >\n                        {{ templateLabels[index] }}\n                      </Tag>\n                    </template>\n                  </NativeScroll>\n                </Tooltip>\n              </span>\n            </template>\n          </Overflow>\n          <template v-else>\n            {{ currentLabels[0] }}\n          </template>\n          <span\n            v-if=\"(props.placeholder ?? locale.placeholder) && !hasValue\"\n            :class=\"nh.be('placeholder')\"\n          >\n            {{ props.placeholder ?? locale.placeholder }}\n          </span>\n        </slot>\n      </div>\n      <div\n        v-if=\"!props.noSuffix\"\n        :class=\"[nh.be('icon'), nh.be('suffix')]\"\n        :style=\"{\n          color: props.suffixColor,\n          opacity: showClear || props.loading ? '0%' : ''\n        }\"\n      >\n        <slot name=\"suffix\">\n          <Icon\n            v-if=\"props.suffix\"\n            :icon=\"props.suffix\"\n            :class=\"{\n              [nh.be('arrow')]: !props.staticSuffix\n            }\"\n          ></Icon>\n          <Icon v-else v-bind=\"icons.angleDown\" :class=\"nh.be('arrow')\"></Icon>\n        </slot>\n      </div>\n      <div\n        v-else-if=\"props.clearable || props.loading\"\n        :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n      ></div>\n      <Transition :name=\"nh.ns('fade')\" appear>\n        <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear\">\n          <Icon v-bind=\"icons.clear\"></Icon>\n        </div>\n        <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n          ></Icon>\n        </div>\n      </Transition>\n    </div>\n    <Popper\n      ref=\"popper\"\n      :class=\"[nh.be('popper'), nh.ns('input-vars'), nh.bs('vars')]\"\n      :visible=\"currentVisible\"\n      :to=\"transferTo\"\n      :transition=\"props.transitionName\"\n      :alive=\"props.popperAlive ?? !transferTo\"\n      @click.stop\n      @enter=\"handlePanelsEnter\"\n    >\n      <div\n        :class=\"{\n          [nh.be('panels')]: true,\n          [nh.bem('panels', 'empty')]: !optionsList[0] || !optionsList[0].length\n        }\"\n      >\n        <template v-if=\"optionsList[0] && optionsList[0].length\">\n          <CascaderPanel\n            v-for=\"(items, index) in optionsList\"\n            :key=\"index\"\n            :ref=\"(panel: any) => panel && panelElList.push(panel)\"\n            :options=\"items\"\n            :opened-id=\"openedIds[index]\"\n            :values=\"currentValues\"\n            :ready=\"isPopperShow\"\n            :multiple=\"props.multiple\"\n            :is-async=\"isAsyncLoad\"\n            :merged=\"usingMerged\"\n            :no-cascaded=\"props.noCascaded\"\n            @select=\"handleOptionSelect($event, index)\"\n            @hover=\"usingHover && handlePanelOpen($event, index)\"\n            @check=\"handleOptionCheck($event)\"\n            @open=\"handlePanelKeyOpen($event, index)\"\n            @back=\"handlePanelBack\"\n            @close=\"currentVisible = false\"\n          >\n            <template #default=\"payload\">\n              <slot v-bind=\"payload\"></slot>\n            </template>\n            <template #label=\"payload\">\n              <slot name=\"label\" v-bind=\"payload\"></slot>\n            </template>\n          </CascaderPanel>\n        </template>\n        <div v-else :class=\"nh.be('empty')\" :style=\"{ width: `${selectorWidth}px` }\">\n          <slot name=\"empty\">\n            {{ props.emptyText ?? locale.empty }}\n          </slot>\n        </div>\n      </div>\n    </Popper>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { NativeScroll } from '@/components/native-scroll'\nimport { Overflow } from '@/components/overflow'\nimport { Popper } from '@/components/popper'\nimport { Tag } from '@/components/tag'\nimport { Tooltip } from '@/components/tooltip'\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onBeforeUpdate,\n  reactive,\n  ref,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport CascaderPanel from './cascader-panel.vue'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { placementWhileList, useClickOutside, useHover, usePopper } from '@vexip-ui/hooks'\nimport { flatTree, getLast, isNull, isPromise, transformTree } from '@vexip-ui/utils'\nimport { cascaderProps } from './props'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { CascaderKeyConfig, CascaderOptionState, CascaderValue, Data } from './symbol'\n\ntype ChangeListener = (value: CascaderValue, data: Data[] | Data[][]) => void\n\nconst ID_KEY = Symbol('ID_KEY')\nconst PARENT_KEY = Symbol('PARENT_KEY')\n\nconst defaultKeyConfig: Required<CascaderKeyConfig> = {\n  value: 'value',\n  label: 'label',\n  children: 'children',\n  disabled: 'disabled',\n  hasChild: 'hasChild'\n}\n\nexport default defineComponent({\n  name: 'Cascader',\n  components: {\n    CascaderPanel,\n    Icon,\n    NativeScroll,\n    Overflow,\n    Popper,\n    Tag,\n    Tooltip\n  },\n  props: cascaderProps,\n  emits: ['update:value', 'update:visible'],\n  setup(_props, { emit, slots }) {\n    const {\n      idFor,\n      state,\n      disabled,\n      loading,\n      size,\n      validateField,\n      clearField,\n      getFieldValue,\n      setFieldValue\n    } = useFieldStore<CascaderValue>(() => reference.value?.focus())\n\n    const nh = useNameHelper('cascader')\n    const props = useProps('cascader', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      locale: null,\n      value: {\n        default: () => getFieldValue([]),\n        static: true\n      },\n      visible: {\n        default: false,\n        static: true\n      },\n      options: {\n        default: () => [],\n        static: true\n      },\n      placeholder: null,\n      prefix: createIconProp(),\n      prefixColor: '',\n      suffix: createIconProp(),\n      suffixColor: '',\n      noCascaded: false,\n      multiple: false,\n      disabled: () => disabled.value,\n      clearable: false,\n      placement: {\n        default: 'bottom-start',\n        validator: value => placementWhileList.includes(value)\n      },\n      transfer: false,\n      staticSuffix: false,\n      noSuffix: false,\n      transitionName: () => nh.ns('drop'),\n      outsideClose: true,\n      keyConfig: () => ({}),\n      separator: {\n        default: '/',\n        validator: value => value.length === 1\n      },\n      hoverTrigger: false,\n      maxTagCount: 0,\n      briefLabel: false,\n      noRestTip: false,\n      onAsyncLoad: {\n        default: null,\n        isFunc: true\n      },\n      mergeTags: false,\n      tagType: null,\n      emptyText: null,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingLock: false,\n      loadingEffect: null,\n      transparent: false,\n      popperAlive: null\n    })\n\n    const icons = useIcons()\n    const locale = useLocale('select', toRef(props, 'locale'))\n\n    const currentVisible = ref(props.visible)\n    const currentValues = ref<string[]>([])\n    const currentLabels = ref<string[]>([])\n    const mergedValues = ref<string[]>([])\n    const mergedLabels = ref<string[]>([])\n    const isPopperShow = ref(false)\n    const placement = toRef(props, 'placement')\n    const transfer = toRef(props, 'transfer')\n\n    const emittedValue = ref<CascaderValue | null>(null)\n    const optionTree = ref<CascaderOptionState[]>(null!)\n    const isAsyncLoad = computed(() => typeof props.onAsyncLoad === 'function')\n\n    let optionList: CascaderOptionState[] = null!\n    let optionIdMap: Map<number, CascaderOptionState> = null!\n    let optionValueMap: Map<string, CascaderOptionState> = null!\n    let outsideClosed = false\n    let prevClosedId = -1\n    let flattedOptions: Record<any, any>[]\n\n    const updateTrigger = ref(0)\n\n    watchEffect(() => {\n      /* eslint-disable @typescript-eslint/no-unused-expressions */\n      props.keyConfig.value\n      props.keyConfig.label\n      props.keyConfig.disabled\n      props.keyConfig.hasChild\n      props.separator\n      isAsyncLoad.value\n      /* eslint-enable */\n\n      flattedOptions = flatTree(props.options as Record<any, any>[], {\n        keyField: ID_KEY,\n        parentField: PARENT_KEY,\n        childField: props.keyConfig.children ?? defaultKeyConfig.children,\n        forceInject: true\n      })\n\n      updateTrigger.value++\n    })\n\n    watch(updateTrigger, initOptionStates, { immediate: true })\n\n    function initOptionStates() {\n      const separator = props.separator\n      const isAsync = isAsyncLoad.value\n\n      optionList = createOptionStates(flattedOptions)\n      optionIdMap = new Map()\n      optionValueMap = new Map()\n\n      for (let i = 0, len = optionList.length; i < len; ++i) {\n        const option = optionList[i]\n\n        initOptionFull(option, separator)\n        optionIdMap.set(option.id, option)\n        optionValueMap.set(option.fullValue, option)\n\n        if (isAsync) {\n          option.childrenLoaded = queryChildrenLoaded(option)\n        }\n      }\n\n      optionTree.value = transformTree(optionList)\n      initValueAndLabel(emittedValue.value)\n    }\n\n    const openedIds = ref<number[]>([])\n    const optionsList = computed(() => {\n      return [\n        optionTree.value,\n        ...openedIds.value.map(id => optionIdMap.get(id)?.children).filter(Boolean)\n      ]\n    })\n\n    const wrapper = useClickOutside(handleClickOutside)\n    const popper = ref<PopperExposed>()\n    const { reference, transferTo, updatePopper } = usePopper({\n      placement,\n      transfer,\n      wrapper,\n      popper: computed(() => popper.value?.wrapper),\n      isDrop: true\n    })\n    const { isHover } = useHover(reference)\n\n    const panelElList = ref<InstanceType<typeof CascaderPanel>[]>([])\n    const restTagCount = ref(0)\n    const restTipShow = ref(false)\n    const selectorWidth = ref(0)\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.ns('input-vars')]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('multiple')]: props.multiple,\n        [nh.bm('responsive')]: props.multiple && props.maxTagCount <= 0\n      }\n    })\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const selectorClass = computed(() => {\n      const baseCls = nh.be('selector')\n\n      return {\n        [baseCls]: true,\n        [`${baseCls}--focused`]: !props.disabled && currentVisible.value,\n        [`${baseCls}--disabled`]: props.disabled,\n        [`${baseCls}--readonly`]: readonly.value,\n        [`${baseCls}--loading`]: props.loading,\n        [`${baseCls}--${props.size}`]: props.size !== 'default',\n        [`${baseCls}--${props.state}`]: props.state !== 'default',\n        [`${baseCls}--has-prefix`]: hasPrefix.value,\n        [`${baseCls}--has-suffix`]: !props.noSuffix,\n        [`${baseCls}--transparent`]: props.transparent\n      }\n    })\n    const hasPrefix = computed(() => {\n      return !!(slots.prefix || props.prefix)\n    })\n    const usingMerged = computed(() => props.mergeTags && !props.noCascaded)\n    const templateValues = computed(() =>\n      usingMerged.value ? mergedValues.value : currentValues.value\n    )\n    const templateLabels = computed(() =>\n      usingMerged.value ? mergedLabels.value : currentLabels.value\n    )\n    const hasValue = computed(() => !!templateValues.value[0])\n    const usingHover = computed(() => props.hoverTrigger && !isAsyncLoad.value)\n    const showClear = computed(() => {\n      return (\n        !props.disabled && !readonly.value && props.clearable && isHover.value && hasValue.value\n      )\n    })\n\n    watch(\n      () => props.visible,\n      value => {\n        currentVisible.value = value\n      }\n    )\n    watch(currentVisible, async value => {\n      if (value) {\n        restTipShow.value = false\n        selectorWidth.value = wrapper.value?.offsetWidth || 0\n\n        await updatePopper()\n        nextTick(() => {\n          getLast(panelElList.value)?.$el?.focus()\n        })\n      } else {\n        isPopperShow.value = false\n\n        if (reference.value && !outsideClosed) {\n          reference.value.focus()\n        }\n      }\n\n      outsideClosed = false\n    })\n\n    let outsideChanged = false\n\n    watch(emittedValue, () => {\n      outsideChanged = true\n    })\n    watch(\n      () => props.value,\n      value => {\n        if (value !== emittedValue.value || outsideChanged) {\n          emittedValue.value = value\n          initValueAndLabel(value)\n          nextTick(() => {\n            outsideChanged = false\n          })\n        }\n      },\n      { immediate: true }\n    )\n    watch(\n      () => props.briefLabel,\n      brief => {\n        currentLabels.value = currentValues.value\n          .map(value => optionValueMap.get(value)?.[brief ? 'label' : 'fullLabel'] as string)\n          .filter(Boolean)\n\n        // nextTick(computeTagsOverflow)\n      }\n    )\n    watch(isAsyncLoad, value => {\n      if (value) {\n        for (const option of optionIdMap.values()) {\n          option.childrenLoaded = queryChildrenLoaded(option)\n        }\n      }\n    })\n    watch(usingMerged, value => {\n      if (value) {\n        mergedValues.value.length = 0\n        mergedLabels.value.length = 0\n\n        updateMergedProps()\n      }\n\n      if (isAsyncLoad.value) {\n        const originalOptions: CascaderOptionState[] = []\n\n        for (const option of optionIdMap.values()) {\n          if (option.checked) {\n            originalOptions.push(option)\n          }\n\n          if (option.hasChild && !option.children.length && !option.loaded) {\n            option.checked = false\n          }\n        }\n\n        for (let i = 0, len = originalOptions.length; i < len; ++i) {\n          const option = originalOptions[i]\n\n          updateCheckedUpward(option)\n          updateCheckedDown(option)\n        }\n      }\n\n      emitMultipleChange()\n    })\n    watch(\n      () => optionsList.value.length,\n      () => {\n        updatePopper()\n        nextTick(() => {\n          getLast(panelElList.value)?.$el?.focus()\n          prevClosedId = -1\n        })\n      }\n    )\n    watch(\n      () => props.disabled,\n      value => {\n        if (value) {\n          setVisible(false)\n        }\n      }\n    )\n    watch(readonly, value => {\n      if (value) {\n        setVisible(false)\n      }\n    })\n\n    onBeforeUpdate(() => {\n      panelElList.value.length = 0\n    })\n\n    function createOptionStates(rawOptions: Record<string | symbol, any>[]) {\n      const {\n        value: valueKey,\n        label: labelKey,\n        disabled: disabledKey,\n        hasChild: hasChildKey\n      } = { ...defaultKeyConfig, ...props.keyConfig }\n\n      return rawOptions.map(rawOption => {\n        const {\n          [ID_KEY]: id,\n          [PARENT_KEY]: parent,\n          [valueKey]: value,\n          [labelKey]: label,\n          [disabledKey]: disabled,\n          [hasChildKey]: hasChild\n        } = rawOption\n\n        return reactive<CascaderOptionState>({\n          id,\n          parent,\n          value,\n          disabled,\n          hasChild,\n          label: label || String(value),\n          fullValue: '',\n          fullLabel: '',\n          children: [],\n          checked: false,\n          partial: false,\n          loading: false,\n          loaded: false,\n          error: false,\n          childrenLoaded: false,\n          data: rawOption\n        })\n      })\n    }\n\n    function initOptionFull(option: CascaderOptionState, separator: string) {\n      let value = option.value as string\n      let label = option.label\n      let parent = optionIdMap.get(option.parent)\n\n      while (parent) {\n        value = `${parent.value}${separator}${value}`\n        label = `${parent.label}${separator}${label}`\n        parent = optionIdMap.get(parent.parent)\n      }\n\n      option.fullValue = value\n      option.fullLabel = label\n    }\n\n    function queryChildrenLoaded(option: CascaderOptionState) {\n      if (option.hasChild && !option.children?.length) {\n        return option.loaded\n      }\n\n      const loop: CascaderOptionState[] = [...option.children]\n\n      while (loop.length) {\n        const child = loop.shift()!\n\n        if (child.childrenLoaded) continue\n\n        if (child.hasChild && !child.children?.length) {\n          child.childrenLoaded = child.loaded\n\n          if (!child.loaded) return false\n        }\n\n        loop.push(...child.children)\n      }\n\n      return true\n    }\n\n    function updateMergedProps() {\n      const baseValues = isAsyncLoad.value\n        ? currentValues.value.concat(mergedValues.value)\n        : currentValues.value\n      const values = new Set(baseValues)\n      const loop = [...baseValues]\n\n      while (loop.length) {\n        const value = loop.shift()!\n\n        const option = optionValueMap.get(value)\n\n        if (option) {\n          const parent = optionIdMap.get(option.parent)\n\n          if (parent?.checked) {\n            values.delete(value)\n            values.add(parent.fullValue)\n            loop.push(parent.fullValue)\n          }\n        }\n      }\n\n      const briefLabel = props.briefLabel\n\n      mergedValues.value = Array.from(values).filter(value => optionValueMap.has(value))\n      mergedLabels.value = mergedValues.value\n        .map(value => {\n          const option = optionValueMap.get(value)!\n\n          return briefLabel ? option.label : option.fullLabel\n        })\n        .filter(Boolean)\n    }\n\n    function isFlatArray<T extends string | number>(value: T[] | T[][]): value is T[] {\n      return !!value.length && !Array.isArray(value[0])\n    }\n\n    function isComplexArray<T extends string | number>(value: T[] | T[][]): value is T[][] {\n      return !!value.length && Array.isArray(value[0])\n    }\n\n    function initValueAndLabel(value: CascaderValue | null) {\n      for (const option of optionList) {\n        option.checked = false\n        option.partial = false\n      }\n\n      if (!value?.length) {\n        currentValues.value = []\n        currentLabels.value = []\n        return\n      }\n\n      const briefLabel = props.briefLabel\n\n      if (props.multiple) {\n        const normalizedValue = isFlatArray(value) ? [value] : value\n        const valueSet = new Set<string>(normalizedValue.map(v => v.join(props.separator)))\n        const selectedValues: string[] = []\n        const selectedLabels: string[] = []\n        const selectedOptions: CascaderOptionState[] = []\n\n        valueSet.forEach(value => {\n          const option = optionValueMap.get(value)\n\n          if (option) {\n            option.checked = true\n            option.partial = false\n\n            selectedValues.push(value)\n            selectedLabels.push(briefLabel ? option.label : option.fullLabel)\n            selectedOptions.push(option)\n          }\n        })\n\n        if (!props.noCascaded) {\n          const originalOptions = selectedOptions.concat(\n            Array.from(optionIdMap.values()).filter(option => option.disabled && option.checked)\n          )\n\n          for (let i = 0, len = originalOptions.length; i < len; ++i) {\n            const option = originalOptions[i]\n\n            updateCheckedUpward(option)\n            updateCheckedDown(option)\n          }\n        }\n\n        currentValues.value = selectedValues\n        currentLabels.value = selectedLabels\n      } else {\n        const normalizedValue = isComplexArray(value) ? value[0] : value\n        const stringValue = normalizedValue.join(props.separator)\n        const option = optionValueMap.get(stringValue)\n\n        if (option) {\n          currentValues.value = [stringValue]\n          currentLabels.value = [briefLabel ? option.label : option.fullLabel]\n\n          if (props.noCascaded) {\n            option.checked = true\n            option.partial = false\n          }\n        } else {\n          currentValues.value = []\n          currentLabels.value = []\n        }\n      }\n\n      if (openedIds.value.length) return\n\n      const firstValue = currentValues.value[0]\n\n      if (firstValue) {\n        const option = optionValueMap.get(firstValue)!\n        const ids = [option.id]\n\n        let parent = optionIdMap.get(option.parent)\n\n        while (parent) {\n          ids.push(parent.id)\n          parent = optionIdMap.get(parent.parent)\n        }\n\n        openedIds.value = ids.reverse().slice(0, -1)\n      }\n    }\n\n    function setVisible(visible: boolean) {\n      if (currentVisible.value === visible) return\n\n      currentVisible.value = visible\n\n      emit('update:visible', visible)\n      emitEvent(props.onToggle, visible)\n    }\n\n    async function handlePanelOpen(option: CascaderOptionState, depth: number) {\n      if (!option.hasChild && !option.children?.length) return\n\n      if (isAsyncLoad.value && !option.children?.length && !option.loaded) {\n        option.loading = true\n\n        let result: ReturnType<typeof props.onAsyncLoad>\n\n        try {\n          result = props.onAsyncLoad(option.data)\n          result = isPromise(result) ? await result : result\n        } catch (e) {\n          option.error = true\n          option.loading = false\n          return\n        }\n\n        const rawOptions = result as any[]\n\n        if (!Array.isArray(rawOptions) || !rawOptions.length) {\n          option.hasChild = false\n        } else {\n          const options = createOptionStates(rawOptions)\n          const parentId = option.id\n          const separator = props.separator\n\n          option.children.push(...options)\n\n          let idCount = Math.max(...Array.from(optionIdMap.keys()).map(Number)) + 1\n\n          options.forEach(option => {\n            option.id = idCount++\n            option.parent = parentId\n\n            initOptionFull(option, separator)\n\n            optionIdMap.set(option.id, option)\n            optionValueMap.set(option.fullValue, option)\n          })\n\n          optionList.push(...options)\n        }\n\n        option.loaded = true\n        option.loading = false\n\n        const upstream = queryUpstreamOptions(option)\n        upstream.forEach(option => {\n          option.childrenLoaded = queryChildrenLoaded(option)\n        })\n      }\n\n      if (depth < openedIds.value.length) {\n        openedIds.value = openedIds.value.slice(0, depth)\n      }\n\n      openedIds.value.push(option.id)\n      requestAnimationFrame(() => {\n        getLast(panelElList.value)?.$el?.focus()\n      })\n    }\n\n    function handleOptionSelect(option: CascaderOptionState, depth: number) {\n      if (!option) return\n\n      if (option.hasChild || option.children?.length) {\n        handlePanelOpen(option, depth)\n      } else {\n        handleSingleSelect(option.fullValue)\n      }\n    }\n\n    function queryUpstreamOptions(option: CascaderOptionState) {\n      const options = [option]\n      let parent = optionIdMap.get(option.parent)\n\n      while (parent) {\n        options.push(parent)\n        parent = optionIdMap.get(parent.parent)\n      }\n\n      return options\n    }\n\n    function updateCheckedUpward(originalOption: CascaderOptionState) {\n      let option = originalOption\n\n      while (!isNull(option.parent)) {\n        const parent = optionIdMap.get(option.parent)\n\n        if (!parent) break\n\n        if (option.checked === parent.checked && option.partial === parent.partial) {\n          break\n        }\n\n        if (option.checked) {\n          parent.checked = parent.children.every(item => item.disabled || item.checked)\n          parent.partial = !parent.checked\n        } else {\n          parent.checked = false\n          parent.partial = parent.children.some(item => item.checked || item.partial)\n        }\n\n        option = parent\n      }\n    }\n\n    function updateCheckedDown(originalOption: CascaderOptionState) {\n      const checked = originalOption.checked\n      const partial = originalOption.partial\n\n      const loop = [...originalOption.children]\n\n      let option\n\n      while (loop.length) {\n        option = loop.shift()!\n\n        if (option.disabled) continue\n\n        option.checked = checked\n        option.partial = partial\n\n        if (option.children?.length) {\n          loop.push(...option.children)\n        }\n      }\n    }\n\n    function handleOptionCheck(option: CascaderOptionState) {\n      if (!option) return\n\n      const options = Array.from(optionIdMap.values())\n      const checked = !option.checked\n\n      if (!props.multiple) {\n        for (let i = 0, len = options.length; i < len; ++i) {\n          options[i].checked = false\n        }\n\n        option.checked = checked\n        option.partial = false\n\n        return handleSingleSelect(option.fullValue)\n      }\n\n      option.checked = checked\n      option.partial = false\n\n      if (!props.noCascaded) {\n        const originalOptions = [option].concat(\n          options.filter(option => option.disabled && option.checked)\n        )\n\n        for (let i = 0, len = originalOptions.length; i < len; ++i) {\n          const option = originalOptions[i]\n\n          updateCheckedUpward(option)\n          updateCheckedDown(option)\n        }\n      }\n\n      emitEvent(props[checked ? 'onSelect' : 'onCancel'], option.fullValue, option.data)\n      emitMultipleChange()\n    }\n\n    function emitMultipleChange() {\n      const options = Array.from(optionIdMap.values())\n      const selectedOptions = props.noCascaded\n        ? options.filter(option => option.checked)\n        : options.filter(option => option.checked && !(option.hasChild || option.children?.length))\n\n      const selectedValues: string[] = []\n      const selectedLabels: string[] = []\n\n      const values: (string | number)[][] = []\n      const dataList: Data[][] = []\n      const briefLabel = props.briefLabel\n\n      selectedOptions.forEach(option => {\n        selectedValues.push(option.fullValue)\n        selectedLabels.push(briefLabel ? option.label : option.fullLabel)\n\n        const { value, data } = queryArrayMeta(option.fullValue)\n\n        values.push(value)\n        dataList.push(data)\n      })\n\n      currentValues.value = selectedValues\n      currentLabels.value = selectedLabels\n\n      if (usingMerged.value) {\n        if (isAsyncLoad.value) {\n          mergedValues.value = options\n            .filter(option => option.checked)\n            .map(option => option.fullValue)\n        }\n\n        updateMergedProps()\n      }\n\n      if (usingMerged.value && isAsyncLoad.value) {\n        values.length = 0\n        dataList.length = 0\n\n        mergedValues.value.forEach(fullValue => {\n          const option = optionValueMap.get(fullValue)\n\n          if (option) {\n            const { value, data } = queryArrayMeta(option.fullValue)\n\n            values.push(value)\n            dataList.push(data)\n          }\n        })\n      }\n\n      emitChangeEvent(values, dataList)\n      nextTick(updatePopper)\n    }\n\n    function handleSingleSelect(fullValue: string) {\n      const option = optionValueMap.get(fullValue)\n\n      if (!option) return\n\n      emitEvent(props.onSelect, fullValue, option.data)\n\n      if (fullValue) {\n        currentValues.value[0] = fullValue\n        currentLabels.value[0] = props.briefLabel ? option.label : option.fullLabel\n      } else {\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n      }\n\n      const { value, data } = queryArrayMeta(fullValue)\n\n      emitChangeEvent(value, data)\n      setVisible(false)\n    }\n\n    function emitChangeEvent(value: CascaderValue, data: Data[] | Data[][]) {\n      emittedValue.value = value\n\n      nextTick(() => {\n        outsideChanged = false\n\n        emit('update:value', value)\n        setFieldValue(value)\n        emitEvent(props.onChange as ChangeListener, value, data)\n        validateField()\n      })\n    }\n\n    function queryArrayMeta(fullValue: string) {\n      let option = optionValueMap.get(fullValue)!\n\n      if (!option) return { value: [], data: [] }\n\n      const value = [option.value]\n      const data = [option.data]\n\n      while (option.parent) {\n        const parent = optionIdMap.get(option.parent)\n\n        if (!parent) break\n\n        value.push(parent.value)\n        data.push(parent.data)\n        option = parent\n      }\n\n      return {\n        value: value.reverse(),\n        data: data.reverse()\n      }\n    }\n\n    function toggleVisible(visible = !currentVisible.value) {\n      if (props.disabled || readonly.value) return\n\n      setVisible(visible)\n    }\n\n    function handleClickOutside() {\n      restTipShow.value = false\n      emitEvent(props.onClickOutside)\n\n      if (props.outsideClose && currentVisible.value) {\n        setVisible(false)\n        outsideClosed = true\n        emitEvent(props.onOutsideClose)\n      }\n    }\n\n    function handleClear() {\n      if (props.disabled || readonly.value) return\n\n      if (props.clearable) {\n        const prev = emittedValue.value\n\n        currentValues.value.length = 0\n        currentLabels.value.length = 0\n        mergedValues.value.length = 0\n        mergedLabels.value.length = 0\n        openedIds.value.length = 0\n        emittedValue.value = prev?.length === 0 ? prev : []\n        restTipShow.value = false\n\n        for (const option of optionIdMap.values()) {\n          option.checked = false\n          option.partial = false\n        }\n\n        if (prev?.length !== 0) {\n          emit('update:value', emittedValue.value)\n          emitEvent(props.onChange as ChangeListener, emittedValue.value, [])\n        }\n\n        emitEvent(props.onClear)\n        clearField(emittedValue.value)\n      }\n    }\n\n    function toggleShowRestTip() {\n      if (!currentVisible.value) {\n        restTipShow.value = !restTipShow.value\n      } else {\n        restTipShow.value = false\n      }\n    }\n\n    function handleTipClose(fullValue: string) {\n      if (props.disabled || readonly.value) return\n\n      if (props.multiple) {\n        handleOptionCheck(optionValueMap.get(fullValue)!)\n      } else {\n        handleSingleSelect(fullValue)\n      }\n    }\n\n    function handlePanelKeyOpen(option: CascaderOptionState, depth: number) {\n      handlePanelOpen(option, depth)\n\n      requestAnimationFrame(() => {\n        const panel = getLast(panelElList.value)\n\n        if (panel && panel.currentHitting < 0) {\n          panel.currentHitting = panel.options.findIndex(option => option.id === prevClosedId)\n\n          if (panel.currentHitting < 0) {\n            panel.currentHitting = 0\n          }\n        }\n      })\n    }\n\n    function handlePanelBack() {\n      prevClosedId = openedIds.value.pop()!\n    }\n\n    function handlePanelsEnter() {\n      requestAnimationFrame(() => {\n        isPopperShow.value = true\n      })\n    }\n\n    return {\n      props,\n      nh,\n      icons,\n      locale,\n      idFor,\n      currentVisible,\n      isPopperShow,\n      currentValues,\n      currentLabels,\n      transferTo,\n      isHover,\n      openedIds,\n      restTagCount,\n      restTipShow,\n      selectorWidth,\n\n      optionsList,\n      className,\n      selectorClass,\n      hasValue,\n      hasPrefix,\n      isAsyncLoad,\n      usingMerged,\n      templateValues,\n      templateLabels,\n      usingHover,\n      showClear,\n\n      wrapper,\n      reference,\n      popper,\n      panelElList,\n\n      handlePanelOpen,\n      handleOptionSelect,\n      handleOptionCheck,\n      toggleVisible,\n      handleClear,\n      toggleShowRestTip,\n      handleTipClose,\n      handlePanelKeyOpen,\n      handlePanelBack,\n      handlePanelsEnter,\n\n      focus: (options?: FocusOptions) => reference.value?.focus(options),\n      blur: () => reference.value?.blur()\n    }\n  }\n})\n</script>\n", "import { booleanProp, buildProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { CellFlex, CellOptions, GridAlign, GridJustify, LayoutProp } from './symbol'\n\nconst layoutProp = [Number, String, Array] as PropType<LayoutProp>\n\nexport const gridProps = buildProps({\n  tag: String,\n  gap: [Number, Array] as PropType<number | number[]>,\n  rows: layoutProp,\n  columns: layoutProp,\n  autoRows: layoutProp,\n  autoColumns: layoutProp,\n  dense: booleanProp,\n  justify: String as PropType<GridJustify>,\n  align: String as PropType<GridAlign>,\n  cellFlex: {\n    type: [Boolean, Object] as PropType<boolean | Partial<CellFlex>>,\n    default: null\n  }\n})\n\nexport type GridProps = ExtractPropTypes<typeof gridProps>\nexport type GridCProps = ConfigurableProps<GridProps>\n\nconst mediaProp = [Number, Object] as PropType<CellOptions>\n\nexport const cellProps = buildProps({\n  tag: String,\n  top: [Number, String],\n  left: [Number, String],\n  width: Number,\n  height: Number,\n  right: [Number, String],\n  bottom: [Number, String],\n  xs: mediaProp,\n  sm: mediaProp,\n  md: mediaProp,\n  lg: mediaProp,\n  xl: mediaProp,\n  xxl: mediaProp,\n  useFlex: {\n    type: [Boolean, Object] as PropType<boolean | Partial<CellFlex>>,\n    default: null\n  }\n})\n\nexport type CellProps = ExtractPropTypes<typeof cellProps>\nexport type CellCProps = ConfigurableProps<CellProps>\n", "import { ref } from 'vue'\n\nimport { isClient } from '@vexip-ui/utils'\n\nexport type BreakPoint = 'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl'\n\nexport const breakPoints = Object.freeze<BreakPoint[]>(['xs', 'sm', 'md', 'lg', 'xl', 'xxl'])\nexport const currentBreakPoint = ref<BreakPoint>('xs')\n\nif (isClient) {\n  const computedStyle = getComputedStyle(document.documentElement)\n  const queryMap = {} as Record<BreakPoint, MediaQueryList>\n\n  breakPoints.forEach(point => {\n    const media = computedStyle.getPropertyValue(`--vxp-break-point-${point}`).trim()\n    const query = matchMedia(`only screen and ${media}`)\n\n    query.addEventListener('change', handleBreakPointChange)\n    queryMap[point] = query\n  })\n\n  const queryEntries = Object.entries(queryMap).reverse() as [BreakPoint, MediaQueryList][]\n\n  function handleBreakPointChange() {\n    for (const [point, query] of queryEntries) {\n      if (query.matches) {\n        currentBreakPoint.value = point\n        break\n      }\n    }\n  }\n\n  handleBreakPointChange()\n}\n", "import type { InjectionKey } from 'vue'\n\nexport type LayoutProp = number | string | (number | string)[]\n\nexport type GridJustify =\n  | 'start'\n  | 'end'\n  | 'center'\n  | 'space-around'\n  | 'space-between'\n  | 'space-evenly'\nexport type GridAlign = 'top' | 'middle' | 'bottom' | 'stretch'\n\nexport interface CellFlex {\n  justify: 'start' | 'end' | 'center' | 'space-around' | 'space-between' | 'space-evenly',\n  align: 'top' | 'middle' | 'bottom' | 'stretch'\n}\n\nexport interface GridState {\n  cellFlex: CellFlex | false,\n  columns: LayoutProp\n}\n\nexport interface CellOptions {\n  top?: number | string,\n  left?: number | string,\n  width?: number,\n  height?: number,\n  right?: number | string,\n  bottom?: number | string\n}\n\nexport const GRID_STATE: InjectionKey<GridState> = Symbol('GRID_STATE')\n", "import { computed, defineComponent, h, inject, provide, reactive, watch } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { has, isDefined } from '@vexip-ui/utils'\nimport { cellProps } from './props'\nimport { breakPoints, currentBreakPoint } from './helper'\nimport { GRID_STATE } from './symbol'\n\nimport type { CSSProperties } from 'vue'\nimport type { ClassType } from '@vexip-ui/config'\nimport type { BreakPoint } from './helper'\n\nexport default defineComponent({\n  name: 'Cell',\n  props: cellProps,\n  setup(_props, { slots }) {\n    const props = useProps('cell', _props, {\n      tag: 'div',\n      top: 'auto',\n      left: 'auto',\n      width: null,\n      height: 1,\n      right: '',\n      bottom: '',\n      xs: null,\n      sm: null,\n      md: null,\n      lg: null,\n      xl: null,\n      xxl: null,\n      useFlex: null\n    })\n\n    const gridState = inject(GRID_STATE, null)\n    const nh = useNameHelper('cell')\n\n    provide(GRID_STATE, null!)\n\n    const layoutState = reactive({\n      top: props.top,\n      right: props.right,\n      bottom: props.bottom,\n      left: props.left,\n      width: props.width,\n      height: props.height\n    })\n    const layoutKeys = Object.keys(layoutState) as (\n      | 'top'\n      | 'right'\n      | 'bottom'\n      | 'left'\n      | 'width'\n      | 'height'\n    )[]\n\n    const defaultWidth = computed(() => {\n      if (isDefined(props.width)) {\n        return props.width\n      }\n\n      return gridState?.columns && typeof gridState.columns === 'number' ? gridState.columns : 1\n    })\n\n    watch(\n      currentBreakPoint,\n      value => {\n        const matchSize = queryBreakPointOptions(value)\n\n        if (matchSize) {\n          if (typeof matchSize === 'number') {\n            layoutKeys.forEach(key => {\n              layoutState[key] = props[key] as any\n            })\n\n            layoutState.width = matchSize\n          } else {\n            layoutKeys.forEach(key => {\n              layoutState[key] = has(matchSize, key) ? matchSize[key] : (props[key] as any)\n            })\n\n            layoutState.width = layoutState.width ?? defaultWidth.value\n          }\n        } else {\n          layoutKeys.forEach(key => {\n            layoutState[key] = props[key] as any\n          })\n\n          layoutState.width = defaultWidth.value\n        }\n      },\n      { immediate: true }\n    )\n\n    const className = computed(() => {\n      const cellFlex = props.useFlex !== false &&\n        (props.useFlex || gridState?.cellFlex) && {\n        ...(gridState?.cellFlex || {}),\n        ...(props.useFlex\n          ? props.useFlex === true\n            ? { justify: 'start', align: 'top' }\n            : props.useFlex\n          : {})\n      }\n      const className: ClassType = {\n        [nh.b()]: true,\n        [nh.bm('inherit')]: gridState || props.inherit,\n        [nh.bm('flex')]: cellFlex\n      }\n\n      if (cellFlex) {\n        if (cellFlex.justify) className[nh.bm(cellFlex.justify)] = true\n        if (cellFlex.align) className[nh.bm(cellFlex.align)] = true\n      }\n\n      return className\n    })\n    const style = computed(() => {\n      const style: CSSProperties = {}\n\n      const topSet = isPositionSet(layoutState.top)\n      const rightSet = isPositionSet(layoutState.right)\n      const bottomSet = isPositionSet(layoutState.bottom)\n      const leftSet = isPositionSet(layoutState.left)\n\n      if (topSet && bottomSet) {\n        style.gridRowStart = parsePosition(layoutState.top)\n        style.gridRowEnd = parsePosition(layoutState.bottom)\n      } else if (topSet) {\n        style.gridRowStart = parsePosition(layoutState.top)\n        style.gridRowEnd = `span ${layoutState.height}`\n      } else if (bottomSet) {\n        style.gridRowStart = `span ${layoutState.height}`\n        style.gridRowEnd = parsePosition(layoutState.bottom)\n      } else {\n        style.gridRowEnd = `span ${layoutState.height}`\n      }\n\n      if (leftSet && rightSet) {\n        style.gridColumnStart = parsePosition(layoutState.left)\n        style.gridColumnEnd = parsePosition(layoutState.right)\n      } else if (leftSet) {\n        style.gridColumnStart = parsePosition(layoutState.left)\n        style.gridColumnEnd = `span ${layoutState.width}`\n      } else if (rightSet) {\n        style.gridColumnStart = `span ${layoutState.width}`\n        style.gridColumnEnd = parsePosition(layoutState.right)\n      } else {\n        style.gridColumnStart = `span ${layoutState.width}`\n      }\n\n      return style\n    })\n\n    function isPositionSet(value: number | string) {\n      return value === 0 || (value && value !== 'auto')\n    }\n\n    function parsePosition(value: number | string) {\n      return typeof value === 'number' ? value + 1 : value\n    }\n\n    function queryBreakPointOptions(breakPoint: BreakPoint) {\n      const index = breakPoints.findIndex(v => v === breakPoint)\n\n      if (~index) {\n        for (let i = index; i >= 0; --i) {\n          if (isDefined(props[breakPoints[i]])) {\n            return props[breakPoints[i]]\n          }\n        }\n      }\n\n      return null\n    }\n\n    return () =>\n      h(\n        props.tag || 'div',\n        {\n          class: className.value,\n          style: style.value\n        },\n        {\n          default: () => slots.default?.()\n        }\n      )\n  }\n})\n", "<template>\n  <div :id=\"idFor\" :class=\"className\" role=\"group\">\n    <slot>\n      <Checkbox v-if=\"props.control\" inherit control>\n        {{ controlLabel }}\n      </Checkbox>\n      <template v-for=\"(item, index) in props.options\" :key=\"index\">\n        <Checkbox\n          v-if=\"isObject(item)\"\n          inherit\n          :value=\"item.value\"\n          :control=\"item.control\"\n          :disabled=\"item.disabled\"\n        >\n          {{ item.label || item.value }}\n        </Checkbox>\n        <Checkbox v-else inherit :value=\"item\">\n          {{ item }}\n        </Checkbox>\n      </template>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useFieldStore } from '@/components/form'\nimport { Checkbox } from '@/components/checkbox'\n\nimport { computed, defineComponent, provide, reactive, ref, toRef, watch } from 'vue'\n\nimport {\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport {\n  adjustAlpha,\n  debounceMinor,\n  isClient,\n  isDefined,\n  isObject,\n  parseColorToRgba\n} from '@vexip-ui/utils'\nimport { checkboxGroupProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nimport type { Ref } from 'vue'\nimport type { ControlState } from './symbol'\n\nexport default defineComponent({\n  name: 'CheckboxGroup',\n  components: {\n    Checkbox\n  },\n  props: checkboxGroupProps,\n  emits: ['update:value'],\n  setup(_props, { emit }) {\n    const { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<(string | number)[]>(focus)\n\n    const props = useProps('checkboxGroup', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      locale: null,\n      value: {\n        default: () => getFieldValue([]),\n        static: true\n      },\n      vertical: false,\n      disabled: () => disabled.value,\n      border: false,\n      options: {\n        default: () => [],\n        static: true\n      },\n      loading: () => loading.value,\n      control: null,\n      loadingLock: false,\n      color: null,\n      stateColor: false\n    })\n\n    const nh = useNameHelper('checkbox-group')\n    const locale = useLocale('checkbox', toRef(props, 'locale'))\n    const valueMap = new Map<string | number, boolean>()\n    const inputSet = new Set<Ref<HTMLElement | null | undefined>>()\n    const controlSet = new Set<ControlState>()\n    const currentValues = ref<(string | number)[]>(props.value || [])\n\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.ns('checkbox-vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('vertical')]: props.vertical,\n          [nh.bm('disabled')]: props.disabled,\n          [nh.bm('readonly')]: readonly.value,\n          [nh.bm('loading')]: props.loading,\n          [nh.bm(props.size)]: props.size !== 'default',\n          [nh.bm('border')]: props.border,\n          [nh.bm(props.state)]: props.state !== 'default'\n        }\n      ]\n    })\n    const controlLabel = computed(() => {\n      return typeof props.control === 'string' ? props.control : locale.value.all\n    })\n    const colorMap = computed(() => {\n      if (!props.color) return null\n\n      const baseColor = parseColorToRgba(props.color)\n\n      return {\n        base: baseColor.toString(),\n        opacity6: adjustAlpha(baseColor, 0.4).toString()\n      }\n    })\n\n    const updateValue = debounceMinor(() => {\n      currentValues.value = []\n\n      valueMap.forEach((checked, value) => {\n        if (checked) {\n          currentValues.value.push(value)\n        }\n      })\n\n      handleChange(currentValues.value)\n    })\n\n    const updateControl = debounceMinor(() => {\n      const valueLength = currentValues.value.length\n      const checked = valueLength === valueMap.size\n      const partial = valueLength > 0 && !checked\n\n      controlSet.forEach(state => {\n        state.checked = checked\n        state.partial = partial\n      })\n    })\n\n    provide(\n      GROUP_STATE,\n      reactive({\n        currentValues,\n        size: toRef(props, 'size'),\n        state: toRef(props, 'state'),\n        disabled: toRef(props, 'disabled'),\n        loading: toRef(props, 'loading'),\n        loadingLock: toRef(props, 'loadingLock'),\n        colorMap,\n        stateColor: toRef(props, 'stateColor'),\n        increaseItem,\n        decreaseItem,\n        increaseControl,\n        decreaseControl,\n        handleControlChange,\n        setItemChecked,\n        replaceValue\n      })\n    )\n\n    watch(\n      () => props.value,\n      value => {\n        const checkedValues = new Set(value)\n        const allValues = Array.from(valueMap.keys())\n\n        currentValues.value = []\n\n        allValues.forEach(value => {\n          const checked = checkedValues.has(value)\n\n          valueMap.set(value, checkedValues.has(value))\n          checked && currentValues.value.push(value)\n        })\n      }\n    )\n    watch(currentValues, () => {\n      updateControl()\n    })\n\n    function increaseItem(\n      value: string | number,\n      checked: boolean,\n      input: Ref<HTMLElement | null | undefined>\n    ) {\n      valueMap.set(value, checked)\n      inputSet.add(input)\n    }\n\n    function decreaseItem(value: string | number, input: Ref<HTMLElement | null | undefined>) {\n      valueMap.delete(value)\n      inputSet.delete(input)\n    }\n\n    function increaseControl(state: ControlState) {\n      controlSet.add(state)\n      updateControl()\n    }\n\n    function decreaseControl(state: ControlState) {\n      controlSet.delete(state)\n    }\n\n    function setItemChecked(value: string | number, checked: boolean) {\n      if (!isDefined(value) || !valueMap.has(value)) return\n\n      valueMap.set(value, checked)\n      updateValue()\n      updateControl()\n    }\n\n    function handleControlChange() {\n      // 在 group 层进行更新, 未选满则全选, 反之全不选\n      const allValues = Array.from(valueMap.keys())\n      const checked = currentValues.value.length !== allValues.length\n\n      allValues.forEach(value => {\n        valueMap.set(value, checked)\n      })\n\n      updateValue()\n      updateControl()\n    }\n\n    function handleChange(value: (string | number)[]) {\n      emit('update:value', value)\n      setFieldValue(value)\n      emitEvent(props.onChange, value)\n      validateField()\n    }\n\n    function replaceValue(prevValue: string | number, newValue: string | number) {\n      if (\n        isDefined(prevValue) &&\n        isDefined(newValue) &&\n        prevValue !== newValue &&\n        valueMap.has(prevValue)\n      ) {\n        valueMap.set(newValue, valueMap.get(prevValue)!)\n        valueMap.delete(prevValue)\n      }\n    }\n\n    function focus(options?: FocusOptions) {\n      const input = Array.from(inputSet)[0]?.value\n\n      if (isClient && input && document.activeElement !== input) {\n        input.focus(options)\n      }\n    }\n\n    return {\n      props,\n      idFor,\n      className,\n      controlLabel,\n\n      isObject,\n      increaseControl,\n      decreaseControl,\n\n      focus,\n      blur: () => {\n        for (const input of inputSet) {\n          input.value?.blur()\n        }\n      }\n    }\n  }\n})\n</script>\n", "<template>\n  <div :id=\"idFor\" :class=\"className\" role=\"group\">\n    <slot>\n      <Checkbox v-if=\"props.control\" inherit control>\n        {{ controlLabel }}\n      </Checkbox>\n      <template v-for=\"(item, index) in props.options\" :key=\"index\">\n        <Checkbox\n          v-if=\"isObject(item)\"\n          inherit\n          :value=\"item.value\"\n          :control=\"item.control\"\n          :disabled=\"item.disabled\"\n        >\n          {{ item.label || item.value }}\n        </Checkbox>\n        <Checkbox v-else inherit :value=\"item\">\n          {{ item }}\n        </Checkbox>\n      </template>\n    </slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useFieldStore } from '@/components/form'\nimport { Checkbox } from '@/components/checkbox'\n\nimport { computed, defineComponent, provide, reactive, ref, toRef, watch } from 'vue'\n\nimport {\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport {\n  adjustAlpha,\n  debounceMinor,\n  isClient,\n  isDefined,\n  isObject,\n  parseColorToRgba\n} from '@vexip-ui/utils'\nimport { checkboxGroupProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nimport type { Ref } from 'vue'\nimport type { ControlState } from './symbol'\n\nexport default defineComponent({\n  name: 'CheckboxGroup',\n  components: {\n    Checkbox\n  },\n  props: checkboxGroupProps,\n  emits: ['update:value'],\n  setup(_props, { emit }) {\n    const { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<(string | number)[]>(focus)\n\n    const props = useProps('checkboxGroup', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      locale: null,\n      value: {\n        default: () => getFieldValue([]),\n        static: true\n      },\n      vertical: false,\n      disabled: () => disabled.value,\n      border: false,\n      options: {\n        default: () => [],\n        static: true\n      },\n      loading: () => loading.value,\n      control: null,\n      loadingLock: false,\n      color: null,\n      stateColor: false\n    })\n\n    const nh = useNameHelper('checkbox-group')\n    const locale = useLocale('checkbox', toRef(props, 'locale'))\n    const valueMap = new Map<string | number, boolean>()\n    const inputSet = new Set<Ref<HTMLElement | null | undefined>>()\n    const controlSet = new Set<ControlState>()\n    const currentValues = ref<(string | number)[]>(props.value || [])\n\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.ns('checkbox-vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('vertical')]: props.vertical,\n          [nh.bm('disabled')]: props.disabled,\n          [nh.bm('readonly')]: readonly.value,\n          [nh.bm('loading')]: props.loading,\n          [nh.bm(props.size)]: props.size !== 'default',\n          [nh.bm('border')]: props.border,\n          [nh.bm(props.state)]: props.state !== 'default'\n        }\n      ]\n    })\n    const controlLabel = computed(() => {\n      return typeof props.control === 'string' ? props.control : locale.value.all\n    })\n    const colorMap = computed(() => {\n      if (!props.color) return null\n\n      const baseColor = parseColorToRgba(props.color)\n\n      return {\n        base: baseColor.toString(),\n        opacity6: adjustAlpha(baseColor, 0.4).toString()\n      }\n    })\n\n    const updateValue = debounceMinor(() => {\n      currentValues.value = []\n\n      valueMap.forEach((checked, value) => {\n        if (checked) {\n          currentValues.value.push(value)\n        }\n      })\n\n      handleChange(currentValues.value)\n    })\n\n    const updateControl = debounceMinor(() => {\n      const valueLength = currentValues.value.length\n      const checked = valueLength === valueMap.size\n      const partial = valueLength > 0 && !checked\n\n      controlSet.forEach(state => {\n        state.checked = checked\n        state.partial = partial\n      })\n    })\n\n    provide(\n      GROUP_STATE,\n      reactive({\n        currentValues,\n        size: toRef(props, 'size'),\n        state: toRef(props, 'state'),\n        disabled: toRef(props, 'disabled'),\n        loading: toRef(props, 'loading'),\n        loadingLock: toRef(props, 'loadingLock'),\n        colorMap,\n        stateColor: toRef(props, 'stateColor'),\n        increaseItem,\n        decreaseItem,\n        increaseControl,\n        decreaseControl,\n        handleControlChange,\n        setItemChecked,\n        replaceValue\n      })\n    )\n\n    watch(\n      () => props.value,\n      value => {\n        const checkedValues = new Set(value)\n        const allValues = Array.from(valueMap.keys())\n\n        currentValues.value = []\n\n        allValues.forEach(value => {\n          const checked = checkedValues.has(value)\n\n          valueMap.set(value, checkedValues.has(value))\n          checked && currentValues.value.push(value)\n        })\n      }\n    )\n    watch(currentValues, () => {\n      updateControl()\n    })\n\n    function increaseItem(\n      value: string | number,\n      checked: boolean,\n      input: Ref<HTMLElement | null | undefined>\n    ) {\n      valueMap.set(value, checked)\n      inputSet.add(input)\n    }\n\n    function decreaseItem(value: string | number, input: Ref<HTMLElement | null | undefined>) {\n      valueMap.delete(value)\n      inputSet.delete(input)\n    }\n\n    function increaseControl(state: ControlState) {\n      controlSet.add(state)\n      updateControl()\n    }\n\n    function decreaseControl(state: ControlState) {\n      controlSet.delete(state)\n    }\n\n    function setItemChecked(value: string | number, checked: boolean) {\n      if (!isDefined(value) || !valueMap.has(value)) return\n\n      valueMap.set(value, checked)\n      updateValue()\n      updateControl()\n    }\n\n    function handleControlChange() {\n      // 在 group 层进行更新, 未选满则全选, 反之全不选\n      const allValues = Array.from(valueMap.keys())\n      const checked = currentValues.value.length !== allValues.length\n\n      allValues.forEach(value => {\n        valueMap.set(value, checked)\n      })\n\n      updateValue()\n      updateControl()\n    }\n\n    function handleChange(value: (string | number)[]) {\n      emit('update:value', value)\n      setFieldValue(value)\n      emitEvent(props.onChange, value)\n      validateField()\n    }\n\n    function replaceValue(prevValue: string | number, newValue: string | number) {\n      if (\n        isDefined(prevValue) &&\n        isDefined(newValue) &&\n        prevValue !== newValue &&\n        valueMap.has(prevValue)\n      ) {\n        valueMap.set(newValue, valueMap.get(prevValue)!)\n        valueMap.delete(prevValue)\n      }\n    }\n\n    function focus(options?: FocusOptions) {\n      const input = Array.from(inputSet)[0]?.value\n\n      if (isClient && input && document.activeElement !== input) {\n        input.focus(options)\n      }\n    }\n\n    return {\n      props,\n      idFor,\n      className,\n      controlLabel,\n\n      isObject,\n      increaseControl,\n      decreaseControl,\n\n      focus,\n      blur: () => {\n        for (const input of inputSet) {\n          input.value?.blur()\n        }\n      }\n    }\n  }\n})\n</script>\n", "import type { InjectionKey } from 'vue'\n\nexport type CollapseArrowType = 'right' | 'left' | 'none'\n\nexport interface PanelState {\n  tab?: HTMLElement | null,\n  label: string | number,\n  expanded: boolean,\n  setExpanded: (expanded: boolean) => void\n}\n\nexport interface CollapseState {\n  arrowType: CollapseArrowType,\n  registerPanel(panel: PanelState): void,\n  unregisterPanel(panel: PanelState): void,\n  expandPanel(label: string | number, expanded: boolean): void,\n  refreshLabels: () => void\n}\n\nexport const COLLAPSE_STATE: InjectionKey<CollapseState> = Symbol('COLLAPSE_STATE')\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"tablist\"\n    tabindex=\"-1\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRef,\n  watchEffect\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useModifier } from '@vexip-ui/hooks'\nimport { debounceMinor, isNull, removeArrayItem } from '@vexip-ui/utils'\nimport { collapseProps } from './props'\nimport { COLLAPSE_STATE } from './symbol'\n\nimport type { CollapseArrowType, PanelState } from './symbol'\n\nexport default defineComponent({\n  name: 'Collapse',\n  props: collapseProps,\n  emits: ['update:expanded'],\n  setup(_props, { emit }) {\n    const props = useProps('collapse', _props, {\n      expanded: {\n        default: null,\n        static: true\n      },\n      card: false,\n      accordion: false,\n      arrowType: {\n        default: 'right' as CollapseArrowType,\n        validator: (value: CollapseArrowType) => ['right', 'left', 'none'].includes(value)\n      },\n      ghost: false\n    })\n\n    const nh = useNameHelper('collapse')\n    const panelStates = reactive(new Set<PanelState>())\n    const currentExpanded = ref<(string | number)[]>([])\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.left || modifier.right) {\n          if (!wrapper.value) return\n\n          const tabs = Array.from(wrapper.value.querySelectorAll(nh.cbe('header'))) as HTMLElement[]\n\n          if (tabs.length < 1) return\n\n          event.preventDefault()\n          event.stopPropagation()\n\n          const index = document.activeElement\n            ? tabs.findIndex(panel => panel === document.activeElement)\n            : -1\n\n          if (~index) {\n            const target = tabs[(index + (modifier.left ? -1 : 1) + tabs.length) % tabs.length]\n\n            target?.focus()\n          }\n        } else if (modifier.escape) {\n          event.preventDefault()\n          event.stopPropagation()\n\n          clearExpanded()\n        }\n      }\n    })\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(`arrow-${props.arrowType}`),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('card')]: props.card,\n          [nh.bm('ghost')]: !props.card && props.ghost\n        }\n      ]\n    })\n\n    const refreshLabels = debounceMinor(() => {\n      Array.from(panelStates.values()).forEach((item, index) => {\n        if (isNull(item.label)) {\n          item.label = index + 1\n        }\n      })\n\n      if (panelStates.size) {\n        for (const panel of panelStates) {\n          if (currentExpanded.value.includes(panel.label)) {\n            panel.expanded = true\n          } else if (panel.expanded) {\n            expandPanel(panel.label, true)\n          }\n        }\n      }\n    })\n\n    provide(\n      COLLAPSE_STATE,\n      reactive({\n        arrowType: toRef(props, 'arrowType'),\n        registerPanel,\n        unregisterPanel,\n        expandPanel,\n        refreshLabels\n      })\n    )\n\n    watchEffect(() => {\n      const rawExpanded = props.expanded\n      const expanded =\n        props.accordion && Array.isArray(rawExpanded)\n          ? rawExpanded[0]\n          : rawExpanded || rawExpanded === 0\n            ? rawExpanded\n            : []\n\n      currentExpanded.value = Array.isArray(expanded) ? Array.from(expanded) : [expanded]\n    })\n\n    onMounted(() => {\n      nextTick(updateItemExpanded)\n    })\n\n    function registerPanel(panel: PanelState) {\n      panelStates.add(panel)\n\n      refreshLabels()\n    }\n\n    function unregisterPanel(panel: PanelState) {\n      panelStates.delete(panel)\n      expandPanel(panel.label, false)\n      refreshLabels()\n    }\n\n    function expandPanel(label: string | number, expanded: boolean) {\n      if (!label && label !== 0) return\n\n      if (props.accordion) {\n        currentExpanded.value = expanded ? [label] : []\n      } else {\n        if (expanded) {\n          currentExpanded.value.push(label)\n        } else {\n          removeArrayItem(currentExpanded.value, label)\n        }\n      }\n\n      emitChangeEvent()\n      updateItemExpanded()\n    }\n\n    function clearExpanded() {\n      if (!currentExpanded.value.length) return\n\n      currentExpanded.value = []\n\n      emitChangeEvent()\n      updateItemExpanded()\n    }\n\n    function emitChangeEvent() {\n      emit('update:expanded', currentExpanded.value)\n      emitEvent(props.onChange, currentExpanded.value)\n    }\n\n    function updateItemExpanded() {\n      panelStates.forEach(panel => {\n        panel.setExpanded(currentExpanded.value.includes(panel.label))\n      })\n    }\n\n    return {\n      currentExpanded,\n      wrapper,\n      className\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"tablist\"\n    tabindex=\"-1\"\n  >\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRef,\n  watchEffect\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useModifier } from '@vexip-ui/hooks'\nimport { debounceMinor, isNull, removeArrayItem } from '@vexip-ui/utils'\nimport { collapseProps } from './props'\nimport { COLLAPSE_STATE } from './symbol'\n\nimport type { CollapseArrowType, PanelState } from './symbol'\n\nexport default defineComponent({\n  name: 'Collapse',\n  props: collapseProps,\n  emits: ['update:expanded'],\n  setup(_props, { emit }) {\n    const props = useProps('collapse', _props, {\n      expanded: {\n        default: null,\n        static: true\n      },\n      card: false,\n      accordion: false,\n      arrowType: {\n        default: 'right' as CollapseArrowType,\n        validator: (value: CollapseArrowType) => ['right', 'left', 'none'].includes(value)\n      },\n      ghost: false\n    })\n\n    const nh = useNameHelper('collapse')\n    const panelStates = reactive(new Set<PanelState>())\n    const currentExpanded = ref<(string | number)[]>([])\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.left || modifier.right) {\n          if (!wrapper.value) return\n\n          const tabs = Array.from(wrapper.value.querySelectorAll(nh.cbe('header'))) as HTMLElement[]\n\n          if (tabs.length < 1) return\n\n          event.preventDefault()\n          event.stopPropagation()\n\n          const index = document.activeElement\n            ? tabs.findIndex(panel => panel === document.activeElement)\n            : -1\n\n          if (~index) {\n            const target = tabs[(index + (modifier.left ? -1 : 1) + tabs.length) % tabs.length]\n\n            target?.focus()\n          }\n        } else if (modifier.escape) {\n          event.preventDefault()\n          event.stopPropagation()\n\n          clearExpanded()\n        }\n      }\n    })\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(`arrow-${props.arrowType}`),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('card')]: props.card,\n          [nh.bm('ghost')]: !props.card && props.ghost\n        }\n      ]\n    })\n\n    const refreshLabels = debounceMinor(() => {\n      Array.from(panelStates.values()).forEach((item, index) => {\n        if (isNull(item.label)) {\n          item.label = index + 1\n        }\n      })\n\n      if (panelStates.size) {\n        for (const panel of panelStates) {\n          if (currentExpanded.value.includes(panel.label)) {\n            panel.expanded = true\n          } else if (panel.expanded) {\n            expandPanel(panel.label, true)\n          }\n        }\n      }\n    })\n\n    provide(\n      COLLAPSE_STATE,\n      reactive({\n        arrowType: toRef(props, 'arrowType'),\n        registerPanel,\n        unregisterPanel,\n        expandPanel,\n        refreshLabels\n      })\n    )\n\n    watchEffect(() => {\n      const rawExpanded = props.expanded\n      const expanded =\n        props.accordion && Array.isArray(rawExpanded)\n          ? rawExpanded[0]\n          : rawExpanded || rawExpanded === 0\n            ? rawExpanded\n            : []\n\n      currentExpanded.value = Array.isArray(expanded) ? Array.from(expanded) : [expanded]\n    })\n\n    onMounted(() => {\n      nextTick(updateItemExpanded)\n    })\n\n    function registerPanel(panel: PanelState) {\n      panelStates.add(panel)\n\n      refreshLabels()\n    }\n\n    function unregisterPanel(panel: PanelState) {\n      panelStates.delete(panel)\n      expandPanel(panel.label, false)\n      refreshLabels()\n    }\n\n    function expandPanel(label: string | number, expanded: boolean) {\n      if (!label && label !== 0) return\n\n      if (props.accordion) {\n        currentExpanded.value = expanded ? [label] : []\n      } else {\n        if (expanded) {\n          currentExpanded.value.push(label)\n        } else {\n          removeArrayItem(currentExpanded.value, label)\n        }\n      }\n\n      emitChangeEvent()\n      updateItemExpanded()\n    }\n\n    function clearExpanded() {\n      if (!currentExpanded.value.length) return\n\n      currentExpanded.value = []\n\n      emitChangeEvent()\n      updateItemExpanded()\n    }\n\n    function emitChangeEvent() {\n      emit('update:expanded', currentExpanded.value)\n      emitEvent(props.onChange, currentExpanded.value)\n    }\n\n    function updateItemExpanded() {\n      panelStates.forEach(panel => {\n        panel.setExpanded(currentExpanded.value.includes(panel.label))\n      })\n    }\n\n    return {\n      currentExpanded,\n      wrapper,\n      className\n    }\n  }\n})\n</script>\n", "<template>\n  <section :class=\"className\">\n    <button\n      :id=\"tabId\"\n      ref=\"tab\"\n      :class=\"nh.be('header')\"\n      type=\"button\"\n      role=\"tab\"\n      :aria-expanded=\"currentExpanded\"\n      :aria-controls=\"bodyId\"\n      :aria-describedby=\"bodyId\"\n      @click=\"handleToggle()\"\n    >\n      <div :class=\"nh.be('arrow')\">\n        <Icon v-bind=\"icons.angleRight\"></Icon>\n      </div>\n      <slot name=\"title\">\n        <div v-if=\"props.icon\" :class=\"nh.be('icon')\">\n          <Icon :icon=\"props.icon\"></Icon>\n        </div>\n        {{ props.title }}\n      </slot>\n    </button>\n    <CollapseTransition>\n      <div\n        v-if=\"currentExpanded\"\n        :id=\"bodyId\"\n        :class=\"nh.be('body')\"\n        role=\"tabpanel\"\n        tabindex=\"0\"\n        :aria-labelledby=\"tabId\"\n      >\n        <div :class=\"nh.be('content')\" :style=\"props.contentStyle\">\n          <slot></slot>\n        </div>\n      </div>\n    </CollapseTransition>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, inject, onBeforeUnmount, reactive, ref, watch } from 'vue'\n\nimport { createIconProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { collapsePanelProps } from './props'\nimport { COLLAPSE_STATE } from './symbol'\n\nimport type { CollapseArrowType, PanelState } from './symbol'\n\nlet idCount = 0\n\nexport default defineComponent({\n  name: 'CollapsePanel',\n  components: {\n    CollapseTransition,\n    Icon\n  },\n  props: collapsePanelProps,\n  emits: ['update:expanded'],\n  setup(_props, { emit }) {\n    const props = useProps('collapsePanel', _props, {\n      label: {\n        default: null,\n        static: true\n      },\n      title: '',\n      disabled: false,\n      contentStyle: null,\n      expanded: false,\n      card: false,\n      arrowType: {\n        default: 'right' as CollapseArrowType,\n        validator: (value: CollapseArrowType) => ['right', 'left', 'none'].includes(value)\n      },\n      icon: createIconProp(),\n      ghost: false\n    })\n\n    const collapseState = inject(COLLAPSE_STATE, null)\n\n    const nh = useNameHelper('collapse')\n    const icons = useIcons()\n    const currentExpanded = ref(props.expanded)\n    const currentLabel = ref(props.label)\n\n    const tab = ref<HTMLElement>()\n\n    const id = idCount++\n\n    const tabId = computed(() => `${nh.be('tab')}-${id}`)\n    const bodyId = computed(() => `${nh.be('body')}-${id}`)\n    const useCard = computed(() => {\n      if (!collapseState) {\n        return props.card\n      }\n\n      return false\n    })\n    const useGhost = computed(() => {\n      if (!collapseState) {\n        return props.ghost\n      }\n\n      return false\n    })\n    const useArrowType = computed(() => {\n      if (collapseState) {\n        return collapseState.arrowType\n      }\n\n      return props.arrowType\n    })\n    const className = computed(() => {\n      return [\n        nh.be('panel'),\n        nh.bs('vars'),\n        nh.bem('panel', `arrow-${useArrowType.value}`),\n        {\n          [nh.bem('panel', 'inherit')]: collapseState || props.inherit,\n          [nh.bem('panel', 'card')]: useCard.value,\n          [nh.bem('panel', 'ghost')]: !useCard.value && useGhost.value,\n          [nh.bem('panel', 'expanded')]: currentExpanded.value,\n          [nh.bem('panel', 'disabled')]: props.disabled\n        }\n      ]\n    })\n\n    if (collapseState) {\n      const state: PanelState = reactive({\n        tab,\n        label: currentLabel,\n        expanded: currentExpanded,\n        setExpanded\n      })\n\n      watch(\n        () => props.label,\n        value => {\n          const prevValue = currentLabel.value\n          currentLabel.value = value || value === 0 ? value : prevValue\n        }\n      )\n\n      // if (props.label || props.label === 0) {\n      //   currentLabel.value = props.label\n      // } else {\n      //   currentLabel.value = randomString()\n      // }\n\n      collapseState.registerPanel(state)\n\n      onBeforeUnmount(() => {\n        collapseState.unregisterPanel(state)\n      })\n    } else {\n      watch(\n        () => props.expanded,\n        value => {\n          currentExpanded.value = value\n        }\n      )\n    }\n\n    function setExpanded(expanded: boolean) {\n      currentExpanded.value = expanded\n\n      emit('update:expanded', expanded)\n      emitEvent(props.onToggle, expanded)\n    }\n\n    function handleToggle(expanded = !currentExpanded.value) {\n      if (props.disabled) return\n\n      if (collapseState) {\n        // 由父级进行管理\n        collapseState.expandPanel(currentLabel.value, expanded)\n      } else {\n        setExpanded(expanded)\n      }\n    }\n\n    return {\n      props,\n      nh,\n      icons,\n      currentExpanded,\n\n      tab,\n\n      tabId,\n      bodyId,\n      className,\n\n      handleToggle\n    }\n  }\n})\n</script>\n", "<template>\n  <section :class=\"className\">\n    <button\n      :id=\"tabId\"\n      ref=\"tab\"\n      :class=\"nh.be('header')\"\n      type=\"button\"\n      role=\"tab\"\n      :aria-expanded=\"currentExpanded\"\n      :aria-controls=\"bodyId\"\n      :aria-describedby=\"bodyId\"\n      @click=\"handleToggle()\"\n    >\n      <div :class=\"nh.be('arrow')\">\n        <Icon v-bind=\"icons.angleRight\"></Icon>\n      </div>\n      <slot name=\"title\">\n        <div v-if=\"props.icon\" :class=\"nh.be('icon')\">\n          <Icon :icon=\"props.icon\"></Icon>\n        </div>\n        {{ props.title }}\n      </slot>\n    </button>\n    <CollapseTransition>\n      <div\n        v-if=\"currentExpanded\"\n        :id=\"bodyId\"\n        :class=\"nh.be('body')\"\n        role=\"tabpanel\"\n        tabindex=\"0\"\n        :aria-labelledby=\"tabId\"\n      >\n        <div :class=\"nh.be('content')\" :style=\"props.contentStyle\">\n          <slot></slot>\n        </div>\n      </div>\n    </CollapseTransition>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, inject, onBeforeUnmount, reactive, ref, watch } from 'vue'\n\nimport { createIconProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { collapsePanelProps } from './props'\nimport { COLLAPSE_STATE } from './symbol'\n\nimport type { CollapseArrowType, PanelState } from './symbol'\n\nlet idCount = 0\n\nexport default defineComponent({\n  name: 'CollapsePanel',\n  components: {\n    CollapseTransition,\n    Icon\n  },\n  props: collapsePanelProps,\n  emits: ['update:expanded'],\n  setup(_props, { emit }) {\n    const props = useProps('collapsePanel', _props, {\n      label: {\n        default: null,\n        static: true\n      },\n      title: '',\n      disabled: false,\n      contentStyle: null,\n      expanded: false,\n      card: false,\n      arrowType: {\n        default: 'right' as CollapseArrowType,\n        validator: (value: CollapseArrowType) => ['right', 'left', 'none'].includes(value)\n      },\n      icon: createIconProp(),\n      ghost: false\n    })\n\n    const collapseState = inject(COLLAPSE_STATE, null)\n\n    const nh = useNameHelper('collapse')\n    const icons = useIcons()\n    const currentExpanded = ref(props.expanded)\n    const currentLabel = ref(props.label)\n\n    const tab = ref<HTMLElement>()\n\n    const id = idCount++\n\n    const tabId = computed(() => `${nh.be('tab')}-${id}`)\n    const bodyId = computed(() => `${nh.be('body')}-${id}`)\n    const useCard = computed(() => {\n      if (!collapseState) {\n        return props.card\n      }\n\n      return false\n    })\n    const useGhost = computed(() => {\n      if (!collapseState) {\n        return props.ghost\n      }\n\n      return false\n    })\n    const useArrowType = computed(() => {\n      if (collapseState) {\n        return collapseState.arrowType\n      }\n\n      return props.arrowType\n    })\n    const className = computed(() => {\n      return [\n        nh.be('panel'),\n        nh.bs('vars'),\n        nh.bem('panel', `arrow-${useArrowType.value}`),\n        {\n          [nh.bem('panel', 'inherit')]: collapseState || props.inherit,\n          [nh.bem('panel', 'card')]: useCard.value,\n          [nh.bem('panel', 'ghost')]: !useCard.value && useGhost.value,\n          [nh.bem('panel', 'expanded')]: currentExpanded.value,\n          [nh.bem('panel', 'disabled')]: props.disabled\n        }\n      ]\n    })\n\n    if (collapseState) {\n      const state: PanelState = reactive({\n        tab,\n        label: currentLabel,\n        expanded: currentExpanded,\n        setExpanded\n      })\n\n      watch(\n        () => props.label,\n        value => {\n          const prevValue = currentLabel.value\n          currentLabel.value = value || value === 0 ? value : prevValue\n        }\n      )\n\n      // if (props.label || props.label === 0) {\n      //   currentLabel.value = props.label\n      // } else {\n      //   currentLabel.value = randomString()\n      // }\n\n      collapseState.registerPanel(state)\n\n      onBeforeUnmount(() => {\n        collapseState.unregisterPanel(state)\n      })\n    } else {\n      watch(\n        () => props.expanded,\n        value => {\n          currentExpanded.value = value\n        }\n      )\n    }\n\n    function setExpanded(expanded: boolean) {\n      currentExpanded.value = expanded\n\n      emit('update:expanded', expanded)\n      emitEvent(props.onToggle, expanded)\n    }\n\n    function handleToggle(expanded = !currentExpanded.value) {\n      if (props.disabled) return\n\n      if (collapseState) {\n        // 由父级进行管理\n        collapseState.expandPanel(currentLabel.value, expanded)\n      } else {\n        setExpanded(expanded)\n      }\n    }\n\n    return {\n      props,\n      nh,\n      icons,\n      currentExpanded,\n\n      tab,\n\n      tabId,\n      bodyId,\n      className,\n\n      handleToggle\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  buildProps,\n  classProp,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps, EventListener } from '@vexip-ui/config'\nimport type { ChangeEvent, InputType } from './symbol'\n\nexport const inputProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('input'),\n  type: String as PropType<InputType>,\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  formatter: Function as PropType<(value: string | number) => string | number>,\n  value: [String, Number],\n  placeholder: String,\n  autofocus: booleanProp,\n  spellcheck: booleanProp,\n  autocomplete: booleanProp,\n  readonly: booleanProp,\n  disabled: booleanProp,\n  controlClass: classProp,\n  debounce: booleanProp,\n  delay: Number,\n  maxLength: Number,\n  before: String,\n  after: String,\n  /**\n   * 是否显示切换 password 为明文的按钮\n   */\n  plainPassword: booleanProp,\n  clearable: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  transparent: booleanProp,\n  sync: booleanProp,\n  controlAttrs: Object as PropType<Record<string, any>>,\n  name: String,\n  onFocus: eventProp<(event: FocusEvent) => void>(),\n  onBlur: eventProp<(event: FocusEvent) => void>(),\n  onInput: eventProp<EventListener<ChangeEvent>>(),\n  onChange: eventProp<EventListener<ChangeEvent>>(),\n  onEnter: eventProp(),\n  onClear: eventProp(),\n  onPrefixClick: eventProp<(event: MouseEvent) => void>(),\n  onSuffixClick: eventProp<(event: MouseEvent) => void>(),\n  onKeyDown: eventProp<(event: KeyboardEvent) => void>(),\n  onKeyPress: eventProp<(event: KeyboardEvent) => void>(),\n  onKeyUp: eventProp<(event: KeyboardEvent) => void>(),\n  onCompositionStart: eventProp<(event: CompositionEvent) => void>(),\n  onCompositionEnd: eventProp<(event: CompositionEvent) => void>()\n})\n\nexport type InputProps = ExtractPropTypes<typeof inputProps>\nexport type InputCProps = ConfigurableProps<InputProps>\n", "import { Icon } from '@/components/icon'\nimport { useFieldStore } from '@/components/form'\n\nimport { Transition, computed, defineComponent, nextTick, ref, renderSlot, toRef, watch } from 'vue'\n\nimport { useHover } from '@vexip-ui/hooks'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { debounce, isNull, noop, throttle, toNumber } from '@vexip-ui/utils'\nimport { inputProps } from './props'\n\nimport type { ChangeEvent, InputType } from './symbol'\n\ntype InputEventType = 'input' | 'change'\n\nconst inputTypes = Object.freeze<InputType[]>(['text', 'password', 'date', 'datetime', 'time'])\n\nfunction toNotNullString(value: any) {\n  return isNull(value) ? '' : String(value)\n}\n\nexport default defineComponent({\n  name: 'Input',\n  props: inputProps,\n  emits: ['update:value'],\n  setup(_props, { slots, emit, expose }) {\n    const {\n      idFor,\n      state,\n      disabled,\n      loading,\n      size,\n      validateField,\n      clearField,\n      getFieldValue,\n      setFieldValue\n    } = useFieldStore<string | number>(() => inputControl.value?.focus())\n\n    const props = useProps('input', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      locale: null,\n      type: {\n        default: 'text',\n        validator: value => inputTypes.includes(value)\n      },\n      prefix: createIconProp(),\n      prefixColor: '',\n      suffix: createIconProp(),\n      suffixColor: '',\n      formatter: {\n        default: null,\n        isFunc: true\n      },\n      value: {\n        default: () => getFieldValue(''),\n        static: true\n      },\n      placeholder: null,\n      autofocus: false,\n      spellcheck: false,\n      autocomplete: false,\n      readonly: false,\n      disabled: () => disabled.value,\n      controlClass: null,\n      debounce: false,\n      delay: null,\n      maxLength: 0,\n      before: '',\n      after: '',\n      plainPassword: false,\n      clearable: false,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingLock: false,\n      loadingEffect: null,\n      transparent: false,\n      sync: false,\n      controlAttrs: null,\n      name: {\n        default: '',\n        static: true\n      }\n    })\n\n    const initValue = toNotNullString(props.value)\n\n    const nh = useNameHelper('input')\n    const icons = useIcons()\n    const focused = ref(false)\n    const currentValue = ref(initValue)\n    const showPassword = ref(false)\n    const currentLength = ref(initValue.length)\n    const beforeHover = ref(false)\n    const afterHover = ref(false)\n    const composing = ref(false)\n\n    const inputControl = ref<HTMLInputElement>()\n\n    const { wrapper: control, isHover } = useHover()\n    const locale = useLocale('input', toRef(props, 'locale'))\n\n    let lastValue = props.value\n\n    const hasBefore = computed(() => {\n      return !!(slots.before || slots.beforeAction || slots['before-action'] || props.before)\n    })\n    const hasAfter = computed(() => {\n      return !!(slots.after || slots.afterAction || slots['after-action'] || props.after)\n    })\n    const basisClass = computed(() => {\n      return {\n        [nh.bs('wrapper')]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.size)]: props.size !== 'default'\n      }\n    })\n    const readonly = computed(() => (props.loading && props.loadingLock) || props.readonly)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bm(props.type),\n        !hasBefore.value && !hasAfter.value && basisClass.value,\n        {\n          [nh.bm('focused')]: focused.value,\n          [nh.bm('disabled')]: props.disabled,\n          [nh.bm('readonly')]: readonly.value,\n          [nh.bm('loading')]: props.loading,\n          [nh.bm(props.state)]: props.state !== 'default',\n          [nh.bm('before')]: slots.beforeAction || slots['before-action'],\n          [nh.bm('after')]: slots.afterAction || slots['after-action'],\n          [nh.bm('transparent')]: props.transparent,\n          [nh.bm('plain-password')]: props.plainPassword\n        }\n      ]\n    })\n    const wrapperClass = computed(() => {\n      return {\n        ...basisClass.value,\n        [nh.bm(`wrapper--${props.size}`)]: props.size !== 'default',\n        [nh.bs('wrapper--before-only')]: hasBefore.value && !hasAfter.value,\n        [nh.bs('wrapper--after-only')]: !hasBefore.value && hasAfter.value,\n        [nh.bm('transparent')]: props.transparent\n      }\n    })\n    const hasPrefix = computed(() => !!(slots.prefix || props.prefix))\n    const hasSuffix = computed(() => !!(slots.suffix || props.suffix))\n    const inputType = computed(() => {\n      const type = props.type\n\n      if (type === 'password') {\n        return showPassword.value ? 'text' : 'password'\n      }\n\n      if (type === 'datetime') {\n        return 'datetime-local'\n      }\n\n      return type\n    })\n    const formattedValue = computed(() => {\n      return typeof props.formatter === 'function'\n        ? toNotNullString(props.formatter(currentValue.value))\n        : currentValue.value\n    })\n    const passwordIcon = computed(() =>\n      showPassword.value ? icons.value.plainText : icons.value.cipherText\n    )\n    const hasValue = computed(() => {\n      return !(isNull(currentValue.value) || currentValue.value === '')\n    })\n    const showClear = computed(() => {\n      return (\n        !props.disabled && !readonly.value && props.clearable && hasValue.value && isHover.value\n      )\n    })\n\n    watch(\n      () => props.value,\n      value => {\n        currentValue.value = toNotNullString(value)\n        lastValue = currentValue.value\n        limitValueLength()\n      }\n    )\n    watch(\n      [formattedValue, inputControl],\n      () => {\n        if (inputControl.value) {\n          inputControl.value.value = formattedValue.value\n        }\n      },\n      { immediate: true, flush: 'post' }\n    )\n\n    // Expose api methods.\n    // Need to define some same name methods in 'methods' option to support infer types.\n    expose({\n      focused,\n      currentValue,\n      showPassword,\n      currentLength,\n      composing,\n      input: inputControl,\n      copyValue,\n      focus: (options?: FocusOptions) => {\n        inputControl.value?.focus(options)\n      },\n      blur: () => {\n        inputControl.value?.blur()\n      }\n    })\n\n    function handleFocus(event: FocusEvent) {\n      if (!focused.value) {\n        focused.value = true\n        emitEvent(props.onFocus, event)\n      }\n    }\n\n    function handleBlur(event: FocusEvent) {\n      if (focused.value) {\n        focused.value = false\n\n        setTimeout(() => {\n          if (!focused.value) {\n            emitEvent(props.onBlur, event)\n            emitChangeEvent('change')\n          }\n        }, 120)\n      }\n    }\n\n    function handleChange(event: Event) {\n      const type = event.type as InputEventType\n\n      if (composing.value) {\n        if (type === 'input') return\n\n        composing.value = false\n      }\n\n      currentValue.value = (event.target as HTMLInputElement).value\n      limitValueLength()\n\n      const value = currentValue.value\n\n      setValue(value, type)\n    }\n\n    function setValue(value: string, type: InputEventType, sync = props.sync) {\n      currentValue.value = value\n      emitChangeEvent(type, sync)\n    }\n\n    function emitChangeEvent(type: InputEventType, sync = props.sync) {\n      type = type === 'input' ? 'input' : 'change'\n\n      const value =\n        typeof props.value === 'number' ? parseFloat(currentValue.value) : currentValue.value\n\n      if (type === 'change') {\n        if (lastValue === value) return\n\n        lastValue = value\n\n        if (!sync) {\n          emit('update:value', value)\n          setFieldValue(value)\n        }\n\n        emitEvent(props.onChange as ChangeEvent, value)\n\n        if (!sync) {\n          validateField()\n        }\n      } else {\n        if (sync) {\n          emit('update:value', value)\n          setFieldValue(value)\n        }\n\n        emitEvent(props.onInput as ChangeEvent, value)\n\n        if (sync) {\n          validateField()\n        }\n      }\n    }\n\n    function limitValueLength() {\n      let value = currentValue.value\n\n      if (isNull(value)) {\n        currentLength.value = 0\n\n        return\n      }\n\n      const maxLength = props.maxLength\n\n      if (maxLength && value.length > maxLength) {\n        value = value.slice(0, maxLength)\n      }\n\n      currentLength.value = value.length\n      currentValue.value = value\n    }\n\n    function toggleShowPassword() {\n      if (props.disabled) {\n        return\n      }\n\n      showPassword.value = !showPassword.value\n      nextTick(() => {\n        inputControl.value?.focus()\n      })\n    }\n\n    function handleClear(event: MouseEvent) {\n      if (props.disabled || readonly.value) return\n\n      event.stopPropagation()\n      setValue('', 'change', false)\n      emitEvent(props.onClear)\n      nextTick(clearField)\n      currentLength.value = 0\n      inputControl.value?.focus()\n    }\n\n    function handleEnter() {\n      emitEvent(props.onEnter)\n    }\n\n    function handlePrefixClick(event: MouseEvent) {\n      emitEvent(props.onPrefixClick, event)\n    }\n\n    function handleSuffixClick(event: MouseEvent) {\n      emitEvent(props.onSuffixClick, event)\n    }\n\n    function handleKeyDown(event: KeyboardEvent) {\n      emitEvent(props.onKeyDown, event)\n    }\n\n    function handleKeyPress(event: KeyboardEvent) {\n      emitEvent(props.onKeyPress, event)\n    }\n\n    function handleKeyUp(event: KeyboardEvent) {\n      if (event.key === 'Enter') {\n        handleEnter()\n      }\n\n      emitEvent(props.onKeyUp, event)\n    }\n\n    function handleCompositionStart(event: CompositionEvent) {\n      composing.value = true\n      emitEvent(props.onCompositionStart, event)\n    }\n\n    function handleCompositionEnd(event: CompositionEvent) {\n      if (composing.value) {\n        composing.value = false\n\n        if (inputControl.value) {\n          inputControl.value.dispatchEvent(new Event('input'))\n        }\n      }\n\n      emitEvent(props.onCompositionStart, event)\n    }\n\n    function copyValue() {\n      const input = document.createElement('input')\n\n      input.style.height = '0'\n      input.setAttribute('readonly', 'readonly')\n      input.value = currentValue.value\n      document.body.appendChild(input)\n      input.select()\n\n      const isSuccess = document.execCommand('copy')\n\n      document.body.removeChild(input)\n\n      return isSuccess\n    }\n\n    function preventDefault(event: Event) {\n      event.preventDefault()\n    }\n\n    const delay = toNumber(props.delay)\n    const handleInput = props.debounce\n      ? debounce(handleChange, delay || 100)\n      : throttle(handleChange, delay || 16)\n\n    function renderPrefix() {\n      return (\n        <div\n          class={[nh.be('icon'), nh.be('prefix')]}\n          style={{ color: props.prefixColor }}\n          onClick={handlePrefixClick}\n        >\n          {renderSlot(slots, 'prefix', undefined, () => [<Icon icon={props.prefix}></Icon>])}\n        </div>\n      )\n    }\n\n    function renderCustomSuffix() {\n      if (hasSuffix.value) {\n        return (\n          <div\n            key={'suffix'}\n            class={[nh.be('icon'), nh.be('suffix')]}\n            style={{\n              color: props.suffixColor,\n              opacity: showClear.value || props.loading ? '0%' : ''\n            }}\n            onClick={handleSuffixClick}\n          >\n            {renderSlot(slots, 'suffix', undefined, () => [<Icon icon={props.suffix}></Icon>])}\n          </div>\n        )\n      }\n\n      if (props.clearable || props.loading) {\n        return (\n          <div key={'placeholder'} class={[nh.be('icon'), nh.bem('icon', 'placeholder')]}></div>\n        )\n      }\n\n      return null\n    }\n\n    function renderSuffixAction() {\n      if (showClear.value) {\n        return (\n          <div key={'clear'} class={[nh.be('icon'), nh.be('clear')]} onClick={handleClear}>\n            <Icon {...icons.value.clear} label={'clear'}></Icon>\n          </div>\n        )\n      }\n\n      if (props.loading) {\n        return (\n          <div key={'loading'} class={[nh.be('icon'), nh.be('loading')]}>\n            <Icon\n              {...icons.value.loading}\n              effect={props.loadingEffect || icons.value.loading.effect}\n              icon={props.loadingIcon || icons.value.loading.icon}\n              label={'loading'}\n            ></Icon>\n          </div>\n        )\n      }\n\n      return null\n    }\n\n    function renderSuffix() {\n      return (\n        <div class={nh.be('suffix-wrapper')}>\n          {renderCustomSuffix()}\n          <Transition name={nh.ns('fade')} appear>\n            {renderSuffixAction()}\n          </Transition>\n        </div>\n      )\n    }\n\n    function renderCount() {\n      return (\n        <div class={nh.be('count')}>\n          {renderSlot(slots, 'count', { value: currentValue.value }, () => [\n            props.maxLength === Infinity\n              ? currentLength.value\n              : `${currentLength.value}/${props.maxLength}`\n          ])}\n        </div>\n      )\n    }\n\n    function renderPlainPassword() {\n      if (props.type === 'password' && props.plainPassword) {\n        return (\n          <div\n            key={'password'}\n            class={[nh.be('icon'), nh.be('password')]}\n            style={{\n              color: props.suffixColor\n            }}\n            onClick={toggleShowPassword}\n          >\n            {renderSlot(slots, 'password', { plain: showPassword.value }, () => [\n              <Icon {...passwordIcon.value}></Icon>\n            ])}\n          </div>\n        )\n      }\n\n      return null\n    }\n\n    function renderControl() {\n      return (\n        <div\n          id={idFor.value}\n          ref={control}\n          class={className.value}\n          onClick={() => inputControl.value?.focus()}\n        >\n          {hasPrefix.value && renderPrefix()}\n          <input\n            {...props.controlAttrs}\n            ref={inputControl}\n            class={[nh.be('control'), props.controlAttrs?.class, props.controlClass]}\n            type={inputType.value}\n            autofocus={props.autofocus}\n            autocomplete={props.autocomplete ? 'on' : 'off'}\n            spellcheck={props.spellcheck}\n            disabled={props.disabled}\n            readonly={readonly.value || undefined}\n            placeholder={props.placeholder ?? locale.value.placeholder}\n            maxlength={props.maxLength > 0 ? props.maxLength : undefined}\n            name={props.name || props.controlAttrs?.name}\n            onBlur={handleBlur}\n            onFocus={handleFocus}\n            onInput={handleInput}\n            onChange={handleChange}\n            onKeypress={handleKeyPress}\n            onKeydown={handleKeyDown}\n            onKeyup={handleKeyUp}\n            onSubmit={preventDefault}\n            onCompositionstart={handleCompositionStart}\n            onCompositionend={handleCompositionEnd}\n          />\n          {renderSuffix()}\n          {props.maxLength > 0 ? renderCount() : null}\n          {renderPlainPassword()}\n        </div>\n      )\n    }\n\n    function renderAside(type: 'before' | 'after') {\n      const buttonSlot = slots[`${type}Action`] || slots[`${type}-action`]\n\n      if (buttonSlot) {\n        return (\n          <div\n            class={[nh.be(type), nh.bem(type, 'action')]}\n            onMouseenter={() => ((type === 'before' ? beforeHover : afterHover).value = true)}\n            onMouseleave={() => ((type === 'before' ? beforeHover : afterHover).value = false)}\n          >\n            {buttonSlot()}\n          </div>\n        )\n      }\n\n      return <div class={nh.be(type)}>{slots[type] ? slots[type]!() : props[type]}</div>\n    }\n\n    return () => {\n      if (hasBefore.value || hasAfter.value) {\n        return (\n          <div class={wrapperClass.value}>\n            {hasBefore.value && renderAside('before')}\n            {renderControl()}\n            {hasAfter.value && renderAside('after')}\n          </div>\n        )\n      }\n\n      return renderControl()\n    }\n  },\n  methods: {\n    focus: noop as (options?: FocusOptions) => void,\n    blur: noop as () => void\n  }\n})\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"nh.be('palette')\"\n    tabindex=\"-1\"\n    :style=\"{\n      backgroundColor: `hsl(${hue}, 100%, 50%)`\n    }\"\n  >\n    <div :class=\"nh.be('saturation')\"></div>\n    <div :class=\"nh.be('value')\"></div>\n    <div\n      :class=\"nh.be('palette-handler')\"\n      :style=\"{\n        top: `${currentTop}%`,\n        left: `${currentLeft}%`\n      }\"\n    >\n      <div :class=\"nh.be('palette-pointer')\"></div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useMoving } from '@vexip-ui/hooks'\nimport { boundRange, toFixed } from '@vexip-ui/utils'\n\nexport default defineComponent({\n  name: 'ColorPalette',\n  props: {\n    hue: {\n      type: Number,\n      default: 0,\n      validator: (value: number) => {\n        return value >= 0 && value <= 360\n      }\n    },\n    value: {\n      type: Number,\n      default: 1,\n      validator: (value: number) => {\n        return value >= 0 && value <= 1\n      }\n    },\n    saturation: {\n      type: Number,\n      default: 0,\n      validator: (value: number) => {\n        return value >= 0 && value <= 1\n      }\n    }\n  },\n  emits: ['edit-start', 'edit-end', 'change'],\n  setup(props, { emit }) {\n    const currentTop = ref((1 - props.value) * 100)\n    const currentLeft = ref(props.saturation * 100)\n\n    let prevTop = currentTop.value\n    let prevLeft = currentLeft.value\n    let widthLimit: number\n    let heightLimit: number\n    let topStartAt: number\n    let leftStartAt: number\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.up || modifier.down || modifier.left || modifier.right) {\n          event.preventDefault()\n\n          const step = event.ctrlKey ? 10 : event.altKey ? 0.5 : 2\n          const sign = modifier.up || modifier.left ? -1 : 1\n          const delta = step * sign\n\n          if (modifier.up || modifier.down) {\n            currentTop.value += delta\n          } else {\n            currentLeft.value += delta\n          }\n\n          verifyPosition()\n          prevTop = currentTop.value\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      }\n    })\n\n    const { moving: editing } = useMoving({\n      target: wrapper,\n      onStart: (state, event) => {\n        if (!wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const rect = wrapper.value.getBoundingClientRect()\n        const { top, left, width, height } = rect\n\n        widthLimit = width\n        heightLimit = height\n\n        currentTop.value = ((topStartAt = state.clientY - top) / height) * 100\n        currentLeft.value = ((leftStartAt = state.clientX - left) / width) * 100\n\n        verifyPosition()\n        emit('edit-start')\n\n        let changed = false\n\n        if (Math.abs(currentTop.value - prevTop) >= 0.01) {\n          prevTop = currentTop.value\n          changed = true\n        }\n\n        if (Math.abs(currentLeft.value - prevLeft) >= 0.01) {\n          prevLeft = currentLeft.value\n          changed = true\n        }\n\n        changed && handleChange()\n      },\n      onMove: state => {\n        currentTop.value = ((topStartAt + state.deltaY) / heightLimit) * 100\n        currentLeft.value = ((leftStartAt + state.deltaX) / widthLimit) * 100\n\n        verifyPosition()\n        handleChange()\n      },\n      onEnd: () => {\n        emit('edit-end')\n      }\n    })\n\n    watch(\n      () => props.value,\n      value => {\n        currentTop.value = (1 - value) * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n    watch(\n      () => props.saturation,\n      value => {\n        currentLeft.value = value * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n\n    function verifyPosition() {\n      currentTop.value = toFixed(boundRange(currentTop.value, 0, 100), 3)\n      currentLeft.value = toFixed(boundRange(currentLeft.value, 0, 100), 3)\n    }\n\n    function handleChange() {\n      emit('change', {\n        h: props.hue,\n        s: currentLeft.value / 100,\n        v: toFixed(1 - currentTop.value / 100, 3)\n      })\n    }\n\n    return {\n      nh: useNameHelper('color-picker'),\n      currentTop,\n      currentLeft,\n      editing,\n\n      wrapper\n\n      // handleMouseDown\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"nh.be('palette')\"\n    tabindex=\"-1\"\n    :style=\"{\n      backgroundColor: `hsl(${hue}, 100%, 50%)`\n    }\"\n  >\n    <div :class=\"nh.be('saturation')\"></div>\n    <div :class=\"nh.be('value')\"></div>\n    <div\n      :class=\"nh.be('palette-handler')\"\n      :style=\"{\n        top: `${currentTop}%`,\n        left: `${currentLeft}%`\n      }\"\n    >\n      <div :class=\"nh.be('palette-pointer')\"></div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useMoving } from '@vexip-ui/hooks'\nimport { boundRange, toFixed } from '@vexip-ui/utils'\n\nexport default defineComponent({\n  name: 'ColorPalette',\n  props: {\n    hue: {\n      type: Number,\n      default: 0,\n      validator: (value: number) => {\n        return value >= 0 && value <= 360\n      }\n    },\n    value: {\n      type: Number,\n      default: 1,\n      validator: (value: number) => {\n        return value >= 0 && value <= 1\n      }\n    },\n    saturation: {\n      type: Number,\n      default: 0,\n      validator: (value: number) => {\n        return value >= 0 && value <= 1\n      }\n    }\n  },\n  emits: ['edit-start', 'edit-end', 'change'],\n  setup(props, { emit }) {\n    const currentTop = ref((1 - props.value) * 100)\n    const currentLeft = ref(props.saturation * 100)\n\n    let prevTop = currentTop.value\n    let prevLeft = currentLeft.value\n    let widthLimit: number\n    let heightLimit: number\n    let topStartAt: number\n    let leftStartAt: number\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.up || modifier.down || modifier.left || modifier.right) {\n          event.preventDefault()\n\n          const step = event.ctrlKey ? 10 : event.altKey ? 0.5 : 2\n          const sign = modifier.up || modifier.left ? -1 : 1\n          const delta = step * sign\n\n          if (modifier.up || modifier.down) {\n            currentTop.value += delta\n          } else {\n            currentLeft.value += delta\n          }\n\n          verifyPosition()\n          prevTop = currentTop.value\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      }\n    })\n\n    const { moving: editing } = useMoving({\n      target: wrapper,\n      onStart: (state, event) => {\n        if (!wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const rect = wrapper.value.getBoundingClientRect()\n        const { top, left, width, height } = rect\n\n        widthLimit = width\n        heightLimit = height\n\n        currentTop.value = ((topStartAt = state.clientY - top) / height) * 100\n        currentLeft.value = ((leftStartAt = state.clientX - left) / width) * 100\n\n        verifyPosition()\n        emit('edit-start')\n\n        let changed = false\n\n        if (Math.abs(currentTop.value - prevTop) >= 0.01) {\n          prevTop = currentTop.value\n          changed = true\n        }\n\n        if (Math.abs(currentLeft.value - prevLeft) >= 0.01) {\n          prevLeft = currentLeft.value\n          changed = true\n        }\n\n        changed && handleChange()\n      },\n      onMove: state => {\n        currentTop.value = ((topStartAt + state.deltaY) / heightLimit) * 100\n        currentLeft.value = ((leftStartAt + state.deltaX) / widthLimit) * 100\n\n        verifyPosition()\n        handleChange()\n      },\n      onEnd: () => {\n        emit('edit-end')\n      }\n    })\n\n    watch(\n      () => props.value,\n      value => {\n        currentTop.value = (1 - value) * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n    watch(\n      () => props.saturation,\n      value => {\n        currentLeft.value = value * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n\n    function verifyPosition() {\n      currentTop.value = toFixed(boundRange(currentTop.value, 0, 100), 3)\n      currentLeft.value = toFixed(boundRange(currentLeft.value, 0, 100), 3)\n    }\n\n    function handleChange() {\n      emit('change', {\n        h: props.hue,\n        s: currentLeft.value / 100,\n        v: toFixed(1 - currentTop.value / 100, 3)\n      })\n    }\n\n    return {\n      nh: useNameHelper('color-picker'),\n      currentTop,\n      currentLeft,\n      editing,\n\n      wrapper\n\n      // handleMouseDown\n    }\n  }\n})\n</script>\n", "<template>\n  <div ref=\"wrapper\" :class=\"nh.be('hue')\" tabindex=\"-1\">\n    <div :class=\"nh.be('hue-handler')\" :style=\"{ left: `${currentLeft}%` }\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useMoving } from '@vexip-ui/hooks'\nimport { boundRange, toFixed } from '@vexip-ui/utils'\n\nexport default defineComponent({\n  name: 'ColorHue',\n  props: {\n    hue: {\n      type: Number,\n      default: 0,\n      validator: (value: number) => {\n        return value >= 0 && value <= 360\n      }\n    }\n  },\n  emits: ['edit-start', 'edit-end', 'change'],\n  setup(props, { emit }) {\n    const currentLeft = ref(props.hue * 100)\n\n    let prevLeft = currentLeft.value\n    let widthLimit: number\n    let leftStartAt: number\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.left || modifier.right) {\n          event.preventDefault()\n\n          const step = event.ctrlKey ? 10 : event.altKey ? 0.5 : 2\n          const delta = step * (modifier.left ? -1 : 1)\n\n          currentLeft.value += delta\n\n          verifyPosition()\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      }\n    })\n\n    const { moving: editing } = useMoving({\n      target: wrapper,\n      onStart: (state, event) => {\n        if (!wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const rect = wrapper.value.getBoundingClientRect()\n        const { left, width } = rect\n\n        widthLimit = width\n        currentLeft.value = ((leftStartAt = state.clientX - left) / width) * 100\n\n        verifyPosition()\n        emit('edit-start')\n\n        if (Math.abs(currentLeft.value - prevLeft) >= 0.01) {\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      },\n      onMove: state => {\n        currentLeft.value = ((leftStartAt + state.deltaX) / widthLimit) * 100\n\n        verifyPosition()\n        handleChange()\n      },\n      onEnd: () => {\n        emit('edit-end')\n      }\n    })\n\n    watch(\n      () => props.hue,\n      value => {\n        currentLeft.value = (value / 360) * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n\n    function verifyPosition() {\n      currentLeft.value = toFixed(boundRange(currentLeft.value, 0, 100), 3)\n    }\n\n    function handleChange() {\n      emit('change', (currentLeft.value / 100) * 360)\n    }\n\n    return {\n      nh: useNameHelper('color-picker'),\n      currentLeft,\n      editing,\n\n      wrapper\n    }\n  }\n})\n</script>\n", "<template>\n  <div ref=\"wrapper\" :class=\"nh.be('hue')\" tabindex=\"-1\">\n    <div :class=\"nh.be('hue-handler')\" :style=\"{ left: `${currentLeft}%` }\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useMoving } from '@vexip-ui/hooks'\nimport { boundRange, toFixed } from '@vexip-ui/utils'\n\nexport default defineComponent({\n  name: 'ColorHue',\n  props: {\n    hue: {\n      type: Number,\n      default: 0,\n      validator: (value: number) => {\n        return value >= 0 && value <= 360\n      }\n    }\n  },\n  emits: ['edit-start', 'edit-end', 'change'],\n  setup(props, { emit }) {\n    const currentLeft = ref(props.hue * 100)\n\n    let prevLeft = currentLeft.value\n    let widthLimit: number\n    let leftStartAt: number\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.left || modifier.right) {\n          event.preventDefault()\n\n          const step = event.ctrlKey ? 10 : event.altKey ? 0.5 : 2\n          const delta = step * (modifier.left ? -1 : 1)\n\n          currentLeft.value += delta\n\n          verifyPosition()\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      }\n    })\n\n    const { moving: editing } = useMoving({\n      target: wrapper,\n      onStart: (state, event) => {\n        if (!wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const rect = wrapper.value.getBoundingClientRect()\n        const { left, width } = rect\n\n        widthLimit = width\n        currentLeft.value = ((leftStartAt = state.clientX - left) / width) * 100\n\n        verifyPosition()\n        emit('edit-start')\n\n        if (Math.abs(currentLeft.value - prevLeft) >= 0.01) {\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      },\n      onMove: state => {\n        currentLeft.value = ((leftStartAt + state.deltaX) / widthLimit) * 100\n\n        verifyPosition()\n        handleChange()\n      },\n      onEnd: () => {\n        emit('edit-end')\n      }\n    })\n\n    watch(\n      () => props.hue,\n      value => {\n        currentLeft.value = (value / 360) * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n\n    function verifyPosition() {\n      currentLeft.value = toFixed(boundRange(currentLeft.value, 0, 100), 3)\n    }\n\n    function handleChange() {\n      emit('change', (currentLeft.value / 100) * 360)\n    }\n\n    return {\n      nh: useNameHelper('color-picker'),\n      currentLeft,\n      editing,\n\n      wrapper\n    }\n  }\n})\n</script>\n", "<template>\n  <div ref=\"wrapper\" :class=\"nh.be('alpha')\" tabindex=\"-1\">\n    <div\n      :class=\"nh.be('opacity')\"\n      :style=\"{\n        backgroundImage: `linear-gradient(to right, rgba(${rgbString}, 0) 0%, rgb(${rgbString}) 100%)`\n      }\"\n    ></div>\n    <div :class=\"nh.be('alpha-handler')\" :style=\"{ left: `${currentLeft}%` }\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useMoving } from '@vexip-ui/hooks'\nimport { boundRange, toFixed } from '@vexip-ui/utils'\n\nimport type { PropType } from 'vue'\nimport type { RGBColor } from '@vexip-ui/utils'\n\nexport default defineComponent({\n  name: 'ColorAlpha',\n  props: {\n    rgb: {\n      type: Object as PropType<RGBColor>,\n      default: () => {\n        return { r: 0, g: 0, b: 0 }\n      },\n      validator: (value: RGBColor) => {\n        return 'r' in value && 'g' in value && 'b' in value\n      }\n    },\n    alpha: {\n      type: Number,\n      default: 1,\n      validator: (value: number) => {\n        return value >= 0 && value <= 1\n      }\n    }\n  },\n  emits: ['edit-start', 'edit-end', 'change'],\n  setup(props, { emit }) {\n    const currentLeft = ref(props.alpha * 100)\n\n    let prevLeft = currentLeft.value\n    let widthLimit: number\n    let leftStartAt: number\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.left || modifier.right) {\n          event.preventDefault()\n\n          const step = event.ctrlKey ? 10 : event.altKey ? 0.5 : 2\n          const delta = step * (modifier.left ? -1 : 1)\n\n          currentLeft.value += delta\n\n          verifyPosition()\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      }\n    })\n\n    const { moving: editing } = useMoving({\n      target: wrapper,\n      onStart: (state, event) => {\n        if (!wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const rect = wrapper.value.getBoundingClientRect()\n        const { left, width } = rect\n\n        widthLimit = width\n        currentLeft.value = ((leftStartAt = state.clientX - left) / width) * 100\n\n        verifyPosition()\n        emit('edit-start')\n\n        if (Math.abs(currentLeft.value - prevLeft) >= 0.01) {\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      },\n      onMove: state => {\n        currentLeft.value = ((leftStartAt + state.deltaX) / widthLimit) * 100\n\n        verifyPosition()\n        handleChange()\n      },\n      onEnd: () => {\n        emit('edit-end')\n      }\n    })\n\n    const rgbString = computed(() => {\n      const { r, g, b } = props.rgb\n\n      return `${r}, ${g}, ${b}`\n    })\n\n    verifyPosition()\n\n    watch(\n      () => props.alpha,\n      value => {\n        currentLeft.value = value * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n\n    function verifyPosition() {\n      currentLeft.value = toFixed(boundRange(currentLeft.value, 0, 100), 3)\n    }\n\n    function handleChange() {\n      emit('change', currentLeft.value / 100)\n    }\n\n    return {\n      nh: useNameHelper('color-picker'),\n      currentLeft,\n      editing,\n\n      rgbString,\n\n      wrapper\n    }\n  }\n})\n</script>\n", "<template>\n  <div ref=\"wrapper\" :class=\"nh.be('alpha')\" tabindex=\"-1\">\n    <div\n      :class=\"nh.be('opacity')\"\n      :style=\"{\n        backgroundImage: `linear-gradient(to right, rgba(${rgbString}, 0) 0%, rgb(${rgbString}) 100%)`\n      }\"\n    ></div>\n    <div :class=\"nh.be('alpha-handler')\" :style=\"{ left: `${currentLeft}%` }\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useMoving } from '@vexip-ui/hooks'\nimport { boundRange, toFixed } from '@vexip-ui/utils'\n\nimport type { PropType } from 'vue'\nimport type { RGBColor } from '@vexip-ui/utils'\n\nexport default defineComponent({\n  name: 'ColorAlpha',\n  props: {\n    rgb: {\n      type: Object as PropType<RGBColor>,\n      default: () => {\n        return { r: 0, g: 0, b: 0 }\n      },\n      validator: (value: RGBColor) => {\n        return 'r' in value && 'g' in value && 'b' in value\n      }\n    },\n    alpha: {\n      type: Number,\n      default: 1,\n      validator: (value: number) => {\n        return value >= 0 && value <= 1\n      }\n    }\n  },\n  emits: ['edit-start', 'edit-end', 'change'],\n  setup(props, { emit }) {\n    const currentLeft = ref(props.alpha * 100)\n\n    let prevLeft = currentLeft.value\n    let widthLimit: number\n    let leftStartAt: number\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (modifier.left || modifier.right) {\n          event.preventDefault()\n\n          const step = event.ctrlKey ? 10 : event.altKey ? 0.5 : 2\n          const delta = step * (modifier.left ? -1 : 1)\n\n          currentLeft.value += delta\n\n          verifyPosition()\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      }\n    })\n\n    const { moving: editing } = useMoving({\n      target: wrapper,\n      onStart: (state, event) => {\n        if (!wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const rect = wrapper.value.getBoundingClientRect()\n        const { left, width } = rect\n\n        widthLimit = width\n        currentLeft.value = ((leftStartAt = state.clientX - left) / width) * 100\n\n        verifyPosition()\n        emit('edit-start')\n\n        if (Math.abs(currentLeft.value - prevLeft) >= 0.01) {\n          prevLeft = currentLeft.value\n          handleChange()\n        }\n      },\n      onMove: state => {\n        currentLeft.value = ((leftStartAt + state.deltaX) / widthLimit) * 100\n\n        verifyPosition()\n        handleChange()\n      },\n      onEnd: () => {\n        emit('edit-end')\n      }\n    })\n\n    const rgbString = computed(() => {\n      const { r, g, b } = props.rgb\n\n      return `${r}, ${g}, ${b}`\n    })\n\n    verifyPosition()\n\n    watch(\n      () => props.alpha,\n      value => {\n        currentLeft.value = value * 100\n        verifyPosition()\n      },\n      { immediate: true }\n    )\n\n    function verifyPosition() {\n      currentLeft.value = toFixed(boundRange(currentLeft.value, 0, 100), 3)\n    }\n\n    function handleChange() {\n      emit('change', currentLeft.value / 100)\n    }\n\n    return {\n      nh: useNameHelper('color-picker'),\n      currentLeft,\n      editing,\n\n      rgbString,\n\n      wrapper\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { Color, HSLAColor, HSVAColor, RGBAColor } from '@vexip-ui/utils'\nimport type { ColorFormat } from './symbol'\n\ntype FormattedColor = string | RGBAColor | HSLAColor | HSVAColor\n\nexport const colorPickerProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('colorPicker'),\n  value: [String, Object] as PropType<Color | null>,\n  visible: booleanProp,\n  format: String as PropType<ColorFormat>,\n  alpha: booleanProp,\n  disabled: booleanProp,\n  transitionName: String,\n  noInput: booleanProp,\n  shortcut: {\n    type: [Boolean, Array] as PropType<boolean | string[]>,\n    default: null\n  },\n  placement: String as PropType<Placement>,\n  transfer: booleanStringProp,\n  outsideClose: booleanProp,\n  clearable: booleanProp,\n  cancelText: String,\n  confirmText: String,\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  noSuffix: booleanProp,\n  staticSuffix: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  popperAlive: booleanProp,\n  showLabel: booleanProp,\n  labelFormat: String as PropType<ColorFormat>,\n  onToggle: eventProp<(visible: boolean) => void>(),\n  onClickOutside: eventProp(),\n  onOutsideClose: eventProp(),\n  onClear: eventProp(),\n  onChange: eventProp<(color: FormattedColor) => void>(),\n  onShortcut: eventProp<(color: FormattedColor) => void>()\n})\n\nexport type ColorPickerProps = ExtractPropTypes<typeof colorPickerProps>\nexport type ColorPickerCProps = ConfigurableProps<ColorPickerProps>\n", "import { rgbToHsv } from '@vexip-ui/utils'\n\nexport type ColorFormat = 'rgb' | 'hsl' | 'hsv' | 'hex'\n\nexport const defaultShortcuts = Object.freeze([\n  '#2d8cf0',\n  '#19be6b',\n  '#ff9900',\n  '#ed4014',\n  '#00b5ff',\n  '#19c919',\n  '#f9e31c',\n  '#ea1a1a',\n  '#9b1dea',\n  '#00c2b1',\n  '#ac7a33',\n  '#1d35ea',\n  '#8bc34a',\n  '#f16b62',\n  '#ea4ca3',\n  '#0d94aa',\n  '#febd79',\n  '#5d4037',\n  '#00bcd4',\n  '#f06292',\n  '#cddc39',\n  '#607d8b',\n  '#000000',\n  '#ffffff'\n])\n\nexport const getDefaultHsv = () => rgbToHsv(0, 0, 0)\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { Input } from '@/components/input'\nimport { Popper } from '@/components/popper'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, nextTick, ref, toRef, watch } from 'vue'\n\nimport ColorPalette from './color-palette.vue'\nimport ColorHue from './color-hue.vue'\nimport ColorAlpha from './color-alpha.vue'\nimport { placementWhileList, useClickOutside, useHover, usePopper } from '@vexip-ui/hooks'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport {\n  getLast,\n  hsvToHsl,\n  hsvToRgb,\n  isClient,\n  isElement,\n  parseColorToRgba,\n  rgbToHex,\n  rgbToHsv,\n  rgbaToHex,\n  toFixed\n} from '@vexip-ui/utils'\nimport { colorPickerProps } from './props'\nimport { defaultShortcuts, getDefaultHsv } from './symbol'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { Color, HSLAColor, HSVAColor, HSVColor, RGBAColor, RGBColor } from '@vexip-ui/utils'\nimport type { ColorFormat } from './symbol'\n\ndefineOptions({ name: 'ColorPicker' })\n\nconst {\n  idFor,\n  state,\n  disabled,\n  loading,\n  size,\n  validateField,\n  clearField,\n  getFieldValue,\n  setFieldValue\n} = useFieldStore<Color | null>(() => reference.value?.focus())\n\nconst nh = useNameHelper('color-picker')\n\nconst _props = defineProps(colorPickerProps)\nconst props = useProps('colorPicker', _props, {\n  size: createSizeProp(size),\n  state: createStateProp(state),\n  locale: null,\n  value: {\n    default: () => getFieldValue('')!,\n    static: true\n  },\n  visible: false,\n  format: {\n    default: 'rgb',\n    validator: value => ['rgb', 'hsl', 'hsv', 'hex'].includes(value)\n  },\n  alpha: false,\n  disabled: () => disabled.value,\n  transitionName: () => nh.ns('drop'),\n  noInput: false,\n  shortcut: false,\n  placement: {\n    default: 'bottom',\n    validator: value => placementWhileList.includes(value)\n  },\n  transfer: false,\n  outsideClose: true,\n  clearable: false,\n  cancelText: null,\n  confirmText: null,\n  prefix: createIconProp(),\n  prefixColor: '',\n  suffix: createIconProp(),\n  suffixColor: '',\n  noSuffix: false,\n  staticSuffix: false,\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  popperAlive: null,\n  showLabel: false,\n  labelFormat: null\n})\n\nconst emit = defineEmits(['update:value', 'update:visible'])\n\nconst slots = defineSlots<{\n  control: (params: { color: RGBColor, alpha: number, empty: boolean }) => any,\n  prefix: () => any,\n  suffix: () => any,\n  label: (params: { color: RGBColor, alpha: number, empty: boolean, label: string }) => any\n}>()\n\nconst icons = useIcons()\nconst locale = useLocale('colorPicker', toRef(props, 'locale'))\n\nconst isEmpty = ref(true)\nconst currentVisible = ref(props.visible)\nconst currentValue = ref<HSVColor>(null!)\nconst currentAlpha = ref(1)\nconst editing = ref(false)\nconst placement = toRef(props, 'placement')\nconst transfer = toRef(props, 'transfer')\nconst shortcutHitting = ref(0)\nconst shortcutsFocused = ref(false)\n\nparseValue(props.value)\n\nconst palette = ref(null)\nconst hue = ref(null)\nconst alphaEl = ref(null)\nconst shortcutEl = ref(null)\nconst input = ref(null)\nconst cancel = ref(null)\nconst confirm = ref(null)\n\nconst wrapper = useClickOutside(handleClickOutside)\nconst popper = ref<PopperExposed>()\nconst { reference, transferTo, updatePopper } = usePopper({\n  placement,\n  transfer,\n  wrapper,\n  popper: computed(() => popper.value?.wrapper),\n  isDrop: true\n})\nconst { isHover } = useHover(reference)\n\nconst unitList = computed(() => {\n  return [\n    palette.value,\n    hue.value,\n    alphaEl.value,\n    shortcutEl.value,\n    input.value,\n    cancel.value,\n    confirm.value\n  ].filter(Boolean) as any[]\n})\n\nconst lastValue = ref<HSVAColor>({\n  ...currentValue.value,\n  a: currentAlpha.value,\n  format: 'hsva'\n})\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.ns('input-vars')]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('empty')]: isEmpty.value && !currentVisible.value,\n    [nh.bm('focused')]: currentVisible.value,\n    [nh.bm('disabled')]: props.disabled,\n    [nh.bm('alpha')]: props.alpha,\n    [nh.bm(props.size)]: props.size !== 'default',\n    [nh.bm(props.state)]: props.state !== 'default'\n  }\n})\nconst readonly = computed(() => props.loading && props.loadingLock)\nconst selectorClass = computed(() => {\n  const baseCls = nh.be('selector')\n\n  return {\n    [baseCls]: true,\n    [`${baseCls}--disabled`]: props.disabled,\n    [`${baseCls}--readonly`]: readonly.value,\n    [`${baseCls}--loading`]: props.loading,\n    [`${baseCls}--${props.size}`]: props.size !== 'default',\n    [`${baseCls}--focused`]: currentVisible.value,\n    [`${baseCls}--${props.state}`]: props.state !== 'default'\n  }\n})\nconst rgb = computed(() => {\n  const { h, s, v } =\n    currentValue.value && currentVisible.value\n      ? currentValue.value\n      : lastValue.value ?? { h: 0, s: 0, v: 0 }\n\n  return hsvToRgb(h, s, v)\n})\nconst hex = computed(() => {\n  const { r, g, b } = rgb.value\n\n  if (props.alpha) {\n    return rgbaToHex(r, g, b, currentAlpha.value)\n  }\n\n  return rgbToHex(r, g, b)\n})\nconst shortcutList = computed(() => {\n  if (!props.shortcut) return []\n\n  if (Array.isArray(props.shortcut)) {\n    return props.shortcut\n  }\n\n  return defaultShortcuts\n})\nconst hasPrefix = computed(() => !!(slots.prefix || props.prefix))\nconst showClear = computed(() => {\n  return !props.disabled && !readonly.value && props.clearable && isHover.value && !isEmpty.value\n})\nconst formattedColor = computed(() => getFormattedColor(props.format))\nconst labelColor = computed(() => {\n  return (\n    props.labelFormat ? getFormattedColor(props.labelFormat) : formattedColor.value\n  )?.toString()\n})\n\nwatch(\n  () => props.visible,\n  value => {\n    currentVisible.value = value\n  }\n)\nwatch(currentVisible, value => {\n  value && updatePopper()\n})\nwatch(\n  () => props.value,\n  value => {\n    parseValue(value)\n    lastValue.value = { ...currentValue.value, a: currentAlpha.value, format: 'hsva' }\n  }\n)\nwatch(\n  () => props.disabled,\n  value => {\n    if (value) {\n      setVisible(false)\n    }\n  }\n)\n\ndefineExpose({\n  idFor,\n  isEmpty,\n  currentVisible,\n  currentValue,\n  currentAlpha,\n  rgb,\n  hex,\n  labelColor,\n  wrapper,\n  reference,\n  popper,\n  toggleVisible,\n  focus,\n  blur\n})\n\nfunction parseValue(value: Color | null) {\n  if (value) {\n    const { r, g, b, a } = parseColorToRgba(value)\n\n    isEmpty.value = false\n    currentValue.value = rgbToHsv(r, g, b)\n    currentAlpha.value = a\n  } else {\n    isEmpty.value = true\n    currentValue.value = getDefaultHsv()\n    currentAlpha.value = 1\n  }\n}\n\nfunction setVisible(visible: boolean) {\n  if (currentVisible.value === visible) return\n\n  currentVisible.value = visible\n\n  emit('update:visible', visible)\n  emitEvent(props.onToggle, visible)\n}\n\nfunction getFormattedColor(format: ColorFormat) {\n  let color: Color\n\n  if (format === 'hex') {\n    const { r, g, b } = rgb.value\n\n    if (props.alpha) {\n      color = rgbaToHex(r, g, b, currentAlpha.value)\n    } else {\n      color = rgbToHex(r, g, b)\n    }\n  } else {\n    switch (format) {\n      case 'rgb': {\n        color = { ...rgb.value } as RGBAColor\n        color.r = Math.round(color.r)\n        color.g = Math.round(color.g)\n        color.b = Math.round(color.b)\n\n        break\n      }\n      case 'hsl': {\n        const { h, s, v } = currentValue.value\n\n        color = hsvToHsl(h, s, v) as HSLAColor\n        color.h = Math.round(color.h)\n        color.s = toFixed(color.s, 3)\n        color.l = toFixed(color.l, 3)\n\n        break\n      }\n      default: {\n        color = { ...currentValue.value } as HSVAColor\n        color.h = Math.round(color.h)\n        color.s = toFixed(color.s, 3)\n        color.v = toFixed(color.v, 3)\n      }\n    }\n\n    color.a = toFixed(currentAlpha.value, 3)\n  }\n\n  return color\n}\n\nfunction handleClickOutside() {\n  if (!editing.value) {\n    emitEvent(props.onClickOutside)\n\n    if (props.outsideClose && currentVisible.value) {\n      setVisible(false)\n      emitEvent(props.onOutsideClose)\n    }\n  }\n}\n\nfunction toggleVisible() {\n  if (props.disabled || readonly.value) return\n\n  setVisible(!currentVisible.value)\n}\n\nfunction handleClear() {\n  if (props.disabled || readonly.value) return\n\n  if (props.clearable) {\n    setVisible(false)\n    emit('update:value', '')\n    emitEvent(props.onChange, '')\n\n    nextTick(() => {\n      parseValue(null)\n      clearField()\n      emitEvent(props.onClear)\n    })\n  }\n}\n\nfunction handleConfirm() {\n  if (props.disabled || readonly.value) return\n\n  lastValue.value = { ...currentValue.value, a: currentAlpha.value, format: 'hsva' }\n  isEmpty.value = false\n  setVisible(false)\n  handleChange()\n}\n\nfunction handleChange() {\n  const color = formattedColor.value\n\n  emit('update:value', color)\n  setFieldValue(color)\n  emitEvent(props.onChange, color)\n  validateField()\n}\n\nfunction handlePaletteChange({ s, v }: HSVColor) {\n  currentValue.value.s = s\n  currentValue.value.v = v\n}\n\nfunction handleHueChange(hue: number) {\n  currentValue.value.h = hue\n}\n\nfunction handleAlphaChange(alpha: number) {\n  currentAlpha.value = alpha\n}\n\nfunction handleInputColor(value: string) {\n  const { r, g, b, a } = parseColorToRgba(value)\n\n  currentValue.value = rgbToHsv(r, g, b)\n  currentAlpha.value = a\n}\n\nfunction handleShortcutClick(color: string) {\n  const { r, g, b, a } = parseColorToRgba(color)\n\n  currentValue.value = rgbToHsv(r, g, b)\n  currentAlpha.value = a\n\n  emitEvent(props.onShortcut, formattedColor.value)\n}\n\nfunction toggleEditing(able: boolean) {\n  if (!able) {\n    setTimeout(() => {\n      editing.value = false\n    }, 0)\n  } else {\n    editing.value = true\n  }\n}\n\nfunction handleTabDown(event: KeyboardEvent) {\n  if (isClient && currentVisible.value) {\n    const activeEl = document && document.activeElement\n\n    if (!activeEl) return\n\n    event.preventDefault()\n\n    const shift = event.shiftKey\n    const elList = Array.from(unitList.value)\n    const index = elList.findIndex(unit => {\n      const el = isElement(unit) ? unit : unit.$el\n\n      return el === activeEl || el.contains(activeEl)\n    })\n\n    let maybeEl: any\n\n    if (!~index) {\n      maybeEl = shift ? getLast(elList) : elList[0]\n    } else if (shift ? !index : index === elList.length - 1) {\n      maybeEl = reference.value\n    } else {\n      maybeEl = elList[index + (shift ? -1 : 1)]\n    }\n\n    if (maybeEl) {\n      if (typeof maybeEl.focus === 'function') {\n        maybeEl.focus()\n      } else {\n        maybeEl.$el?.focus()\n      }\n    }\n  }\n}\n\nfunction handleShortcutsFocus() {\n  shortcutHitting.value = 0\n  shortcutsFocused.value = true\n}\n\nfunction handleShortcutsKeydown(event: KeyboardEvent) {\n  const key = event.code || event.key\n  const shortcutCount = shortcutList.value.length\n\n  switch (key) {\n    case 'ArrowUp':\n    case 'ArrowLeft': {\n      shortcutHitting.value--\n      break\n    }\n    case 'ArrowDown':\n    case 'ArrowRight': {\n      shortcutHitting.value++\n      break\n    }\n    case 'Enter':\n    case 'Space':\n    case ' ': {\n      const color = shortcutList.value[shortcutHitting.value]\n\n      color && handleShortcutClick(color)\n      break\n    }\n  }\n\n  shortcutHitting.value = (shortcutHitting.value + shortcutCount) % shortcutCount\n}\n\nfunction handleSpaceDown(event: KeyboardEvent) {\n  if (props.disabled) {\n    setVisible(false)\n  } else {\n    event.preventDefault()\n\n    if (currentVisible.value) {\n      handleConfirm()\n      reference.value?.focus()\n    } else {\n      setVisible(true)\n    }\n  }\n}\n\nfunction handleEscDown() {\n  setVisible(false)\n  reference.value?.focus()\n}\n\nfunction focus(options?: FocusOptions) {\n  reference.value?.focus(options)\n}\n\nfunction blur() {\n  reference.value?.blur()\n}\n</script>\n\n<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    @click=\"toggleVisible\"\n    @keydown.tab.stop=\"handleTabDown\"\n    @keydown.space=\"handleSpaceDown\"\n    @keydown.escape=\"handleEscDown\"\n  >\n    <div ref=\"reference\" :class=\"selectorClass\" tabindex=\"0\">\n      <slot\n        name=\"control\"\n        :color=\"rgb\"\n        :alpha=\"currentAlpha\"\n        :empty=\"isEmpty\"\n      >\n        <div\n          v-if=\"hasPrefix\"\n          :class=\"[nh.be('icon'), nh.be('prefix')]\"\n          :style=\"{ color: props.prefixColor }\"\n        >\n          <slot name=\"prefix\">\n            <Icon :icon=\"props.prefix\"></Icon>\n          </slot>\n        </div>\n        <div :class=\"nh.be('control')\">\n          <div :class=\"[nh.be('marker'), showLabel && nh.bem('marker', 'with-label')]\">\n            <Icon v-if=\"!currentVisible && isEmpty\" v-bind=\"icons.close\"></Icon>\n            <div\n              v-else\n              :style=\"{\n                width: '100%',\n                height: '100%',\n                backgroundColor: `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${\n                  currentVisible ? currentAlpha : lastValue.a\n                })`\n              }\"\n            ></div>\n          </div>\n          <div v-if=\"showLabel\" :class=\"nh.be('label')\">\n            <slot\n              name=\"label\"\n              :color=\"rgb\"\n              :alpha=\"currentAlpha\"\n              :empty=\"isEmpty\"\n              :label=\"labelColor\"\n            >\n              {{ labelColor }}\n            </slot>\n          </div>\n        </div>\n        <div\n          v-if=\"!props.noSuffix\"\n          :class=\"[nh.be('icon'), nh.be('suffix')]\"\n          :style=\"{\n            color: props.suffixColor,\n            opacity: showClear || props.loading ? '0%' : ''\n          }\"\n        >\n          <slot name=\"suffix\">\n            <Icon\n              v-if=\"props.suffix\"\n              :icon=\"props.suffix\"\n              :class=\"{\n                [nh.be('arrow')]: !props.staticSuffix\n              }\"\n            ></Icon>\n            <Icon v-else v-bind=\"icons.angleDown\" :class=\"nh.be('arrow')\"></Icon>\n          </slot>\n        </div>\n        <div\n          v-else-if=\"props.clearable || props.loading\"\n          :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n        ></div>\n        <Transition :name=\"nh.ns('fade')\" appear>\n          <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear\">\n            <Icon v-bind=\"icons.clear\"></Icon>\n          </div>\n          <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n            <Icon\n              v-bind=\"icons.loading\"\n              :effect=\"props.loadingEffect || icons.loading.effect\"\n              :icon=\"props.loadingIcon || icons.loading.icon\"\n            ></Icon>\n          </div>\n        </Transition>\n      </slot>\n    </div>\n    <Popper\n      ref=\"popper\"\n      :class=\"[nh.be('popper'), nh.bs('vars')]\"\n      :visible=\"currentVisible\"\n      :to=\"transferTo\"\n      :transition=\"props.transitionName\"\n      :alive=\"props.popperAlive ?? !transferTo\"\n      @click.stop\n      @keydown.tab.stop=\"handleTabDown\"\n      @keydown.space=\"handleSpaceDown\"\n      @keydown.escape=\"handleEscDown\"\n    >\n      <div :class=\"nh.be('panel')\">\n        <div :class=\"nh.be('section')\">\n          <ColorPalette\n            ref=\"palette\"\n            :hue=\"currentValue.h\"\n            :saturation=\"currentValue.s\"\n            :value=\"currentValue.v\"\n            @edit-start=\"toggleEditing(true)\"\n            @edit-end=\"toggleEditing(false)\"\n            @change=\"handlePaletteChange\"\n          ></ColorPalette>\n          <ColorHue\n            ref=\"hue\"\n            :hue=\"currentValue.h\"\n            @edit-start=\"toggleEditing(true)\"\n            @edit-end=\"toggleEditing(false)\"\n            @change=\"handleHueChange\"\n          ></ColorHue>\n          <ColorAlpha\n            v-if=\"props.alpha\"\n            ref=\"alphaEl\"\n            :rgb=\"rgb\"\n            :alpha=\"currentAlpha\"\n            @edit-start=\"toggleEditing(true)\"\n            @edit-end=\"toggleEditing(false)\"\n            @change=\"handleAlphaChange\"\n          ></ColorAlpha>\n          <div\n            v-if=\"props.shortcut\"\n            ref=\"shortcutEl\"\n            :class=\"nh.be('shortcuts')\"\n            tabindex=\"-1\"\n            @focus=\"handleShortcutsFocus\"\n            @blur=\"shortcutsFocused = false\"\n            @keydown=\"handleShortcutsKeydown\"\n          >\n            <div\n              v-for=\"(item, index) in shortcutList\"\n              :key=\"index\"\n              :class=\"{\n                [nh.be('shortcut-item')]: true,\n                [nh.bem('shortcut-item', 'hitting')]: shortcutsFocused && shortcutHitting === index\n              }\"\n              :style=\"{ backgroundColor: item }\"\n              @click=\"handleShortcutClick(item)\"\n            ></div>\n          </div>\n        </div>\n        <div :class=\"nh.be('action')\">\n          <Input\n            v-if=\"!props.noInput\"\n            ref=\"input\"\n            inherit\n            :class=\"nh.be('input')\"\n            size=\"small\"\n            :value=\"hex.toUpperCase()\"\n            :respond=\"false\"\n            @change=\"handleInputColor\"\n          ></Input>\n          <Button\n            v-if=\"props.clearable\"\n            ref=\"cancel\"\n            inherit\n            text\n            size=\"small\"\n            @click=\"handleClear\"\n          >\n            {{ props.cancelText || locale.cancel }}\n          </Button>\n          <Button\n            ref=\"confirm\"\n            inherit\n            type=\"primary\"\n            size=\"small\"\n            @click=\"handleConfirm\"\n          >\n            {{ props.confirmText || locale.confirm }}\n          </Button>\n        </div>\n      </div>\n    </Popper>\n  </div>\n</template>\n", "import { wrapProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconsOptions, LocaleOptions } from '@vexip-ui/config'\nimport type { PropsOptions } from '@/components/props'\n\nexport const configProviderProps = wrapProps({\n  props: {\n    type: Object as PropType<PropsOptions>,\n    default: () => ({})\n  },\n  locale: {\n    type: Object as PropType<LocaleOptions>,\n    default: () => ({})\n  },\n  icons: {\n    type: Object as PropType<IconsOptions>,\n    default: () => ({})\n  },\n  zIndex: {\n    type: Number,\n    default: null\n  },\n  theme: {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    type: String as PropType<'base' | 'dark' | (string & {})>,\n    default: null\n  },\n  hoverDelay: {\n    type: Number,\n    default: null\n  }\n})\n\nexport type ConfigProviderProps = ExtractPropTypes<typeof configProviderProps>\n", "import { defineComponent, renderSlot, toRefs } from 'vue'\n\nimport {\n  configHoverDelay,\n  configIcons,\n  configLocale,\n  configProps,\n  configZIndex,\n  useNameHelper\n} from '@vexip-ui/config'\nimport { configProviderProps } from './props'\n\nexport default defineComponent({\n  name: 'ConfigProvider',\n  props: configProviderProps,\n  setup(_props, { slots }) {\n    const { props, locale, icons, zIndex, theme, hoverDelay } = toRefs(_props)\n\n    const nh = useNameHelper('config-provider')\n\n    configProps(props)\n    configLocale(locale)\n    configIcons(icons)\n    configZIndex(zIndex)\n    configHoverDelay(hoverDelay)\n\n    return () => {\n      if (theme.value) {\n        return (\n          <section class={[nh.b(), nh.ns(`theme-vars-${theme.value}`)]}>\n            {renderSlot(slots, 'default')}\n          </section>\n        )\n      }\n\n      return renderSlot(slots, 'default')\n    }\n  }\n})\n", "import { booleanProp, booleanStringProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const maskerProps = buildProps({\n  active: booleanProp,\n  closable: booleanProp,\n  inner: booleanProp,\n  maskTransition: String,\n  transitionName: String,\n  disabled: booleanProp,\n  onBeforeClose: Function as PropType<() => any | Promise<any>>,\n  transfer: booleanStringProp,\n  autoRemove: booleanProp,\n  permeable: booleanProp,\n  onToggle: eventProp<(active: boolean) => void>(),\n  onClose: eventProp(),\n  onHide: eventProp(),\n  onShow: eventProp(),\n  onResize: eventProp<(entry: ResizeObserverEntry) => void>(),\n  onMaskClick: eventProp<(event: MouseEvent) => void>()\n})\n\nexport type MaskerProps = ExtractPropTypes<typeof maskerProps>\nexport type MaskerCProps = ConfigurableProps<MaskerProps, never, 'onBeforeClose'>\n", "<script setup lang=\"ts\">\nimport { Portal } from '@/components/portal'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport { computed, nextTick, ref, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps, useZIndex } from '@vexip-ui/config'\nimport { getLast, isPromise, queryTabables } from '@vexip-ui/utils'\nimport { maskerProps } from './props'\n\ndefineOptions({ name: 'Masker' })\n\nconst nh = useNameHelper('masker')\nconst _props = defineProps(maskerProps)\nconst props = useProps('masker', _props, {\n  active: {\n    default: false,\n    static: true\n  },\n  closable: false,\n  inner: false,\n  maskTransition: () => nh.ns('fade'),\n  transitionName: () => nh.ns('fade'),\n  disabled: false,\n  onBeforeClose: {\n    default: null,\n    isFunc: true\n  },\n  transfer: false,\n  autoRemove: false,\n  permeable: false\n})\n\nconst emit = defineEmits(['update:active'])\n\nconst getIndex = useZIndex()\n\nconst currentActive = ref(props.active)\n// If initial active, we should set a valid index as initial value\nconst zIndex = ref(props.active ? getIndex() : 0)\nconst wrapShow = ref(props.active)\n\nconst wrapper = ref<HTMLElement>()\nconst topTrap = ref<HTMLElement>()\nconst bottomTrap = ref<HTMLElement>()\n\nlet showing = false\nlet prevFocusedEl: HTMLElement | null = null\n\nconst transferTo = computed(() => {\n  return props.inner\n    ? ''\n    : typeof props.transfer === 'boolean'\n      ? props.transfer\n        ? 'body'\n        : ''\n      : props.transfer\n})\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    {\n      [nh.bm('inherit')]: transferTo.value !== 'body' && props.inherit,\n      [nh.bm('inner')]: props.inner,\n      [nh.bm('disabled')]: props.disabled\n    }\n  ]\n})\n\nwatch(\n  () => props.active,\n  value => {\n    currentActive.value = value\n\n    if (value) {\n      wrapShow.value = value\n    }\n  }\n)\nwatch(currentActive, value => {\n  if (!value) {\n    showing = false\n\n    if (prevFocusedEl) {\n      prevFocusedEl.focus()\n      prevFocusedEl = null\n    }\n  } else {\n    prevFocusedEl = document.activeElement as HTMLElement\n    zIndex.value = getIndex()\n  }\n\n  if (!props.maskTransition) {\n    value ? afterOpen() : afterClose()\n  }\n})\nwatch(\n  [() => props.permeable, wrapper],\n  () => {\n    if (wrapper.value) {\n      wrapper.value.removeEventListener('wheel', disableWheel)\n\n      if (!props.permeable) {\n        wrapper.value.addEventListener('wheel', disableWheel)\n      }\n    }\n  },\n  { immediate: true, flush: 'post' }\n)\n\ndefineExpose({\n  currentActive,\n  zIndex,\n  wrapShow,\n  wrapper,\n  topTrap,\n  bottomTrap\n})\n\nfunction disableWheel(event: WheelEvent) {\n  event.preventDefault()\n  event.stopPropagation()\n}\n\nfunction toggleActive(active: boolean) {\n  if (currentActive.value === active) return\n\n  currentActive.value = active\n\n  emit('update:active', active)\n  emitEvent(props.onToggle, active)\n}\n\nasync function handleClose() {\n  if (!props.closable) return\n\n  let result: unknown = true\n\n  if (typeof props.onBeforeClose === 'function') {\n    result = props.onBeforeClose()\n\n    if (isPromise(result)) {\n      result = await result\n    }\n  }\n\n  if (result !== false) {\n    nextTick(() => {\n      toggleActive(false)\n      emitEvent(props.onClose)\n    })\n  }\n}\n\nfunction afterClose() {\n  if (currentActive.value) return\n\n  nextTick(() => {\n    wrapShow.value = false\n    emitEvent(props.onHide)\n  })\n}\n\nfunction afterOpen() {\n  if (!currentActive.value) return\n\n  const activeEl = document && document.activeElement\n\n  if (!activeEl || !wrapper.value || !wrapper.value.contains(activeEl)) {\n    topTrap.value?.focus()\n  }\n\n  nextTick(() => {\n    showing = true\n    emitEvent(props.onShow)\n  })\n}\n\nfunction handleMaskClick(event: MouseEvent) {\n  emitEvent(props.onMaskClick, event)\n  handleClose()\n}\n\nfunction handleFocusIn(event: FocusEvent) {\n  const target = event.target as HTMLElement\n\n  if (!showing || !wrapper.value || !target || !topTrap.value || !bottomTrap.value) {\n    return\n  }\n\n  const tabables = queryTabables(wrapper.value)\n\n  if (!tabables.length) {\n    return\n  }\n\n  if (topTrap.value === target) {\n    getLast(tabables)!.focus()\n  } else if (bottomTrap.value === target) {\n    tabables[0].focus()\n  }\n}\n\nfunction handleResize(entry: ResizeObserverEntry) {\n  emitEvent(props.onResize, entry)\n}\n</script>\n\n<template>\n  <Portal v-if=\"!props.autoRemove || wrapShow\" :to=\"transferTo\">\n    <div\n      v-bind=\"$attrs\"\n      ref=\"wrapper\"\n      :class=\"className\"\n      tabindex=\"-1\"\n      :style=\"{\n        zIndex,\n        pointerEvents: wrapShow ? undefined : 'none',\n        visibility: wrapShow ? undefined : 'hidden'\n      }\"\n      @focusin=\"handleFocusIn\"\n      @keydown.escape.prevent=\"handleClose\"\n    >\n      <ResizeObserver @resize=\"handleResize\">\n        <Transition\n          v-if=\"!props.disabled\"\n          appear\n          :name=\"props.maskTransition\"\n          @after-enter=\"afterOpen\"\n          @after-leave=\"afterClose\"\n        >\n          <div v-show=\"currentActive\" :class=\"nh.be('mask')\" @click=\"handleMaskClick\">\n            <slot name=\"mask\">\n              <div :class=\"nh.be('mask-inner')\"></div>\n            </slot>\n          </div>\n        </Transition>\n        <div\n          v-else\n          :class=\"nh.be('placeholder')\"\n          role=\"none\"\n          aria-hidden\n        ></div>\n      </ResizeObserver>\n      <span\n        ref=\"topTrap\"\n        tabindex=\"0\"\n        aria-hidden=\"true\"\n        style=\"width: 0; height: 0; overflow: hidden; outline: none\"\n      ></span>\n      <Transition v-if=\"props.transitionName\" appear :name=\"props.transitionName\">\n        <slot :show=\"currentActive\"></slot>\n      </Transition>\n      <slot v-else :show=\"currentActive\"></slot>\n      <span\n        ref=\"bottomTrap\"\n        tabindex=\"0\"\n        aria-hidden=\"true\"\n        style=\"width: 0; height: 0; overflow: hidden; outline: none\"\n      ></span>\n    </div>\n  </Portal>\n</template>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  classProp,\n  eventProp,\n  localeProp,\n  sizeProp,\n  styleProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ButtonType } from '@/components/button'\nimport type { PositionPayload, SizePayload } from './symbol'\n\nconst positionType = [Number, String]\n\nexport const positionValidator = (value: string | number) => {\n  return value === 'auto' || !Number.isNaN(parseFloat(value as string))\n}\nexport const positionProp = {\n  default: 'auto' as const,\n  validator: positionValidator\n}\n\nexport const modalProps = buildProps({\n  locale: localeProp('modal'),\n  transfer: booleanStringProp,\n  active: booleanProp,\n  width: positionType,\n  height: positionType,\n  top: positionType,\n  left: positionType,\n  right: positionType,\n  bottom: positionType,\n  title: String,\n  closable: booleanProp,\n  inner: booleanProp,\n  maskClose: booleanProp,\n  modalClass: classProp,\n  modalStyle: styleProp,\n  noFooter: booleanProp,\n  hideMask: booleanProp,\n  draggable: booleanProp,\n  resizable: booleanProp,\n  onBeforeClose: Function as PropType<(isConfirm: boolean) => any>,\n  loading: booleanProp,\n  minWidth: Number,\n  minHeight: Number,\n  transitionName: String,\n  confirmText: String,\n  cancelText: String,\n  actionSize: sizeProp,\n  autoRemove: booleanProp,\n  confirmType: String as PropType<ButtonType>,\n  cancelType: String as PropType<ButtonType>,\n  undivided: booleanProp,\n  xOffset: positionType,\n  yOffset: positionType,\n  onToggle: eventProp<(active: boolean) => void>(),\n  onConfirm: eventProp(),\n  onCancel: eventProp(),\n  onClose: eventProp(),\n  onShow: eventProp(),\n  onHide: eventProp(),\n  onDragStart: eventProp<(position: PositionPayload) => void>(),\n  onDragMove: eventProp<(position: PositionPayload) => void>(),\n  onDragEnd: eventProp<(position: PositionPayload) => void>(),\n  onResizeStart: eventProp<(size: SizePayload) => void>(),\n  onResizeMove: eventProp<(size: SizePayload) => void>(),\n  onResizeEnd: eventProp<(size: SizePayload) => void>()\n})\n\nexport type ModalProps = ExtractPropTypes<typeof modalProps>\nexport type ModalCProps = ConfigurableProps<ModalProps, never, 'onBeforeClose'>\n", "export interface PositionPayload {\n  top: number,\n  left: number\n}\n\nexport interface SizePayload {\n  width: number,\n  height: number\n}\n\nexport interface ModalSlotParams {\n  dragging: boolean,\n  resizing: boolean,\n  handleResize: () => void,\n  handleConfirm: () => void,\n  handleCancel: () => void,\n  handleClose: (isConfirm?: boolean) => Promise<unknown>\n}\n\nexport type ModalCommonSLot = (params: ModalSlotParams) => any\n\nlet index = 0\n\nexport function getIdIndex() {\n  return index++\n}\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { Masker } from '@/components/masker'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport { computed, nextTick, reactive, ref, shallowReadonly, toRef, watch } from 'vue'\n\nimport {\n  createSizeProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { useMoving } from '@vexip-ui/hooks'\nimport { isNull, isPromise, isValidNumber, toNumber } from '@vexip-ui/utils'\nimport { modalProps, positionProp } from './props'\nimport { getIdIndex } from './symbol'\n\nimport type { MaskerExposed } from '@/components/masker'\nimport type { ModalCommonSLot } from './symbol'\n\ndefineOptions({ name: 'Modal' })\n\nconst nh = useNameHelper('modal')\n\nconst _props = defineProps(modalProps)\nconst props = useProps('modal', _props, {\n  locale: null,\n  transfer: false,\n  active: {\n    default: false,\n    static: true\n  },\n  width: positionProp,\n  height: positionProp,\n  top: positionProp,\n  left: positionProp,\n  right: positionProp,\n  bottom: positionProp,\n  title: '',\n  closable: true,\n  inner: false,\n  maskClose: true,\n  modalClass: null,\n  modalStyle: null,\n  noFooter: false,\n  hideMask: false,\n  draggable: false,\n  resizable: false,\n  onBeforeClose: {\n    default: null,\n    isFunc: true\n  },\n  loading: false,\n  minWidth: 150,\n  minHeight: 120,\n  transitionName: () => nh.ns('ease'),\n  confirmText: null,\n  cancelText: null,\n  autoRemove: false,\n  confirmType: 'primary',\n  cancelType: 'default',\n  actionSize: createSizeProp('small'),\n  undivided: false,\n  xOffset: 0,\n  yOffset: 0\n})\n\nconst emit = defineEmits(['update:active'])\n\nconst slots = defineSlots<{\n  header: ModalCommonSLot,\n  title: ModalCommonSLot,\n  close: ModalCommonSLot,\n  default: ModalCommonSLot,\n  footer: ModalCommonSLot\n}>()\n\nconst locale = useLocale('modal', toRef(props, 'locale'))\nconst icons = useIcons()\n\nfunction isSpecified(value?: string | number) {\n  return !isNull(value) && value !== 'auto'\n}\n\nfunction normalizeStyle(value?: string | number) {\n  return isValidNumber(value, true)\n    ? `${toNumber(value)}px`\n    : isNull(value)\n      ? 'auto'\n      : String(value)\n}\n\nconst currentActive = ref(props.active)\nconst rect = reactive({\n  top: normalizeStyle(props.top),\n  right: normalizeStyle(props.right),\n  bottom: normalizeStyle(props.bottom),\n  left: normalizeStyle(props.left),\n  width: normalizeStyle(props.width),\n  height: normalizeStyle(props.height)\n})\nconst maskerRect = reactive({ width: 0, height: 0 })\nconst modalRect = reactive({ width: 0, height: 0 })\n\nconst idIndex = `${getIdIndex()}`\nconst transformed = ref(false)\n\nconst masker = ref<MaskerExposed>()\nconst wrapper = ref<HTMLElement>()\nconst footer = ref<HTMLElement>()\n\nconst uselessTop = computed(() => {\n  return props.top === 'auto' && isSpecified(props.bottom) && isSpecified(props.height)\n})\nconst uselessLeft = computed(() => {\n  return props.left === 'auto' && isSpecified(props.right) && isSpecified(props.width)\n})\n\nconst { target: header, moving: dragging } = useMoving({\n  capture: false,\n  onStart: (state, event) => {\n    if (!wrapper.value || !props.draggable || event.button > 0) {\n      return false\n    }\n\n    transferRect(false)\n\n    transformed.value = true\n    state.xStart = parseFloat(rect.left)\n    state.yStart = parseFloat(rect.top)\n\n    emitEvent(props.onDragStart, {\n      top: state.yStart,\n      left: state.xStart\n    })\n  },\n  onMove: state => {\n    rect.left = `${state.xEnd}px`\n    rect.top = `${state.yEnd}px`\n\n    emitEvent(props.onDragMove, {\n      top: state.yEnd,\n      left: state.xEnd\n    })\n  },\n  onEnd: state => {\n    emitEvent(props.onDragEnd, {\n      top: state.yEnd,\n      left: state.xEnd\n    })\n  }\n})\n\nconst { target: resizer, moving: resizing } = useMoving({\n  onStart: (state, event) => {\n    if (!wrapper.value || !props.resizable || event.button > 0) {\n      return false\n    }\n\n    transferRect()\n\n    let minHeight = 32\n\n    if (header.value) {\n      minHeight += header.value.offsetHeight\n    }\n\n    if (footer.value) {\n      minHeight += footer.value.offsetHeight\n    }\n\n    transformed.value = true\n    state.xStart = parseFloat(rect.width)\n    state.yStart = parseFloat(rect.height)\n    state.minHeight = Math.max(minHeight, props.minHeight)\n\n    emitEvent(props.onResizeStart, {\n      width: state.xStart,\n      height: state.yStart\n    })\n  },\n  onMove: state => {\n    const width = Math.max(props.minWidth, state.xEnd, 32)\n    const height = Math.max(state.minHeight as number, state.yEnd)\n\n    rect.width = `${width}px`\n    rect.height = `${height}px`\n\n    emitEvent(props.onResizeMove, { width, height })\n  },\n  onEnd: state => {\n    const width = Math.max(props.minWidth, state.xEnd, 32)\n    const height = Math.max(state.minHeight as number, state.yEnd)\n\n    emitEvent(props.onResizeEnd, { width, height })\n  }\n})\n\n// const shouldParse = computed(() => !props.draggable && !props.resizable)\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('inner')]: props.inner,\n      [nh.bm('draggable')]: props.draggable,\n      [nh.bm('resizable')]: props.resizable,\n      [nh.bm('undivided')]: props.undivided\n    }\n  ]\n})\nconst wrapperClass = computed(() => {\n  return [\n    nh.be('wrapper'),\n    {\n      [nh.bem('wrapper', 'closable')]: props.closable,\n      [nh.bem('wrapper', 'dragging')]: dragging.value,\n      [nh.bem('wrapper', 'resizing')]: resizing.value\n    },\n    props.modalClass\n  ]\n})\nconst transform = computed(() => {\n  const transforms: string[] = []\n\n  if (props.xOffset) {\n    transforms.push(`translateX(${normalizeStyle(props.xOffset)})`)\n  }\n\n  if (props.yOffset) {\n    transforms.push(`translateY(${normalizeStyle(props.yOffset)})`)\n  }\n\n  if (transforms.length) {\n    transforms.push('translateZ(0)')\n  }\n\n  return transforms.length ? transforms.join(' ') : undefined\n})\nconst wrapperStyle = computed(() => {\n  return [\n    props.modalStyle,\n    {\n      ...rect,\n      height: rect.height !== 'auto' ? rect.height : undefined,\n      transform: transform.value\n    }\n  ]\n})\nconst transformOrigin = computed(() => {\n  const origin = { x: '50%', y: '50%' }\n\n  if (transformed.value) {\n    origin.x = `${parseFloat(rect.left) + 0.5 * modalRect.width}px`\n    origin.y = `${parseFloat(rect.top) + 0.5 * modalRect.height}px`\n  } else {\n    if (uselessTop.value) {\n      origin.y = `calc(100% - ${parseFloat(rect.bottom) + 0.5 * parseFloat(rect.height)}px)`\n    } else if (isSpecified(props.top)) {\n      const top = parseFloat(rect.top)\n\n      if (isSpecified(props.height)) {\n        origin.y = `${top + 0.5 * parseFloat(rect.height)}px`\n      } else if (isSpecified(props.bottom)) {\n        const bottom = parseFloat(rect.bottom)\n        const height = maskerRect.height - top - bottom\n\n        origin.y = `${top + 0.5 * height}px`\n      } else {\n        origin.y = `${parseFloat(rect.top) + 0.5 * modalRect.height}px`\n      }\n    }\n\n    if (uselessLeft.value) {\n      origin.x = `calc(100% - ${parseFloat(rect.right) + 0.5 * parseFloat(rect.width)}px)`\n    } else if (isSpecified(props.left)) {\n      const left = parseFloat(rect.left)\n\n      if (isSpecified(props.width)) {\n        origin.x = `${left + 0.5 * parseFloat(rect.width)}px`\n      } else if (isSpecified(props.right)) {\n        const right = parseFloat(rect.right)\n        const width = maskerRect.width - left - right\n\n        origin.x = `${left + 0.5 * width}px`\n      } else {\n        origin.x = `${parseFloat(rect.left) + 0.5 * modalRect.width}px`\n      }\n    }\n  }\n\n  return `${origin.x} ${origin.y}`\n})\nconst hasTitle = computed(() => {\n  return !!(slots.header || slots.title || props.title)\n})\nconst titleId = computed(() => `${nh.bs(idIndex)}__title`)\nconst bodyId = computed(() => `${nh.bs(idIndex)}__body`)\n\nfor (const style of Object.keys(rect) as Array<keyof typeof rect>) {\n  watch(\n    () => props[style],\n    value => {\n      rect[style] = normalizeStyle(value)\n    }\n  )\n}\n\nwatch(\n  () => props.active,\n  value => {\n    currentActive.value = value\n  }\n)\nwatch(currentActive, value => {\n  props.hideMask && value && handleResize()\n})\nwatch([() => props.top, () => props.bottom, () => props.height], () => {\n  currentActive.value && nextTick(computeTop)\n})\nwatch([() => props.left, () => props.right, () => props.width], () => {\n  currentActive.value && nextTick(computeLeft)\n})\n\nconst handleResize = () => {\n  if (currentActive.value && !transformed.value) {\n    nextTick(() => {\n      computeTop()\n      computeLeft()\n    })\n  }\n\n  if (masker.value?.wrapper) {\n    maskerRect.width = masker.value.wrapper.offsetWidth\n    maskerRect.height = masker.value.wrapper.offsetHeight\n  }\n}\n\ndefineExpose({\n  dragging,\n  resizing,\n  titleId,\n  bodyId,\n  wrapper,\n  header,\n  footer,\n  resizer,\n  handleResize,\n  handleConfirm,\n  handleCancel,\n  handleClose\n})\n\nconst slotParams = shallowReadonly(\n  reactive({\n    dragging,\n    resizing,\n    handleResize,\n    handleConfirm,\n    handleCancel,\n    handleClose\n  })\n)\n\nfunction setActive(active: boolean) {\n  if (currentActive.value === active) return\n\n  currentActive.value = active\n\n  emit('update:active', active)\n  emitEvent(props.onToggle, active)\n}\n\nfunction findPositionalParent() {\n  if (!wrapper.value) return document.body\n\n  let parentElement = wrapper.value.parentElement as HTMLElement\n\n  while (parentElement && parentElement !== document.body) {\n    if (getComputedStyle(parentElement).position !== 'static') {\n      return parentElement\n    }\n\n    parentElement = parentElement.parentElement as HTMLElement\n  }\n\n  return parentElement\n}\n\nfunction computeTop() {\n  if (!wrapper.value || props.top !== 'auto' || uselessTop.value) return\n\n  const currentHeight = wrapper.value.offsetHeight\n\n  if (props.inner) {\n    rect.top = `${(findPositionalParent().offsetHeight - currentHeight) / 2}px`\n  } else {\n    rect.top = `${(window.innerHeight - currentHeight) / 2 - 20}px`\n  }\n}\n\nfunction computeLeft() {\n  if (!wrapper.value || props.left !== 'auto' || uselessLeft.value) return\n\n  const currentWidth = wrapper.value.offsetWidth\n\n  if (props.inner) {\n    rect.left = `${(findPositionalParent().offsetWidth - currentWidth) / 2}px`\n  } else {\n    rect.left = `${(window.innerWidth - currentWidth) / 2}px`\n  }\n}\n\nfunction transferRect(withSize = true) {\n  if (!wrapper.value) return\n\n  const { offsetWidth, offsetHeight, offsetTop, offsetLeft } = wrapper.value\n\n  // If user is using top/bottom or right/left to specify size,\n  // here need to force transfer to use offset size\n  if (\n    !withSize &&\n    ((!uselessTop.value && props.bottom !== 'auto') ||\n      (!uselessLeft.value && props.right !== 'auto'))\n  ) {\n    withSize = true\n  }\n\n  Object.assign(\n    rect,\n    {\n      top: `${offsetTop}px`,\n      right: 'auto',\n      bottom: 'auto',\n      left: `${offsetLeft}px`\n    },\n    withSize\n      ? {\n          width: `${offsetWidth}px`,\n          height: `${offsetHeight}px`\n        }\n      : {}\n  )\n}\n\nfunction handleConfirm() {\n  handleClose(true)\n  emitEvent(props.onConfirm)\n}\n\nfunction handleCancel() {\n  handleClose(false)\n  emitEvent(props.onCancel)\n}\n\nasync function handleClose(isConfirm = false) {\n  let result: unknown = true\n\n  if (typeof props.onBeforeClose === 'function') {\n    result = props.onBeforeClose(isConfirm)\n\n    if (isPromise(result)) {\n      result = await result\n    }\n  }\n\n  if (result !== false) {\n    await nextTick(() => {\n      setActive(false)\n      emitEvent(props.onClose)\n    })\n  }\n\n  return result\n}\n\nfunction handleShow() {\n  emitEvent(props.onShow)\n}\n\nfunction handleHide() {\n  emitEvent(props.onHide)\n}\n\nfunction handleMaskClose() {\n  if (props.maskClose) {\n    return handleClose(false)\n  }\n}\n\nfunction handleModalResize(entry: ResizeObserverEntry) {\n  const box = entry.borderBoxSize?.[0]\n\n  if (box) {\n    modalRect.width = box.inlineSize\n    modalRect.height = box.blockSize\n  } else {\n    modalRect.width = entry.contentRect.width\n    modalRect.height = entry.contentRect.height\n  }\n}\n</script>\n\n<template>\n  <Masker\n    ref=\"masker\"\n    v-model:active=\"currentActive\"\n    :inherit=\"props.inherit\"\n    :class=\"className\"\n    :inner=\"props.inner\"\n    :transition-name=\"props.transitionName\"\n    :closable=\"props.maskClose\"\n    :disabled=\"props.hideMask\"\n    :on-before-close=\"handleMaskClose\"\n    :transfer=\"props.transfer\"\n    :auto-remove=\"props.autoRemove\"\n    @show=\"handleShow\"\n    @hide=\"handleHide\"\n    @resize=\"handleResize\"\n  >\n    <template #default=\"{ show }\">\n      <section v-show=\"show\" :class=\"nh.be('transform')\" :style=\"{ transformOrigin }\">\n        <ResizeObserver @resize=\"handleModalResize\">\n          <div\n            ref=\"wrapper\"\n            :class=\"wrapperClass\"\n            role=\"dialog\"\n            :style=\"wrapperStyle\"\n            :aria-modal=\"show ? 'true' : undefined\"\n            :aria-labelledby=\"titleId\"\n            :aria-describedby=\"bodyId\"\n          >\n            <div v-if=\"hasTitle\" ref=\"header\" :class=\"nh.be('header')\">\n              <slot name=\"header\" v-bind=\"slotParams\">\n                <div :id=\"titleId\" :class=\"nh.be('title')\">\n                  <slot name=\"title\" v-bind=\"slotParams\">\n                    {{ props.title }}\n                  </slot>\n                </div>\n                <button\n                  v-if=\"props.closable\"\n                  type=\"button\"\n                  :class=\"nh.be('close')\"\n                  @pointerdown.stop\n                  @mousedown.stop\n                  @touchstart.stop\n                  @click=\"handleClose(false)\"\n                >\n                  <slot name=\"close\" v-bind=\"slotParams\">\n                    <Icon\n                      v-bind=\"icons.close\"\n                      :scale=\"+(icons.close.scale || 1) * 1.2\"\n                      label=\"close\"\n                    ></Icon>\n                  </slot>\n                </button>\n              </slot>\n            </div>\n            <div\n              :id=\"bodyId\"\n              :class=\"nh.be('content')\"\n              :style=\"{\n                overflow: resizing ? 'hidden' : undefined\n              }\"\n            >\n              <slot v-bind=\"slotParams\"></slot>\n            </div>\n            <div v-if=\"!props.noFooter\" ref=\"footer\" :class=\"nh.be('footer')\">\n              <slot name=\"footer\" v-bind=\"slotParams\">\n                <Button\n                  :class=\"[nh.be('button'), nh.bem('button', 'cancel')]\"\n                  inherit\n                  text\n                  :type=\"props.cancelType\"\n                  :size=\"props.actionSize\"\n                  @click=\"handleCancel\"\n                >\n                  {{ props.cancelText || locale.cancel }}\n                </Button>\n                <Button\n                  :class=\"[nh.be('button'), nh.bem('button', 'confirm')]\"\n                  inherit\n                  :type=\"props.confirmType\"\n                  :size=\"props.actionSize\"\n                  :loading=\"props.loading\"\n                  @click=\"handleConfirm\"\n                >\n                  {{ props.confirmText || locale.confirm }}\n                </Button>\n              </slot>\n            </div>\n            <div v-if=\"props.resizable\" ref=\"resizer\" :class=\"nh.be('resizer')\"></div>\n          </div>\n        </ResizeObserver>\n      </section>\n    </template>\n  </Masker>\n</template>\n", "import { createApp, createVNode, getCurrentInstance, h, nextTick, ref, render } from 'vue'\n\nimport Component from './modal.vue'\nimport { isClient, noop } from '@vexip-ui/utils'\n\nimport type { App, AppContext, ComponentPublicInstance } from 'vue'\nimport type { ModalProps } from './props'\nimport type { ModalCommonSLot } from './symbol'\n\nexport type ModalOptions = Omit<ModalProps, 'active' | 'transfer' | 'autoRemove'> & {\n  /**\n   * Specify the app context, ensue the modal using same context\n   */\n  appContext: AppContext,\n  /**\n   * Another way to use default slot\n   */\n  renderer: ModalCommonSLot,\n  /**\n   * Another way to use header slot\n   */\n  headerRenderer: ModalCommonSLot,\n  /**\n   * Another way to use title slot\n   */\n  titleRenderer: ModalCommonSLot,\n  /**\n   * Another way to use close slot\n   */\n  closeRenderer: ModalCommonSLot,\n  /**\n   * Another way to use footer slot\n   */\n  footerRenderer: ModalCommonSLot\n}\n\nexport function useModal(options: Partial<ModalOptions> = {}): () => Promise<void> {\n  if (!isClient) return noop\n\n  const {\n    appContext,\n    renderer,\n    headerRenderer,\n    titleRenderer,\n    closeRenderer,\n    footerRenderer,\n    onHide,\n    ...props\n  } = options\n\n  const active = ref(false)\n\n  let instance = getCurrentInstance()\n\n  let container: HTMLElement | undefined = document.createElement('div')\n  let app: App | undefined\n\n  if (appContext || instance) {\n    const vnode = createVNode(createModal, null, null)\n\n    vnode.appContext = appContext || instance!.appContext\n    render(vnode, container, false)\n  } else {\n    app = createApp(createModal)\n    app.mount(container)\n  }\n\n  document.body.appendChild(container)\n\n  // Ensure Modal show transition is effective\n  nextTick(() => {\n    active.value = true\n  })\n\n  function createModal() {\n    return h(\n      Component,\n      {\n        ...props,\n        active: active.value,\n        transfer: false,\n        autoRemove: false,\n        onHide: Array.isArray(onHide) ? [...onHide, destroy] : onHide ? [onHide, destroy] : destroy\n      },\n      {\n        header: headerRenderer,\n        title: titleRenderer,\n        close: closeRenderer,\n        default: renderer,\n        footer: footerRenderer\n      }\n    )\n  }\n\n  function destroy() {\n    if (instance) {\n      container && render(null, container, false)\n      instance = null\n    }\n\n    if (app) {\n      app.unmount()\n      app = undefined\n    }\n\n    if (container) {\n      document.body.removeChild(container)\n      container = undefined\n    }\n  }\n\n  return () =>\n    nextTick(() => {\n      active.value = false\n    })\n}\n\nComponent.open = useModal\n\nconst Modal = Component as typeof Component & { open: typeof useModal }\n\nexport { Modal }\nexport { modalProps } from './props'\n\nexport type ModalExposed = ComponentPublicInstance & InstanceType<typeof Component>\n\nexport type { ModalProps, ModalCProps } from './props'\nexport type { ModalSlotParams } from './symbol'\n", "import { booleanProp, buildProps, classProp, localeProp, styleProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { IconMinorProps } from '@/components/icon'\nimport type { ConfirmAlign, ConfirmButtonType, ConfirmRenderFn } from './symbol'\n\nconst positionType = [Number, String]\n\nexport const confirmProps = buildProps({\n  locale: localeProp('confirm'),\n  width: positionType,\n  height: positionType,\n  top: positionType,\n  left: positionType,\n  right: positionType,\n  bottom: positionType,\n  maskClose: booleanProp,\n  confirmType: String as PropType<ConfirmButtonType>,\n  cancelType: String as PropType<ConfirmButtonType>,\n  confirmText: String,\n  cancelText: String,\n  icon: {\n    type: [Boolean, Object, Function],\n    default: null\n  },\n  className: classProp,\n  style: styleProp,\n  renderer: Function as PropType<ConfirmRenderFn>,\n  iconProps: Object as PropType<IconMinorProps>,\n  closable: booleanProp,\n  contentAlign: String as PropType<ConfirmAlign>,\n  actionsAlign: String as PropType<ConfirmAlign>,\n  parseHtml: booleanProp,\n  cancelable: booleanProp,\n  xOffset: positionType,\n  yOffset: positionType\n})\n\nexport type ConfirmProps = ExtractPropTypes<typeof confirmProps>\nexport type ConfirmCProps = ConfigurableProps<ConfirmProps>\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { Modal } from '@/components/modal'\nimport { Renderer } from '@/components/renderer'\n\nimport { nextTick, onMounted, reactive, ref, toRef } from 'vue'\n\nimport { useIcons, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { isFunction, isPromise } from '@vexip-ui/utils'\nimport { confirmProps } from './props'\n\nimport type { ConfirmButtonType, ConfirmOptions, ConfirmRenderFn, ConfirmState } from './symbol'\n\nconst positionValidator = (value: string | number) => {\n  return value === 'auto' || !Number.isNaN(parseFloat(value as string))\n}\nconst positionProp = {\n  default: 'auto',\n  validator: positionValidator\n}\n\nconst confirmButtonTypes = Object.freeze<ConfirmButtonType[]>([\n  'default',\n  'primary',\n  'info',\n  'success',\n  'warning',\n  'error'\n])\n\ndefineOptions({ name: 'Confirm' })\n\nconst _props = defineProps(confirmProps)\nconst props = useProps('confirm', _props, {\n  locale: null,\n  width: {\n    default: 420,\n    validator: positionValidator\n  },\n  height: positionProp,\n  top: positionProp,\n  left: positionProp,\n  right: positionProp,\n  bottom: positionProp,\n  maskClose: false,\n  confirmType: {\n    default: 'primary',\n    validator: value => confirmButtonTypes.includes(value)\n  },\n  cancelType: {\n    default: 'default',\n    validator: value => confirmButtonTypes.includes(value)\n  },\n  confirmText: null,\n  cancelText: null,\n  icon: {\n    isFunc: true,\n    default: false\n  },\n  className: null,\n  style: null,\n  renderer: {\n    default: null,\n    isFunc: true,\n    static: true\n  },\n  iconProps: () => ({}),\n  closable: false,\n  parseHtml: false,\n  contentAlign: 'left',\n  actionsAlign: 'right',\n  cancelable: true,\n  xOffset: 0,\n  yOffset: 0\n})\n\nconst nh = useNameHelper('confirm')\nconst icons = useIcons()\nconst locale = useLocale('confirm', toRef(props, 'locale'))\n\nconst commonProps = [\n  'className',\n  'style',\n  'icon',\n  'iconProps',\n  'maskClose',\n  'confirmType',\n  'cancelType',\n  'confirmText',\n  'cancelText',\n  'parseHtml',\n  'closable',\n  'contentAlign',\n  'actionsAlign',\n  'cancelable',\n  'width',\n  'height',\n  'top',\n  'right',\n  'bottom',\n  'left',\n  'xOffset',\n  'yOffset'\n] as const\n\nconst state = reactive<ConfirmState>({\n  ...commonProps.reduce((prev, current) => ((prev[current] = props[current]), prev), {} as any),\n  visible: false,\n  loading: false,\n  title: '',\n  content: '',\n  raw: {}\n})\n\nconst rendererR = ref<ConfirmRenderFn | null>(props.renderer)\n\nlet beforeConfirmR: (() => unknown) | null = null\n\nlet onConfirm: (() => void) | null = null\nlet onCancel: (() => void) | null = null\n\nconst mountedPromise = new Promise<void>(resolve => {\n  onMounted(() => {\n    nextTick(resolve)\n  })\n})\n\ndefineExpose({ state, openConfirm, handleReset })\n\nasync function openConfirm(options: ConfirmOptions) {\n  await mountedPromise\n\n  return await new Promise<boolean>(resolve => {\n    for (const prop of commonProps) {\n      ;(state as any)[prop] = options[prop] ?? props[prop]\n    }\n\n    state.title = options.title ?? ''\n    state.content = options.content ?? ''\n\n    state.raw = options\n\n    rendererR.value = isFunction(options.renderer) ? options.renderer : props.renderer\n    beforeConfirmR = isFunction(options.onBeforeConfirm) ? options.onBeforeConfirm : null\n\n    if (isFunction(rendererR.value)) {\n      const render = rendererR.value\n\n      rendererR.value = () => render(state, handleConfirm, handleCancel)\n    }\n\n    state.visible = true\n    onConfirm = () => {\n      resolve(true)\n      beforeConfirmR = null\n    }\n    onCancel = () => {\n      resolve(false)\n      beforeConfirmR = null\n    }\n  })\n}\n\nasync function handleConfirm() {\n  state.loading = true\n\n  if (isFunction(beforeConfirmR)) {\n    let result = beforeConfirmR()\n\n    if (isPromise(result)) {\n      result = await result\n    }\n\n    if (result === false) {\n      state.loading = false\n\n      return\n    }\n  }\n\n  state.visible = false\n  state.loading = false\n\n  if (isFunction(onConfirm)) {\n    onConfirm()\n    onConfirm = null\n  }\n}\n\nfunction handleCancel() {\n  state.visible = false\n\n  if (isFunction(onCancel)) {\n    onCancel()\n    onCancel = null\n  }\n}\n\nfunction handleReset() {\n  for (const prop of commonProps) {\n    ;(state as any)[prop] = props[prop]\n  }\n\n  state.visible = false\n  state.loading = false\n  state.title = ''\n  state.content = ''\n\n  state.raw = {}\n\n  rendererR.value = props.renderer\n}\n</script>\n\n<template>\n  <!-- eslint-disable vue/no-v-html -->\n  <div :class=\"[nh.b(), nh.bs('vars')]\">\n    <Modal\n      no-footer\n      :auto-remove=\"false\"\n      :transfer=\"false\"\n      :closable=\"false\"\n      :active=\"state.visible\"\n      :modal-class=\"state.className\"\n      :modal-style=\"state.style\"\n      :width=\"state.width\"\n      :height=\"state.height\"\n      :top=\"state.top\"\n      :left=\"state.left\"\n      :right=\"state.right\"\n      :bottom=\"state.bottom\"\n      :x-offset=\"state.xOffset\"\n      :y-offset=\"state.yOffset\"\n      :mask-close=\"state.maskClose\"\n      @hide=\"handleReset\"\n    >\n      <Renderer v-if=\"isFunction(rendererR)\" :renderer=\"rendererR\"></Renderer>\n      <template v-else>\n        <div v-if=\"state.title\" :class=\"nh.be('header')\">\n          <div :class=\"nh.be('title')\">\n            {{ state.title }}\n          </div>\n          <button\n            v-if=\"state.closable\"\n            type=\"button\"\n            :class=\"nh.be('close')\"\n            @mousedown.stop\n            @click=\"handleCancel\"\n          >\n            <slot name=\"close\">\n              <Icon\n                v-bind=\"icons.close\"\n                :scale=\"+(icons.close.scale || 1) * 1.2\"\n                label=\"close\"\n              ></Icon>\n            </slot>\n          </button>\n        </div>\n        <div\n          :class=\"[\n            nh.be('body'),\n            nh.bem('body', state.contentAlign),\n            !state.title && nh.bem('body', 'no-title')\n          ]\"\n        >\n          <div v-if=\"state.icon !== false\" :class=\"nh.be('icon')\">\n            <Icon\n              v-if=\"typeof state.icon !== 'boolean'\"\n              v-bind=\"state.iconProps\"\n              :icon=\"state.icon\"\n            ></Icon>\n            <Icon\n              v-else\n              :scale=\"2.2\"\n              v-bind=\"{\n                ...(state.cancelable ? icons.question : icons.warning),\n                ...state.iconProps\n              }\"\n              :icon=\"(state.cancelable ? icons.question : icons.warning).icon\"\n            ></Icon>\n          </div>\n          <div v-if=\"state.parseHtml\" :class=\"nh.be('content')\" v-html=\"state.content\"></div>\n          <div v-else :class=\"nh.be('content')\">\n            {{ state.content }}\n          </div>\n        </div>\n        <div :class=\"[nh.be('footer'), nh.bem('footer', state.actionsAlign)]\">\n          <Button\n            v-if=\"state.cancelable\"\n            :class=\"[nh.be('button'), nh.bem('button', 'cancel')]\"\n            inherit\n            no-pulse\n            :type=\"state.cancelType\"\n            @click=\"handleCancel\"\n          >\n            {{ state.cancelText || locale.cancel }}\n          </Button>\n          <Button\n            :class=\"[nh.be('button'), nh.bem('button', 'confirm')]\"\n            inherit\n            no-pulse\n            :type=\"state.confirmType\"\n            :loading=\"state.loading\"\n            @click=\"handleConfirm\"\n          >\n            {{ state.confirmText || locale.confirm }}\n          </Button>\n        </div>\n      </template>\n    </Modal>\n  </div>\n</template>\n", "import { createApp, createVNode, markRaw, render } from 'vue'\n\nimport Component from './confirm.vue'\nimport { proxyExposed, unrefElement } from '@vexip-ui/hooks'\nimport { destroyObject, isClient } from '@vexip-ui/utils'\n\nimport type { App, MaybeRef } from 'vue'\nimport type { MaybeInstance } from '@vexip-ui/hooks'\nimport type { ConfirmButtonType, ConfirmInstance, ConfirmOptions, ConfirmState } from './symbol'\n\nexport { confirmProps } from './props'\n\nexport type { ConfirmProps, ConfirmCProps } from './props'\nexport type { ConfirmButtonType, ConfirmOptions, ConfirmState }\n\ntype FuzzyOptions = string | ConfirmOptions\n\nComponent.name = 'Confirm'\n\nexport class ConfirmManager {\n  name: string\n  defaults: Record<string, unknown>\n\n  private _mountedApp: App<unknown> | null\n  private _instance: ConfirmInstance | null\n  private _innerApp: App<unknown> | null\n  private _container: HTMLElement | null\n  private _wrapper: HTMLElement | SVGElement | null\n  private _mountedEl: HTMLElement | null\n\n  constructor(options: Partial<ConfirmOptions> = {}) {\n    this._mountedApp = null\n    this._instance = null\n    this._innerApp = null\n    this._container = null\n    this._wrapper = null\n    this._mountedEl = null\n    this.name = 'Confirm'\n    this.defaults = {}\n\n    this.config(options)\n  }\n\n  open(content: string, type?: ConfirmButtonType): Promise<boolean>\n  open(options: ConfirmOptions): Promise<boolean>\n  open(content: string, title: string, type?: ConfirmButtonType): Promise<boolean>\n  open(options: FuzzyOptions, title?: string, type?: ConfirmButtonType) {\n    if (!isClient) {\n      return\n    }\n\n    if (typeof options === 'string') {\n      if (type) {\n        options = { title, content: options, confirmType: type }\n      } else {\n        options = { content: options, confirmType: title as ConfirmButtonType }\n      }\n    }\n\n    const item: ConfirmOptions = { ...this.defaults, ...options }\n\n    if (item.icon && typeof item.icon === 'object') {\n      item.icon = markRaw(item.icon)\n    }\n\n    return this._getInstance()?.openConfirm(item)\n  }\n\n  config(options: Record<string, unknown>) {\n    this.defaults = { ...this.defaults, ...options }\n  }\n\n  clone() {\n    const manager = new ConfirmManager(this.defaults)\n\n    manager._mountedApp = this._mountedApp\n\n    return manager\n  }\n\n  destroy() {\n    this._mountedEl && this._wrapper?.removeChild(this._mountedEl)\n    this._innerApp?.unmount()\n    this._container && render(null, this._container)\n    destroyObject(this)\n  }\n\n  isDestroyed() {\n    return false\n  }\n\n  install(app: App, options: Partial<ConfirmOptions> & { property?: string } = {}) {\n    const { property, ...others } = options\n\n    this.config(others)\n    this._mountedApp = app\n\n    if (property || !app.config.globalProperties.$confirm) {\n      app.config.globalProperties[property || '$confirm'] = this\n    }\n  }\n\n  transferTo(target: MaybeRef<string | MaybeInstance>) {\n    if (!isClient) return\n\n    const el = unrefElement(target)\n\n    if (el) {\n      this._wrapper = el\n\n      if (this._instance) {\n        this._mountedEl && this._wrapper.appendChild(this._mountedEl)\n      } else {\n        this._getInstance()\n      }\n    }\n  }\n\n  private _getInstance() {\n    if (!this._instance && isClient) {\n      if (!this._mountedApp) {\n        console.warn('[vexip-ui:Confirm]: App missing, the plugin maybe not installed.')\n\n        this._container = document.createElement('div')\n        this._innerApp = createApp(Component)\n        this._instance = this._innerApp.mount(this._container) as ConfirmInstance\n      } else {\n        const vnode = createVNode(Component, null, null)\n\n        this._container = document.createElement('div')\n        vnode.appContext = this._mountedApp._context\n\n        render(vnode, this._container, false)\n\n        this._instance = proxyExposed<ConfirmInstance>(vnode)\n      }\n\n      this._mountedEl = this._container.firstElementChild as HTMLElement\n      ;(this._wrapper || document.body).appendChild(this._mountedEl)\n    }\n\n    return this._instance\n  }\n}\n\nexport const Confirm = new ConfirmManager()\n", "import type { InjectionKey } from 'vue'\n\nexport type DropdownTrigger = 'hover' | 'click' | 'custom'\n\ntype SelectHandler = (labels: (string | number)[], metas: Array<Record<string, any>>) => void\n\nexport interface DropdownState {\n  alive: boolean,\n  handleSelect: SelectHandler,\n  handleTriggerEnter: () => void,\n  handleTriggerLeave: () => void\n}\n\nexport const SELECT_HANDLER: InjectionKey<SelectHandler> = Symbol('SELECT_HANDLER')\nexport const DROPDOWN_STATE: InjectionKey<DropdownState> = Symbol('DROPDOWN_STATE')\n", "import { defineComponent, inject, provide, renderSlot } from 'vue'\n\nimport { DROPDOWN_STATE, SELECT_HANDLER } from './symbol'\n\nexport default defineComponent({\n  setup(_, { slots }) {\n    const dropdownState = inject(DROPDOWN_STATE, null)\n\n    dropdownState && provide(SELECT_HANDLER, dropdownState.handleSelect)\n\n    return () => renderSlot(slots, 'default')\n  }\n})\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  classProp,\n  eventProp,\n  wrapProps\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { DropdownTrigger } from './symbol'\n\nexport const dropdownProps = buildProps({\n  visible: booleanProp,\n  placement: String as PropType<Placement>,\n  outsideClose: booleanProp,\n  trigger: String as PropType<DropdownTrigger>,\n  label: [String, Number],\n  transitionName: String,\n  transfer: booleanStringProp,\n  dropClass: classProp,\n  appear: booleanProp,\n  meta: Object as PropType<Record<string, any>>,\n  alive: booleanProp,\n  custom: booleanProp,\n  onToggle: eventProp<(visible: boolean) => void>(),\n  onSelect: eventProp<(labels: (string | number)[], metas: Array<Record<string, any>>) => void>(),\n  onClickOutside: eventProp(),\n  onOutsideClose: eventProp()\n})\n\nexport type DropdownProps = ExtractPropTypes<typeof dropdownProps>\nexport type DropdownCProps = ConfigurableProps<DropdownProps>\n\nexport const dropdownItemProps = wrapProps({\n  label: {\n    type: [String, Number],\n    default: null\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  selected: {\n    type: Boolean,\n    default: false\n  },\n  divided: {\n    type: Boolean,\n    default: false\n  },\n  reference: {\n    type: Boolean,\n    default: false\n  },\n  meta: {\n    type: Object,\n    default: () => ({})\n  },\n  onSelect: eventProp<(label: string | number) => void>()\n})\n\nexport type DropdownItemProps = ExtractPropTypes<typeof dropdownItemProps>\n", "import { nextTick, onMounted, ref, watch } from 'vue'\n\nimport type { Ref } from 'vue'\n\nexport function useLabel(\n  rawLabel: Ref<string | number | null>,\n  element: Ref<HTMLElement | null | undefined>\n) {\n  const label = ref(rawLabel.value)\n\n  function setLabel(value: string | number | null) {\n    if (element.value) {\n      label.value = value ?? element.value.textContent?.trim() ?? null\n    } else {\n      label.value = value\n    }\n  }\n\n  watch(rawLabel, value => {\n    setLabel(value)\n  })\n\n  onMounted(() => {\n    nextTick(() => {\n      setLabel(rawLabel.value)\n    })\n  })\n\n  return label\n}\n", "<script setup lang=\"ts\">\nimport { Popper } from '@/components/popper'\n\nimport { computed, inject, nextTick, onMounted, provide, reactive, ref, toRef, watch } from 'vue'\n\nimport {\n  placementWhileList,\n  useClickOutside,\n  usePopper,\n  useRtl,\n  useSetTimeout\n} from '@vexip-ui/hooks'\nimport { emitEvent, useHoverDelay, useNameHelper, useProps } from '@vexip-ui/config'\nimport DropdownDrop from './dropdown-drop'\nimport { dropdownProps } from './props'\nimport { useLabel } from './hooks'\nimport { DROPDOWN_STATE, SELECT_HANDLER } from './symbol'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { Placement } from '@vexip-ui/hooks'\n\ndefineOptions({ name: 'Dropdown' })\n\nconst nh = useNameHelper('dropdown')\n\nconst _props = defineProps(dropdownProps)\nconst props = useProps('dropdown', _props, {\n  visible: {\n    default: false,\n    static: true\n  },\n  placement: {\n    default: 'bottom',\n    validator: value => placementWhileList.includes(value)\n  },\n  outsideClose: true,\n  trigger: {\n    default: 'hover',\n    validator: value => ['hover', 'click', 'custom'].includes(value)\n  },\n  label: {\n    default: null,\n    static: true\n  },\n  transitionName: () => nh.ns('drop'),\n  transfer: false,\n  dropClass: null,\n  appear: false,\n  meta: null,\n  alive: false,\n  custom: false\n})\n\nconst emit = defineEmits(['update:visible'])\n\nconst parentState = inject(DROPDOWN_STATE, null)\nconst { isRtl } = useRtl()\nconst hoverDelay = useHoverDelay()\n\nconst isNested = !!parentState\nconst label = toRef(props, 'label')\nconst placement = ref(props.placement)\nconst currentVisible = ref(props.visible)\nconst popperAlive = ref(false)\n\nconst transfer = isNested ? ref(false) : toRef(props, 'transfer')\n\nconst wrapper = useClickOutside(handleClickOutside)\nconst popper = ref<PopperExposed>()\nconst { reference, transferTo, updatePopper } = usePopper({\n  placement,\n  transfer,\n  wrapper,\n  popper: computed(() => popper.value?.wrapper),\n  isDrop: true,\n  offset: isNested ? [-5, 0] : undefined\n})\nconst currentLabel = useLabel(label, reference)\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('visible')]: currentVisible.value\n  }\n})\nconst isAlive = computed(() => parentState?.alive || props.alive)\n\nprovide(SELECT_HANDLER, null!)\n!props.custom &&\n  provide(\n    DROPDOWN_STATE,\n    reactive({\n      alive: isAlive,\n      handleSelect,\n      handleTriggerEnter,\n      handleTriggerLeave\n    })\n  )\n\nwatch(\n  () => props.visible,\n  value => {\n    currentVisible.value = value\n  }\n)\n\nwatch(\n  () => props.placement,\n  value => {\n    setPlacement(value)\n  }\n)\n\nwatch(currentVisible, value => {\n  if (value) {\n    updatePopper()\n  }\n})\n\nonMounted(() => {\n  nextTick(() => {\n    setPlacement(props.placement)\n  })\n})\n\ndefineExpose({\n  isNested,\n  currentVisible,\n  isAlive,\n  wrapper,\n  reference,\n  popper,\n  handleTriggerEnter,\n  handleTriggerLeave,\n  handleTriggerClick\n})\n\nfunction setVisible(visible: boolean) {\n  if (currentVisible.value === visible) return\n\n  currentVisible.value = visible\n\n  emit('update:visible', visible)\n  emitEvent(props.onToggle, visible)\n}\n\nfunction handleClickOutside() {\n  emitEvent(props.onClickOutside)\n\n  if (props.outsideClose && props.trigger !== 'custom' && currentVisible.value) {\n    setVisible(false)\n    emitEvent(props.onOutsideClose)\n  }\n}\n\nfunction handleSelect(labels: (string | number)[], metaList: Array<Record<string, any>>) {\n  if (props.trigger !== 'custom') {\n    setVisible(false)\n    emitEvent(props.onSelect, labels, metaList)\n  }\n\n  if (typeof parentState?.handleSelect === 'function') {\n    parentState.handleSelect([currentLabel.value!, ...labels], [props.meta || {}, ...metaList])\n  }\n}\n\nfunction setPlacement(value: Placement) {\n  const [xPlacement] = value.split('-')\n\n  if (isNested && xPlacement !== 'right' && xPlacement !== 'left') {\n    placement.value = isRtl.value ? 'left-start' : 'right-start'\n  } else {\n    placement.value = value\n  }\n}\n\nconst { timer } = useSetTimeout()\n\nfunction handleTriggerEnter() {\n  if (props.trigger === 'hover') {\n    clearTimeout(timer.hover)\n\n    if (typeof parentState?.handleTriggerEnter === 'function') {\n      parentState.handleTriggerEnter()\n    }\n\n    timer.hover = setTimeout(() => {\n      setVisible(true)\n    }, hoverDelay.value)\n  }\n}\n\nfunction handleTriggerLeave() {\n  if (props.trigger === 'hover') {\n    clearTimeout(timer.hover)\n\n    if (typeof parentState?.handleTriggerLeave === 'function') {\n      parentState.handleTriggerLeave()\n    }\n\n    timer.hover = setTimeout(() => {\n      setVisible(false)\n    }, hoverDelay.value)\n  }\n}\n\nfunction handleTriggerClick() {\n  if (props.trigger === 'click') {\n    setVisible(!currentVisible.value)\n  }\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    @mouseenter=\"handleTriggerEnter\"\n    @mouseleave=\"handleTriggerLeave\"\n  >\n    <div\n      ref=\"reference\"\n      :class=\"[nh.be('trigger'), currentVisible ? nh.bem('trigger', 'active') : '']\"\n      @click=\"handleTriggerClick\"\n      @keydown.enter.prevent=\"handleTriggerClick\"\n      @keydown.space.prevent=\"handleTriggerClick\"\n    >\n      <slot></slot>\n    </div>\n    <DropdownDrop>\n      <Popper\n        ref=\"popper\"\n        :class=\"[\n          nh.be('popper'),\n          nh.bs('vars'),\n          isNested ? nh.bem('popper', 'nested') : null,\n          props.dropClass\n        ]\"\n        :visible=\"currentVisible\"\n        :alive=\"isAlive || popperAlive\"\n        :to=\"transferTo\"\n        :transition=\"props.transitionName\"\n        :appear=\"props.appear\"\n        @mouseenter=\"handleTriggerEnter\"\n        @mouseleave=\"handleTriggerLeave\"\n        @after-enter=\"popperAlive = true\"\n        @after-leave=\"popperAlive = false\"\n      >\n        <slot name=\"drop\"></slot>\n      </Popper>\n    </DropdownDrop>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { useNameHelper } from '@vexip-ui/config'\n\ndefineOptions({ name: 'DropdownList' })\n\nconst nh = useNameHelper('dropdown')\n</script>\n\n<template>\n  <ul :class=\"nh.be('list')\" role=\"menu\">\n    <slot></slot>\n  </ul>\n</template>\n", "<script setup lang=\"ts\">\nimport { computed, inject, ref, toRef } from 'vue'\n\nimport { emitEvent, useNameHelper } from '@vexip-ui/config'\nimport { dropdownItemProps } from './props'\nimport { useLabel } from './hooks'\nimport { SELECT_HANDLER } from './symbol'\n\ndefineOptions({ name: 'DropdownItem' })\n\nconst props = defineProps(dropdownItemProps)\n\nconst parentSelectHandler = inject(SELECT_HANDLER, null)\n\nconst nh = useNameHelper('dropdown')\nconst wrapper = ref(null)\nconst label = toRef(props, 'label')\nconst isReference = ref(props.reference)\n\nconst currentLabel = useLabel(label, wrapper)\n\nconst className = computed(() => {\n  const baseClass = nh.be('item')\n\n  return {\n    [baseClass]: true,\n    [`${baseClass}--disabled`]: props.disabled,\n    [`${baseClass}--selected`]: !props.disabled && props.selected,\n    [`${baseClass}--divided`]: props.divided\n  }\n})\n\ndefineExpose({ wrapper, handleSelect })\n\nfunction handleSelect() {\n  if (props.disabled || isReference.value) {\n    return\n  }\n\n  if (typeof parentSelectHandler === 'function') {\n    parentSelectHandler([currentLabel.value!], [props.meta || {}])\n  }\n\n  emitEvent(props.onSelect!, currentLabel.value!)\n}\n</script>\n\n<template>\n  <li\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"menuitem\"\n    tabindex=\"0\"\n    @click=\"handleSelect\"\n  >\n    <slot></slot>\n  </li>\n</template>\n", "import { Dropdown } from '@/components/dropdown'\nimport { DropdownList } from '@/components/dropdown-list'\nimport { DropdownItem } from '@/components/dropdown-item'\nimport { Icon } from '@/components/icon'\n\nimport { useIcons } from '@vexip-ui/config'\nimport { useRtl } from '@vexip-ui/hooks'\n\nimport type { NameHelper } from '@vexip-ui/config'\nimport type { ContextmenuConfig } from './symbol'\n\nfunction renderItemIcon(item: ContextmenuConfig, nh: NameHelper) {\n  if (!item.icon) return null\n\n  return (\n    <div class={nh.be('icon')}>\n      <Icon\n        icon={item.icon}\n        style={[{ color: item.iconColor || item.color }, (item.icon as any).style]}\n      ></Icon>\n    </div>\n  )\n}\n\nfunction renderItemShortcut(item: ContextmenuConfig, nh: NameHelper) {\n  if (!item.shortcut) return null\n\n  return <div class={nh.be('shortcut')}>{item.shortcut}</div>\n}\n\nfunction renderGroupItem(item: ContextmenuConfig, nh: NameHelper) {\n  const icons = useIcons()\n  const { isRtl } = useRtl()\n\n  return (\n    <Dropdown\n      inherit\n      transfer={false}\n      {...{\n        onContextmenu: (event: MouseEvent) => {\n          event.preventDefault()\n          event.stopPropagation()\n        }\n      }}\n    >\n      {{\n        default: () => (\n          <DropdownItem\n            class={nh.be('item')}\n            label={item.key}\n            divided={item.divided}\n            disabled={item.disabled}\n          >\n            {renderItemIcon(item, nh)}\n            {typeof item.renderer === 'function'\n              ? (\n                  item.renderer()\n                )\n              : (\n                <span class={nh.be('label')} style={{ color: item.color }}>\n                  {item.label || item.key}\n                </span>\n                )}\n            {renderItemShortcut(item, nh)}\n            <div class={[nh.be('icon'), nh.be('arrow')]}>\n              <Icon\n                {...(isRtl.value ? icons.value.angleLeft : icons.value.angleRight)}\n                style={{ color: item.iconColor || item.color }}\n              ></Icon>\n            </div>\n          </DropdownItem>\n        ),\n        drop: () => (\n          <DropdownList\n            class={[\n              nh.be('list'),\n              item.children!.some(c => c.icon)\n                ? nh.bem('list', 'icons')\n                : nh.bem('list', 'no-icon'),\n              item.children!.some(c => c.children?.length)\n                ? nh.bem('list', 'arrows')\n                : nh.bem('list', 'no-arrow')\n            ]}\n          >\n            {item.children!.map(i => renderItem({ nh, config: i }))}\n          </DropdownList>\n        )\n      }}\n    </Dropdown>\n  )\n}\n\nexport function renderItem({ config, nh }: { config: ContextmenuConfig, nh: NameHelper }) {\n  if (config.children?.length) {\n    return renderGroupItem(config, nh)\n  } else {\n    return (\n      <DropdownItem\n        class={nh.be('item')}\n        label={config.key}\n        divided={config.divided}\n        disabled={config.disabled}\n      >\n        {renderItemIcon(config, nh)}\n        {typeof config.renderer === 'function'\n          ? (\n              config.renderer()\n            )\n          : (\n            <span class={nh.be('label')} style={{ color: config.color }}>\n              {config.label || config.key}\n            </span>\n            )}\n        {renderItemShortcut(config, nh)}\n      </DropdownItem>\n    )\n  }\n}\n", "<script setup lang=\"ts\">\nimport { Dropdown } from '@/components/dropdown'\nimport { DropdownList } from '@/components/dropdown-list'\nimport { Renderer } from '@/components/renderer'\n\nimport { reactive, ref } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useRtl } from '@vexip-ui/hooks'\nimport { isFunction } from '@vexip-ui/utils'\nimport { renderItem } from './render'\n\nimport type { ContextmenuConfig, ContextmenuOptions, Key } from './symbol'\n\ndefineOptions({ name: 'Contextmenu' })\n\nconst nh = useNameHelper('contextmenu')\nconst { isRtl } = useRtl()\nconst visible = ref(false)\nconst configs = ref<ContextmenuConfig[]>([])\nconst appear = ref(false)\n\nconst position = reactive({\n  x: 0,\n  y: 0\n})\n\nconst onSelect = ref<((keys: Key[]) => void) | null>(null)\nconst onCancel = ref<(() => void) | null>(null)\n\nfunction openContextmenu(options: ContextmenuOptions) {\n  position.x = options.clientX || 0\n  position.y = options.clientY || 0\n  configs.value = options.configs\n  appear.value = options.appear ?? false\n\n  visible.value = true\n\n  return new Promise<Key[] | null>(resolve => {\n    onSelect.value = (keys: Key[]) => {\n      resolve(keys)\n    }\n    onCancel.value = () => {\n      resolve(null)\n    }\n  })\n}\n\nfunction afterContextmenu() {\n  onSelect.value = null\n  onCancel.value = null\n}\n\nfunction handleSelect(keys: Key[]) {\n  visible.value = false\n\n  if (isFunction(onSelect.value)) {\n    onSelect.value(keys)\n    afterContextmenu()\n  }\n}\n\nfunction handleCancel() {\n  visible.value = false\n\n  if (isFunction(onCancel.value)) {\n    onCancel.value()\n    afterContextmenu()\n  }\n}\n\ndefineExpose({ visible, position, openContextmenu, handleSelect, handleCancel })\n</script>\n\n<template>\n  <Dropdown\n    v-model:visible=\"visible\"\n    :class=\"[nh.b(), nh.bs('vars')]\"\n    trigger=\"click\"\n    :placement=\"isRtl ? 'left-start' : 'right-start'\"\n    :appear=\"appear\"\n    :transfer=\"false\"\n    :style=\"{\n      top: `${position.y}px`,\n      left: `${position.x}px`\n    }\"\n    @contextmenu.prevent.stop\n    @select=\"handleSelect\"\n    @outside-close=\"handleCancel\"\n  >\n    <!-- <div :class=\"nh.be('anchor')\"></div> -->\n    <template #drop>\n      <DropdownList\n        :class=\"[\n          nh.be('list'),\n          configs.some(c => c.icon) ? nh.bem('list', 'icons') : nh.bem('list', 'no-icon'),\n          configs.some(c => c.children && c.children.length)\n            ? nh.bem('list', 'arrows')\n            : nh.bem('list', 'no-arrow')\n        ]\"\n      >\n        <Renderer\n          v-for=\"item in configs\"\n          :key=\"item.key\"\n          :data=\"{ config: item, nh }\"\n          :renderer=\"renderItem\"\n        ></Renderer>\n      </DropdownList>\n    </template>\n  </Dropdown>\n</template>\n", "import { createApp, createVNode, render } from 'vue'\n\nimport Component from './contextmenu.vue'\nimport { proxyExposed, unrefElement } from '@vexip-ui/hooks'\nimport { destroyObject, isClient } from '@vexip-ui/utils'\n\nimport type { App, MaybeRef } from 'vue'\nimport type { MaybeInstance } from '@vexip-ui/hooks'\nimport type { ContextmenuConfig, ContextmenuInstance, ContextmenuOptions, Key } from './symbol'\n\nexport type { ContextmenuConfig, ContextmenuOptions }\n\nexport class ContextmenuManager {\n  name: string\n\n  private _mountedApp: App<unknown> | null\n  private _instance: ContextmenuInstance | null\n  private _innerApp: App<unknown> | null\n  private _container: HTMLElement | null\n  private _pending: Promise<Key[] | null> | null\n  private _wrapper: HTMLElement | SVGElement | null\n  private _mountedEl: HTMLElement | null\n\n  constructor() {\n    this._mountedApp = null\n    this._instance = null\n    this._innerApp = null\n    this._container = null\n    this._pending = null\n    this._wrapper = null\n    this._mountedEl = null\n    this.name = 'Contextmenu'\n  }\n\n  open(options: ContextmenuOptions) {\n    if (!isClient) {\n      return\n    }\n\n    const { target = document.body, ...others } = options\n\n    this._pending = this._getInstance(target)!.openContextmenu(others)\n\n    return this._pending\n  }\n\n  destroy() {\n    this._mountedEl && this._wrapper?.removeChild(this._mountedEl)\n    this._innerApp?.unmount()\n    this._container && render(null, this._container)\n    destroyObject(this)\n  }\n\n  isDestroyed() {\n    return false\n  }\n\n  install(app: App, options: { property?: string } = {}) {\n    const { property } = options\n\n    this._mountedApp = app\n\n    if (property || !app.config.globalProperties.$contextmenu) {\n      app.config.globalProperties[property || '$contextmenu'] = this\n    }\n  }\n\n  private _getInstance(target: MaybeRef<string | MaybeInstance>) {\n    if (!isClient) return\n\n    if (this._pending) {\n      let innerApp = this._innerApp\n      let container = this._container\n\n      const unmount = () => {\n        innerApp?.unmount()\n        container && render(null, container)\n\n        innerApp = null\n        container = null\n      }\n\n      this._pending.finally(unmount)\n      this._instance?.handleCancel()\n    } else {\n      this._innerApp?.unmount()\n      this._container && render(null, this._container)\n    }\n\n    this._pending = null\n\n    if (!this._mountedApp) {\n      console.warn('[vexip-ui:Contextmenu]: App missing, the plugin maybe not installed.')\n\n      this._container = document.createElement('div')\n      this._innerApp = createApp(Component)\n      this._instance = this._innerApp.mount(this._container) as ContextmenuInstance\n    } else {\n      const vnode = createVNode(Component, null, null)\n\n      this._container = document.createElement('div')\n      vnode.appContext = this._mountedApp._context\n\n      render(vnode, this._container, false)\n\n      this._instance = proxyExposed<ContextmenuInstance>(vnode)\n    }\n\n    this._mountedEl = this._container.firstElementChild as HTMLElement\n    this._wrapper = unrefElement(target) || document.body\n\n    this._wrapper.appendChild(this._mountedEl)\n\n    return this._instance\n  }\n}\n\nexport const Contextmenu = new ContextmenuManager()\n", "import type { Dateable } from '@vexip-ui/utils'\n\nexport type DateType = 'year' | 'month' | 'date'\nexport type TimeType = 'hour' | 'minute' | 'second'\nexport type DateTimeType = DateType | TimeType\n\nexport type DatePickerType = 'date' | 'datetime' | 'year' | 'month'\nexport type DateShortcutsPlacement = 'top' | 'right' | 'bottom' | 'left'\nexport type TimeShortcutsPlacement = DateShortcutsPlacement\n\nexport type DatePickerFormatFn = (timestamp: number, type: 'start' | 'end') => unknown\n\nexport interface DateShortcut {\n  name: string,\n  value: Dateable | Dateable[] | (() => Dateable | Dateable[])\n}\n\nexport interface TimeShortcut {\n  name: string,\n  value: string | string[] | (() => string | string[])\n}\n\nexport interface DatePickerState {\n  type: DatePickerType,\n  currentColumn: DateTimeType,\n  enabled: Record<DateTimeType, boolean>,\n  activated: Record<DateTimeType, boolean>,\n  dateValue: Record<DateTimeType, number>,\n  enterColumn(type: 'prev' | 'next'): void\n}\n\nexport interface DisabledTime {\n  hour?(hour: number): boolean,\n  minute?(hour: number, minute: number): boolean,\n  second?(hour: number, minute: number, second: number): boolean\n}\n\nexport const enum DisabledType {\n  UPSTREAM,\n  TRUE,\n  AT_MIN_TRUE,\n  AT_MAX_TRUE,\n  FALSE\n}\n\nexport type DatePickerChangeEvent = (value: number | number[] | null) => void\nexport type TimePickerChangeEvent = (value: string | string[]) => void\n\nexport const datePickerTypes = Object.freeze<DatePickerType[]>([\n  'date',\n  'datetime',\n  'year',\n  'month'\n])\n\nexport const invalidDate = new Date('')\n\n// export const TIME_REG = /^((?:[01]?[0-9])|(?:2[0-3]))((?::[0-5]?[0-9]))?((?::[0-5]?[0-9]))?$/\nexport const TIME_REG = /^((?:\\d{1,2}))((?::\\d{1,2}))?((?::\\d{1,2}))?$/\n", "import { computed, reactive, ref } from 'vue'\n\nimport { getLast, toNumber } from '@vexip-ui/utils'\nimport { DisabledType } from './symbol'\n\nimport type { Ref } from 'vue'\nimport type { DisabledTime } from './symbol'\n\ntype Digit = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9\n\nconst numberKeys = Array.from({ length: 10 }, (_, i) => i) as Digit[]\n\nfunction isNumberKey(key: string, num: Digit) {\n  return key === `Digit${num}` || key === `Numpad${num}` || key === `${num}`\n}\n\nexport function handleKeyEnter(event: KeyboardEvent) {\n  const key = event.code || event.key\n\n  let type: null | number | 'next' | 'prev' | 'up' | 'down' | 'ok' | 'esc' = null\n  let isMatch = false\n\n  switch (key) {\n    case 'Tab': {\n      isMatch = true\n      type = event.shiftKey ? 'prev' : 'next'\n      break\n    }\n    case 'ArrowRight': {\n      // 下一列\n      isMatch = true\n      type = 'next'\n      break\n    }\n    case 'Delete':\n    case 'ArrowLeft': {\n      // 上一列\n      isMatch = true\n      type = 'prev'\n      break\n    }\n    case 'ArrowUp': {\n      // 加一\n      isMatch = true\n      type = 'up'\n      break\n    }\n    case 'ArrowDown': {\n      // 减一\n      isMatch = true\n      type = 'down'\n      break\n    }\n    case 'Space':\n    case ' ':\n    case 'Enter':\n    case 'NumpadEnter': {\n      // 确认\n      isMatch = true\n      type = 'ok'\n      break\n    }\n    case 'Escape': {\n      // 取消\n      isMatch = true\n      type = 'esc'\n      break\n    }\n  }\n\n  if (isMatch) {\n    event.preventDefault()\n    event.stopPropagation()\n  } else {\n    // 键入数字\n    const inputtedNumber = numberKeys.findIndex(num => isNumberKey(key, num))\n\n    if (~inputtedNumber) {\n      type = inputtedNumber\n\n      event.preventDefault()\n      event.stopPropagation()\n    }\n  }\n\n  return type\n}\n\nexport function useColumn<T extends string>(\n  colTypes: T[],\n  currentColumn = ref(colTypes[0]) as Ref<T | null>\n) {\n  const columnTypes = Array.from(colTypes)\n  const columnCount = columnTypes.length\n  const enabled = reactive(\n    columnTypes.reduce((prev, current) => {\n      prev[current] = false\n      return prev\n    }, {} as any)\n  ) as Record<T, boolean>\n\n  function findEnabledColumn(types: T[]) {\n    currentColumn.value = types.find(type => enabled[type]) ?? currentColumn.value\n  }\n\n  function resetColumn(type?: T | null, reverse = false) {\n    if (!type) {\n      currentColumn.value = null\n    }\n\n    const types = reverse ? Array.from(columnTypes).reverse() : columnTypes\n    const index = types.findIndex(column => column === type)\n\n    if (~index) {\n      findEnabledColumn(types.slice(index, columnCount).concat(types.slice(0, index)))\n    } else {\n      findEnabledColumn(types)\n    }\n  }\n\n  function enterColumn(type: 'prev' | 'next', canLoop = true) {\n    if (!currentColumn.value) {\n      currentColumn.value = (type === 'next' ? getLast(columnTypes) : columnTypes[0]) ?? null\n    }\n\n    for (let i = 0; i < columnCount; ++i) {\n      if (currentColumn.value === columnTypes[i]) {\n        const rawTypes = type === 'prev' ? Array.from(columnTypes).reverse() : columnTypes\n        const nextIndex = (type === 'prev' ? columnCount - i : i + 1) % columnCount\n        const types = canLoop\n          ? rawTypes.slice(nextIndex, columnCount).concat(rawTypes.slice(0, nextIndex))\n          : nextIndex\n            ? rawTypes.slice(nextIndex, columnCount)\n            : []\n\n        findEnabledColumn(types)\n\n        break\n      }\n    }\n  }\n\n  return {\n    currentColumn,\n    enabled,\n    resetColumn,\n    enterColumn\n  }\n}\n\nconst defaultMin = [0, 0, 0]\nconst defaultMax = [23, 59, 59]\n\nexport function useTimeBound(originMin: Ref<string>, originMax: Ref<string>) {\n  const minUnits = computed(() => {\n    return originMin.value ? originMin.value.split(':').map(toNumber) : defaultMin\n  })\n  const maxUnits = computed(() => {\n    return originMax.value ? originMax.value.split(':').map(toNumber) : defaultMax\n  })\n  const reversed = computed(() => {\n    const min = minUnits.value\n    const max = maxUnits.value\n\n    for (let i = 0; i < 3; ++i) {\n      if (min[i] < max[i]) return false\n      if (min[i] > max[i]) return true\n    }\n\n    return false\n  })\n\n  const isTimeDisabled: Required<DisabledTime> = {\n    hour: isHourDisabled,\n    minute: (hour, minute) => isMinuteDisabled(hour, minute) !== DisabledType.FALSE,\n    second: (hour, minute, second) => isSecondDisabled(hour, minute, second) !== DisabledType.FALSE\n  }\n\n  function isHourDisabled(hour: number) {\n    const min = minUnits.value[0] || defaultMin[0]\n    const max = maxUnits.value[0] || defaultMax[0]\n\n    return reversed.value ? hour > max && hour < min : hour < min || hour > max\n  }\n\n  function isMinuteDisabled(hour: number, minute: number) {\n    if (isHourDisabled(hour)) return DisabledType.UPSTREAM\n\n    if (minUnits.value[0] === maxUnits.value[0] && hour === minUnits.value[0]) {\n      const min = minUnits.value[1] || defaultMin[1]\n      const max = maxUnits.value[1] || defaultMax[1]\n\n      if (reversed.value ? minute > max && minute < min : minute < min || minute > max) {\n        return DisabledType.TRUE\n      }\n    }\n\n    if (hour === minUnits.value[0]) {\n      const min = minUnits.value[1] || defaultMin[1]\n\n      if (minute < min) return DisabledType.AT_MIN_TRUE\n    }\n\n    if (hour === maxUnits.value[0]) {\n      const max = maxUnits.value[1] || defaultMax[1]\n\n      if (minute > max) return DisabledType.AT_MAX_TRUE\n    }\n\n    return DisabledType.FALSE\n  }\n\n  function isSecondDisabled(hour: number, minute: number, second: number) {\n    if (isMinuteDisabled(hour, minute) !== DisabledType.FALSE) return DisabledType.UPSTREAM\n\n    if (\n      minUnits.value[0] === maxUnits.value[0] &&\n      hour === minUnits.value[0] &&\n      minUnits.value[1] === maxUnits.value[1] &&\n      minute === minUnits.value[1]\n    ) {\n      const min = minUnits.value[2] || defaultMin[2]\n      const max = maxUnits.value[2] || defaultMax[2]\n\n      if (reversed.value ? second > max && second < min : second < min || second > max) {\n        return DisabledType.TRUE\n      }\n    }\n\n    if (hour === minUnits.value[0] && minute === minUnits.value[1]) {\n      const min = minUnits.value[2] || defaultMin[2]\n\n      if (second < min) return DisabledType.AT_MIN_TRUE\n    }\n\n    if (hour === maxUnits.value[0] && minute === maxUnits.value[1]) {\n      const max = maxUnits.value[2] || defaultMax[2]\n\n      if (second > max) return DisabledType.AT_MAX_TRUE\n    }\n\n    return DisabledType.FALSE\n  }\n\n  return {\n    minUnits,\n    maxUnits,\n    reversed,\n    isTimeDisabled\n  }\n}\n", "<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { doubleDigits } from '@vexip-ui/utils'\nimport { handleKeyEnter } from './helper'\n\nimport type { PropType } from 'vue'\nimport type { DateTimeType } from './symbol'\n\ndefineOptions({ name: 'DateControl' })\n\nconst props = defineProps({\n  unitType: {\n    type: String as PropType<DateTimeType | ''>,\n    default: ''\n  },\n  enabled: {\n    type: Object as PropType<Record<DateTimeType, boolean>>,\n    default: () => ({})\n  },\n  activated: {\n    type: Object as PropType<Record<DateTimeType, boolean>>,\n    default: () => ({})\n  },\n  dateValue: {\n    type: Object as PropType<Record<DateTimeType, number>>,\n    default: () => ({})\n  },\n  dateSeparator: {\n    type: String,\n    default: '/'\n  },\n  timeSeparator: {\n    type: String,\n    default: ':'\n  },\n  visible: {\n    type: Boolean,\n    default: false\n  },\n  focused: {\n    type: Boolean,\n    default: false\n  },\n  filler: {\n    type: String,\n    default: '-',\n    validator: (value: string) => {\n      return value.length === 1\n    }\n  },\n  steps: {\n    type: Array as PropType<number[]>,\n    default: () => [1, 1, 1]\n  },\n  ctrlSteps: {\n    type: Array as PropType<number[]>,\n    default: () => [5, 5, 5]\n  },\n  labels: {\n    type: Object as PropType<Partial<Record<DateTimeType, string>>>,\n    default: () => ({})\n  },\n  hasError: {\n    type: Boolean,\n    default: false\n  },\n  placeholder: {\n    type: String,\n    default: ''\n  },\n  readonly: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits([\n  'input',\n  'plus',\n  'minus',\n  'enter',\n  'cancel',\n  'unit-focus',\n  'prev-unit',\n  'next-unit',\n  'blur'\n])\n\nconst nh = useNameHelper('date-picker')\n\nconst wrapper = ref<HTMLElement>()\n\nconst isActivated = computed(() => {\n  return (Object.keys(props.enabled) as DateTimeType[]).every(type => {\n    return !props.enabled[type] || props.activated[type]\n  })\n})\nconst className = computed(() => {\n  return {\n    [nh.be('input')]: true,\n    [nh.bem('input', 'activated')]: isActivated.value,\n    [nh.bem('input', 'error')]: props.hasError\n  }\n})\nconst showTimeUnits = computed(() => {\n  return props.enabled.hour || props.enabled.minute || props.enabled.second\n})\nconst formattedYear = computed(() => {\n  return formatValue('year')\n})\nconst formattedMonth = computed(() => {\n  return formatValue('month')\n})\nconst formattedDate = computed(() => {\n  return formatValue('date')\n})\nconst formattedHour = computed(() => {\n  return formatValue('hour')\n})\nconst formattedMinute = computed(() => {\n  return formatValue('minute')\n})\nconst formattedSecond = computed(() => {\n  return formatValue('second')\n})\n\ndefineExpose({\n  isActivated,\n  wrapper,\n  focus: () => {\n    wrapper.value?.focus()\n  },\n  blur: () => {\n    wrapper.value?.blur()\n  }\n})\n\nfunction formatValue(type: DateTimeType) {\n  const isYear = type === 'year'\n  const filler = props.filler\n\n  return props.activated[type]\n    ? isYear\n      ? props.dateValue.year.toString().padStart(4, '0')\n      : doubleDigits(props.dateValue[type])\n    : `${isYear ? `${filler}${filler}` : ''}${filler}${filler}`\n}\n\nfunction getUnitFocusClass(type: DateTimeType) {\n  return props.visible && props.unitType === type ? nh.bem('unit', 'focused') : null\n}\n\nfunction handleInputFocus(type: DateTimeType) {\n  if (props.readonly) return\n\n  emit('unit-focus', type)\n}\n\nfunction handleInput(event: KeyboardEvent) {\n  if (!props.visible) return\n\n  const type = handleKeyEnter(event)\n\n  if (props.readonly) {\n    switch (type) {\n      case 'ok': {\n        emit('enter')\n        break\n      }\n      case 'esc': {\n        emit('cancel')\n        break\n      }\n    }\n\n    return\n  }\n\n  switch (type) {\n    case 'next': {\n      emit('next-unit')\n      break\n    }\n    case 'prev': {\n      emit('prev-unit')\n      break\n    }\n    case 'up': {\n      emit('minus', event.ctrlKey)\n      break\n    }\n    case 'down': {\n      emit('plus', event.ctrlKey)\n      break\n    }\n    case 'ok': {\n      emit('enter')\n      break\n    }\n    case 'esc': {\n      emit('cancel')\n      break\n    }\n    default: {\n      if (typeof type === 'number') {\n        emit('input', type)\n      }\n    }\n  }\n}\n\nfunction handleBlur() {\n  emit('blur')\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    tabindex=\"-1\"\n    @keydown=\"handleInput\"\n    @blur=\"handleBlur\"\n  >\n    <div v-if=\"!focused && !isActivated\" :class=\"nh.be('placeholder')\">\n      {{ placeholder }}\n    </div>\n    <template v-else>\n      <div\n        v-if=\"enabled.year\"\n        :class=\"[nh.be('unit'), getUnitFocusClass('year')]\"\n        @click=\"handleInputFocus('year')\"\n      >\n        {{ formattedYear }}\n      </div>\n      <div v-if=\"labels.year\" :class=\"nh.be('label')\" @click=\"handleInputFocus('year')\">\n        {{ labels.year }}\n      </div>\n      <template v-if=\"enabled.month\">\n        <div v-if=\"enabled.year\" :class=\"nh.be('separator')\">\n          {{ dateSeparator }}\n        </div>\n        <div\n          :class=\"[nh.be('unit'), getUnitFocusClass('month')]\"\n          @click=\"handleInputFocus('month')\"\n        >\n          {{ formattedMonth }}\n        </div>\n        <div v-if=\"labels.month\" :class=\"nh.be('label')\" @click=\"handleInputFocus('month')\">\n          {{ labels.month }}\n        </div>\n      </template>\n      <template v-if=\"enabled.date\">\n        <div v-if=\"enabled.month || enabled.year\" :class=\"nh.be('separator')\">\n          {{ dateSeparator }}\n        </div>\n        <div :class=\"[nh.be('unit'), getUnitFocusClass('date')]\" @click=\"handleInputFocus('date')\">\n          {{ formattedDate }}\n        </div>\n        <div v-if=\"labels.date\" :class=\"nh.be('label')\" @click=\"handleInputFocus('date')\">\n          {{ labels.date }}\n        </div>\n      </template>\n\n      <template v-if=\"showTimeUnits\">\n        <div :class=\"nh.be('pad')\"></div>\n        <div\n          v-if=\"enabled.hour\"\n          :class=\"[nh.be('unit'), getUnitFocusClass('hour')]\"\n          @click=\"handleInputFocus('hour')\"\n        >\n          {{ formattedHour }}\n        </div>\n        <div v-if=\"labels.hour\" :class=\"nh.be('label')\" @click=\"handleInputFocus('hour')\">\n          {{ labels.hour }}\n        </div>\n        <template v-if=\"enabled.minute\">\n          <div v-if=\"enabled.hour\" :class=\"nh.be('separator')\">\n            {{ timeSeparator }}\n          </div>\n          <div\n            :class=\"[nh.be('unit'), getUnitFocusClass('minute')]\"\n            @click=\"handleInputFocus('minute')\"\n          >\n            {{ formattedMinute }}\n          </div>\n          <div v-if=\"labels.minute\" :class=\"nh.be('label')\" @click=\"handleInputFocus('minute')\">\n            {{ labels.minute }}\n          </div>\n        </template>\n        <template v-if=\"enabled.second\">\n          <div v-if=\"enabled.minute || enabled.hour\" :class=\"nh.be('separator')\">\n            {{ timeSeparator }}\n          </div>\n          <div\n            :class=\"[nh.be('unit'), getUnitFocusClass('second')]\"\n            @click=\"handleInputFocus('second')\"\n          >\n            {{ formattedSecond }}\n          </div>\n          <div v-if=\"labels.second\" :class=\"nh.be('label')\" @click=\"handleInputFocus('second')\">\n            {{ labels.second }}\n          </div>\n        </template>\n      </template>\n    </template>\n  </div>\n</template>\n", "import {\n  booleanNumberProp,\n  booleanProp,\n  buildProps,\n  classProp,\n  eventProp,\n  styleProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { BarScrollPayload, ScrollMode, ScrollPayload } from './symbol'\n\nexport const scrollProps = buildProps({\n  scrollClass: classProp,\n  scrollStyle: styleProp,\n  scrollAttrs: Object as PropType<Record<string, any>>,\n  mode: String as PropType<ScrollMode>,\n  width: [Number, String],\n  height: [Number, String],\n  deltaX: Number,\n  deltaY: Number,\n  disabled: booleanProp,\n  pointer: booleanProp,\n  wheel: booleanProp,\n  scrollX: Number,\n  scrollY: Number,\n  useXBar: booleanProp,\n  useYBar: booleanProp,\n  barFade: Number,\n  barClass: classProp,\n  autoplay: booleanNumberProp,\n  playWaiting: Number,\n  noBuffer: booleanProp,\n  noTransition: booleanProp,\n  onBeforeScroll: Function as PropType<(payload: { signX: number, signY: number }) => boolean>,\n  useBarTrack: booleanProp,\n  scrollTag: String,\n  onResize: eventProp<(entry: ResizeObserverEntry) => void>(),\n  onXEnabledChange: eventProp<(enabled: boolean) => void>(),\n  onYEnabledChange: eventProp<(enabled: boolean) => void>(),\n  onWheel: eventProp<(payload: BarScrollPayload & { sign: 1 | -1 }) => void>(),\n  onScrollStart: eventProp<(payload: Omit<ScrollPayload, 'type'>) => void>(),\n  onScroll: eventProp<(payload: ScrollPayload) => void>(),\n  onScrollEnd: eventProp<(payload: Omit<ScrollPayload, 'type'>) => void>(),\n  onBarScrollStart: eventProp<(payload: BarScrollPayload) => void>(),\n  onBarScroll: eventProp<(payload: BarScrollPayload) => void>(),\n  onBarScrollEnd: eventProp<(payload: BarScrollPayload) => void>(),\n  onReady: eventProp()\n})\n\nexport type ScrollProps = ExtractPropTypes<typeof scrollProps>\nexport type ScrollCProps = ConfigurableProps<ScrollProps, 'scrollX' | 'scrollY', 'onBeforeScroll'>\n", "import { computed, nextTick, onMounted, reactive, ref, watch } from 'vue'\n\nimport { useManualRef } from '@vexip-ui/hooks'\nimport { multipleFixed, toNumber } from '@vexip-ui/utils'\n\nimport type { Ref } from 'vue'\nimport type { ScrollMode } from './symbol'\n\nexport function useScrollWrapper({\n  mode,\n  disabled,\n  width,\n  height,\n  scrollX,\n  scrollY,\n  onResize,\n  onBeforeRefresh,\n  onAfterRefresh\n}: {\n  mode: Ref<Exclude<ScrollMode, 'horizontal-exact'>>,\n  disabled: Ref<boolean>,\n  width: Ref<number | string>,\n  height: Ref<number | string>,\n  scrollX: Ref<number>,\n  scrollY: Ref<number>,\n  onResize?: (entry: ResizeObserverEntry) => void,\n  onBeforeRefresh?: () => void,\n  onAfterRefresh?: () => void\n}) {\n  const { manualRef, triggerUpdate } = useManualRef()\n\n  const wrapperEl = ref<HTMLElement>()\n  const contentEl = ref<HTMLElement>()\n\n  // 容器长宽\n  const wrapper = reactive({\n    el: wrapperEl,\n    width: toNumber(width.value),\n    height: toNumber(height.value)\n  })\n\n  // 内容长宽\n  const content = reactive({\n    el: contentEl,\n    width: 0,\n    height: 0\n  })\n\n  const x = manualRef(-scrollX.value)\n  const y = manualRef(-scrollY.value)\n\n  const isReady = ref(false)\n\n  const percentX = manualRef(0)\n  const percentY = manualRef(0)\n\n  const xScrollLimit = computed(() => {\n    return wrapper.width ? wrapper.width - content.width : 0\n  })\n  const yScrollLimit = computed(() => {\n    return wrapper.height ? wrapper.height - content.height : 0\n  })\n  const enableXScroll = computed(() => {\n    return (\n      !disabled.value &&\n      mode.value !== 'vertical' &&\n      !!wrapper.width &&\n      content.width - wrapper.width > 1\n    )\n  })\n  const enableYScroll = computed(() => {\n    return (\n      !disabled.value &&\n      mode.value !== 'horizontal' &&\n      !!wrapper.height &&\n      content.height - wrapper.height > 1\n    )\n  })\n  const xBarLength = computed(() => {\n    if (wrapper.width) {\n      return Math.max(Math.min((wrapper.width / (content.width || 1)) * 100, 99), 5)\n    }\n\n    return 35\n  })\n  const yBarLength = computed(() => {\n    if (wrapper.height) {\n      return Math.max(Math.min((wrapper.height / (content.height || 1)) * 100, 99), 5)\n    }\n\n    return 35\n  })\n\n  watch(wrapperEl, () => {\n    refreshWrapper()\n  })\n  watch(contentEl, () => {\n    computeContentSize()\n  })\n  watch(scrollX, value => {\n    x.value = -value\n    verifyScroll()\n  })\n  watch(scrollY, value => {\n    y.value = -value\n    verifyScroll()\n  })\n  watch(width, () => {\n    refreshWrapper().then(verifyScroll)\n  })\n  watch(height, () => {\n    refreshWrapper().then(verifyScroll)\n  })\n\n  function computeWrapperSize(sizeType: 'width' | 'height') {\n    return nextTick(() => {\n      if (!wrapper.el) return\n\n      const size = sizeType === 'width' ? width.value : height.value\n      const titleCaseSizeType = sizeType.slice(0, 1).toUpperCase() + sizeType.slice(1)\n\n      // 获取 wrapper 的 px 大小\n      if (typeof size === 'string') {\n        if (!size.endsWith('px') && (!size || Number.isNaN(Number(size)))) {\n          wrapper[sizeType] =\n            wrapper.el[`offset${titleCaseSizeType}` as 'offsetWidth' | 'offsetHeight']\n        } else {\n          wrapper[sizeType] = parseInt(size)\n        }\n      } else {\n        wrapper[sizeType] = size\n      }\n    })\n  }\n\n  async function refreshWrapper() {\n    const promises: Promise<void>[] = []\n\n    if (mode.value !== 'vertical') {\n      promises.push(computeWrapperSize('width'))\n    }\n\n    if (mode.value !== 'horizontal') {\n      promises.push(computeWrapperSize('height'))\n    }\n\n    await Promise.all(promises)\n  }\n\n  let timer: ReturnType<typeof setTimeout>\n\n  function computeContentSize() {\n    clearTimeout(timer)\n\n    return new Promise<void>(resolve => {\n      isReady.value = false\n\n      timer = setTimeout(() => {\n        if (!content.el) {\n          resolve()\n          return\n        }\n\n        if (mode.value !== 'vertical') {\n          content.width = content.el.offsetWidth\n\n          if (wrapper.width >= content.width) {\n            x.value = 0\n          } else {\n            if (x.value === 0) {\n              x.value = -scrollX.value\n            }\n          }\n        }\n\n        if (mode.value !== 'horizontal') {\n          content.height = content.el.offsetHeight\n\n          if (wrapper.height >= content.height) {\n            y.value = 0\n          } else {\n            if (y.value === 0) {\n              y.value = -scrollY.value\n            }\n          }\n        }\n\n        setTimeout(() => {\n          isReady.value = true\n          verifyScroll()\n          resolve()\n        }, 1)\n      }, 0)\n    })\n  }\n\n  /**\n   * Will post process the percent scroll values.\n   */\n  function verifyScroll() {\n    if (!isReady.value) {\n      return\n    }\n\n    if (mode.value !== 'vertical') {\n      x.value = Math.min(0, Math.max(x.value, xScrollLimit.value))\n\n      if (mode.value !== 'both') {\n        y.value = 0\n      }\n    }\n\n    if (mode.value !== 'horizontal') {\n      y.value = Math.min(0, Math.max(y.value, yScrollLimit.value))\n\n      if (mode.value !== 'both') {\n        x.value = 0\n      }\n    }\n\n    computePercent()\n    triggerUpdate()\n  }\n\n  function computePercent() {\n    percentX.value = multipleFixed(x.value / (xScrollLimit.value || -1), 100, 2)\n    percentY.value = multipleFixed(y.value / (yScrollLimit.value || -1), 100, 2)\n\n    percentX.value = Math.max(0, Math.min(percentX.value, 100))\n    percentY.value = Math.max(0, Math.min(percentY.value, 100))\n  }\n\n  function handleResize(entity: ResizeObserverEntry) {\n    refresh()\n    onResize?.(entity)\n  }\n\n  let isMounted = false\n\n  onMounted(() => {\n    refresh()\n    isMounted = true\n  })\n\n  async function refresh() {\n    if (typeof onBeforeRefresh === 'function') {\n      onBeforeRefresh()\n    }\n\n    refreshWrapper()\n    await computeContentSize().then(() => {\n      setTimeout(\n        () => {\n          verifyScroll()\n\n          if (typeof onAfterRefresh === 'function') {\n            onAfterRefresh()\n          }\n        },\n        isMounted ? 20 : 100\n      )\n    })\n  }\n\n  return {\n    wrapperEl,\n    contentEl,\n\n    wrapper,\n    content,\n    isReady,\n    x,\n    y,\n    percentX,\n    percentY,\n    xScrollLimit,\n    yScrollLimit,\n    enableXScroll,\n    enableYScroll,\n    xBarLength,\n    yBarLength,\n\n    handleResize,\n    verifyScroll,\n    computePercent,\n    refresh,\n    triggerUpdate\n  }\n}\n", "import { USE_TOUCH } from '@vexip-ui/utils'\n\nexport type ScrollMode = 'horizontal' | 'horizontal-exact' | 'vertical' | 'both'\n\nexport interface ScrollPayload {\n  type: Exclude<ScrollMode, 'horizontal-exact'>,\n  clientX: number,\n  clientY: number,\n  percentX: number,\n  percentY: number\n}\n\nexport interface BarScrollPayload {\n  type: 'vertical' | 'horizontal',\n  clientX: number,\n  clientY: number,\n  percentX: number,\n  percentY: number\n}\n\nexport interface ScrollState {\n  scrollX: number,\n  scrollY: number,\n  percentX: number,\n  percentY: number,\n  enableXScroll: number,\n  enableYScroll: number\n}\n\nexport interface ScrollSlotParams {\n  getState: () => ScrollState,\n  refresh: () => void,\n  scrollTo: (clientX: number, clientY: number, duration?: number) => void,\n  scrollBy: (deltaX: number, deltaY: number, duration?: number) => void,\n  scrollToElement: (el: string | Element, duration?: number, offset?: number) => void,\n  ensureInView: (el: string | Element, duration?: number, offset?: number) => void\n}\n\nexport const scrollModes = Object.freeze<ScrollMode[]>([\n  'horizontal',\n  'horizontal-exact',\n  'vertical',\n  'both'\n])\n\nexport const MOVE_EVENT = USE_TOUCH ? 'touchmove' : 'mousemove'\nexport const UP_EVENT = USE_TOUCH ? 'touchend' : 'mouseup'\n", "<script setup lang=\"ts\">\nimport { Scrollbar } from '@/components/scrollbar'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport {\n  computed,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  ref,\n  shallowReadonly,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useRtl, useSetTimeout } from '@vexip-ui/hooks'\nimport { USE_TOUCH, createEventEmitter, isClient, isElement, isTrue } from '@vexip-ui/utils'\nimport { scrollProps } from './props'\nimport { useScrollWrapper } from './hooks'\nimport { MOVE_EVENT, UP_EVENT, scrollModes } from './symbol'\n\nimport type { ScrollbarExposed } from '@/components/scrollbar'\nimport type { EventHandler } from '@vexip-ui/utils'\nimport type { ScrollMode } from './symbol'\n\ndefineOptions({ name: 'Scroll' })\n\nconst _props = defineProps(scrollProps)\nconst props = useProps('scroll', _props, {\n  scrollClass: null,\n  scrollStyle: null,\n  scrollAttrs: null,\n  mode: {\n    default: 'vertical',\n    validator: value => scrollModes.includes(value)\n  },\n  width: '',\n  height: '',\n  deltaX: 40,\n  deltaY: 40,\n  disabled: false,\n  pointer: USE_TOUCH,\n  wheel: true,\n  scrollX: {\n    default: 0,\n    static: true\n  },\n  scrollY: {\n    default: 0,\n    static: true\n  },\n  useXBar: false,\n  useYBar: false,\n  barFade: 1500,\n  barClass: null,\n  autoplay: false,\n  playWaiting: 500,\n  noBuffer: false,\n  noTransition: false,\n  onBeforeScroll: {\n    default: null,\n    isFunc: true\n  },\n  useBarTrack: false,\n  scrollTag: 'div'\n})\n\nconst emitter = createEventEmitter()\n\nconst nh = useNameHelper('scroll')\nconst { isRtl } = useRtl()\nconst { timer } = useSetTimeout()\n\nconst usingBar = ref(false)\nconst scrolling = ref(false)\nconst transitionDuration = ref<number>(0)\nconst mode = computed(() => (props.mode === 'horizontal-exact' ? 'horizontal' : props.mode))\n\nlet waitDelay = 180\n\nconst xBar = ref<ScrollbarExposed>()\nconst yBar = ref<ScrollbarExposed>()\n\nlet initialized = false\n\nconst {\n  wrapperEl,\n  contentEl,\n\n  wrapper,\n  isReady,\n  x,\n  y,\n  percentX,\n  percentY,\n  xScrollLimit,\n  yScrollLimit,\n  enableXScroll,\n  enableYScroll,\n  xBarLength,\n  yBarLength,\n\n  handleResize,\n  verifyScroll,\n  computePercent,\n  refresh,\n  triggerUpdate\n} = useScrollWrapper({\n  mode,\n  disabled: toRef(props, 'disabled'),\n  width: toRef(props, 'width'),\n  height: toRef(props, 'height'),\n  scrollX: toRef(props, 'scrollX'),\n  scrollY: toRef(props, 'scrollY'),\n  onResize: entry => {\n    emitEvent(props.onResize, entry)\n  },\n  // onBeforeRefresh: stopAutoplay,\n  onAfterRefresh: () => {\n    syncBarScroll()\n\n    if (!initialized) {\n      initialized = true\n      startAutoplay()\n    }\n  }\n})\n\nconst slotParams = shallowReadonly({\n  getState,\n  refresh,\n  scrollTo,\n  scrollBy,\n  scrollToElement,\n  ensureInView\n})\n\n/* autoplay */\nconst canPlay = ref(false)\n\nconst canAutoplay = computed(() => {\n  return (\n    mode.value !== 'both' &&\n    (isTrue(props.autoplay) || +props.autoplay > 1000) &&\n    ((mode.value === 'horizontal' && enableXScroll.value) ||\n      (mode.value === 'vertical' && enableYScroll.value))\n  )\n})\n\nwatch([() => props.autoplay, () => props.playWaiting], () => {\n  stopAutoplay()\n  nextTick(startAutoplay)\n})\n\nfunction startAutoplay() {\n  if (!canAutoplay.value) return\n\n  stopAutoplay()\n\n  const distance = mode.value === 'horizontal' ? 'width' : 'height'\n  const limit = mode.value === 'horizontal' ? xScrollLimit : yScrollLimit\n  // const prop = mode.value === 'horizontal' ? 'x' : 'y'\n  const prop = mode.value === 'horizontal' ? x : y\n  const waiting = props.playWaiting < 20 ? 20 : props.playWaiting\n\n  let playSpeed = 0.5\n\n  if (typeof props.autoplay === 'number') {\n    playSpeed = (wrapper[distance] / props.autoplay) * 16\n  }\n\n  const precessScroll = () => {\n    computePercent()\n    triggerUpdate()\n    syncBarScroll()\n    emitScrollEvent(mode.value)\n  }\n  const scroll = () => {\n    prop.value -= playSpeed\n\n    if (prop.value <= limit.value) {\n      prop.value = limit.value\n      canPlay.value = false\n\n      precessScroll()\n\n      timer.end = setTimeout(() => {\n        scrollTo(0, 0, 500)\n\n        timer.start = setTimeout(() => {\n          canPlay.value = true\n\n          emitScrollEvent(mode.value)\n          scroll()\n        }, 500 + waiting)\n      }, waiting)\n    } else {\n      precessScroll()\n\n      if (canPlay.value) {\n        requestAnimationFrame(scroll)\n      }\n    }\n  }\n\n  timer.play = setTimeout(() => {\n    canPlay.value = true\n    scroll()\n  }, waiting)\n}\n\nfunction stopAutoplay() {\n  canPlay.value = false\n\n  clearTimeout(timer.play)\n  clearTimeout(timer.start)\n  clearTimeout(timer.end)\n}\n/* autoplay */\n\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.bm(mode.value),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('using-bar')]: usingBar.value,\n      [nh.bm('scrolling')]: scrolling.value,\n      [nh.bm('no-ready')]: !isReady.value,\n      [nh.bm('no-transition')]: props.noTransition\n    }\n  ]\n})\nconst style = computed(() => {\n  const { width, height } = props\n\n  return {\n    width: width\n      ? typeof width === 'string'\n        ? Number.isNaN(Number(width))\n          ? width\n          : `${Number(width)}px`\n        : `${width}px`\n      : undefined,\n    height: height\n      ? typeof height === 'string'\n        ? Number.isNaN(Number(height))\n          ? height\n          : `${Number(height)}px`\n        : `${height}px`\n      : undefined\n  }\n})\nconst wrapperClass = computed(() => {\n  return [props.scrollAttrs?.class, props.scrollClass, nh.be('wrapper')]\n})\nconst wrapperStyle = computed(() => {\n  return [props.scrollAttrs?.style, props.scrollStyle]\n})\n\nwatch(enableXScroll, value => {\n  emitEvent(props.onXEnabledChange, value)\n})\nwatch(enableYScroll, value => {\n  emitEvent(props.onYEnabledChange, value)\n})\nwatch(isReady, value => {\n  if (value) {\n    transitionDuration.value = -1\n    emitEvent(props.onReady)\n  } else {\n    transitionDuration.value = 0\n  }\n})\nwatchEffect(() => {\n  if (!contentEl.value) return\n\n  contentEl.value.style.transform = `translate3d(${isRtl.value ? -x.value : x.value}px, ${\n    y.value\n  }px, 0)`\n})\nwatchEffect(() => {\n  if (!contentEl.value) return\n\n  contentEl.value.style.transitionDuration =\n    transitionDuration.value < 0 ? '' : `${transitionDuration.value}ms`\n})\n\nonMounted(() => {\n  if (!isClient || !wrapperEl.value) return\n\n  const style = getComputedStyle(wrapperEl.value)\n  const duration = style.getPropertyValue(nh.cv('move-duration')).trim()\n\n  if (duration.endsWith('ms')) {\n    waitDelay = parseFloat(duration)\n  } else if (duration.endsWith('s')) {\n    waitDelay = parseFloat(duration) * 1000\n  }\n\n  waitDelay = Number.isNaN(waitDelay) ? 140 : waitDelay\n})\n\nonBeforeUnmount(stopAutoplay)\n\ndefineExpose({\n  percentX,\n  percentY,\n  x,\n  y,\n  isReady,\n\n  xBarLength,\n  yBarLength,\n  enableXScroll,\n  enableYScroll,\n\n  wrapper: wrapperEl,\n  content: contentEl,\n  xBar,\n  yBar,\n\n  refresh,\n  scrollTo,\n  scrollBy,\n  scrollToElement,\n  ensureInView,\n  getXScrollLimit,\n  getYScrollLimit,\n  addScrollListener,\n  removeScrollListener\n})\n\nfunction getCommonPayload() {\n  return {\n    clientX: -x.value,\n    clientY: -y.value,\n    percentX: percentX.value,\n    percentY: percentY.value\n  }\n}\n\nfunction syncBarScroll() {\n  xBar.value?.handleScroll(percentX.value)\n  yBar.value?.handleScroll(percentY.value)\n}\n\nfunction handleMouseDown(event: MouseEvent) {\n  if (!props.pointer || event.button > 0 || USE_TOUCH) {\n    return false\n  }\n\n  handlePointerDown(event)\n}\n\nfunction handleTouchStart(event: TouchEvent) {\n  if (!props.pointer || event.touches.length !== 1) {\n    return false\n  }\n\n  handlePointerDown(event)\n}\n\n// 记录滚动开始位置\nlet xScrollStartAt = 0\nlet yScrollStartAt = 0\n\n// 记录滚动开始鼠标位置\nlet cursorXPosition = 0\nlet cursorYPosition = 0\n\nlet moved = false\nlet target: EventTarget | null = null\nlet lastDate = 0\n\nfunction handlePointerDown(event: MouseEvent | TouchEvent) {\n  if (!enableXScroll.value && !enableYScroll.value) {\n    return false\n  }\n\n  if (event.cancelable) {\n    event.preventDefault()\n  }\n\n  prepareScroll()\n\n  transitionDuration.value = 0\n\n  const pointer = 'touches' in event ? event.touches[0] : event\n\n  xScrollStartAt = x.value\n  yScrollStartAt = y.value\n  cursorXPosition = pointer.clientX\n  cursorYPosition = pointer.clientY\n\n  moved = false\n  target = event.target\n  lastDate = Date.now()\n\n  document.addEventListener(MOVE_EVENT, handlePointerMove)\n  document.addEventListener(UP_EVENT, handlePointerUp)\n\n  emitEvent(props.onScrollStart, getCommonPayload())\n}\n\nfunction handlePointerMove(event: MouseEvent | TouchEvent) {\n  event.stopPropagation()\n\n  if (!USE_TOUCH) {\n    event.preventDefault()\n  }\n\n  const pointer = 'touches' in event ? event.touches[0] : event\n  const signX = pointer.clientX - cursorXPosition > 0 ? 1 : -1\n  const signY = pointer.clientY - cursorYPosition > 0 ? 1 : -1\n\n  if (props.onBeforeScroll?.({ signX, signY }) === false) {\n    return false\n  }\n\n  scrolling.value = true\n\n  if (enableXScroll.value) {\n    x.value = xScrollStartAt + pointer.clientX - cursorXPosition\n    moved = true\n  }\n\n  if (enableYScroll.value) {\n    y.value = yScrollStartAt + pointer.clientY - cursorYPosition\n    moved = true\n  }\n\n  if (props.noBuffer) {\n    verifyScroll()\n  } else {\n    computePercent()\n    triggerUpdate()\n  }\n\n  syncBarScroll()\n  emitScrollEvent(mode.value)\n}\n\nfunction handlePointerUp(event: MouseEvent | TouchEvent) {\n  if (!moved && target && event.target === target && Date.now() - lastDate <= 500) {\n    target.dispatchEvent(new MouseEvent('click', event))\n  }\n\n  document.removeEventListener(MOVE_EVENT, handlePointerMove)\n  document.removeEventListener(UP_EVENT, handlePointerUp)\n\n  transitionDuration.value = -1\n  moved = false\n\n  handleBuffer()\n  verifyScroll()\n  syncBarScroll()\n  emitEvent(props.onScrollEnd, getCommonPayload())\n  startAutoplay()\n}\n\n// 按下 shift 时为横向滚动，保持和原生操作一致\nfunction handleWheel(event: WheelEvent, type: 'vertical' | 'horizontal') {\n  const isVerticalScroll = enableYScroll.value && type === 'vertical'\n  const isHorizontalScroll = enableXScroll.value && type === 'horizontal'\n\n  // 纵横滚动均使用 deltaY 标记\n  const sign = event.deltaY > 0 ? -1 : 1\n\n  if (\n    props.wheel &&\n    (isVerticalScroll || isHorizontalScroll) &&\n    props.onBeforeScroll?.({ signX: -sign, signY: -sign }) !== false\n  ) {\n    event.preventDefault()\n    event.stopPropagation()\n  } else {\n    return true\n  }\n\n  if (mode.value !== 'both' && mode.value !== type) return false\n\n  prepareScroll()\n\n  const computedDelta = sign * (type === 'horizontal' ? props.deltaX : props.deltaY)\n\n  if (isVerticalScroll) {\n    y.value += computedDelta\n  } else if (isHorizontalScroll) {\n    x.value += computedDelta\n  }\n\n  verifyScroll()\n  syncBarScroll()\n  emitScrollEvent(type)\n\n  emitEvent(props.onWheel, {\n    ...getCommonPayload(),\n    type,\n    sign: -sign as 1 | -1\n  })\n\n  startAutoplay()\n}\n\nfunction prepareScroll() {\n  stopAutoplay()\n  clearTimeout(timer.buffer)\n}\n\nfunction handleBuffer() {\n  if (props.noBuffer) {\n    timer.buffer = setTimeout(() => {\n      scrolling.value = false\n    }, 300)\n  } else {\n    scrolling.value = false\n  }\n}\n\nfunction handleBarScrollStart(type: 'vertical' | 'horizontal') {\n  usingBar.value = true\n  emitEvent(props.onBarScrollStart, { ...getCommonPayload(), type })\n}\n\nfunction handleBarScrollEnd(type: 'vertical' | 'horizontal') {\n  usingBar.value = false\n  emitEvent(props.onBarScrollEnd, { ...getCommonPayload(), type })\n}\n\nfunction handleXBarScroll(percent: number) {\n  percentX.value = percent\n  x.value = (percent * xScrollLimit.value) / 100\n  triggerUpdate()\n\n  emitEvent(props.onBarScroll, {\n    ...getCommonPayload(),\n    type: 'horizontal'\n  })\n  emitScrollEvent('horizontal')\n}\n\nfunction handleYBarScroll(percent: number) {\n  percentY.value = percent\n  y.value = (percent * yScrollLimit.value) / 100\n  triggerUpdate()\n\n  emitEvent(props.onBarScroll, {\n    ...getCommonPayload(),\n    type: 'vertical'\n  })\n  emitScrollEvent('vertical')\n}\n\nfunction emitScrollEvent(type: Exclude<ScrollMode, 'horizontal-exact'>) {\n  emitEvent(props.onScroll, {\n    ...getCommonPayload(),\n    type\n  })\n  emitter.emit('scroll', {\n    ...getCommonPayload(),\n    type\n  })\n}\n\nfunction ensureScrollOffset() {\n  if (wrapperEl.value) {\n    wrapperEl.value.scrollTop = 0\n    wrapperEl.value.scrollLeft = 0\n  }\n}\n\nfunction getState() {\n  const { clientX: scrollX, clientY: scrollY, percentX, percentY } = getCommonPayload()\n\n  return {\n    scrollX,\n    scrollY,\n    percentX,\n    percentY,\n    enableXScroll: enableXScroll.value,\n    enableYScroll: enableYScroll.value\n  }\n}\n\nfunction waitTransition(duration = waitDelay) {\n  clearTimeout(timer.wait)\n\n  return new Promise<void>(resolve => {\n    timer.wait = setTimeout(() => resolve(), duration + 1)\n  })\n}\n\nfunction scrollTo(clientX: number, clientY: number, duration?: number) {\n  setDuration(duration)\n  nextTick(() => {\n    let changed = false\n\n    if (enableXScroll.value && Math.abs(x.value + clientX) > 0.01) {\n      x.value = -clientX\n      changed = true\n    }\n\n    if (enableYScroll.value && Math.abs(y.value + clientY) > 0.01) {\n      y.value = -clientY\n      changed = true\n    }\n\n    verifyScroll()\n    syncBarScroll()\n\n    if (!changed) transitionDuration.value = -1\n  })\n\n  return waitTransition(duration)\n}\n\nfunction scrollBy(deltaX: number, deltaY: number, duration?: number) {\n  setDuration(duration)\n  nextTick(() => {\n    let changed = false\n\n    if (deltaX && enableXScroll) {\n      x.value -= deltaX\n      changed = true\n    }\n\n    if (deltaY && enableYScroll) {\n      y.value -= deltaY\n      changed = true\n    }\n\n    verifyScroll()\n    syncBarScroll()\n\n    if (!changed) transitionDuration.value = -1\n  })\n\n  return waitTransition(duration)\n}\n\nfunction setDuration(duration?: number) {\n  if (typeof duration === 'number') {\n    transitionDuration.value = duration\n\n    if (transitionDuration.value === 0) {\n      nextTick(() => {\n        transitionDuration.value = -1\n      })\n    }\n  }\n}\n\nfunction scrollToElement(el: string | Element, duration?: number, offset = 0) {\n  if (!contentEl.value) return Promise.resolve()\n\n  if (typeof el === 'string') {\n    el = contentEl.value.querySelector(el)!\n  }\n\n  if (!isElement(el)) return Promise.resolve()\n\n  const wrapperRect = contentEl.value.getBoundingClientRect()\n  const elRect = el.getBoundingClientRect()\n\n  let clientX = 0\n  let clientY = 0\n\n  if (mode.value !== 'vertical') {\n    clientX = elRect.left - wrapperRect.left + offset\n  }\n\n  if (mode.value !== 'horizontal') {\n    clientY = elRect.top - wrapperRect.top + offset\n  }\n\n  return scrollTo(clientX, clientY, duration)\n}\n\nfunction ensureInView(el: string | Element, duration?: number, offset = 0) {\n  if (!wrapperEl.value) return Promise.resolve()\n\n  if (typeof el === 'string') {\n    el = wrapperEl.value.querySelector(el)!\n  }\n\n  if (!isElement(el)) return Promise.resolve()\n\n  const wrapperRect = wrapperEl.value.getBoundingClientRect()\n  const elRect = el.getBoundingClientRect()\n\n  let clientX = 0\n  let clientY = 0\n\n  if (mode.value !== 'vertical') {\n    if (elRect.left < wrapperRect.left + offset) {\n      clientX = elRect.left - wrapperRect.left - offset\n    } else if (elRect.right > wrapperRect.right - offset) {\n      clientX = elRect.right - wrapperRect.right + offset\n    }\n  }\n\n  if (mode.value !== 'horizontal') {\n    if (elRect.top < wrapperRect.top + offset) {\n      clientY = elRect.top - wrapperRect.top - offset\n    } else if (elRect.bottom > wrapperRect.bottom - offset) {\n      clientY = elRect.bottom - wrapperRect.bottom + offset\n    }\n  }\n\n  return scrollBy(clientX, clientY, duration)\n}\n\nfunction getXScrollLimit() {\n  return [0, -xScrollLimit.value]\n}\n\nfunction getYScrollLimit() {\n  return [0, -yScrollLimit.value]\n}\n\nfunction addScrollListener(listener: EventHandler) {\n  emitter.on('scroll', listener)\n}\n\nfunction removeScrollListener(listener: EventHandler) {\n  emitter.off('scroll', listener)\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapperEl\"\n    :class=\"className\"\n    :style=\"style\"\n    @mousedown=\"handleMouseDown\"\n    @touchstart=\"handleTouchStart\"\n    @scroll=\"ensureScrollOffset\"\n    @wheel.exact=\"\n      handleWheel($event, props.mode === 'horizontal-exact' ? 'horizontal' : 'vertical')\n    \"\n    @wheel.shift=\"handleWheel($event, 'horizontal')\"\n  >\n    <div v-if=\"$slots.extra\" :class=\"nh.be('extra')\">\n      <slot name=\"extra\" v-bind=\"slotParams\"></slot>\n    </div>\n    <ResizeObserver throttle :on-resize=\"handleResize\">\n      <component\n        :is=\"props.scrollTag || 'div'\"\n        v-bind=\"props.scrollAttrs\"\n        ref=\"contentEl\"\n        :class=\"wrapperClass\"\n        :style=\"wrapperStyle\"\n        @transitionend=\"transitionDuration = -1\"\n      >\n        <slot v-bind=\"slotParams\"></slot>\n      </component>\n    </ResizeObserver>\n    <Scrollbar\n      v-if=\"props.useXBar\"\n      ref=\"xBar\"\n      inherit\n      placement=\"bottom\"\n      :class=\"[nh.bem('bar', 'horizontal'), props.barClass]\"\n      :fade=\"props.barFade\"\n      :bar-length=\"xBarLength\"\n      :disabled=\"!enableXScroll\"\n      :duration=\"transitionDuration\"\n      :use-track=\"props.useBarTrack\"\n      @scroll-start=\"handleBarScrollStart('horizontal')\"\n      @scroll=\"handleXBarScroll\"\n      @scroll-end=\"handleBarScrollEnd('horizontal')\"\n    ></Scrollbar>\n    <Scrollbar\n      v-if=\"props.useYBar\"\n      ref=\"yBar\"\n      inherit\n      placement=\"right\"\n      :class=\"[nh.bem('bar', 'vertical'), props.barClass]\"\n      :fade=\"props.barFade\"\n      :bar-length=\"yBarLength\"\n      :disabled=\"!enableYScroll\"\n      :duration=\"transitionDuration\"\n      :use-track=\"props.useBarTrack\"\n      @scroll-start=\"handleBarScrollStart('vertical')\"\n      @scroll=\"handleYBarScroll\"\n      @scroll-end=\"handleBarScrollEnd('vertical')\"\n    ></Scrollbar>\n  </div>\n</template>\n", "import type { InjectionKey } from 'vue'\n\nexport type WheelRawOption =\n  | string\n  | number\n  | {\n    value: string | number,\n    label?: string,\n    disabled?: boolean\n  }\n\nexport interface WheelOption {\n  value: string | number,\n  label: string,\n  disabled: boolean,\n  meta: WheelRawOption\n}\n\nexport interface ItemState {\n  width: number,\n  height: number,\n  el?: HTMLElement | null,\n  value: number | string,\n  disabled: boolean,\n  meta: any\n}\n\nexport interface WheelState {\n  increaseItem(item: ItemState): void,\n  decreaseItem(item: ItemState): void\n}\n\nexport const WHEEL_STATE: InjectionKey<WheelState> = Symbol('WHEEL_STATE')\n", "<template>\n  <li\n    ref=\"wrapper\"\n    :class=\"[\n      nh.be('item'),\n      disabled && nh.bem('item', 'disabled'),\n      active && nh.bem('item', 'active')\n    ]\"\n    role=\"option\"\n    :aria-disabled=\"disabled ? 'true' : undefined\"\n    :aria-selected=\"active\"\n    :style=\"style\"\n  >\n    <slot>\n      {{ value }}\n    </slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n  toRef\n} from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { WHEEL_STATE } from './symbol'\n\nexport default defineComponent({\n  name: 'WheelItem',\n  props: {\n    value: {\n      type: [Number, String],\n      default: null\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    active: {\n      type: Boolean,\n      default: false\n    },\n    meta: {\n      type: [String, Number, Object],\n      default: null\n    }\n  },\n  setup(props) {\n    const wheelState = inject(WHEEL_STATE, null)\n\n    const width = ref(0)\n    const height = ref(0)\n\n    const wrapper = ref<HTMLElement>()\n\n    const state = reactive({\n      width,\n      height,\n      el: wrapper,\n      value: toRef(props, 'value'),\n      disabled: toRef(props, 'disabled'),\n      meta: toRef(props, 'meta')\n    })\n\n    const style = computed(() => {\n      return {\n        width: width.value ? `${width.value}px` : undefined,\n        height: height.value ? `${height.value}px` : undefined\n      }\n    })\n\n    if (wheelState) {\n      onMounted(() => {\n        wheelState.increaseItem(state)\n      })\n\n      onBeforeUnmount(() => {\n        wheelState.decreaseItem(state)\n      })\n    }\n\n    return {\n      nh: useNameHelper('wheel'),\n      style,\n      wrapper\n    }\n  }\n})\n</script>\n", "<template>\n  <li\n    ref=\"wrapper\"\n    :class=\"[\n      nh.be('item'),\n      disabled && nh.bem('item', 'disabled'),\n      active && nh.bem('item', 'active')\n    ]\"\n    role=\"option\"\n    :aria-disabled=\"disabled ? 'true' : undefined\"\n    :aria-selected=\"active\"\n    :style=\"style\"\n  >\n    <slot>\n      {{ value }}\n    </slot>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  onMounted,\n  reactive,\n  ref,\n  toRef\n} from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { WHEEL_STATE } from './symbol'\n\nexport default defineComponent({\n  name: 'WheelItem',\n  props: {\n    value: {\n      type: [Number, String],\n      default: null\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    active: {\n      type: Boolean,\n      default: false\n    },\n    meta: {\n      type: [String, Number, Object],\n      default: null\n    }\n  },\n  setup(props) {\n    const wheelState = inject(WHEEL_STATE, null)\n\n    const width = ref(0)\n    const height = ref(0)\n\n    const wrapper = ref<HTMLElement>()\n\n    const state = reactive({\n      width,\n      height,\n      el: wrapper,\n      value: toRef(props, 'value'),\n      disabled: toRef(props, 'disabled'),\n      meta: toRef(props, 'meta')\n    })\n\n    const style = computed(() => {\n      return {\n        width: width.value ? `${width.value}px` : undefined,\n        height: height.value ? `${height.value}px` : undefined\n      }\n    })\n\n    if (wheelState) {\n      onMounted(() => {\n        wheelState.increaseItem(state)\n      })\n\n      onBeforeUnmount(() => {\n        wheelState.decreaseItem(state)\n      })\n    }\n\n    return {\n      nh: useNameHelper('wheel'),\n      style,\n      wrapper\n    }\n  }\n})\n</script>\n", "import { booleanProp, booleanStringProp, buildProps, eventProp, stateProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { WheelRawOption } from './symbol'\n\nexport const wheelProps = buildProps({\n  state: stateProp,\n  horizontal: booleanProp,\n  value: [String, Number],\n  /**\n   * 上下或左右两侧的候选数\n   */\n  candidate: Number as PropType<0 | 1 | 2 | 3>,\n  arrow: booleanProp,\n  pointer: booleanProp,\n  options: Array as PropType<WheelRawOption[]>,\n  insertEmpty: booleanStringProp,\n  disabled: booleanProp,\n  loading: booleanProp,\n  loadingLock: booleanProp,\n  disabledItem: Function as PropType<(value: string | number, data: WheelRawOption) => boolean>,\n  noTransition: booleanProp,\n  onChange: eventProp<(value: string | number, data: WheelRawOption) => void>(),\n  onPrev: eventProp<(value: string | number, data: WheelRawOption) => void>(),\n  onNext: eventProp<(value: string | number, data: WheelRawOption) => void>(),\n  onItemClick: eventProp<(value: string | number, data: WheelRawOption) => void>()\n})\n\nexport type WheelProps = ExtractPropTypes<typeof wheelProps>\nexport type WheelCProps = ConfigurableProps<WheelProps>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon/'\nimport { Scroll } from '@/components/scroll'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, nextTick, provide, ref, watch } from 'vue'\n\nimport WheelItem from './wheel-item.vue'\nimport { createStateProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useDisplay, useModifier, useRtl } from '@vexip-ui/hooks'\nimport { USE_TOUCH, boundRange, debounce, debounceMinor, toFalse } from '@vexip-ui/utils'\nimport { wheelProps } from './props'\nimport { WHEEL_STATE } from './symbol'\n\nimport type { ItemState, WheelOption, WheelRawOption } from './symbol'\n\ndefineOptions({ name: 'Wheel' })\n\nconst { idFor, state, disabled, loading, validateField, getFieldValue, setFieldValue } =\n  useFieldStore<string | number>(() => wrapper.value?.focus())\n\nconst _props = defineProps(wheelProps)\nconst props = useProps('wheel', _props, {\n  state: createStateProp(state),\n  horizontal: false,\n  value: {\n    default: () => getFieldValue(null!),\n    static: true\n  },\n  candidate: {\n    default: 2,\n    validator: value => [0, 1, 2, 3].includes(value)\n  },\n  arrow: false,\n  pointer: USE_TOUCH,\n  options: {\n    default: () => [],\n    static: true\n  },\n  insertEmpty: false,\n  disabled: () => disabled.value,\n  loading: () => loading.value,\n  loadingLock: false,\n  disabledItem: {\n    default: toFalse,\n    isFunc: true\n  },\n  noTransition: false\n})\n\nconst emit = defineEmits(['update:value'])\n\ndefineSlots<{ default: (params: { option: WheelOption, index: number }) => any }>()\n\nconst nh = useNameHelper('wheel')\nconst icons = useIcons()\n\nconst items = ref(new Set<ItemState>())\nconst currentActive = ref(0)\nconst wrapperWidth = ref(0)\nconst wrapperHeight = ref(0)\nconst targetWidth = ref(0)\nconst targetHeight = ref(0)\nconst horizontalPadding = ref(0)\nconst verticalPadding = ref(0)\nconst isInit = ref(false)\n\nconst { isRtl } = useRtl()\n\nconst wrapper = useDisplay(displayInit)\nconst scroll = ref<InstanceType<typeof Scroll>>()\n\nuseModifier({\n  target: wrapper,\n  passive: false,\n  onKeyDown: (event, modifier) => {\n    if (modifier.up || modifier.down) {\n      event.preventDefault()\n      modifier.up ? handlePrev() : handleNext()\n    }\n  }\n})\n\nconst normalizedOptions = computed<WheelOption[]>(() => {\n  const options = props.options.map(option => {\n    if (typeof option === 'object') {\n      const { value, label, disabled = false } = option\n\n      return {\n        value,\n        label: label || String(value),\n        disabled,\n        meta: option\n      }\n    }\n\n    return { value: option, label: String(option), disabled: false, meta: option }\n  })\n\n  if (props.insertEmpty) {\n    options.unshift({\n      value: '',\n      label: typeof props.insertEmpty === 'string' ? props.insertEmpty : '-',\n      disabled: false,\n      meta: ''\n    })\n  }\n\n  return options\n})\nconst itemList = computed(() => {\n  return Array.from(items.value)\n})\nconst readonly = computed(() => props.loading && props.loadingLock)\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.bm(props.horizontal ? 'horizontal' : 'vertical'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm(props.state)]: props.state !== 'default',\n      [nh.bm('disabled')]: props.disabled,\n      [nh.bm('readonly')]: readonly.value,\n      [nh.bm('loading')]: props.loading\n    }\n  ]\n})\nconst listStyle = computed(() => {\n  if (props.horizontal) {\n    return {\n      paddingRight: `${horizontalPadding.value}px`,\n      paddingLeft: `${horizontalPadding.value}px`\n    }\n  }\n\n  return {\n    paddingTop: `${verticalPadding.value}px`,\n    paddingBottom: `${verticalPadding.value}px`\n  }\n})\nconst maskStyle = computed(() => {\n  if (props.horizontal) {\n    return {\n      width: horizontalPadding.value ? `${horizontalPadding.value}px` : undefined\n    }\n  }\n\n  return {\n    height: verticalPadding.value ? `${verticalPadding.value}px` : undefined\n  }\n})\nconst borderStyle = computed(() => {\n  const style: Record<string, string> = {\n    inset: props.horizontal\n      ? `0 ${horizontalPadding.value - 1}px`\n      : `${verticalPadding.value - 1}px 0`\n  }\n\n  if (props.horizontal) {\n    style.borderTop = '0'\n    style.borderBottom = '0'\n  } else {\n    style.borderRight = '0'\n    style.borderLeft = '0'\n  }\n\n  return style\n})\nconst prevDisabled = computed(() => {\n  return (\n    props.disabled ||\n    !itemList.value.slice(0, currentActive.value).some(item => !isItemDisabled(item))\n  )\n})\nconst nextDisabled = computed(() => {\n  return (\n    props.disabled ||\n    currentActive.value >= itemList.value.length - 1 ||\n    !itemList.value\n      .slice(currentActive.value + 1, itemList.value.length)\n      .some(item => !isItemDisabled(item))\n  )\n})\nconst prevIcon = computed(() =>\n  props.horizontal\n    ? isRtl.value\n      ? icons.value.angleRight\n      : icons.value.angleLeft\n    : icons.value.angleUp\n)\nconst nextIcon = computed(() =>\n  props.horizontal\n    ? isRtl.value\n      ? icons.value.angleLeft\n      : icons.value.angleRight\n    : icons.value.angleDown\n)\n\nprovide(WHEEL_STATE, { increaseItem, decreaseItem })\n\nconst updateActive = debounceMinor(() => {\n  const active = Math.max(\n    itemList.value.findIndex(item => item.value === props.value),\n    0\n  )\n\n  setActive(findEnabledActive(active))\n})\n\nconst computeSize = debounceMinor(() => {\n  nextTick(() => {\n    const horizontal = props.horizontal\n\n    itemList.value.forEach(item => {\n      if (item && item.el) {\n        targetWidth.value = Math.max(targetWidth.value, item.el.offsetWidth)\n        targetHeight.value = Math.max(targetHeight.value, item.el.offsetHeight)\n      }\n    })\n\n    const candidate = props.candidate\n    const showCount = 2 * candidate + 1\n\n    wrapperWidth.value = showCount * targetWidth.value\n    wrapperHeight.value = showCount * targetHeight.value\n\n    horizontalPadding.value = candidate * targetWidth.value\n    verticalPadding.value = candidate * targetHeight.value\n\n    items.value.forEach(item => {\n      if (horizontal) {\n        item.width = targetWidth.value\n      } else {\n        item.height = targetHeight.value\n      }\n    })\n\n    setTimeout(() => {\n      scroll.value?.refresh()\n    }, 0)\n  })\n})\n\nconst refreshScroll = debounce(() => {\n  if (scroll.value) {\n    let targetXScroll = 0\n    let targetYScroll = 0\n\n    if (props.horizontal) {\n      targetXScroll = currentActive.value * targetWidth.value\n    } else {\n      targetYScroll = currentActive.value * targetHeight.value\n    }\n\n    nextTick(() => {\n      scroll.value?.scrollTo(targetXScroll, targetYScroll)\n    })\n  }\n}, 20)\n\nwatch(\n  () => props.value,\n  () => {\n    updateActive()\n    refreshScroll()\n  },\n  { immediate: true }\n)\nwatch(() => props.horizontal, computeSize)\nwatch(() => props.candidate, computeSize)\n\ndefineExpose({\n  idFor,\n  currentActive,\n  isInit,\n  targetWidth,\n  targetHeight,\n  wrapperWidth,\n  wrapperHeight,\n  itemList,\n  wrapper,\n  scroll,\n  refreshScroll,\n  focus: (options?: FocusOptions) => wrapper.value?.focus(options),\n  blur: () => wrapper.value?.blur()\n})\n\nfunction isItemDisabled(item: ItemState) {\n  return item.disabled || props.disabledItem(item.value, item.meta)\n}\n\nfunction setActive(active: number) {\n  if (currentActive.value === active) return\n\n  currentActive.value = active\n\n  const item = itemList.value[active]\n  const value = item?.value\n\n  refreshScroll()\n  emit('update:value', value)\n  setFieldValue(value)\n  emitEvent(props.onChange, value, item?.meta)\n  validateField()\n}\n\nfunction queryEnabledActive(active: number, step: number) {\n  step = step / Math.abs(step)\n\n  while (itemList.value[active].disabled) {\n    active += step\n\n    if (active < 0 || active >= itemList.value.length) break\n  }\n\n  return active\n}\n\nfunction findEnabledActive(active: number, sign = 1) {\n  if (itemList.value[active] && isItemDisabled(itemList.value[active])) {\n    active = queryEnabledActive(active, 1 * sign)\n\n    if (sign > 0 ? active >= itemList.value.length : active < 0) {\n      active = queryEnabledActive(boundRange(active, 0, itemList.value.length - 1), -1 * sign)\n\n      // 全禁用\n      if (sign > 0 ? active < 0 : active >= itemList.value.length) active = 0\n    }\n  }\n\n  return active\n}\n\nfunction increaseItem(item: ItemState) {\n  items.value.add(item)\n  computeSize()\n  updateActive()\n}\n\nfunction decreaseItem(item: ItemState) {\n  items.value.delete(item)\n  computeSize()\n  updateActive()\n}\n\nfunction displayInit() {\n  computeSize()\n  scroll.value?.refresh()\n\n  nextTick(() => {\n    isInit.value = true\n\n    updateActive()\n    refreshScroll()\n  })\n}\n\nfunction beforeScroll({ signX, signY }: { signX: number, signY: number }) {\n  if (props.disabled || readonly.value) return false\n\n  const sign = props.horizontal ? signX : signY\n\n  return !((sign < 0 && prevDisabled.value) || (sign > 0 && nextDisabled.value))\n}\n\nfunction handleScrollEnd({ clientX, clientY }: { clientX: number, clientY: number }) {\n  const aboutActive = props.horizontal ? clientX / targetWidth.value : clientY / targetHeight.value\n  const active = Math.round(aboutActive)\n\n  if (active !== currentActive.value) {\n    setActive(findEnabledActive(active, active > aboutActive ? 1 : -1))\n  } else {\n    refreshScroll()\n  }\n}\n\nfunction handleWheel({\n  sign,\n  clientX,\n  clientY\n}: {\n  clientX: number,\n  clientY: number,\n  sign: 1 | -1\n}) {\n  const active = props.horizontal\n    ? Math.round(clientX / targetWidth.value)\n    : Math.round(clientY / targetHeight.value)\n\n  setActive(findEnabledActive(active, sign))\n}\n\nfunction handlePrev() {\n  if (!prevDisabled.value) {\n    setActive(findEnabledActive(currentActive.value - 1, -1))\n\n    const item = itemList.value[currentActive.value]\n\n    emitEvent(props.onPrev, item?.value, item?.meta)\n  }\n}\n\nfunction handleNext() {\n  if (!nextDisabled.value) {\n    setActive(findEnabledActive(currentActive.value + 1, 1))\n\n    const item = itemList.value[currentActive.value]\n\n    emitEvent(props.onNext, item?.value, item?.meta)\n  }\n}\n\nfunction handleItemClick(value: string | number, data: WheelRawOption) {\n  emitEvent(props.onItemClick, value, data)\n}\n</script>\n\n<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    tabindex=\"0\"\n  >\n    <div\n      v-if=\"props.arrow\"\n      ref=\"prevArrow\"\n      :class=\"[\n        nh.be('arrow'),\n        nh.bem('arrow', 'prev'),\n        prevDisabled ? nh.bem('arrow', 'disabled') : ''\n      ]\"\n      @click=\"handlePrev\"\n    >\n      <Icon v-bind=\"prevIcon\"></Icon>\n    </div>\n    <div :class=\"nh.be('scroll')\">\n      <Scroll\n        ref=\"scroll\"\n        inherit\n        :scroll-x=\"props.horizontal ? targetWidth * currentActive : 0\"\n        :scroll-y=\"props.horizontal ? 0 : targetHeight * currentActive\"\n        :width=\"props.horizontal ? wrapperWidth : '100%'\"\n        :height=\"props.horizontal ? '100%' : wrapperHeight\"\n        :pointer=\"props.pointer\"\n        :mode=\"props.horizontal ? 'horizontal' : 'vertical'\"\n        :delta-x=\"targetWidth\"\n        :delta-y=\"targetHeight\"\n        :on-before-scroll=\"beforeScroll\"\n        :no-transition=\"props.noTransition\"\n        @wheel=\"handleWheel\"\n        @scroll-end=\"handleScrollEnd\"\n      >\n        <ul ref=\"list\" :class=\"nh.be('list')\" :style=\"listStyle\">\n          <template v-if=\"isInit\">\n            <WheelItem\n              v-for=\"(option, index) in normalizedOptions\"\n              :key=\"index\"\n              :value=\"option.value\"\n              :disabled=\"option.disabled || props.disabledItem(option.value, option)\"\n              :active=\"currentActive === index\"\n              :meta=\"option.meta\"\n              @click=\"handleItemClick(option.value, option.meta)\"\n            >\n              <slot :option=\"option\" :index=\"index\">\n                {{ option.label }}\n              </slot>\n            </WheelItem>\n          </template>\n        </ul>\n      </Scroll>\n      <template v-if=\"props.candidate\">\n        <div :class=\"[nh.be('mask'), nh.bem('mask', 'top')]\" :style=\"maskStyle\"></div>\n        <div :class=\"[nh.be('mask'), nh.bem('mask', 'bottom')]\" :style=\"maskStyle\"></div>\n      </template>\n      <div\n        :class=\"{\n          [nh.be('border')]: true,\n          [nh.bem('border', 'active')]: props.loading,\n          [nh.bem('border', 'vertical')]: props.horizontal\n        }\"\n        :style=\"borderStyle\"\n      ></div>\n    </div>\n    <div\n      v-if=\"props.arrow\"\n      ref=\"nextArrow\"\n      :class=\"[\n        nh.be('arrow'),\n        nh.bem('arrow', 'next'),\n        nextDisabled ? nh.bem('arrow', 'disabled') : ''\n      ]\"\n      @click=\"handleNext\"\n    >\n      <Icon v-bind=\"nextIcon\"></Icon>\n    </div>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Wheel } from '@/components/wheel'\n\nimport { ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { USE_TOUCH, doubleDigits, range } from '@vexip-ui/utils'\n\nimport type { WheelExposed } from '@/components/wheel'\nimport type { PropType } from 'vue'\nimport type { DisabledTime, TimeType } from './symbol'\n\ndefineOptions({ name: 'TimeWheel' })\n\nconst props = defineProps({\n  noArrow: {\n    type: Boolean,\n    default: false\n  },\n  hour: {\n    type: Number,\n    default: 0,\n    validator: (value: number) => value >= 0 && value <= 23\n  },\n  minute: {\n    type: Number,\n    default: 0,\n    validator: (value: number) => value >= 0 && value <= 59\n  },\n  second: {\n    type: Number,\n    default: 0,\n    validator: (value: number) => value >= 0 && value <= 59\n  },\n  candidate: {\n    default: 2 as 0 | 1 | 2 | 3,\n    validator: (value: number) => [0, 1, 2, 3].includes(value)\n  },\n  steps: {\n    type: Array as PropType<number[]>,\n    default: () => [1, 1, 1],\n    validator: (value: [number, number, number]) => {\n      if (value[0] && 24 % value[0] !== 0) {\n        return false\n      }\n\n      for (let i = 1; i < 3; ++i) {\n        if (value[i] && 60 % value[i] !== 0) {\n          return false\n        }\n      }\n\n      return true\n    }\n  },\n  pointer: {\n    type: Boolean,\n    default: USE_TOUCH\n  },\n  disabledTime: {\n    type: Object as PropType<DisabledTime>,\n    default: () => ({})\n  },\n  noTransition: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['change', 'toggle-col', 'update:hour', 'update:minute', 'update:second'])\n\nconst nh = useNameHelper('time-picker')\n\nconst currentHour = ref(props.hour)\nconst currentMinute = ref(props.minute)\nconst currentSecond = ref(props.second)\nconst hourRange = ref<number[]>([])\nconst minuteRange = ref<number[]>([])\nconst secondRange = ref<number[]>([])\n\nconst hourWheel = ref<WheelExposed>()\nconst minuteWheel = ref<WheelExposed>()\nconst secondWheel = ref<WheelExposed>()\n\nwatch(() => props.steps, updateTimeRange, { immediate: true })\nwatch(\n  () => props.hour,\n  value => {\n    currentHour.value = value\n  }\n)\nwatch(\n  () => props.minute,\n  value => {\n    currentMinute.value = value\n  }\n)\nwatch(\n  () => props.second,\n  value => {\n    currentSecond.value = value\n  }\n)\nwatch(currentHour, value => {\n  emit('update:hour', value)\n  emit('change', 'hour', value)\n})\nwatch(currentMinute, value => {\n  emit('update:minute', value)\n  emit('change', 'minute', value)\n})\nwatch(currentSecond, value => {\n  emit('update:second', value)\n  emit('change', 'second', value)\n})\n\ndefineExpose({ refreshWheel })\n\nfunction isHourDisabled(hour: number) {\n  return typeof props.disabledTime.hour === 'function' && props.disabledTime.hour(hour)\n}\n\nfunction isMinuteDisabled(minute: number) {\n  return (\n    typeof props.disabledTime.minute === 'function' &&\n    props.disabledTime.minute(currentHour.value, minute)\n  )\n}\n\nfunction isSecondDisabled(second: number) {\n  return (\n    typeof props.disabledTime.second === 'function' &&\n    props.disabledTime.second(currentHour.value, currentMinute.value, second)\n  )\n}\n\nfunction updateTimeRange() {\n  const [hourStep = 1, minuteStep = 1, secondStep = 1] = props.steps\n\n  hourRange.value = range(24 / hourStep, 0, hourStep)\n  minuteRange.value = range(60 / minuteStep, 0, minuteStep)\n  secondRange.value = range(60 / secondStep, 0, secondStep)\n}\n\nfunction handleToggleColumn(type: TimeType) {\n  emit('toggle-col', type)\n}\n\nfunction refreshWheel() {\n  [hourWheel.value, minuteWheel.value, secondWheel.value].forEach(wheel => {\n    wheel?.refreshScroll()\n  })\n}\n</script>\n\n<template>\n  <div :class=\"nh.be('wheel')\">\n    <Wheel\n      ref=\"hourWheel\"\n      v-model:value=\"currentHour\"\n      inherit\n      :pointer=\"pointer\"\n      :arrow=\"!noArrow\"\n      :candidate=\"candidate\"\n      :options=\"hourRange\"\n      tabindex=\"-1\"\n      :no-transition=\"noTransition\"\n      @mouseenter=\"handleToggleColumn('hour')\"\n      @touchstart=\"handleToggleColumn('hour')\"\n      @keydown.stop\n      @item-click=\"currentHour = $event\"\n    >\n      <template #default=\"{ option }\">\n        <span\n          :class=\"[\n            nh.be('option'),\n            isHourDisabled(option.value as number) && nh.bem('option', 'disabled')\n          ]\"\n        >\n          {{ doubleDigits(option.value as number) }}\n        </span>\n      </template>\n    </Wheel>\n    <Wheel\n      ref=\"minuteWheel\"\n      v-model:value=\"currentMinute\"\n      inherit\n      :pointer=\"pointer\"\n      :arrow=\"!noArrow\"\n      :candidate=\"candidate\"\n      :options=\"minuteRange\"\n      tabindex=\"-1\"\n      :no-transition=\"noTransition\"\n      @mouseenter=\"handleToggleColumn('minute')\"\n      @touchstart=\"handleToggleColumn('minute')\"\n      @keydown.stop\n      @item-click=\"currentMinute = $event\"\n    >\n      <template #default=\"{ option }\">\n        <span\n          :class=\"[\n            nh.be('option'),\n            isMinuteDisabled(option.value as number) && nh.bem('option', 'disabled')\n          ]\"\n        >\n          {{ doubleDigits(option.value as number) }}\n        </span>\n      </template>\n    </Wheel>\n    <Wheel\n      ref=\"secondWheel\"\n      v-model:value=\"currentSecond\"\n      inherit\n      :pointer=\"pointer\"\n      :arrow=\"!noArrow\"\n      :candidate=\"candidate\"\n      :options=\"secondRange\"\n      tabindex=\"-1\"\n      :no-transition=\"noTransition\"\n      @mouseenter=\"handleToggleColumn('second')\"\n      @touchstart=\"handleToggleColumn('second')\"\n      @keydown.stop\n      @item-click=\"currentSecond = $event\"\n    >\n      <template #default=\"{ option }\">\n        <span\n          :class=\"[\n            nh.be('option'),\n            isSecondDisabled(option.value as number) && nh.bem('option', 'disabled')\n          ]\"\n        >\n          {{ doubleDigits(option.value as number) }}\n        </span>\n      </template>\n    </Wheel>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { CalendarPanel } from '@/components/calendar-panel'\nimport { Icon } from '@/components/icon'\n\nimport { computed, onMounted, ref, watch } from 'vue'\n\nimport TimeWheel from './time-wheel.vue'\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport { range as rangeNumbers, toDate } from '@vexip-ui/utils'\nimport { useRtl } from '@vexip-ui/hooks'\nimport { datePickerTypes } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { MonthIndex } from '@/components/calendar'\nimport type { LocaleConfig } from '@vexip-ui/config'\nimport type { Dateable } from '@vexip-ui/utils'\nimport type {\n  DatePickerType,\n  DateShortcut,\n  DateShortcutsPlacement,\n  DateTimeType,\n  DateType,\n  DisabledTime,\n  TimeType\n} from './symbol'\n\ndefineOptions({ name: 'DatePanel' })\n\nconst props = defineProps({\n  type: {\n    default: 'date' as DatePickerType,\n    validator: (value: DatePickerType) => datePickerTypes.includes(value)\n  },\n  enabled: {\n    type: Object as PropType<Record<DateTimeType, boolean>>,\n    default: () => ({})\n  },\n  startValue: {\n    type: Object as PropType<Record<DateTimeType, number>>,\n    default: null\n  },\n  endValue: {\n    type: Object as PropType<Record<DateTimeType, number>>,\n    default: null\n  },\n  shortcuts: {\n    type: Array as PropType<DateShortcut[]>,\n    default: () => []\n  },\n  confirmText: {\n    type: String,\n    default: null\n  },\n  cancelText: {\n    type: String,\n    default: null\n  },\n  today: {\n    type: [Number, String, Date] as PropType<Dateable>,\n    default: () => new Date()\n  },\n  disabledDate: {\n    type: Function as PropType<(date: Date) => boolean>,\n    default: () => false\n  },\n  noAction: {\n    type: Boolean,\n    default: false\n  },\n  steps: {\n    type: Array as PropType<number[]>,\n    default: () => [1, 1, 1]\n  },\n  range: {\n    type: Boolean,\n    default: false\n  },\n  startActivated: {\n    type: Object as PropType<Record<DateTimeType, boolean>>,\n    default: () => ({})\n  },\n  endActivated: {\n    type: Object as PropType<Record<DateTimeType, boolean>>,\n    default: () => ({})\n  },\n  min: {\n    type: [Number, String, Date] as PropType<Dateable>,\n    default: null\n  },\n  max: {\n    type: [Number, String, Date] as PropType<Dateable>,\n    default: null\n  },\n  disabledTime: {\n    type: Object as PropType<DisabledTime>,\n    default: () => ({})\n  },\n  hasError: {\n    type: Boolean,\n    default: false\n  },\n  locale: {\n    type: Object as PropType<LocaleConfig['calendar'] & LocaleConfig['datePicker']>,\n    default: null\n  },\n  selectingType: {\n    type: String as PropType<'start' | 'end'>,\n    default: 'start'\n  },\n  weekStart: {\n    type: Number,\n    default: null\n  },\n  staticWheel: {\n    type: Boolean,\n    default: false\n  },\n  shortcutsPlacement: {\n    type: String as PropType<DateShortcutsPlacement>,\n    default: 'left'\n  }\n})\n\nconst emit = defineEmits([\n  'click',\n  'shortcut',\n  'toggle-col',\n  'change',\n  'cancel',\n  'confirm',\n  'hover',\n  'type-change',\n  'time-change'\n])\n\nconst nh = useNameHelper('date-picker')\nconst icons = useIcons()\nconst { isRtl } = useRtl()\n\nconst today = toDate(props.today)\nconst monthRange = rangeNumbers(12, 1, 1)\n\nconst currentPane = ref<DateType>(\n  props.type === 'year' ? 'year' : props.type === 'month' ? 'month' : 'date'\n)\nconst calendarYear = ref(today.getFullYear())\nconst calendarMonth = ref(today.getMonth() + 1) // 1 ~ 12\nconst hoveredYear = ref(0) // 0 is no hover (falsy)\nconst hoveredMonth = ref(0) // 0 is no hover (falsy)\nconst yearRange = ref<number[]>([])\n\nconst startActivated = computed(() => {\n  const activated = props.startActivated\n\n  return activated.year && activated.month && activated.date\n})\nconst endActivated = computed(() => {\n  const activated = props.endActivated\n\n  return activated.year && activated.month && activated.date\n})\n\nconst isDatetime = computed(() => {\n  return props.type === 'datetime'\n})\nconst calendarValue = computed(() => {\n  return props.range\n    ? startActivated.value || endActivated.value\n      ? [getStringValue('start'), getStringValue('end')]\n      : ['', '']\n    : startActivated.value\n      ? getStringValue('start')\n      : ''\n})\n\nwatch(\n  calendarYear,\n  value => {\n    yearRange.value = rangeNumbers(12, Math.floor(value / 10) * 10, 1)\n  },\n  { immediate: true }\n)\n\nonMounted(() => {\n  refreshCalendar('start')\n})\n\ndefineExpose({ refreshCalendar })\n\nfunction getStringValue(type: 'start' | 'end') {\n  const value = type === 'start' ? props.startValue : props.endValue\n\n  return value ? `${value.year}-${value.month}-${value.date}` : ''\n}\n\nfunction getMonthLabel(index: number) {\n  return props.locale[`month${index as MonthIndex}`]\n}\n\nfunction togglePane(type: DateType) {\n  currentPane.value = type\n}\n\nfunction adjustCalendar(type: 'year' | 'month', amount: number) {\n  if (type === 'year') {\n    calendarYear.value += amount\n  } else {\n    // 月份存在进位\n    calendarMonth.value += amount\n\n    const date = new Date(calendarYear.value, calendarMonth.value - 1, 1)\n\n    calendarYear.value = date.getFullYear()\n    calendarMonth.value = date.getMonth() + 1\n  }\n}\n\nfunction handleClick(event: MouseEvent) {\n  emit('click', event)\n}\n\nfunction handleShortcut(index: number) {\n  let { value, name } = props.shortcuts[index]\n\n  if (typeof value === 'function') {\n    value = value()\n  }\n\n  emit('shortcut', name, value)\n}\n\nfunction handleSelectDate(date: Date) {\n  emitChange([date.getFullYear(), date.getMonth() + 1, date.getDate()])\n}\n\nfunction handleSelectYear(year: number) {\n  if (isDisabledYear(year)) return\n\n  calendarYear.value = year\n\n  if (props.type !== 'year') {\n    togglePane('month')\n  } else {\n    emitChange([year, 1, 1])\n  }\n}\n\nfunction handleSelectMonth(month: number) {\n  if (isDisabledMonth(month)) return\n\n  calendarMonth.value = month\n\n  if (props.type !== 'month') {\n    togglePane('date')\n  } else {\n    emitChange([calendarYear.value, month, 1])\n  }\n}\n\nfunction emitChange(values: number[]) {\n  emit('change', values)\n}\n\nfunction handleStartTimeChange(type: TimeType, time: number) {\n  emit('time-change', 'start', type, time)\n}\n\nfunction handleEndTimeChange(type: TimeType, time: number) {\n  emit('time-change', 'end', type, time)\n}\n\nfunction handleDoublePrevClick() {\n  if (currentPane.value === 'year') {\n    yearRange.value = rangeNumbers(12, yearRange.value[0] - 10, 1)\n  } else {\n    adjustCalendar('year', -1)\n  }\n}\nfunction handleDoubleNextClick() {\n  if (currentPane.value === 'year') {\n    yearRange.value = rangeNumbers(12, yearRange.value[10], 1)\n  } else {\n    adjustCalendar('year', 1)\n  }\n}\n\nfunction handleCancel() {\n  emit('cancel')\n}\n\nfunction handleConfirm() {\n  emit('confirm')\n}\n\nfunction handleHoverDate(date: Date | null) {\n  emit('hover', date)\n}\n\nfunction isSelectedYear(year: number) {\n  if (!year) return false\n\n  return (\n    (props.startActivated.year && props.startValue.year === year) ||\n    (props.endActivated.year && props.endValue.year === year)\n  )\n}\n\nfunction isSelectedMonth(month: number) {\n  if (!month) return false\n\n  const monthYear = 100 * calendarYear.value + month\n\n  return (\n    (props.startActivated.month &&\n      100 * props.startValue.year + props.startValue.month === monthYear) ||\n    (props.endActivated.month && 100 * props.endValue.year + props.endValue.month === monthYear)\n  )\n}\n\nfunction isDisabledYear(year: number) {\n  if (props.type === 'year') {\n    return props.disabledDate(new Date(year, 0))\n  }\n\n  for (let i = 1; i <= 12; ++i) {\n    if (!isDisabledMonth(i, year)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction isDisabledMonth(month: number, year = calendarYear.value) {\n  if (props.type === 'year') return false\n\n  if (props.type === 'month') {\n    return props.disabledDate(new Date(year, month - 1))\n  }\n\n  const current = new Date(year, month - 1)\n  const end = new Date(year, month, 0)\n  const dayCount = end.getDate()\n\n  for (let i = 1; i <= dayCount; ++i) {\n    current.setDate(i)\n\n    if (!props.disabledDate(current)) {\n      return false\n    }\n  }\n\n  return true\n}\n\nfunction handleYearHover(year: number) {\n  hoveredYear.value = isDisabledYear(year) ? 0 : year\n}\n\nfunction handleMonthHover(month: number) {\n  hoveredMonth.value = isDisabledMonth(month) ? 0 : month\n}\n\nfunction isYearInRange(year: number) {\n  if (\n    !props.range ||\n    (!hoveredYear.value && !props.startActivated.year && !props.endActivated.year)\n  ) {\n    return false\n  }\n\n  // if (\n  //   (props.valueType === 'start' && !props.endActivated.year) ||\n  //   (props.valueType === 'end' && !props.startActivated.year)\n  // ) {\n  //   return false\n  // }\n\n  const startYear = props.startValue.year\n  const endYear = props.endValue.year\n\n  let min: number\n  let max: number\n\n  if (!hoveredYear.value && props.startActivated.year && props.endActivated.year) {\n    min = Math.min(startYear, endYear)\n    max = Math.max(startYear, endYear)\n  } else if (hoveredYear.value) {\n    if (!props.startActivated.year && !props.endActivated.year) return false\n\n    if (!props.startActivated.year || !props.endActivated.year) {\n      const selectedYear = props.startActivated.year ? startYear : endYear\n\n      min = Math.min(hoveredYear.value, selectedYear)\n      max = Math.max(hoveredYear.value, selectedYear)\n    } else {\n      const minYear = Math.min(startYear, endYear)\n      const maxYear = Math.max(startYear, endYear)\n\n      min = Math.min(hoveredYear.value, minYear)\n      max = Math.max(hoveredYear.value, maxYear)\n    }\n  } else {\n    return false\n  }\n\n  return year >= min && year <= max\n}\n\nfunction isMonthInRange(month: number) {\n  if (\n    !props.range ||\n    (!hoveredMonth.value && !props.startActivated.month && !props.endActivated.month)\n  ) {\n    return false\n  }\n\n  // if (\n  //   (props.valueType === 'start' && !props.endActivated.month) ||\n  //   (props.valueType === 'end' && !props.startActivated.month)\n  // ) {\n  //   return false\n  // }\n\n  const startMonthYear = 100 * props.startValue.year + props.startValue.month\n  const endMonthYear = 100 * props.endValue.year + props.endValue.month\n\n  let min: number\n  let max: number\n\n  if (!hoveredMonth.value && props.startActivated.month && props.endActivated.month) {\n    min = Math.min(startMonthYear, endMonthYear)\n    max = Math.max(startMonthYear, endMonthYear)\n  } else if (hoveredMonth.value) {\n    if (!props.startActivated.month && !props.endActivated.month) return false\n\n    const hoveredMonthYear = 100 * calendarYear.value + hoveredMonth.value\n\n    if (!props.startActivated.month || !props.endActivated.month) {\n      const selectedMonthYear = props.startActivated.month ? startMonthYear : endMonthYear\n\n      min = Math.min(hoveredMonthYear, selectedMonthYear)\n      max = Math.max(hoveredMonthYear, selectedMonthYear)\n    } else {\n      const minMonthYear = Math.min(startMonthYear, endMonthYear)\n      const maxMonthYear = Math.max(startMonthYear, endMonthYear)\n\n      min = Math.min(hoveredMonthYear, minMonthYear)\n      max = Math.max(hoveredMonthYear, maxMonthYear)\n    }\n  } else {\n    return false\n  }\n\n  const monthYear = 100 * calendarYear.value + month\n\n  return monthYear >= min && monthYear <= max\n}\n\n// 重新计算日历页面\nfunction refreshCalendar(valueType: 'start' | 'end') {\n  const today = toDate(props.today)\n\n  if (valueType === 'start') {\n    calendarYear.value = props.startActivated.year ? props.startValue.year : today.getFullYear()\n    calendarMonth.value = props.startActivated.month ? props.startValue.month : today.getMonth() + 1\n  } else {\n    calendarYear.value = props.endActivated.year ? props.endValue.year : today.getFullYear()\n    calendarMonth.value = props.endActivated.month ? props.endValue.month : today.getMonth() + 1\n  }\n}\n</script>\n\n<template>\n  <div\n    :class=\"{\n      [nh.be('panel')]: true,\n      [nh.bem('panel', 'vertical')]:\n        shortcuts.length && (shortcutsPlacement === 'top' || shortcutsPlacement === 'bottom')\n    }\"\n    @click=\"handleClick\"\n  >\n    <div\n      v-if=\"shortcuts.length\"\n      :class=\"[\n        nh.be('list'),\n        nh.bem('list', 'sub'),\n        nh.be('shortcuts'),\n        nh.bem('shortcuts', shortcutsPlacement)\n      ]\"\n    >\n      <div\n        v-for=\"(item, index) in shortcuts\"\n        :key=\"index\"\n        :class=\"nh.be('shortcut')\"\n        :title=\"item.name\"\n        @click=\"handleShortcut(index)\"\n      >\n        {{ item.name }}\n      </div>\n    </div>\n    <div :class=\"nh.be('list')\">\n      <div :class=\"nh.be('panel-body')\">\n        <div :class=\"nh.be('date-panel')\">\n          <div :class=\"nh.be('header')\">\n            <div :class=\"[nh.be('arrow'), nh.be('prev-year')]\" @click=\"handleDoublePrevClick\">\n              <Icon v-bind=\"isRtl ? icons.anglesRight : icons.anglesLeft\"></Icon>\n            </div>\n            <div\n              v-show=\"currentPane === 'date'\"\n              :class=\"[nh.be('arrow'), nh.be('prev-month')]\"\n              @click=\"adjustCalendar('month', -1)\"\n            >\n              <Icon v-bind=\"isRtl ? icons.angleRight : icons.angleLeft\"></Icon>\n            </div>\n            <div :class=\"nh.be('year-month')\">\n              <div key=\"year\" :class=\"nh.be('year')\" @click.stop=\"togglePane('year')\">\n                <template v-if=\"currentPane === 'year'\">\n                  {{ `${yearRange[0]}${locale.year} - ${yearRange[9]}${locale.year}` }}\n                </template>\n                <template v-else>\n                  {{ `${calendarYear}${locale.year}` }}\n                </template>\n              </div>\n              <div\n                v-show=\"currentPane === 'date'\"\n                :class=\"nh.be('month')\"\n                @click.stop=\"togglePane('month')\"\n              >\n                {{ getMonthLabel(calendarMonth) }}\n              </div>\n            </div>\n            <div\n              v-show=\"currentPane === 'date'\"\n              :class=\"[nh.be('arrow'), nh.be('next-month')]\"\n              @click=\"adjustCalendar('month', 1)\"\n            >\n              <Icon v-bind=\"isRtl ? icons.angleLeft : icons.angleRight\"></Icon>\n            </div>\n            <div :class=\"[nh.be('arrow'), nh.be('next-year')]\" @click=\"handleDoubleNextClick\">\n              <Icon v-bind=\"isRtl ? icons.anglesLeft : icons.anglesRight\"></Icon>\n            </div>\n          </div>\n          <div :class=\"nh.be('calendar')\">\n            <div\n              v-if=\"currentPane === 'year'\"\n              :class=\"nh.be('year-panel')\"\n              @mouseleave=\"hoveredYear = 0\"\n            >\n              <div\n                v-for=\"(item, index) in yearRange\"\n                :key=\"index\"\n                :class=\"{\n                  [nh.be('year-item')]: true,\n                  [nh.bem('year-item', 'selected')]: isSelectedYear(item),\n                  [nh.bem('year-item', 'next')]: index > 9,\n                  [nh.bem('year-item', 'disabled')]: isDisabledYear(item),\n                  [nh.bem('year-item', 'in-range')]: isYearInRange(item)\n                }\"\n                @click.stop=\"handleSelectYear(item)\"\n                @mouseenter=\"handleYearHover(item)\"\n              >\n                <div :class=\"nh.be('year-label')\">\n                  <div :class=\"nh.be('year-label-inner')\">\n                    {{ item }}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div\n              v-else-if=\"currentPane === 'month'\"\n              :class=\"nh.be('month-panel')\"\n              @mouseleave=\"hoveredMonth = 0\"\n            >\n              <div\n                v-for=\"index in monthRange\"\n                :key=\"index\"\n                :class=\"{\n                  [nh.be('month-item')]: true,\n                  [nh.bem('month-item', 'selected')]: isSelectedMonth(index),\n                  [nh.bem('month-item', 'disabled')]: isDisabledMonth(index),\n                  [nh.bem('month-item', 'in-range')]: isMonthInRange(index)\n                }\"\n                @click.stop=\"handleSelectMonth(index)\"\n                @mouseenter=\"handleMonthHover(index)\"\n              >\n                <div :class=\"nh.be('month-label')\">\n                  <div :class=\"nh.be('month-label-inner')\">\n                    {{ getMonthLabel(index) }}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <CalendarPanel\n              v-else\n              inherit\n              :value=\"calendarValue\"\n              :year=\"calendarYear\"\n              :month=\"calendarMonth\"\n              :value-type=\"selectingType\"\n              :disabled-date=\"disabledDate\"\n              :range=\"range\"\n              :min=\"min\"\n              :max=\"max\"\n              :week-start=\"weekStart\"\n              @select=\"handleSelectDate\"\n              @hover=\"handleHoverDate\"\n            ></CalendarPanel>\n          </div>\n        </div>\n        <div v-if=\"isDatetime\" :class=\"nh.be('time-panel')\">\n          <div :class=\"[nh.be('header'), nh.bem('header', 'time')]\">\n            <template v-if=\"range\">\n              <div :class=\"nh.be('title')\">\n                {{ locale.startTime }}\n              </div>\n              <div :class=\"nh.be('title')\">\n                {{ locale.endTime }}\n              </div>\n            </template>\n          </div>\n          <div :class=\"nh.be('wheel')\">\n            <TimeWheel\n              :hour=\"startValue.hour\"\n              :minute=\"startValue.minute\"\n              :second=\"startValue.second\"\n              :candidate=\"3\"\n              :steps=\"steps\"\n              :disabled-time=\"disabledTime\"\n              :no-transition=\"staticWheel\"\n              @change=\"handleStartTimeChange\"\n            ></TimeWheel>\n            <TimeWheel\n              v-if=\"range\"\n              :hour=\"endValue.hour\"\n              :minute=\"endValue.minute\"\n              :second=\"endValue.second\"\n              :candidate=\"3\"\n              :steps=\"steps\"\n              :disabled-time=\"disabledTime\"\n              :no-transition=\"staticWheel\"\n              @change=\"handleEndTimeChange\"\n            ></TimeWheel>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"!noAction\" :class=\"nh.be('action')\">\n        <Button\n          inherit\n          text\n          size=\"small\"\n          @click=\"handleCancel\"\n        >\n          {{ cancelText || locale.cancel }}\n        </Button>\n        <Button\n          inherit\n          type=\"primary\"\n          size=\"small\"\n          :disabled=\"hasError\"\n          @click=\"handleConfirm\"\n        >\n          {{ confirmText || locale.confirm }}\n        </Button>\n      </div>\n    </div>\n  </div>\n</template>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  localeProp,\n  sizeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps, EventListener, LocaleConfig } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { Dateable } from '@vexip-ui/utils'\nimport type {\n  DatePickerChangeEvent,\n  DatePickerFormatFn,\n  DatePickerType,\n  DateShortcut,\n  DateShortcutsPlacement,\n  DateTimeType,\n  TimePickerChangeEvent,\n  TimeShortcut,\n  TimeShortcutsPlacement,\n  TimeType\n} from './symbol'\n\nexport interface DatePickerShortcutEvent {\n  (name: string, value: Dateable | Dateable[]): void,\n  (name: string, value: Dateable): void,\n  (name: string, value: Dateable[]): void\n}\n\nexport const datePickerProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: Object as PropType<Partial<LocaleConfig['calendar'] & LocaleConfig['datePicker']>>,\n  type: String as PropType<DatePickerType>,\n  visible: booleanProp,\n  placement: String as PropType<Placement>,\n  transfer: booleanStringProp,\n  value: [Number, String, Date, Array] as PropType<Dateable | Dateable[]>,\n  format: String,\n  valueFormat: [String, Array, Function] as PropType<string | string[] | DatePickerFormatFn>,\n  filler: String,\n  clearable: booleanProp,\n  noAction: booleanProp,\n  labels: Object as PropType<Partial<Record<DateTimeType, string>>>,\n  dateSeparator: String,\n  timeSeparator: String,\n  shortcuts: Array as PropType<DateShortcut[]>,\n  disabledDate: Function as PropType<(date: Date) => boolean>,\n  steps: Array as PropType<number[]>,\n  ctrlSteps: Array as PropType<number[]>,\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  noSuffix: booleanProp,\n  disabled: booleanProp,\n  transitionName: String,\n  confirmText: String,\n  cancelText: String,\n  today: [Number, String, Date] as PropType<Dateable>,\n  range: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  min: [Number, String, Date] as PropType<Dateable>,\n  max: [Number, String, Date] as PropType<Dateable>,\n  outsideClose: booleanProp,\n  outsideCancel: booleanProp,\n  placeholder: [String, Array] as PropType<string | string[]>,\n  unitReadonly: booleanProp,\n  weekStart: Number,\n  popperAlive: booleanProp,\n  shortcutsPlacement: String as PropType<DateShortcutsPlacement>,\n  onInput: eventProp<(type: DateTimeType, value: number) => void>(),\n  onPlus: eventProp<(type: DateTimeType, value: number) => void>(),\n  onMinus: eventProp<(type: DateTimeType, value: number) => void>(),\n  onEnter: eventProp(),\n  onCancel: eventProp(),\n  onChange: eventProp<EventListener<DatePickerChangeEvent>>(),\n  onClear: eventProp(),\n  onShortcut: eventProp<DatePickerShortcutEvent>(),\n  onToggle: eventProp<(visible: boolean) => void>(),\n  onFocus: eventProp(),\n  onBlur: eventProp(),\n  onChangeCol: eventProp<(type: DateTimeType | null, inputType: 'start' | 'end') => void>(),\n  onClickOutside: eventProp(),\n  onOutsideClose: eventProp()\n})\n\nexport type DatePickerProps = ExtractPropTypes<typeof datePickerProps>\nexport type DatePickerCProps = ConfigurableProps<DatePickerProps>\n\nexport interface TimePickerShortcutEvent {\n  (name: string, value: string | string[]): void,\n  (name: string, value: string): void,\n  (name: string, value: string[]): void\n}\n\nexport const timePickerProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  locale: localeProp('timePicker'),\n  visible: booleanProp,\n  placement: String as PropType<Placement>,\n  transfer: booleanStringProp,\n  format: String,\n  separator: String,\n  value: [String, Array] as PropType<string | string[]>,\n  filler: String,\n  clearable: booleanProp,\n  noAction: booleanProp,\n  noArrow: booleanProp,\n  pointer: booleanProp,\n  candidate: Number as PropType<0 | 1 | 2 | 3>,\n  steps: Array as PropType<number[]>,\n  labels: Object as PropType<Partial<Record<TimeType, string>>>,\n  shortcuts: Array as PropType<TimeShortcut[]>,\n  range: booleanProp,\n  disabled: booleanProp,\n  transitionName: String,\n  confirmText: String,\n  cancelText: String,\n  ctrlSteps: Array as PropType<number[]>,\n  prefix: iconProp,\n  prefixColor: String,\n  suffix: iconProp,\n  suffixColor: String,\n  noSuffix: booleanProp,\n  exchange: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  min: String,\n  max: String,\n  outsideClose: booleanProp,\n  outsideCancel: booleanProp,\n  unitReadonly: booleanProp,\n  popperAlive: booleanProp,\n  shortcutsPlacement: String as PropType<TimeShortcutsPlacement>,\n  onInput: eventProp<(type: TimeType, value: number) => void>(),\n  onPlus: eventProp<(type: TimeType, value: number) => void>(),\n  onMinus: eventProp<(type: TimeType, value: number) => void>(),\n  onEnter: eventProp(),\n  onCancel: eventProp(),\n  onChange: eventProp<EventListener<TimePickerChangeEvent>>(),\n  onClear: eventProp(),\n  onShortcut: eventProp<TimePickerShortcutEvent>(),\n  onToggle: eventProp<(visible: boolean) => void>(),\n  onFocus: eventProp(),\n  onBlur: eventProp(),\n  onChangeCol: eventProp<(type: TimeType | null, inputType: 'start' | 'end') => void>(),\n  onClickOutside: eventProp(),\n  onOutsideClose: eventProp(),\n  placeholder: [String, Array] as PropType<string | string[]>\n})\n\nexport type TimePickerProps = ExtractPropTypes<typeof timePickerProps>\nexport type TimePickerCProps = ConfigurableProps<TimePickerProps>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Popper } from '@/components/popper'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, nextTick, reactive, ref, toRef, watch } from 'vue'\n\nimport DateControl from './date-control.vue'\nimport DatePanel from './date-panel.vue'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  makeSentence,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps,\n  useWordSpace\n} from '@vexip-ui/config'\nimport {\n  placementWhileList,\n  useClickOutside,\n  useHover,\n  usePopper,\n  useSetTimeout\n} from '@vexip-ui/hooks'\nimport {\n  boundRange,\n  differenceDays,\n  doubleDigits,\n  format,\n  getTime,\n  isLeapYear,\n  startOfMonth,\n  toDate,\n  toFalse\n} from '@vexip-ui/utils'\nimport { datePickerProps } from './props'\nimport { useColumn, useTimeBound } from './helper'\nimport { datePickerTypes, invalidDate } from './symbol'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { Dateable } from '@vexip-ui/utils'\nimport type { DatePickerChangeEvent, DatePickerFormatFn, DateTimeType, TimeType } from './symbol'\n\ndefineOptions({ name: 'DatePicker' })\n\nconst {\n  idFor,\n  state,\n  disabled,\n  loading,\n  size,\n  validateField,\n  clearField,\n  getFieldValue,\n  setFieldValue\n} = useFieldStore<Dateable | Dateable[]>(() => reference.value?.focus())\n\nconst nh = useNameHelper('date-picker')\n\nconst _props = defineProps(datePickerProps)\nconst props = useProps('datePicker', _props, {\n  size: createSizeProp(size),\n  state: createStateProp(state),\n  locale: null,\n  type: {\n    default: 'date',\n    validator: value => datePickerTypes.includes(value)\n  },\n  visible: false,\n  placement: {\n    default: 'bottom-start',\n    validator: value => placementWhileList.includes(value)\n  },\n  transfer: false,\n  value: {\n    default: () => getFieldValue(null!),\n    static: true\n  },\n  format: 'yyyy-MM-dd HH:mm:ss',\n  valueFormat: null,\n  filler: {\n    default: '-',\n    validator: value => value.length === 1\n  },\n  clearable: false,\n  noAction: false,\n  labels: () => ({}),\n  dateSeparator: '/',\n  timeSeparator: ':',\n  shortcuts: () => [],\n  disabledDate: {\n    default: toFalse,\n    isFunc: true\n  },\n  steps: () => [1, 1, 1],\n  ctrlSteps: () => [5, 5, 5],\n  prefix: createIconProp(),\n  prefixColor: '',\n  suffix: createIconProp(),\n  suffixColor: '',\n  noSuffix: false,\n  disabled: () => disabled.value,\n  transitionName: () => nh.ns('drop'),\n  confirmText: null,\n  cancelText: null,\n  today: {\n    default: () => new Date(),\n    validator: value => !Number.isNaN(new Date(value))\n  },\n  range: null,\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  min: null,\n  max: null,\n  outsideClose: true,\n  outsideCancel: false,\n  placeholder: null,\n  unitReadonly: false,\n  weekStart: null,\n  popperAlive: null,\n  shortcutsPlacement: 'left'\n})\n\nconst emit = defineEmits(['update:value', 'update:formatted-value', 'update:visible'])\n\nconst slots = defineSlots<{\n  prefix: () => any,\n  exchange: () => any,\n  suffix: () => any\n}>()\n\nconst calendarLocale = useLocale('calendar')\nconst datePickerLocale = useLocale('datePicker')\nconst icons = useIcons()\nconst wordSpace = useWordSpace()\n\nconst placement = toRef(props, 'placement')\nconst transfer = toRef(props, 'transfer')\nconst currentVisible = ref(props.visible)\nconst focused = ref(false)\nconst startState = createDateState()\nconst endState = createDateState()\nconst currentState = ref<'start' | 'end'>('start')\nconst lastValue = ref('')\nconst firstSelected = ref<number[] | undefined>()\nconst hoveredDate = ref(new Date())\nconst staticWheel = ref(false)\n\nconst { timer } = useSetTimeout()\n\nconst wrapper = useClickOutside(handleClickOutside)\nconst popper = ref<PopperExposed>()\nconst { reference, transferTo, updatePopper } = usePopper({\n  placement,\n  transfer,\n  wrapper,\n  popper: computed(() => popper.value?.wrapper),\n  isDrop: true\n})\nconst { isHover } = useHover(reference)\n\nconst startInput = ref<InstanceType<typeof DateControl>>()\nconst endInput = ref<InstanceType<typeof DateControl>>()\nconst datePanel = ref<InstanceType<typeof DatePanel>>()\n\nconst mergedLocale = computed(() => {\n  return {\n    ...calendarLocale.value,\n    ...datePickerLocale.value,\n    ...(props.locale ?? {})\n  }\n})\nconst startPlaceholder = computed(() => {\n  if (props.placeholder) {\n    return Array.isArray(props.placeholder) ? props.placeholder[0] : props.placeholder\n  }\n\n  const { select, start, [props.type]: type } = mergedLocale.value.placeholder\n\n  return makeSentence(props.range ? `${start} ${type}` : `${select} ${type}`, wordSpace.value)\n})\nconst endPlaceholder = computed(() => {\n  if (props.placeholder) {\n    return Array.isArray(props.placeholder)\n      ? props.placeholder[1] || props.placeholder[0]\n      : props.placeholder\n  }\n\n  const { end, [props.type]: type } = mergedLocale.value.placeholder\n\n  return makeSentence(`${end} ${type}`, wordSpace.value)\n})\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.ns('input-vars'),\n    nh.bs('vars'),\n    nh.bm(props.type),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('disabled')]: props.disabled,\n      [nh.bm(props.size)]: props.size !== 'default',\n      [nh.bm('no-hour')]: !startState.enabled.hour,\n      [nh.bm('no-minute')]: !startState.enabled.minute,\n      [nh.bm('no-second')]: !startState.enabled.second,\n      [nh.bm('visible')]: currentVisible.value,\n      [nh.bm(props.state)]: props.state !== 'default',\n      [nh.bm('is-range')]: props.range\n    }\n  ]\n})\nconst readonly = computed(() => props.loading && props.loadingLock)\nconst selectorClass = computed(() => {\n  const baseCls = nh.be('selector')\n\n  return {\n    [baseCls]: true,\n    [`${baseCls}--disabled`]: props.disabled,\n    [`${baseCls}--readonly`]: readonly.value,\n    [`${baseCls}--loading`]: props.loading,\n    [`${baseCls}--${props.size}`]: props.size !== 'default',\n    [`${baseCls}--focused`]: focused.value,\n    [`${baseCls}--${props.state}`]: props.state !== 'default'\n  }\n})\nconst hasPrefix = computed(() => {\n  return !!(slots.prefix || props.prefix)\n})\nconst currentValue = computed(() => {\n  const values = [startState, endState].map(state => {\n    const values = Object.values(state.dateValue).map(doubleDigits)\n\n    return `${values.slice(0, 3).join('-')} ${values.slice(3).join(':')}`\n  })\n\n  return props.range ? values : values[0]\n})\nconst hoveredLarge = computed(() => {\n  if (!firstSelected.value) return false\n\n  const [year, month, date] = firstSelected.value\n  const firstTime = new Date(`${year}-${month}-${date}`).getTime()\n  const hoverTime = hoveredDate.value.getTime()\n\n  return firstTime < hoverTime\n})\nconst showClear = computed(() => {\n  return !props.disabled && !readonly.value && props.clearable && isHover.value && !!lastValue.value\n})\nconst min = computed(() => {\n  if (props.min) {\n    const date = rawValueToDate(props.min, invalidDate)\n\n    if (Number.isNaN(+date)) return -Infinity\n\n    date.setHours(0, 0, 0, 0)\n\n    return date.getTime()\n  }\n\n  return -Infinity\n})\nconst max = computed(() => {\n  if (props.max) {\n    let date = rawValueToDate(props.max, invalidDate)\n\n    if (Number.isNaN(+date)) return Infinity\n\n    if (props.type !== 'datetime') {\n      date.setHours(23, 59, 59, 999)\n\n      if (props.type === 'year') {\n        date.setMonth(11)\n        date.setDate(31)\n      } else if (props.type === 'month') {\n        date.setMonth(date.getMonth() + 1)\n        date = startOfMonth(date)\n        date.setDate(date.getDate() - 1)\n      }\n    }\n\n    return date.getTime()\n  }\n\n  return Infinity\n})\nconst reversed = computed(() => {\n  if (Number.isNaN(min.value) || Number.isNaN(max.value)) {\n    return false\n  }\n\n  return min.value > max.value\n})\nconst startMinTime = computed(() => {\n  if (props.type === 'datetime' && props.min && !differenceDays(props.min, startState.getDate())) {\n    return getTime(props.min)\n  }\n\n  return ''\n})\nconst startMaxTime = computed(() => {\n  if (props.type === 'datetime' && props.max && !differenceDays(props.max, startState.getDate())) {\n    return getTime(props.max)\n  }\n\n  return ''\n})\nconst endMinTime = computed(() => {\n  if (\n    props.type === 'datetime' &&\n    props.range &&\n    props.min &&\n    !differenceDays(props.min, startState.getDate())\n  ) {\n    return getTime(props.min)\n  }\n\n  return ''\n})\nconst endMaxTime = computed(() => {\n  if (\n    props.type === 'datetime' &&\n    props.range &&\n    props.max &&\n    !differenceDays(props.max, startState.getDate())\n  ) {\n    return getTime(props.max)\n  }\n\n  return ''\n})\nconst startReversed = computed(() => {\n  if (!props.range) return false\n\n  const startValue = startState.dateValue\n  const endValue = endState.dateValue\n\n  let types: DateTimeType[]\n\n  if (props.type === 'year') {\n    types = ['year']\n  } else if (props.type === 'month') {\n    types = ['year', 'month']\n  } else if (props.type === 'date') {\n    types = ['year', 'month', 'date']\n  } else {\n    types = ['year', 'month', 'date', 'hour', 'minute', 'second']\n  }\n\n  for (const type of types) {\n    if (startValue[type] < endValue[type]) return false\n    if (startValue[type] > endValue[type]) return true\n  }\n\n  return false\n})\n\nconst startTimeBound = useTimeBound(startMinTime, startMaxTime)\nconst endTimeBound = useTimeBound(endMinTime, endMaxTime)\n\nconst isTimeDisabled = computed(() => {\n  return currentState.value === 'start'\n    ? startTimeBound.isTimeDisabled\n    : endTimeBound.isTimeDisabled\n})\nconst startError = computed(() => {\n  const { hour, minute, second } = startState.dateValue\n  const { isTimeDisabled } = startTimeBound\n\n  return (\n    startReversed.value ||\n    isDateDisabled(startState.getDate()) ||\n    isTimeDisabled.hour(hour) ||\n    isTimeDisabled.minute(hour, minute) ||\n    isTimeDisabled.second(hour, minute, second)\n  )\n})\nconst endError = computed(() => {\n  if (!props.range) return false\n\n  const { hour, minute, second } = endState.dateValue\n  const { isTimeDisabled } = endTimeBound\n\n  return (\n    startReversed.value ||\n    isDateDisabled(endState.getDate()) ||\n    isTimeDisabled.hour(hour) ||\n    isTimeDisabled.minute(hour, minute) ||\n    isTimeDisabled.second(hour, minute, second)\n  )\n})\nconst noActionMode = computed(() => props.type !== 'datetime' && props.noAction)\n\nwatch(() => props.type, parseFormat)\nwatch(\n  () => props.value,\n  value => {\n    parseValue(value)\n\n    lastValue.value = (Array.isArray(value) ? value[0] || value[1] : value) ? getStringValue() : ''\n  },\n  { immediate: true }\n)\nwatch(\n  () => props.type,\n  value => {\n    const hasMonth = value !== 'year'\n    const hasDate = hasMonth && value !== 'month'\n\n    startState.enabled.year = true\n    endState.enabled.year = true\n    startState.enabled.month = hasMonth\n    endState.enabled.month = hasMonth\n    startState.enabled.date = hasDate\n    endState.enabled.date = hasDate\n  },\n  { immediate: true }\n)\nwatch(() => props.format, parseFormat, { immediate: true })\nwatch(\n  () => props.visible,\n  value => {\n    currentVisible.value = value\n  }\n)\nwatch(currentVisible, value => {\n  if (value) {\n    updatePopper()\n  }\n})\nwatch(focused, value => {\n  if (value) {\n    emitEvent(props.onFocus)\n  } else {\n    emitEvent(props.onBlur)\n  }\n})\nwatch(currentState, value => {\n  if (!props.unitReadonly && currentVisible.value) {\n    emitEvent(props.onChangeCol, getCurrentState().column, value)\n  }\n})\nwatch(\n  () => startState.column,\n  value => {\n    if (!props.unitReadonly && currentVisible.value && currentState.value === 'start') {\n      emitEvent(props.onChangeCol, value, 'start')\n    }\n  }\n)\nwatch(\n  () => endState.column,\n  value => {\n    if (!props.unitReadonly && currentVisible.value && currentState.value === 'end') {\n      emitEvent(props.onChangeCol, value, 'end')\n    }\n  }\n)\nwatch(\n  () => props.disabled,\n  value => {\n    if (value) {\n      setVisible(false)\n      handleBlur()\n    }\n  }\n)\nwatch(readonly, value => {\n  if (value) {\n    setVisible(false)\n  }\n})\n\ndefineExpose({\n  idFor,\n  currentVisible,\n  focused,\n  isHover,\n  startState,\n  endState,\n  currentState,\n  startError,\n  endError,\n  wrapper,\n  reference,\n  popper,\n  start: startInput,\n  end: endInput,\n  panel: datePanel,\n  updatePopper,\n  focus: (options?: FocusOptions) => reference.value?.focus(options),\n  blur: () => reference.value?.blur()\n})\n\nfunction createDateState() {\n  // const noFiller = props.noFiller\n  const { currentColumn, enabled, resetColumn, enterColumn } = useColumn([\n    'year',\n    'month',\n    'date',\n    'hour',\n    'minute',\n    'second'\n  ] as DateTimeType[])\n\n  const dateValue = reactive({\n    year: 1970,\n    month: 1, // 1 ~ 12\n    date: 1,\n    hour: 0,\n    minute: 0,\n    second: 0\n  })\n  const activated = reactive({\n    year: false,\n    month: false,\n    date: false,\n    hour: false,\n    minute: false,\n    second: false\n  })\n\n  let valueRecord = { ...dateValue }\n  let activatedRecord = { ...activated }\n\n  return reactive({\n    column: currentColumn,\n    enabled,\n    activated,\n    dateValue,\n    resetColumn,\n    enterColumn,\n    setDate: (date: Date, withTime = true) => {\n      dateValue.year = date.getFullYear()\n      dateValue.month = date.getMonth() + 1\n      dateValue.date = date.getDate()\n\n      if (withTime) {\n        dateValue.hour = date.getHours()\n        dateValue.minute = date.getMinutes()\n        dateValue.second = date.getSeconds()\n      }\n    },\n    getDate: () => {\n      return new Date(\n        dateValue.year,\n        dateValue.month - 1,\n        dateValue.date,\n        dateValue.hour,\n        dateValue.minute,\n        dateValue.second\n      )\n    },\n    record() {\n      valueRecord = { ...dateValue }\n      activatedRecord = { ...activated }\n    },\n    restore() {\n      Object.assign(dateValue, valueRecord)\n      Object.assign(activated, activatedRecord)\n    }\n  })\n}\n\nfunction getCurrentState() {\n  return currentState.value === 'start' ? startState : endState\n}\n\nfunction rawValueToDate(value: Dateable, defaultValue = new Date(props.today)) {\n  let date!: Date\n\n  if (typeof value === 'number') {\n    if (props.type === 'year') {\n      if (value < 3000) {\n        date = new Date(value, 1)\n      } else {\n        date = toDate(value)\n      }\n    } else if (props.type === 'month') {\n      if (value < 300000) {\n        const year = Math.floor(value / 100)\n        const month = value - year * 100\n\n        date = new Date(year, month - 1)\n      } else {\n        date = toDate(value)\n      }\n    } else {\n      date = toDate(value)\n    }\n  } else {\n    date = toDate(value)\n  }\n\n  if (Number.isNaN(date.getTime())) {\n    date = defaultValue\n  }\n\n  return date\n}\n\nfunction parseValue<T extends Dateable | null>(value: T | T[]) {\n  if (!Array.isArray(value)) {\n    value = [value, value]\n  }\n\n  for (let i = 0; i < 2; ++i) {\n    const date = rawValueToDate(value[i] ?? '')\n    const state = i === 0 ? startState : endState\n\n    state.setDate(date)\n    toggleActivated(!!value[i], i === 0 ? 'start' : 'end')\n\n    if (!props.range) break\n  }\n}\n\nfunction parseFormat() {\n  const isDatetime = props.type === 'datetime'\n\n  ;[startState, endState].forEach(state => {\n    state.enabled.hour = false\n    state.enabled.minute = false\n    state.enabled.second = false\n\n    if (isDatetime && props.format) {\n      // to ignore 'H', 'm' and 's'\n      let inQuotation = false\n\n      for (let i = 0, len = props.format.length; i < len; ++i) {\n        const char = props.format.charAt(i)\n\n        if (char === \"'\") {\n          inQuotation = !inQuotation\n        } else if (!inQuotation) {\n          switch (char) {\n            case 'H':\n              state.enabled.hour = true\n              break\n            case 'm':\n              state.enabled.minute = true\n              break\n            case 's':\n              state.enabled.second = true\n              break\n          }\n        }\n      }\n    }\n  })\n}\n\nfunction toggleActivated(value: boolean, valueType?: 'start' | 'end') {\n  const states = valueType\n    ? valueType === 'start'\n      ? [startState]\n      : [endState]\n    : [startState, endState]\n\n  states.forEach(state => {\n    ;(Object.keys(state.activated) as DateTimeType[]).forEach(type => {\n      state.activated[type] = value\n    })\n  })\n}\n\nfunction getStringValue() {\n  return Array.isArray(currentValue.value) ? currentValue.value.join('|') : currentValue.value\n}\n\nfunction isDateDisabled(date: Date) {\n  if (typeof props.disabledDate === 'function') {\n    if (props.disabledDate(date)) {\n      return true\n    }\n  }\n\n  const time = date.getTime()\n\n  if (reversed.value) {\n    if (time > max.value && time < min.value) {\n      return true\n    }\n  } else {\n    if (time < min.value || time > max.value) {\n      return true\n    }\n  }\n\n  return false\n}\n\nfunction verifyDate() {\n  if (startError.value || (props.range && endError.value)) {\n    parseValue(props.value)\n  }\n}\n\nfunction setVisible(visible: boolean) {\n  if (currentVisible.value === visible) return\n\n  currentVisible.value = visible\n\n  emit('update:visible', visible)\n  emitEvent(props.onToggle, visible)\n}\n\nfunction emitChange() {\n  verifyDate()\n\n  if (lastValue.value !== getStringValue()) {\n    lastValue.value = getStringValue()\n\n    const values = Array.isArray(currentValue.value) ? currentValue.value : [currentValue.value]\n    const emitValues: number[] = []\n    const formattedValues: unknown[] = []\n\n    const valueFormat = props.valueFormat\n    const formatValue: DatePickerFormatFn =\n      typeof valueFormat === 'function'\n        ? valueFormat\n        : valueFormat\n          ? (timestamp, type) =>\n              format(\n                timestamp,\n                !Array.isArray(valueFormat)\n                  ? valueFormat\n                  : type === 'start'\n                    ? valueFormat[0]\n                    : valueFormat[1]\n              )\n          : timestamp => timestamp\n\n    for (let i = 0; i < 2; ++i) {\n      if (props.type === 'year') {\n        emitValues[i] = new Date(\n          i === 0 ? startState.dateValue.year : endState.dateValue.year,\n          0\n        ).getTime()\n      } else if (props.type !== 'datetime') {\n        emitValues[i] = new Date(values[i].split(' ')[0] + ' 00:00:00').getTime()\n      } else {\n        emitValues[i] = new Date(values[i]).getTime()\n      }\n\n      formattedValues[i] = formatValue(emitValues[i], i === 0 ? 'start' : 'end')\n\n      if (!props.range) break\n    }\n\n    const emitValue = props.range ? emitValues : emitValues[0]\n    const formattedValue = props.range ? formattedValues : formattedValues[0]\n\n    toggleActivated(true)\n    emit('update:value', emitValue)\n    emit('update:formatted-value', formattedValue)\n    setFieldValue(emitValue)\n    emitEvent(props.onChange as DatePickerChangeEvent, emitValue)\n    validateField()\n  }\n}\n\nfunction finishInput(shouldChange = true) {\n  setVisible(false)\n\n  shouldChange && emitChange()\n  startState.resetColumn()\n  endState.resetColumn()\n}\n\nfunction verifyValue(type: DateTimeType) {\n  const dateValue = getCurrentState().dateValue\n\n  switch (type) {\n    case 'year': {\n      dateValue.year = boundRange(dateValue.year, 1970, 9999)\n      break\n    }\n    case 'month': {\n      dateValue.month = boundRange(dateValue.month, 1, 12)\n      break\n    }\n    case 'date': {\n      const month = dateValue.month\n\n      let lastDay\n\n      if (month < 7) {\n        if (month !== 2) {\n          lastDay = 30 + (month % 2)\n        } else {\n          if (isLeapYear(dateValue.year)) {\n            lastDay = 29\n          } else {\n            lastDay = 28\n          }\n        }\n      } else {\n        lastDay = 31 - (month % 2)\n      }\n\n      dateValue.date = boundRange(dateValue.date, 1, lastDay)\n      break\n    }\n    case 'hour':\n    case 'minute':\n    case 'second': {\n      dateValue[type] = boundRange(dateValue[type], 0, type === 'hour' ? 23 : 59)\n      dateValue[type] = Math.round(dateValue[type] / getStep(type)) * getStep(type)\n    }\n  }\n}\n\nfunction handleFocused() {\n  if (props.disabled) return\n\n  focused.value = true\n\n  timer.focus = setTimeout(() => {\n    if (focused.value) {\n      if (currentState.value === 'start') {\n        startInput.value?.focus()\n      } else {\n        endInput.value?.focus()\n      }\n    }\n  }, 120)\n}\n\nfunction handleBlur() {\n  clearTimeout(timer.focus)\n\n  focused.value = false\n  startInput.value?.blur()\n  endInput.value?.blur()\n}\n\nfunction showPanel(event: Event) {\n  if (props.disabled || readonly.value) return\n\n  const target = event.target as Node\n\n  setVisible(true)\n\n  if (wrapper.value && target) {\n    const units = Array.from(wrapper.value.querySelectorAll(`.${nh.be('unit')}`))\n    const index = units.findIndex(unit => unit === target || unit.contains(target))\n\n    if (!~index) {\n      startState.column = null\n      endState.column = null\n    }\n\n    if (props.range && index >= units.length / 2) {\n      toggleCurrentState('end')\n    } else {\n      toggleCurrentState('start')\n    }\n  }\n\n  handleFocused()\n}\n\nfunction handleInput(value: number) {\n  const state = getCurrentState()\n  const type = state.column\n\n  if (!type) return\n\n  handleInputNumber(type, value)\n\n  if (type === 'year' ? state.dateValue.year >= 1000 : state.dateValue[type] >= 10) {\n    state.enterColumn('next', false)\n  }\n}\n\nfunction handleInputNumber(type: DateTimeType, number: number) {\n  const state = getCurrentState()\n  const prev = state.dateValue[type]\n\n  if (state.activated[type] && prev > 0 && prev < (type === 'year' ? 1000 : 10)) {\n    state.dateValue[type] = prev * 10 + number\n  } else {\n    state.dateValue[type] = number\n    setActivatedTrue(type)\n  }\n\n  type !== 'year' && verifyValue(type)\n  emitEvent(props.onInput, type, state.dateValue[type])\n}\n\nfunction setActivatedTrue(type: DateTimeType) {\n  const activated = getCurrentState().activated\n\n  if (type === 'date') {\n    activated.year = true\n    activated.month = true\n  } else if (type === 'month') {\n    activated.year = true\n  } else if (type === 'minute') {\n    activated.hour = true\n  } else if (type === 'second') {\n    activated.hour = true\n    activated.minute = true\n  }\n\n  activated[type] = true\n}\n\nfunction handleInputFocus(type: DateTimeType) {\n  getCurrentState().column = type\n}\n\nfunction isTimeType(type: DateTimeType): type is TimeType {\n  return ['hour', 'minute', 'second'].includes(type)\n}\n\nfunction handleAdjust(adjustType: 'plus' | 'minus', ctrlKey: boolean) {\n  const isPlus = adjustType === 'plus'\n  const sign = isPlus ? 1 : -1\n  const state = getCurrentState()\n  const type = state.column\n\n  if (!type) return\n\n  if (state.enabled[type]) {\n    if (isTimeType(type)) {\n      state.dateValue[type] += sign * (ctrlKey ? getCtrlStep(type) : getStep(type))\n    } else {\n      if (ctrlKey) {\n        if (type === 'year') {\n          state.dateValue.year += sign * 10\n        } else {\n          state.dateValue[type === 'date' ? 'month' : 'year'] += sign\n        }\n      } else {\n        state.dateValue[type] += sign\n      }\n\n      computeDate()\n      updateDateActivated(type)\n    }\n\n    verifyValue(type)\n    emitEvent(props[isPlus ? 'onPlus' : 'onMinus'], type, state.dateValue[type])\n    datePanel.value?.refreshCalendar(currentState.value)\n  }\n}\n\nfunction handlePlus(ctrlKey: boolean) {\n  handleAdjust('plus', ctrlKey)\n}\n\nfunction handleMinus(ctrlKey: boolean) {\n  handleAdjust('minus', ctrlKey)\n}\n\nfunction computeDate() {\n  const dateValue = getCurrentState().dateValue\n  const date = new Date(dateValue.year, dateValue.month - 1, dateValue.date)\n\n  dateValue.year = date.getFullYear()\n  dateValue.month = date.getMonth() + 1\n  dateValue.date = date.getDate()\n}\n\nfunction fallbackFocus() {\n  requestAnimationFrame(() => {\n    handleBlur()\n    reference.value?.focus()\n  })\n}\n\nfunction handleEnter() {\n  fallbackFocus()\n  finishInput()\n  emitEvent(props.onEnter)\n}\n\nfunction handleCancel() {\n  fallbackFocus()\n  parseValue(lastValue.value.split('|'))\n  finishInput(false)\n  emitEvent(props.onCancel)\n}\n\nfunction handleClear(finish = true) {\n  if (props.disabled || readonly.value) return\n\n  if (props.clearable) {\n    nextTick(() => {\n      const emitValue = props.range ? ([] as number[]) : null\n\n      parseValue(null)\n      finish && finishInput(false)\n      emit('update:value', emitValue)\n      emit('update:formatted-value', props.range ? [] : null)\n      emitEvent(props.onChange as DatePickerChangeEvent, emitValue)\n      emitEvent(props.onClear)\n      clearField(emitValue!)\n      finish && handleBlur()\n\n      lastValue.value = ''\n\n      nextTick(() => {\n        toggleActivated(false)\n      })\n    })\n  }\n}\n\nfunction handleShortcut(name: string, value: Dateable | Dateable[]) {\n  fallbackFocus()\n  parseValue(value)\n  emitEvent(props.onShortcut as (name: string, value: Dateable | Dateable[]) => void, name, value)\n  finishInput()\n}\n\n// 只有时分秒\nfunction getStep(type: TimeType) {\n  return props.steps[type === 'hour' ? 0 : type === 'minute' ? 1 : 2] || 1\n}\n\n// 只有时分秒\nfunction getCtrlStep(type: TimeType) {\n  return props.ctrlSteps[type === 'hour' ? 0 : type === 'minute' ? 1 : 2] || 1\n}\n\nfunction handleDateHover(hoverDate: Date | null) {\n  if (props.range && hoverDate) {\n    hoveredDate.value = hoverDate\n\n    if (firstSelected.value) {\n      const hoverValues = [hoverDate.getFullYear(), hoverDate.getMonth() + 1, hoverDate.getDate()]\n      const start = hoveredLarge.value ? firstSelected.value : hoverValues\n      const end = hoveredLarge.value ? hoverValues : firstSelected.value\n\n      let types: DateTimeType[]\n\n      if (props.type === 'year') {\n        types = ['year']\n      } else if (props.type === 'month') {\n        types = ['year', 'month']\n      } else {\n        types = ['year', 'month', 'date']\n      }\n\n      for (let i = 0, len = types.length; i < len; ++i) {\n        startState.dateValue[types[i]] = start[i]\n        endState.dateValue[types[i]] = end[i]\n      }\n    }\n  }\n}\n\nfunction handlePanelChange(values: number[]) {\n  let types: DateTimeType[]\n\n  if (props.type === 'year') {\n    types = ['year']\n  } else if (props.type === 'month') {\n    types = ['year', 'month']\n  } else {\n    types = ['year', 'month', 'date']\n  }\n\n  if (!props.range) {\n    for (let i = 0, len = types.length; i < len; ++i) {\n      startState.dateValue[types[i]] = values[i]\n      updateDateActivated(types[i], 'start')\n    }\n\n    if (noActionMode.value) handleEnter()\n\n    return\n  }\n\n  if (!firstSelected.value) {\n    firstSelected.value = values\n\n    for (let i = 0, len = types.length; i < len; ++i) {\n      startState.dateValue[types[i]] = values[i]\n      endState.dateValue[types[i]] = values[i]\n      updateDateActivated(types[i], 'start')\n      updateDateActivated(types[i], 'end')\n    }\n  } else {\n    const [year, month, date] = firstSelected.value\n    const firstTime = new Date(`${year}-${month}-${date}`).getTime()\n    const secondTime = new Date(`${values[0]}-${values[1]}-${values[2]}`).getTime()\n    const start = firstTime < secondTime ? firstSelected.value : values\n    const end = firstTime < secondTime ? values : firstSelected.value\n\n    for (let i = 0, len = types.length; i < len; ++i) {\n      startState.dateValue[types[i]] = start[i]\n      endState.dateValue[types[i]] = end[i]\n      updateDateActivated(types[i], 'start')\n      updateDateActivated(types[i], 'end')\n    }\n\n    verifyRangeValue()\n    firstSelected.value = undefined\n\n    if (noActionMode.value) handleEnter()\n  }\n}\n\nfunction handleTimeChange(valueType: 'start' | 'end', type: TimeType, time: number) {\n  const state = valueType === 'start' ? startState : endState\n\n  state.dateValue[type] = time\n  updateDateActivated('hour', valueType)\n  updateDateActivated('minute', valueType)\n  updateDateActivated('second', valueType)\n}\n\nfunction updateDateActivated(type: DateTimeType, valueType?: 'start' | 'end') {\n  const state = valueType ? (valueType === 'start' ? startState : endState) : getCurrentState()\n\n  if (type === 'month') {\n    state.activated.year = true\n  } else if (type === 'date') {\n    state.activated.year = true\n    state.activated.month = true\n  }\n\n  state.activated[type] = true\n}\n\nfunction verifyRangeValue() {\n  if (!props.range) return\n\n  const startDate = startState.getDate()\n  const endDate = endState.getDate()\n\n  if (startDate.getTime() > endDate.getTime()) {\n    startState.setDate(endDate)\n    endState.setDate(startDate)\n  }\n}\n\nfunction toggleCurrentState(type: 'start' | 'end') {\n  currentState.value = type\n}\n\nfunction enterColumn(type: 'prev' | 'next') {\n  if (props.range) {\n    if (type === 'prev' && currentState.value === 'start' && !startState.column) {\n      toggleCurrentState('end')\n    }\n\n    const state = getCurrentState()\n    const currentColumn = state.column\n\n    state.enterColumn(type, !currentColumn)\n\n    if (currentColumn === state.column) {\n      const isStart = currentState.value === 'start'\n      const otherState = isStart ? endState : startState\n\n      otherState.resetColumn(type === 'prev' ? 'second' : 'year', type === 'prev')\n      toggleCurrentState(isStart ? 'end' : 'start')\n    }\n  } else {\n    startState.enterColumn(type)\n  }\n}\n\nfunction handleStartInput(type: DateTimeType) {\n  toggleCurrentState('start')\n  handleInputFocus(type)\n\n  nextTick(() => {\n    datePanel.value?.refreshCalendar('start')\n  })\n}\n\nfunction handleEndInput(type: DateTimeType) {\n  toggleCurrentState('end')\n  handleInputFocus(type)\n\n  nextTick(() => {\n    datePanel.value?.refreshCalendar('end')\n  })\n}\n\nfunction handleClickOutside() {\n  emitEvent(props.onClickOutside)\n\n  if (props.outsideClose && currentVisible.value) {\n    finishInput(!noActionMode.value && !props.outsideCancel)\n    handleBlur()\n    emitEvent(props.onOutsideClose)\n  }\n}\n</script>\n\n<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    @click=\"showPanel\"\n  >\n    <div\n      ref=\"reference\"\n      :class=\"selectorClass\"\n      tabindex=\"0\"\n      @keydown.space.prevent=\"showPanel\"\n      @keydown.backspace.prevent=\"handleClear(false)\"\n    >\n      <div\n        v-if=\"hasPrefix\"\n        :class=\"[nh.be('icon'), nh.be('prefix')]\"\n        :style=\"{ color: props.prefixColor }\"\n      >\n        <slot name=\"prefix\">\n          <Icon :icon=\"props.prefix\"></Icon>\n        </slot>\n      </div>\n      <div :class=\"nh.be('control')\">\n        <DateControl\n          ref=\"start\"\n          :unit-type=\"currentState === 'start' ? startState.column! : ''\"\n          :enabled=\"startState.enabled\"\n          :activated=\"startState.activated\"\n          :date-value=\"startState.dateValue\"\n          :steps=\"props.steps\"\n          :ctrl-steps=\"props.ctrlSteps\"\n          :focused=\"focused\"\n          :visible=\"currentVisible\"\n          :date-separator=\"props.dateSeparator\"\n          :time-separator=\"props.timeSeparator\"\n          :filler=\"props.filler\"\n          :labels=\"props.labels\"\n          :has-error=\"startError\"\n          :placeholder=\"startPlaceholder\"\n          :readonly=\"props.unitReadonly\"\n          @input=\"handleInput\"\n          @plus=\"handlePlus\"\n          @minus=\"handleMinus\"\n          @enter=\"handleEnter\"\n          @cancel=\"handleCancel\"\n          @unit-focus=\"handleStartInput\"\n          @prev-unit=\"enterColumn('prev')\"\n          @next-unit=\"enterColumn('next')\"\n          @blur=\"startState.column = null\"\n        ></DateControl>\n        <template v-if=\"props.range\">\n          <div :class=\"nh.be('exchange')\">\n            <slot name=\"exchange\">\n              <Icon v-bind=\"icons.exchange\" style=\"padding-top: 1px\"></Icon>\n            </slot>\n          </div>\n          <DateControl\n            ref=\"end\"\n            :unit-type=\"currentState === 'end' ? endState.column! : ''\"\n            :enabled=\"endState.enabled\"\n            :activated=\"endState.activated\"\n            :date-value=\"endState.dateValue\"\n            :steps=\"props.steps\"\n            :ctrl-steps=\"props.ctrlSteps\"\n            :focused=\"focused\"\n            :visible=\"currentVisible\"\n            :date-separator=\"props.dateSeparator\"\n            :time-separator=\"props.timeSeparator\"\n            :filler=\"props.filler\"\n            :labels=\"props.labels\"\n            :has-error=\"endError\"\n            :placeholder=\"endPlaceholder\"\n            :readonly=\"props.unitReadonly\"\n            @input=\"handleInput\"\n            @plus=\"handlePlus\"\n            @minus=\"handleMinus\"\n            @enter=\"handleEnter\"\n            @cancel=\"handleCancel\"\n            @unit-focus=\"handleEndInput\"\n            @prev-unit=\"enterColumn('prev')\"\n            @next-unit=\"enterColumn('next')\"\n            @blur=\"endState.column = null\"\n          ></DateControl>\n        </template>\n      </div>\n      <div\n        v-if=\"!props.noSuffix\"\n        :class=\"[nh.be('icon'), nh.be('suffix')]\"\n        :style=\"{\n          color: props.suffixColor,\n          opacity: showClear || props.loading ? '0%' : ''\n        }\"\n      >\n        <slot name=\"suffix\">\n          <Icon v-bind=\"icons.calendar\" :icon=\"props.suffix || icons.calendar.icon\"></Icon>\n        </slot>\n      </div>\n      <div\n        v-else-if=\"props.clearable || props.loading\"\n        :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n      ></div>\n      <Transition :name=\"nh.ns('fade')\" appear>\n        <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear()\">\n          <Icon v-bind=\"icons.clear\" label=\"clear\"></Icon>\n        </div>\n        <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n            label=\"loading\"\n          ></Icon>\n        </div>\n      </Transition>\n    </div>\n    <Popper\n      ref=\"popper\"\n      :class=\"[nh.be('popper'), nh.ns('calendar-vars'), nh.ns('time-picker-vars'), nh.bs('vars')]\"\n      :visible=\"currentVisible\"\n      :to=\"transferTo\"\n      :transition=\"props.transitionName\"\n      :alive=\"props.popperAlive ?? !transferTo\"\n      @click.stop=\"handleFocused\"\n      @before-enter=\"staticWheel = true\"\n      @before-leave=\"staticWheel = true\"\n      @after-enter=\"staticWheel = false\"\n      @after-leave=\"staticWheel = false\"\n    >\n      <DatePanel\n        ref=\"panel\"\n        :type=\"props.type\"\n        :start-value=\"startState.dateValue\"\n        :end-value=\"endState.dateValue\"\n        :start-activated=\"startState.activated\"\n        :end-activated=\"endState.activated\"\n        :value-type=\"currentState\"\n        :shortcuts=\"props.shortcuts\"\n        :confirm-text=\"props.confirmText\"\n        :cancel-text=\"props.cancelText\"\n        :today=\"props.today\"\n        :no-action=\"props.noAction\"\n        :steps=\"props.steps\"\n        :range=\"props.range\"\n        :min=\"props.min\"\n        :max=\"props.max\"\n        :disabled-date=\"isDateDisabled\"\n        :disabled-time=\"isTimeDisabled\"\n        :has-error=\"startError || endError\"\n        :selecting-type=\"hoveredLarge ? 'end' : 'start'\"\n        :locale=\"mergedLocale\"\n        :week-start=\"props.weekStart\"\n        :static-wheel=\"staticWheel\"\n        :shortcuts-placement=\"props.shortcutsPlacement\"\n        @shortcut=\"handleShortcut\"\n        @change=\"handlePanelChange\"\n        @confirm=\"handleEnter\"\n        @cancel=\"handleCancel\"\n        @hover=\"handleDateHover\"\n        @time-change=\"handleTimeChange\"\n      ></DatePanel>\n    </Popper>\n  </div>\n</template>\n", "import { booleanProp, buildProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { DividerTextPosition } from './symbol'\n\nexport const dividerProps = buildProps({\n  vertical: booleanProp,\n  textPosition: String as PropType<DividerTextPosition>,\n  /**\n   * 字体增大加粗\n   */\n  primary: booleanProp,\n  dashed: booleanProp,\n  margin: [String, Number]\n})\n\nexport type DividerProps = ExtractPropTypes<typeof dividerProps>\nexport type DividerCProps = ConfigurableProps<DividerProps>\n", "<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { toCssSize } from '@vexip-ui/utils'\nimport { dividerProps } from './props'\n\ndefineOptions({ name: 'Divider' })\n\nconst _props = defineProps(dividerProps)\nconst props = useProps('divider', _props, {\n  vertical: false,\n  textPosition: {\n    default: 'center',\n    validator: value => ['center', 'left', 'right'].includes(value)\n  },\n  primary: false,\n  dashed: false,\n  margin: null\n})\n\nconst slots = defineSlots<{ default: () => any }>()\n\nconst nh = useNameHelper('divider')\n\nconst hasText = computed(() => !!slots.default)\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    nh.bm(props.vertical ? 'vertical' : 'horizontal'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('primary')]: !props.vertical && props.primary,\n      [nh.bm('dashed')]: props.dashed,\n      [nh.bm('with-text')]: !props.vertical && hasText.value,\n      [nh.bm(`with-text-${props.textPosition}`)]:\n        !props.vertical && hasText.value && props.textPosition !== 'center'\n    }\n  ]\n})\nconst margin = computed(() => toCssSize(props.margin))\nconst style = computed(() => {\n  if (!margin.value) return {}\n\n  return props.vertical\n    ? {\n        marginRight: margin.value,\n        marginLeft: margin.value\n      }\n    : {\n        marginTop: margin.value,\n        marginBottom: margin.value\n      }\n})\n</script>\n\n<template>\n  <div :class=\"className\" role=\"separator\" :style=\"style\">\n    <span v-if=\"!props.vertical && hasText\" :class=\"nh.be('text')\">\n      <slot></slot>\n    </span>\n  </div>\n</template>\n", "import {\n  booleanProp,\n  booleanStringProp,\n  buildProps,\n  classProp,\n  eventProp,\n  localeProp,\n  sizeProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ButtonType } from '@/components/button'\nimport type { DrawerPlacement } from './symbol'\n\nexport const drawerProps = buildProps({\n  locale: localeProp('drawer'),\n  transfer: booleanStringProp,\n  active: booleanProp,\n  width: [Number, String],\n  height: [Number, String],\n  placement: String as PropType<DrawerPlacement>,\n  title: String,\n  closable: booleanProp,\n  inner: booleanProp,\n  maskClose: booleanProp,\n  drawerClass: classProp,\n  hideMask: booleanProp,\n  onBeforeClose: Function as PropType<(isConfirm?: boolean) => any>,\n  resizable: booleanProp,\n  autoRemove: booleanProp,\n  footer: booleanProp,\n  confirmText: String,\n  cancelText: String,\n  loading: booleanProp,\n  confirmType: String as PropType<ButtonType>,\n  cancelType: String as PropType<ButtonType>,\n  actionSize: sizeProp,\n  undivided: booleanProp,\n  onToggle: eventProp<(active: boolean) => void>(),\n  onClose: eventProp(),\n  onShow: eventProp(),\n  onHide: eventProp(),\n  onResizeStart: eventProp<(rect: { width: number, height: number }) => void>(),\n  onResizeMove: eventProp<(rect: { width: number, height: number }) => void>(),\n  onResizeEnd: eventProp<(rect: { width: number, height: number }) => void>(),\n  onConfirm: eventProp(),\n  onCancel: eventProp()\n})\n\nexport type DrawerProps = ExtractPropTypes<typeof drawerProps>\nexport type DrawerCProps = ConfigurableProps<DrawerProps, never, 'onBeforeClose'>\n", "export type DrawerPlacement = 'top' | 'right' | 'bottom' | 'left'\n\nexport interface DrawerSlotParams {\n  resizing: boolean,\n  handleConfirm: () => void,\n  handleCancel: () => void,\n  handleClose: (isConfirm?: boolean) => Promise<unknown>\n}\n\nexport type DrawerCommonSLot = (params: DrawerSlotParams) => any\n\nexport const drawerPlacements = Object.freeze<DrawerPlacement[]>(['top', 'right', 'bottom', 'left'])\n\nlet index = 0\n\nexport function getIdIndex() {\n  return index++\n}\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { Masker } from '@/components/masker'\n\nimport { computed, nextTick, reactive, ref, shallowReadonly, toRef, watch } from 'vue'\n\nimport {\n  createSizeProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { useMoving } from '@vexip-ui/hooks'\nimport { isPromise, toNumber } from '@vexip-ui/utils'\nimport { drawerProps } from './props'\nimport { drawerPlacements, getIdIndex } from './symbol'\n\nimport type { DrawerCommonSLot } from './symbol'\n\ndefineOptions({ name: 'Drawer' })\n\nconst _props = defineProps(drawerProps)\nconst props = useProps('drawer', _props, {\n  locale: null,\n  transfer: false,\n  active: {\n    default: false,\n    static: true\n  },\n  width: {\n    default: 280,\n    validator: value => typeof value === 'string' || value > 0\n  },\n  height: {\n    default: 280,\n    validator: value => typeof value === 'string' || value > 0\n  },\n  placement: {\n    default: 'right',\n    validator: value => drawerPlacements.includes(value)\n  },\n  title: '',\n  closable: true,\n  inner: false,\n  maskClose: true,\n  drawerClass: null,\n  hideMask: false,\n  onBeforeClose: {\n    default: null,\n    isFunc: true\n  },\n  resizable: false,\n  autoRemove: false,\n  footer: false,\n  confirmText: null,\n  cancelText: null,\n  loading: false,\n  confirmType: 'primary',\n  cancelType: 'default',\n  actionSize: createSizeProp('small'),\n  undivided: false\n})\n\nconst emit = defineEmits(['update:active'])\n\nconst slots = defineSlots<{\n  header: DrawerCommonSLot,\n  title: DrawerCommonSLot,\n  close: DrawerCommonSLot,\n  default: DrawerCommonSLot,\n  footer: DrawerCommonSLot,\n  handler: DrawerCommonSLot\n}>()\n\nconst nh = useNameHelper('drawer')\nconst icons = useIcons()\nconst locale = useLocale('drawer', toRef(props, 'locale'))\n\nconst currentActive = ref(props.active)\nconst currentWidth = ref(props.width)\nconst currentHeight = ref(props.height)\n\nconst wrapper = ref<HTMLElement>()\n\nconst idIndex = `${getIdIndex()}`\n\nconst { target: resizer, moving: resizing } = useMoving({\n  onStart: (state, event) => {\n    if (!props.resizable || event.button > 0 || !wrapper.value) {\n      return false\n    }\n\n    const width = `${currentWidth.value}`.endsWith('%')\n      ? wrapper.value.offsetWidth\n      : toNumber(currentWidth.value)\n    const height = `${currentHeight.value}`.endsWith('%')\n      ? wrapper.value.offsetHeight\n      : toNumber(currentHeight.value)\n\n    state.xStart = width\n    state.yStart = height\n\n    emitEvent(props.onResizeStart, { width, height })\n  },\n  onMove: (state, event) => {\n    const deltaX = event.clientX - state.clientX\n    const deltaY = event.clientY - state.clientY\n\n    let width = toNumber(currentWidth.value)\n    let height = toNumber(currentHeight.value)\n\n    switch (props.placement) {\n      case 'top': {\n        height = state.yStart + deltaY\n        break\n      }\n      case 'right': {\n        width = state.xStart - deltaX\n        break\n      }\n      case 'bottom': {\n        height = state.yStart - deltaY\n        break\n      }\n      default: {\n        width = state.xStart + deltaX\n      }\n    }\n\n    currentWidth.value = Math.max(width, 100)\n    currentHeight.value = Math.max(height, 100)\n\n    emitEvent(props.onResizeMove, {\n      width: toNumber(currentWidth.value),\n      height: toNumber(currentHeight.value)\n    })\n  },\n  onEnd: () => {\n    emitEvent(props.onResizeEnd, {\n      width: toNumber(currentWidth.value),\n      height: toNumber(currentHeight.value)\n    })\n  }\n})\n\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('inner')]: props.inner,\n      [nh.bm('closable')]: props.closable,\n      [nh.bm('resizable')]: props.resizable,\n      [nh.bm('undivided')]: props.undivided\n    }\n  ]\n})\nconst moveTransition = computed(() => {\n  return nh.ns(`move-${props.placement}`)\n})\nconst wrapperClass = computed(() => {\n  return [\n    nh.be('wrapper'),\n    nh.bem('wrapper', props.placement),\n    {\n      [nh.bem('wrapper', 'hide-mask')]: props.hideMask,\n      [nh.bem('wrapper', 'resizing')]: resizing.value\n    },\n    props.drawerClass\n  ]\n})\nconst wrapperStyle = computed(() => {\n  const placement = props.placement\n\n  if (placement === 'top' || placement === 'bottom') {\n    const height = currentHeight.value\n\n    return {\n      height: `${height}`.endsWith('%') ? height : `${height}px`\n    }\n  }\n\n  const width = currentWidth.value\n\n  return {\n    width: `${width}`.endsWith('%') ? width : `${width}px`\n  }\n})\nconst hasTitle = computed(() => {\n  return !!(slots.header || slots.title || props.title)\n})\nconst titleId = computed(() => `${nh.bs(idIndex)}__title`)\nconst bodyId = computed(() => `${nh.bs(idIndex)}__body`)\n\nwatch(\n  () => props.active,\n  value => {\n    currentActive.value = value\n  }\n)\nwatch(\n  () => props.width,\n  value => {\n    currentWidth.value = value\n  }\n)\nwatch(\n  () => props.height,\n  value => {\n    currentHeight.value = value\n  }\n)\n\ndefineExpose({\n  resizing,\n  titleId,\n  bodyId,\n  wrapper,\n  resizer,\n  handleConfirm,\n  handleCancel,\n  handleClose\n})\n\nconst slotParams = shallowReadonly(\n  reactive({\n    resizing,\n    handleConfirm,\n    handleCancel,\n    handleClose\n  })\n)\n\nfunction setActive(active: boolean) {\n  if (currentActive.value === active) return\n\n  currentActive.value = active\n\n  emit('update:active', active)\n  emitEvent(props.onToggle, active)\n}\n\nasync function handleClose(isConfirm = false) {\n  let result: unknown = true\n\n  if (typeof props.onBeforeClose === 'function') {\n    result = props.onBeforeClose(isConfirm)\n\n    if (isPromise(result)) {\n      result = await result\n    }\n  }\n\n  if (result !== false) {\n    nextTick(() => {\n      setActive(false)\n      emitEvent(props.onClose)\n    })\n  }\n\n  return result\n}\n\nfunction handleMaskClose() {\n  if (props.maskClose) {\n    return handleClose()\n  }\n}\n\nfunction handleShow() {\n  emitEvent(props.onShow)\n}\n\nfunction handleHide() {\n  emitEvent(props.onHide)\n}\n\nfunction handleConfirm() {\n  handleClose(true)\n  emitEvent(props.onConfirm)\n}\n\nfunction handleCancel() {\n  handleClose(false)\n  emitEvent(props.onCancel)\n}\n</script>\n\n<template>\n  <Masker\n    v-model:active=\"currentActive\"\n    :inherit=\"props.inherit\"\n    :class=\"className\"\n    :inner=\"props.inner\"\n    :transition-name=\"moveTransition\"\n    :closable=\"props.maskClose\"\n    :disabled=\"props.hideMask\"\n    :on-before-close=\"handleMaskClose\"\n    :transfer=\"props.transfer\"\n    :auto-remove=\"props.autoRemove\"\n    @show=\"handleShow\"\n    @hide=\"handleHide\"\n  >\n    <template #default=\"{ show }\">\n      <section\n        v-show=\"show\"\n        ref=\"wrapper\"\n        :class=\"wrapperClass\"\n        :style=\"wrapperStyle\"\n        role=\"dialog\"\n        :aria-modal=\"show ? 'true' : undefined\"\n        :aria-labelledby=\"titleId\"\n        :aria-describedby=\"bodyId\"\n      >\n        <div v-if=\"hasTitle\" :class=\"nh.be('header')\">\n          <slot name=\"header\" v-bind=\"slotParams\">\n            <div :id=\"titleId\" :class=\"nh.be('title')\">\n              <slot name=\"title\" v-bind=\"slotParams\">\n                {{ props.title }}\n              </slot>\n            </div>\n            <button\n              v-if=\"props.closable\"\n              type=\"button\"\n              :class=\"nh.be('close')\"\n              @click=\"handleClose()\"\n            >\n              <slot name=\"close\" v-bind=\"slotParams\">\n                <Icon\n                  v-bind=\"icons.close\"\n                  :scale=\"+(icons.close.scale || 1) * 1.2\"\n                  label=\"close\"\n                ></Icon>\n              </slot>\n            </button>\n          </slot>\n        </div>\n        <div :id=\"bodyId\" :class=\"nh.be('content')\">\n          <slot v-bind=\"slotParams\"></slot>\n        </div>\n        <div v-if=\"props.footer || $slots.footer\" :class=\"nh.be('footer')\">\n          <slot name=\"footer\" v-bind=\"slotParams\">\n            <Button\n              :class=\"[nh.be('button'), nh.bem('button', 'cancel')]\"\n              inherit\n              text\n              :type=\"props.cancelType\"\n              :size=\"props.actionSize\"\n              @click=\"handleCancel\"\n            >\n              {{ props.cancelText || locale.cancel }}\n            </Button>\n            <Button\n              :class=\"[nh.be('button'), nh.bem('button', 'confirm')]\"\n              inherit\n              :type=\"props.confirmType\"\n              :size=\"props.actionSize\"\n              :loading=\"props.loading\"\n              @click=\"handleConfirm\"\n            >\n              {{ props.confirmText || locale.confirm }}\n            </Button>\n          </slot>\n        </div>\n        <div\n          v-if=\"props.resizable\"\n          ref=\"resizer\"\n          :class=\"[\n            nh.be('handler'),\n            nh.bem('handler', props.placement),\n            {\n              [nh.bem('handler', 'resizing')]: resizing\n            }\n          ]\"\n        >\n          <slot name=\"handler\" v-bind=\"slotParams\"></slot>\n        </div>\n      </section>\n    </template>\n  </Masker>\n</template>\n", "import { booleanProp, booleanStringProp, buildProps, classProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { TooltipShift, TooltipTheme } from '@/components/tooltip'\n\nexport const ellipsisProps = buildProps({\n  placement: String as PropType<Placement>,\n  transfer: booleanStringProp,\n  noHover: booleanProp,\n  transitionName: String,\n  tooltipTheme: String as PropType<TooltipTheme>,\n  tipClass: classProp,\n  maxLines: Number,\n  tipMaxWidth: [Number, String],\n  tipDisabled: booleanProp,\n  tipShift: {\n    type: [Boolean, String] as PropType<boolean | TooltipShift>,\n    default: null\n  }\n})\n\nexport type EllipsisProps = ExtractPropTypes<typeof ellipsisProps>\nexport type EllipsisCProps = ConfigurableProps<EllipsisProps>\n", "<script setup lang=\"ts\">\nimport { Tooltip } from '@/components/tooltip'\n\nimport { computed, ref } from 'vue'\n\nimport { useHoverDelay, useNameHelper, useProps } from '@vexip-ui/config'\nimport { placementWhileList, useSetTimeout } from '@vexip-ui/hooks'\nimport { getRangeWidth } from '@vexip-ui/utils'\nimport { ellipsisProps } from './props'\n\ndefineOptions({ name: 'Ellipsis' })\n\nconst nh = useNameHelper('ellipsis')\n\nconst _props = defineProps(ellipsisProps)\nconst props = useProps('ellipsis', _props, {\n  placement: {\n    default: 'top',\n    validator: value => placementWhileList.includes(value)\n  },\n  transfer: 'body',\n  noHover: false,\n  transitionName: () => nh.ns('fade'),\n  tooltipTheme: {\n    default: 'dark',\n    validator: value => ['light', 'dark'].includes(value)\n  },\n  tipClass: null,\n  maxLines: null,\n  tipMaxWidth: 500,\n  tipDisabled: false,\n  tipShift: false\n})\n\nconst hoverDelay = useHoverDelay()\nconst visible = ref(false)\nconst content = ref('')\n\nconst { timer } = useSetTimeout()\n\nconst wrapper = ref<HTMLElement>()\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('multiple')]: props.maxLines\n  }\n})\nconst ellipsisStyle = computed(() => {\n  return props.maxLines > 0 ? { '-webkit-line-clamp': props.maxLines } : ''\n})\nconst tipStyle = computed(() => {\n  return {\n    maxWidth:\n      typeof props.tipMaxWidth === 'string'\n        ? parseFloat(props.tipMaxWidth) || props.tipMaxWidth\n        : `${props.tipMaxWidth}px`\n  }\n})\n\ndefineExpose({\n  visible,\n  wrapper\n})\n\nfunction handleTriggerEnter() {\n  clearTimeout(timer.hover)\n\n  if (props.tipDisabled) return\n\n  timer.hover = setTimeout(() => {\n    if (!wrapper.value || !wrapper.value.childNodes.length) {\n      visible.value = false\n      return\n    }\n\n    // In the case of multiple lines, use visual height and\n    // real content height to control whether to display\n    if (props.maxLines > 0) {\n      const scrollHeight = wrapper.value.scrollHeight\n      const clientHeight = wrapper.value.clientHeight\n\n      visible.value = scrollHeight > clientHeight\n    } else {\n      visible.value = getRangeWidth(wrapper.value) > wrapper.value.getBoundingClientRect().width\n    }\n\n    content.value = visible.value ? wrapper.value.textContent ?? '' : ''\n  }, hoverDelay.value)\n}\n\nfunction handleTriggerLeave() {\n  clearTimeout(timer.hover)\n\n  if (props.tipDisabled) return\n\n  timer.hover = setTimeout(() => {\n    visible.value = false\n  }, hoverDelay.value)\n}\n</script>\n\n<template>\n  <Tooltip\n    :visible=\"visible\"\n    trigger=\"custom\"\n    :disabled=\"props.tipDisabled\"\n    :transfer=\"props.transfer\"\n    :placement=\"props.placement\"\n    :no-hover=\"props.noHover\"\n    :transition-name=\"props.transitionName\"\n    :tip-class=\"props.tipClass\"\n    :tip-style=\"tipStyle\"\n    :reverse=\"props.tooltipTheme === 'dark'\"\n    :shift=\"props.tipShift\"\n    @tip-enter=\"handleTriggerEnter\"\n    @tip-leave=\"handleTriggerLeave\"\n  >\n    <template #trigger>\n      <div\n        ref=\"wrapper\"\n        v-bind=\"$attrs\"\n        :class=\"className\"\n        :style=\"ellipsisStyle\"\n        @mouseenter=\"handleTriggerEnter\"\n        @mouseleave=\"handleTriggerLeave\"\n      >\n        <slot></slot>\n      </div>\n    </template>\n    {{ content }}\n  </Tooltip>\n</template>\n", "<script setup lang=\"ts\">\nimport { Column } from '@/components/column'\nimport { Icon } from '@/components/icon'\nimport { Tooltip } from '@/components/tooltip'\n\nimport { computed, inject, onBeforeUnmount, onMounted, provide, ref, toRef, watch } from 'vue'\n\nimport {\n  makeSentence,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps,\n  useWordSpace\n} from '@vexip-ui/config'\nimport { createEventEmitter, getRangeWidth, isFunction, isNull, isObject } from '@vexip-ui/utils'\nimport { formItemProps } from './props'\nimport { validate as asyncValidate } from './validator'\nimport { getValueByPath, setValueByPath } from './helper'\nimport { FIELD_OPTIONS, FORM_ACTIONS, FORM_FIELDS, FORM_PROPS } from './symbol'\n\nimport type { ComponentState } from '@vexip-ui/config'\nimport type { Rule } from './validator'\n\ndefineOptions({ name: 'FormItem', inheritAttrs: true })\n\nconst nh = useNameHelper('form')\nconst _props = defineProps(formItemProps)\nconst props = useProps('formItem', _props, {\n  locale: null,\n  label: {\n    default: '',\n    static: true\n  },\n  prop: {\n    default: '',\n    static: true\n  },\n  name: {\n    default: '',\n    static: true\n  },\n  rules: () => [],\n  labelWidth: null,\n  required: false,\n  htmlFor: {\n    default: null,\n    static: true\n  },\n  errorTransition: () => nh.ns('fade'),\n  defaultValue: {\n    default: null,\n    static: true\n  },\n  hideErrorTip: false,\n  validateAll: null,\n  hideAsterisk: null,\n  hideLabel: null,\n  action: false,\n  help: '',\n  pure: false,\n  span: 24,\n  offset: null,\n  push: null,\n  pull: null,\n  order: null,\n  xs: null,\n  sm: null,\n  md: null,\n  lg: null,\n  xl: null,\n  xxl: null,\n  flex: null\n})\n\nconst slots = defineSlots<{\n  default: () => any,\n  help: () => any,\n  label: () => any,\n  error: (params: { tip: string }) => any\n}>()\n\nconst formProps = inject(FORM_PROPS, {})\nconst formActions = inject(FORM_ACTIONS, null)\nconst formFields = inject(FORM_FIELDS, null)\nconst emitter = createEventEmitter()\n\nconst locale = useLocale('form', toRef(props, 'locale'))\nconst icons = useIcons()\nconst wordSpace = useWordSpace()\n\nconst initValue = ref(props.defaultValue)\nconst isError = ref(false)\nconst errorTip = ref('')\nconst validating = ref(false)\nconst disabledValidate = ref(false)\nconst labelWidth = ref(0)\n\nconst labelEl = ref<HTMLInputElement>()\n\nconst isRequired = computed(() => formProps.allRequired || props.required)\nconst requiredTip = computed(() => {\n  return makeSentence(`${props.label || props.prop} ${locale.value.notNullable}`, wordSpace.value)\n})\nconst allRules = computed(() => {\n  if (!props.prop) return []\n\n  const requiredRule: Rule[] = isRequired.value\n    ? [{ required: isRequired.value, message: requiredTip.value }]\n    : []\n  const selfRules = Array.isArray(props.rules) ? props.rules : [props.rules]\n\n  let formRules: Rule[] = []\n\n  if (formProps.rules) {\n    formRules = (getValueByPath(formProps.rules, props.prop) as Rule[]) ?? []\n  }\n\n  formRules = Array.isArray(formRules) ? formRules : [formRules]\n\n  return requiredRule.concat(formRules, selfRules)\n})\nconst currentValue = computed(getValue)\nconst isValidateAll = computed(() => {\n  return isNull(props.validateAll) ? formProps.validateAll ?? false : props.validateAll\n})\nconst useAsterisk = computed(() => {\n  if (props.hideAsterisk === true || formProps.hideAsterisk) {\n    return false\n  }\n\n  for (const rule of allRules.value) {\n    if (rule.required) return true\n  }\n\n  return isRequired.value\n})\nconst hideLabel = computed(() => props.action || props.hideLabel === true || formProps.hideLabel)\nconst hasLabel = computed(() => !(hideLabel.value || !(props.label || slots.label)))\nconst labelAlign = computed(() => formProps.labelAlign)\nconst computedLabelWidth = computed(() => {\n  if (labelAlign.value) {\n    return getLabelWidth(\n      labelAlign.value === 'top'\n        ? 0\n        : hideLabel.value\n          ? 0\n          : props.labelWidth || formProps.labelWidth || 80\n    )\n  }\n\n  return getLabelWidth(hideLabel.value ? 0 : props.labelWidth || 80)\n})\nconst className = computed(() => {\n  return {\n    [nh.be('item')]: true,\n    [nh.bs('vars')]: true,\n    [nh.bem('item', 'inherit')]: formFields || props.inherit,\n    [nh.bem('item', 'required')]: !formProps.hideAsterisk && useAsterisk.value,\n    [nh.bem('item', 'error')]: isError.value,\n    [nh.bem('item', 'action')]: props.action,\n    [nh.bem('item', 'padding')]: formProps.inline && labelAlign.value === 'top' && !hasLabel.value\n  }\n})\nconst controlStyle = computed(() => {\n  return {\n    width: labelAlign.value === 'top' ? undefined : `calc(100% - ${computedLabelWidth.value}px)`,\n    marginLeft:\n      hasLabel.value || labelAlign.value === 'top' ? undefined : `${computedLabelWidth.value}px`\n  }\n})\nconst inputValue = computed(() => {\n  const value = currentValue.value\n\n  if (Array.isArray(value) || isObject(value)) {\n    return JSON.stringify(value)\n  }\n\n  return value\n})\nconst columnFlex = computed(() => {\n  return { justify: props.action ? 'center' : 'start', align: 'middle' } as const\n})\n\nconst instances = new Set<any>()\n\nconst fieldObject = Object.freeze({\n  prop: computed(() => props.prop),\n  idFor: computed(() => props.prop),\n  state: computed<ComponentState>(() => (isError.value ? 'error' : 'default')),\n  disabled: computed(() => !!formProps.disabled),\n  loading: computed(() => !!formProps.loading),\n  size: computed(() => formProps.size || 'default'),\n  emitter,\n  labelWidth,\n  validate,\n  clearError,\n  reset,\n  getValue,\n  setValue,\n  sync: (instance: any) => {\n    if (instances.size) {\n      console.warn('[vexip-ui:Form]: must only be one control component under FormItem.')\n    }\n\n    instances.add(instance)\n  },\n  unSync: (instance: any) => {\n    instances.delete(instance)\n  }\n})\n\nprovide(FIELD_OPTIONS, fieldObject)\n\nwatch(\n  () => props.defaultValue,\n  value => {\n    initValue.value = value\n  }\n)\n\nonMounted(() => {\n  const value = currentValue.value\n\n  if (isNull(initValue.value)) {\n    initValue.value = Array.isArray(value) ? Array.from(value) : value\n  }\n\n  if (labelEl.value) {\n    labelWidth.value = getRangeWidth(labelEl.value)\n  }\n\n  if (formFields) {\n    formFields.add(fieldObject)\n  }\n})\n\nonBeforeUnmount(() => {\n  if (formFields) {\n    formFields.delete(fieldObject)\n  }\n})\n\ndefineExpose({ isError, inputValue, computedLabelWidth })\n\nfunction getLabelWidth(width: number | 'auto') {\n  return width === 'auto' ? formActions?.getLabelWidth() || 80 : width\n}\n\nlet initialized = false\n\nfunction getValue(defaultValue?: unknown) {\n  if (!formProps.model || !props.prop) return defaultValue\n\n  try {\n    const value = getValueByPath(formProps.model, props.prop, true)\n    initialized = true\n\n    return value\n  } catch (e) {\n    if (!initialized) {\n      setValueByPath(formProps.model, props.prop, defaultValue, false)\n      initialized = true\n    }\n\n    return defaultValue\n  }\n}\n\nfunction setValue(value: unknown, strict = false) {\n  if (!formProps.model || !props.prop) return\n\n  try {\n    return setValueByPath(formProps.model, props.prop, value, strict)\n  } catch (e) {}\n}\n\nfunction validate() {\n  return handleValidate()\n}\n\nfunction clearError() {\n  isError.value = false\n  errorTip.value = ''\n}\n\nfunction reset() {\n  clearError()\n\n  if (!formProps.model || !props.prop) return false\n\n  const value = currentValue.value\n\n  let resetValue\n\n  if (Array.isArray(value)) {\n    resetValue = Array.isArray(initValue.value) ? Array.from(initValue.value) : []\n  } else {\n    resetValue = isFunction(initValue.value) ? initValue.value() : initValue.value\n  }\n\n  return setValueByPath(formProps.model, props.prop, resetValue, true)\n}\n\nasync function handleValidate() {\n  if (disabledValidate.value) {\n    disabledValidate.value = false\n\n    return handleValidateEnd(null)\n  }\n\n  if (!props.prop || !formProps.model || validating.value) {\n    return handleValidateEnd(null)\n  }\n\n  validating.value = true\n\n  const value = currentValue.value\n  const useRules = allRules.value\n  const model = formProps.model\n\n  let errors: string[] | null = await asyncValidate(\n    useRules,\n    value,\n    model,\n    isValidateAll.value,\n    locale.value.validateFail\n  )\n\n  errors = errors.length ? errors : null\n\n  return handleValidateEnd(errors)\n}\n\nfunction handleValidateEnd(errors: string[] | null) {\n  validating.value = false\n\n  if (!errors) {\n    clearError()\n  } else {\n    isError.value = true\n    errorTip.value = Array.isArray(errors) ? errors[0] : errors\n  }\n\n  return errors\n}\n\nfunction handleLabelClick() {\n  emitter.emit('focus')\n}\n\nconst isNative = computed(() => !!(formProps.action && formProps.method))\n</script>\n\n<template>\n  <slot v-if=\"props.pure\"></slot>\n  <Column\n    v-else\n    v-bind=\"$attrs\"\n    :class=\"className\"\n    :inherit=\"props.inherit\"\n    role=\"group\"\n    tag=\"div\"\n    :span=\"props.span\"\n    :offset=\"props.offset\"\n    :push=\"props.push\"\n    :pull=\"props.pull\"\n    :order=\"props.order\"\n    :xs=\"props.xs\"\n    :sm=\"props.sm\"\n    :md=\"props.md\"\n    :lg=\"props.lg\"\n    :xl=\"props.xl\"\n    :xxl=\"props.xxl\"\n    :flex=\"props.flex\"\n    :use-flex=\"columnFlex\"\n  >\n    <input\n      v-if=\"isNative\"\n      type=\"hidden\"\n      :name=\"props.name || props.prop\"\n      :value=\"inputValue\"\n      style=\"display: none\"\n    />\n    <label\n      v-if=\"hasLabel\"\n      ref=\"labelEl\"\n      :class=\"nh.be('label')\"\n      :style=\"{ width: labelAlign !== 'top' ? `${computedLabelWidth}px` : undefined }\"\n      :for=\"props.htmlFor || props.prop\"\n      @click=\"handleLabelClick\"\n    >\n      <Tooltip v-if=\"props.help || $slots.help\" transfer>\n        <template #trigger>\n          <Icon v-bind=\"icons.help\" :class=\"nh.be('help')\"></Icon>\n        </template>\n        <slot name=\"help\">\n          <div :class=\"nh.be('help-tip')\">\n            {{ props.help }}\n          </div>\n        </slot>\n      </Tooltip>\n      <slot name=\"label\">\n        {{ props.label + (formProps.labelSuffix || '') }}\n      </slot>\n    </label>\n    <div\n      :class=\"{\n        [nh.be('control')]: true,\n        [nh.bem('control', 'no-label')]: !hasLabel,\n        [nh.bem('control', 'action')]: props.action\n      }\"\n      role=\"alert\"\n      aria-relevant=\"all\"\n      :style=\"controlStyle\"\n    >\n      <slot></slot>\n      <Transition :name=\"props.errorTransition\">\n        <div v-if=\"!props.hideErrorTip && isError\" :class=\"nh.be('error-tip')\">\n          <slot name=\"error\" :tip=\"errorTip\">\n            {{ errorTip }}\n          </slot>\n        </div>\n      </Transition>\n    </div>\n  </Column>\n</template>\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\n\nimport { computed, inject, toRef } from 'vue'\n\nimport { createIconProp, emitEvent, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { isPromise } from '@vexip-ui/utils'\nimport { formResetProps } from './props'\nimport { FORM_ACTIONS } from './symbol'\n\ndefineOptions({ name: 'FormReset' })\n\nconst _props = defineProps(formResetProps)\nconst props = useProps('formReset', _props, {\n  size: null,\n  locale: null,\n  type: 'default',\n  label: null,\n  dashed: null,\n  text: null,\n  simple: null,\n  ghost: null,\n  disabled: null,\n  loading: null,\n  circle: null,\n  loadingIcon: createIconProp(),\n  loadingEffect: null,\n  icon: createIconProp(),\n  color: null,\n  buttonType: null,\n  block: null,\n  onBeforeReset: {\n    default: null,\n    isFunc: true\n  }\n})\n\ndefineSlots<{\n  default: () => any,\n  icon: () => any,\n  loading: () => any\n}>()\n\nconst actions = inject(FORM_ACTIONS, null)\n\nconst nh = useNameHelper('form')\nconst locale = useLocale('form', toRef(props, 'locale'))\n\nconst isInherit = computed(() => !!actions || props.inherit)\n\nasync function handleReset() {\n  if (props.disabled) return\n\n  let result: unknown = true\n\n  if (typeof props.onBeforeReset === 'function') {\n    result = props.onBeforeReset()\n\n    if (isPromise(result)) {\n      result = await result\n    }\n  }\n\n  if (result !== false) {\n    actions?.reset()\n    emitEvent(props.onReset)\n  }\n}\n</script>\n\n<template>\n  <Button\n    v-bind=\"$attrs\"\n    :inherit=\"isInherit\"\n    :class=\"nh.be('reset')\"\n    :size=\"props.size\"\n    :type=\"props.type\"\n    :simple=\"props.simple\"\n    :ghost=\"props.ghost\"\n    :dashed=\"props.dashed\"\n    :text=\"props.text\"\n    :disabled=\"props.disabled\"\n    :loading=\"props.loading\"\n    :circle=\"props.circle\"\n    :loading-icon=\"props.loadingIcon\"\n    :loading-effect=\"props.loadingEffect\"\n    :icon=\"props.icon\"\n    :color=\"props.color\"\n    :button-type=\"props.buttonType\"\n    :block=\"props.block\"\n    :tag=\"props.tag\"\n    @click=\"handleReset\"\n  >\n    <slot>\n      {{ props.label || locale.reset }}\n    </slot>\n    <template v-if=\"$slots.icon\" #icon>\n      <slot name=\"icon\"></slot>\n    </template>\n    <template v-if=\"$slots.loading\" #loading>\n      <slot name=\"loading\"></slot>\n    </template>\n  </Button>\n</template>\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { FIELD_OPTIONS } from '@/components/form/symbol'\n\nimport { computed, inject, ref, toRef } from 'vue'\n\nimport { createIconProp, emitEvent, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useSetTimeout } from '@vexip-ui/hooks'\nimport { isPromise } from '@vexip-ui/utils'\nimport { formSubmitProps } from './props'\nimport { FORM_ACTIONS, FORM_PROPS } from './symbol'\n\ndefineOptions({ name: 'FormSubmit' })\n\nconst _props = defineProps(formSubmitProps)\nconst props = useProps('form-submit', _props, {\n  size: null,\n  locale: null,\n  type: 'primary',\n  label: null,\n  dashed: null,\n  text: null,\n  simple: null,\n  ghost: null,\n  disabled: null,\n  circle: null,\n  loadingIcon: createIconProp(),\n  loadingEffect: null,\n  icon: createIconProp(),\n  color: null,\n  buttonType: null,\n  block: null,\n  onBeforeSubmit: {\n    default: null,\n    isFunc: true\n  }\n})\n\ndefineSlots<{\n  default: () => any,\n  icon: () => any,\n  loading: () => any\n}>()\n\nconst fieldActions = inject(FIELD_OPTIONS, null)\n\nconst formProps = inject(FORM_PROPS, {})\nconst actions = inject(FORM_ACTIONS, null)\n\nconst nh = useNameHelper('form')\nconst locale = useLocale('form', toRef(props, 'locale'))\n\nconst { timer } = useSetTimeout()\n\nconst loading = ref(false)\n\nconst submit = ref<HTMLElement>()\n\nconst isNative = computed(() => formProps.method && formProps.action)\nconst isInherit = computed(() => !!actions || props.inherit)\nconst isLoading = computed(() => {\n  return loading.value || (fieldActions ? fieldActions.loading.value : false)\n})\n\ndefineExpose({ submit, isNative, isLoading })\n\nasync function handleSubmit() {\n  if (props.disabled || loading.value || !actions) return\n\n  loading.value = true\n\n  const errors = await actions.validate()\n\n  if (errors.length) {\n    emitEvent(props.onError, errors)\n  } else {\n    let result: unknown = true\n\n    if (typeof props.onBeforeSubmit === 'function') {\n      result = props.onBeforeSubmit()\n\n      if (isPromise(result)) {\n        result = await result\n      }\n    }\n\n    if (result !== false) {\n      emitEvent(props.onSubmit)\n\n      if (isNative.value) {\n        submit.value?.click()\n      }\n    }\n  }\n\n  timer.loading = setTimeout(() => {\n    loading.value = false\n  }, 300)\n}\n</script>\n\n<template>\n  <Button\n    v-bind=\"$attrs\"\n    :inherit=\"isInherit\"\n    :class=\"nh.be('submit')\"\n    :size=\"props.size\"\n    :type=\"props.type\"\n    :simple=\"props.simple\"\n    :ghost=\"props.ghost\"\n    :dashed=\"props.dashed\"\n    :text=\"props.text\"\n    :disabled=\"props.disabled\"\n    :loading=\"isLoading\"\n    :circle=\"props.circle\"\n    :loading-icon=\"props.loadingIcon\"\n    :loading-effect=\"props.loadingEffect\"\n    :icon=\"props.icon\"\n    :color=\"props.color\"\n    :button-type=\"props.buttonType\"\n    :block=\"props.block\"\n    :tag=\"props.tag\"\n    @click=\"handleSubmit\"\n  >\n    <slot>\n      {{ props.label || locale.submit }}\n    </slot>\n    <template v-if=\"$slots.icon\" #icon>\n      <slot name=\"icon\"></slot>\n    </template>\n    <template v-if=\"$slots.loading\" #loading>\n      <slot name=\"loading\"></slot>\n    </template>\n    <button\n      v-if=\"isNative\"\n      ref=\"submit\"\n      type=\"submit\"\n      style=\"display: none\"\n      @click.stop\n    ></button>\n  </Button>\n</template>\n", "import { buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { FullScreenType } from './symbol'\n\nexport const fullScreenProps = buildProps({\n  tag: String,\n  onToggle: eventProp<(full: false | FullScreenType) => void>()\n})\n\nexport type FullScreenProps = ExtractPropTypes<typeof fullScreenProps>\nexport type FullScreenCProps = ConfigurableProps<FullScreenProps, 'model'>\n", "export type FullScreenType = 'window' | 'browser'\n\nexport interface FullScreenSlotParams {\n  full: false | FullScreenType,\n  placeId: string,\n  enter: (type?: FullScreenType, zIndex?: number) => Promise<void>,\n  exit: () => Promise<void>,\n  toggle: (type?: FullScreenType, zIndex?: number) => Promise<void>\n}\n\nlet indexId = 0\n\nexport function getIndexId() {\n  return `__vxp-full-screen-id-${indexId++}`\n}\n", "<script setup lang=\"ts\">\nimport { Portal } from '@/components/portal'\n\nimport { computed, ref, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useFullScreen } from '@vexip-ui/hooks'\nimport { fullScreenProps } from './props'\nimport { getIndexId } from './symbol'\n\nimport type { FullScreenSlotParams, FullScreenType } from './symbol'\n\ndefineOptions({ name: 'FullScreen' })\n\nconst _props = defineProps(fullScreenProps)\nconst props = useProps('fullScreen', _props, {\n  tag: 'div'\n})\n\ndefineSlots<{ default: (params: FullScreenSlotParams) => any }>()\n\nconst nh = useNameHelper('full-screen')\n\nconst placeId = getIndexId()\n\nconst isEntered = ref(false)\nconst zIndex = ref<number>()\nconst fullType = ref<FullScreenType>()\n\nconst full = computed(() => isEntered.value && fullType.value!)\nconst className = computed(() => [nh.b(), nh.bs('vars'), { [nh.bm('full')]: full.value }])\nconst transferTo = computed(() => (fullType.value === 'window' ? 'body' : ''))\n\nconst {\n  enter: browserEnter,\n  exit: browserExit,\n  target: wrapper,\n  full: browserFull\n} = useFullScreen()\n\nwatch(browserFull, value => {\n  if (!value) {\n    isEntered.value = false\n    fullType.value = undefined\n  }\n})\nwatch(full, value => {\n  emitEvent(props.onToggle, value)\n})\n\nasync function enter(type: FullScreenType = 'window', customZIndex?: number) {\n  if (isEntered.value) {\n    await exit()\n  }\n\n  if (type !== 'window') {\n    await browserEnter()\n  }\n\n  isEntered.value = true\n  zIndex.value = customZIndex\n  fullType.value = type !== 'window' ? 'browser' : 'window'\n}\n\nasync function exit() {\n  await browserExit()\n\n  zIndex.value = undefined\n  isEntered.value = false\n  fullType.value = undefined\n}\n\nasync function toggle(type: FullScreenType = 'window', zIndex?: number) {\n  if (isEntered.value) {\n    if (fullType.value !== type) {\n      await enter(type, zIndex)\n    } else {\n      await exit()\n    }\n  } else {\n    await enter(type, zIndex)\n  }\n}\n\ndefineExpose({\n  full,\n  placeId,\n  wrapper,\n  enter,\n  exit,\n  toggle\n})\n</script>\n\n<template>\n  <Portal :to=\"transferTo\">\n    <component\n      :is=\"props.tag || 'div'\"\n      v-bind=\"$attrs\"\n      ref=\"wrapper\"\n      :class=\"className\"\n      :style=\"{ [nh.cv('z-index')]: zIndex }\"\n    >\n      <slot\n        :full=\"full\"\n        :place-id=\"placeId\"\n        :enter=\"enter\"\n        :exit=\"exit\"\n        :toggle=\"toggle\"\n      ></slot>\n      <div :id=\"placeId\" :class=\"nh.be('place')\" role=\"none\"></div>\n    </component>\n  </Portal>\n</template>\n", "import { computed, defineComponent, h, provide, reactive, toRef } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { gridProps } from './props'\nimport { GRID_STATE } from './symbol'\n\nimport type { CSSProperties } from 'vue'\nimport type { GridAlign, GridJustify, LayoutProp } from './symbol'\n\nconst numberRE = /^\\d+$/\n\nconst justifyList = Object.freeze<GridJustify[]>([\n  'start',\n  'end',\n  'center',\n  'space-around',\n  'space-between',\n  'space-evenly'\n])\nconst alignList = Object.freeze<GridAlign[]>(['top', 'middle', 'bottom', 'stretch'])\n\nexport default defineComponent({\n  name: 'Grid',\n  props: gridProps,\n  setup(_props, { slots }) {\n    const props = useProps('grid', _props, {\n      tag: 'div',\n      gap: 0,\n      rows: 'none',\n      columns: 24,\n      autoRows: 'auto',\n      autoColumns: 'auto',\n      dense: false,\n      justify: {\n        default: 'start',\n        validator: value => justifyList.includes(value)\n      },\n      align: {\n        default: 'stretch',\n        validator: value => alignList.includes(value)\n      },\n      cellFlex: false\n    })\n\n    const nh = useNameHelper('grid')\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bm(props.justify)]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.align)]: props.align !== 'stretch',\n        [nh.bm('dense')]: props.dense\n      }\n    })\n    const style = computed(() => {\n      const style: CSSProperties = {}\n\n      if (props.gap) {\n        style.gap = Array.isArray(props.gap)\n          ? `${props.gap[0]}px ${props.gap[1]}px`\n          : `${props.gap}px`\n      }\n\n      style.gridTemplateColumns = parseSizeLayout(props.columns)\n\n      if (props.rows !== 'none') {\n        style.gridTemplateRows = parseSizeLayout(props.rows)\n      }\n\n      if (props.autoRows !== 'auto') {\n        style.gridAutoRows = parseAutoLayout(props.autoRows)\n      }\n\n      if (props.autoColumns !== 'auto') {\n        style.gridAutoColumns = parseAutoLayout(props.autoColumns)\n      }\n\n      return style\n    })\n    const cellFlex = computed(() => {\n      if (props.cellFlex === true) {\n        return {\n          justify: 'start',\n          align: 'top'\n        } as const\n      } else if (props.cellFlex) {\n        return {\n          justify: 'start',\n          align: 'top',\n          ...props.cellFlex\n        } as const\n      }\n\n      return false\n    })\n\n    provide(GRID_STATE, reactive({ cellFlex, columns: toRef(props, 'columns') }))\n\n    function parseSizeLayout(value: LayoutProp) {\n      if (typeof value === 'number') {\n        return `repeat(${value}, 1fr)`\n      }\n\n      if (typeof value === 'string') {\n        return numberRE.test(value.trim()) ? `repeat(${value}, 1fr)` : value\n      }\n\n      if (Array.isArray(value)) {\n        return value\n          .map(item => {\n            if (typeof item === 'number') {\n              return `${item}fr`\n            }\n\n            if (typeof item === 'string') {\n              return numberRE.test(item.trim()) ? `${item}fr` : item\n            }\n\n            return item\n          })\n          .join(' ')\n      }\n\n      return value\n    }\n\n    function parseAutoLayout(value: LayoutProp) {\n      if (typeof value === 'number') {\n        return `${value}fr`\n      }\n\n      if (typeof value === 'string') {\n        return numberRE.test(value.trim()) ? `repeat(${value}, 1fr)` : value\n      }\n\n      if (Array.isArray(value)) {\n        return value\n          .map(item => {\n            if (typeof item === 'number') {\n              return `${item}fr`\n            }\n\n            if (typeof item === 'string') {\n              return numberRE.test(item.trim()) ? `${item}fr` : item\n            }\n\n            return item\n          })\n          .join(' ')\n      }\n\n      return value\n    }\n\n    return () =>\n      h(\n        props.tag || 'div',\n        {\n          class: className.value,\n          style: style.value\n        },\n        {\n          default: () => slots.default?.()\n        }\n      )\n  }\n})\n", "import { booleanProp, buildProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const highlightProps = buildProps({\n  content: String,\n  keyWords: Array as PropType<string[]>,\n  ignoreCase: booleanProp\n})\n\nexport type HighlightProps = ExtractPropTypes<typeof highlightProps>\nexport type HighlightCProps = ConfigurableProps<HighlightProps, 'content' | 'keyWords'>\n", "<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { highlightProps } from './props'\n\ndefineOptions({ name: 'Highlight' })\n\nconst _props = defineProps(highlightProps)\nconst props = useProps('highlight', _props, {\n  content: {\n    default: '',\n    static: true\n  },\n  keyWords: {\n    default: () => [],\n    static: true\n  },\n  ignoreCase: false\n})\n\nconst nh = useNameHelper('highlight')\n\nconst splitRE = computed(() => {\n  const keyWords = props.keyWords?.filter(Boolean)\n\n  if (!keyWords?.length) {\n    return null\n  }\n\n  return new RegExp(\n    `(${keyWords.sort((p, n) => n.length - p.length).join('|')})`,\n    `${props.ignoreCase ? 'i' : ''}g`\n  )\n})\nconst renderTexts = computed(() => {\n  if (!splitRE.value || !props.content) {\n    return [{ isKey: false, text: props.content }]\n  }\n\n  return props.content.split(splitRE.value).map(text => {\n    return { isKey: splitRE.value!.test(text), text }\n  })\n})\n</script>\n\n<template>\n  <div :class=\"[nh.b(), nh.bs('vars'), props.inherit && nh.bm('inherit')]\">\n    <template v-for=\"(item, index) in renderTexts\" :key=\"index\">\n      <span v-if=\"item.isKey\" :class=\"nh.be('key-word')\">\n        <slot name=\"light\" :text=\"item.text\">\n          {{ item.text }}\n        </slot>\n      </span>\n      <span v-else>\n        <slot :text=\"item.text\">\n          {{ item.text }}\n        </slot>\n      </span>\n    </template>\n  </div>\n</template>\n", "import { booleanNumberProp, booleanProp, buildProps, eventProp, localeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type {\n  ViewerActionLayout,\n  ViewerState,\n  ViewerToolbarAction,\n  ViewerToolbarPlacement\n} from './symbol'\n\nexport const viewerProps = buildProps({\n  locale: localeProp('viewer'),\n  width: [String, Number],\n  height: [String, Number],\n  moveDisabled: booleanProp,\n  zoomDisabled: booleanProp,\n  zoomDelta: Number,\n  zoomMin: Number,\n  zoomMax: Number,\n  flipDisabled: booleanProp,\n  rotateDisabled: booleanProp,\n  rotateDelta: Number,\n  fullDisabled: booleanProp,\n  toolbarPlacement: String as PropType<ViewerToolbarPlacement>,\n  actions: Array as PropType<ViewerToolbarAction[]>,\n  toolbarFade: booleanNumberProp,\n  noTransition: booleanProp,\n  centerScale: booleanProp,\n  actionLayout: Array as PropType<ViewerActionLayout>,\n  onMoveStart: eventProp<(state: ViewerState) => void>(),\n  onMove: eventProp<(state: ViewerState) => void>(),\n  onMoveEnd: eventProp<(state: ViewerState) => void>(),\n  onWheel: eventProp<(sign: 1 | -1, state: ViewerState) => void>(),\n  onRotate: eventProp<(deg: number, state: ViewerState) => void>(),\n  onFlipX: eventProp<(flip: boolean, state: ViewerState) => void>(),\n  onFlipY: eventProp<(flip: boolean, state: ViewerState) => void>(),\n  onZoom: eventProp<(zoom: number, state: ViewerState) => void>(),\n  onFull: eventProp<(full: boolean, state: ViewerState) => void>(),\n  onReset: eventProp<(state: ViewerState) => void>()\n})\n\nexport type ViewerProps = ExtractPropTypes<typeof viewerProps>\nexport type ViewerCProps = ConfigurableProps<ViewerProps>\n", "import type { ClassType, StyleType } from '@vexip-ui/config'\n\nexport type ViewerToolbarPlacement =\n  | 'top'\n  | 'top-start'\n  | 'top-end'\n  | 'bottom'\n  | 'bottom-start'\n  | 'bottom-end'\n  | 'left'\n  | 'left-start'\n  | 'left-end'\n  | 'right'\n  | 'right-start'\n  | 'right-end'\nexport type ViewerPresetAction =\n  | 'rotate-right'\n  | 'rotate-left'\n  | 'flip-x'\n  | 'flip-y'\n  | 'zoom-in'\n  | 'zoom-out'\n  | 'full-screen'\n  | 'full-screen-exit'\n  | 'reset'\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type ViewerActionName = ViewerPresetAction | (string & {})\nexport type ViewerActionLayout = ViewerActionName[][]\n\nexport interface ViewerState {\n  x: number,\n  y: number,\n  zoom: number,\n  rotate: number,\n  flipX: boolean,\n  flipY: boolean,\n  full: boolean,\n  moving: boolean,\n  [custom: string]: unknown\n}\n\nexport interface ViewerToolbarAction {\n  name: string,\n  process: (state: ViewerState) => void,\n  icon?: Record<string, any> | (() => any),\n  iconRenderer?: (data: { state: ViewerState }) => any,\n  class?: ClassType | ((state: ViewerState) => string),\n  title?: string | ((state: ViewerState) => string),\n  iconScale?: number | ((state: ViewerState) => number),\n  iconStyle?: StyleType | ((state: ViewerState) => StyleType),\n  /** @deprecated */\n  divided?: boolean | ((state: ViewerState) => boolean),\n  hidden?: boolean | ((state: ViewerState) => boolean),\n  disabled?: boolean | ((state: ViewerState) => boolean)\n}\n\nexport const enum InternalActionName {\n  RotateRight = 'rotate-right',\n  RotateLeft = 'rotate-left',\n  FlipX = 'flip-x',\n  FlipY = 'flip-y',\n  ZoomIn = 'zoom-in',\n  ZoomOut = 'zoom-out',\n  FullScreen = 'full-screen',\n  Reset = 'reset'\n}\n\nconst defaultActionLayout: ViewerActionLayout = [\n  ['rotate-right', 'rotate-left'],\n  ['flip-x', 'flip-y'],\n  ['zoom-in', 'zoom-out'],\n  ['full-screen'],\n  ['reset']\n]\n\nfor (let i = 0, len = defaultActionLayout.length; i < len; ++i) {\n  defaultActionLayout[i] = Object.freeze(defaultActionLayout[i]) as any\n}\n\nexport const viewerDefaultActionLayout = Object.freeze(defaultActionLayout) as ViewerActionLayout\n", "<script setup lang=\"ts\">\nimport { Divider } from '@/components/divider'\nimport { Icon } from '@/components/icon'\nimport { Renderer } from '@/components/renderer'\n\nimport { computed, h, nextTick, onMounted, reactive, ref, toRef } from 'vue'\n\nimport { emitEvent, useIcons, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useFullScreen, useModifier, useMoving, useSetTimeout } from '@vexip-ui/hooks'\nimport { boundRange, callIfFunc, toCssSize, toFixed } from '@vexip-ui/utils'\nimport { viewerProps } from './props'\nimport { InternalActionName, viewerDefaultActionLayout } from './symbol'\n\nimport type { ViewerActionLayout, ViewerState, ViewerToolbarAction } from './symbol'\n\ndefineOptions({ name: 'Viewer' })\n\nconst _props = defineProps(viewerProps)\nconst props = useProps('viewer', _props, {\n  locale: null,\n  width: '100%',\n  height: '100%',\n  moveDisabled: false,\n  zoomDisabled: false,\n  zoomDelta: 0.15,\n  zoomMin: 0.1,\n  zoomMax: Infinity,\n  rotateDisabled: false,\n  rotateDelta: 90,\n  flipDisabled: false,\n  fullDisabled: false,\n  toolbarPlacement: 'bottom',\n  actions: () => [],\n  toolbarFade: false,\n  noTransition: false,\n  centerScale: false,\n  actionLayout: () => []\n})\n\ndefineSlots<{\n  default: (params: { state: ViewerState }) => any,\n  [action: `action-${string}`]: (params: { state: ViewerState }) => any\n}>()\n\nconst nh = useNameHelper('viewer')\nconst locale = useLocale('viewer', toRef(props, 'locale'))\nconst icons = useIcons()\n\nconst { timer } = useSetTimeout()\nconst toolbarActive = ref(false)\n\nconst zoom = ref(1)\nconst rotate = ref(0)\nconst flipX = ref(false)\nconst flipY = ref(false)\n\nconst viewer = ref<HTMLElement>()\nconst transition = ref<HTMLElement>()\n\nconst { supported: fullSupported, full, enter: enterFull, exit: exitFull } = useFullScreen(viewer)\nconst {\n  target: container,\n  x: currentLeft,\n  y: currentTop,\n  moving\n} = useMoving({\n  onStart: (_, event) => {\n    if (props.moveDisabled || event.button > 0) {\n      return false\n    }\n\n    emitEvent(props.onMoveStart, getState())\n  },\n  onMove: () => {\n    emitEvent(props.onMoveStart, getState())\n  },\n  onEnd: () => {\n    emitEvent(props.onMoveStart, getState())\n  }\n})\n\nconst state = reactive({\n  zoom,\n  rotate,\n  flipX,\n  flipY,\n  full,\n  moving,\n  x: currentLeft,\n  y: currentTop\n}) as ViewerState\n\nconst zoomOrigin = {\n  x: 0,\n  y: 0\n}\n\nuseModifier({\n  target: viewer,\n  passive: false,\n  onKeyDown: (event, modifier) => {\n    if (modifier.up || modifier.down || modifier.left || modifier.right) {\n      event.preventDefault()\n\n      const current = modifier.up || modifier.down ? currentTop : currentLeft\n      const step = modifier.up || modifier.left ? -10 : 10\n\n      current.value += event.ctrlKey ? 5 * step : step\n\n      modifier.resetAll()\n    }\n  }\n})\n\nfunction getState() {\n  return state\n}\n\nfunction getActionProp<\n  K extends Exclude<keyof ViewerToolbarAction, 'name' | 'icon' | 'iconRenderer' | 'process'>\n>(action: ViewerToolbarAction, prop: K) {\n  return callIfFunc(action[prop] as any, state) as Exclude<\n    ViewerToolbarAction[K],\n    (...args: any) => any\n  >\n}\n\nfunction getActionClass(name: string) {\n  return nh.be(name)\n}\n\nconst internalActions: ViewerToolbarAction[] = [\n  {\n    name: InternalActionName.RotateRight,\n    process: () => handleRotate(props.rotateDelta),\n    iconRenderer: () => h(Icon, icons.value.rotateRight),\n    class: getActionClass(InternalActionName.RotateRight),\n    title: () => locale.value.rotateRight,\n    hidden: () => props.rotateDisabled\n  },\n  {\n    name: InternalActionName.RotateLeft,\n    process: () => handleRotate(-1 * props.rotateDelta),\n    iconRenderer: () => h(Icon, icons.value.rotateLeft),\n    class: getActionClass(InternalActionName.RotateLeft),\n    title: () => locale.value.rotateLeft,\n    hidden: () => props.rotateDisabled\n  },\n  {\n    name: InternalActionName.FlipX,\n    process: () => toggleFlipX(),\n    iconRenderer: () => h(Icon, icons.value.flipX),\n    class: getActionClass(InternalActionName.FlipX),\n    title: () => locale.value.flipHorizontal,\n    hidden: () => props.flipDisabled\n  },\n  {\n    name: InternalActionName.FlipY,\n    process: () => toggleFlipY(),\n    iconRenderer: () => h(Icon, icons.value.flipY),\n    class: getActionClass(InternalActionName.FlipY),\n    title: () => locale.value.flipVertical,\n    hidden: () => props.flipDisabled\n  },\n  {\n    name: InternalActionName.ZoomIn,\n    process: () => handleZoom(props.zoomDelta),\n    iconRenderer: () => h(Icon, icons.value.zoomIn),\n    class: getActionClass(InternalActionName.ZoomIn),\n    title: () => locale.value.zoomIn,\n    hidden: () => props.zoomDisabled\n  },\n  {\n    name: InternalActionName.ZoomOut,\n    process: () => handleZoom(-1 * props.zoomDelta),\n    iconRenderer: () => h(Icon, icons.value.zoonOut),\n    class: getActionClass(InternalActionName.ZoomOut),\n    title: () => locale.value.zoomOut,\n    hidden: () => props.zoomDisabled\n  },\n  {\n    name: InternalActionName.FullScreen,\n    process: () => toggleFull(!full.value),\n    iconRenderer: () => h(Icon, full.value ? icons.value.resetScreen : icons.value.fullScreen),\n    class: getActionClass(InternalActionName.FullScreen),\n    title: () => (full.value ? locale.value.fullScreenExit : locale.value.fullScreen),\n    hidden: () => props.fullDisabled\n  },\n  {\n    name: InternalActionName.Reset,\n    process: () => handleReset(),\n    iconRenderer: () => h(Icon, icons.value.refresh),\n    class: getActionClass(InternalActionName.Reset),\n    title: () => locale.value.reset\n  }\n]\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('draggable')]: !props.moveDisabled,\n    [nh.bm('resizable')]: !props.zoomDisabled,\n    [nh.bm('full')]: full.value,\n    [nh.bm('moving')]: moving.value,\n    [nh.bm('static')]: props.noTransition\n  }\n})\nconst style = computed(() => {\n  return {\n    width: toCssSize(props.width),\n    height: toCssSize(props.height)\n  }\n})\nconst toolbarVertical = computed(() => {\n  const [layout] = props.toolbarPlacement.split('-')\n\n  return layout === 'left' || layout === 'right'\n})\nconst toolbarFade = computed(() => {\n  return typeof props.toolbarFade === 'number' ? props.toolbarFade : props.toolbarFade ? 1500 : 0\n})\nconst toolbarClass = computed(() => {\n  return {\n    [nh.be('toolbar')]: true,\n    [nh.bem('toolbar', 'active')]: toolbarFade.value < 300 || toolbarActive.value,\n    [nh.bem('toolbar', props.toolbarPlacement)]: true,\n    [nh.bem('toolbar', 'vertical')]: toolbarVertical.value\n  }\n})\nconst contentStyle = computed(() => {\n  return {\n    transform: `translate3d(${currentLeft.value}px, ${currentTop.value}px, 0) scale(${zoom.value})`\n  }\n})\nconst transitionStyle = computed(() => {\n  return {\n    transform: `scaleX(${flipX.value ? -1 : 1}) scaleY(${flipY.value ? -1 : 1}) rotate(${\n      rotate.value\n    }deg)`\n  }\n})\nconst allActions = computed(() => {\n  const map = new Map<string, ViewerToolbarAction>()\n  const actions: ViewerToolbarAction[][] = []\n\n  internalActions.concat(props.actions).forEach(action => {\n    if (action.name) {\n      map.set(action.name, action)\n    }\n  })\n\n  let layout: ViewerActionLayout\n\n  if (!props.actionLayout?.length) {\n    layout = [...viewerDefaultActionLayout]\n\n    if (props.actions.length) {\n      layout.push(props.actions.map(action => action.name))\n    }\n  } else {\n    layout = props.actionLayout\n  }\n\n  for (const names of layout) {\n    const group = names.map(name => map.get(name)!).filter(Boolean)\n\n    group.length && actions.push(group)\n  }\n\n  return actions\n})\n\ndefineExpose({\n  moving,\n  fullSupported,\n  state,\n  viewer,\n  container,\n  transition,\n  handleRotate,\n  toggleFlipHorizontal: toggleFlipX,\n  toggleFlipVertical: toggleFlipY,\n  handleZoom,\n  toggleFull,\n  handleReset\n})\n\nonMounted(() => {\n  if (container.value) {\n    const rect = container.value.getBoundingClientRect()\n\n    zoomOrigin.x = rect.left + rect.width * 0.5\n    zoomOrigin.y = rect.top + rect.height * 0.5\n  }\n})\n\nfunction handleWheel(event: WheelEvent) {\n  event.stopPropagation()\n  event.preventDefault()\n\n  const sign = event.deltaY > 0 ? -1 : 1\n\n  zoomOrigin.x = event.clientX\n  zoomOrigin.y = event.clientY\n\n  emitEvent(props.onWheel, sign, state)\n  handleZoom(sign * props.zoomDelta)\n}\n\nfunction handleRotate(deg: number, emit = true) {\n  if (props.rotateDisabled) return\n\n  rotate.value += deg\n\n  if (props.noTransition && rotate.value % 360 === 0) {\n    rotate.value = 0\n  }\n\n  emit && emitEvent(props.onRotate, deg, state)\n\n  if (props.noTransition) {\n    nextTick(normalizeProps)\n  }\n}\n\nfunction toggleFlipX(target = !flipX.value, emit = true) {\n  if (props.flipDisabled) return\n\n  flipX.value = target\n  emit && emitEvent(props.onFlipX, target, state)\n}\n\nfunction toggleFlipY(target = !flipY.value, emit = true) {\n  if (props.flipDisabled) return\n\n  flipY.value = target\n  emit && emitEvent(props.onFlipY, target, state)\n}\n\nfunction handleZoom(ratio: number, emit = true) {\n  if (props.zoomDisabled || !container.value) return\n\n  const containerRect = container.value.getBoundingClientRect()\n  const { x, y } = zoomOrigin\n  const { offsetWidth, offsetHeight } = container.value\n  const prevZoom = zoom.value\n\n  zoom.value = toFixed(boundRange(zoom.value + ratio, props.zoomMin, props.zoomMax), 5)\n\n  const delta = zoom.value / prevZoom - 1\n  const originX = delta * offsetWidth * 0.5\n  const originY = delta * offsetHeight * 0.5\n\n  if (!props.centerScale) {\n    currentLeft.value -= delta * (x - containerRect.left - currentLeft.value) - originX\n    currentTop.value -= delta * (y - containerRect.top - currentTop.value) - originY\n  }\n\n  emit && emitEvent(props.onZoom, zoom.value, state)\n}\n\nasync function toggleFull(isFull = !full.value, emit = true) {\n  isFull ? await enterFull() : await exitFull()\n\n  console.log(full.value, state.full)\n  emit && emitEvent(props.onFull, isFull, state)\n}\n\nfunction handleReset(emit = true) {\n  currentTop.value = 0\n  currentLeft.value = 0\n  rotate.value = 0\n  flipX.value = false\n  flipY.value = false\n  zoom.value = 1\n\n  emit && emitEvent(props.onReset, state)\n}\n\nfunction normalizeProps() {\n  if (props.noTransition) {\n    if (rotate.value % 360 === 0) {\n      rotate.value = 0\n    }\n\n    return\n  }\n\n  const queue: Array<() => void> = []\n\n  if (rotate.value % 360 === 0) {\n    queue.push(\n      () => {\n        if (transition.value) {\n          transition.value.style.transitionDuration = '0ms'\n        }\n      },\n      () => {\n        rotate.value = 0\n      },\n      () => {\n        if (transition.value) {\n          transition.value.style.transitionDuration = ''\n        }\n      }\n    )\n  }\n\n  const run = () => {\n    queue.shift()?.()\n    queue.length && requestAnimationFrame(run)\n  }\n\n  run()\n}\n\nfunction handleEnterToolbar() {\n  clearTimeout(timer.toolbarFade)\n  toolbarActive.value = true\n}\n\nfunction handleLeaveToolbar() {\n  clearTimeout(timer.toolbarFade)\n\n  if (toolbarFade.value >= 300) {\n    timer.toolbarFade = setTimeout(() => {\n      toolbarActive.value = false\n    }, toolbarFade.value)\n  }\n}\n</script>\n\n<template>\n  <div\n    ref=\"viewer\"\n    :class=\"className\"\n    tabindex=\"0\"\n    :style=\"style\"\n  >\n    <div ref=\"container\" :class=\"nh.be('container')\" @wheel=\"handleWheel\">\n      <div :class=\"nh.be('content')\" :style=\"contentStyle\">\n        <div\n          ref=\"transition\"\n          :class=\"nh.be('transition')\"\n          :style=\"transitionStyle\"\n          @transitionend=\"normalizeProps\"\n        >\n          <slot :state=\"state\"></slot>\n        </div>\n      </div>\n    </div>\n    <div\n      :class=\"toolbarClass\"\n      role=\"toolbar\"\n      @mouseenter=\"handleEnterToolbar\"\n      @mouseleave=\"handleLeaveToolbar\"\n    >\n      <template v-for=\"(group, index) in allActions\" :key=\"index\">\n        <template v-for=\"action in group\" :key=\"action.name\">\n          <template v-if=\"!getActionProp(action, 'hidden')\">\n            <button\n              type=\"button\"\n              :class=\"[\n                {\n                  [nh.be('action')]: true,\n                  [nh.bem('action', 'disabled')]: getActionProp(action, 'disabled')\n                },\n                getActionProp(action, 'class')\n              ]\"\n              :title=\"getActionProp(action, 'title')\"\n              @click.stop=\"action.process(state)\"\n            >\n              <slot :name=\"`action-${action.name}`\" :state=\"state\">\n                <Renderer\n                  v-if=\"action.iconRenderer\"\n                  :renderer=\"action.iconRenderer\"\n                  :data=\"state\"\n                ></Renderer>\n                <Icon\n                  v-else-if=\"action.icon\"\n                  :icon=\"action.icon\"\n                  :style=\"getActionProp(action, 'iconStyle')\"\n                  :scale=\"getActionProp(action, 'iconScale') || 1\"\n                ></Icon>\n                <template v-else>\n                  {{ action.name }}\n                </template>\n              </slot>\n            </button>\n          </template>\n        </template>\n        <Divider\n          v-if=\"index !== allActions.length - 1\"\n          inherit\n          :vertical=\"!toolbarVertical\"\n        ></Divider>\n      </template>\n    </div>\n  </div>\n</template>\n", "import { booleanProp, booleanStringProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ImageObjectFit, ImageSkeletonProps } from './symbol'\n\nexport const imageProps = buildProps({\n  src: String,\n  fallbackSrc: String,\n  alt: String,\n  fit: String as PropType<ImageObjectFit>,\n  width: [String, Number],\n  height: [String, Number],\n  imgAttrs: Object as PropType<Record<string, any>>,\n  lazy: booleanProp,\n  root: [String, Object, Function] as PropType<unknown>,\n  rootMargin: String,\n  preview: booleanProp,\n  skeleton: {\n    type: [Boolean, Object] as PropType<boolean | ImageSkeletonProps>,\n    default: null\n  },\n  placeholder: String,\n  errorTip: String,\n  radius: Number,\n  border: booleanStringProp,\n  previewSrc: String,\n  viewerTransfer: booleanStringProp,\n  onLoad: eventProp<(event: Event) => void>(),\n  onError: eventProp<(event: Event) => void>(),\n  onPreview: eventProp<(src: string) => void>()\n})\n\nexport type ImageProps = ExtractPropTypes<typeof imageProps>\nexport type ImageCProps = ConfigurableProps<ExtractPropTypes<typeof imageProps>, 'src'>\n\nexport const imageGroupProps = buildProps({\n  showAll: booleanProp,\n  preview: booleanProp,\n  viewerTransfer: booleanStringProp,\n  onPreview: eventProp<(src: string, srcList: string[]) => void>()\n})\n\nexport type ImageGroupProps = ExtractPropTypes<typeof imageGroupProps>\nexport type ImageGroupCProps = ConfigurableProps<ExtractPropTypes<typeof imageGroupProps>>\n\nexport const imageViewerProps = buildProps({\n  active: booleanProp,\n  index: Number,\n  srcList: [String, Array] as PropType<string | string[]>,\n  transfer: booleanStringProp,\n  onToggle: eventProp<(active: boolean) => void>(),\n  onChange: eventProp<(index: number, src: string) => void>(),\n  onPrev: eventProp<(index: number, src: string) => void>(),\n  onNext: eventProp<(index: number, src: string) => void>(),\n  onClose: eventProp(),\n  onShow: eventProp(),\n  onHide: eventProp()\n})\n\nexport type ImageViewerProps = ExtractPropTypes<typeof imageViewerProps>\nexport type ImageViewerCProps = ConfigurableProps<ExtractPropTypes<typeof imageViewerProps>, 'srcs'>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Masker } from '@/components/masker'\nimport { Viewer } from '@/components/viewer'\n\nimport { computed, ref, watch } from 'vue'\n\nimport { emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { boundRange, ensureArray, isDefined } from '@vexip-ui/utils'\nimport { imageViewerProps } from './props'\n\ndefineOptions({ name: 'ImageViewer' })\n\nconst _props = defineProps(imageViewerProps)\nconst props = useProps('imageViewer', _props, {\n  active: false,\n  index: 0,\n  srcList: {\n    default: '',\n    static: true\n  },\n  transfer: false\n})\n\nconst emit = defineEmits(['update:active', 'update:index'])\n\nconst nh = useNameHelper('image-viewer')\nconst icons = useIcons()\n\nconst currentActive = ref(props.active)\nconst currentIndex = ref(props.index)\n\nconst viewer = ref<InstanceType<typeof Viewer>>()\n\nconst className = computed(() => {\n  return [nh.b(), nh.ns('image-vars'), props.inherit && nh.bm('inherit')]\n})\nconst srcArray = computed(() => ensureArray(isDefined(props.srcList) ? props.srcList : ''))\nconst prevDisabled = computed(() => currentIndex.value <= 0)\nconst nextDisabled = computed(() => currentIndex.value >= srcArray.value.length - 1)\n\nwatch(\n  () => props.active,\n  value => {\n    currentActive.value = value\n  }\n)\nwatch(\n  () => props.index,\n  value => {\n    currentIndex.value = value\n  }\n)\nwatch(() => srcArray.value.length, verifyIndex)\n\ndefineExpose({\n  currentActive,\n  currentIndex,\n  prevDisabled,\n  nextDisabled,\n  viewer\n})\n\nfunction setActive(active: boolean) {\n  if (currentActive.value === active) return\n\n  currentActive.value = active\n\n  emit('update:active', active)\n  emitEvent(props.onToggle, active)\n}\n\nfunction verifyIndex() {\n  currentIndex.value = boundRange(currentIndex.value, 0, srcArray.value.length - 1)\n}\n\nfunction handleChange() {\n  const value = currentIndex.value\n\n  viewer.value?.handleReset()\n  emit('update:index', value)\n  emitEvent(props.onChange, value, srcArray.value[value])\n}\n\nfunction handlePrev() {\n  if (prevDisabled.value) return\n\n  const prev = currentIndex.value\n\n  currentIndex.value--\n  verifyIndex()\n  currentIndex.value !== prev && handleChange()\n  emitEvent(props.onPrev, currentIndex.value, srcArray.value[currentIndex.value])\n}\n\nfunction handleNext() {\n  if (nextDisabled.value) return\n\n  const prev = currentIndex.value\n\n  currentIndex.value++\n  verifyIndex()\n  currentIndex.value !== prev && handleChange()\n  emitEvent(props.onNext, currentIndex.value, srcArray.value[currentIndex.value])\n}\n\nfunction handleClose() {\n  setActive(false)\n  emitEvent(props.onClose)\n}\n\nfunction handleShow() {\n  emitEvent(props.onShow)\n}\n\nfunction handleHide() {\n  emitEvent(props.onHide)\n}\n</script>\n\n<template>\n  <Masker\n    v-slot=\"{ show }\"\n    v-model:active=\"currentActive\"\n    :inherit=\"props.inherit\"\n    :class=\"className\"\n    closable\n    auto-remove\n    :transfer=\"props.transfer\"\n    @show=\"handleShow\"\n    @hide=\"handleHide\"\n  >\n    <div v-show=\"show\" :class=\"nh.be('wrapper')\">\n      <Viewer ref=\"viewer\">\n        <slot :src=\"srcArray[currentIndex]\">\n          <img :src=\"srcArray[currentIndex]\" />\n        </slot>\n      </Viewer>\n      <template v-if=\"srcArray.length > 1\">\n        <button\n          type=\"button\"\n          :class=\"[nh.be('prev'), prevDisabled && nh.bem('prev', 'disabled')]\"\n          @click.stop=\"handlePrev\"\n        >\n          <slot name=\"prev\" :disabled=\"prevDisabled\">\n            <div :class=\"nh.be('prev-handler')\">\n              <Icon\n                v-bind=\"icons.angleLeft\"\n                :scale=\"+(icons.angleLeft.scale || 1) * 1.4\"\n                label=\"prev\"\n              ></Icon>\n            </div>\n          </slot>\n        </button>\n        <button\n          type=\"button\"\n          :class=\"[nh.be('next'), nextDisabled && nh.bem('next', 'disabled')]\"\n          @click.stop=\"handleNext\"\n        >\n          <slot name=\"next\" :disabled=\"prevDisabled\">\n            <div :class=\"nh.be('next-handler')\">\n              <Icon\n                v-bind=\"icons.angleRight\"\n                :scale=\"+(icons.angleRight.scale || 1) * 1.4\"\n                label=\"next\"\n              ></Icon>\n            </div>\n          </slot>\n        </button>\n      </template>\n      <button type=\"button\" :class=\"nh.be('close')\" @click.stop=\"handleClose\">\n        <slot name=\"close\">\n          <div :class=\"nh.be('close-handler')\">\n            <Icon\n              v-bind=\"icons.close\"\n              :scale=\"+(icons.close.scale || 1) * 1.4\"\n              label=\"close\"\n            ></Icon>\n          </div>\n        </slot>\n      </button>\n    </div>\n  </Masker>\n</template>\n", "import { booleanProp, booleanStringProp, buildProps, iconProp, sizeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const skeletonProps = buildProps({\n  size: sizeProp,\n  width: [Number, String],\n  height: [Number, String],\n  repeat: Number,\n  tag: String,\n  activated: booleanProp,\n  image: booleanProp,\n  imageIcon: iconProp,\n  iconScale: Number,\n  round: booleanProp,\n  circle: booleanProp,\n  block: booleanProp,\n  spread: Number,\n  loading: booleanProp\n})\n\nexport type SkeletonProps = ExtractPropTypes<typeof skeletonProps>\nexport type SkeletonCProps = ConfigurableProps<SkeletonProps>\n\nexport const skeletonGroupProps = buildProps({\n  size: sizeProp,\n  tag: booleanStringProp,\n  itemTag: String,\n  activated: booleanProp,\n  round: booleanProp,\n  circle: booleanProp,\n  block: booleanProp,\n  loading: booleanProp\n})\n\nexport type SkeletonGroupProps = ExtractPropTypes<typeof skeletonGroupProps>\nexport type SkeletonGroupCProps = ConfigurableProps<SkeletonGroupProps>\n", "import type { InjectionKey } from 'vue'\nimport type { ComponentSize } from '@vexip-ui/config'\n\nexport interface GroupState {\n  size: ComponentSize,\n  itemTag: string,\n  activated: boolean,\n  round: boolean,\n  circle: boolean,\n  block: boolean,\n  loading: boolean\n}\n\nexport const GROUP_STATE: InjectionKey<GroupState> = Symbol('GROUP_STATE')\n", "import { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, h, inject, renderSlot } from 'vue'\n\nimport { createIconProp, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { skeletonProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nexport default defineComponent({\n  name: 'Skeleton',\n  inheritAttrs: false,\n  props: skeletonProps,\n  setup(_props, { attrs, slots }) {\n    const props = useProps('skeleton', _props, {\n      size: null,\n      width: null,\n      height: null,\n      repeat: {\n        default: 1,\n        validator: (value: number) => value > 0\n      },\n      tag: 'div',\n      activated: null,\n      image: false,\n      imageIcon: createIconProp(),\n      iconScale: 4,\n      round: null,\n      circle: null,\n      block: null,\n      spread: 0,\n      loading: null\n    })\n\n    const groupState = inject(GROUP_STATE, {} as any)\n\n    const nh = useNameHelper('skeleton')\n    const icons = useIcons()\n\n    const activated = computed(() => {\n      return props.activated ?? groupState.activated ?? false\n    })\n    const round = computed(() => {\n      return props.round ?? groupState.round ?? false\n    })\n    const circle = computed(() => {\n      return props.circle ?? groupState.circle ?? false\n    })\n    const block = computed(() => {\n      return props.block ?? groupState.block ?? false\n    })\n    const loading = computed(() => {\n      return props.loading ?? groupState.loading ?? true\n    })\n    const tag = computed(() => {\n      return props.tag || groupState.itemTag || 'div'\n    })\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: Object.keys(groupState).length || props.inherit,\n        [nh.bm(props.size)]: props.size ?? groupState?.size,\n        [nh.bm('block')]: block.value,\n        [nh.bm('image')]: props.image,\n        [nh.bm('round')]: round.value && !circle.value,\n        [nh.bm('circle')]: circle.value,\n        [nh.bm('activated')]: activated.value\n      }\n    })\n    const style = computed(() => {\n      const style: Record<string, string> = {}\n\n      if (props.width !== null) {\n        style[nh.cv('width')] = parseSize(props.width)\n      }\n\n      if (props.height !== null) {\n        style[nh.cv('height')] = parseSize(props.height)\n      }\n\n      if (props.spread) {\n        style[nh.cv('spread')] = parseSize(props.spread)\n      }\n\n      return style\n    })\n\n    function parseSize(value: string | number) {\n      if (typeof value === 'number') {\n        return `${value}px`\n      }\n\n      value = value.trim()\n\n      if (/\\d$/.test(value)) {\n        return `${value}px`\n      }\n\n      return value\n    }\n\n    function renderSkeleton() {\n      if (!loading.value) {\n        return renderSlot(slots, 'default')\n      }\n\n      return h(\n        tag.value || 'div',\n        {\n          ...attrs,\n          class: [className.value, attrs.class],\n          style: [style.value, attrs.style]\n        },\n        props.image\n          ? [\n            <Icon\n              key={1}\n              {...icons.value.image}\n              icon={props.imageIcon || icons.value.image.icon}\n              scale={props.iconScale}\n            ></Icon>\n            ]\n          : []\n      )\n    }\n\n    return () => {\n      if (props.repeat > 1) {\n        return Array.from({ length: props.repeat }, () => renderSkeleton())\n      }\n\n      return renderSkeleton()\n    }\n  }\n})\n", "import type { InjectionKey } from 'vue'\nimport type { ClassType, StyleType } from '@vexip-ui/config'\nimport type { SkeletonProps } from '@/components/skeleton'\n\nexport type ImageObjectFit = 'fill' | 'contain' | 'cover' | 'none' | 'scale-down'\nexport type ImageSkeletonProps = Pick<\n  SkeletonProps,\n  'tag' | 'activated' | 'iconScale' | 'imageIcon'\n> & {\n  class?: ClassType,\n  StyleType?: StyleType\n}\n\nexport interface ImageState {\n  src: string,\n  index: number,\n  total: number\n}\n\nexport interface GroupState {\n  showAll: boolean,\n  preview: boolean,\n  increaseItem: (item: ImageState) => void,\n  decreaseItem: (item: ImageState) => void,\n  handlePreview: (item: ImageState) => void\n}\n\nexport const GROUP_STATE: InjectionKey<GroupState> = Symbol('IMAGE_GROUP_STATE')\n\nexport const objectFitValues = Object.freeze<ImageObjectFit[]>([\n  'fill',\n  'contain',\n  'cover',\n  'none',\n  'scale-down'\n])\n", "<script setup lang=\"ts\">\nimport { ImageViewer } from '@/components/image-viewer'\nimport { Skeleton } from '@/components/skeleton'\n\nimport { computed, inject, onBeforeUnmount, reactive, ref, watch, watchEffect } from 'vue'\n\nimport { emitEvent, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useIntersection } from '@vexip-ui/hooks'\nimport { isClient, supportImgLoading, toCssSize } from '@vexip-ui/utils'\nimport { imageProps } from './props'\nimport { GROUP_STATE, objectFitValues } from './symbol'\n\nimport type { ImageState } from './symbol'\n\nconst useImageLoading = supportImgLoading()\n\ndefineOptions({ name: 'Image' })\n\nconst _props = defineProps(imageProps)\nconst props = useProps('image', _props, {\n  src: {\n    default: '',\n    static: true\n  },\n  fallbackSrc: '',\n  alt: '',\n  fit: {\n    default: 'cover',\n    validator: value => objectFitValues.includes(value)\n  },\n  width: '',\n  height: '',\n  imgAttrs: () => ({}),\n  lazy: false,\n  root: {\n    default: null,\n    static: true\n  },\n  rootMargin: '',\n  preview: false,\n  skeleton: false,\n  placeholder: '',\n  errorTip: '',\n  radius: 0,\n  border: false,\n  previewSrc: '',\n  viewerTransfer: null\n})\n\nconst groupState = inject(GROUP_STATE, null)\n\nconst nh = useNameHelper('image')\nconst locale = useLocale('image')\n\nconst shouldLoad = ref(useImageLoading)\nconst loading = ref(shouldLoad.value)\nconst loadSrc = ref('')\nconst loadFail = ref(false)\nconst fallbackFail = ref(false)\nconst viewerActive = ref(false)\nconst hidden = ref(false)\n\nconst wrapper = ref<HTMLElement>()\n\nconst showError = computed(() => {\n  return loadFail.value && (!props.fallbackSrc || fallbackFail.value)\n})\nconst hasPreview = computed(() => !groupState && props.preview)\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('border')]: props.border,\n      [nh.bm('loading')]: loading.value,\n      [nh.bm('error')]: showError.value,\n      [nh.bm('preview')]: groupState?.preview || hasPreview.value\n    }\n  ]\n})\nconst style = computed(() => {\n  const style: Record<string, string> = {\n    width: toCssSize(props.width),\n    height: toCssSize(props.height),\n    [nh.cv('fit')]: props.fit,\n    [nh.cv('radius')]: props.radius ? `${props.radius}px` : ''\n  }\n\n  if (props.border && typeof props.border === 'string') {\n    style[nh.cv('b-color')] = props.border\n  }\n\n  return style\n})\nconst imageSrc = computed(() => props.src || (props.imgAttrs?.src as string))\nconst imageLoading = computed(() => {\n  return hidden.value || (useImageLoading && props.lazy) ? 'lazy' : undefined\n})\nconst skeletonProps = computed(() => {\n  return typeof props.skeleton === 'object'\n    ? Object.assign({ activated: true }, props.skeleton)\n    : { activated: true }\n})\n\nwatch(imageSrc, value => {\n  loading.value = shouldLoad.value\n  loadSrc.value = value\n  loadFail.value = false\n  fallbackFail.value = false\n})\nwatch(\n  () => props.fallbackSrc,\n  value => {\n    fallbackFail.value = false\n\n    if (loadFail.value) {\n      loading.value = shouldLoad.value\n      loadSrc.value = value\n    }\n  }\n)\n\nloadSrc.value = imageSrc.value\n\nconst state: ImageState = reactive({\n  src: computed(() => props.previewSrc || loadSrc.value),\n  index: 0,\n  total: 0\n})\n\nif (groupState) {\n  groupState.increaseItem(state)\n\n  const stopWatch = watchEffect(() => {\n    hidden.value = !groupState.showAll && state.index > 0\n  })\n\n  onBeforeUnmount(() => {\n    stopWatch()\n    groupState.decreaseItem(state)\n  })\n}\n\nif (!useImageLoading) {\n  let disconnect: (() => void) | undefined\n\n  const stopWatch = watchEffect(() => {\n    disconnect?.()\n    disconnect = undefined\n\n    if (!isClient) return\n\n    const root =\n      typeof props.root === 'string' ? document.querySelector(props.root) : (props.root as Element)\n\n    if (props.lazy) {\n      disconnect = useIntersection({\n        root: typeof root === 'object' ? root : document.documentElement,\n        rootMargin: props.rootMargin,\n        target: wrapper,\n        handler: () => {\n          disconnect?.()\n          disconnect = undefined\n          shouldLoad.value = true\n          loading.value = true\n        }\n      }).disconnect\n    }\n  })\n\n  onBeforeUnmount(() => {\n    stopWatch()\n    disconnect?.()\n  })\n}\n\ndefineExpose({\n  loading,\n  fallbackFail,\n  viewerActive,\n  hidden,\n  wrapper\n})\n\nfunction handleLoad(event: Event) {\n  loading.value = false\n\n  if (!props.fallbackSrc || loadSrc.value !== props.fallbackSrc) {\n    emitEvent(props.onLoad, event)\n  }\n}\n\nfunction handleError(event: Event) {\n  if (props.fallbackSrc) {\n    if (loadSrc.value === props.fallbackSrc) {\n      loading.value = false\n      fallbackFail.value = true\n\n      return\n    }\n\n    loadSrc.value = props.fallbackSrc\n  } else {\n    loading.value = false\n  }\n\n  loadFail.value = true\n  emitEvent(props.onError, event)\n}\n\nfunction handlePreview() {\n  if (!groupState) {\n    if (props.preview) {\n      viewerActive.value = true\n    }\n\n    emitEvent(props.onPreview, props.previewSrc || loadSrc.value)\n    return\n  }\n\n  groupState.handlePreview(state)\n}\n</script>\n\n<template>\n  <div\n    v-show=\"!hidden\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"none\"\n    :style=\"style\"\n  >\n    <slot v-if=\"loading\" name=\"placeholder\">\n      <Skeleton\n        v-if=\"props.skeleton\"\n        v-bind=\"skeletonProps\"\n        :class=\"nh.be('skeleton')\"\n        image\n      ></Skeleton>\n      <template v-else>\n        <span :class=\"nh.be('placeholder')\">\n          {{ props.placeholder || locale.placeholder }}\n        </span>\n      </template>\n    </slot>\n    <slot v-else-if=\"showError\" name=\"error\">\n      <span :class=\"nh.be('error')\">\n        {{ props.errorTip || props.alt || locale.error }}\n      </span>\n    </slot>\n    <img\n      v-if=\"shouldLoad && !showError\"\n      v-bind=\"props.imgAttrs\"\n      :class=\"nh.be('img')\"\n      :src=\"loadSrc\"\n      :alt=\"props.alt\"\n      :width=\"props.width || undefined\"\n      :height=\"props.height || undefined\"\n      :loading=\"imageLoading\"\n      :aria-label=\"props.alt\"\n      @load=\"handleLoad\"\n      @error=\"handleError\"\n      @click=\"handlePreview\"\n    />\n    <ImageViewer\n      v-if=\"hasPreview\"\n      v-model:active=\"viewerActive\"\n      :src-list=\"props.previewSrc || loadSrc\"\n      :transfer=\"props.viewerTransfer\"\n    >\n      <template #default=\"{ src }\">\n        <slot v-if=\"$slots.preview\" name=\"preview\" :src=\"src\"></slot>\n      </template>\n    </ImageViewer>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { ImageViewer } from '@/components/image-viewer'\n\nimport { computed, provide, reactive, ref, toRef } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { debounceMinor } from '@vexip-ui/utils'\nimport { imageGroupProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nimport type { ImageState } from './symbol'\n\ndefineOptions({ name: 'ImageGroup' })\n\nconst _props = defineProps(imageGroupProps)\nconst props = useProps('imageGroup', _props, {\n  showAll: false,\n  preview: false,\n  viewerTransfer: null\n})\n\nconst nh = useNameHelper('image-group')\n\nconst currentActive = ref(false)\nconst currentIndex = ref(0)\nconst imageStates = reactive(new Set<ImageState>())\n\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.ns('image-vars'),\n    {\n      [nh.bm('preview')]: props.preview\n    }\n  ]\n})\nconst srcList = computed(() => Array.from(imageStates).map(state => state.src))\n\nconst refreshIndex = debounceMinor(() => {\n  const total = imageStates.size\n\n  Array.from(imageStates).forEach((item, index) => {\n    item.index = index\n    item.total = total\n  })\n})\n\nprovide(\n  GROUP_STATE,\n  reactive({\n    showAll: toRef(props, 'showAll'),\n    preview: toRef(props, 'preview'),\n    increaseItem,\n    decreaseItem,\n    handlePreview\n  })\n)\n\ndefineExpose({ currentActive, currentIndex })\n\nfunction increaseItem(item: ImageState) {\n  imageStates.add(item)\n  refreshIndex()\n}\n\nfunction decreaseItem(item: ImageState) {\n  imageStates.delete(item)\n  refreshIndex()\n}\n\nfunction handlePreview(item: ImageState) {\n  currentIndex.value = item.index\n  currentActive.value = true\n\n  emitEvent(props.onPreview, item.src, Array.from(srcList.value))\n}\n</script>\n\n<template>\n  <div :class=\"className\">\n    <slot></slot>\n    <ImageViewer\n      v-if=\"props.preview\"\n      v-model:active=\"currentActive\"\n      v-model:index=\"currentIndex\"\n      :src-list=\"srcList\"\n      :transfer=\"props.viewerTransfer\"\n    >\n      <template #default=\"{ src }\">\n        <slot v-if=\"$slots.preview\" name=\"preview\" :src=\"src\"></slot>\n      </template>\n    </ImageViewer>\n  </div>\n</template>\n", "import { booleanProp, booleanStringProp, buildProps, eventProp, localeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { MenuOptions } from '@/components/menu'\nimport type {\n  LayoutConfig,\n  LayoutFooterLink,\n  LayoutHeaderAction,\n  LayoutInnerClass,\n  LayoutMenuProps,\n  LayoutSignType,\n  LayoutUser\n} from './symbol'\n\nexport const layoutProps = buildProps({\n  locale: localeProp('layout'),\n  noAside: booleanProp,\n  footer: booleanProp,\n  tag: String,\n  menus: Object as PropType<MenuOptions[]>,\n  menuProps: Object as PropType<LayoutMenuProps>,\n  logo: String,\n  signName: String,\n  config: Array as PropType<LayoutConfig[]>,\n  user: Object as PropType<LayoutUser>,\n  actions: Array as PropType<LayoutHeaderAction[]>,\n  expanded: booleanProp,\n  reduced: booleanProp,\n  avatarCircle: booleanProp,\n  signType: String as PropType<LayoutSignType>,\n  headerFixed: booleanStringProp,\n  asideFixed: booleanStringProp,\n  copyright: String,\n  links: Array as PropType<LayoutFooterLink[]>,\n  colors: Array as PropType<string[]>,\n  color: String,\n  miniHeaderSign: booleanStringProp,\n  verticalLinks: booleanStringProp,\n  darkMode: booleanProp,\n  fixedMain: booleanProp,\n  fitWindow: booleanProp,\n  innerClasses: Object as PropType<LayoutInnerClass>,\n  noHeader: booleanProp,\n  onExpandedChange: eventProp<(expanded: boolean) => void>(),\n  onReducedChange: eventProp<(reduced: boolean) => void>(),\n  onSignClick: eventProp<(event: MouseEvent) => void>(),\n  onMenuSelect: eventProp<(label: string, meta: any) => void>(),\n  onUserAction: eventProp<(label: string, meta: any) => void>(),\n  onNavChange: eventProp<(type: LayoutSignType) => void>(),\n  onColorChange: eventProp<(color: string) => void>(),\n  onToggleTheme: eventProp<(isDark: boolean) => void>(),\n  onContentResize: eventProp<() => void>()\n})\n\nexport type LayoutProps = ExtractPropTypes<typeof layoutProps>\nexport type LayoutCProps = ConfigurableProps<LayoutProps, 'menus'>\n\nexport const layoutAsideProps = buildProps({\n  tag: String,\n  expanded: booleanProp,\n  reduced: booleanProp,\n  menus: Array as PropType<MenuOptions[]>,\n  menuProps: Object as PropType<LayoutMenuProps>,\n  logo: String,\n  signName: String,\n  fixed: booleanStringProp,\n  signType: String as PropType<LayoutSignType>,\n  onExpandedChange: eventProp<(expanded: boolean) => void>(),\n  onReducedChange: eventProp<(reduced: boolean) => void>(),\n  onSignClick: eventProp<(event: MouseEvent) => void>(),\n  onMenuSelect: eventProp<(label: string, meta: any) => void>()\n})\n\nexport type LayoutAsideProps = ExtractPropTypes<typeof layoutAsideProps>\nexport type LayoutAsideCProps = ConfigurableProps<LayoutAsideProps, 'menus'>\n\nexport const layoutHeaderProps = buildProps({\n  locale: localeProp('layout'),\n  tag: String,\n  logo: String,\n  signName: String,\n  user: Object as PropType<LayoutUser>,\n  userDropped: booleanProp,\n  avatarCircle: booleanProp,\n  config: Array as PropType<LayoutConfig[]>,\n  actions: Array as PropType<LayoutHeaderAction[]>,\n  signType: String as PropType<LayoutSignType>,\n  colors: Array as PropType<string[]>,\n  color: String,\n  menus: Object as PropType<MenuOptions[]>,\n  menuProps: Object as PropType<LayoutMenuProps>,\n  darkMode: booleanProp,\n  onNavChange: eventProp<(type: LayoutSignType) => void>(),\n  onColorChange: eventProp<(color: string) => void>(),\n  onUserAction: eventProp<(label: string, meta: any) => void>(),\n  onSignClick: eventProp<(event: MouseEvent) => void>(),\n  onDroppedChange: eventProp<(target: boolean) => void>(),\n  onExpandedChange: eventProp<(expanded: boolean) => void>(),\n  onReducedChange: eventProp<(reduced: boolean) => void>(),\n  onMenuSelect: eventProp<(label: string, meta: any) => void>(),\n  onToggleTheme: eventProp<(isDark: boolean) => void>()\n})\n\nexport type LayoutHeaderProps = ExtractPropTypes<typeof layoutHeaderProps>\nexport type LayoutHeaderCProps = ConfigurableProps<LayoutHeaderProps, 'user' | 'menus'>\n\nexport const layoutMainProps = buildProps({\n  tag: String,\n  fixed: booleanProp\n})\n\nexport type LayoutMainProps = ExtractPropTypes<typeof layoutMainProps>\nexport type LayoutMainCProps = ConfigurableProps<LayoutMainProps>\n\nexport const layoutFooterProps = buildProps({\n  tag: String,\n  copyright: String,\n  links: Array as PropType<LayoutFooterLink[]>,\n  verticalLinks: booleanStringProp\n})\n\nexport type LayoutFooterProps = ExtractPropTypes<typeof layoutFooterProps>\nexport type LayoutFooterCProps = ConfigurableProps<LayoutFooterProps>\n", "import type { ComponentPublicInstance, InjectionKey } from 'vue'\nimport type { Router } from 'vue-router'\nimport type { IconMinorProps } from '@/components/icon'\nimport type { MenuExposed, MenuGroupType, MenuMarkerType } from '@/components/menu'\nimport type { NativeScrollExposed } from '@/components/native-scroll'\nimport type { ClassType } from '@vexip-ui/config'\n\nexport type LayoutSignType = 'aside' | 'header'\nexport type LayoutConfig = 'nav' | 'color' | 'theme'\nexport type LayoutSection =\n  | 'wrapper'\n  | 'section'\n  | 'header'\n  | 'headerLeft'\n  | 'headerMain'\n  | 'headerRight'\n  | 'headerUser'\n  | 'sidebar'\n  | 'aside'\n  | 'asideTop'\n  | 'asideMain'\n  | 'asideBottom'\n  | 'expandHandler'\n  | 'main'\n  | 'footer'\n  | 'footerLinks'\n  | 'copyright'\n  | 'scrollbar'\n\nexport type LayoutInnerClass = Partial<Record<LayoutSection, ClassType>>\n\nexport interface LayoutMenuProps {\n  active?: string,\n  accordion?: boolean,\n  markerType?: MenuMarkerType,\n  groupType?: MenuGroupType,\n  tooltipReverse?: boolean,\n  router?: Router,\n  manualRoute?: boolean,\n  onExpand?: (label: string, meta: Record<string, any>) => void,\n  onReduce?: (label: string, meta: Record<string, any>) => void\n}\n\nexport interface LayoutHeaderAction {\n  label: string,\n  icon?: Record<string, any>,\n  iconProps?: IconMinorProps,\n  name?: string,\n  disabled?: boolean,\n  divided?: boolean,\n  meta?: Record<string, any>\n}\n\nexport interface LayoutUser {\n  name: string,\n  email?: string,\n  avatar?: string | Record<string, any>\n}\n\nexport interface LayoutFooterLink {\n  name: string,\n  subname?: string,\n  icon?: Record<string, any>,\n  iconProps?: IconMinorProps,\n  to?: string,\n  target?: string,\n  children?: Array<Omit<LayoutFooterLink, 'children'>>\n}\n\nexport interface LayoutState {\n  isLayout: boolean,\n  locked: boolean,\n  affixed: boolean,\n  scrollY: number,\n  affixMatched: boolean,\n  expandMatched: boolean,\n  useExpand: boolean,\n  expanded: boolean,\n  reduced: boolean,\n  navConfig: boolean,\n  classes: LayoutInnerClass,\n  changeInLock: (doChange: () => void) => void\n}\n\nexport interface LayoutSlotParams {\n  expanded: boolean,\n  reduced: boolean,\n  toggleExpanded: (expanded?: boolean) => void,\n  toggleReduced: (reduced: boolean) => void\n}\n\nexport interface LayoutHeaderSlotParams extends LayoutSlotParams {\n  handleColorChange: (color: string) => void,\n  toggleUserDropped: (dropped?: boolean) => void\n}\n\nexport interface LayoutExposed extends ComponentPublicInstance {\n  scroll?: NativeScrollExposed,\n  menu?: MenuExposed,\n  toggleExpanded: (expanded?: boolean) => void,\n  toggleReduced: (reduced?: boolean) => void,\n  expandMenuByLabel: (label: string) => void\n}\n\nexport interface LayoutHeaderExposed extends ComponentPublicInstance {\n  menu?: MenuExposed,\n  toggleExpanded: (expanded?: boolean) => void,\n  toggleReduced: (reduced?: boolean) => void,\n  expandMenuByLabel: (label: string) => void,\n  toggleUserDropped: (dropped: boolean) => void\n}\n\nexport interface LayoutMainExposed extends ComponentPublicInstance {}\n\nexport interface LayoutAsideExposed extends ComponentPublicInstance {\n  menu?: MenuExposed,\n  toggleExpanded: (expanded?: boolean) => void,\n  toggleReduced: (reduced?: boolean) => void,\n  expandMenuByLabel: (label: string) => void\n}\n\nexport const LAYOUT_STATE = Symbol('LAYOUT_STATE') as InjectionKey<LayoutState>\n", "import { computed, inject, onBeforeUnmount, onMounted, onUpdated, reactive, ref, watch } from 'vue'\n\nimport { adjustAlpha, isClient, mixColor, noop, parseColorToRgba, toFixed } from '@vexip-ui/utils'\nimport { LAYOUT_STATE } from './symbol'\n\nimport type { Ref } from 'vue'\nimport type { Color } from '@vexip-ui/utils'\nimport type { LayoutState } from './symbol'\n\nconst rootEl = isClient ? document.documentElement : undefined\nconst rootStyle = rootEl && getComputedStyle(rootEl)\n\nexport function computeSeriesColors(value: Color, storageName = '') {\n  if (!rootEl || !rootStyle) return\n\n  const colors: Record<string, string[]> = {\n    light: [],\n    opacity: [],\n    dark: []\n  }\n  const black = parseColorToRgba(\n    rootStyle.getPropertyValue('--vxp-color-black') || { r: 0, g: 0, b: 0, a: 1 }\n  )\n  const white = parseColorToRgba(\n    rootStyle.getPropertyValue('--vxp-color-white') || { r: 255, g: 255, b: 255, a: 1 }\n  )\n  const style = rootEl.style\n\n  for (let i = 1; i < 10; ++i) {\n    const light = mixColor(white, value, i * 0.1).toString()\n    const opacity = adjustAlpha(value, toFixed(1 - i * 0.1, 1)).toString()\n\n    style.setProperty(`--vxp-color-primary-light-${i}`, light)\n    style.setProperty(`--vxp-color-primary-opacity-${i}`, opacity)\n\n    colors.light.push(light)\n    colors.opacity.push(opacity)\n  }\n\n  for (let i = 1; i < 3; ++i) {\n    const dark = mixColor(black, value, i * 0.1).toString()\n\n    style.setProperty(`--vxp-color-primary-dark-${i}`, dark)\n    colors.dark.push(dark)\n  }\n\n  style.setProperty('--vxp-color-primary-base', `${value}`)\n  storageName && localStorage.setItem(storageName, `${value}`)\n\n  return colors\n}\n\nexport function useLayoutState() {\n  return inject(\n    LAYOUT_STATE,\n    reactive({\n      isLayout: false,\n      locked: false,\n      affixed: false,\n      scrollY: 0,\n      affixMatched: false,\n      expandMatched: false,\n      useExpand: false,\n      expanded: false,\n      reduced: false,\n      navConfig: false,\n      classes: Object.freeze({}),\n      changeInLock: noop\n    }) as LayoutState\n  )\n}\n\nconst breakPoints = Object.freeze(['xs', 'sm', 'md', 'lg', 'xl', 'xxl'])\n\nexport function useMediaQuery(query: Ref<string | boolean>) {\n  const matched = ref(false)\n  const updateTrigger = ref(0)\n\n  const computedStyle = isClient && getComputedStyle(document.documentElement)\n  const computedQuery = computed(() => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    updateTrigger.value\n\n    if (breakPoints.includes(query.value as any)) {\n      const usedQuery = query.value === 'xs' ? 'sm' : query.value\n      const media =\n        computedStyle && computedStyle.getPropertyValue(`--vxp-break-point-${usedQuery}`).trim()\n\n      return media && `only screen and ${media}`\n    }\n\n    return query.value\n  })\n\n  let isMounted = false\n  let mediaQuery: MediaQueryList | undefined\n\n  const update = () => {\n    if (typeof computedQuery.value === 'boolean') {\n      matched.value = computedQuery.value\n      return\n    }\n\n    if (!computedQuery.value || computedQuery.value === 'min') {\n      matched.value = false\n      return\n    }\n\n    if (computedQuery.value === 'max') {\n      matched.value = true\n      return\n    }\n\n    if (isMounted) {\n      mediaQuery = matchMedia(computedQuery.value)\n      mediaQuery?.addEventListener('change', update)\n    }\n\n    matched.value = mediaQuery!.matches\n  }\n\n  watch(computedQuery, () => {\n    update()\n  })\n\n  onMounted(() => {\n    ++updateTrigger.value\n    isMounted = true\n    update()\n  })\n\n  onBeforeUnmount(() => {\n    isMounted = false\n    mediaQuery?.removeEventListener('change', update)\n    mediaQuery = undefined\n  })\n\n  return matched\n}\n\nexport function useUpdateCounter() {\n  const counter = ref(0)\n\n  onMounted(() => {\n    counter.value++\n  })\n  onUpdated(() => {\n    counter.value++\n  })\n\n  return counter\n}\n", "import { computed, defineComponent } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { layoutMainProps } from './props'\nimport { useLayoutState } from './helper'\n\nexport default defineComponent({\n  name: 'LayoutMain',\n  props: layoutMainProps,\n  setup(_props, { slots }) {\n    const props = useProps('layoutMain', _props, {\n      tag: 'main',\n      fixed: false\n    })\n\n    const nh = useNameHelper('layout')\n    const state = useLayoutState()\n\n    const className = computed(() => {\n      return [nh.be('main'), props.fixed && nh.bem('main', 'fixed'), state.classes.main]\n    })\n\n    return () => {\n      const CustomTag = (props.tag || 'main') as any\n\n      return <CustomTag class={className.value}>{slots.default?.()}</CustomTag>\n    }\n  }\n})\n", "import { Icon } from '@/components/icon'\nimport { MenuItem } from '@/components/menu-item'\nimport { Popper } from '@/components/popper'\n\nimport { computed, defineComponent, inject, nextTick, provide, reactive, ref, watch } from 'vue'\n\nimport { useHoverDelay, useIcons, useNameHelper } from '@vexip-ui/config'\nimport { useClickOutside, usePopper, useSetTimeout } from '@vexip-ui/hooks'\nimport { callIfFunc } from '@vexip-ui/utils'\nimport { MENU_ITEM_STATE, MENU_STATE } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { PopperExposed } from '@/components/popper'\nimport type { MenuOptions } from './symbol'\n\nexport default defineComponent({\n  name: 'MenuRest',\n  props: {\n    menus: {\n      type: Array as PropType<MenuOptions[]>,\n      default: () => []\n    }\n  },\n  setup(props) {\n    const menuState = inject(MENU_STATE, null)\n\n    const nh = useNameHelper('menu')\n    const icons = useIcons()\n    const hoverDelay = useHoverDelay()\n\n    const groupExpanded = ref(false)\n    const sonSelected = ref(false)\n    const popperShow = ref(false)\n\n    const transfer = computed(() => menuState?.transfer ?? false)\n    const dropTrigger = computed(() => menuState?.trigger || 'hover')\n\n    const wrapper = useClickOutside(handleClickOutside)\n    const popper = ref<PopperExposed>()\n    const { reference, transferTo, updatePopper } = usePopper({\n      placement: ref('bottom'),\n      transfer,\n      wrapper,\n      popper: computed(() => popper.value?.wrapper)\n    })\n\n    const itemState = reactive({\n      el: wrapper,\n      label: '',\n      indent: 1,\n      groupExpanded,\n      showGroup: groupExpanded,\n      isUsePopper: true,\n      parentState: null,\n      transfer,\n      cachedExpanded: false,\n      updateSonSelected,\n      toggleGroupExpanded,\n      handleMouseEnter,\n      handleMouseLeave\n    })\n\n    provide(MENU_ITEM_STATE, itemState)\n\n    watch(groupExpanded, value => {\n      if (value) {\n        popperShow.value = true\n        updatePopper()\n      }\n    })\n\n    function updateSonSelected(selected: boolean) {\n      sonSelected.value = selected\n    }\n\n    function toggleGroupExpanded(expanded: boolean) {\n      groupExpanded.value = expanded\n    }\n\n    const { timer } = useSetTimeout()\n\n    let mouseInList = false\n    let reproduce = false\n\n    function handleMouseEnter() {\n      clearTimeout(timer.hover)\n\n      if (mouseInList || dropTrigger.value !== 'hover') return\n\n      if (!groupExpanded.value && popperShow.value) {\n        reproduce = true\n        return\n      }\n\n      timer.hover = setTimeout(() => {\n        groupExpanded.value = true\n      }, hoverDelay.value)\n    }\n\n    function handleMouseLeave() {\n      clearTimeout(timer.hover)\n\n      if (mouseInList || !popperShow.value || dropTrigger.value !== 'hover') return\n\n      timer.hover = setTimeout(() => {\n        groupExpanded.value = false\n      }, hoverDelay.value)\n    }\n\n    function handleClick() {\n      if (dropTrigger.value === 'click') {\n        groupExpanded.value = true\n      }\n    }\n\n    function handleClickOutside() {\n      if (dropTrigger.value === 'click') {\n        nextTick(() => {\n          groupExpanded.value = false\n        })\n      }\n    }\n\n    function handlePopperHide() {\n      popperShow.value = false\n      groupExpanded.value = false\n\n      if (reproduce) {\n        reproduce = false\n        groupExpanded.value = true\n      }\n    }\n\n    function renderMenuItems() {\n      if (!props.menus?.length) {\n        return null\n      }\n\n      return props.menus.map(item => (\n        <MenuItem\n          key={item.label}\n          label={item.label}\n          icon={item.icon}\n          icon-props={item.iconProps}\n          disabled={item.disabled}\n          children={item.children}\n          route={item.route}\n          meta={item.meta}\n        >\n          {item.name ? callIfFunc(item.name) : item.label}\n        </MenuItem>\n      ))\n    }\n\n    return () => {\n      return (\n        <div\n          ref={wrapper}\n          class={nh.be('rest')}\n          onMouseenter={handleMouseEnter}\n          onMouseleave={handleMouseLeave}\n        >\n          <div\n            ref={reference}\n            class={[nh.be('rest-handler'), sonSelected.value && nh.bem('rest-handler', 'selected')]}\n            onClick={handleClick}\n          >\n            <Icon {...icons.value.ellipsis}></Icon>\n          </div>\n          <Popper\n            ref={popper}\n            class={[nh.be('popper'), nh.bs('vars'), nh.bem('popper', 'drop')]}\n            visible={popperShow.value && groupExpanded.value}\n            alive={!transferTo.value || popperShow.value}\n            to={transferTo.value}\n            transition={nh.ns('drop')}\n            onAfterLeave={handlePopperHide}\n            onMouseenter={() => ((mouseInList = true), handleMouseEnter())}\n            onMouseleave={() => ((mouseInList = false), handleMouseLeave())}\n          >\n            <ul class={[nh.be('list'), nh.bem('list', 'theme')]}>{renderMenuItems()}</ul>\n          </Popper>\n        </div>\n      )\n    }\n  }\n})\n", "import { MenuItem } from '@/components/menu-item'\nimport { MenuGroup } from '@/components/menu-group'\nimport { Overflow } from '@/components/overflow'\n\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  renderSlot,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { callIfFunc, isDefined } from '@vexip-ui/utils'\nimport MenuRest from './menu-rest'\nimport { menuProps } from './props'\nimport { MENU_STATE } from './symbol'\n\nimport type { RouteLocationRaw, RouteRecordRaw } from 'vue-router'\nimport type { MenuItemState, MenuMarkerType, MenuOptions, MenuState } from './symbol'\n\nconst menuMarkerTypes = Object.freeze<MenuMarkerType[]>(['top', 'right', 'bottom', 'left', 'none'])\n\nexport default defineComponent({\n  name: 'Menu',\n  components: {\n    MenuRest,\n    MenuItem,\n    MenuGroup,\n    Overflow\n  },\n  props: menuProps,\n  emits: ['update:active'],\n  setup(_props, { slots, emit, expose }) {\n    const props = useProps('menu', _props, {\n      active: {\n        default: null,\n        static: true\n      },\n      accordion: false,\n      markerType: {\n        default: 'right',\n        validator: value => menuMarkerTypes.includes(value)\n      },\n      reduced: false,\n      horizontal: false,\n      transfer: false,\n      trigger: 'hover',\n      groupType: {\n        default: 'collapse',\n        validator: value => ['collapse', 'dropdown'].includes(value)\n      },\n      tooltipReverse: null,\n      options: {\n        default: () => [],\n        static: true\n      },\n      router: null,\n      manualRoute: false,\n      indent: null\n    })\n\n    const nh = useNameHelper('menu')\n    const menuItemSet = new Set<MenuItemState>()\n    const currentActive = ref(props.active)\n    const isReduced = ref(false)\n\n    const wrapper = ref<HTMLElement>()\n    const rest = ref<InstanceType<typeof MenuRest>>()\n\n    const markerType = computed(() => {\n      if (props.horizontal && (props.markerType === 'left' || props.markerType === 'right')) {\n        return 'bottom'\n      } else if (\n        !props.horizontal &&\n        (props.markerType === 'top' || props.markerType === 'bottom')\n      ) {\n        return 'right'\n      } else {\n        return props.markerType ?? (props.horizontal ? 'bottom' : 'right')\n      }\n    })\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(`marker-${markerType.value}`),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('reduced')]: isReduced.value,\n          [nh.bm('dropdown')]: props.groupType === 'dropdown',\n          [nh.bm('horizontal')]: props.horizontal\n        }\n      ]\n    })\n    const style = computed(() => {\n      const style: Record<string, string> = {}\n\n      if (isDefined(props.indent)) {\n        style[nh.cv('indent-width')] =\n          typeof props.indent === 'number' ? `${props.indent}px` : props.indent\n      }\n\n      return style\n    })\n    const menus = computed(() => {\n      if (props.options?.length) {\n        return props.options\n      }\n\n      const routes = props.router?.options.routes\n\n      if (!routes?.length) {\n        return []\n      }\n\n      return parseRoutesToMenus(routes)\n    })\n    const currentRoute = computed(() => props.router?.currentRoute.value)\n\n    provide<MenuState>(\n      MENU_STATE,\n      reactive({\n        currentActive,\n        isReduced,\n        horizontal: toRef(props, 'horizontal'),\n        accordion: toRef(props, 'accordion'),\n        groupType: toRef(props, 'groupType'),\n        tooltipReverse: toRef(props, 'tooltipReverse'),\n        transfer: toRef(props, 'transfer'),\n        trigger: toRef(props, 'trigger'),\n        markerType,\n        handleSelect,\n        handleExpand,\n        increaseItem,\n        decreaseItem,\n        doForEachItem\n      })\n    )\n\n    watch(\n      () => props.active,\n      value => {\n        if (value !== currentActive.value) {\n          currentActive.value = value\n        }\n      }\n    )\n    watch(\n      () => props.reduced,\n      value => {\n        if (props.horizontal) return\n\n        if (value) {\n          handleMenuReduce()\n        } else {\n          handleMenuExpand()\n        }\n      }\n    )\n    watch(currentRoute, value => {\n      if (!props.manualRoute && value) {\n        currentActive.value = (value.meta?.label as string) ?? value.path\n      }\n    })\n\n    onMounted(() => {\n      nextTick(() => {\n        if (!props.horizontal && props.reduced) handleMenuReduce()\n      })\n\n      if (props.router && !props.manualRoute && !currentActive.value) {\n        const route = currentRoute.value\n\n        if (route) {\n          currentActive.value = (route.meta?.label as string) ?? currentRoute.value.path\n        }\n      }\n    })\n\n    expose({ expandItemByLabel })\n\n    function parseRoutesToMenus(routes: Readonly<RouteRecordRaw[]>) {\n      const root: MenuOptions = { label: '', children: [] }\n      const loop = Array.from(routes).map(route => ({ parent: root, route }))\n\n      while (loop.length) {\n        const { parent, route } = loop.shift()!\n        const routeMeta = (route.meta || {}) as any\n\n        if (routeMeta.menu === false) {\n          continue\n        }\n\n        const options = {\n          ...routeMeta,\n          route,\n          label: routeMeta.label || route.path,\n          name: routeMeta.name || route.name\n        } as MenuOptions\n\n        if (!parent.children) {\n          parent.children = []\n        }\n\n        parent.children.push(options)\n\n        if (route.children) {\n          loop.push(...route.children.map(route => ({ parent: options, route })))\n        }\n      }\n\n      return root.children!\n    }\n\n    function increaseItem(state: MenuItemState) {\n      menuItemSet.add(state)\n    }\n\n    function decreaseItem(state: MenuItemState) {\n      menuItemSet.delete(state)\n    }\n\n    function doForEachItem(cb: (item: MenuItemState) => void) {\n      for (const item of menuItemSet) {\n        cb(item)\n      }\n    }\n\n    function handleSelect(label: string, meta: Record<string, any>, route?: RouteLocationRaw) {\n      if (currentActive.value !== label) {\n        currentActive.value = label\n\n        emit('update:active', label)\n        emitEvent(props.onSelect, label, meta)\n\n        if (!props.manualRoute && props.router && route) {\n          props.router.push(route)\n        }\n      }\n    }\n\n    function handleExpand(label: string, expanded: boolean, meta: Record<string, any>) {\n      if (expanded) {\n        emitEvent(props.onExpand, label, meta)\n      } else {\n        emitEvent(props.onReduce, label, meta)\n      }\n    }\n\n    function handleMenuReduce() {\n      if (props.horizontal) return\n\n      let firstExpandedItem: MenuItemState | null = null\n\n      for (const item of menuItemSet) {\n        item.cachedExpanded = item.showGroup\n\n        if (!firstExpandedItem && item.showGroup) {\n          firstExpandedItem = item\n        }\n\n        item.toggleGroupExpanded(false)\n      }\n\n      isReduced.value = true\n    }\n\n    function handleMenuExpand() {\n      if (props.horizontal) return\n\n      isReduced.value = false\n\n      if (wrapper.value) {\n        const el = wrapper.value\n        const callback = () => {\n          requestAnimationFrame(() => {\n            el.removeEventListener('transitionend', callback)\n\n            const selectedItem = Array.from(menuItemSet).find(\n              item => item.label === currentActive.value\n            )\n\n            requestAnimationFrame(() => {\n              requestAnimationFrame(() => {\n                for (const item of menuItemSet) {\n                  item.groupExpanded = item.cachedExpanded\n                }\n\n                if (selectedItem) {\n                  let parent = selectedItem.parentState\n\n                  while (parent) {\n                    parent.groupExpanded = true\n                    parent = parent.parentState\n                  }\n                }\n              })\n            })\n          })\n        }\n\n        el.addEventListener('transitionend', callback)\n      }\n    }\n\n    function expandItemByLabel(label: string) {\n      for (const item of menuItemSet) {\n        if (item.label === label) {\n          item.toggleGroupExpanded(true, true)\n        }\n      }\n    }\n\n    function renderMenuItem(item: MenuOptions) {\n      return (\n        <MenuItem\n          label={item.label}\n          icon={item.icon}\n          icon-props={item.iconProps}\n          disabled={item.disabled}\n          children={item.children}\n          route={item.route}\n          meta={item.meta}\n        >\n          {item.name ? callIfFunc(item.name) : item.label}\n        </MenuItem>\n      )\n    }\n\n    function renderMenus() {\n      return menus.value.map(menu =>\n        menu.group\n          ? (\n            <MenuGroup key={menu.label} label={menu.name ? callIfFunc(menu.name) : menu.label}>\n              {menu.children?.length ? menu.children.map(renderMenuItem) : null}\n            </MenuGroup>\n            )\n          : (\n              renderMenuItem(menu)\n            )\n      )\n    }\n\n    return () => {\n      return (\n        <ul ref={wrapper} class={className.value} role={'menu'} tabindex={-1} style={style.value}>\n          {renderSlot(slots, 'default', {}, () => {\n            return props.horizontal\n              ? [\n                <Overflow class={nh.be('overflow')} inherit key={0}>\n                  {{\n                    default: renderMenus,\n                    counter: ({ count }: { count: number }) => (\n                      <MenuRest ref={rest} menus={menus.value.slice(-count)}></MenuRest>\n                    )\n                  }}\n                </Overflow>\n                ]\n              : renderMenus()\n          })}\n        </ul>\n      )\n    }\n  }\n})\n", "import { booleanProp, buildProps, eventProp, iconProp, sizeProp, stateProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const switchProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  value: booleanProp,\n  disabled: booleanProp,\n  openColor: String,\n  closeColor: String,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingEffect: String as PropType<IconEffect>,\n  openIcon: iconProp,\n  closeIcon: iconProp,\n  openText: String,\n  closeText: String,\n  onBeforeChange: Function as PropType<(checked: boolean) => unknown>,\n  rectangle: booleanProp,\n  name: String,\n  onChange: eventProp<(value: boolean) => void>()\n})\n\nexport type SwitchProps = ExtractPropTypes<typeof switchProps>\nexport type SwitchCProps = ConfigurableProps<SwitchProps, never, 'onBeforeChange'>\n", "<template>\n  <label\n    :id=\"idFor\"\n    :class=\"className\"\n    role=\"switch\"\n    :aria-checked=\"currentValue\"\n    :style=\"style\"\n  >\n    <input\n      ref=\"input\"\n      type=\"checkbox\"\n      :class=\"nh.be('input')\"\n      :checked=\"currentValue\"\n      :disabled=\"isDisabled\"\n      :name=\"props.name\"\n      @submit.prevent\n      @change=\"handleChange()\"\n      @click.stop\n    />\n    <span :class=\"nh.be('placeholder')\">\n      <span :class=\"nh.be('open-text')\">\n        <slot name=\"open\">{{ props.openText }}</slot>\n      </span>\n      <span :class=\"nh.be('close-text')\">\n        <slot name=\"close\">{{ props.closeText }}</slot>\n      </span>\n    </span>\n    <span :class=\"nh.be('signal')\" :style=\"signalStyle\">\n      <slot v-if=\"props.loading\" name=\"loading\">\n        <Icon\n          v-bind=\"icons.loading\"\n          :effect=\"props.loadingEffect || icons.loading.effect\"\n          :icon=\"props.loadingIcon || icons.loading.icon\"\n          label=\"loading\"\n        ></Icon>\n      </slot>\n      <slot v-else name=\"icon\" :value=\"currentValue\">\n        <Icon v-if=\"currentValue && props.openIcon\" :icon=\"props.openIcon\"></Icon>\n        <Icon v-else-if=\"!currentValue && props.closeIcon\" :icon=\"props.closeIcon\"></Icon>\n      </slot>\n    </span>\n    <span :class=\"nh.be('label')\">\n      <span v-if=\"currentValue\" :class=\"nh.be('open-text')\">\n        <slot name=\"open\">{{ props.openText }}</slot>\n      </span>\n      <span v-else :class=\"nh.be('close-text')\">\n        <slot name=\"close\">{{ props.closeText }}</slot>\n      </span>\n    </span>\n  </label>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { isPromise } from '@vexip-ui/utils'\nimport { switchProps } from './props'\n\nexport default defineComponent({\n  name: 'Switch',\n  components: {\n    Icon\n  },\n  props: switchProps,\n  emits: ['update:value'],\n  setup(_props, { emit }) {\n    const { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<boolean>(() => input.value?.focus())\n\n    const props = useProps('switch', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      value: {\n        default: () => getFieldValue(false),\n        static: true\n      },\n      disabled: () => disabled.value,\n      openColor: '',\n      closeColor: '',\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingEffect: null,\n      openIcon: createIconProp(),\n      closeIcon: createIconProp(),\n      openText: '',\n      closeText: '',\n      onBeforeChange: {\n        default: null,\n        isFunc: true\n      },\n      rectangle: false,\n      name: {\n        default: '',\n        static: true\n      }\n    })\n\n    const nh = useNameHelper('switch')\n    const currentValue = ref(props.value)\n\n    const input = ref<HTMLInputElement>()\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('open')]: currentValue.value,\n          [nh.bm(props.size)]: props.size !== 'default',\n          [nh.bm(props.state)]: props.state !== 'default',\n          [nh.bm('disabled')]: props.disabled,\n          [nh.bm('loading')]: props.loading,\n          [nh.bm('rectangle')]: props.rectangle\n        }\n      ]\n    })\n    const style = computed(() => {\n      return {\n        backgroundColor: currentValue.value ? props.openColor : props.closeColor\n      }\n    })\n    const signalStyle = computed(() => {\n      return {\n        color: currentValue.value ? props.openColor : props.closeColor\n      }\n    })\n    const isDisabled = computed(() => {\n      return props.disabled || props.loading\n    })\n\n    watch(\n      () => props.value,\n      value => {\n        currentValue.value = value\n      }\n    )\n\n    async function handleChange(checked = !currentValue.value) {\n      if (checked === currentValue.value) return\n\n      let result: unknown = true\n\n      if (typeof props.onBeforeChange === 'function') {\n        result = props.onBeforeChange(checked)\n\n        if (isPromise(result)) {\n          result = await result\n        }\n      }\n\n      if (result !== false) {\n        currentValue.value = checked\n\n        emit('update:value', checked)\n        setFieldValue(checked)\n        emitEvent(props.onChange, checked)\n        validateField()\n      }\n    }\n\n    return {\n      props,\n      nh,\n      icons: useIcons(),\n      idFor,\n      currentValue,\n\n      className,\n      style,\n      signalStyle,\n      isDisabled,\n\n      input,\n\n      handleChange,\n\n      focus: (options?: FocusOptions) => input.value?.focus(options),\n      blur: () => input.value?.blur()\n    }\n  }\n})\n</script>\n", "<template>\n  <label\n    :id=\"idFor\"\n    :class=\"className\"\n    role=\"switch\"\n    :aria-checked=\"currentValue\"\n    :style=\"style\"\n  >\n    <input\n      ref=\"input\"\n      type=\"checkbox\"\n      :class=\"nh.be('input')\"\n      :checked=\"currentValue\"\n      :disabled=\"isDisabled\"\n      :name=\"props.name\"\n      @submit.prevent\n      @change=\"handleChange()\"\n      @click.stop\n    />\n    <span :class=\"nh.be('placeholder')\">\n      <span :class=\"nh.be('open-text')\">\n        <slot name=\"open\">{{ props.openText }}</slot>\n      </span>\n      <span :class=\"nh.be('close-text')\">\n        <slot name=\"close\">{{ props.closeText }}</slot>\n      </span>\n    </span>\n    <span :class=\"nh.be('signal')\" :style=\"signalStyle\">\n      <slot v-if=\"props.loading\" name=\"loading\">\n        <Icon\n          v-bind=\"icons.loading\"\n          :effect=\"props.loadingEffect || icons.loading.effect\"\n          :icon=\"props.loadingIcon || icons.loading.icon\"\n          label=\"loading\"\n        ></Icon>\n      </slot>\n      <slot v-else name=\"icon\" :value=\"currentValue\">\n        <Icon v-if=\"currentValue && props.openIcon\" :icon=\"props.openIcon\"></Icon>\n        <Icon v-else-if=\"!currentValue && props.closeIcon\" :icon=\"props.closeIcon\"></Icon>\n      </slot>\n    </span>\n    <span :class=\"nh.be('label')\">\n      <span v-if=\"currentValue\" :class=\"nh.be('open-text')\">\n        <slot name=\"open\">{{ props.openText }}</slot>\n      </span>\n      <span v-else :class=\"nh.be('close-text')\">\n        <slot name=\"close\">{{ props.closeText }}</slot>\n      </span>\n    </span>\n  </label>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { isPromise } from '@vexip-ui/utils'\nimport { switchProps } from './props'\n\nexport default defineComponent({\n  name: 'Switch',\n  components: {\n    Icon\n  },\n  props: switchProps,\n  emits: ['update:value'],\n  setup(_props, { emit }) {\n    const { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<boolean>(() => input.value?.focus())\n\n    const props = useProps('switch', _props, {\n      size: createSizeProp(size),\n      state: createStateProp(state),\n      value: {\n        default: () => getFieldValue(false),\n        static: true\n      },\n      disabled: () => disabled.value,\n      openColor: '',\n      closeColor: '',\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingEffect: null,\n      openIcon: createIconProp(),\n      closeIcon: createIconProp(),\n      openText: '',\n      closeText: '',\n      onBeforeChange: {\n        default: null,\n        isFunc: true\n      },\n      rectangle: false,\n      name: {\n        default: '',\n        static: true\n      }\n    })\n\n    const nh = useNameHelper('switch')\n    const currentValue = ref(props.value)\n\n    const input = ref<HTMLInputElement>()\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('open')]: currentValue.value,\n          [nh.bm(props.size)]: props.size !== 'default',\n          [nh.bm(props.state)]: props.state !== 'default',\n          [nh.bm('disabled')]: props.disabled,\n          [nh.bm('loading')]: props.loading,\n          [nh.bm('rectangle')]: props.rectangle\n        }\n      ]\n    })\n    const style = computed(() => {\n      return {\n        backgroundColor: currentValue.value ? props.openColor : props.closeColor\n      }\n    })\n    const signalStyle = computed(() => {\n      return {\n        color: currentValue.value ? props.openColor : props.closeColor\n      }\n    })\n    const isDisabled = computed(() => {\n      return props.disabled || props.loading\n    })\n\n    watch(\n      () => props.value,\n      value => {\n        currentValue.value = value\n      }\n    )\n\n    async function handleChange(checked = !currentValue.value) {\n      if (checked === currentValue.value) return\n\n      let result: unknown = true\n\n      if (typeof props.onBeforeChange === 'function') {\n        result = props.onBeforeChange(checked)\n\n        if (isPromise(result)) {\n          result = await result\n        }\n      }\n\n      if (result !== false) {\n        currentValue.value = checked\n\n        emit('update:value', checked)\n        setFieldValue(checked)\n        emitEvent(props.onChange, checked)\n        validateField()\n      }\n    }\n\n    return {\n      props,\n      nh,\n      icons: useIcons(),\n      idFor,\n      currentValue,\n\n      className,\n      style,\n      signalStyle,\n      isDisabled,\n\n      input,\n\n      handleChange,\n\n      focus: (options?: FocusOptions) => input.value?.focus(options),\n      blur: () => input.value?.blur()\n    }\n  }\n})\n</script>\n", "import { Avatar } from '@/components/avatar'\nimport { Dropdown } from '@/components/dropdown'\nimport { DropdownList } from '@/components/dropdown-list'\nimport { DropdownItem } from '@/components/dropdown-item'\nimport { Icon } from '@/components/icon'\nimport { Menu } from '@/components/menu'\nimport { Switch } from '@/components/switch'\n\nimport {\n  computed,\n  defineComponent,\n  onBeforeMount,\n  reactive,\n  ref,\n  renderSlot,\n  shallowReadonly,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useIcons, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useMounted, useRtl } from '@vexip-ui/hooks'\nimport { isClient } from '@vexip-ui/utils'\nimport { layoutHeaderProps } from './props'\nimport { computeSeriesColors, useLayoutState } from './helper'\n\nimport type { MenuExposed } from '@/components/menu'\nimport type { LayoutConfig, LayoutHeaderAction, LayoutSignType } from './symbol'\n\nexport default defineComponent({\n  name: 'LayoutHeader',\n  props: layoutHeaderProps,\n  emits: ['update:sign-type', 'update:color', 'update:user-dropped', 'update:dark-mode'],\n  setup(_props, { slots, emit, expose }) {\n    const props = useProps('layoutHeader', _props, {\n      locale: null,\n      tag: 'header',\n      logo: '',\n      signName: '',\n      user: {\n        default: () => ({ name: '' }),\n        static: true\n      },\n      userDropped: false,\n      avatarCircle: false,\n      config: () => ['nav', 'theme', 'color'] as LayoutConfig[],\n      actions: () => [],\n      signType: 'aside',\n      colors: () => ['#339af0', '#f03e3e', '#be4bdb', '#7950f2', '#1b9e44', '#f76707'],\n      color: '',\n      menus: {\n        default: () => [],\n        static: true\n      },\n      menuProps: null,\n      darkMode: null\n    })\n\n    const nh = useNameHelper('layout')\n    const icons = useIcons()\n    const locale = useLocale('layout', toRef(props, 'locale'))\n    const layoutState = useLayoutState()\n    const currentSignType = ref<LayoutSignType>(props.signType)\n    const currentUserDropped = ref(props.userDropped)\n\n    const menu = ref<MenuExposed>()\n\n    const { isRtl } = useRtl()\n    const { isMounted } = useMounted()\n\n    const rootEl = computed(() => {\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      isMounted.value\n      return isClient ? document.documentElement : null\n    })\n    const currentColor = ref(props.color || getBaseColor() || props.colors?.[0])\n    const isDark = ref(false)\n\n    const className = computed(() => {\n      return [\n        nh.be('header'),\n        {\n          [nh.bs('vars')]: !layoutState.isLayout,\n          [nh.bem('header', 'inherit')]: layoutState.isLayout || props.inherit,\n          [nh.bem('header', 'away')]: !layoutState.affixMatched,\n          [nh.bem('header', 'affixed')]: layoutState.affixed\n        },\n        layoutState.classes.header\n      ]\n    })\n    const userActions = computed(() => {\n      if (!props.actions?.length) {\n        return [\n          {\n            label: 'signOut',\n            name: locale.value.signOut,\n            icon: icons.value.signOut.icon,\n            iconProps: icons.value.signOut\n          }\n        ] as LayoutHeaderAction[]\n      }\n\n      return props.actions\n    })\n    const hasLeft = computed(() => {\n      return !!(props.logo || props.signName || slots.left)\n    })\n    const hasMenu = computed(() => {\n      return !!(props.menus?.length || props.menuProps?.router)\n    })\n\n    const slotParams = shallowReadonly(\n      reactive({\n        expanded: toRef(layoutState, 'expanded'),\n        reduced: toRef(layoutState, 'reduced'),\n        toggleExpanded,\n        toggleReduced,\n        handleColorChange,\n        toggleUserDropped\n      })\n    )\n\n    expose({ menu, toggleExpanded, toggleReduced, expandMenuByLabel, toggleUserDropped })\n\n    watch(\n      () => props.signType,\n      value => {\n        currentSignType.value = value\n      }\n    )\n    watch(\n      () => props.userDropped,\n      value => {\n        currentUserDropped.value = value\n      }\n    )\n    watch(currentColor, computeSeriesColors)\n    watch(\n      () => props.darkMode,\n      value => {\n        isDark.value = value ?? rootEl.value?.classList.contains('dark') ?? false\n      },\n      { immediate: true }\n    )\n\n    onBeforeMount(() => {\n      watch(\n        () => props.color,\n        value => {\n          currentColor.value = value || getBaseColor() || props.colors?.[0]\n        },\n        { immediate: true }\n      )\n\n      computeSeriesColors(currentColor.value)\n    })\n\n    function getBaseColor() {\n      if (rootEl.value) {\n        return getComputedStyle(rootEl.value).getPropertyValue('--vxp-color-primary-base')\n      }\n\n      return '#339af0'\n    }\n\n    function handleUserActionSelect(label: string, meta: Record<string, any>) {\n      emitEvent(props.onUserAction, label, meta)\n    }\n\n    function handleSignTypeChange(type: LayoutSignType) {\n      layoutState.changeInLock(() => {\n        currentSignType.value = type\n\n        emit('update:sign-type', type)\n        emitEvent(props.onNavChange, type)\n      })\n    }\n\n    function toggleExpanded(expanded = !layoutState.expanded) {\n      layoutState.expanded = expanded\n\n      emitEvent(props.onExpandedChange, expanded)\n    }\n\n    function toggleReduced(reduced = !layoutState.reduced) {\n      layoutState.reduced = reduced\n\n      emitEvent(props.onReducedChange, reduced)\n    }\n\n    function handleColorChange(color: string) {\n      currentColor.value = color\n\n      emit('update:color', color)\n      emitEvent(props.onColorChange, color)\n    }\n\n    function handleSignClick(event: MouseEvent) {\n      emitEvent(props.onSignClick, event)\n    }\n\n    function toggleUserDropped(dropped = !currentUserDropped.value) {\n      currentUserDropped.value = dropped\n\n      emit('update:user-dropped', dropped)\n      emitEvent(props.onDroppedChange, dropped)\n    }\n\n    function handleMenuSelect(label: string, meta: Record<string, any>) {\n      toggleUserDropped(false)\n      emitEvent(props.onMenuSelect, label, meta)\n    }\n\n    function expandMenuByLabel(label: string) {\n      menu.value?.expandItemByLabel(label)\n    }\n\n    function toggleTheme(darkMode: boolean) {\n      isDark.value = darkMode\n\n      emit('update:dark-mode', darkMode)\n      emitEvent(props.onToggleTheme, darkMode)\n\n      if (!isClient) return\n\n      requestAnimationFrame(() => {\n        if (rootEl.value) {\n          if (darkMode) {\n            rootEl.value.classList.add('dark')\n          } else {\n            rootEl.value.classList.remove('dark')\n          }\n        }\n      })\n    }\n\n    function renderCheck() {\n      return <Icon {...icons.value.check}></Icon>\n    }\n\n    function renderLayoutConfig() {\n      return (\n        <div class={nh.be('config-unit')}>\n          <div\n            class={[nh.be('brief-block'), nh.bem('brief-block', 'aside')]}\n            onClick={() => handleSignTypeChange('aside')}\n          >\n            {currentSignType.value === 'aside' && renderCheck()}\n          </div>\n          <div class={nh.be('brief-block')} onClick={() => handleSignTypeChange('header')}>\n            {currentSignType.value === 'header' && renderCheck()}\n          </div>\n        </div>\n      )\n    }\n\n    function renderThemeConfig() {\n      return (\n        <div class={nh.be('config-unit')}>\n          <Switch\n            value={isDark.value}\n            class={[nh.be('theme-mode'), isDark.value && nh.bem('theme-mode', 'dark')]}\n            aria-label={'theme'}\n            onChange={toggleTheme}\n          >\n            {{\n              icon: () =>\n                isDark.value\n                  ? (\n                    <Icon {...icons.value.dark}></Icon>\n                    )\n                  : (\n                    <Icon {...icons.value.light}></Icon>\n                    )\n            }}\n          </Switch>\n        </div>\n      )\n    }\n\n    function renderColorConfig() {\n      if (!props.colors?.length) {\n        return null\n      }\n\n      return (\n        <div class={nh.be('config-unit')}>\n          {props.colors.map(color => (\n            <div\n              key={color}\n              class={nh.be('major-color')}\n              style={{\n                backgroundColor: color\n              }}\n              onClick={() => handleColorChange(color)}\n            >\n              {currentColor.value === color && renderCheck()}\n            </div>\n          ))}\n        </div>\n      )\n    }\n\n    function renderUserAvatar() {\n      if (slots.avatar) {\n        return renderSlot(slots, 'avatar', slotParams)\n      }\n\n      if (typeof props.user?.avatar === 'string') {\n        return (\n          <Avatar\n            src={props.user.avatar}\n            circle={props.avatarCircle}\n            onClick={() => toggleUserDropped()}\n          >\n            {{\n              icon: () => <Icon {...icons.value.user}></Icon>\n            }}\n          </Avatar>\n        )\n      }\n\n      return (\n        <Avatar circle={props.avatarCircle} onClick={() => toggleUserDropped()}>\n          {{\n            icon: () => (\n              <Icon {...icons.value.user} icon={props.user.avatar || icons.value.user.icon}></Icon>\n            )\n          }}\n        </Avatar>\n      )\n    }\n\n    function renderUserDrop() {\n      return (\n        <DropdownList>\n          {props.user?.name && (\n            <li class={nh.be('user-profile')}>\n              <span class={nh.be('user-name')}>{props.user.name}</span>\n              {props.user.email && <span class={nh.be('user-email')}>{props.user.email}</span>}\n            </li>\n          )}\n          {props.config?.length ? renderConfigs() : null}\n          {userActions.value.map(action => (\n            <DropdownItem\n              key={action.label}\n              class={nh.be('user-action')}\n              label={action.label}\n              disabled={action.disabled}\n              divided={action.divided}\n              onSelect={() => handleUserActionSelect(action.label, action.meta || {})}\n            >\n              {action.icon && (\n                <Icon\n                  {...action.iconProps}\n                  icon={action.icon}\n                  style={{ marginRight: '6px' }}\n                ></Icon>\n              )}\n              {action.name || action.label}\n            </DropdownItem>\n          ))}\n        </DropdownList>\n      )\n    }\n\n    function renderConfigs() {\n      return (\n        <li class={nh.be('config')}>\n          {props.config.includes('nav') &&\n            layoutState.navConfig && [\n              <div key={1} class={nh.be('config-label')}>\n                {locale.value.signType}\n              </div>,\n              renderLayoutConfig()\n          ]}\n          {props.config.includes('theme') && [\n            <div key={2} class={nh.be('config-label')}>\n              {locale.value.themeMode}\n            </div>,\n            renderThemeConfig()\n          ]}\n          {props.config.includes('color') && [\n            <div key={3} class={nh.be('config-label')}>\n              {locale.value.majorColor}\n            </div>,\n            renderColorConfig()\n          ]}\n        </li>\n      )\n    }\n\n    return () => {\n      const CustomTag = (props.tag || 'header') as any\n\n      return (\n        <CustomTag class={className.value}>\n          {hasLeft.value && (\n            <div class={[nh.be('header-left'), layoutState.classes.headerLeft]}>\n              {slots.left\n                ? (\n                    renderSlot(slots, 'left', slotParams)\n                  )\n                : props.signType === 'header'\n                  ? (\n                    <div class={nh.be('sign')} onClick={handleSignClick}>\n                      {props.logo && (\n                        <div class={nh.be('logo')}>\n                          <img src={props.logo} alt={'Logo'} />\n                        </div>\n                      )}\n                      {props.signName && <span class={nh.be('sign-name')}>{props.signName}</span>}\n                    </div>\n                    )\n                  : null}\n            </div>\n          )}\n          <div class={[nh.be('header-main'), layoutState.classes.headerMain]}>\n            {slots.default\n              ? (\n                  renderSlot(slots, 'default', slotParams)\n                )\n              : hasMenu.value\n                ? (\n                  <Menu\n                    ref={menu}\n                    {...(props.menuProps || {})}\n                    horizontal\n                    transfer\n                    options={props.menus}\n                    onSelect={handleMenuSelect}\n                  ></Menu>\n                  )\n                : null}\n          </div>\n          {slots.right && (\n            <div class={[nh.be('header-right'), layoutState.classes.headerRight]}>\n              {renderSlot(slots, 'right', slotParams)}\n            </div>\n          )}\n          {slots.user\n            ? (\n                renderSlot(slots, 'user', slotParams)\n              )\n            : (\n              <Dropdown\n                class={[nh.be('user'), layoutState.classes.headerUser]}\n                transfer\n                placement={isRtl.value ? 'bottom-start' : 'bottom-end'}\n                visible={currentUserDropped.value}\n                trigger={'custom'}\n                onClickOutside={() => toggleUserDropped(false)}\n              >\n                {{\n                  default: renderUserAvatar,\n                  drop: renderUserDrop\n                }}\n              </Dropdown>\n              )}\n        </CustomTag>\n      )\n    }\n  }\n})\n", "import { booleanProp, buildProps, eventProp, iconProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { LinkerType } from './symbol'\n\nexport const linkerProps = buildProps({\n  to: String,\n  type: String as PropType<LinkerType>,\n  icon: iconProp,\n  underline: booleanProp,\n  disabled: booleanProp,\n  target: String,\n  onClick: eventProp<(event: MouseEvent) => void>()\n})\n\nexport type LinkerProps = ExtractPropTypes<typeof linkerProps>\nexport type LinkerCProps = ConfigurableProps<LinkerProps, 'to'>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed } from 'vue'\n\nimport { createIconProp, emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { linkerProps } from './props'\n\nimport type { LinkerType } from './symbol'\n\nconst linkerTypes = Object.freeze<LinkerType[]>([\n  'default',\n  'primary',\n  'success',\n  'error',\n  'warning',\n  'info'\n])\n\ndefineOptions({ name: 'Linker' })\n\nconst _props = defineProps(linkerProps)\nconst props = useProps('linker', _props, {\n  to: {\n    default: null,\n    static: true\n  },\n  type: {\n    default: 'default' as LinkerType,\n    validator: (value: LinkerType) => linkerTypes.includes(value)\n  },\n  icon: createIconProp(),\n  underline: false,\n  disabled: false,\n  target: '_blank'\n})\n\nconst nh = useNameHelper('linker')\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm(props.type)]: props.type !== 'default',\n    [nh.bm('disabled')]: props.disabled,\n    [nh.bm('underline')]: props.underline\n  }\n})\n\nfunction handleClick(event: MouseEvent) {\n  if (props.disabled) {\n    event.preventDefault()\n  }\n\n  emitEvent(props.onClick, event)\n}\n</script>\n\n<template>\n  <a\n    :class=\"className\"\n    :href=\"props.to\"\n    tabindex=\"0\"\n    :target=\"props.target\"\n    @click=\"handleClick\"\n  >\n    <slot name=\"icon\">\n      <Icon v-if=\"props.icon\" :class=\"nh.be('icon')\" :icon=\"props.icon\"></Icon>\n    </slot>\n    <slot></slot>\n  </a>\n</template>\n", "import { Icon } from '@/components/icon'\nimport { Linker } from '@/components/linker'\n\nimport { computed, defineComponent, renderSlot, toRef } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { layoutFooterProps } from './props'\nimport { useLayoutState, useMediaQuery } from './helper'\n\nexport default defineComponent({\n  name: 'LayoutFooter',\n  props: layoutFooterProps,\n  setup(_props, { slots }) {\n    const props = useProps('layoutFooter', _props, {\n      tag: 'footer',\n      copyright: '',\n      links: () => [],\n      verticalLinks: 'md'\n    })\n\n    const nh = useNameHelper('layout')\n    const layoutState = useLayoutState()\n    const horizontalMatched = useMediaQuery(toRef(props, 'verticalLinks'))\n\n    const className = computed(() => {\n      return [\n        nh.be('footer'),\n        {\n          [nh.bs('vars')]: !layoutState.isLayout,\n          [nh.bem('footer', 'inherit')]: layoutState.isLayout || props.inherit\n        },\n        layoutState.classes.footer\n      ]\n    })\n\n    function renderLinks() {\n      if (!props.links?.length) {\n        return <div role={'none'} aria-hidden style={'display: none'}></div>\n      }\n\n      return (\n        <div\n          class={[\n            nh.be('links'),\n            !horizontalMatched.value && nh.bem('links', 'vertical'),\n            layoutState.classes.footerLinks\n          ]}\n        >\n          <div class={nh.be('links-row')}>\n            {props.links.map((group, index) => (\n              <div\n                key={index}\n                class={[\n                  nh.be('link-group'),\n                  !horizontalMatched.value && nh.bem('link-group', 'vertical')\n                ]}\n              >\n                <div class={[nh.be('link-name'), nh.bem('link-name', 'group')]}>\n                  {group.to\n                    ? (\n                      <Linker icon={group.icon} to={group.to} target={group.target}>\n                        {group.name}\n                      </Linker>\n                      )\n                    : (\n                        [group.icon && <Icon icon={group.icon}></Icon>, group.name]\n                      )}\n                  {group.subname && <div class={nh.be('link-subname')}>{`- ${group.subname}`}</div>}\n                </div>\n                {group.children?.length\n                  ? group.children.map((link, index) => (\n                    <div key={index} class={nh.be('link')}>\n                      <Linker icon={link.icon} to={link.to} target={link.target}>\n                        {link.name}\n                      </Linker>\n                      {link.subname && (\n                        <div class={nh.be('link-subname')}>{`- ${link.subname}`}</div>\n                      )}\n                    </div>\n                  ))\n                  : null}\n              </div>\n            ))}\n          </div>\n        </div>\n      )\n    }\n\n    return () => {\n      const CustomTag = (props.tag || 'footer') as any\n\n      return (\n        <CustomTag class={className.value}>\n          {slots.links ? renderSlot(slots, 'links') : renderLinks()}\n          <div class={[nh.be('copyright'), layoutState.classes.copyright]}>\n            {slots.copyright ? slots.copyright() : props.copyright}\n          </div>\n        </CustomTag>\n      )\n    }\n  }\n})\n", "import { Icon } from '@/components/icon'\nimport { Menu } from '@/components/menu'\nimport { NativeScroll } from '@/components/native-scroll'\n\nimport {\n  computed,\n  defineComponent,\n  reactive,\n  ref,\n  renderSlot,\n  shallowReadonly,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { layoutAsideProps } from './props'\nimport { useLayoutState, useMediaQuery, useUpdateCounter } from './helper'\n\nimport type { MenuExposed } from '@/components/menu'\n\nexport default defineComponent({\n  name: 'LayoutAside',\n  props: layoutAsideProps,\n  emits: ['update:reduced', 'update:expanded'],\n  setup(_props, { slots, emit, expose }) {\n    const props = useProps('layoutAside', _props, {\n      tag: 'aside',\n      expanded: false,\n      reduced: false,\n      menus: {\n        default: () => [],\n        static: true\n      },\n      menuProps: null,\n      logo: '',\n      signName: '',\n      fixed: 'lg',\n      signType: 'aside'\n    })\n\n    const nh = useNameHelper('layout')\n    const icons = useIcons()\n\n    const layoutState = useLayoutState()\n    const currentReduced = ref(props.reduced)\n    const currentExpanded = ref(props.expanded)\n    const scrollHeight = ref('100%')\n\n    const matched = useMediaQuery(toRef(props, 'fixed'))\n    const counter = useUpdateCounter()\n\n    const top = ref<HTMLElement>()\n    const bottom = ref<HTMLElement>()\n    const menu = ref<MenuExposed>()\n\n    const className = computed(() => {\n      return [\n        nh.be('aside'),\n        {\n          [nh.bs('vars')]: !layoutState.isLayout,\n          [nh.bem('aside', 'inherit')]: layoutState.isLayout || props.inherit,\n          [nh.bem('aside', 'fixed')]: matched.value,\n          [nh.bem('aside', 'expanded')]: currentExpanded.value,\n          [nh.bem('aside', 'reduced')]: currentReduced.value,\n          [nh.bem('aside', 'no-sign')]: props.signType !== 'aside'\n        },\n        layoutState.classes.aside\n      ]\n    })\n    const hasTop = computed(() => {\n      return !!(props.logo || props.signName || slots.top)\n    })\n    const hasMenu = computed(() => {\n      return !!(props.menus?.length || props.menuProps?.router)\n    })\n\n    const slotParams = shallowReadonly(\n      reactive({\n        expanded: currentExpanded,\n        reduced: currentReduced,\n        toggleExpanded,\n        toggleReduced\n      })\n    )\n\n    expose({ menu, toggleExpanded, toggleReduced, expandMenuByLabel })\n\n    watch(\n      () => props.reduced,\n      value => {\n        currentReduced.value = value\n      }\n    )\n    watch(\n      () => props.expanded,\n      value => {\n        currentExpanded.value = value\n      }\n    )\n    watch(\n      matched,\n      value => {\n        layoutState.useExpand = !value\n        value && toggleExpanded(false)\n      },\n      { immediate: true }\n    )\n    watch(counter, () => computeScrollHeight)\n\n    function computeScrollHeight() {\n      let topHeight = 0\n      let bottomHeight = 0\n\n      if (top.value) {\n        topHeight = top.value.offsetHeight\n      }\n\n      if (bottom.value) {\n        bottomHeight = bottom.value.offsetHeight\n      }\n\n      if (topHeight || bottomHeight) {\n        scrollHeight.value = `calc(100% - ${topHeight + bottomHeight}px)`\n      } else {\n        scrollHeight.value = '100%'\n      }\n    }\n\n    function toggleExpanded(expanded = !currentExpanded.value) {\n      currentExpanded.value = expanded\n\n      emit('update:expanded', expanded)\n      emitEvent(props.onExpandedChange, expanded)\n    }\n\n    function toggleReduced(reduced = !currentReduced.value) {\n      currentReduced.value = reduced\n\n      emit('update:reduced', reduced)\n      emitEvent(props.onReducedChange, reduced)\n    }\n\n    function handleSignClick(event: MouseEvent) {\n      emitEvent(props.onSignClick, event)\n    }\n\n    function handleMenuSelect(label: string, meta: Record<string, any>) {\n      emitEvent(props.onMenuSelect, label, meta)\n    }\n\n    function expandMenuByLabel(label: string) {\n      menu.value?.expandItemByLabel(label)\n    }\n\n    return () => {\n      const CustomTag = (props.tag || 'aside') as any\n\n      return (\n        <CustomTag class={className.value}>\n          {hasTop.value && (\n            <div ref={top} class={[nh.be('aside-top'), layoutState.classes.asideTop]}>\n              {slots.top\n                ? (\n                    renderSlot(slots, 'top', slotParams)\n                  )\n                : (\n                  <div class={nh.be('sign')} onClick={handleSignClick}>\n                    {props.logo && (\n                      <div class={nh.be('logo')}>\n                        <img src={props.logo} alt={'Logo'} />\n                      </div>\n                    )}\n                    {props.signName && <span class={nh.be('sign-name')}>{props.signName}</span>}\n                  </div>\n                  )}\n            </div>\n          )}\n          <NativeScroll\n            class={[nh.be('aside-main'), layoutState.classes.main]}\n            use-y-bar\n            observe-deep\n            height={scrollHeight.value}\n          >\n            {slots.default\n              ? (\n                  renderSlot(slots, 'default', slotParams)\n                )\n              : hasMenu.value\n                ? (\n                  <Menu\n                    ref={menu}\n                    {...(props.menuProps || {})}\n                    transfer\n                    options={props.menus}\n                    reduced={currentReduced.value}\n                    onSelect={handleMenuSelect}\n                  ></Menu>\n                  )\n                : null}\n          </NativeScroll>\n          <div ref={bottom} class={[nh.be('aside-bottom'), layoutState.classes.asideBottom]}>\n            {slots.bottom\n              ? (\n                  renderSlot(slots, 'bottom', slotParams)\n                )\n              : (\n                <div class={nh.be('reduce-handler')} onClick={() => toggleReduced()}>\n                  {currentReduced.value\n                    ? (\n                      <Icon {...icons.value.indent}></Icon>\n                      )\n                    : (\n                      <Icon {...icons.value.outdent}></Icon>\n                      )}\n                </div>\n                )}\n          </div>\n          <div\n            class={[nh.be('expand-handler'), layoutState.classes.expandHandler]}\n            onClick={() => toggleExpanded()}\n          >\n            {slots.expand\n              ? (\n                  renderSlot(slots, 'expand', slotParams)\n                )\n              : (\n                <Icon {...icons.value.angleRight}></Icon>\n                )}\n          </div>\n        </CustomTag>\n      )\n    }\n  }\n})\n", "import { NativeScroll } from '@/components/native-scroll'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport {\n  computed,\n  defineComponent,\n  provide,\n  reactive,\n  ref,\n  renderSlot,\n  shallowReadonly,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { createSlotRender, useMounted } from '@vexip-ui/hooks'\nimport { getYBorder, isClient, runQueueFrame } from '@vexip-ui/utils'\nimport LayoutMain from './layout-main'\nimport LayoutHeader from './layout-header'\nimport LayoutFooter from './layout-footer'\nimport LayoutAside from './layout-aside'\nimport { layoutProps } from './props'\nimport { useMediaQuery } from './helper'\nimport { LAYOUT_STATE } from './symbol'\n\nimport type { NativeScrollExposed } from '@/components/native-scroll'\nimport type {\n  LayoutAsideExposed,\n  LayoutConfig,\n  LayoutHeaderExposed,\n  LayoutSignType\n} from './symbol'\n\nexport default defineComponent({\n  name: 'Layout',\n  props: layoutProps,\n  emits: [\n    'update:expanded',\n    'update:reduced',\n    'update:sign-type',\n    'update:color',\n    'update:dark-mode'\n  ],\n  setup(_props, { slots, emit, expose }) {\n    const props = useProps('layout', _props, {\n      locale: null,\n      noAside: false,\n      footer: false,\n      tag: 'section',\n      menus: {\n        default: () => [],\n        static: true\n      },\n      menuProps: null,\n      logo: '',\n      signName: '',\n      config: () => ['nav', 'theme', 'color'] as LayoutConfig[],\n      user: null,\n      actions: () => [],\n      expanded: false,\n      reduced: false,\n      avatarCircle: false,\n      signType: 'aside',\n      headerFixed: 'lg',\n      asideFixed: 'lg',\n      copyright: '',\n      links: () => [],\n      colors: () => ['#339af0', '#f03e3e', '#be4bdb', '#7950f2', '#1b9e44', '#f76707'],\n      color: '',\n      miniHeaderSign: 'lg',\n      verticalLinks: 'md',\n      darkMode: null,\n      fixedMain: false,\n      fitWindow: false,\n      innerClasses: () => ({}),\n      noHeader: false\n    })\n\n    const nh = useNameHelper('layout')\n    const locked = ref(false)\n    // const asideActive = ref(!props.noAside)\n    const asideExpanded = ref(props.expanded)\n    const asideReduced = ref(props.reduced)\n    const currentSignType = ref<LayoutSignType>(props.signType)\n    const userDropped = ref(false)\n    const currentColor = ref(props.color)\n\n    const { isMounted } = useMounted('frame')\n\n    const section = ref<HTMLElement>()\n    const scroll = ref<NativeScrollExposed>()\n    const header = ref<LayoutHeaderExposed>()\n    const aside = ref<LayoutAsideExposed>()\n\n    const affixMatched = useMediaQuery(toRef(props, 'headerFixed'))\n    const expandMatched = useMediaQuery(toRef(props, 'asideFixed'))\n    const signNameMatched = useMediaQuery(toRef(props, 'miniHeaderSign'))\n\n    const state = reactive({\n      isLayout: true,\n      locked: computed(() => locked.value),\n      affixed: false,\n      scrollY: 0,\n      affixMatched,\n      expandMatched,\n      useExpand: false,\n      expanded: asideExpanded,\n      reduced: asideReduced,\n      navConfig: computed(() => !props.noAside),\n      classes: toRef(props, 'innerClasses'),\n      changeInLock\n    })\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm('no-aside')]: props.noAside,\n          [nh.bm('no-header')]: props.noHeader,\n          [nh.bm('header-main')]: currentSignType.value === 'header',\n          [nh.bm('locked')]: !isMounted.value || locked.value,\n          [nh.bm('fit-window')]: props.fitWindow\n        }\n      ]\n    })\n    const rootEl = computed(() => {\n      return isClient && isMounted.value ? document.documentElement : null\n    })\n    const signInHeader = computed(() => {\n      return props.noAside || currentSignType.value === 'header' || state.useExpand\n    })\n    const menu = computed(() => aside.value?.menu || header.value?.menu)\n    const isDark = ref(props.darkMode)\n    const viewHeight = ref('100%')\n\n    const style = computed(() => {\n      return {\n        [nh.cv('view-height')]: props.fitWindow ? '100vh' : viewHeight.value\n      }\n    })\n\n    const slotParams = shallowReadonly(\n      reactive({\n        expanded: asideExpanded,\n        reduced: asideReduced,\n        toggleExpanded,\n        toggleReduced\n      })\n    )\n\n    provide(LAYOUT_STATE, state)\n\n    expose({ scroll, menu, toggleExpanded, toggleReduced, expandMenuByLabel })\n\n    watch(affixMatched, value => {\n      state.affixed = !value && state.scrollY >= 50\n    })\n    watch(\n      () => props.expanded,\n      value => {\n        asideExpanded.value = value\n      }\n    )\n    watch(\n      () => props.reduced,\n      value => {\n        asideReduced.value = value\n      }\n    )\n    // watch(\n    //   () => props.noAside,\n    //   value => {\n    //     changeInLock(() => (asideActive.value = value))\n    //   }\n    // )\n    watch(currentSignType, value => {\n      emit('update:sign-type', value)\n      emitEvent(props.onNavChange, value)\n    })\n    watch(\n      () => props.color,\n      value => {\n        currentColor.value = value || props.colors?.[0] || getBaseColor()\n      }\n    )\n    watch(currentColor, value => {\n      emit('update:color', value)\n      emitEvent(props.onColorChange, value)\n    })\n    watch(\n      () => props.darkMode,\n      value => {\n        isDark.value = value\n      }\n    )\n\n    function getBaseColor() {\n      if (rootEl.value) {\n        return getComputedStyle(rootEl.value).getPropertyValue('--vxp-color-primary-base')\n      }\n\n      return '#339af0'\n    }\n\n    function toggleExpanded(expanded = !asideReduced.value) {\n      asideExpanded.value = expanded\n\n      emit('update:expanded', expanded)\n      emitEvent(props.onExpandedChange, expanded)\n    }\n\n    function toggleReduced(reduced = !asideReduced.value) {\n      asideReduced.value = reduced\n\n      emit('update:reduced', reduced)\n      emitEvent(props.onReducedChange, reduced)\n    }\n\n    function handleSignClick(event: MouseEvent) {\n      emitEvent(props.onSignClick, event)\n    }\n\n    function handleMenuSelect(label: string, meta: Record<string, any>) {\n      emitEvent(props.onMenuSelect, label, meta)\n    }\n\n    function handleToggleTheme(isDark: boolean) {\n      emit('update:dark-mode', isDark)\n      emitEvent(props.onToggleTheme, isDark)\n    }\n\n    function handleUserAction(label: string, meta: Record<string, any>) {\n      emitEvent(props.onUserAction, label, meta)\n    }\n\n    function expandMenuByLabel(label: string) {\n      menu.value?.expandItemByLabel(label)\n    }\n\n    function handleResize() {\n      if (scroll.value?.$el) {\n        viewHeight.value = `${scroll.value.$el.offsetHeight - getYBorder(scroll.value.$el)}px`\n      }\n\n      emitEvent(props.onContentResize)\n    }\n\n    let cancelChange: (() => void) | undefined\n\n    function changeInLock(doChange: () => void) {\n      cancelChange?.()\n      cancelChange = runQueueFrame([\n        () => (locked.value = true),\n        doChange,\n        () => (locked.value = false)\n      ])\n    }\n\n    function stopAndPrevent(event: Event) {\n      event.stopPropagation()\n      event.preventDefault()\n    }\n\n    function renderSign() {\n      if (!props.logo && !props.signName && !slots.sign) {\n        return null\n      }\n\n      if (slots.sign) {\n        return renderSlot(slots, 'sign', slotParams)\n      }\n\n      const showSignName = props.signName && !(signInHeader.value && !signNameMatched.value)\n\n      return (\n        <div\n          class={[nh.be('sign'), !showSignName && nh.bem('sign', 'logo-only')]}\n          onClick={handleSignClick}\n        >\n          {[\n            props.logo && (\n              <div class={nh.be('logo')}>\n                <img src={props.logo} alt={'Logo'} />\n              </div>\n            ),\n            showSignName && <span class={nh.be('sign-name')}>{props.signName}</span>\n          ]}\n        </div>\n      )\n    }\n\n    function renderHeader() {\n      if (props.noHeader) {\n        return <header role={'none'} aria-hidden style={'display: none'}></header>\n      }\n\n      if (slots.header) {\n        return renderSlot(slots, 'header', slotParams)\n      }\n\n      return (\n        <LayoutHeader\n          ref={header}\n          v-model:sign-type={currentSignType.value}\n          v-model:user-dropped={userDropped.value}\n          v-model:color={currentColor.value}\n          v-model:dark-mode={isDark.value}\n          inherit\n          locale={props.locale}\n          user={props.user}\n          actions={props.actions}\n          config={props.config}\n          avatar-circle={props.avatarCircle}\n          menus={props.noAside ? props.menus : []}\n          menu-props={props.noAside ? props.menuProps : null}\n          colors={props.colors}\n          onUserAction={handleUserAction}\n          onExpandedChange={toggleExpanded}\n          onReducedChange={toggleReduced}\n          onMenuSelect={handleMenuSelect}\n          onToggleTheme={handleToggleTheme}\n          {...{\n            onWheel: stopAndPrevent,\n            onMousemove: stopAndPrevent\n          }}\n        >\n          {{\n            left: createSlotRender(slots, ['header-left', 'headerLeft'], () =>\n              signInHeader.value ? renderSign() : null\n            ),\n            default: createSlotRender(slots, ['header-main', 'headerMain']),\n            right: createSlotRender(slots, ['header-right', 'headerRight']),\n            user: createSlotRender(slots, ['header-user', 'headerUser']),\n            avatar: createSlotRender(slots, ['header-avatar', 'headerAvatar'])\n          }}\n        </LayoutHeader>\n      )\n    }\n\n    function renderAside() {\n      if (props.noAside) {\n        return <div role={'none'} aria-hidden style={'display: none'}></div>\n      }\n\n      return (\n        <div\n          class={[\n            nh.be('sidebar'),\n            !expandMatched.value && nh.bem('sidebar', 'away'),\n            props.innerClasses.sidebar\n          ]}\n          onWheel={stopAndPrevent}\n          onMousemove={stopAndPrevent}\n        >\n          {slots.aside\n            ? (\n                renderSlot(slots, 'aside', slotParams)\n              )\n            : (\n              <LayoutAside\n                ref={aside}\n                v-model:expanded={asideExpanded.value}\n                v-model:reduced={asideReduced.value}\n                inherit\n                sign-type={currentSignType.value}\n                menus={props.menus}\n                menu-props={props.menuProps}\n                fixed={props.asideFixed}\n                onExpandedChange={toggleExpanded}\n                onReducedChange={toggleReduced}\n                onMenuSelect={handleMenuSelect}\n              >\n                {{\n                  top: createSlotRender(slots, ['aside-top', 'asideTop'], () =>\n                    !signInHeader.value ? renderSign() : null\n                  ),\n                  default: createSlotRender(slots, ['aside-main', 'asideMain']),\n                  bottom: createSlotRender(slots, ['aside-bottom', 'asideBottom']),\n                  expand: createSlotRender(slots, ['aside-expand', 'asideExpand'])\n                }}\n              </LayoutAside>\n              )}\n        </div>\n      )\n    }\n\n    function renderMain() {\n      if (slots.default) {\n        return renderSlot(slots, 'default', slotParams)\n      }\n\n      return (\n        <LayoutMain fixed={props.fixedMain}>\n          {{\n            default: createSlotRender(slots, ['main'])\n          }}\n        </LayoutMain>\n      )\n    }\n\n    function renderFooter() {\n      if (slots.footer) {\n        return renderSlot(slots, 'footer', slotParams)\n      }\n\n      return (\n        <LayoutFooter\n          inherit\n          copyright={props.copyright}\n          links={props.links}\n          vertical-links={props.verticalLinks}\n        >\n          {{\n            links: createSlotRender(slots, ['footer-links', 'footerLinks']),\n            copyright: createSlotRender(slots, ['footer-copyright', 'footerCopyright'])\n          }}\n        </LayoutFooter>\n      )\n    }\n\n    function renderWrapper() {\n      const CustomTag = (props.tag || 'section') as any\n\n      return (\n        <CustomTag\n          class={[\n            nh.be('wrapper'),\n            props.fixedMain && nh.bem('wrapper', 'fixed'),\n            props.innerClasses.wrapper\n          ]}\n        >\n          {currentSignType.value === 'header' && renderHeader()}\n          {renderAside()}\n          <section\n            ref={section}\n            class={[\n              nh.be('section'),\n              {\n                [nh.bem('section', 'away')]: expandMatched.value,\n                [nh.bem('section', 'reduced')]: asideReduced.value,\n                [nh.bem('section', 'locked')]: locked.value,\n                [nh.bem('section', 'fixed')]: props.fixedMain\n              },\n              props.innerClasses.section\n            ]}\n          >\n            {currentSignType.value === 'aside' && renderHeader()}\n            {renderMain()}\n            {props.footer && renderFooter()}\n          </section>\n        </CustomTag>\n      )\n    }\n\n    return () => {\n      if (props.fitWindow) {\n        return (\n          <section class={className.value} style={style.value}>\n            <ResizeObserver throttle onResize={handleResize}>\n              {renderWrapper()}\n            </ResizeObserver>\n          </section>\n        )\n      }\n\n      return (\n        <NativeScroll\n          ref={scroll}\n          class={className.value}\n          inherit={props.inherit}\n          use-y-bar\n          observe-deep\n          bar-class={[nh.be('scrollbar'), props.innerClasses.scrollbar]}\n          style={style.value}\n          onResize={handleResize}\n        >\n          {renderWrapper()}\n        </NativeScroll>\n      )\n    }\n  }\n})\n", "<script setup lang=\"ts\">\nimport { computed, onBeforeUnmount, ref } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useRtl } from '@vexip-ui/hooks'\nimport { boundRange } from '@vexip-ui/utils'\n\nimport type { LoadingOptions, LoadingPosition, LoadingState } from './symbol'\n\ndefineOptions({ name: 'Loading' })\n\nconst nh = useNameHelper('loading')\nconst { isRtl } = useRtl()\nconst visible = ref(false)\nconst strokeWidth = ref(2)\nconst state = ref<LoadingState>('default')\nconst position = ref<LoadingPosition>('top')\nconst percent = ref(0)\n\nlet maxPercent = 95\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm(state.value)]: state.value !== 'default'\n  }\n})\n\nconst style = computed(() => {\n  return {\n    [position.value]: '0',\n    height: `${strokeWidth.value}px`\n  }\n})\n\nconst fillerStyle = computed(() => {\n  return {\n    transform: `translateX(${((isRtl.value ? -1 : 1) * (percent.value - 100)) / 2}%) scaleX(${\n      percent.value / 100\n    })`\n  }\n})\n\nlet timer: ReturnType<typeof setTimeout>\nlet interval: ReturnType<typeof setInterval>\nlet rafId: ReturnType<typeof requestAnimationFrame>\n\ndefineExpose({ visible, percent, startLoading })\n\nonBeforeUnmount(() => {\n  clearTimeout(timer)\n  clearInterval(interval)\n  cancelAnimationFrame(rafId)\n})\n\nfunction startLoading(options: LoadingOptions) {\n  if (percent.value === 100) {\n    clearTimeout(timer)\n\n    visible.value = false\n    percent.value = 0\n    state.value = 'default'\n    strokeWidth.value = 2\n    position.value = 'top'\n  }\n\n  clearInterval(interval)\n\n  const setLoading = () => {\n    percent.value = boundRange(options.percent, 0, 100)\n    state.value = options.state ?? 'default'\n    strokeWidth.value = boundRange(options.strokeWidth ?? 2, 1, 10)\n    position.value = options.position ?? 'top'\n    maxPercent = boundRange(options.maxPercent ?? 95, percent.value, 95)\n\n    if (percent.value === 100) {\n      timer = setTimeout(() => {\n        visible.value = false\n      }, 500)\n    } else {\n      interval = setInterval(() => {\n        percent.value += Math.floor(Math.random() * 3 + 1)\n\n        if (percent.value >= maxPercent) {\n          percent.value = maxPercent\n          clearInterval(interval)\n        }\n      }, 500)\n    }\n  }\n\n  maxPercent = 95\n\n  rafId = requestAnimationFrame(() => {\n    if (visible.value) {\n      setLoading()\n    } else {\n      visible.value = true\n      rafId = requestAnimationFrame(setLoading)\n    }\n  })\n}\n</script>\n\n<template>\n  <Transition :name=\"nh.ns('fade')\" appear>\n    <div\n      v-show=\"visible\"\n      :class=\"className\"\n      role=\"progressbar\"\n      :style=\"style\"\n      :aria-valuenow=\"percent\"\n      aria-valuemin=\"0\"\n      aria-valuemax=\"100\"\n    >\n      <div :class=\"nh.be('filler')\" :style=\"fillerStyle\"></div>\n    </div>\n  </Transition>\n</template>\n", "import { createApp, createVNode, render } from 'vue'\n\nimport Component from './loading.vue'\nimport { proxyExposed, unrefElement } from '@vexip-ui/hooks'\nimport { destroyObject, isClient } from '@vexip-ui/utils'\n\nimport type { App, MaybeRef } from 'vue'\nimport type { MaybeInstance } from '@vexip-ui/hooks'\nimport type { LoadingInstance, LoadingOptions, LoadingState } from './symbol'\n\nexport type { LoadingState, LoadingOptions }\n\ntype InitLoadingOptions = Omit<LoadingOptions, 'percent'>\n\nexport class LoadingManager {\n  name: string\n  defaults: InitLoadingOptions\n\n  private _mountedApp: App<unknown> | null\n  private _instance: LoadingInstance | null\n  private _innerApp: App<unknown> | null\n  private _container: HTMLElement | null\n  private _wrapper: HTMLElement | SVGElement | null\n  private _mountedEl: HTMLElement | null\n\n  constructor(options: InitLoadingOptions = {}) {\n    this._mountedApp = null\n    this._instance = null\n    this._innerApp = null\n    this._container = null\n    this._wrapper = null\n    this._mountedEl = null\n    this.name = 'Loading'\n    this.defaults = {}\n\n    this.config(options)\n  }\n\n  open(percent: number): void\n  open(options: LoadingOptions): void\n  open(options: number | LoadingOptions) {\n    if (!isClient) return\n\n    if (typeof options === 'number') {\n      options = { percent: options }\n    }\n\n    this._getInstance()!.startLoading({ ...this.defaults, ...options })\n  }\n\n  close() {\n    this.open(100)\n  }\n\n  config(options: InitLoadingOptions) {\n    this.defaults = { ...this.defaults, ...options }\n  }\n\n  clone() {\n    const manager = new LoadingManager(this.defaults)\n\n    manager._mountedApp = this._mountedApp\n\n    return manager\n  }\n\n  destroy() {\n    this._mountedEl && this._wrapper?.removeChild(this._mountedEl)\n    this._innerApp?.unmount()\n    this._container && render(null, this._container)\n    destroyObject(this)\n  }\n\n  isDestroyed() {\n    return false\n  }\n\n  install(app: App, options: InitLoadingOptions & { property?: string } = {}) {\n    const { property, ...others } = options\n\n    this.config(others)\n    this._mountedApp = app\n\n    if (property || !app.config.globalProperties.$loading) {\n      app.config.globalProperties[property || '$loading'] = this\n    }\n  }\n\n  transferTo(target: MaybeRef<string | MaybeInstance>) {\n    if (!isClient) return\n\n    const el = unrefElement(target)\n\n    if (el) {\n      this._wrapper = el\n\n      if (this._instance) {\n        this._mountedEl && this._wrapper.appendChild(this._mountedEl)\n      } else {\n        this._getInstance()\n      }\n    }\n  }\n\n  private _getInstance() {\n    if (!this._instance && isClient) {\n      if (!this._mountedApp) {\n        console.warn('[vexip-ui:Loading]: App missing, the plugin maybe not installed.')\n\n        this._container = document.createElement('div')\n        this._innerApp = createApp(Component)\n        this._instance = this._innerApp.mount(this._container) as LoadingInstance\n      } else {\n        const vnode = createVNode(Component, null, null)\n\n        this._container = document.createElement('div')\n        vnode.appContext = this._mountedApp._context\n\n        render(vnode, this._container, false)\n\n        this._instance = proxyExposed<LoadingInstance>(vnode)\n      }\n\n      this._mountedEl = this._container.firstElementChild as HTMLElement\n      ;(this._wrapper || document.body).appendChild(this._mountedEl)\n    }\n\n    return this._instance\n  }\n}\n\nexport const Loading = new LoadingManager()\n", "import type { InjectionKey } from 'vue'\n\nexport type Key = string | number\nexport type PopupPlacement =\n  | 'top-right'\n  | 'top-center'\n  | 'top-left'\n  | 'bottom-right'\n  | 'bottom-center'\n  | 'bottom-left'\n\nexport interface PopupItemState extends Record<string, unknown> {\n  key: Key,\n  content: string,\n  closable: boolean,\n  height: number,\n  visible: boolean,\n  verticalPosition: number,\n  type?: string,\n  className?: any,\n  style?: any,\n  icon?: Record<string, any> | (() => any),\n  iconColor?: string,\n  onOpen: (key: Key) => void,\n  onClose: (result: boolean) => void,\n  onEnter: () => void,\n  onLeave: () => void\n}\n\nexport const DELETE_HANDLER: InjectionKey<(key: Key) => void> = Symbol('DELETE_HANDLER')\n\nexport const popupPlacements = Object.freeze<PopupPlacement[]>([\n  'top-right',\n  'top-center',\n  'top-left',\n  'bottom-right',\n  'bottom-center',\n  'bottom-left'\n])\n\nlet globalIndex = 0\n\nexport function getIndex() {\n  return globalIndex++\n}\n", "<script setup lang=\"ts\">\nimport { Renderer } from '@/components/renderer'\n\nimport { computed, inject, nextTick, onMounted, ref } from 'vue'\n\nimport { classProp, useNameHelper, useZIndex } from '@vexip-ui/config'\nimport { noop } from '@vexip-ui/utils'\nimport { DELETE_HANDLER } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { PopupItemState } from './symbol'\n\ndefineOptions({ name: 'PopupItem' })\n\nconst props = defineProps({\n  state: {\n    type: Object as PropType<PopupItemState>,\n    default: () => ({})\n  },\n  transitionName: {\n    type: String,\n    default: null\n  },\n  innerClass: {\n    type: classProp,\n    default: null\n  }\n})\n\nconst emit = defineEmits(['enter', 'leave'])\n\nconst handleDelete = inject(DELETE_HANDLER, noop)\nconst nh = useNameHelper('popup')\nconst getIndex = useZIndex()\n\nconst wrapper = ref<HTMLElement>()\n\nconst transition = computed(() => props.transitionName || nh.ns('popup-top'))\n\nonMounted(() => {\n  nextTick(() => {\n    const state = props.state\n\n    if (state && wrapper.value) {\n      state.height = wrapper.value.offsetHeight\n    }\n  })\n})\n</script>\n\n<template>\n  <Transition appear :name=\"transition\" @after-leave=\"handleDelete(state.key)\">\n    <div\n      v-show=\"state.visible\"\n      ref=\"wrapper\"\n      :class=\"nh.be('item')\"\n      :style=\"{ zIndex: getIndex() }\"\n      :vxp-index=\"state.key\"\n      @pointerenter=\"emit('enter')\"\n      @pointerleave=\"emit('leave')\"\n    >\n      <div :class=\"[nh.be('item-inner'), innerClass]\">\n        <slot :item=\"state\">\n          <Renderer\n            v-if=\"typeof state.renderer === 'function'\"\n            :renderer=\"state.renderer\"\n          ></Renderer>\n          <template v-else>\n            {{ state.content }}\n          </template>\n        </slot>\n      </div>\n    </div>\n  </Transition>\n</template>\n", "<script setup lang=\"ts\">\nimport { computed, provide, reactive, ref, watch } from 'vue'\n\nimport PopupItem from './popup-item.vue'\nimport { classProp, useNameHelper } from '@vexip-ui/config'\nimport { isFunction, noop } from '@vexip-ui/utils'\nimport { DELETE_HANDLER, getIndex, popupPlacements } from './symbol'\n\nimport type { CSSProperties } from 'vue'\nimport type { Key, PopupItemState, PopupPlacement } from './symbol'\n\ntype QueueState =\n  | {\n    type: 'add',\n    param: Record<string, unknown>\n  }\n  | {\n    type: 'clear',\n    param: Key\n  }\n\ndefineOptions({ name: 'Popup' })\n\nconst props = defineProps({\n  transitionName: {\n    type: String,\n    default: null\n  },\n  innerClass: {\n    type: classProp,\n    default: null\n  },\n  startOffset: {\n    type: Number,\n    default: 30\n  },\n  placement: {\n    default: 'top-right' as PopupPlacement,\n    validator: (value: PopupPlacement) => popupPlacements.includes(value)\n  },\n  itemOffset: {\n    type: Number,\n    default: 16\n  },\n  itemType: {\n    type: Function\n  }\n})\n\ndefineSlots<{ item: (item: any) => any }>()\n\nconst nh = useNameHelper('popup')\nconst items = ref<PopupItemState[]>([])\nconst queue: QueueState[] = []\n\nconst wrapper = ref<HTMLElement>()\n\nlet pending = false\n\nconst placementArray = computed(() => {\n  return props.placement.split('-') as ['top' | 'bottom', 'right' | 'center' | 'left']\n})\nconst transition = computed(() => props.transitionName || nh.ns('popup-top'))\n\nwatch(\n  () => props.startOffset,\n  (value, prevValue) => {\n    items.value.forEach(item => {\n      item.verticalPosition += value - prevValue\n    })\n  }\n)\n\nprovide(DELETE_HANDLER, deleteItem)\n\ndefineExpose({\n  items,\n  wrapper,\n  add,\n  remove,\n  has,\n  find,\n  clear\n})\n\nfunction getItemStyle(item: PopupItemState) {\n  const [verticalStyle, horizontalStyle] = placementArray.value\n  const style: CSSProperties = { [verticalStyle]: `${item.verticalPosition}px` }\n\n  if (horizontalStyle === 'center') {\n    style.left = '50%'\n    style.transform = 'translateX(-50%)'\n  } else {\n    style[horizontalStyle] = '24px'\n  }\n\n  const zIndex = parseInt(item.zIndex as string)\n\n  if (!Number.isNaN(zIndex)) {\n    style.zIndex = zIndex\n  }\n\n  return style\n}\n\nfunction add(options: Record<string, any>) {\n  return new Promise<Key>(resolve => {\n    const onOpen = isFunction(options.onOpen) ? options.onOpen : noop\n\n    options.onOpen = (key: Key) => {\n      resolve(key)\n      onOpen()\n    }\n\n    queue.push({\n      type: 'add',\n      param: options\n    })\n\n    if (!pending) {\n      pending = true\n      queueOut()\n    }\n  })\n}\n\nfunction remove(key: Key) {\n  return new Promise<boolean>(resolve => {\n    const item = find(key)\n\n    if (!item) return resolve(false)\n\n    const onClose = isFunction(item.onClose) ? item.onClose : noop\n\n    item.onClose = (result: boolean) => {\n      resolve(result)\n      onClose(result)\n    }\n\n    queue.push({\n      type: 'clear',\n      param: key\n    })\n\n    if (!pending) {\n      pending = true\n      queueOut()\n    }\n  })\n}\n\nfunction queueOut() {\n  if (queue.length) {\n    const state = queue.shift()!\n\n    if (state.type === 'add') {\n      renderItem(state.param)\n    } else {\n      removeItem(state.param)\n    }\n\n    requestAnimationFrame(queueOut)\n  } else {\n    pending = false\n  }\n}\n\nfunction renderItem(options: Record<string, any>) {\n  let item = options.key ? find(options.key as Key) : null\n\n  if (!item?.visible) {\n    const index = getIndex()\n    const key = (options.key as Key) ?? nh.bs(`${index}`)\n\n    let currentVertical = props.startOffset\n\n    items.value.forEach(existingItem => {\n      if (existingItem.visible) {\n        currentVertical += existingItem.height + props.itemOffset\n      }\n    })\n\n    item = reactive(\n      Object.assign(\n        {\n          key,\n          content: '',\n          closable: false,\n          onOpen: noop,\n          onClose: noop,\n          onEnter: noop,\n          onLeave: noop\n        },\n        options,\n        {\n          height: 0,\n          visible: true,\n          verticalPosition: currentVertical\n        }\n      )\n    )\n\n    items.value.push(item)\n  }\n\n  // 使用 options 上的回调以防止重复 key 时指向不正确\n  isFunction(options.onOpen) && options.onOpen(item.key)\n}\n\nfunction removeItem(key: Key) {\n  const index = items.value.findIndex(item => item.key === key)\n\n  if (~index) {\n    const item = items.value[index]\n    const removeHeight = item.height\n\n    item.visible = false\n\n    for (let i = index + 1, len = items.value.length; i < len; ++i) {\n      items.value[i].verticalPosition -= removeHeight + props.itemOffset\n    }\n\n    // 关闭回调\n    isFunction(item.onClose) && item.onClose(true)\n  }\n}\n\nfunction deleteItem(key: Key) {\n  const index = items.value.findIndex(item => item.key === key)\n\n  if (~index) {\n    items.value.splice(index, 1)\n  }\n}\n\nfunction has(key: Key) {\n  return !~items.value.findIndex(item => item.key === key)\n}\n\nfunction find(key: Key) {\n  return items.value.find(item => item.key === key)\n}\n\nfunction clear() {\n  queue.length = 0\n  items.value = []\n}\n\nfunction enterItem(item: PopupItemState) {\n  isFunction(item.onEnter) && item.onEnter()\n}\n\nfunction leaveItem(item: PopupItemState) {\n  isFunction(item.onLeave) && item.onLeave()\n}\n</script>\n\n<template>\n  <div :class=\"[nh.b(), nh.bm(placement)]\">\n    <PopupItem\n      v-for=\"item in items\"\n      :key=\"item.key\"\n      :state=\"item\"\n      :transition-name=\"transition\"\n      :inner-class=\"innerClass\"\n      :style=\"getItemStyle(item)\"\n      @enter=\"enterItem(item)\"\n      @leave=\"leaveItem(item)\"\n    >\n      <template #default=\"{ item: itemData }\">\n        <slot name=\"item\" :item=\"itemData\"></slot>\n      </template>\n    </PopupItem>\n  </div>\n</template>\n", "import type { ComponentPublicInstance } from 'vue'\n\nexport type Key = string | number\nexport type MessageType = 'primary' | 'info' | 'success' | 'warning' | 'error'\nexport type MessagePlacement = 'top' | 'bottom'\n\nexport interface MessageOptions extends Record<string, any> {\n  content?: string,\n  key?: Key,\n  icon?: Record<string, any> | (() => any),\n  iconColor?: string,\n  type?: MessageType | null,\n  duration?: number,\n  className?: string | Record<string, any>,\n  style?: string | Record<string, any>,\n  zIndex?: number,\n  background?: boolean | string,\n  color?: boolean | string,\n  closable?: boolean,\n  parseHtml?: boolean,\n  liveOnEnter?: boolean,\n  renderer?: () => any\n}\n\nexport interface MessageConfig {\n  placement?: MessagePlacement\n}\n\nexport interface MessageInstance extends ComponentPublicInstance {\n  add: (options: MessageOptions) => void,\n  remove: (key: string | number) => void,\n  clear: () => void,\n  config: (config: MessageConfig) => void\n}\n\nexport const effectiveTypes = Object.freeze(['primary', 'info', 'success', 'warning', 'error'])\n// For a11n\nexport const assertiveTypes = Object.freeze(['success', 'warning', 'error'])\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Renderer } from '@/components/renderer'\nimport { Popup } from '@/components/popup'\n\nimport { computed, reactive, ref } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport { assertiveTypes, effectiveTypes } from './symbol'\n\nimport type { Key, MessageConfig, MessagePlacement } from './symbol'\n\ndefineOptions({ name: 'Message' })\n\nconst nh = useNameHelper('message')\nconst icons = useIcons()\n\nconst predefinedIcons = computed(() => ({\n  primary: icons.value.info,\n  info: icons.value.info,\n  success: icons.value.success,\n  warning: icons.value.warning,\n  error: icons.value.error\n}))\n\nconst placement = ref<MessagePlacement>('top')\nconst popup = ref<InstanceType<typeof Popup>>()\n\nconst placementCenter = computed(() => `${placement.value}-center` as const)\n\nasync function add(options: Record<string, any>) {\n  if (popup.value) {\n    await popup.value.add(options)\n  }\n}\n\nasync function remove(key: Key) {\n  return !!popup.value && (await popup.value.remove(key))\n}\n\nfunction config(config: MessageConfig) {\n  placement.value = config.placement || placement.value\n}\n\nfunction clear() {\n  popup.value && popup.value.clear()\n}\n\ndefineExpose(\n  reactive({\n    popup,\n    add,\n    remove,\n    clear,\n    config\n  })\n)\n</script>\n\n<template>\n  <!-- eslint-disable vue/no-v-html -->\n  <Popup\n    ref=\"popup\"\n    :class=\"nh.b()\"\n    :transition-name=\"nh.ns(`popup-${placement}`)\"\n    :placement=\"placementCenter\"\n  >\n    <template #item=\"{ item }: { item: import('./symbol').MessageOptions }\">\n      <div\n        :class=\"[\n          {\n            [nh.be('item')]: true,\n            [nh.bs('vars')]: true,\n            [nh.bem('item', item.type!)]: item.type && effectiveTypes.includes(item.type),\n            [nh.bem('item', 'background')]: item.background,\n            [nh.bem('item', 'color')]: item.background && item.color,\n            [nh.bem('item', 'color-only')]: !item.background && item.color,\n            [nh.bem('item', 'has-icon')]: item.icon,\n            [nh.bem('item', 'closable')]: item.closable\n          },\n          item.className\n        ]\"\n        role=\"alert\"\n        :style=\"[\n          {\n            color: typeof item.color === 'string' ? item.color : undefined,\n            backgroundColor: typeof item.background === 'string' ? item.background : undefined\n          },\n          item.style || {}\n        ]\"\n        aria-atomic=\"true\"\n        :aria-live=\"item.type && assertiveTypes.includes(item.type) ? 'assertive' : 'polite'\"\n      >\n        <div :class=\"nh.be('wrapper')\">\n          <div\n            v-if=\"item.icon || (item.type && effectiveTypes.includes(item.type))\"\n            :class=\"nh.be('icon')\"\n            :style=\"{ color: item.iconColor }\"\n          >\n            <Icon\n              v-if=\"item.icon\"\n              :icon=\"item.icon\"\n              :style=\"[{ color: item.iconColor }, (item.icon as any).style]\"\n            ></Icon>\n            <Icon\n              v-else\n              v-bind=\"predefinedIcons[item.type!]\"\n              :style=\"{ color: item.iconColor }\"\n            ></Icon>\n          </div>\n          <Renderer\n            v-if=\"typeof item.renderer === 'function'\"\n            :renderer=\"item.renderer\"\n            :data=\"item\"\n          ></Renderer>\n          <template v-else>\n            <div v-if=\"item.parseHtml\" :class=\"nh.be('content')\" v-html=\"item.content\"></div>\n            <div v-else :class=\"nh.be('content')\">\n              {{ item.content || '' }}\n            </div>\n          </template>\n        </div>\n        <button\n          v-if=\"item.closable\"\n          type=\"button\"\n          :class=\"nh.be('close')\"\n          @click=\"remove(item.key!)\"\n        >\n          <Icon v-bind=\"icons.close\" label=\"close\"></Icon>\n        </button>\n      </div>\n    </template>\n  </Popup>\n</template>\n", "import { createApp, createVNode, markRaw, render } from 'vue'\n\nimport Component from './message.vue'\nimport { proxyExposed, unrefElement } from '@vexip-ui/hooks'\nimport { destroyObject, isClient, isNull, noop, toNumber } from '@vexip-ui/utils'\n\nimport type { App, MaybeRef } from 'vue'\nimport type { MaybeInstance } from '@vexip-ui/hooks'\nimport type {\n  Key,\n  MessageConfig,\n  MessageInstance,\n  MessageOptions,\n  MessagePlacement,\n  MessageType\n} from './symbol'\n\nexport type { MessageConfig, MessageType, MessagePlacement, MessageOptions }\n\ntype FuzzyOptions = string | MessageOptions\ntype ManagerOptions = { duration?: number, placement?: MessagePlacement } & Record<string, unknown>\n\ninterface AipMethod {\n  (options: MessageOptions): () => void,\n  (content: string, duration?: number): () => void,\n  /** @internal */\n  (options: FuzzyOptions, duration?: number): () => void\n}\n\nconst placementWhiteList: MessagePlacement[] = ['top', 'bottom']\n\nlet count = 1\n\nfunction getKey() {\n  return `message-${count++}`\n}\n\nexport class MessageManager {\n  name: string\n  defaults: Record<string, unknown>\n\n  open: AipMethod\n  primary: AipMethod\n  info: AipMethod\n  success: AipMethod\n  warning: AipMethod\n  error: AipMethod\n\n  private _mountedApp: App<unknown> | null\n  private _instance: MessageInstance | null\n  private _innerApp: App<unknown> | null\n  private _container: HTMLElement | null\n  private _wrapper: HTMLElement | SVGElement | null\n  private _mountedEl: HTMLElement | null\n\n  constructor(options: ManagerOptions = {}) {\n    options = {\n      ...options,\n      duration: options.duration ? toNumber(options.duration) : 3000\n    }\n\n    this._mountedApp = null\n    this._instance = null\n    this._innerApp = null\n    this._container = null\n    this._wrapper = null\n    this._mountedEl = null\n    this.name = 'Message'\n    this.defaults = {}\n\n    this.config(options)\n\n    this.open = (content: FuzzyOptions, duration?: number) => {\n      return this._open(null, content, duration)\n    }\n\n    this.primary = (content: FuzzyOptions, duration?: number) => {\n      return this._open('primary', content, duration)\n    }\n\n    this.info = (content: FuzzyOptions, duration?: number) => {\n      return this._open('info', content, duration)\n    }\n\n    this.success = (content: FuzzyOptions, duration?: number) => {\n      return this._open('success', content, duration)\n    }\n\n    this.warning = (content: FuzzyOptions, duration?: number) => {\n      return this._open('warning', content, duration)\n    }\n\n    this.error = (content: FuzzyOptions, duration?: number) => {\n      return this._open('error', content, duration)\n    }\n  }\n\n  judge(state: boolean, success: string, error: string, duration?: number): void\n  judge(state: boolean, success: MessageOptions, error: string, duration?: number): void\n  judge(state: boolean, success: string, error: MessageOptions, duration?: number): void\n  judge(state: boolean, success: MessageOptions, error: MessageOptions): void\n  judge(\n    state: boolean,\n    success: string | MessageOptions,\n    error: string | MessageOptions,\n    duration?: number\n  ) {\n    if (state) {\n      this.success(success, duration)\n    } else {\n      this.error(error, duration)\n    }\n  }\n\n  close(key: Key) {\n    if (isNull(key)) {\n      this.clear()\n    } else {\n      this._getInstance()?.remove(key)\n    }\n  }\n\n  config({ placement, ...others }: MessageConfig & MessageOptions) {\n    if (placement) {\n      this._getInstance()?.config({\n        placement: placementWhiteList.includes(placement) ? placement : placementWhiteList[0]\n      })\n    }\n\n    this.defaults = { ...this.defaults, ...others }\n  }\n\n  clone() {\n    const manager = new MessageManager(this.defaults)\n\n    manager._mountedApp = this._mountedApp\n\n    return manager\n  }\n\n  clear() {\n    this._getInstance()?.clear()\n  }\n\n  destroy() {\n    this._mountedEl && this._wrapper?.removeChild(this._mountedEl)\n    this._innerApp?.unmount()\n    this._container && render(null, this._container)\n    destroyObject(this)\n  }\n\n  isDestroyed() {\n    return false\n  }\n\n  install(app: App, options: ManagerOptions & { property?: string } = {}) {\n    const { property, ...others } = options\n\n    this.config(others)\n    this._mountedApp = app\n\n    if (property || !app.config.globalProperties.$message) {\n      app.config.globalProperties[property || '$message'] = this\n    }\n  }\n\n  transferTo(target: MaybeRef<string | MaybeInstance>) {\n    if (!isClient) return\n\n    const el = unrefElement(target)\n\n    if (el) {\n      this._wrapper = el\n\n      if (this._instance) {\n        this._mountedEl && this._wrapper.appendChild(this._mountedEl)\n      } else {\n        this._getInstance()\n      }\n    }\n  }\n\n  private _getInstance() {\n    if (!this._instance && isClient) {\n      if (!this._mountedApp) {\n        console.warn('[vexip-ui:Message]: App missing, the plugin maybe not installed.')\n\n        this._container = document.createElement('div')\n        this._innerApp = createApp(Component)\n        this._instance = this._innerApp.mount(this._container) as MessageInstance\n      } else {\n        const vnode = createVNode(Component, null, null)\n\n        this._container = document.createElement('div')\n        vnode.appContext = this._mountedApp._context\n\n        render(vnode, this._container, false)\n\n        this._instance = proxyExposed<MessageInstance>(vnode)\n      }\n\n      this._mountedEl = this._container.firstElementChild as HTMLElement\n      ;(this._wrapper || document.body).appendChild(this._mountedEl)\n    }\n\n    return this._instance\n  }\n\n  private _open(type: null | MessageType, content: FuzzyOptions, _duration?: number) {\n    if (!isClient) {\n      return noop\n    }\n\n    const options = typeof content === 'string' ? { content, duration: _duration } : content\n\n    const key = options.key ?? getKey()\n    const message = this._getInstance()!\n\n    let timer: ReturnType<typeof setTimeout>\n\n    const userCloseFn = options.onClose\n    const onClose = () => {\n      clearTimeout(timer)\n\n      if (typeof userCloseFn === 'function') {\n        return userCloseFn()\n      }\n    }\n\n    const userEnterFn = options.onEnter\n    const onEnter = () => {\n      if (options.liveOnEnter) {\n        clearTimeout(timer)\n      }\n\n      if (typeof userEnterFn === 'function') {\n        return userEnterFn()\n      }\n    }\n\n    const userLeaveFn = options.onLeave\n    const onLeave = () => {\n      if (options.liveOnEnter) {\n        clearTimeout(timer)\n        setDelayClose()\n      }\n\n      if (typeof userLeaveFn === 'function') {\n        return userLeaveFn()\n      }\n    }\n\n    const item: MessageOptions = {\n      ...this.defaults,\n      ...options,\n      key,\n      type,\n      onClose,\n      onEnter,\n      onLeave\n    }\n\n    if (item.icon && typeof item.icon !== 'function') {\n      item.icon = markRaw(item.icon)\n    }\n\n    message.add(item)\n    setDelayClose()\n\n    function setDelayClose() {\n      const duration = typeof item.duration === 'number' ? item.duration : 3000\n\n      if (duration >= 500) {\n        timer = setTimeout(() => {\n          message.remove(key)\n        }, duration)\n      }\n    }\n\n    return () => {\n      clearTimeout(timer)\n      message.remove(key)\n    }\n  }\n}\n\nexport const Message = new MessageManager()\n", "import type { ComponentPublicInstance } from 'vue'\n\nexport type Key = string | number\nexport type NoticeType = 'primary' | 'info' | 'success' | 'warning' | 'error'\nexport type NoticePlacement = 'top-right' | 'top-left' | 'bottom-right' | 'bottom-left'\n\nexport interface NoticeOptions extends Record<string, any> {\n  title?: string,\n  content?: string,\n  key?: Key,\n  icon?: Record<string, any> | (() => any),\n  iconColor?: string,\n  type?: NoticeType | null,\n  duration?: number,\n  className?: string | Record<string, any>,\n  style?: string | Record<string, any>,\n  zIndex?: number,\n  background?: boolean | string,\n  color?: boolean | string,\n  closable?: boolean,\n  parseHtml?: boolean,\n  liveOnEnter?: boolean,\n  renderer?: () => any\n}\n\nexport interface NoticeConfig {\n  placement?: NoticePlacement\n}\n\nexport interface NoticeInstance extends ComponentPublicInstance {\n  add: (options: NoticeOptions) => void,\n  remove: (key: string | number) => void,\n  clear: () => void,\n  config: (config: NoticeConfig) => void\n}\n\nexport const effectiveTypes = Object.freeze(['primary', 'info', 'success', 'warning', 'error'])\n// For a11n\nexport const assertiveTypes = Object.freeze(['success', 'warning', 'error'])\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Renderer } from '@/components/renderer'\nimport { Popup } from '@/components/popup'\n\nimport { computed, reactive, ref } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport { assertiveTypes, effectiveTypes } from './symbol'\n\nimport type { Key, NoticeConfig, NoticePlacement } from './symbol'\n\ndefineOptions({ name: 'Notice' })\n\nconst nh = useNameHelper('notice')\nconst icons = useIcons()\n\nconst predefinedIcons = computed(() => ({\n  primary: icons.value.info,\n  info: icons.value.info,\n  success: icons.value.success,\n  warning: icons.value.warning,\n  error: icons.value.error\n}))\n\nconst placement = ref<NoticePlacement>('top-right')\nconst popup = ref<InstanceType<typeof Popup>>()\n\nasync function add(options: Record<string, any>) {\n  if (popup.value) {\n    await popup.value.add(options)\n  }\n}\n\nasync function remove(key: Key) {\n  return !!popup.value && (await popup.value.remove(key))\n}\n\nfunction clear() {\n  popup.value && popup.value.clear()\n}\n\nfunction config(config: NoticeConfig) {\n  placement.value = config.placement || placement.value\n}\n\ndefineExpose(\n  reactive({\n    popup,\n    add,\n    remove,\n    clear,\n    config\n  })\n)\n</script>\n\n<template>\n  <!-- eslint-disable vue/no-v-html -->\n  <Popup\n    ref=\"popup\"\n    :class=\"nh.b()\"\n    :transition-name=\"nh.ns(`popup-${placement.split('-')[1]}`)\"\n    :placement=\"placement\"\n  >\n    <template #item=\"{ item }: { item: import('./symbol').NoticeOptions }\">\n      <div\n        :class=\"[\n          {\n            [nh.be('item')]: true,\n            [nh.bs('vars')]: true,\n            [nh.bem('item', 'title-only')]: !item.content && typeof item.renderer !== 'function',\n            [nh.bem('item', 'has-icon')]: item.icon,\n            [nh.bem('item', 'content-only')]: !item.title,\n            [nh.bem('item', item.type!)]: item.type && effectiveTypes.includes(item.type),\n            [nh.bem('item', 'background')]: item.background,\n            [nh.bem('item', 'color')]: item.background && item.color,\n            [nh.bem('item', 'color-only')]: !item.background && item.color,\n            [nh.bem('item', 'marker')]: item.marker\n          },\n          item.className\n        ]\"\n        role=\"alert\"\n        :style=\"[\n          {\n            color: typeof item.color === 'string' ? item.color : undefined,\n            backgroundColor: typeof item.background === 'string' ? item.background : undefined\n          },\n          item.style || {}\n        ]\"\n        aria-atomic=\"true\"\n        :aria-live=\"item.type && assertiveTypes.includes(item.type) ? 'assertive' : 'polite'\"\n      >\n        <div\n          v-if=\"item.icon || (item.type && effectiveTypes.includes(item.type))\"\n          :class=\"nh.be('icon')\"\n          :style=\"{ color: item.iconColor }\"\n        >\n          <Icon\n            v-if=\"item.icon\"\n            :icon=\"item.icon\"\n            :scale=\"!item.content && typeof item.renderer !== 'function' ? 1 : 2\"\n            :style=\"[{ color: item.iconColor }, (item.icon as any).style]\"\n          ></Icon>\n          <Icon\n            v-else\n            v-bind=\"predefinedIcons[item.type!]\"\n            :scale=\"!item.content && typeof item.renderer !== 'function' ? 1 : 2\"\n            :style=\"{ color: item.iconColor }\"\n          ></Icon>\n        </div>\n        <div :class=\"nh.be('wrapper')\">\n          <Renderer\n            v-if=\"typeof item.renderer === 'function'\"\n            :renderer=\"item.renderer\"\n            :data=\"item\"\n          ></Renderer>\n          <template v-else>\n            <template v-if=\"item.title\">\n              <div\n                v-if=\"item.parseHtml\"\n                :class=\"nh.be('title')\"\n                :style=\"{\n                  color: typeof item.titleColor === 'string' ? item.titleColor : undefined\n                }\"\n                v-html=\"item.title\"\n              ></div>\n              <div\n                v-else\n                :class=\"nh.be('title')\"\n                :style=\"{\n                  color: typeof item.titleColor === 'string' ? item.titleColor : undefined\n                }\"\n              >\n                {{ item.title || '' }}\n              </div>\n            </template>\n            <template v-if=\"item.content\">\n              <div v-if=\"item.parseHtml\" :class=\"nh.be('content')\" v-html=\"item.content\"></div>\n              <div v-else :class=\"nh.be('content')\">\n                {{ item.content || '' }}\n              </div>\n            </template>\n          </template>\n        </div>\n        <button\n          v-if=\"item.closable\"\n          type=\"button\"\n          :class=\"nh.be('close')\"\n          @click=\"remove(item.key!)\"\n        >\n          <Icon v-bind=\"icons.close\" label=\"close\"></Icon>\n        </button>\n      </div>\n    </template>\n  </Popup>\n</template>\n", "import { createApp, createVNode, markRaw, render } from 'vue'\n\nimport Component from './notice.vue'\nimport { proxyExposed, unrefElement } from '@vexip-ui/hooks'\nimport { destroyObject, isClient, isNull, isObject, noop, toNumber } from '@vexip-ui/utils'\n\nimport type { App, MaybeRef } from 'vue'\nimport type { MaybeInstance } from '@vexip-ui/hooks'\nimport type {\n  Key,\n  NoticeConfig,\n  NoticeInstance,\n  NoticeOptions,\n  NoticePlacement,\n  NoticeType\n} from './symbol'\n\nexport type { NoticeType, NoticePlacement, NoticeOptions }\n\ntype FuzzyOptions = string | NoticeOptions\ntype ManagerOptions = { marker?: boolean, duration?: number, placement?: NoticePlacement } & Record<\n  string,\n  unknown\n>\n\ninterface AipMethod {\n  (options: NoticeOptions): () => void,\n  (title: string, duration?: number): () => void,\n  (title: string, content: string, duration?: number): () => void,\n  /** @internal */\n  (options: FuzzyOptions, duration?: number): () => void\n}\n\nconst placementWhiteList: NoticePlacement[] = [\n  'top-right',\n  'top-left',\n  'bottom-right',\n  'bottom-left'\n]\n\nlet count = 1\n\nfunction getKey() {\n  return `notice-${count++}`\n}\n\nexport class NoticeManager {\n  name: string\n  defaults: Record<string, unknown>\n\n  open: AipMethod\n  primary: AipMethod\n  info: AipMethod\n  success: AipMethod\n  warning: AipMethod\n  error: AipMethod\n\n  private _mountedApp: App<unknown> | null\n  private _instance: NoticeInstance | null\n  private _innerApp: App<unknown> | null\n  private _container: HTMLElement | null\n  private _wrapper: HTMLElement | SVGElement | null\n  private _mountedEl: HTMLElement | null\n\n  constructor(options: ManagerOptions = {}) {\n    options = {\n      ...options,\n      marker: !!options.marker,\n      duration: options.duration ? toNumber(options.duration) : 4000\n    }\n\n    this._mountedApp = null\n    this._instance = null\n    this._innerApp = null\n    this._container = null\n    this._wrapper = null\n    this._mountedEl = null\n    this.name = 'Notice'\n    this.defaults = {}\n\n    this.config(options)\n\n    this.open = (title: FuzzyOptions, content?: string | number, duration?: number) => {\n      return this._open(null, title, content, duration)\n    }\n\n    this.primary = (title: FuzzyOptions, content?: string | number, duration?: number) => {\n      return this._open('primary', title, content, duration)\n    }\n\n    this.info = (title: FuzzyOptions, content?: string | number, duration?: number) => {\n      return this._open('info', title, content, duration)\n    }\n\n    this.success = (title: FuzzyOptions, content?: string | number, duration?: number) => {\n      return this._open('success', title, content, duration)\n    }\n\n    this.warning = (title: FuzzyOptions, content?: string | number, duration?: number) => {\n      return this._open('warning', title, content, duration)\n    }\n\n    this.error = (title: FuzzyOptions, content?: string | number, duration?: number) => {\n      return this._open('error', title, content, duration)\n    }\n  }\n\n  judge(state: boolean, success: string, error: string, duration?: number): void\n  judge(state: boolean, success: NoticeOptions, error: string, duration?: number): void\n  judge(state: boolean, success: string, error: NoticeOptions, duration?: number): void\n  judge(state: boolean, success: NoticeOptions, error: NoticeOptions): void\n  judge(\n    state: boolean,\n    success: string | NoticeOptions,\n    error: string | NoticeOptions,\n    duration?: number\n  ) {\n    if (state) {\n      this.success(success, duration)\n    } else {\n      this.error(error, duration)\n    }\n  }\n\n  close(key: Key) {\n    if (isNull(key)) {\n      this.clear()\n    } else {\n      this._getInstance()?.remove(key)\n    }\n  }\n\n  config({ placement, ...others }: NoticeConfig & NoticeOptions) {\n    if (placement) {\n      this._getInstance()?.config({\n        placement: placementWhiteList.includes(placement) ? placement : placementWhiteList[0]\n      })\n    }\n\n    this.defaults = { ...this.defaults, ...others }\n  }\n\n  clone() {\n    const manager = new NoticeManager(this.defaults)\n\n    manager._mountedApp = this._mountedApp\n\n    return manager\n  }\n\n  clear() {\n    this._getInstance()?.clear()\n  }\n\n  destroy() {\n    this._mountedEl && this._wrapper?.removeChild(this._mountedEl)\n    this._innerApp?.unmount()\n    this._container && render(null, this._container)\n    destroyObject(this)\n  }\n\n  isDestroyed() {\n    return false\n  }\n\n  install(app: App, options: ManagerOptions & { property?: string } = {}) {\n    const { property, ...others } = options\n\n    this.config(others)\n    this._mountedApp = app\n\n    if (property || !app.config.globalProperties.$notice) {\n      app.config.globalProperties[property || '$notice'] = this\n    }\n  }\n\n  transferTo(target: MaybeRef<string | MaybeInstance>) {\n    if (!isClient) return\n\n    const el = unrefElement(target)\n\n    if (el) {\n      this._wrapper = el\n\n      if (this._instance) {\n        this._mountedEl && this._wrapper.appendChild(this._mountedEl)\n      } else {\n        this._getInstance()\n      }\n    }\n  }\n\n  private _getInstance() {\n    if (!this._instance && isClient) {\n      if (!this._mountedApp) {\n        console.warn('[vexip-ui:Notice]: App missing, the plugin maybe not installed.')\n\n        this._container = document.createElement('div')\n        this._innerApp = createApp(Component)\n        this._instance = this._innerApp.mount(this._container) as NoticeInstance\n      } else {\n        const vnode = createVNode(Component, null, null)\n\n        this._container = document.createElement('div')\n        vnode.appContext = this._mountedApp._context\n\n        render(vnode, this._container, false)\n\n        this._instance = proxyExposed<NoticeInstance>(vnode)\n      }\n\n      this._mountedEl = this._container.firstElementChild as HTMLElement\n      ;(this._wrapper || document.body).appendChild(this._mountedEl)\n    }\n\n    return this._instance\n  }\n\n  private _open(\n    type: null | NoticeType,\n    title: FuzzyOptions,\n    content?: string | number,\n    _duration?: number\n  ) {\n    if (!isClient) {\n      return noop\n    }\n\n    let options: NoticeOptions\n\n    if (isObject(title)) {\n      options = title\n    } else {\n      if (typeof content === 'number') {\n        options = { title, duration: content }\n      } else if (!content) {\n        options = { title, duration: _duration }\n      } else {\n        options = { title, content, duration: _duration }\n      }\n    }\n\n    const key = options.key ?? getKey()\n    const notice = this._getInstance()!\n\n    let timer: ReturnType<typeof setTimeout>\n\n    const userCloseFn = options.onClose\n    const onClose = () => {\n      clearTimeout(timer)\n\n      if (typeof userCloseFn === 'function') {\n        return userCloseFn()\n      }\n    }\n\n    const userEnterFn = options.onEnter\n    const onEnter = () => {\n      if (options.liveOnEnter) {\n        clearTimeout(timer)\n      }\n\n      if (typeof userEnterFn === 'function') {\n        return userEnterFn()\n      }\n    }\n\n    const userLeaveFn = options.onLeave\n    const onLeave = () => {\n      if (options.liveOnEnter) {\n        clearTimeout(timer)\n        setDelayClose()\n      }\n\n      if (typeof userLeaveFn === 'function') {\n        return userLeaveFn()\n      }\n    }\n\n    const item: NoticeOptions = {\n      ...this.defaults,\n      ...options,\n      key,\n      type,\n      onClose,\n      onEnter,\n      onLeave\n    }\n\n    if (item.icon && typeof item.icon !== 'function') {\n      item.icon = markRaw(item.icon)\n    }\n\n    notice.add(item)\n    setDelayClose()\n\n    function setDelayClose() {\n      const duration = typeof item.duration === 'number' ? item.duration : 4000\n\n      if (duration >= 500) {\n        timer = setTimeout(() => {\n          notice.remove(key)\n        }, duration)\n      }\n    }\n\n    return () => {\n      clearTimeout(timer)\n      notice.remove(key)\n    }\n  }\n}\n\nexport const Notice = new NoticeManager()\n", "<template>\n  <li\n    :class=\"{\n      [nh.b()]: true,\n      [nh.ns('option-vars')]: true,\n      [nh.bm('divided')]: divided\n    }\"\n  >\n    <div :class=\"nh.be('label')\">\n      <slot name=\"label\">\n        {{ label }}\n      </slot>\n    </div>\n    <ul :class=\"nh.be('list')\">\n      <slot></slot>\n    </ul>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { optionGroupProps } from './props'\n\nexport default defineComponent({\n  name: 'OptionGroup',\n  props: optionGroupProps,\n  setup() {\n    return {\n      nh: useNameHelper('option-group')\n    }\n  }\n})\n</script>\n", "<template>\n  <li\n    :class=\"{\n      [nh.b()]: true,\n      [nh.ns('option-vars')]: true,\n      [nh.bm('divided')]: divided\n    }\"\n  >\n    <div :class=\"nh.be('label')\">\n      <slot name=\"label\">\n        {{ label }}\n      </slot>\n    </div>\n    <ul :class=\"nh.be('list')\">\n      <slot></slot>\n    </ul>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { optionGroupProps } from './props'\n\nexport default defineComponent({\n  name: 'OptionGroup',\n  props: optionGroupProps,\n  setup() {\n    return {\n      nh: useNameHelper('option-group')\n    }\n  }\n})\n</script>\n", "import { booleanProp, buildProps, eventProp, localeProp, sizeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { PaginationPlugin } from './symbol'\n\nexport const paginationProps = buildProps({\n  size: sizeProp,\n  locale: localeProp('pagination'),\n  total: Number,\n  noBorder: booleanProp,\n  background: booleanProp,\n  pageSize: Number,\n  sizeOptions: Array as PropType<number[]>,\n  itemCount: Number,\n  active: Number,\n  disabled: booleanProp,\n  disableItem: Function as PropType<(page: number) => boolean>,\n  turnPageCount: Number,\n  itemUnit: String,\n  plugins: Array as PropType<(PaginationPlugin | undefined | null)[]>,\n  noTitle: booleanProp,\n  itemTag: String,\n  listTag: String,\n  onChange: eventProp<(page: number) => void>(),\n  onPageSizeChange: eventProp<(size: number) => void>()\n})\n\nexport type PaginationProps = ExtractPropTypes<typeof paginationProps>\nexport type PaginationCProps = ConfigurableProps<PaginationProps, 'total'>\n", "import { Icon } from '@/components/icon'\nimport { NumberInput } from '@/components/number-input'\nimport { Select } from '@/components/select'\n\nimport {\n  Transition,\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  onUpdated,\n  reactive,\n  ref,\n  renderSlot,\n  toRef,\n  watch\n} from 'vue'\n\nimport {\n  createSizeProp,\n  emitEvent,\n  getCountWord,\n  getCountWordOnly,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { createSlotRender, useModifier, useRtl } from '@vexip-ui/hooks'\nimport { boundRange, decide, isClient, isNull, range } from '@vexip-ui/utils'\nimport { paginationProps } from './props'\n\nconst enum PaginationMode {\n  LEFT = 'left',\n  CENTER = 'center',\n  RIGHT = 'right'\n}\n\nexport default defineComponent({\n  name: 'Pagination',\n  props: paginationProps,\n  emits: ['update:active', 'update:page-size'],\n  setup(_props, { slots, emit, expose }) {\n    const props = useProps('pagination', _props, {\n      size: createSizeProp(),\n      locale: null,\n      total: {\n        default: 0,\n        validator: value => value >= 0,\n        static: true\n      },\n      noBorder: false,\n      background: false,\n      pageSize: {\n        default: 10,\n        validator: value => value > 0\n      },\n      sizeOptions: () => [10, 20, 50, 100],\n      itemCount: {\n        default: 7,\n        validator: value => Number.isInteger(value) && value > 6\n      },\n      active: {\n        default: 1,\n        validator: value => value > 0,\n        static: true\n      },\n      disabled: false,\n      disableItem: {\n        default: () => false,\n        isFunc: true\n      },\n      turnPageCount: 5,\n      itemUnit: null,\n      plugins: {\n        default: () => [],\n        validator: value => Array.isArray(value)\n      },\n      noTitle: false,\n      itemTag: 'li',\n      listTag: null\n    })\n\n    const { isRtl } = useRtl()\n    const nh = useNameHelper('pagination')\n    const icons = useIcons()\n    const midPagers = ref<number[]>([])\n    const currentActive = ref(props.active)\n    const currentPageSize = ref(props.pageSize)\n    const mode = ref(PaginationMode.LEFT)\n    const inPrevEllipsis = ref(false)\n    const inNextEllipsis = ref(false)\n    const jumpValue = ref(props.active)\n    const itemElList = reactive<HTMLElement[]>([])\n\n    const locale = useLocale('pagination', toRef(props, 'locale'))\n\n    const { target: wrapper } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (props.disabled) return\n\n        decide(\n          [\n            [\n              () => modifier.up || modifier.down || modifier.left || modifier.right,\n              () => {\n                const sign = modifier.up || modifier.left ? -1 : 1\n\n                if (isClient && document.activeElement) {\n                  const index = itemElList.findIndex(el => el === document.activeElement)\n\n                  if (!~index) return\n\n                  const target = itemElList[boundRange(index + sign, 0, itemElList.length - 1)]\n\n                  target.focus()\n                }\n              }\n            ],\n            [\n              () => modifier.enter || modifier.space,\n              () => {\n                if (document && document.activeElement) {\n                  const index = itemElList.findIndex(el => el === document.activeElement)\n\n                  if (!~index) {\n                    const activeClass = nh.bem('item', 'active')\n                    const activeEl = itemElList.find(el => el.classList.contains(activeClass))\n\n                    activeEl?.focus()\n                  }\n                }\n              }\n            ]\n          ],\n          {\n            beforeMatchAny: () => event.preventDefault(),\n            afterMatchAny: modifier.resetAll\n          }\n        )\n      }\n    })\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.size)]: props.size !== 'default',\n        [nh.bm('background')]: props.background,\n        [nh.bm('no-border')]: props.noBorder,\n        [nh.bm('disabled')]: props.disabled\n      }\n    })\n    const pagerCount = computed(() => {\n      return Math.ceil(props.total / (currentPageSize.value || 1)) || 1\n    })\n    const useEllipsis = computed(() => pagerCount.value > props.itemCount)\n    const disabledPrev = computed(() => {\n      const count = queryEnabledActive(1, 1)\n\n      return count >= pagerCount.value || currentActive.value === count\n    })\n    const disabledNext = computed(() => {\n      const count = queryEnabledActive(pagerCount.value, -1)\n\n      return count <= 1 || currentActive.value === count\n    })\n    const prevTurnPageTitle = computed(() => {\n      return `${locale.value.prev} ${getCountWord(locale.value.page, props.turnPageCount)}`\n    })\n    const nextTurnPageTitle = computed(() => {\n      return `${locale.value.next} ${getCountWord(locale.value.page, props.turnPageCount)}`\n    })\n    const prevEllipsisTarget = computed(() => {\n      if (!useEllipsis.value) return 0\n\n      let active = queryEnabledActive(currentActive.value - props.turnPageCount, -1)\n\n      if (active < 1) {\n        active = queryEnabledActive(1, 1)\n\n        if (active >= currentActive.value) return 0\n      }\n\n      return active\n    })\n    const nextEllipsisTarget = computed(() => {\n      if (!useEllipsis.value) return 0\n\n      let active = queryEnabledActive(currentActive.value + props.turnPageCount, 1)\n\n      if (active > pagerCount.value) {\n        active = queryEnabledActive(pagerCount.value, -1)\n\n        if (active <= currentActive.value) return 0\n      }\n\n      return active\n    })\n    const sizeObjectOptions = computed(() => {\n      return props.sizeOptions.map(size => {\n        return {\n          value: size,\n          label: `${size} ${locale.value.perPage}`\n        }\n      })\n    })\n    const pluginOrders = computed(() => {\n      const plugins = props.plugins\n      const pagerPosition = plugins.findIndex(isNull)\n\n      return {\n        total: plugins.findIndex(p => p === 'total') - pagerPosition,\n        size: plugins.findIndex(p => p === 'size') - pagerPosition,\n        jump: plugins.findIndex(p => p === 'jump') - pagerPosition\n      }\n    })\n    const jumpInputWidth = computed(() => {\n      if (!props.plugins.includes('jump')) return 0\n\n      let pageCount = 0\n\n      if (props.plugins.includes('size')) {\n        pageCount = Math.ceil(props.total / (Math.min(...props.sizeOptions) || 10))\n      } else {\n        pageCount = Math.ceil(props.total / (props.pageSize || 10))\n      }\n\n      return pageCount.toString().length * 10 + 30\n    })\n\n    watch(\n      () => props.active,\n      value => {\n        changeActive(value, false)\n      }\n    )\n    watch(() => props.itemCount, computePagers)\n    watch(pagerCount, computePagers)\n    watch(\n      () => props.pageSize,\n      value => {\n        currentPageSize.value = value\n      }\n    )\n    watch(currentPageSize, (value, prevValue) => {\n      emit('update:page-size', value)\n      emitEvent(props.onPageSizeChange, value)\n\n      // 按当前页的第一条数据计算新的页码\n      const anchor = Math.ceil((prevValue * (currentActive.value - 1) + 1) / value)\n\n      let active = queryEnabledActive(anchor, 1)\n\n      if (active > pagerCount.value) {\n        active = queryEnabledActive(anchor - 1, -1)\n\n        if (active < 1) active = 0\n      }\n\n      currentActive.value = active\n    })\n\n    expose({ changeActive, handlePrev, handleNext })\n\n    onMounted(() => {\n      nextTick(computePagers)\n    })\n\n    onUpdated(() => {\n      if (!wrapper.value) return\n\n      itemElList.length = 0\n      itemElList.push(\n        ...Array.from(\n          wrapper.value.querySelectorAll<HTMLElement>(\n            `${nh.cbe('item')}:not(${nh.cbem('item', 'disabled')})`\n          )\n        )\n      )\n    })\n\n    function queryEnabledActive(active: number, step: number) {\n      step = step / Math.abs(step)\n\n      while (props.disableItem(active)) {\n        active += step\n\n        if (active < 1 || active > pagerCount.value) break\n      }\n\n      return active\n    }\n\n    function handleChange(value: number) {\n      if (currentActive.value === value) return\n\n      currentActive.value = value\n      jumpValue.value = value\n\n      computePagers()\n      emit('update:active', value)\n      emitEvent(props.onChange, value)\n    }\n\n    function changeActive(active: number, focus = true) {\n      active = parseInt(active.toString())\n\n      if (props.disabled || active < 1 || active > pagerCount.value || props.disableItem(active)) {\n        return\n      }\n\n      handleChange(active)\n\n      if (isClient && focus) {\n        const activeEl = itemElList.find(el => el === document.activeElement)\n\n        activeEl?.blur()\n        nextTick(() => {\n          itemElList.find(el => el.tabIndex >= 0)?.focus()\n        })\n      }\n    }\n\n    function handlePrev() {\n      if (!disabledPrev.value && !props.disabled) {\n        const active = queryEnabledActive(currentActive.value - 1, -1)\n\n        if (active >= 1) changeActive(active)\n      }\n    }\n\n    function handleNext() {\n      if (!disabledNext.value && !props.disabled) {\n        const active = queryEnabledActive(currentActive.value + 1, 1)\n\n        if (active <= pagerCount.value) changeActive(active)\n      }\n    }\n\n    function computePagers() {\n      let pagers: number[]\n\n      if (pagerCount.value <= props.itemCount) {\n        // 未超过最大值，显示所有页号\n        pagers = range(pagerCount.value)\n      } else {\n        const numberCount = props.itemCount - 2 // 显示为数字的页号\n        const criticalCount = Math.ceil(props.itemCount / 2) // 切换模式的关键计数\n\n        if (currentActive.value < criticalCount) {\n          // 出现后侧一个省略号，前侧连续\n          pagers = range(numberCount)\n          pagers.push(pagerCount.value)\n\n          mode.value = PaginationMode.LEFT\n        } else if (currentActive.value <= pagerCount.value - criticalCount) {\n          // 出现两个省略号，中间连续\n          let count = numberCount - 2\n\n          // 保持中间数字的页号数目为单数\n          if (count % 2 === 0) {\n            count -= 1\n          }\n\n          pagers = range(count, currentActive.value - (count - 1) / 2) // 同 Math.floor(count / 2)\n          pagers.unshift(1)\n          pagers.push(pagerCount.value)\n\n          mode.value = PaginationMode.CENTER\n        } else {\n          // 出现前侧一个省略号，后侧连续\n          pagers = range(numberCount, pagerCount.value - numberCount + 1)\n          pagers.unshift(1)\n\n          mode.value = PaginationMode.RIGHT\n        }\n      }\n\n      if (pagers.length === 1) {\n        midPagers.value = []\n      }\n\n      midPagers.value = pagers.slice(1, -1)\n    }\n\n    function enterPrevEllipsis() {\n      inPrevEllipsis.value = true\n    }\n\n    function leavePrevEllipsis() {\n      inPrevEllipsis.value = false\n    }\n\n    function clickPrevEllipsis() {\n      if (!props.disabled && prevEllipsisTarget.value) {\n        changeActive(prevEllipsisTarget.value)\n      }\n    }\n\n    function enterNextEllipsis() {\n      inNextEllipsis.value = true\n    }\n\n    function leaveNextEllipsis() {\n      inNextEllipsis.value = false\n    }\n\n    function clickNextEllipsis() {\n      if (!props.disabled && nextEllipsisTarget.value) {\n        changeActive(nextEllipsisTarget.value)\n      }\n    }\n\n    function handleJumpPage(active: number) {\n      active = Math.max(Math.min(parseInt(active.toString()), pagerCount.value), 1)\n\n      const originActive = active\n\n      if (active !== currentActive.value) {\n        const step = active > currentActive.value ? 1 : -1\n\n        active = queryEnabledActive(originActive, step)\n\n        if (step > 0 ? active > pagerCount.value : active < 1) {\n          active = queryEnabledActive(originActive, -step)\n\n          if (step > 0 ? active < 1 : active > pagerCount.value) {\n            active = 0\n          }\n        }\n\n        handleChange(active)\n      }\n\n      nextTick(() => {\n        jumpValue.value = currentActive.value\n      })\n    }\n\n    function renderPrev(Tag: any) {\n      const disabled = props.disabled || disabledPrev.value\n      const arrow = isRtl.value ? icons.value.angleRight : icons.value.angleLeft\n\n      return (\n        <Tag\n          ref={el => el && !disabledPrev.value && itemElList.push(el as any)}\n          class={[\n            nh.be('item'),\n            nh.bem('item', 'prev'),\n            disabled ? nh.bem('item', 'disabled') : ''\n          ]}\n          title={props.noTitle ? undefined : locale.value.prevPage}\n          role={'menuitem'}\n          tabindex={'-1'}\n          aria-label={locale.value.prevPage}\n          aria-hidden={disabled ? 'true' : undefined}\n          onClick={handlePrev}\n          onKeydownEnter={handlePrev}\n          onKeydownSpace={handlePrev}\n        >\n          {slots.prev\n            ? (\n                renderSlot(slots, 'prev', { disabled })\n              )\n            : (\n              <Icon {...arrow} scale={+(arrow.scale || 1)}></Icon>\n              )}\n        </Tag>\n      )\n    }\n\n    function renderNext(Tag: any) {\n      const disabled = props.disabled || disabledNext.value\n      const arrow = isRtl.value ? icons.value.angleLeft : icons.value.angleRight\n\n      return (\n        <Tag\n          ref={el => el && !disabledNext.value && itemElList.push(el as any)}\n          class={[\n            nh.be('item'),\n            nh.bem('item', 'next'),\n            disabled ? nh.bem('item', 'disabled') : ''\n          ]}\n          title={props.noTitle ? undefined : locale.value.nextPage}\n          role={'menuitem'}\n          tabindex={'-1'}\n          aria-label={locale.value.nextPage}\n          aria-hidden={disabled ? 'true' : undefined}\n          onClick={handleNext}\n          onKeydownEnter={handleNext}\n          onKeydownSpace={handleNext}\n        >\n          {slots.next\n            ? (\n                renderSlot(slots, 'next', { disabled })\n              )\n            : (\n              <Icon {...arrow} scale={+(arrow.scale || 1)}></Icon>\n              )}\n        </Tag>\n      )\n    }\n\n    function renderPrevEllipsis(Tag: any) {\n      if (!useEllipsis.value || mode.value === PaginationMode.LEFT) return null\n\n      const disabled = props.disabled || !prevEllipsisTarget.value\n\n      return (\n        <Tag\n          ref={el => el && prevEllipsisTarget.value && itemElList.push(el as any)}\n          class={{\n            [nh.be('item')]: true,\n            [nh.bem('item', 'more')]: true,\n            [nh.bem('item', 'disabled')]: disabled\n          }}\n          title={props.noTitle ? undefined : prevTurnPageTitle.value}\n          role={'menuitem'}\n          tabindex={'-1'}\n          aria-label={prevTurnPageTitle.value}\n          onClick={clickPrevEllipsis}\n          onKeydownEnter={clickPrevEllipsis}\n          onKeydownSpace={clickPrevEllipsis}\n          onMouseenter={enterPrevEllipsis}\n          onMouseleave={leavePrevEllipsis}\n        >\n          {createSlotRender(slots, ['prev-jump', 'prevJump'], () => {\n            const arrow = isRtl.value ? icons.value.anglesRight : icons.value.anglesLeft\n\n            return (\n              <Transition name={nh.ns('fade')}>\n                {!disabled && inPrevEllipsis.value\n                  ? (\n                    <Icon {...arrow} scale={+(arrow.scale || 1)}></Icon>\n                    )\n                  : (\n                    <Icon\n                      {...icons.value.ellipsis}\n                      scale={+(icons.value.ellipsis.scale || 1)}\n                      style={'position: absolute'}\n                    ></Icon>\n                    )}\n              </Transition>\n            )\n          })({ disabled, entered: inPrevEllipsis.value })}\n        </Tag>\n      )\n    }\n\n    function renderNextEllipsis(Tag: any) {\n      if (!useEllipsis.value || mode.value === PaginationMode.RIGHT) return null\n\n      const disabled = props.disabled || !nextEllipsisTarget.value\n\n      return (\n        <Tag\n          ref={el => el && nextEllipsisTarget.value && itemElList.push(el as any)}\n          class={{\n            [nh.be('item')]: true,\n            [nh.bem('item', 'more')]: true,\n            [nh.bem('item', 'disabled')]: disabled\n          }}\n          title={props.noTitle ? undefined : nextTurnPageTitle.value}\n          role={'menuitem'}\n          tabindex={'-1'}\n          aria-label={nextTurnPageTitle.value}\n          onClick={clickNextEllipsis}\n          onKeydownEnter={clickNextEllipsis}\n          onKeydownSpace={clickNextEllipsis}\n          onMouseenter={enterNextEllipsis}\n          onMouseleave={leaveNextEllipsis}\n        >\n          {createSlotRender(slots, ['next-jump', 'nextJump'], () => {\n            const arrow = isRtl.value ? icons.value.anglesLeft : icons.value.anglesRight\n\n            return (\n              <Transition name={nh.ns('fade')}>\n                {!disabled && inNextEllipsis.value\n                  ? (\n                    <Icon {...arrow} scale={+(arrow.scale || 1)}></Icon>\n                    )\n                  : (\n                    <Icon\n                      {...icons.value.ellipsis}\n                      scale={+(icons.value.ellipsis.scale || 1)}\n                      style={'position: absolute'}\n                    ></Icon>\n                    )}\n              </Transition>\n            )\n          })({ disabled: !nextEllipsisTarget.value, entered: inNextEllipsis.value })}\n        </Tag>\n      )\n    }\n\n    function renderItem(Tag: any, page: number) {\n      const disabled = props.disabled || props.disableItem(page)\n      const active = currentActive.value === page\n\n      return (\n        <Tag\n          ref={el => el && itemElList.push(el as any)}\n          class={{\n            [nh.be('item')]: true,\n            [nh.bem('item', 'disabled')]: disabled,\n            [nh.bem('item', 'active')]: active\n          }}\n          title={props.noTitle ? undefined : page}\n          role={'menuitemradio'}\n          tabindex={active ? '0' : '-1'}\n          aria-posinset={page}\n          aria-setsize={pagerCount.value}\n          aria-disabled={disabled ? 'true' : undefined}\n          onClick={() => changeActive(page)}\n          onKeydownEnter={() => changeActive(page)}\n          onKeydownSpace={() => changeActive(page)}\n        >\n          {slots.item ? renderSlot(slots, 'item', { page, disabled, active }) : `${page}`}\n        </Tag>\n      )\n    }\n\n    function renderTotalPlugin() {\n      if (!props.plugins.includes('total')) return null\n\n      return (\n        <div\n          class={[nh.be('total'), pluginOrders.value.total < 0 && nh.bem('total', 'prefix')]}\n          style={{ order: pluginOrders.value.total }}\n        >\n          {`${locale.value.total} ${getCountWord(\n            props.itemUnit ?? locale.value.itemUnit,\n            props.total\n          )}`}\n        </div>\n      )\n    }\n\n    function renderSizePlugin() {\n      if (!props.plugins.includes('size')) return null\n\n      return (\n        <div\n          class={[nh.be('size'), pluginOrders.value.size < 0 && nh.bem('size', 'prefix')]}\n          style={{ order: pluginOrders.value.size }}\n        >\n          <Select\n            v-model:value={currentPageSize.value}\n            inherit\n            class={nh.be('size-select')}\n            options={sizeObjectOptions.value}\n            filter={false}\n            multiple={false}\n            clearable={false}\n          ></Select>\n        </div>\n      )\n    }\n\n    function renderJumpPlugin() {\n      if (!props.plugins.includes('jump')) return null\n\n      return (\n        <div\n          class={[nh.be('jump'), pluginOrders.value.jump < 0 && nh.bem('jump', 'prefix')]}\n          style={{ order: pluginOrders.value.jump }}\n        >\n          {locale.value.jumpTo}\n          <NumberInput\n            v-model:value={jumpValue.value}\n            inherit\n            class={nh.be('jump-input')}\n            clearable={false}\n            sync={false}\n            style={{ width: `${jumpInputWidth.value}px` }}\n            onChange={handleJumpPage}\n          ></NumberInput>\n          {getCountWordOnly(locale.value.page, 1)}\n        </div>\n      )\n    }\n\n    return () => {\n      const ItemTag = props.itemTag || 'li'\n      const ListTag = (props.listTag as any) || (ItemTag === 'li' ? 'ul' : 'div')\n\n      return (\n        <div class={className.value}>\n          <ListTag\n            ref={wrapper}\n            class={nh.be('list')}\n            role={'menubar'}\n            aria-label={'Pagination'}\n            aria-disabled={props.disabled ? 'true' : undefined}\n          >\n            {renderPrev(ItemTag)}\n            {renderItem(ItemTag, 1)}\n            {renderPrevEllipsis(ItemTag)}\n            {midPagers.value.map(page => renderItem(ItemTag, page))}\n            {renderNextEllipsis(ItemTag)}\n            {pagerCount.value > 1 && renderItem(ItemTag, pagerCount.value)}\n            {renderNext(ItemTag)}\n          </ListTag>\n          {renderTotalPlugin()}\n          {renderSizePlugin()}\n          {renderJumpPlugin()}\n        </div>\n      )\n    }\n  }\n})\n", "import { booleanProp, buildProps, stateProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { ProgressInfoType, ProgressStrokeColor } from './symbol'\n\nexport const progressProps = buildProps({\n  percentage: Number,\n  state: stateProp,\n  strokeWidth: Number,\n  infoType: String as PropType<ProgressInfoType>,\n  precision: Number,\n  activated: booleanProp,\n  strokeColor: [String, Array, Function] as PropType<ProgressStrokeColor>\n})\n\nexport type ProgressProps = ExtractPropTypes<typeof progressProps>\nexport type ProgressCProps = ConfigurableProps<ProgressProps, 'percentage'>\n", "<template>\n  <div\n    :class=\"className\"\n    :style=\"style\"\n    role=\"progressbar\"\n    :aria-valuenow=\"percentValue\"\n    aria-valuemin=\"0\"\n    aria-valuemax=\"100\"\n  >\n    <div :class=\"nh.be('track')\" :style=\"trackStyle\">\n      <div :class=\"nh.be('filler')\" :style=\"fillerStyle\"></div>\n      <div v-if=\"props.infoType === 'inside'\" :class=\"nh.be('info')\">\n        <slot>\n          <span :class=\"nh.be('percentage')\">\n            {{ `${percentValue}%` }}\n          </span>\n        </slot>\n      </div>\n    </div>\n    <div v-if=\"useBubble\" :class=\"nh.be('reference')\">\n      <Bubble\n        inherit\n        :class=\"nh.be('bubble')\"\n        :style=\"bubbleStyle\"\n        :placement=\"bubbleType\"\n        :content-class=\"nh.be('info')\"\n      >\n        <slot>\n          <span :class=\"nh.be('percentage')\">\n            {{ `${percentValue}%` }}\n          </span>\n        </slot>\n      </Bubble>\n    </div>\n    <div v-else-if=\"props.infoType === 'outside'\" :class=\"nh.be('info')\">\n      <slot>\n        <span :class=\"nh.be('percentage')\">\n          {{ `${percentValue}%` }}\n        </span>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Bubble } from '@/components/bubble'\n\nimport { computed, defineComponent } from 'vue'\n\nimport { createStateProp, useNameHelper, useProps } from '@vexip-ui/config'\nimport { callIfFunc, toFixed } from '@vexip-ui/utils'\nimport { progressProps } from './props'\n\nimport type { CSSProperties } from 'vue'\nimport type { ProgressInfoType } from './symbol'\n\nconst infoTypes = Object.freeze<ProgressInfoType[]>([\n  'outside',\n  'inside',\n  'bubble',\n  'bubble-top',\n  'bubble-bottom',\n  'none'\n])\n\nexport default defineComponent({\n  name: 'Progress',\n  components: {\n    Bubble\n  },\n  props: progressProps,\n  setup(_props) {\n    const props = useProps('progress', _props, {\n      percentage: {\n        default: 0,\n        validator: value => value >= 0 && value <= 100,\n        static: true\n      },\n      state: createStateProp(),\n      strokeWidth: 8,\n      infoType: {\n        default: 'outside',\n        validator: value => infoTypes.includes(value)\n      },\n      precision: 2,\n      activated: false,\n      strokeColor: {\n        default: null,\n        validator: value => !(Array.isArray(value) && (!value[0] || !value[1]))\n      }\n    })\n\n    const nh = useNameHelper('progress')\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(`info-${props.infoType}`),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm(props.state)]: props.state !== 'default',\n          [nh.bm('activated')]: props.activated\n        }\n      ]\n    })\n    const style = computed(() => {\n      return { [nh.cv('percentage')]: props.percentage }\n    })\n    const trackStyle = computed(() => {\n      return {\n        height: `${props.strokeWidth}px`,\n        borderRadius: `${props.strokeWidth}px`\n      }\n    })\n    const fillerStyle = computed(() => {\n      const style: CSSProperties = {\n        borderRadius: `${props.strokeWidth}px`\n      }\n\n      const strokeColor = callIfFunc(props.strokeColor, props.percentage)\n\n      if (typeof strokeColor === 'string') {\n        style.backgroundColor = strokeColor\n      } else if (Array.isArray(strokeColor)) {\n        style.backgroundImage = `linear-gradient(to right, ${strokeColor[0]} 0%, ${strokeColor[1]} 100%)`\n      }\n\n      return style\n    })\n    const useBubble = computed(() => {\n      return props.infoType.includes('bubble')\n    })\n    const bubbleType = computed(() => {\n      if (useBubble.value) {\n        return props.infoType.split('-').pop() === 'bottom' ? 'bottom' : 'top'\n      }\n\n      return 'top'\n    })\n    const bubbleStyle = computed(() => {\n      if (!useBubble.value) return {}\n\n      const type = bubbleType.value === 'top' ? 'bottom' : 'top'\n\n      return {\n        [type]: `${props.strokeWidth}px`\n      }\n    })\n    const percentValue = computed(() => toFixed(props.percentage, props.precision))\n\n    return {\n      props,\n      nh,\n\n      className,\n      style,\n      trackStyle,\n      fillerStyle,\n      useBubble,\n      bubbleType,\n      bubbleStyle,\n      percentValue\n    }\n  }\n})\n</script>\n", "<template>\n  <div\n    :class=\"className\"\n    :style=\"style\"\n    role=\"progressbar\"\n    :aria-valuenow=\"percentValue\"\n    aria-valuemin=\"0\"\n    aria-valuemax=\"100\"\n  >\n    <div :class=\"nh.be('track')\" :style=\"trackStyle\">\n      <div :class=\"nh.be('filler')\" :style=\"fillerStyle\"></div>\n      <div v-if=\"props.infoType === 'inside'\" :class=\"nh.be('info')\">\n        <slot>\n          <span :class=\"nh.be('percentage')\">\n            {{ `${percentValue}%` }}\n          </span>\n        </slot>\n      </div>\n    </div>\n    <div v-if=\"useBubble\" :class=\"nh.be('reference')\">\n      <Bubble\n        inherit\n        :class=\"nh.be('bubble')\"\n        :style=\"bubbleStyle\"\n        :placement=\"bubbleType\"\n        :content-class=\"nh.be('info')\"\n      >\n        <slot>\n          <span :class=\"nh.be('percentage')\">\n            {{ `${percentValue}%` }}\n          </span>\n        </slot>\n      </Bubble>\n    </div>\n    <div v-else-if=\"props.infoType === 'outside'\" :class=\"nh.be('info')\">\n      <slot>\n        <span :class=\"nh.be('percentage')\">\n          {{ `${percentValue}%` }}\n        </span>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Bubble } from '@/components/bubble'\n\nimport { computed, defineComponent } from 'vue'\n\nimport { createStateProp, useNameHelper, useProps } from '@vexip-ui/config'\nimport { callIfFunc, toFixed } from '@vexip-ui/utils'\nimport { progressProps } from './props'\n\nimport type { CSSProperties } from 'vue'\nimport type { ProgressInfoType } from './symbol'\n\nconst infoTypes = Object.freeze<ProgressInfoType[]>([\n  'outside',\n  'inside',\n  'bubble',\n  'bubble-top',\n  'bubble-bottom',\n  'none'\n])\n\nexport default defineComponent({\n  name: 'Progress',\n  components: {\n    Bubble\n  },\n  props: progressProps,\n  setup(_props) {\n    const props = useProps('progress', _props, {\n      percentage: {\n        default: 0,\n        validator: value => value >= 0 && value <= 100,\n        static: true\n      },\n      state: createStateProp(),\n      strokeWidth: 8,\n      infoType: {\n        default: 'outside',\n        validator: value => infoTypes.includes(value)\n      },\n      precision: 2,\n      activated: false,\n      strokeColor: {\n        default: null,\n        validator: value => !(Array.isArray(value) && (!value[0] || !value[1]))\n      }\n    })\n\n    const nh = useNameHelper('progress')\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(`info-${props.infoType}`),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm(props.state)]: props.state !== 'default',\n          [nh.bm('activated')]: props.activated\n        }\n      ]\n    })\n    const style = computed(() => {\n      return { [nh.cv('percentage')]: props.percentage }\n    })\n    const trackStyle = computed(() => {\n      return {\n        height: `${props.strokeWidth}px`,\n        borderRadius: `${props.strokeWidth}px`\n      }\n    })\n    const fillerStyle = computed(() => {\n      const style: CSSProperties = {\n        borderRadius: `${props.strokeWidth}px`\n      }\n\n      const strokeColor = callIfFunc(props.strokeColor, props.percentage)\n\n      if (typeof strokeColor === 'string') {\n        style.backgroundColor = strokeColor\n      } else if (Array.isArray(strokeColor)) {\n        style.backgroundImage = `linear-gradient(to right, ${strokeColor[0]} 0%, ${strokeColor[1]} 100%)`\n      }\n\n      return style\n    })\n    const useBubble = computed(() => {\n      return props.infoType.includes('bubble')\n    })\n    const bubbleType = computed(() => {\n      if (useBubble.value) {\n        return props.infoType.split('-').pop() === 'bottom' ? 'bottom' : 'top'\n      }\n\n      return 'top'\n    })\n    const bubbleStyle = computed(() => {\n      if (!useBubble.value) return {}\n\n      const type = bubbleType.value === 'top' ? 'bottom' : 'top'\n\n      return {\n        [type]: `${props.strokeWidth}px`\n      }\n    })\n    const percentValue = computed(() => toFixed(props.percentage, props.precision))\n\n    return {\n      props,\n      nh,\n\n      className,\n      style,\n      trackStyle,\n      fillerStyle,\n      useBubble,\n      bubbleType,\n      bubbleStyle,\n      percentValue\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  buildProps,\n  classProp,\n  eventProp,\n  iconProp,\n  sizeProp,\n  stateProp,\n  valueProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps, EventListener } from '@vexip-ui/config'\nimport type { ChangeEvent, RadioGroupShape, RadioRawOption, RadioShape } from './symbol'\n\nexport const radioProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  value: valueProp,\n  label: valueProp,\n  labelClass: classProp,\n  disabled: booleanProp,\n  tabIndex: [String, Number],\n  loading: booleanProp,\n  loadingLock: booleanProp,\n  name: String,\n  shape: String as PropType<RadioShape>,\n  onChange: eventProp<EventListener<ChangeEvent>>()\n})\n\nexport type RadioProps = ExtractPropTypes<typeof radioProps>\nexport type RadioCProps = ConfigurableProps<RadioProps>\n\nexport const radioGroupProps = buildProps({\n  size: sizeProp,\n  state: stateProp,\n  value: valueProp,\n  vertical: booleanProp,\n  disabled: booleanProp,\n  options: Array as PropType<RadioRawOption[]>,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  shape: String as PropType<RadioGroupShape>,\n  onChange: eventProp<EventListener<ChangeEvent>>()\n})\n\nexport type RadioGroupProps = ExtractPropTypes<typeof radioGroupProps>\nexport type RadioGroupCProps = ConfigurableProps<RadioGroupProps>\n", "import type { InjectionKey, Ref } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ComponentSize, ComponentState } from '@vexip-ui/config'\n\nexport type RadioShape = 'default' | 'border' | 'button'\nexport type RadioGroupShape = RadioShape | 'button-group'\n\nexport type RadioRawOption =\n  | string\n  | {\n    label: string | number | boolean,\n    content?: string,\n    disabled?: boolean\n  }\n\nexport interface GroupState {\n  currentValue: string | number | boolean,\n  size: ComponentSize,\n  state: ComponentState,\n  disabled: boolean,\n  loading: boolean,\n  loadingIcon: Record<string, any>,\n  loadingLock: boolean,\n  loadingEffect: IconEffect,\n  shape: RadioGroupShape,\n  updateValue(value: string | number | boolean): void,\n  registerInput(input: Ref<HTMLElement | null | undefined>): void,\n  unregisterInput(input: Ref<HTMLElement | null | undefined>): void\n}\n\nexport type ChangeEvent = (value: string | number | boolean) => void\n\nexport const GROUP_STATE: InjectionKey<GroupState> = Symbol('RADIO_GROUP_STATE')\n\nexport const radioShapes = Object.freeze<RadioShape[]>(['default', 'border', 'button'])\nexport const radioGroupShapes = Object.freeze<RadioGroupShape[]>([...radioShapes, 'button-group'])\n", "<script setup lang=\"ts\">\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Icon } from '@/components/icon'\n\nimport { computed, inject, onBeforeUnmount, onMounted, ref, watch } from 'vue'\n\nimport {\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { radioProps } from './props'\nimport { GROUP_STATE, radioShapes } from './symbol'\n\nimport type { ChangeEvent } from './symbol'\n\ndefineOptions({ name: 'Radio' })\n\nconst _props = defineProps(radioProps)\nconst props = useProps('radio', _props, {\n  size: createSizeProp(),\n  state: createStateProp(),\n  value: {\n    default: null,\n    static: true\n  },\n  label: {\n    default: null,\n    static: true,\n    required: true\n  },\n  labelClass: null,\n  disabled: false,\n  tabIndex: 0,\n  loading: false,\n  loadingLock: false,\n  name: {\n    default: '',\n    static: true\n  },\n  shape: {\n    default: 'default',\n    validator: value => radioShapes.includes(value)\n  }\n})\n\nconst emit = defineEmits(['update:value'])\n\ndefineSlots<{ default: () => any }>()\n\nconst groupState = inject(GROUP_STATE, null)\n\nconst nh = useNameHelper('radio')\nconst icons = useIcons()\nconst currentValue = ref(props.value)\n\nconst input = ref<HTMLInputElement>()\n\nconst size = computed(() => groupState?.size || props.size)\nconst state = computed(() => groupState?.state || props.state)\nconst isDisabled = computed(() => groupState?.disabled || props.disabled)\nconst isLoading = computed(() => groupState?.loading || props.loading)\nconst loadingIcon = computed(() => groupState?.loadingIcon)\nconst isLoadingLock = computed(() => groupState?.loadingLock || false)\nconst loadingEffect = computed(() => groupState?.loadingEffect || '')\nconst shape = computed(() => groupState?.shape || props.shape)\nconst readonly = computed(() => isLoading.value && isLoadingLock.value)\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('checked')]: currentValue.value === props.label,\n      [nh.bm('disabled')]: isDisabled.value,\n      [nh.bm('readonly')]: readonly.value,\n      [nh.bm('loading')]: isLoading.value,\n      [nh.bm(size.value)]: size.value !== 'default',\n      [nh.bm(state.value)]: state.value !== 'default',\n      [nh.bm(shape.value)]: shape.value !== 'default' && shape.value !== 'button-group'\n    }\n  ]\n})\nconst isButton = computed(() => shape.value === 'button' || shape.value === 'button-group')\n\nwatch(\n  () => props.value,\n  value => {\n    currentValue.value = value\n  }\n)\n\nif (groupState) {\n  currentValue.value = groupState.currentValue\n\n  watch(() => groupState.currentValue, emitChange)\n\n  onMounted(() => {\n    groupState.registerInput(input)\n  })\n\n  onBeforeUnmount(() => {\n    groupState.unregisterInput(input)\n  })\n}\n\ndefineExpose({ currentValue, input })\n\nfunction emitChange(value: string | number | boolean) {\n  if (currentValue.value === value) return\n\n  currentValue.value = value\n\n  emit('update:value', value)\n  emitEvent(props.onChange as ChangeEvent, value)\n}\n\nfunction handleChange() {\n  if (isDisabled.value || readonly.value) {\n    return\n  }\n\n  emitChange(props.label)\n\n  if (groupState && currentValue.value === props.label) {\n    groupState.updateValue(currentValue.value)\n  }\n}\n</script>\n\n<template>\n  <label :class=\"className\">\n    <input\n      ref=\"input\"\n      type=\"radio\"\n      :class=\"nh.be('input')\"\n      :checked=\"currentValue === props.label\"\n      :disabled=\"isDisabled || readonly\"\n      :tabindex=\"props.tabIndex\"\n      :name=\"props.name\"\n      @submit.prevent\n      @change=\"handleChange\"\n      @click.stop\n    />\n    <span :class=\"[nh.be('signal'), isLoading && nh.bem('signal', 'active')]\"></span>\n    <span :class=\"[nh.be('label'), props.labelClass]\">\n      <CollapseTransition\n        v-if=\"isButton\"\n        appear\n        horizontal\n        fade-effect\n      >\n        <div v-if=\"isLoading\" :class=\"nh.be('loading')\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"loadingEffect || icons.loading.effect\"\n            :icon=\"loadingIcon || icons.loading.icon\"\n            label=\"loading\"\n          ></Icon>\n        </div>\n      </CollapseTransition>\n      <slot>{{ props.label }}</slot>\n    </span>\n  </label>\n</template>\n", "<script setup lang=\"ts\">\nimport { Radio } from '@/components/radio'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, provide, reactive, ref, toRef, watch } from 'vue'\n\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { debounceMinor, isClient, isObject } from '@vexip-ui/utils'\nimport { radioGroupProps } from './props'\nimport { GROUP_STATE, radioGroupShapes } from './symbol'\n\nimport type { Ref } from 'vue'\nimport type { ChangeEvent } from './symbol'\n\ndefineOptions({ name: 'RadioGroup' })\n\nconst { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n  useFieldStore<string | number | boolean>(focus)\n\nconst _props = defineProps(radioGroupProps)\nconst props = useProps('radioGroup', _props, {\n  size: createSizeProp(size),\n  state: createStateProp(state),\n  value: {\n    default: () => getFieldValue(null!),\n    static: true\n  },\n  vertical: false,\n  disabled: () => disabled.value,\n  options: {\n    default: () => [],\n    static: true\n  },\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  shape: {\n    default: 'default',\n    validator: value => radioGroupShapes.includes(value)\n  }\n})\n\nconst emit = defineEmits(['update:value'])\n\nconst nh = useNameHelper('radio-group')\nconst currentValue = ref(props.value)\nconst inputSet = new Set<Ref<HTMLElement | null | undefined>>()\n\nconst readonly = computed(() => props.loading && props.loadingLock)\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.ns('radio-vars'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('vertical')]: props.vertical,\n      [nh.bm('disabled')]: props.disabled,\n      [nh.bm('readonly')]: readonly.value,\n      [nh.bm('loading')]: props.loading,\n      [nh.bm(props.size)]: props.size !== 'default',\n      [nh.bm(props.state)]: props.state !== 'default',\n      [nh.bm(props.shape)]: props.shape !== 'default'\n    }\n  ]\n})\n\nconst groupState = reactive({\n  currentValue,\n  size: toRef(props, 'size'),\n  state: toRef(props, 'state'),\n  disabled: toRef(props, 'disabled'),\n  loading: toRef(props, 'loading'),\n  loadingIcon: toRef(props, 'loadingIcon'),\n  loadingLock: toRef(props, 'loadingLock'),\n  loadingEffect: toRef(props, 'loadingEffect'),\n  shape: toRef(props, 'shape'),\n  updateValue: debounceMinor(updateValue),\n  registerInput,\n  unregisterInput\n})\n\n// 此处直接定义 reactive 会出现类型推断错误，存疑？\nprovide(GROUP_STATE, groupState)\n\nwatch(\n  () => props.value,\n  value => {\n    currentValue.value = value\n  }\n)\n\ndefineExpose({\n  idFor,\n  focus,\n  blur: () => {\n    for (const input of inputSet) {\n      input.value?.blur()\n    }\n  }\n})\n\nfunction updateValue(value: string | number | boolean) {\n  if (currentValue.value !== value) {\n    currentValue.value = value\n\n    emit('update:value', value)\n    setFieldValue(value)\n    emitEvent(props.onChange as ChangeEvent, value)\n    validateField()\n  }\n}\n\nfunction registerInput(input: Ref<HTMLElement | null | undefined>) {\n  inputSet.add(input)\n}\n\nfunction unregisterInput(input: Ref<HTMLElement | null | undefined>) {\n  inputSet.delete(input)\n}\n\nfunction focus(options?: FocusOptions) {\n  const input = Array.from(inputSet)[0]?.value\n\n  if (isClient && input && document.activeElement !== input) {\n    input.focus(options)\n  }\n}\n</script>\n\n<template>\n  <div :id=\"idFor\" :class=\"className\" role=\"radiogroup\">\n    <slot>\n      <template v-for=\"item in props.options\" :key=\"item\">\n        <Radio\n          v-if=\"isObject(item)\"\n          inherit\n          :label=\"item.label\"\n          :disabled=\"item.disabled\"\n        >\n          {{ item.content || item.label }}\n        </Radio>\n        <Radio v-else inherit :label=\"item\">\n          {{ item }}\n        </Radio>\n      </template>\n    </slot>\n  </div>\n</template>\n", "import { buildProps, iconProp, sizeProp } from '@vexip-ui/config'\n\nimport type { ResultType } from './symbol'\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const resultProps = buildProps({\n  title: String,\n  size: sizeProp,\n  type: String as PropType<ResultType>,\n  icon: iconProp,\n  iconColor: String,\n  description: String\n})\n\nexport type ResultProps = ExtractPropTypes<typeof resultProps>\nexport type ResultCProps = ConfigurableProps<ExtractPropTypes<typeof resultProps>>\n", "export type ResultType = 'primary' | 'info' | 'success' | 'warning' | 'error'\n\nexport const resultTypes = Object.freeze<ResultType[]>([\n  'primary',\n  'info',\n  'success',\n  'warning',\n  'error'\n])\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed } from 'vue'\n\nimport { createIconProp, createSizeProp, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { resultProps } from './props'\nimport { resultTypes } from './symbol'\n\ndefineOptions({ name: 'Result' })\n\nconst _props = defineProps(resultProps)\nconst props = useProps('result', _props, {\n  title: '',\n  size: createSizeProp(),\n  type: {\n    default: 'primary',\n    validator: value => resultTypes.includes(value)\n  },\n  icon: createIconProp(),\n  iconColor: '',\n  description: ''\n})\n\nconst slots = defineSlots<{\n  icon: () => any,\n  title: () => any,\n  description: () => any,\n  extra: () => any\n}>()\n\nconst nh = useNameHelper('result')\nconst icons = useIcons()\n\nconst predefinedIcons = computed(() => ({\n  primary: icons.value.info,\n  info: icons.value.info,\n  success: icons.value.success,\n  warning: icons.value.warning,\n  error: icons.value.error\n}))\n\nconst iconComp = computed(() => {\n  return props.icon ? { icon: props.icon } : predefinedIcons.value[props.type]\n})\nconst hasTitle = computed(() => !!slots.title || props.title)\nconst hasIcon = computed(() => !!slots.icon || props.type || props.icon)\nconst hasDescription = computed(() => !!slots.description || props.description)\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm(props.type)]: props.type,\n    [nh.bm(props.size)]: props.size !== 'default'\n  }\n})\nconst style = computed(() => {\n  if (props.iconColor) {\n    return nh.cvm({\n      'icon-color': props.iconColor\n    })\n  }\n\n  return {}\n})\n</script>\n\n<template>\n  <div :class=\"className\" :style=\"style\">\n    <div v-if=\"hasIcon\" :class=\"nh.be('icon')\">\n      <slot name=\"icon\">\n        <Icon v-bind=\"iconComp\" :class=\"nh.be('icon')\" :style=\"{ color: props.iconColor }\"></Icon>\n      </slot>\n    </div>\n    <div v-if=\"hasTitle\" :class=\"nh.be('title')\">\n      <slot name=\"title\">\n        {{ props.title }}\n      </slot>\n    </div>\n    <div v-if=\"hasDescription\" :class=\"nh.be('description')\">\n      <slot name=\"description\">\n        {{ props.description }}\n      </slot>\n    </div>\n    <div v-if=\"$slots.extra\" :class=\"nh.be('extra')\">\n      <slot name=\"extra\">\n      </slot>\n    </div>\n  </div>\n</template>\n", "import { defineComponent, h, provide, renderSlot } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { skeletonGroupProps } from './props'\nimport { GROUP_STATE } from './symbol'\n\nexport default defineComponent({\n  name: 'SkeletonGroup',\n  props: skeletonGroupProps,\n  setup(_props, { slots }) {\n    const props = useProps('skeletonGroup', _props, {\n      size: null,\n      tag: false,\n      itemTag: null,\n      activated: false,\n      round: false,\n      circle: false,\n      block: false,\n      loading: true\n    })\n\n    const nh = useNameHelper('skeletonGroup')\n\n    provide(GROUP_STATE, props)\n\n    return () => {\n      if (props.tag) {\n        return h(\n          typeof props.tag === 'string' ? props.tag : 'div',\n          {\n            class: [nh.b(), props.inherit && nh.bm('inherit')],\n            role: 'group'\n          },\n          {\n            default: () => slots.default?.()\n          }\n        )\n      }\n\n      return renderSlot(slots, 'default')\n    }\n  }\n})\n", "<script setup lang=\"ts\">\nimport { Tooltip } from '@/components/tooltip'\n\nimport { computed, ref } from 'vue'\n\nimport { useHoverDelay, useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useSetTimeout } from '@vexip-ui/hooks'\n\nimport type { PropType } from 'vue'\nimport type { TooltipExposed } from '@/components/tooltip'\nimport type { SliderTipProps } from './symbol'\n\ndefineOptions({ name: 'SliderTrigger' })\n\nconst props = defineProps({\n  value: {\n    type: Number,\n    default: 0\n  },\n  tipTransfer: {\n    type: [Boolean, String],\n    default: false\n  },\n  hideTip: {\n    type: Boolean,\n    default: false\n  },\n  vertical: {\n    type: Boolean,\n    default: false\n  },\n  min: {\n    type: Number,\n    default: 0\n  },\n  max: {\n    type: Number,\n    default: 100\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  },\n  loading: {\n    type: Boolean,\n    default: false\n  },\n  reverse: {\n    type: Boolean,\n    default: false\n  },\n  sliding: {\n    type: Boolean,\n    default: false\n  },\n  tipHover: {\n    type: Boolean,\n    default: false\n  },\n  tipProps: {\n    type: Object as PropType<SliderTipProps>,\n    default: () => ({})\n  }\n})\n\nconst emit = defineEmits(['key-minus', 'key-plus'])\n\ndefineSlots<{ default: () => any, tip: () => any }>()\n\nconst nh = useNameHelper('slider')\nconst hoverDelay = useHoverDelay()\n\nconst isTipShow = ref(false)\n\nconst tooltip = ref<(InstanceType<typeof Tooltip> & TooltipExposed) | null>(null)\nconst handler = ref<HTMLElement>()\n\nconst { timer } = useSetTimeout()\nconst { target: wrapper } = useModifier({\n  passive: false,\n  onKeyDown: (event, modifier) => {\n    if (modifier.up || modifier.down || modifier.left || modifier.right) {\n      disableEvent(event)\n\n      const extraType = event.ctrlKey\n        ? 'ctrl'\n        : event.shiftKey\n          ? 'shift'\n          : event.altKey\n            ? 'alt'\n            : undefined\n\n      if (modifier.up || modifier.left) {\n        emit('key-minus', extraType)\n      } else {\n        emit('key-plus', extraType)\n      }\n    }\n  }\n})\n\nconst tipClass = computed(() => [nh.be('tip'), props.tipProps?.tipClass])\n\ndefineExpose({ updateTooltip, focus, blur })\n\nfunction showTooltip() {\n  clearTimeout(timer.hover)\n\n  if (!props.disabled) {\n    timer.hover = setTimeout(() => {\n      isTipShow.value = true\n    }, hoverDelay.value)\n  }\n}\n\nfunction hideTooltip() {\n  clearTimeout(timer.hover)\n\n  timer.hover = setTimeout(() => {\n    isTipShow.value = false\n  }, hoverDelay.value)\n}\n\nfunction disableEvent<E extends Event>(event: E) {\n  if (event.cancelable) {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n}\n\nfunction updateTooltip() {\n  if (tooltip.value) {\n    tooltip.value.updatePopper()\n  }\n}\n\nfunction focus(options?: FocusOptions) {\n  handler.value?.focus(options)\n}\n\nfunction blur() {\n  handler.value?.blur()\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"nh.be('trigger')\"\n    tabindex=\"-1\"\n    @touchstart=\"disableEvent\"\n  >\n    <Tooltip\n      ref=\"tooltip\"\n      :placement=\"vertical ? 'right' : 'top'\"\n      v-bind=\"tipProps\"\n      trigger=\"custom\"\n      :transfer=\"tipTransfer\"\n      :visible=\"isTipShow || sliding\"\n      :tip-class=\"tipClass\"\n      :disabled=\"hideTip\"\n      :no-hover=\"!tipHover\"\n      @tip-enter=\"showTooltip\"\n      @tip-leave=\"hideTooltip\"\n    >\n      <template #trigger>\n        <div\n          ref=\"handler\"\n          :class=\"{\n            [nh.be('button')]: true,\n            [nh.bem('button', 'loading')]: loading,\n            [nh.bem('button', 'sliding')]: sliding\n          }\"\n          role=\"slider\"\n          tabindex=\"0\"\n          :aria-valuenow=\"value\"\n          :aria-valuemin=\"min\"\n          :aria-valuemax=\"max\"\n          :aria-disabled=\"disabled\"\n          @mouseenter=\"showTooltip\"\n          @mouseleave=\"hideTooltip\"\n        >\n          <slot>\n            <div :class=\"nh.be('handler')\"></div>\n          </slot>\n        </div>\n      </template>\n      <slot name=\"tip\">\n        {{ value }}\n      </slot>\n    </Tooltip>\n  </div>\n</template>\n", "import { booleanProp, booleanStringProp, buildProps, eventProp, stateProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { SliderRawMarkers, SliderTipProps } from './symbol'\n\nexport const sliderProps = buildProps({\n  state: stateProp,\n  value: [Number, Array] as PropType<number | number[]>,\n  min: Number,\n  max: Number,\n  step: Number,\n  vertical: booleanProp,\n  hideTip: booleanProp,\n  tipTransfer: booleanStringProp,\n  disabled: booleanProp,\n  loading: booleanProp,\n  loadingLock: booleanProp,\n  reverse: booleanProp,\n  range: booleanProp,\n  markers: [Object, Array] as PropType<SliderRawMarkers>,\n  markerOnly: booleanProp,\n  tipHover: booleanProp,\n  flipMarker: booleanProp,\n  triggerFade: booleanProp,\n  tipProps: Object as PropType<SliderTipProps>,\n  sync: booleanProp,\n  onChange: eventProp<(value: number | number[]) => void>(),\n  onInput: eventProp<(value: number | number[]) => void>()\n})\n\nexport type SliderProps = ExtractPropTypes<typeof sliderProps>\nexport type SliderCProps = ConfigurableProps<SliderProps>\n", "<script setup lang=\"ts\">\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, ref, watch } from 'vue'\n\nimport SliderTrigger from './slider-trigger.vue'\nimport {\n  createStateProp,\n  emitEvent,\n  useHoverDelay,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { useSetTimeout } from '@vexip-ui/hooks'\nimport { decimalLength, throttle, toFixed } from '@vexip-ui/utils'\nimport { sliderProps } from './props'\n\nimport type { SliderCommonSlot, SliderMarker, SliderMarkerSlot, SliderTriggerSlot } from './symbol'\n\nconst enum TriggerType {\n  START = 0,\n  END = 1\n}\n\ndefineOptions({ name: 'Slider' })\n\nconst { idFor, state, disabled, loading, validateField, getFieldValue, setFieldValue } =\n  useFieldStore<number | number[]>(focus)\n\nconst _props = defineProps(sliderProps)\nconst props = useProps('slider', _props, {\n  state: createStateProp(state),\n  value: {\n    default: () => getFieldValue(0),\n    static: true\n  },\n  min: 0,\n  max: 100,\n  step: {\n    default: 1,\n    validator: value => value > 0\n  },\n  vertical: false,\n  hideTip: false,\n  tipTransfer: null,\n  disabled: () => disabled.value,\n  loading: () => loading.value,\n  loadingLock: false,\n  reverse: false,\n  range: false,\n  markers: null,\n  markerOnly: false,\n  tipHover: false,\n  flipMarker: false,\n  triggerFade: false,\n  tipProps: () => ({}),\n  sync: false\n})\n\nconst emit = defineEmits(['update:value'])\n\ndefineSlots<{\n  filler: SliderCommonSlot,\n  trigger: SliderTriggerSlot,\n  tip: SliderTriggerSlot,\n  point: SliderMarkerSlot,\n  marker: SliderMarkerSlot\n}>()\n\nconst nh = useNameHelper('slider')\nconst hoverDelay = useHoverDelay()\n\nconst { timer } = useSetTimeout()\n\nconst stepOneValue = ref([0, 0]) // 按每 step 为 1 的 value\nconst sliding = ref([false, false])\nconst triggerType = ref(TriggerType.END)\nconst hovered = ref(false)\nconst triggerShow = ref(false)\n\nconst track = ref<HTMLElement>()\nconst startTrigger = ref<InstanceType<typeof SliderTrigger>>()\nconst endTrigger = ref<InstanceType<typeof SliderTrigger>>()\n\nconst markerList = computed(() => {\n  const markers = props.markers\n  const list: { value: number, marker: SliderMarker }[] = []\n\n  if (!markers) return list\n\n  if (Array.isArray(markers)) {\n    for (const raw of markers) {\n      const { value, ...marker } = typeof raw === 'number' ? { value: raw } : raw\n\n      if (!Number.isNaN(value)) {\n        list.push({ value, marker })\n      }\n    }\n  } else {\n    for (const value of Object.keys(markers)) {\n      const number = parseFloat(value)\n      const marker = markers[value]\n\n      if (!Number.isNaN(number)) {\n        list.push({\n          value: number,\n          marker: typeof marker === 'string' ? { label: marker } : marker\n        })\n      }\n    }\n  }\n\n  return list.sort((prev, next) => prev.value - next.value)\n})\nconst hasMarkerLabel = computed(() => !!markerList.value.find(({ marker }) => marker.label))\nconst readonly = computed(() => props.loading && props.loadingLock)\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm(props.state)]: props.state !== 'default',\n    [nh.bm('vertical')]: props.vertical,\n    [nh.bm('sliding')]: sliding.value[1] || sliding.value[0],\n    [nh.bm('disabled')]: props.disabled,\n    [nh.bm('readonly')]: readonly.value,\n    [nh.bm('loading')]: props.loading,\n    [nh.bm('reverse')]: props.reverse,\n    [nh.bm('with-marker')]: hasMarkerLabel.value,\n    [nh.bm('flip-marker')]: props.flipMarker,\n    [nh.bm('hide-trigger')]: props.triggerFade && !triggerShow.value\n  }\n})\nconst stepDigit = computed(() => decimalLength(props.step))\n// 按每 step 为 1 算的最小值\nconst stepOneMin = computed(() => Math.ceil(Math.min(props.min, props.max) / props.step))\n// 按每 step 为 1 算的最大值\nconst stepOneMax = computed(() => Math.floor(Math.max(props.min, props.max) / props.step))\nconst truthValue = computed(() => {\n  return [\n    toFixed(stepOneValue.value[0] * props.step, stepDigit.value),\n    toFixed(stepOneValue.value[1] * props.step, stepDigit.value)\n  ]\n})\nconst stepOneTotal = computed(() => stepOneMax.value - stepOneMin.value || 1)\nconst triggerPercent = computed(() => {\n  return [toPercent(stepOneValue.value[0]), toPercent(stepOneValue.value[1])]\n})\nconst fillerStyle = computed(() => {\n  const { vertical, reverse } = props\n  const offset = Math.max(triggerPercent.value[0], triggerPercent.value[1]) - 100\n  const afterOffset = Math.min(triggerPercent.value[0], triggerPercent.value[1]) - offset\n\n  return {\n    [nh.cv('filler-after-transform')]: `translate${vertical ? 'Y' : 'X'}(${\n      reverse ? -afterOffset : afterOffset\n    }%) translateZ(0)`,\n    transform: `\n      translate${vertical ? 'Y' : 'X'}(${reverse ? -offset : offset}%)\n      translateZ(0)\n    `\n  }\n})\nconst startTriggerStyle = computed(() => {\n  const { vertical, reverse } = props\n\n  return {\n    [reverse ? 'bottom' : 'top']: vertical ? `${triggerPercent.value[0]}%` : '50%',\n    [reverse ? 'right' : 'left']: vertical ? '50%' : `${triggerPercent.value[0]}%`,\n    zIndex: triggerType.value === TriggerType.START ? 1 : undefined,\n    transform: `translate(${reverse ? '' : '-'}50%, ${reverse ? '' : '-'}50%)`\n  }\n})\nconst endTriggerStyle = computed(() => {\n  const { vertical, reverse } = props\n\n  return {\n    [reverse ? 'bottom' : 'top']: vertical ? `${triggerPercent.value[1]}%` : '50%',\n    [reverse ? 'right' : 'left']: vertical ? '50%' : `${triggerPercent.value[1]}%`,\n    zIndex: triggerType.value === TriggerType.END ? 1 : undefined,\n    transform: `translate(${reverse ? '' : '-'}50%, ${reverse ? '' : '-'}50%)`\n  }\n})\nconst isDisabled = computed(() => props.disabled || readonly.value)\n\nlet lastValue: number | number[]\nlet lastInputValue: number | number[]\n\nparseValue(props.value)\nverifyValue()\n\nwatch(\n  () => props.value,\n  value => {\n    if (isEqualValue(lastValue, value)) {\n      return\n    }\n\n    parseValue(value)\n    verifyValue()\n  }\n)\nwatch(\n  () => props.step,\n  () => {\n    parseValue(props.value)\n    verifyValue()\n  }\n)\n\ndefineExpose({\n  idFor,\n  sliding,\n  track,\n  startTrigger,\n  endTrigger,\n  isValueInRange,\n  focus,\n  blur\n})\n\nfunction toPercent(value: string | number) {\n  return ((parseFloat(value as string) - stepOneMin.value) / stepOneTotal.value) * 100\n}\n\nfunction parseValue(value: number | number[]) {\n  if (props.range) {\n    const values = Array.isArray(value) ? value : [value, 100]\n\n    stepOneValue.value = [values[0] / props.step, values[1] / props.step]\n  } else {\n    stepOneValue.value = [stepOneMin.value, (Array.isArray(value) ? value[0] : value) / props.step]\n  }\n}\n\nfunction verifyValue() {\n  stepOneValue.value = stepOneValue.value.map(value => {\n    let computedValue = Math.max(stepOneMin.value, Math.min(stepOneMax.value, Math.round(value)))\n\n    if (props.markerOnly && markerList.value.length) {\n      let nearest = Infinity\n      let nearestMarker = 0\n\n      for (const { value } of markerList.value) {\n        const delta = Math.abs(computedValue * props.step - value)\n\n        if (nearest > delta) {\n          nearest = delta\n          nearestMarker = value\n        }\n      }\n\n      computedValue = nearestMarker / props.step\n    }\n\n    return computedValue\n  })\n}\n\nfunction setTriggerFade() {\n  if (hovered.value || sliding.value[0] || sliding.value[1]) return\n\n  triggerShow.value = false\n}\n\nfunction handlePointerEnter() {\n  clearTimeout(timer.hover)\n\n  timer.hover = setTimeout(() => {\n    hovered.value = true\n    triggerShow.value = true\n  }, hoverDelay.value)\n}\n\nfunction handlePointerLeave() {\n  clearTimeout(timer.hover)\n\n  timer.hover = setTimeout(() => {\n    hovered.value = false\n    setTriggerFade()\n  }, hoverDelay.value)\n}\n\nfunction emitChange(type: 'change' | 'input' = 'change', sync = props.sync) {\n  const [start, end] = truthValue.value\n  const value = props.range ? (start > end ? [end, start] : [start, end]) : end\n\n  if (type === 'change') {\n    if (isEqualValue(lastValue, value)) return\n\n    lastValue = value\n\n    if (!sync) {\n      lastInputValue = value\n\n      emit('update:value', value)\n      setFieldValue(value)\n    }\n\n    emitEvent(props.onChange, value)\n\n    if (!sync) {\n      validateField()\n    }\n  } else {\n    if (isEqualValue(lastInputValue, value)) return\n\n    lastInputValue = value\n\n    if (sync) {\n      emit('update:value', value)\n      setFieldValue(value)\n    }\n\n    emitEvent(props.onInput, value)\n\n    if (sync) {\n      validateField()\n    }\n  }\n}\n\nlet trackRect: DOMRect | null = null\n\nfunction computePointedValue(event: PointerEvent) {\n  if (!trackRect) return\n\n  const vertical = props.vertical\n  const reverse = props.reverse\n  const client = vertical ? event.clientY : event.clientX\n\n  stepOneValue.value[triggerType.value] =\n    (reverse ? -1 : 1) *\n      ((client - trackRect[vertical ? (reverse ? 'bottom' : 'top') : reverse ? 'right' : 'left']) /\n        trackRect[vertical ? 'height' : 'width']) *\n      stepOneTotal.value +\n    stepOneMin.value\n}\n\nfunction isEqualValue(prev: number | number[], current: number | number[]) {\n  if (Array.isArray(prev) && Array.isArray(current)) {\n    return prev[0] === current[0] && prev[1] === current[1]\n  }\n\n  return prev === current\n}\n\nconst throttleMove = throttle((event: PointerEvent) => {\n  if (!trackRect || props.disabled) return\n\n  event.preventDefault()\n\n  computePointedValue(event)\n  verifyValue()\n\n  if (startTrigger.value) {\n    startTrigger.value.updateTooltip()\n  }\n\n  if (endTrigger.value) {\n    endTrigger.value.updateTooltip()\n  }\n\n  // const [start, end] = truthValue.value\n  // const value = props.range ? (start > end ? [end, start] : [start, end]) : end\n\n  // if (!isEqualValue(lastValue, value)) {\n  //   lastValue = value\n  //   emitEvent(props.onInput, value)\n  // }\n  emitChange('input')\n})\n\nfunction handleTrackDown(event: PointerEvent) {\n  if (!track.value || isDisabled.value) return\n\n  clearTimeout(timer.sliding)\n  event.stopPropagation()\n  event.preventDefault()\n\n  trackRect = track.value.getBoundingClientRect()\n\n  if (props.range) {\n    const { vertical, reverse } = props\n    const client = vertical ? event.clientY : event.clientX\n    const downPercent =\n      ((reverse\n        ? trackRect[vertical ? 'bottom' : 'right'] - client\n        : client - trackRect[vertical ? 'top' : 'left']) /\n        trackRect[vertical ? 'height' : 'width']) *\n      100\n\n    triggerType.value =\n      Math.abs(downPercent - triggerPercent.value[0]) <\n      Math.abs(downPercent - triggerPercent.value[1])\n        ? TriggerType.START\n        : TriggerType.END\n  } else {\n    triggerType.value = TriggerType.END\n  }\n\n  sliding.value[triggerType.value] = true\n  triggerShow.value = true\n\n  computePointedValue(event)\n  verifyValue()\n\n  document.addEventListener('pointermove', handleMove)\n  document.addEventListener('pointerup', handleMoveEnd)\n}\n\nfunction handleMove(event: PointerEvent) {\n  throttleMove(event)\n}\n\nfunction handleMoveEnd() {\n  trackRect = null\n\n  document.removeEventListener('pointermove', handleMove)\n  document.removeEventListener('pointerup', handleMoveEnd)\n\n  emitChange()\n\n  timer.sliding = setTimeout(() => {\n    sliding.value[triggerType.value] = false\n    setTriggerFade()\n  }, 250)\n}\n\nfunction disableEvent<E extends Event>(event: E) {\n  if (event.cancelable) {\n    event.stopPropagation()\n    event.preventDefault()\n  }\n}\n\nfunction getPointStyle(value: number | string) {\n  const { vertical, reverse } = props\n  value = toPercent(value)\n\n  return {\n    [reverse ? 'bottom' : 'top']: vertical ? `${value}%` : '50%',\n    [reverse ? 'right' : 'left']: vertical ? '50%' : `${value}%`,\n    transform: `translate(${reverse ? '' : '-'}50%, ${reverse ? '' : '-'}50%)`\n  }\n}\n\nfunction getMarkerStyle(value: number | string) {\n  const { vertical, reverse } = props\n  value = toPercent(value)\n\n  return {\n    [reverse ? 'bottom' : 'top']: vertical ? `${value}%` : undefined,\n    [reverse ? 'right' : 'left']: vertical ? undefined : `${value}%`,\n    transform: `translate${vertical ? 'Y' : 'X'}(${reverse ? '' : '-'}50%)`\n  }\n}\n\nfunction isValueInRange(value: number | string) {\n  const number = parseFloat(value as string)\n\n  if (Number.isNaN(number)) return false\n\n  if (props.range) {\n    const min = Math.min(truthValue.value[0], truthValue.value[1])\n    const max = Math.max(truthValue.value[0], truthValue.value[1])\n\n    return number >= min && number <= max\n  } else {\n    return number <= truthValue.value[1]\n  }\n}\n\nfunction adjustValue(type: TriggerType, delta: number, emitEvent = false) {\n  stepOneValue.value[type] += delta\n\n  verifyValue()\n  emitEvent && emitChange()\n}\n\nfunction handlePlus(type: TriggerType, extra: 'ctrl' | 'shift' | 'alt') {\n  if (isDisabled.value) return\n\n  if (props.markerOnly || extra === 'alt') {\n    if (!markerList.value.length) return\n\n    const value = truthValue.value[type]\n\n    for (const { value: markerValue } of markerList.value) {\n      if (markerValue > value) {\n        stepOneValue.value[type] = markerValue\n        break\n      }\n    }\n\n    emitChange()\n  } else {\n    adjustValue(type, extra === 'shift' ? 5 : extra === 'ctrl' ? 20 : 1, true)\n  }\n}\n\nfunction handleMinus(type: TriggerType, extra: 'ctrl' | 'shift' | 'alt') {\n  if (isDisabled.value) return\n\n  if (props.markerOnly || extra === 'alt') {\n    if (!markerList.value.length) return\n\n    const value = truthValue.value[type]\n\n    for (let i = markerList.value.length - 1; i >= 0; --i) {\n      const { value: markerValue } = markerList.value[i]\n\n      if (markerValue < value) {\n        stepOneValue.value[type] = markerValue\n        break\n      }\n    }\n\n    emitChange()\n  } else {\n    adjustValue(type, extra === 'shift' ? -5 : extra === 'ctrl' ? -20 : -1)\n  }\n}\n\nfunction focus(options?: FocusOptions) {\n  ;(startTrigger.value || endTrigger.value)?.focus(options)\n}\n\nfunction blur() {\n  ;(startTrigger.value || endTrigger.value)?.blur()\n}\n</script>\n\n<template>\n  <div\n    :id=\"idFor\"\n    :class=\"className\"\n    tabindex=\"-1\"\n    @pointerdown=\"handleTrackDown\"\n    @pointerenter=\"handlePointerEnter\"\n    @pointerleave=\"handlePointerLeave\"\n    @touchstart=\"disableEvent\"\n  >\n    <div :class=\"nh.be('container')\">\n      <div ref=\"track\" :class=\"nh.be('track')\">\n        <slot\n          name=\"filler\"\n          :values=\"truthValue\"\n          :sliding=\"sliding\"\n          :percent=\"triggerPercent\"\n          :disabled=\"props.disabled\"\n          :loading=\"props.loading\"\n        >\n          <div :class=\"nh.be('filler')\" :style=\"fillerStyle\"></div>\n        </slot>\n      </div>\n      <template v-if=\"markerList.length\">\n        <div :class=\"nh.be('points')\">\n          <div\n            v-for=\"{ value, marker } in markerList\"\n            :key=\"value\"\n            :class=\"[nh.be('point'), isValueInRange(value) && nh.bem('point', 'in-range')]\"\n            :style=\"getPointStyle(value)\"\n          >\n            <slot\n              name=\"point\"\n              :values=\"truthValue\"\n              :sliding=\"sliding\"\n              :percent=\"triggerPercent\"\n              :marker=\"marker\"\n              :marker-value=\"value\"\n              :in-range=\"isValueInRange(value)\"\n              :disabled=\"props.disabled\"\n              :loading=\"props.loading\"\n            >\n              <span :class=\"nh.be('dot')\"></span>\n            </slot>\n          </div>\n        </div>\n        <div :class=\"nh.be('markers')\">\n          <template v-for=\"{ value, marker } in markerList\" :key=\"value\">\n            <div\n              v-bind=\"marker.attrs\"\n              :class=\"[nh.be('marker'), marker.class]\"\n              :style=\"[getMarkerStyle(value), marker.style as any]\"\n            >\n              <slot\n                name=\"marker\"\n                :values=\"truthValue\"\n                :sliding=\"sliding\"\n                :percent=\"triggerPercent\"\n                :marker=\"marker\"\n                :marker-value=\"value\"\n                :in-range=\"isValueInRange(value)\"\n                :disabled=\"props.disabled\"\n                :loading=\"props.loading\"\n              >\n                {{ marker.label }}\n              </slot>\n            </div>\n          </template>\n        </div>\n      </template>\n      <SliderTrigger\n        v-if=\"props.range\"\n        ref=\"startTrigger\"\n        :value=\"truthValue[0]\"\n        :tip-transfer=\"props.tipTransfer\"\n        :hide-tip=\"props.hideTip\"\n        :vertical=\"props.vertical\"\n        :min=\"props.min\"\n        :max=\"props.max\"\n        :disabled=\"props.disabled\"\n        :loading=\"props.loading\"\n        :reverse=\"props.reverse\"\n        :sliding=\"sliding[0]\"\n        :tip-hover=\"props.tipHover\"\n        :style=\"startTriggerStyle\"\n        :tip-props=\"props.tipProps\"\n        @key-plus=\"handlePlus(0, $event)\"\n        @key-minus=\"handleMinus(0, $event)\"\n      >\n        <slot\n          v-if=\"$slots.trigger\"\n          name=\"trigger\"\n          type=\"start\"\n          :value=\"truthValue[0]\"\n          :sliding=\"sliding[0]\"\n          :percent=\"triggerPercent[0]\"\n          :disabled=\"props.disabled\"\n          :loading=\"props.loading\"\n        ></slot>\n        <template #tip>\n          <slot\n            name=\"tip\"\n            type=\"start\"\n            :value=\"truthValue[0]\"\n            :sliding=\"sliding[0]\"\n            :percent=\"triggerPercent[0]\"\n            :disabled=\"props.disabled\"\n            :loading=\"props.loading\"\n          >\n            {{ truthValue[0] }}\n          </slot>\n        </template>\n      </SliderTrigger>\n      <SliderTrigger\n        ref=\"endTrigger\"\n        :value=\"truthValue[1]\"\n        :tip-transfer=\"props.tipTransfer\"\n        :hide-tip=\"props.hideTip\"\n        :vertical=\"props.vertical\"\n        :min=\"props.min\"\n        :max=\"props.max\"\n        :disabled=\"props.disabled\"\n        :loading=\"props.loading\"\n        :reverse=\"props.reverse\"\n        :sliding=\"sliding[1]\"\n        :tip-hover=\"props.tipHover\"\n        :style=\"endTriggerStyle\"\n        :tip-props=\"props.tipProps\"\n        @key-plus=\"handlePlus(1, $event)\"\n        @key-minus=\"handleMinus(1, $event)\"\n      >\n        <slot\n          v-if=\"$slots.trigger\"\n          name=\"trigger\"\n          type=\"end\"\n          :value=\"truthValue[1]\"\n          :sliding=\"sliding[1]\"\n          :percent=\"triggerPercent[1]\"\n          :disabled=\"props.disabled\"\n          :loading=\"props.loading\"\n        ></slot>\n        <template #tip>\n          <slot\n            name=\"tip\"\n            type=\"end\"\n            :value=\"truthValue[1]\"\n            :sliding=\"sliding[1]\"\n            :percent=\"triggerPercent[1]\"\n            :disabled=\"props.disabled\"\n            :loading=\"props.loading\"\n          >\n            {{ truthValue[1] }}\n          </slot>\n        </template>\n      </SliderTrigger>\n    </div>\n  </div>\n</template>\n", "import { booleanProp, buildProps, styleProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ComponentSize, ConfigurableProps } from '@vexip-ui/config'\nimport type { SpaceAlign, SpaceJustify } from './symbol'\n\nexport const spaceProps = buildProps({\n  vertical: booleanProp,\n  inline: booleanProp,\n  tag: String,\n  align: String as PropType<SpaceAlign>,\n  justify: String as PropType<SpaceJustify>,\n  noWrap: booleanProp,\n  size: [String, Number, Array] as PropType<ComponentSize | number | [number, number]>,\n  itemStyle: styleProp,\n  gapDisabled: booleanProp\n})\n\nexport type SpaceProps = ExtractPropTypes<typeof spaceProps>\nexport type SpaceCProps = ConfigurableProps<SpaceProps>\n", "import { computed, defineComponent, renderSlot } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { flatVNodes } from '@vexip-ui/hooks'\nimport { supportFlexGap } from '@vexip-ui/utils'\nimport { spaceProps } from './props'\n\nimport type { ClassType } from '@vexip-ui/config'\nimport type { SpaceAlign, SpaceJustify } from './symbol'\n\nconst justifyList = Object.freeze<SpaceJustify[]>([\n  'start',\n  'end',\n  'center',\n  'space-around',\n  'space-between',\n  'space-evenly'\n])\nconst alignList = Object.freeze<SpaceAlign[]>(['start', 'end', 'center', 'baseline', 'stretch'])\n\nconst useFlexGap = supportFlexGap()\n\nfunction parseFlexStyle(value: string) {\n  return value === 'start' || value === 'end' ? `flex-${value}` : value\n}\n\nexport default defineComponent({\n  name: 'Space',\n  props: spaceProps,\n  setup(_props, { slots }) {\n    const props = useProps('space', _props, {\n      vertical: false,\n      inline: false,\n      tag: 'div',\n      align: {\n        default: 'stretch',\n        validator: value => alignList.includes(value)\n      },\n      justify: {\n        default: 'start',\n        validator: value => justifyList.includes(value)\n      },\n      noWrap: false,\n      size: 'default',\n      itemStyle: null,\n      gapDisabled: !useFlexGap\n    })\n\n    const nh = useNameHelper('space')\n    const varMap: Record<string, any> = {\n      h: `var(${nh.cv('h-gap')})`,\n      hh: `calc(var(${nh.cv('h-gap')}) * 0.5)`,\n      mhh: `calc(var(${nh.cv('h-gap')}) * -0.5)`,\n      v: `var(${nh.cv('v-gap')})`,\n      hv: `calc(var(${nh.cv('v-gap')}) * 0.5)`,\n      mhv: `calc(var(${nh.cv('v-gap')}) * -0.5)`\n    }\n\n    const className = computed(() => {\n      const className: ClassType = {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('inline')]: props.inline,\n        [nh.bm('vertical')]: props.vertical,\n        [nh.bm('no-wrap')]: props.vertical || props.noWrap,\n        [nh.bm('no-gap')]: props.gapDisabled\n      }\n\n      if (typeof props.size === 'string' && props.size !== 'default') {\n        className[nh.bm(props.size)] = true\n      }\n\n      return className\n    })\n    const style = computed(() => {\n      const { justify, align, size } = props\n\n      const style: Record<string, string> = {\n        alignItems: parseFlexStyle(align),\n        justifyContent: parseFlexStyle(justify)\n      }\n\n      if (typeof size !== 'string') {\n        const normalizedSize = Array.isArray(size) ? size : [size, size]\n\n        style[nh.cv('h-gap')] = `${normalizedSize[0]}px`\n        style[nh.cv('v-gap')] = `${normalizedSize[1]}px`\n      }\n\n      if (props.gapDisabled && !props.vertical) {\n        style.marginTop = varMap.mhv\n        style.marginBottom = varMap.mhv\n      }\n\n      return style\n    })\n\n    return () => {\n      const CustomTag = props.tag || ('div' as any)\n      const children = renderSlot(slots, 'default').children\n\n      if (!children?.length) {\n        return <CustomTag class={className.value} style={style.value}></CustomTag>\n      }\n\n      const vnodes = flatVNodes(children)\n      const lastIndex = vnodes.length - 1\n      const justify = props.justify\n      const justifySpace = justify.startsWith('space')\n      const notBetween = justify !== 'space-between'\n\n      return (\n        <CustomTag class={className.value} style={style.value}>\n          {vnodes.map((vnode, index) => (\n            <div\n              key={index}\n              class={nh.be('item')}\n              role={'none'}\n              style={[\n                props.itemStyle,\n                !props.gapDisabled\n                  ? ''\n                  : props.vertical\n                    ? {\n                        marginBottom: index !== lastIndex ? varMap.v : undefined\n                      }\n                    : {\n                        paddingTop: varMap.hv,\n                        paddingBottom: varMap.hv,\n                        marginRight: justifySpace\n                          ? notBetween || index !== lastIndex\n                            ? varMap.hh\n                            : undefined\n                          : index !== lastIndex\n                            ? varMap.h\n                            : undefined,\n                        marginLeft: justifySpace\n                          ? notBetween || index !== 0\n                            ? varMap.hh\n                            : undefined\n                          : undefined\n                      }\n              ]}\n            >\n              {vnode}\n            </div>\n          ))}\n        </CustomTag>\n      )\n    }\n  }\n})\n", "import { booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const splitProps = buildProps({\n  value: Number,\n  min: Number,\n  max: Number,\n  vertical: booleanProp,\n  noTransition: booleanProp,\n  lazy: booleanProp,\n  canFull: booleanProp,\n  onChange: eventProp<(value: number) => void>(),\n  onFull: eventProp<(type: 'top' | 'right' | 'bottom' | 'left') => void>(),\n  onReset: eventProp(),\n  onMoveStart: eventProp<(value: number) => void>(),\n  onMove: eventProp<(value: number) => void>(),\n  onMoveEnd: eventProp<(value: number) => void>()\n})\n\nexport type SplitProps = ExtractPropTypes<typeof splitProps>\nexport type SplitCProps = ConfigurableProps<SplitProps>\n", "<template>\n  <div ref=\"wrapper\" :class=\"className\" @transitionend=\"removeTransition\">\n    <div\n      :class=\"[nh.be('panel'), nh.bem('panel', props.vertical ? 'top' : 'left')]\"\n      :style=\"leftPaneStyle\"\n    >\n      <slot name=\"left\"></slot>\n    </div>\n    <div\n      :class=\"[nh.be('panel'), nh.bem('panel', props.vertical ? 'bottom' : 'right')]\"\n      :style=\"rightPaneStyle\"\n    >\n      <slot name=\"right\"></slot>\n    </div>\n    <div :class=\"nh.be('trigger')\" :style=\"triggerStyle\">\n      <div ref=\"handler\" :class=\"nh.be('handler')\">\n        <template v-if=\"props.canFull\">\n          <button\n            type=\"button\"\n            :class=\"[nh.be('button'), nh.bem('button', `${props.vertical ? 'top' : 'left'}-full`)]\"\n            @pointerdown.stop\n            @click.left=\"handleFull(-1)\"\n          >\n            <Icon v-bind=\"fullIcons[0]\" :scale=\"+(fullIcons[0].scale || 1) * 0.6\"></Icon>\n          </button>\n          <button\n            type=\"button\"\n            :class=\"[\n              nh.be('button'),\n              nh.bem('button', `${props.vertical ? 'bottom' : 'right'}-full`)\n            ]\"\n            @pointerdown.stop\n            @click.left=\"handleFull(1)\"\n          >\n            <Icon v-bind=\"fullIcons[1]\" :scale=\"+(fullIcons[1].scale || 1) * 0.6\"></Icon>\n          </button>\n        </template>\n        <template v-else>\n          <slot name=\"handler\">\n            <span v-for=\"n in 6\" :key=\"n\" :class=\"nh.be('pointer')\"></span>\n          </slot>\n        </template>\n      </div>\n    </div>\n    <div ref=\"guide\" :class=\"nh.be('guide')\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport { emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useMoving } from '@vexip-ui/hooks'\nimport { splitProps } from './props'\n\nexport default defineComponent({\n  name: 'Split',\n  components: {\n    Icon\n  },\n  props: splitProps,\n  emits: ['update:value'],\n  setup(_props, { emit }) {\n    const props = useProps('split', _props, {\n      value: {\n        default: 0.5,\n        validator: (value: number) => value > 0 && value < 1,\n        static: true\n      },\n      min: 0.1,\n      max: 0.9,\n      vertical: false,\n      noTransition: false,\n      lazy: false,\n      canFull: false\n    })\n\n    const nh = useNameHelper('split')\n    const icons = useIcons()\n    const currentValue = ref(props.value)\n    const currentFull = ref<0 | 1 | -1>(0)\n    const transition = ref(false)\n\n    const wrapper = ref<HTMLElement>()\n    const guide = ref<HTMLElement>()\n\n    const offset = computed(() => {\n      return props.vertical ? 'offsetHeight' : 'offsetWidth'\n    })\n    const position = computed<['top', 'bottom'] | ['left', 'right']>(() => {\n      return props.vertical ? ['top', 'bottom'] : ['left', 'right']\n    })\n\n    const { target: handler, moving } = useMoving({\n      lazy: true,\n      capture: false,\n      onStart: (state, event) => {\n        if (currentFull.value || !wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const { min, max, vertical, lazy } = props\n        const outer = wrapper.value[offset.value]\n        const computedMin = min <= 1 ? min : min / outer\n        const computedMax = max <= 1 ? max : max / outer\n\n        state.outer = outer\n        state.min = computedMin\n        state.max = computedMax\n        state.vertical = vertical\n        state.splitLazy = lazy\n        state.start = currentValue.value * outer\n        state.target = currentValue.value\n\n        if (lazy && guide.value) {\n          guide.value.style[position.value[0]] = `${currentValue.value * 100}`\n          guide.value.style.display = 'block'\n        }\n\n        emitEvent(props.onMoveStart, currentValue.value)\n      },\n      onMove: state => {\n        const outer = state.outer as number\n        const min = state.min as number\n        const max = state.max as number\n        const delta = state.vertical ? state.deltaY : state.deltaX\n        const start = state.start as number\n        const value = Math.min(Math.max(min, (start + delta) / outer), max)\n\n        if (state.splitLazy) {\n          if (guide.value) {\n            guide.value.style[position.value[0]] = `${value * 100}%`\n          }\n\n          state.target = value\n        } else {\n          handleChange(value)\n        }\n\n        emitEvent(props.onMove, value)\n      },\n      onEnd: state => {\n        if (guide.value) {\n          guide.value.style.display = ''\n        }\n\n        if (state.splitLazy) {\n          const target = state.target as number\n\n          if (Math.abs(target - currentValue.value) > 0.01) {\n            setTransition()\n          }\n\n          handleChange(target)\n        }\n\n        emitEvent(props.onMoveEnd, currentValue.value)\n      }\n    })\n\n    const className = computed(() => {\n      let fullType = ''\n\n      if (currentFull.value) {\n        if (props.vertical) {\n          fullType = currentFull.value < 0 ? 'top' : 'bottom'\n        } else {\n          fullType = currentFull.value < 0 ? 'left' : 'right'\n        }\n      }\n\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.vertical ? 'vertical' : 'horizontal')]: true,\n        [nh.bm('moving')]: moving.value,\n        [nh.bm(`${fullType}-full`)]: !!fullType,\n        [nh.bm('transition')]: transition.value\n      }\n    })\n    const leftPaneStyle = computed(() => {\n      return {\n        [position.value[1]]:\n          currentFull.value < 0\n            ? '0'\n            : currentFull.value > 0\n              ? '100%'\n              : `${(1 - currentValue.value) * 100}%`\n      }\n    })\n    const rightPaneStyle = computed(() => {\n      return {\n        [position.value[0]]:\n          currentFull.value < 0\n            ? '100%'\n            : currentFull.value > 0\n              ? '0'\n              : `${currentValue.value * 100}%`\n      }\n    })\n    const triggerStyle = computed(() => {\n      return {\n        [position.value[0]]:\n          currentFull.value < 0\n            ? '100%'\n            : currentFull.value > 0\n              ? '0'\n              : `calc(${currentValue.value * 100}% - var(${nh.cv('handler-size')}) * 0.5)`\n      }\n    })\n    const fullIcons = computed(() => {\n      return props.vertical\n        ? [icons.value.angleDown, icons.value.angleUp]\n        : [icons.value.angleRight, icons.value.angleLeft]\n    })\n\n    watch(\n      () => props.value,\n      value => {\n        if (value.toFixed(5) !== currentValue.value.toFixed(5)) {\n          currentValue.value = value\n          setTransition()\n        }\n      }\n    )\n    watch(currentValue, value => {\n      if (guide.value) {\n        guide.value.style[position.value[0]] = `${value * 100}%`\n      }\n    })\n    watch(currentFull, value => {\n      setTransition()\n\n      if (value) {\n        let type: 'top' | 'right' | 'bottom' | 'left'\n\n        if (props.vertical) {\n          type = value < 0 ? 'top' : 'bottom'\n        } else {\n          type = value < 0 ? 'left' : 'right'\n        }\n\n        emitEvent(props.onFull, type)\n      } else {\n        emitEvent(props.onReset)\n      }\n    })\n\n    function setTransition() {\n      transition.value = !props.noTransition && !moving.value\n    }\n\n    function removeTransition() {\n      transition.value = false\n    }\n\n    function handleFull(type: 1 | -1) {\n      if (!props.canFull) {\n        return\n      }\n\n      if (currentFull.value) {\n        currentFull.value = 0\n      } else {\n        currentFull.value = type\n      }\n    }\n\n    function handleChange(value: number) {\n      if (value.toFixed(5) !== currentValue.value.toFixed(5)) {\n        currentValue.value = value\n\n        emitEvent(props.onChange, value)\n        emit('update:value', value)\n      }\n    }\n\n    return {\n      props,\n      nh,\n\n      className,\n      position,\n      leftPaneStyle,\n      rightPaneStyle,\n      triggerStyle,\n      fullIcons,\n\n      wrapper,\n      guide,\n      handler,\n\n      removeTransition,\n      handleFull\n    }\n  }\n})\n</script>\n", "<template>\n  <div ref=\"wrapper\" :class=\"className\" @transitionend=\"removeTransition\">\n    <div\n      :class=\"[nh.be('panel'), nh.bem('panel', props.vertical ? 'top' : 'left')]\"\n      :style=\"leftPaneStyle\"\n    >\n      <slot name=\"left\"></slot>\n    </div>\n    <div\n      :class=\"[nh.be('panel'), nh.bem('panel', props.vertical ? 'bottom' : 'right')]\"\n      :style=\"rightPaneStyle\"\n    >\n      <slot name=\"right\"></slot>\n    </div>\n    <div :class=\"nh.be('trigger')\" :style=\"triggerStyle\">\n      <div ref=\"handler\" :class=\"nh.be('handler')\">\n        <template v-if=\"props.canFull\">\n          <button\n            type=\"button\"\n            :class=\"[nh.be('button'), nh.bem('button', `${props.vertical ? 'top' : 'left'}-full`)]\"\n            @pointerdown.stop\n            @click.left=\"handleFull(-1)\"\n          >\n            <Icon v-bind=\"fullIcons[0]\" :scale=\"+(fullIcons[0].scale || 1) * 0.6\"></Icon>\n          </button>\n          <button\n            type=\"button\"\n            :class=\"[\n              nh.be('button'),\n              nh.bem('button', `${props.vertical ? 'bottom' : 'right'}-full`)\n            ]\"\n            @pointerdown.stop\n            @click.left=\"handleFull(1)\"\n          >\n            <Icon v-bind=\"fullIcons[1]\" :scale=\"+(fullIcons[1].scale || 1) * 0.6\"></Icon>\n          </button>\n        </template>\n        <template v-else>\n          <slot name=\"handler\">\n            <span v-for=\"n in 6\" :key=\"n\" :class=\"nh.be('pointer')\"></span>\n          </slot>\n        </template>\n      </div>\n    </div>\n    <div ref=\"guide\" :class=\"nh.be('guide')\"></div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, ref, watch } from 'vue'\n\nimport { emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useMoving } from '@vexip-ui/hooks'\nimport { splitProps } from './props'\n\nexport default defineComponent({\n  name: 'Split',\n  components: {\n    Icon\n  },\n  props: splitProps,\n  emits: ['update:value'],\n  setup(_props, { emit }) {\n    const props = useProps('split', _props, {\n      value: {\n        default: 0.5,\n        validator: (value: number) => value > 0 && value < 1,\n        static: true\n      },\n      min: 0.1,\n      max: 0.9,\n      vertical: false,\n      noTransition: false,\n      lazy: false,\n      canFull: false\n    })\n\n    const nh = useNameHelper('split')\n    const icons = useIcons()\n    const currentValue = ref(props.value)\n    const currentFull = ref<0 | 1 | -1>(0)\n    const transition = ref(false)\n\n    const wrapper = ref<HTMLElement>()\n    const guide = ref<HTMLElement>()\n\n    const offset = computed(() => {\n      return props.vertical ? 'offsetHeight' : 'offsetWidth'\n    })\n    const position = computed<['top', 'bottom'] | ['left', 'right']>(() => {\n      return props.vertical ? ['top', 'bottom'] : ['left', 'right']\n    })\n\n    const { target: handler, moving } = useMoving({\n      lazy: true,\n      capture: false,\n      onStart: (state, event) => {\n        if (currentFull.value || !wrapper.value || event.button > 0) {\n          return false\n        }\n\n        const { min, max, vertical, lazy } = props\n        const outer = wrapper.value[offset.value]\n        const computedMin = min <= 1 ? min : min / outer\n        const computedMax = max <= 1 ? max : max / outer\n\n        state.outer = outer\n        state.min = computedMin\n        state.max = computedMax\n        state.vertical = vertical\n        state.splitLazy = lazy\n        state.start = currentValue.value * outer\n        state.target = currentValue.value\n\n        if (lazy && guide.value) {\n          guide.value.style[position.value[0]] = `${currentValue.value * 100}`\n          guide.value.style.display = 'block'\n        }\n\n        emitEvent(props.onMoveStart, currentValue.value)\n      },\n      onMove: state => {\n        const outer = state.outer as number\n        const min = state.min as number\n        const max = state.max as number\n        const delta = state.vertical ? state.deltaY : state.deltaX\n        const start = state.start as number\n        const value = Math.min(Math.max(min, (start + delta) / outer), max)\n\n        if (state.splitLazy) {\n          if (guide.value) {\n            guide.value.style[position.value[0]] = `${value * 100}%`\n          }\n\n          state.target = value\n        } else {\n          handleChange(value)\n        }\n\n        emitEvent(props.onMove, value)\n      },\n      onEnd: state => {\n        if (guide.value) {\n          guide.value.style.display = ''\n        }\n\n        if (state.splitLazy) {\n          const target = state.target as number\n\n          if (Math.abs(target - currentValue.value) > 0.01) {\n            setTransition()\n          }\n\n          handleChange(target)\n        }\n\n        emitEvent(props.onMoveEnd, currentValue.value)\n      }\n    })\n\n    const className = computed(() => {\n      let fullType = ''\n\n      if (currentFull.value) {\n        if (props.vertical) {\n          fullType = currentFull.value < 0 ? 'top' : 'bottom'\n        } else {\n          fullType = currentFull.value < 0 ? 'left' : 'right'\n        }\n      }\n\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.vertical ? 'vertical' : 'horizontal')]: true,\n        [nh.bm('moving')]: moving.value,\n        [nh.bm(`${fullType}-full`)]: !!fullType,\n        [nh.bm('transition')]: transition.value\n      }\n    })\n    const leftPaneStyle = computed(() => {\n      return {\n        [position.value[1]]:\n          currentFull.value < 0\n            ? '0'\n            : currentFull.value > 0\n              ? '100%'\n              : `${(1 - currentValue.value) * 100}%`\n      }\n    })\n    const rightPaneStyle = computed(() => {\n      return {\n        [position.value[0]]:\n          currentFull.value < 0\n            ? '100%'\n            : currentFull.value > 0\n              ? '0'\n              : `${currentValue.value * 100}%`\n      }\n    })\n    const triggerStyle = computed(() => {\n      return {\n        [position.value[0]]:\n          currentFull.value < 0\n            ? '100%'\n            : currentFull.value > 0\n              ? '0'\n              : `calc(${currentValue.value * 100}% - var(${nh.cv('handler-size')}) * 0.5)`\n      }\n    })\n    const fullIcons = computed(() => {\n      return props.vertical\n        ? [icons.value.angleDown, icons.value.angleUp]\n        : [icons.value.angleRight, icons.value.angleLeft]\n    })\n\n    watch(\n      () => props.value,\n      value => {\n        if (value.toFixed(5) !== currentValue.value.toFixed(5)) {\n          currentValue.value = value\n          setTransition()\n        }\n      }\n    )\n    watch(currentValue, value => {\n      if (guide.value) {\n        guide.value.style[position.value[0]] = `${value * 100}%`\n      }\n    })\n    watch(currentFull, value => {\n      setTransition()\n\n      if (value) {\n        let type: 'top' | 'right' | 'bottom' | 'left'\n\n        if (props.vertical) {\n          type = value < 0 ? 'top' : 'bottom'\n        } else {\n          type = value < 0 ? 'left' : 'right'\n        }\n\n        emitEvent(props.onFull, type)\n      } else {\n        emitEvent(props.onReset)\n      }\n    })\n\n    function setTransition() {\n      transition.value = !props.noTransition && !moving.value\n    }\n\n    function removeTransition() {\n      transition.value = false\n    }\n\n    function handleFull(type: 1 | -1) {\n      if (!props.canFull) {\n        return\n      }\n\n      if (currentFull.value) {\n        currentFull.value = 0\n      } else {\n        currentFull.value = type\n      }\n    }\n\n    function handleChange(value: number) {\n      if (value.toFixed(5) !== currentValue.value.toFixed(5)) {\n        currentValue.value = value\n\n        emitEvent(props.onChange, value)\n        emit('update:value', value)\n      }\n    }\n\n    return {\n      props,\n      nh,\n\n      className,\n      position,\n      leftPaneStyle,\n      rightPaneStyle,\n      triggerStyle,\n      fullIcons,\n\n      wrapper,\n      guide,\n      handler,\n\n      removeTransition,\n      handleFull\n    }\n  }\n})\n</script>\n", "import { booleanProp, buildProps, eventProp, iconProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps, EventListener } from '@vexip-ui/config'\nimport type { ChangeEvent, TabNavAlign, TabNavOptions, TabNavPlacement } from './symbol'\n\nexport const tabNavProps = buildProps({\n  active: [String, Number],\n  card: booleanProp,\n  options: Array as PropType<TabNavOptions[]>,\n  align: String as PropType<TabNavAlign>,\n  placement: String as PropType<TabNavPlacement>,\n  closable: booleanProp,\n  showAdd: booleanProp,\n  onChange: eventProp<EventListener<ChangeEvent>>(),\n  onAdd: eventProp(),\n  onClose: eventProp<EventListener<ChangeEvent>>()\n})\n\nexport type TabNavProps = ExtractPropTypes<typeof tabNavProps>\nexport type TabNavCProps = ConfigurableProps<TabNavProps>\n\nexport const tabNavItemProps = buildProps({\n  label: [String, Number],\n  disabled: booleanProp,\n  icon: iconProp,\n  closable: booleanProp,\n  onToggle: eventProp<(active: boolean) => void>()\n})\n\nexport type TabNavItemProps = ExtractPropTypes<typeof tabNavItemProps>\n", "import type { InjectionKey } from 'vue'\n\nexport type TabNavAlign = 'left' | 'center' | 'right'\nexport type TabNavPlacement = 'top' | 'right' | 'bottom' | 'left'\n\nexport interface TabNavItemOptions {\n  label: string | number,\n  content?: string,\n  icon?: Record<string, any>,\n  disabled?: boolean,\n  closable?: boolean,\n  onToggle?: (active: boolean) => void\n}\n\nexport type TabNavOptions = TabNavItemOptions | string | number\n\nexport interface ItemState {\n  el?: HTMLElement | null,\n  label: string | number,\n  index: number,\n  total: number\n}\n\nexport interface TabNavState {\n  currentActive: string | number,\n  closable: boolean,\n  increaseItem: (item: ItemState) => void,\n  decreaseItem: (item: ItemState) => void,\n  handleActive: (label: string | number) => void,\n  handleClose: (label: string | number) => void,\n  refreshLabels: () => void\n}\n\nexport type ChangeEvent = (label: string | number) => void\n\nexport const TAB_NAV_STATE: InjectionKey<TabNavState> = Symbol('TAB_NAV_STATE')\n", "<template>\n  <li ref=\"wrapper\" :class=\"nh.be('item')\" role=\"none\">\n    <div :class=\"nh.be('pad')\"></div>\n    <div\n      :class=\"contentClass\"\n      role=\"tab\"\n      tabindex=\"0\"\n      :aria-disabled=\"props.disabled\"\n      :aria-setsize=\"total || undefined\"\n      :aria-posinset=\"index || undefined\"\n      @click=\"handleSelect\"\n      @keydown.enter.stop=\"handleSelect\"\n    >\n      <Icon v-if=\"props.icon\" :class=\"nh.be('icon')\" :icon=\"props.icon\"></Icon>\n      <slot>\n        {{ props.label }}\n      </slot>\n      <button\n        v-if=\"isClosable\"\n        type=\"button\"\n        :class=\"nh.be('close')\"\n        @click.stop=\"handleClose\"\n      >\n        <Icon v-bind=\"icons.close\" label=\"close\"></Icon>\n      </button>\n    </div>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, inject, onBeforeUnmount, reactive, ref, watch } from 'vue'\n\nimport { createIconProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { isDefined } from '@vexip-ui/utils'\nimport { tabNavItemProps } from './props'\nimport { TAB_NAV_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'TabNavItem',\n  components: {\n    Icon\n  },\n  props: tabNavItemProps,\n  emits: [],\n  setup(_props) {\n    const props = useProps('tabNavItem', _props, {\n      label: {\n        static: true,\n        default: null\n      },\n      disabled: false,\n      icon: createIconProp(),\n      closable: null\n    })\n\n    const tabNavState = inject(TAB_NAV_STATE, null)\n\n    const nh = useNameHelper('tab-nav')\n    const active = ref(false)\n    const currentLabel = ref(props.label)\n    const index = ref(0)\n    const total = ref(0)\n\n    const wrapper = ref<HTMLElement>()\n\n    const contentClass = computed(() => {\n      const baseClass = nh.be('content')\n\n      return {\n        [baseClass]: true,\n        [`${baseClass}--disabled`]: props.disabled,\n        [`${baseClass}--active`]: !props.disabled && active.value\n      }\n    })\n    const isClosable = computed(() => {\n      if (isDefined(props.closable)) {\n        return props.closable\n      }\n\n      return tabNavState?.closable ?? false\n    })\n\n    watch(\n      () => props.label,\n      value => {\n        currentLabel.value = value\n        tabNavState?.refreshLabels()\n      }\n    )\n    watch(active, value => {\n      emitEvent(props.onToggle!, value)\n    })\n\n    if (tabNavState) {\n      const state: ItemState = reactive({\n        el: wrapper,\n        label: currentLabel,\n        index,\n        total\n      })\n\n      watch(currentLabel, () => {\n        active.value = currentLabel.value === tabNavState.currentActive\n      })\n      watch(\n        () => tabNavState.currentActive,\n        value => {\n          active.value = currentLabel.value === value\n        },\n        { immediate: true }\n      )\n\n      tabNavState.increaseItem(state)\n\n      onBeforeUnmount(() => {\n        tabNavState.decreaseItem(state)\n      })\n    }\n\n    function handleSelect() {\n      if (props.disabled) {\n        return\n      }\n\n      tabNavState?.handleActive(currentLabel.value)\n    }\n\n    function handleClose() {\n      if (props.disabled) {\n        return\n      }\n\n      tabNavState?.handleClose(currentLabel.value)\n    }\n\n    return {\n      nh,\n      props,\n      icons: useIcons(),\n      index,\n      total,\n\n      contentClass,\n      isClosable,\n\n      wrapper,\n\n      handleSelect,\n      handleClose\n    }\n  }\n})\n</script>\n", "<template>\n  <li ref=\"wrapper\" :class=\"nh.be('item')\" role=\"none\">\n    <div :class=\"nh.be('pad')\"></div>\n    <div\n      :class=\"contentClass\"\n      role=\"tab\"\n      tabindex=\"0\"\n      :aria-disabled=\"props.disabled\"\n      :aria-setsize=\"total || undefined\"\n      :aria-posinset=\"index || undefined\"\n      @click=\"handleSelect\"\n      @keydown.enter.stop=\"handleSelect\"\n    >\n      <Icon v-if=\"props.icon\" :class=\"nh.be('icon')\" :icon=\"props.icon\"></Icon>\n      <slot>\n        {{ props.label }}\n      </slot>\n      <button\n        v-if=\"isClosable\"\n        type=\"button\"\n        :class=\"nh.be('close')\"\n        @click.stop=\"handleClose\"\n      >\n        <Icon v-bind=\"icons.close\" label=\"close\"></Icon>\n      </button>\n    </div>\n  </li>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\n\nimport { computed, defineComponent, inject, onBeforeUnmount, reactive, ref, watch } from 'vue'\n\nimport { createIconProp, emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { isDefined } from '@vexip-ui/utils'\nimport { tabNavItemProps } from './props'\nimport { TAB_NAV_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'TabNavItem',\n  components: {\n    Icon\n  },\n  props: tabNavItemProps,\n  emits: [],\n  setup(_props) {\n    const props = useProps('tabNavItem', _props, {\n      label: {\n        static: true,\n        default: null\n      },\n      disabled: false,\n      icon: createIconProp(),\n      closable: null\n    })\n\n    const tabNavState = inject(TAB_NAV_STATE, null)\n\n    const nh = useNameHelper('tab-nav')\n    const active = ref(false)\n    const currentLabel = ref(props.label)\n    const index = ref(0)\n    const total = ref(0)\n\n    const wrapper = ref<HTMLElement>()\n\n    const contentClass = computed(() => {\n      const baseClass = nh.be('content')\n\n      return {\n        [baseClass]: true,\n        [`${baseClass}--disabled`]: props.disabled,\n        [`${baseClass}--active`]: !props.disabled && active.value\n      }\n    })\n    const isClosable = computed(() => {\n      if (isDefined(props.closable)) {\n        return props.closable\n      }\n\n      return tabNavState?.closable ?? false\n    })\n\n    watch(\n      () => props.label,\n      value => {\n        currentLabel.value = value\n        tabNavState?.refreshLabels()\n      }\n    )\n    watch(active, value => {\n      emitEvent(props.onToggle!, value)\n    })\n\n    if (tabNavState) {\n      const state: ItemState = reactive({\n        el: wrapper,\n        label: currentLabel,\n        index,\n        total\n      })\n\n      watch(currentLabel, () => {\n        active.value = currentLabel.value === tabNavState.currentActive\n      })\n      watch(\n        () => tabNavState.currentActive,\n        value => {\n          active.value = currentLabel.value === value\n        },\n        { immediate: true }\n      )\n\n      tabNavState.increaseItem(state)\n\n      onBeforeUnmount(() => {\n        tabNavState.decreaseItem(state)\n      })\n    }\n\n    function handleSelect() {\n      if (props.disabled) {\n        return\n      }\n\n      tabNavState?.handleActive(currentLabel.value)\n    }\n\n    function handleClose() {\n      if (props.disabled) {\n        return\n      }\n\n      tabNavState?.handleClose(currentLabel.value)\n    }\n\n    return {\n      nh,\n      props,\n      icons: useIcons(),\n      index,\n      total,\n\n      contentClass,\n      isClosable,\n\n      wrapper,\n\n      handleSelect,\n      handleClose\n    }\n  }\n})\n</script>\n", "<template>\n  <div ref=\"wrapper\" :class=\"className\" tabindex=\"-1\">\n    <ResizeObserver :on-resize=\"updateMarkerPosition\">\n      <div :class=\"[nh.be('extra'), nh.bem('extra', 'prefix')]\">\n        <div v-if=\"$slots.prefix\" :class=\"nh.be('prefix')\">\n          <slot name=\"prefix\"></slot>\n        </div>\n      </div>\n    </ResizeObserver>\n    <Scroll\n      ref=\"scroll\"\n      :class=\"nh.be('scroll')\"\n      :mode=\"scrollMode\"\n      :delta-x=\"40\"\n      :delta-y=\"40\"\n      scroll-tag=\"ul\"\n      :scroll-class=\"nh.be('list')\"\n      :scroll-attrs=\"{ role: 'tablist' }\"\n    >\n      <slot>\n        <TabNavItem\n          v-for=\"item in items\"\n          :key=\"item.label\"\n          :label=\"item.label\"\n          :icon=\"item.icon\"\n          :disabled=\"item.disabled\"\n          :closable=\"item.closable\"\n          @toggle=\"item.onToggle\"\n        >\n          {{ item.content || item.label }}\n        </TabNavItem>\n      </slot>\n      <li v-if=\"props.showAdd || $slots.add\" :class=\"nh.be('item')\" role=\"none\">\n        <div :class=\"nh.be('pad')\"></div>\n        <button type=\"button\" :class=\"nh.be('add')\" @click=\"handleAdd\">\n          <slot name=\"add\">\n            <Icon v-bind=\"icons.plus\" :scale=\"+(icons.plus.scale || 1) * 1.2\"></Icon>\n          </slot>\n        </button>\n      </li>\n      <div\n        v-if=\"!props.card\"\n        :class=\"nh.be('track')\"\n        role=\"none\"\n        :style=\"markerStyle\"\n      >\n        <slot name=\"marker\">\n          <div :class=\"nh.be('marker')\"></div>\n        </slot>\n      </div>\n    </Scroll>\n    <ResizeObserver :on-resize=\"updateMarkerPosition\">\n      <div :class=\"[nh.be('extra'), nh.bem('extra', 'suffix')]\">\n        <div v-if=\"$slots.suffix\" :class=\"nh.be('suffix')\">\n          <slot name=\"suffix\"></slot>\n        </div>\n      </div>\n    </ResizeObserver>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { ResizeObserver } from '@/components/resize-observer'\nimport { Scroll } from '@/components/scroll'\nimport { TabNavItem } from '@/components/tab-nav-item'\n\nimport { computed, defineComponent, onMounted, provide, reactive, ref, toRef, watch } from 'vue'\n\nimport { emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useDisplay } from '@vexip-ui/hooks'\nimport { debounceMinor, isNull } from '@vexip-ui/utils'\nimport { tabNavProps } from './props'\nimport { TAB_NAV_STATE } from './symbol'\n\nimport type { ChangeEvent, ItemState } from './symbol'\n\nconst trackStyleMap = {\n  top: ['left', 'width'],\n  right: ['top', 'height'],\n  bottom: ['left', 'width'],\n  left: ['top', 'height']\n} as const\n\nexport default defineComponent({\n  name: 'TabNav',\n  components: {\n    Icon,\n    ResizeObserver,\n    Scroll,\n    TabNavItem\n  },\n  props: tabNavProps,\n  emits: ['update:active'],\n  setup(_props, { emit }) {\n    const props = useProps('tabNav', _props, {\n      active: {\n        default: null,\n        static: true\n      },\n      card: false,\n      options: {\n        default: () => [],\n        static: true\n      },\n      align: 'left',\n      placement: 'top',\n      closable: false,\n      showAdd: false\n    })\n\n    const nh = useNameHelper('tab-nav')\n    const currentActive = ref(props.active)\n    const markerPosition = ref(0)\n    const markerSize = ref(0)\n    const itemStates = new Set<ItemState>()\n\n    const wrapper = useDisplay(updateMarkerPosition)\n    const scroll = ref<InstanceType<typeof Scroll>>()\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(`align-${props.align}`)]: true,\n        [nh.bm(props.placement)]: true,\n        [nh.bm('card')]: props.card\n      }\n    })\n    const markerStyle = computed(() => {\n      const [position, length] = trackStyleMap[props.placement]\n\n      return {\n        [position]: `${markerPosition.value}px`,\n        [length]: `${markerSize.value}px`\n      }\n    })\n    const items = computed(() => {\n      return props.options.map(item => {\n        if (typeof item === 'string' || typeof item === 'number') {\n          return { label: item }\n        }\n\n        return item\n      })\n    })\n    const scrollMode = computed(() => {\n      return props.placement === 'top' || props.placement === 'bottom'\n        ? 'horizontal-exact'\n        : 'vertical'\n    })\n\n    const refreshLabels = debounceMinor(() => {\n      const total = itemStates.size\n\n      Array.from(itemStates).forEach((item, index) => {\n        item.index = index + 1\n        item.total = total\n\n        if (isNull(item.label)) {\n          item.label = index + 1\n        }\n      })\n\n      if (itemStates.size >= 1 && isActiveEmpty()) {\n        currentActive.value = Array.from(itemStates)[0].label\n      }\n    })\n\n    provide(\n      TAB_NAV_STATE,\n      reactive({\n        currentActive,\n        closable: toRef(props, 'closable'),\n        increaseItem,\n        decreaseItem,\n        handleActive,\n        handleClose,\n        refreshLabels\n      })\n    )\n\n    watch(\n      () => props.active,\n      value => {\n        currentActive.value = value\n        updateMarkerPosition()\n      }\n    )\n    watch(\n      () => props.placement,\n      () => {\n        requestAnimationFrame(updateMarkerPosition)\n      }\n    )\n\n    onMounted(updateMarkerPosition)\n\n    function isActiveEmpty() {\n      return isNull(currentActive.value) || currentActive.value === ''\n    }\n\n    function increaseItem(item: ItemState) {\n      itemStates.add(item)\n      refreshLabels()\n    }\n\n    function decreaseItem(item: ItemState) {\n      itemStates.delete(item)\n      refreshLabels()\n    }\n\n    function handleActive(label: string | number) {\n      currentActive.value = label\n\n      updateMarkerPosition()\n      emit('update:active', label)\n      emitEvent(props.onChange as ChangeEvent, label)\n    }\n\n    function handleAdd() {\n      emitEvent(props.onAdd)\n    }\n\n    function handleClose(label: string | number) {\n      emitEvent(props.onClose as ChangeEvent, label)\n\n      requestAnimationFrame(updateMarkerPosition)\n    }\n\n    function updateMarkerPosition() {\n      const activeItem = Array.from(itemStates).find(item => item.label === currentActive.value)\n\n      if (activeItem?.el) {\n        if (props.placement === 'top' || props.placement === 'bottom') {\n          markerPosition.value = activeItem.el.offsetLeft\n          markerSize.value = activeItem.el.offsetWidth\n        } else {\n          markerPosition.value = activeItem.el.offsetTop\n          markerSize.value = activeItem.el.offsetHeight\n        }\n      } else {\n        markerPosition.value = 0\n        markerSize.value = 0\n      }\n    }\n\n    return {\n      props,\n      nh,\n      icons: useIcons(),\n\n      className,\n      markerStyle,\n      items,\n      scrollMode,\n\n      wrapper,\n      scroll,\n\n      updateMarkerPosition,\n      handleAdd\n    }\n  }\n})\n</script>\n", "<template>\n  <div ref=\"wrapper\" :class=\"className\" tabindex=\"-1\">\n    <ResizeObserver :on-resize=\"updateMarkerPosition\">\n      <div :class=\"[nh.be('extra'), nh.bem('extra', 'prefix')]\">\n        <div v-if=\"$slots.prefix\" :class=\"nh.be('prefix')\">\n          <slot name=\"prefix\"></slot>\n        </div>\n      </div>\n    </ResizeObserver>\n    <Scroll\n      ref=\"scroll\"\n      :class=\"nh.be('scroll')\"\n      :mode=\"scrollMode\"\n      :delta-x=\"40\"\n      :delta-y=\"40\"\n      scroll-tag=\"ul\"\n      :scroll-class=\"nh.be('list')\"\n      :scroll-attrs=\"{ role: 'tablist' }\"\n    >\n      <slot>\n        <TabNavItem\n          v-for=\"item in items\"\n          :key=\"item.label\"\n          :label=\"item.label\"\n          :icon=\"item.icon\"\n          :disabled=\"item.disabled\"\n          :closable=\"item.closable\"\n          @toggle=\"item.onToggle\"\n        >\n          {{ item.content || item.label }}\n        </TabNavItem>\n      </slot>\n      <li v-if=\"props.showAdd || $slots.add\" :class=\"nh.be('item')\" role=\"none\">\n        <div :class=\"nh.be('pad')\"></div>\n        <button type=\"button\" :class=\"nh.be('add')\" @click=\"handleAdd\">\n          <slot name=\"add\">\n            <Icon v-bind=\"icons.plus\" :scale=\"+(icons.plus.scale || 1) * 1.2\"></Icon>\n          </slot>\n        </button>\n      </li>\n      <div\n        v-if=\"!props.card\"\n        :class=\"nh.be('track')\"\n        role=\"none\"\n        :style=\"markerStyle\"\n      >\n        <slot name=\"marker\">\n          <div :class=\"nh.be('marker')\"></div>\n        </slot>\n      </div>\n    </Scroll>\n    <ResizeObserver :on-resize=\"updateMarkerPosition\">\n      <div :class=\"[nh.be('extra'), nh.bem('extra', 'suffix')]\">\n        <div v-if=\"$slots.suffix\" :class=\"nh.be('suffix')\">\n          <slot name=\"suffix\"></slot>\n        </div>\n      </div>\n    </ResizeObserver>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { ResizeObserver } from '@/components/resize-observer'\nimport { Scroll } from '@/components/scroll'\nimport { TabNavItem } from '@/components/tab-nav-item'\n\nimport { computed, defineComponent, onMounted, provide, reactive, ref, toRef, watch } from 'vue'\n\nimport { emitEvent, useIcons, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useDisplay } from '@vexip-ui/hooks'\nimport { debounceMinor, isNull } from '@vexip-ui/utils'\nimport { tabNavProps } from './props'\nimport { TAB_NAV_STATE } from './symbol'\n\nimport type { ChangeEvent, ItemState } from './symbol'\n\nconst trackStyleMap = {\n  top: ['left', 'width'],\n  right: ['top', 'height'],\n  bottom: ['left', 'width'],\n  left: ['top', 'height']\n} as const\n\nexport default defineComponent({\n  name: 'TabNav',\n  components: {\n    Icon,\n    ResizeObserver,\n    Scroll,\n    TabNavItem\n  },\n  props: tabNavProps,\n  emits: ['update:active'],\n  setup(_props, { emit }) {\n    const props = useProps('tabNav', _props, {\n      active: {\n        default: null,\n        static: true\n      },\n      card: false,\n      options: {\n        default: () => [],\n        static: true\n      },\n      align: 'left',\n      placement: 'top',\n      closable: false,\n      showAdd: false\n    })\n\n    const nh = useNameHelper('tab-nav')\n    const currentActive = ref(props.active)\n    const markerPosition = ref(0)\n    const markerSize = ref(0)\n    const itemStates = new Set<ItemState>()\n\n    const wrapper = useDisplay(updateMarkerPosition)\n    const scroll = ref<InstanceType<typeof Scroll>>()\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(`align-${props.align}`)]: true,\n        [nh.bm(props.placement)]: true,\n        [nh.bm('card')]: props.card\n      }\n    })\n    const markerStyle = computed(() => {\n      const [position, length] = trackStyleMap[props.placement]\n\n      return {\n        [position]: `${markerPosition.value}px`,\n        [length]: `${markerSize.value}px`\n      }\n    })\n    const items = computed(() => {\n      return props.options.map(item => {\n        if (typeof item === 'string' || typeof item === 'number') {\n          return { label: item }\n        }\n\n        return item\n      })\n    })\n    const scrollMode = computed(() => {\n      return props.placement === 'top' || props.placement === 'bottom'\n        ? 'horizontal-exact'\n        : 'vertical'\n    })\n\n    const refreshLabels = debounceMinor(() => {\n      const total = itemStates.size\n\n      Array.from(itemStates).forEach((item, index) => {\n        item.index = index + 1\n        item.total = total\n\n        if (isNull(item.label)) {\n          item.label = index + 1\n        }\n      })\n\n      if (itemStates.size >= 1 && isActiveEmpty()) {\n        currentActive.value = Array.from(itemStates)[0].label\n      }\n    })\n\n    provide(\n      TAB_NAV_STATE,\n      reactive({\n        currentActive,\n        closable: toRef(props, 'closable'),\n        increaseItem,\n        decreaseItem,\n        handleActive,\n        handleClose,\n        refreshLabels\n      })\n    )\n\n    watch(\n      () => props.active,\n      value => {\n        currentActive.value = value\n        updateMarkerPosition()\n      }\n    )\n    watch(\n      () => props.placement,\n      () => {\n        requestAnimationFrame(updateMarkerPosition)\n      }\n    )\n\n    onMounted(updateMarkerPosition)\n\n    function isActiveEmpty() {\n      return isNull(currentActive.value) || currentActive.value === ''\n    }\n\n    function increaseItem(item: ItemState) {\n      itemStates.add(item)\n      refreshLabels()\n    }\n\n    function decreaseItem(item: ItemState) {\n      itemStates.delete(item)\n      refreshLabels()\n    }\n\n    function handleActive(label: string | number) {\n      currentActive.value = label\n\n      updateMarkerPosition()\n      emit('update:active', label)\n      emitEvent(props.onChange as ChangeEvent, label)\n    }\n\n    function handleAdd() {\n      emitEvent(props.onAdd)\n    }\n\n    function handleClose(label: string | number) {\n      emitEvent(props.onClose as ChangeEvent, label)\n\n      requestAnimationFrame(updateMarkerPosition)\n    }\n\n    function updateMarkerPosition() {\n      const activeItem = Array.from(itemStates).find(item => item.label === currentActive.value)\n\n      if (activeItem?.el) {\n        if (props.placement === 'top' || props.placement === 'bottom') {\n          markerPosition.value = activeItem.el.offsetLeft\n          markerSize.value = activeItem.el.offsetWidth\n        } else {\n          markerPosition.value = activeItem.el.offsetTop\n          markerSize.value = activeItem.el.offsetHeight\n        }\n      } else {\n        markerPosition.value = 0\n        markerSize.value = 0\n      }\n    }\n\n    return {\n      props,\n      nh,\n      icons: useIcons(),\n\n      className,\n      markerStyle,\n      items,\n      scrollMode,\n\n      wrapper,\n      scroll,\n\n      updateMarkerPosition,\n      handleAdd\n    }\n  }\n})\n</script>\n", "import { tabNavItemProps, tabNavProps } from '@/components/tab-nav/props'\n\nimport { omitProps, wrapProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const tabsProps = omitProps(tabNavProps, ['options'])\n\nexport type TabsProps = ExtractPropTypes<typeof tabsProps>\nexport type TabsCProps = ConfigurableProps<TabsProps>\n\nexport const tabPanelProps = wrapProps({\n  ...tabNavItemProps,\n  name: {\n    type: String,\n    default: ''\n  }\n})\n\nexport type TabPanelProps = ExtractPropTypes<typeof tabPanelProps>\n", "import type { InjectionKey } from 'vue'\n\nexport interface ItemState {\n  label: string | number,\n  name: string,\n  icon: Record<string, any>,\n  disabled: boolean,\n  closable?: boolean,\n  labelRenderer: null | ((data: { label: string | number }) => any)\n}\n\nexport interface TabsState {\n  currentActive: string | number,\n  increaseItem: (item: ItemState) => void,\n  decreaseItem: (item: ItemState) => void,\n  handleActive: (label: string | number) => void,\n  refreshLabels: () => void\n}\n\nexport const TABS_STATE: InjectionKey<TabsState> = Symbol('TABS_STATE')\n", "<template>\n  <div :class=\"className\" role=\"tabpanel\" :aria-hidden=\"!active\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  reactive,\n  ref,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useNameHelper } from '@vexip-ui/config'\nimport { tabPanelProps } from './props'\nimport { TABS_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'TabPanel',\n  props: tabPanelProps,\n  emits: [],\n  setup(props, { slots }) {\n    const tabsState = inject(TABS_STATE, null)\n\n    const nh = useNameHelper('tabs')\n    const active = ref(false)\n    const currentLabel = ref(props.label)\n\n    const className = computed(() => {\n      const baseClass = nh.be('panel')\n\n      return {\n        [baseClass]: true,\n        [`${baseClass}--disabled`]: props.disabled,\n        [`${baseClass}--active`]: !props.disabled && active.value\n      }\n    })\n\n    watch(\n      () => props.label,\n      value => {\n        currentLabel.value = value\n        tabsState?.refreshLabels()\n      }\n    )\n    watch(active, value => {\n      emitEvent(props.onToggle!, value)\n    })\n\n    if (tabsState) {\n      const state: ItemState = reactive({\n        label: currentLabel,\n        name: toRef(props, 'name'),\n        icon: toRef(props, 'icon'),\n        disabled: toRef(props, 'disabled'),\n        closable: toRef(props, 'closable'),\n        labelRenderer: null\n      })\n\n      watch(\n        () => slots.label,\n        value => {\n          state.labelRenderer = value ? data => value(data) : null\n        },\n        { immediate: true }\n      )\n      watch(currentLabel, () => {\n        active.value = currentLabel.value === tabsState.currentActive\n      })\n      watch(\n        () => tabsState.currentActive,\n        value => {\n          active.value = currentLabel.value === value\n        },\n        { immediate: true }\n      )\n\n      tabsState.increaseItem(state)\n\n      onBeforeUnmount(() => {\n        tabsState.decreaseItem(state)\n      })\n    }\n\n    return {\n      active,\n      className\n    }\n  }\n})\n</script>\n", "<template>\n  <div :class=\"className\" role=\"tabpanel\" :aria-hidden=\"!active\">\n    <slot></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  reactive,\n  ref,\n  toRef,\n  watch\n} from 'vue'\n\nimport { emitEvent, useNameHelper } from '@vexip-ui/config'\nimport { tabPanelProps } from './props'\nimport { TABS_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\nexport default defineComponent({\n  name: 'TabPanel',\n  props: tabPanelProps,\n  emits: [],\n  setup(props, { slots }) {\n    const tabsState = inject(TABS_STATE, null)\n\n    const nh = useNameHelper('tabs')\n    const active = ref(false)\n    const currentLabel = ref(props.label)\n\n    const className = computed(() => {\n      const baseClass = nh.be('panel')\n\n      return {\n        [baseClass]: true,\n        [`${baseClass}--disabled`]: props.disabled,\n        [`${baseClass}--active`]: !props.disabled && active.value\n      }\n    })\n\n    watch(\n      () => props.label,\n      value => {\n        currentLabel.value = value\n        tabsState?.refreshLabels()\n      }\n    )\n    watch(active, value => {\n      emitEvent(props.onToggle!, value)\n    })\n\n    if (tabsState) {\n      const state: ItemState = reactive({\n        label: currentLabel,\n        name: toRef(props, 'name'),\n        icon: toRef(props, 'icon'),\n        disabled: toRef(props, 'disabled'),\n        closable: toRef(props, 'closable'),\n        labelRenderer: null\n      })\n\n      watch(\n        () => slots.label,\n        value => {\n          state.labelRenderer = value ? data => value(data) : null\n        },\n        { immediate: true }\n      )\n      watch(currentLabel, () => {\n        active.value = currentLabel.value === tabsState.currentActive\n      })\n      watch(\n        () => tabsState.currentActive,\n        value => {\n          active.value = currentLabel.value === value\n        },\n        { immediate: true }\n      )\n\n      tabsState.increaseItem(state)\n\n      onBeforeUnmount(() => {\n        tabsState.decreaseItem(state)\n      })\n    }\n\n    return {\n      active,\n      className\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  buildProps,\n  classProp,\n  eventProp,\n  localeProp,\n  sizeProp,\n  styleProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ClassType, ConfigurableProps, StyleType } from '@vexip-ui/config'\nimport type { TooltipTheme } from '@/components/tooltip'\nimport type {\n  Accessor,\n  ColumnCellSpanFn,\n  ColumnRenderFn,\n  ColumnSummaryRenderFn,\n  Data,\n  DropType,\n  ExpandRenderFn,\n  FilterRenderFn,\n  HeadRenderFn,\n  SummaryCellSpanFn,\n  SummaryRenderFn,\n  TableCellPayload,\n  TableCellPropFn,\n  TableCellSpanFn,\n  TableColResizeType,\n  TableColumnRawOptions,\n  TableColumnType,\n  TableFilterOptions,\n  TableFilterProfile,\n  TableFootPayload,\n  TableFootPropFn,\n  TableHeadPayload,\n  TableHeadPropFn,\n  TableIcons,\n  TableKeyConfig,\n  TableRowPayload,\n  TableRowPropFn,\n  TableSorterOptions,\n  TableSorterProfile,\n  TableSummaryOptions,\n  TableTextAlign\n} from './symbol'\n\nexport const tableProps = buildProps({\n  locale: localeProp('table'),\n  columns: Array as PropType<TableColumnRawOptions[]>,\n  summaries: Array as PropType<TableSummaryOptions<any, any>[]>,\n  data: Array as PropType<Data[]>,\n  width: [Number, String],\n  height: Number,\n  rowClass: [String, Object, Array, Function] as PropType<ClassType | TableRowPropFn<ClassType>>,\n  rowStyle: [String, Object, Array, Function] as PropType<StyleType | TableRowPropFn<StyleType>>,\n  rowAttrs: [Object, Function] as PropType<\n    Record<string, any> | TableRowPropFn<Record<string, any>>\n  >,\n  stripe: booleanProp,\n  border: booleanProp,\n  highlight: booleanProp,\n  useXBar: booleanProp,\n  useYBar: booleanProp,\n  barFade: Number,\n  rowDraggable: booleanProp,\n  rowHeight: Number,\n  rowMinHeight: Number,\n  virtual: booleanProp,\n  bufferCount: Number,\n  scrollClass: Object as PropType<{\n    horizontal?: ClassType,\n    major?: ClassType,\n    left?: ClassType,\n    right?: ClassType\n  }>,\n  expandRenderer: Function as PropType<ExpandRenderFn>,\n  currentPage: Number,\n  pageSize: Number,\n  transparent: booleanProp,\n  tooltipTheme: String as PropType<TooltipTheme>,\n  tooltipWidth: [Number, String],\n  singleSorter: booleanProp,\n  singleFilter: booleanProp,\n  cellClass: [String, Object, Array, Function] as PropType<\n    ClassType | TableCellPropFn<any, ClassType>\n  >,\n  cellStyle: [String, Object, Array, Function] as PropType<\n    StyleType | TableCellPropFn<any, StyleType>\n  >,\n  cellAttrs: [Object, Function] as PropType<\n    Record<string, any> | TableCellPropFn<any, Record<string, any>>\n  >,\n  headClass: [String, Object, Array, Function] as PropType<ClassType | TableHeadPropFn<ClassType>>,\n  headStyle: [String, Object, Array, Function] as PropType<StyleType | TableHeadPropFn<StyleType>>,\n  headAttrs: [Object, Function] as PropType<\n    Record<string, any> | TableHeadPropFn<Record<string, any>>\n  >,\n  footClass: [String, Object, Array, Function] as PropType<ClassType | TableFootPropFn<ClassType>>,\n  footStyle: [String, Object, Array, Function] as PropType<StyleType | TableFootPropFn<StyleType>>,\n  footAttrs: [Object, Function] as PropType<\n    Record<string, any> | TableFootPropFn<Record<string, any>>\n  >,\n  customSorter: booleanProp,\n  customFilter: booleanProp,\n  keyConfig: Object as PropType<TableKeyConfig>,\n  disabledTree: booleanProp,\n  rowIndent: [String, Number],\n  noCascaded: booleanProp,\n  colResizable: {\n    type: [Boolean, String] as PropType<boolean | TableColResizeType>,\n    default: null\n  },\n  cellSpan: Function as PropType<TableCellSpanFn>,\n  sidePadding: [Number, Array] as PropType<number | number[]>,\n  icons: Object as PropType<TableIcons>,\n  borderWidth: Number,\n  dataFilter: Function as PropType<(data: Data) => boolean>,\n  noTransition: booleanProp,\n  ellipsis: booleanProp,\n  onScroll:\n    eventProp<\n      (payload: { type: 'horizontal' | 'vertical', client: number, percent: number }) => void\n    >(),\n  onRowEnter: eventProp<(payload: TableRowPayload) => void>(),\n  onRowLeave: eventProp<(payload: TableRowPayload) => void>(),\n  onRowClick: eventProp<(payload: TableRowPayload) => void>(),\n  onRowDblclick: eventProp<(payload: TableRowPayload) => void>(),\n  onRowContextmenu: eventProp<(payload: TableRowPayload) => void>(),\n  onRowCheck: eventProp<(payload: TableRowPayload) => void>(),\n  onRowCheckAll: eventProp<(checked: boolean, partial: boolean) => void>(),\n  onRowExpand: eventProp<(payload: TableRowPayload) => void>(),\n  onRowTreeExpand: eventProp<(payload: TableRowPayload) => void>(),\n  onRowDragStart: eventProp<(row: Data, event: DragEvent) => void>(),\n  onRowDragOver: eventProp<(row: Data, event: DragEvent) => void>(),\n  onRowDrop: eventProp<(row: Data, type: DropType, event: DragEvent) => void>(),\n  onRowDragEnd: eventProp<(row: Data, allRows: Data[], event: DragEvent) => void>(),\n  onRowFilter: eventProp<(profiles: TableFilterProfile[], filteredRow: Data[]) => void>(),\n  onRowSort: eventProp<(profiles: TableSorterProfile[], sortedRow: Data[]) => void>(),\n  onCellEnter: eventProp<(payload: TableCellPayload) => void>(),\n  onCellLeave: eventProp<(payload: TableCellPayload) => void>(),\n  onCellClick: eventProp<(payload: TableCellPayload) => void>(),\n  onCellDblclick: eventProp<(payload: TableCellPayload) => void>(),\n  onCellContextmenu: eventProp<(payload: TableCellPayload) => void>(),\n  onHeadEnter: eventProp<(payload: TableHeadPayload) => void>(),\n  onHeadLeave: eventProp<(payload: TableHeadPayload) => void>(),\n  onHeadClick: eventProp<(payload: TableHeadPayload) => void>(),\n  onHeadDblclick: eventProp<(payload: TableHeadPayload) => void>(),\n  onHeadContextmenu: eventProp<(payload: TableHeadPayload) => void>(),\n  onColResizeStart: eventProp<(payload: TableHeadPayload) => void>(),\n  onColResizeMove: eventProp<(payload: TableHeadPayload) => void>(),\n  onColResizeEnd: eventProp<(payload: TableHeadPayload) => void>(),\n  onFootEnter: eventProp<(payload: TableFootPayload) => void>(),\n  onFootLeave: eventProp<(payload: TableFootPayload) => void>(),\n  onFootClick: eventProp<(payload: TableFootPayload) => void>(),\n  onFootDblclick: eventProp<(payload: TableFootPayload) => void>(),\n  onFootContextmenu: eventProp<(payload: TableFootPayload) => void>()\n})\n\nexport type TableProps = ExtractPropTypes<typeof tableProps>\nexport type TableCProps = ConfigurableProps<\n  TableProps,\n  'columns' | 'data' | 'currentPage' | 'summaries'\n>\n\nexport const tableColumnProps = buildProps({\n  idKey: [Number, String],\n  name: String,\n  accessor: Function as PropType<Accessor>,\n  fixed: {\n    type: [Boolean, String] as PropType<boolean | 'left' | 'right'>,\n    default: null\n  },\n  class: classProp,\n  style: styleProp,\n  attrs: Object,\n  type: String as PropType<TableColumnType>,\n  width: Number,\n  filter: Object as PropType<TableFilterOptions<any, any>>,\n  sorter: {\n    type: [Boolean, Object] as PropType<boolean | TableSorterOptions<any>>,\n    default: null\n  },\n  renderer: Function as PropType<ColumnRenderFn>,\n  headRenderer: Function as PropType<HeadRenderFn>,\n  filterRenderer: Function as PropType<FilterRenderFn>,\n  order: Number,\n  ellipsis: booleanProp,\n  checkboxSize: sizeProp,\n  disableRow: Function as PropType<(data: Data) => boolean>,\n  truthIndex: booleanProp,\n  orderLabel: Function as PropType<(index: number) => string | number>,\n  meta: Object as PropType<any>,\n  textAlign: String as PropType<TableTextAlign>,\n  headSpan: Number,\n  cellSpan: Function as PropType<ColumnCellSpanFn>,\n  noSummary: booleanProp,\n  summaryRenderer: Function as PropType<ColumnSummaryRenderFn>,\n  indented: booleanProp,\n  formatter: Function as PropType<(value: any) => unknown>\n})\n\nexport type TableColumnProps = ExtractPropTypes<typeof tableColumnProps>\nexport type TableColumnCProps = ConfigurableProps<\n  TableColumnProps,\n  | 'idKey'\n  | 'name'\n  | 'accessor'\n  | 'fixed'\n  | 'type'\n  | 'renderer'\n  | 'headRenderer'\n  | 'order'\n  | 'headSpan'\n  | 'summaryRenderer'\n>\n\nexport const tableColumnGroupProps = buildProps({\n  name: String,\n  fixed: {\n    type: [Boolean, String] as PropType<boolean | 'left' | 'right'>,\n    default: null\n  },\n  order: Number,\n  ellipsis: booleanProp,\n  textAlign: String as PropType<TableTextAlign>,\n  renderer: Function as PropType<() => any>,\n  children: Array as PropType<TableColumnRawOptions[]>\n})\n\nexport type TableColumnGroupProps = ExtractPropTypes<typeof tableColumnGroupProps>\nexport type TableColumnGroupCProps = ConfigurableProps<TableColumnProps, 'name' | 'fixed' | 'order'>\n\nexport const tableSummaryProps = buildProps({\n  idKey: [Number, String],\n  name: String,\n  class: classProp,\n  style: styleProp,\n  attrs: Object,\n  cellSpan: Function as PropType<SummaryCellSpanFn>,\n  order: Number,\n  above: booleanProp,\n  meta: Object as PropType<any>,\n  renderer: Function as PropType<SummaryRenderFn>\n})\n\nexport type TableSummaryProps = ExtractPropTypes<typeof tableSummaryProps>\nexport type TableSummaryCProps = ConfigurableProps<\n  TableSummaryProps,\n  'idKey' | 'name' | 'renderer' | 'colSpan' | 'order' | 'above'\n>\n", "import type { InjectionKey, Slots } from 'vue'\nimport type { ClassType, ComponentSize, LocaleConfig, StyleType } from '@vexip-ui/config'\nimport type { BITree } from '@vexip-ui/utils'\nimport type { TooltipTheme } from '@/components/tooltip'\nimport type { TableStore } from './store'\n\nexport type Key = string | number | symbol\nexport type Data = any\n\nexport type MouseEventType = 'Enter' | 'Leave' | 'Click' | 'Dblclick' | 'Contextmenu'\nexport type MoveEventType = 'Start' | 'Move' | 'End'\n\nexport type TableIconName = 'filter' | 'asc' | 'desc' | 'dragger' | 'expand' | 'plus' | 'minus'\nexport type TableRowPropFn<P = any> = (data: Data, index: number) => P\nexport type TableRowDropType = 'before' | 'after' | 'inner'\nexport type TableTextAlign = 'left' | 'center' | 'right'\nexport type TableColumnType = 'order' | 'selection' | 'expand' | 'drag'\nexport type TableColResizeType = 'lazy' | 'responsive'\n\nexport type TableIcons = Partial<Record<TableIconName, Record<string, any> | (() => any)>>\n\nexport const enum DropType {\n  BEFORE = 'before',\n  INNER = 'inner',\n  AFTER = 'after'\n}\n\nexport interface CellSpanResult {\n  colSpan?: number,\n  rowSpan?: number\n}\n\nexport interface TableKeyConfig {\n  id?: string,\n  children?: string,\n  checked?: string,\n  height?: string,\n  expanded?: string,\n  treeExpanded?: string\n}\n\nexport type Accessor<D = Data, Val extends string | number = string | number> = (\n  data: D,\n  index: number\n) => Val\nexport type ExpandRenderFn<D = Data> = (data: {\n  /** @deprecated */\n  leftFixed: number,\n  /** @deprecated */\n  rightFixed: number,\n  row: D,\n  rowIndex: number\n}) => any\nexport type ColumnCellSpanFn<D = Data> = (data: {\n  row: D,\n  index: number,\n  fixed?: 'left' | 'right'\n}) => CellSpanResult | void\nexport type SummaryCellSpanFn<D = Data, Val extends string | number = string | number> = (data: {\n  column: TableColumnOptions<D, Val>,\n  index: number,\n  fixed?: 'left' | 'right'\n}) => CellSpanResult | void\n\nexport type TableFilterOptions<D = Data, Val extends string | number = string | number> =\n  | {\n    able?: boolean,\n    custom?: false,\n    options?: (string | { value: Val, label?: string, active?: boolean })[],\n    multiple?: false,\n    active?: null | Val,\n    method?: null | ((active: Val, data: D) => boolean),\n    meta?: any\n  }\n  | {\n    able?: boolean,\n    custom?: false,\n    options?: (string | { value: Val, label?: string, active?: boolean })[],\n    multiple: true,\n    active?: null | Val[],\n    method?: null | ((active: Val[], data: D) => boolean),\n    meta?: any\n  }\n  | {\n    able?: boolean,\n    custom: true,\n    options?: never,\n    multiple?: false,\n    active?: null | Val | Val[],\n    method?: null | ((active: any, data: D) => boolean),\n    meta?: any\n  }\n\nexport interface ParsedFilterOptions extends Omit<Required<TableFilterOptions>, 'options'> {\n  options: { value: string | number, label: string, active: boolean }[]\n}\n\nexport interface TableSorterOptions<D = Data> {\n  able?: boolean,\n  type?: null | 'asc' | 'desc',\n  order?: number, // 优先级\n  method?: null | ((prev: D, next: D) => number)\n}\n\nexport type ParsedTableSorterOptions = Required<TableSorterOptions>\n\nexport interface TableSummaryData {\n  sum: number,\n  min: number,\n  max: number\n}\n\nexport type SummaryRenderFn<D = Data, Val extends string | number = string | number> = (data: {\n  column: TableColumnOptions<D, Val>,\n  index: number,\n  rows: D[],\n  meta: TableSummaryData\n}) => any\n\nexport type ColumnSummaryRenderFn<\n  D = Data,\n  Val extends string | number = string | number\n> = (data: {\n  column: TableColumnOptions<D, Val>,\n  index: number,\n  rows: D[],\n  meta: TableSummaryData,\n  summary: TableSummaryOptions<D, Val>\n}) => any\n\nexport interface TableBaseColumn<D = Data, Val extends string | number = string | number> {\n  key: keyof D,\n  name?: string,\n  type?: never,\n  meta?: any,\n  fixed?: boolean | 'left' | 'right',\n  class?: ClassType,\n  style?: StyleType,\n  attrs?: Record<string, any>,\n  width?: number,\n  filter?: TableFilterOptions<D, Val>,\n  sorter?: boolean | TableSorterOptions<D>,\n  order?: number,\n  ellipsis?: boolean | null,\n  textAlign?: TableTextAlign,\n  headSpan?: number,\n  noSummary?: boolean,\n  indented?: boolean,\n  accessor?: Accessor<D, Val>,\n  formatter?: (value: Val) => unknown,\n  cellSpan?: ColumnCellSpanFn<D>,\n  renderer?: ColumnRenderFn<D, Val>,\n  headRenderer?: HeadRenderFn,\n  filterRenderer?: FilterRenderFn,\n  summaryRenderer?: ColumnSummaryRenderFn<D, Val>\n}\n\nexport interface TableOrderColumn<D = Data, Val extends string | number = string | number>\n  extends Omit<TableBaseColumn<D, Val>, 'key' | 'type' | 'renderer'> {\n  key?: keyof D,\n  type: 'order',\n  truthIndex?: boolean,\n  orderLabel?: (index: number) => string | number\n}\n\nexport interface TableSelectionColumn<D = Data, Val extends string | number = string | number>\n  extends Omit<TableBaseColumn<D, Val>, 'key' | 'type' | 'renderer' | 'headRenderer'> {\n  key?: keyof D,\n  type: 'selection',\n  checkboxSize?: ComponentSize,\n  disableRow?: (data: Data) => boolean\n}\n\nexport interface TableExpandColumn<D = Data, Val extends string | number = string | number>\n  extends Omit<TableBaseColumn<D, Val>, 'key' | 'type' | 'renderer'> {\n  key?: keyof D,\n  type: 'expand',\n  disableRow?: (data: Data) => boolean,\n  renderer?: ExpandRenderFn<D>\n}\n\nexport interface TableDragColumn<D = Data, Val extends string | number = string | number>\n  extends Omit<TableBaseColumn<D, Val>, 'key' | 'type' | 'renderer'> {\n  key?: keyof D,\n  type: 'drag',\n  disableRow?: (data: Data) => boolean\n}\n\nexport type TableTypeColumn<D = Data, Val extends string | number = string | number> =\n  | TableOrderColumn<D, Val>\n  | TableSelectionColumn<D, Val>\n  | TableExpandColumn<D, Val>\n  | TableDragColumn<D, Val>\nexport type TableColumnOptions<D = Data, Val extends string | number = string | number> =\n  | TableBaseColumn<D, Val>\n  | TableTypeColumn<D, Val>\n\nexport type ColumnWithKey<\n  D = Data,\n  Val extends string | number = string | number\n> = TableColumnOptions<D, Val> & {\n  key: Key,\n  rowSpan: number,\n  /** @internal */\n  index: number,\n  /** @internal */\n  colIndex: number,\n  /** @internal */\n  first?: boolean,\n  /** @internal */\n  last?: boolean\n}\n\nexport interface TableColumnGroupOptions {\n  name?: string,\n  fixed?: boolean | 'left' | 'right',\n  order?: number,\n  ellipsis?: boolean,\n  textAlign?: TableTextAlign,\n  renderer?: () => any,\n  children: TableColumnOptions<any, any>[]\n}\nexport interface ColumnGroupWithKey extends TableColumnGroupOptions {\n  key: symbol,\n  headSpan: number,\n  rowSpan: number,\n  /** @internal */\n  colIndex: number,\n  /** @internal */\n  last?: boolean\n}\n\nexport type ColumnRenderFn<D = Data, Val extends string | number = string | number> = (data: {\n  row: D,\n  rowIndex: number,\n  column: TableBaseColumn<D, Val>,\n  columnIndex: number\n}) => any\nexport type HeadRenderFn<D = Data, Val extends string | number = string | number> = (data: {\n  column: TableColumnOptions<D, Val>,\n  index: number\n}) => any\nexport type FilterRenderFn<D = Data, Val extends string | number = string | number> = (data: {\n  column: TableColumnOptions<D, Val>,\n  index: number,\n  filter: Required<TableFilterOptions<D, Val>>,\n  handleFilter: (active: any) => void\n}) => any\n\nexport type TableCellSpanFn<D = Data, Val extends string | number = string | number> = (data: {\n  row: D,\n  rowIndex: number,\n  column: TableColumnOptions<D, Val>,\n  columnIndex: number,\n  fixed?: 'left' | 'right'\n}) => CellSpanResult | undefined\n\nexport type TableCellPropFn<D = Data, P = any> = (data: {\n  row: D,\n  rowIndex: number,\n  column: ColumnWithKey,\n  columnIndex: number\n}) => P\nexport type TableHeadPropFn<P = any> = (data: {\n  column: ColumnWithKey,\n  index: number,\n  rowIndex: number\n}) => P\nexport type TableFootPropFn<P = any> = (data: {\n  column: ColumnWithKey,\n  columnIndex: number,\n  summary: SummaryWithKey,\n  summaryIndex: number\n}) => P\n\nexport type ColumnProfile<D = Data, Val extends string | number = string | number> = Pick<\n  ColumnWithKey<D, Val>,\n  'name' | 'key' | 'meta'\n>\nexport type TableFilterProfile<\n  D = Data,\n  Val extends string | number = string | number\n> = ColumnProfile<D, Val> & {\n  active: Val | Val[]\n}\nexport type TableSorterProfile<\n  D = Data,\n  Val extends string | number = string | number\n> = ColumnProfile<D, Val> & {\n  type: 'asc' | 'desc',\n  order: number\n}\n\nexport interface TableSummaryOptions<D = Data, Val extends string | number = string | number> {\n  name: string,\n  key: keyof D,\n  class?: ClassType,\n  style?: StyleType,\n  attrs?: Record<string, any>,\n  order?: number,\n  above?: boolean,\n  meta?: Record<any, any>,\n  cellSpan?: SummaryCellSpanFn<D, Val>,\n  renderer?: SummaryRenderFn<D, Val>\n}\n\nexport type SummaryWithKey<\n  D = Data,\n  Val extends string | number = string | number\n> = TableSummaryOptions<D, Val> & { key: Key }\n\n/** @internal */\nexport interface TableRowState {\n  key: Key,\n  index: number,\n  hidden: boolean,\n  hover: boolean,\n  checked: boolean,\n  height: number,\n  // borderHeight: number,\n  expanded: boolean,\n  expandHeight: number,\n  parent?: Key,\n  children: TableRowState[],\n  depth: number,\n  treeExpanded: boolean,\n  partial: boolean,\n  dragging: boolean,\n  listIndex: number,\n  cellHeights: Record<Key, number>,\n  last: boolean,\n  expandAnimate: boolean,\n  data: Data\n}\n\nexport interface StoreOptions {\n  columns: TableColumnRawOptions[],\n  summaries: TableSummaryOptions[],\n  data: Data[],\n  dataKey: string,\n  rowClass: ClassType | TableRowPropFn<ClassType>,\n  rowStyle: StyleType | TableRowPropFn<StyleType>,\n  rowAttrs: Record<string, any> | TableRowPropFn<Record<string, any>>,\n  cellClass: ClassType | TableCellPropFn<ClassType>,\n  cellStyle: StyleType | TableCellPropFn<StyleType>,\n  cellAttrs: Record<string, any> | TableCellPropFn<Record<string, any>>,\n  headClass: ClassType | TableHeadPropFn<ClassType>,\n  headStyle: StyleType | TableHeadPropFn<StyleType>,\n  headAttrs: Record<string, any> | TableHeadPropFn<Record<string, any>>,\n  footClass: ClassType | TableFootPropFn<ClassType>,\n  footStyle: StyleType | TableFootPropFn<StyleType>,\n  footAttrs: Record<string, any> | TableFootPropFn<Record<string, any>>,\n  border: boolean,\n  stripe: boolean,\n  highlight: boolean,\n  currentPage: number,\n  pageSize: number,\n  rowHeight: number,\n  rowMinHeight: number,\n  virtual: boolean,\n  rowDraggable: boolean,\n  locale: LocaleConfig['table'],\n  tooltipTheme: TooltipTheme,\n  tooltipWidth: number | string,\n  singleSorter: boolean,\n  singleFilter: boolean,\n  customSorter: boolean,\n  customFilter: boolean,\n  keyConfig: Required<TableKeyConfig>,\n  disabledTree: boolean,\n  noCascaded: boolean,\n  colResizable: false | TableColResizeType,\n  expandRenderer: ExpandRenderFn | null,\n  cellSpan: TableCellSpanFn | null,\n  sidePadding: number[],\n  borderWidth: number,\n  dataFilter: (data: Data) => boolean,\n  ellipsis: boolean\n}\n\nexport type TableColumnRawOptions = TableColumnOptions<any, any> | TableColumnGroupOptions\nexport type ColumnRawWithKey = ColumnGroupWithKey | ColumnWithKey\n\nexport interface StoreState extends StoreOptions {\n  columns: ColumnWithKey[],\n  normalColumns: ColumnWithKey[],\n  allColumns: ColumnRawWithKey[][],\n  summaries: SummaryWithKey[],\n  rowData: TableRowState[],\n  treeRowData: TableRowState[],\n  width: number,\n  rightFixedColumns: ColumnWithKey[],\n  leftFixedColumns: ColumnWithKey[],\n  aboveSummaries: SummaryWithKey[],\n  belowSummaries: SummaryWithKey[],\n  columnMap: Map<Key, ColumnRawWithKey>,\n  rowMap: Map<Key, TableRowState>,\n  summaryMap: Map<Key, SummaryWithKey>,\n  idMaps: WeakMap<Data, Key>,\n  checkedAll: boolean,\n  partial: boolean,\n  widths: Map<Key, number>,\n  sorters: Map<Key, ParsedTableSorterOptions>,\n  filters: Map<Key, ParsedFilterOptions>,\n  resized: Set<Key>,\n  bodyYScroll: number,\n  bodyXScroll: number,\n  padTop: number,\n  startRow: number,\n  endRow: number,\n  dragging: boolean,\n  heightBITree: BITree,\n  virtualData: TableRowState[],\n  totalHeight: number,\n  colResizing: boolean,\n  resizeLeft: number,\n  cellSpanMap: Map<'left' | 'default' | 'right', Map<string, Required<CellSpanResult>>>,\n  collapseMap: Map<'left' | 'default' | 'right', Map<string, Set<string>>>,\n  locked: boolean,\n  barScrolling: boolean,\n  heightTrigger: number\n}\n\nexport interface TableRowInstance {\n  el?: HTMLElement | null,\n  row: TableRowState\n}\n\nexport interface TableRowPayload {\n  row: Data,\n  key: Key,\n  index: number,\n  event: Event,\n  checked?: boolean,\n  expanded?: boolean\n}\n\nexport interface TableCellPayload {\n  row: Data,\n  key: Key,\n  rowIndex: number,\n  column: TableColumnOptions,\n  columnIndex: number,\n  event: Event\n}\n\nexport interface TableHeadPayload {\n  column: TableColumnOptions,\n  index: number,\n  event: Event\n}\n\nexport interface TableColResizePayload extends TableHeadPayload {\n  width: number\n}\n\nexport interface TableFootPayload {\n  column: TableColumnOptions,\n  columnIndex: number,\n  summary: TableSummaryOptions,\n  summaryIndex: number,\n  event: Event\n}\n\nexport interface TableActions {\n  increaseColumn(column: TableColumnRawOptions): void,\n  decreaseColumn(column: TableColumnRawOptions): void,\n  increaseSummary(column: TableSummaryOptions): void,\n  decreaseSummary(column: TableSummaryOptions): void,\n  getTableElement(): HTMLElement | undefined,\n  refreshXScroll(): void,\n  emitRowCheck(payload: TableRowPayload & { checked: boolean }): void,\n  emitAllRowCheck(checked: boolean, partial: boolean): void,\n  emitRowExpand(payload: TableRowPayload & { expanded: boolean }): void,\n  emitRowTreeExpand(payload: TableRowPayload & { expanded: boolean }): void,\n  emitRowFilter(): void,\n  emitRowSort(): void,\n  handleRowDragStart(rowInstance: TableRowInstance, event: DragEvent): void,\n  handleRowDragOver(rowInstance: TableRowInstance, event: DragEvent): void,\n  handleRowDrop(rowInstance: TableRowInstance, event: DragEvent): void,\n  handleRowDragEnd(event: DragEvent): void,\n  emitRowEvent(type: MouseEventType, payload: TableRowPayload): void,\n  emitCellEvent(type: MouseEventType, payload: TableCellPayload): void,\n  emitHeadEvent(type: MouseEventType, payload: TableHeadPayload): void,\n  emitFootEvent(type: MouseEventType, payload: TableFootPayload): void,\n  emitColResize(type: MoveEventType, payload: TableColResizePayload): void,\n  hasIcon(name: TableIconName): boolean,\n  getIcon(name: TableIconName): TableIcons[TableIconName],\n  renderTableSlot(payload: { name: string }): any,\n  runInLocked(handler?: (...args: any[]) => any, delay?: number): Promise<void>,\n  updateColumns(): void,\n  setColumnProp(key: Key, prop: string, value: any): void,\n  updateSummaries(): void,\n  setSummaryProp(key: Key, prop: string, value: any): void\n}\n\nexport interface ColumnGroupActions {\n  increaseColumn(column: TableColumnRawOptions): void,\n  decreaseColumn(column: TableColumnRawOptions): void\n}\n\nexport const DEFAULT_KEY_FIELD = 'id'\n/**\n * 表格状态管理\n */\nexport const TABLE_STORE: InjectionKey<TableStore> = Symbol('TABLE_STORE')\n/**\n * 表格组件的顶层 Api\n */\nexport const TABLE_ACTIONS: InjectionKey<TableActions> = Symbol('TABLE_ACTIONS')\nexport const TABLE_SLOTS: InjectionKey<Slots> = Symbol('TABLE_SLOTS')\nexport const TABLE_HEAD_PREFIX = '__vxp-table-head-'\nexport const TABLE_FOOT_PREFIX = '__vxp-table-foot-'\n\nexport const COLUMN_GROUP_ACTIONS: InjectionKey<ColumnGroupActions> = Symbol('COLUMN_GROUP_ACTIONS')\n\nexport const columnTypes: TableColumnType[] = ['order', 'selection', 'expand', 'drag']\n\nexport const noopFormatter = (v: any) => v\n", "import {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  reactive,\n  renderSlot,\n  watch\n} from 'vue'\n\nimport { createSizeProp, useProps } from '@vexip-ui/config'\nimport { isNull } from '@vexip-ui/utils'\nimport { tableColumnProps } from './props'\nimport { COLUMN_GROUP_ACTIONS, TABLE_ACTIONS, columnTypes, noopFormatter } from './symbol'\n\nimport type { ColumnWithKey, Data, TableRowState, TableTextAlign } from './symbol'\n\ntype ColumnPropKey = keyof typeof tableColumnProps\n\nconst propKeys = Object.keys(tableColumnProps) as ColumnPropKey[]\nconst aliases: Partial<Record<ColumnPropKey, string>> = {\n  idKey: 'key'\n}\nconst ignoredProps: ColumnPropKey[] = [\n  'renderer',\n  'headRenderer',\n  'filterRenderer',\n  'summaryRenderer'\n]\nconst triggerProps: ColumnPropKey[] = [\n  'idKey',\n  'fixed',\n  'type',\n  'width',\n  'sorter',\n  'order',\n  'orderLabel',\n  'disableRow',\n  'headSpan',\n  'cellSpan'\n]\nconst aligns: TableTextAlign[] = ['left', 'center', 'right']\n\nconst funcProp = {\n  default: null,\n  isFunc: true,\n  static: true\n}\n\nexport default defineComponent({\n  name: 'TableColumn',\n  inheritAttrs: false,\n  props: tableColumnProps,\n  setup(_props, { slots }) {\n    const props = useProps('tableColumn', _props, {\n      idKey: {\n        default: null,\n        validator: value => !isNull(value),\n        static: true\n      },\n      name: {\n        default: '',\n        static: true\n      },\n      accessor: {\n        default: null,\n        isFunc: true,\n        static: true\n      },\n      fixed: {\n        default: false,\n        static: true\n      },\n      class: null,\n      style: null,\n      attrs: null,\n      type: {\n        default: null,\n        validator: value => columnTypes.includes(value),\n        static: true\n      },\n      width: null,\n      filter: null,\n      sorter: false,\n      renderer: funcProp,\n      headRenderer: funcProp,\n      filterRenderer: funcProp,\n      order: {\n        default: 0,\n        static: true\n      },\n      ellipsis: null,\n      checkboxSize: createSizeProp(),\n      disableRow: {\n        default: null,\n        isFunc: true\n      },\n      truthIndex: false,\n      orderLabel: {\n        default: null,\n        isFunc: true\n      },\n      meta: null,\n      textAlign: {\n        default: 'left',\n        validator: value => aligns.includes(value)\n      },\n      headSpan: {\n        default: 1,\n        static: true\n      },\n      cellSpan: funcProp,\n      noSummary: false,\n      summaryRenderer: funcProp,\n      indented: false,\n      formatter: {\n        default: null,\n        isFunc: true\n      }\n    })\n\n    const tableAction = inject(TABLE_ACTIONS, null)\n    const parentActions = inject(COLUMN_GROUP_ACTIONS, null)\n    const options = reactive({}) as ColumnWithKey\n\n    for (const key of propKeys) {\n      if (ignoredProps.includes(key)) continue\n\n      const aliasKey = (aliases[key] || key) as keyof ColumnWithKey\n\n      ;(options[aliasKey] as any) = props[key]\n\n      if (key === 'idKey') {\n        const update = (value: string | number) => {\n          if (isNull(value) && props.type) {\n            ;(options[aliasKey] as any) = value = `__vxp_${props.type}`\n          } else {\n            ;(options[aliasKey] as any) = value\n          }\n        }\n\n        update(props.idKey)\n        watch(\n          () => props.idKey,\n          value => {\n            update(value)\n            tableAction?.updateColumns()\n          }\n        )\n      } else if (key === 'filter') {\n        const filterWithoutMeta = computed(() => {\n          if (props.filter) {\n            const { meta, ...filter } = props.filter\n            return filter\n          }\n\n          return props.filter\n        })\n\n        watch(\n          filterWithoutMeta,\n          () => {\n            options.filter = props.filter\n            tableAction?.updateColumns()\n          },\n          { deep: true }\n        )\n      } else {\n        const trigger = triggerProps.includes(key)\n\n        watch(\n          () => props[key],\n          value => {\n            ;(options[aliasKey] as any) = value\n            trigger\n              ? tableAction?.updateColumns()\n              : tableAction?.setColumnProp(options.key, key, value)\n          }\n        )\n      }\n    }\n\n    watch(() => props.renderer, setRenderer)\n    watch(() => props.headRenderer, setHeadRenderer)\n    watch(() => props.filterRenderer, setFilterRenderer)\n    watch(() => props.summaryRenderer, setSummaryRenderer)\n\n    setRenderer()\n    setHeadRenderer()\n    setFilterRenderer()\n    setSummaryRenderer()\n\n    if (parentActions) {\n      parentActions.increaseColumn(options)\n\n      onBeforeUnmount(() => {\n        parentActions.decreaseColumn(options)\n      })\n    } else {\n      tableAction?.increaseColumn(options)\n\n      onBeforeUnmount(() => {\n        tableAction?.decreaseColumn(options)\n      })\n    }\n\n    // TODO: 在动态列时会触发无限 watch，初步估计是重置单元格合并状态导致的\n    // onBeforeUpdate(() => {\n    //   setRenderer()\n    //   setHeadRenderer()\n    //   setFilterRenderer()\n    // }\n\n    function setRenderer() {\n      if (options.type && options.type !== 'expand') {\n        ;(options as any).renderer = undefined\n        return\n      }\n\n      options.renderer = (data: any) => {\n        if (typeof slots.default === 'function') {\n          return renderSlot(slots, 'default', data)\n        }\n\n        if (typeof props.renderer === 'function') {\n          return props.renderer(data)\n        }\n\n        if (options.type === 'expand') {\n          return ''\n        }\n\n        const row = data.row\n        const rowIndex = data.rowIndex as number\n        const formatter =\n          typeof options.formatter === 'function' ? options.formatter : noopFormatter\n\n        const result = formatter(\n          typeof props.accessor === 'function'\n            ? props.accessor(row as Data, rowIndex)\n            : (row as TableRowState)[options.key as unknown as keyof TableRowState]\n        )\n\n        return isNull(result) ? '' : String(result)\n      }\n    }\n\n    function setHeadRenderer() {\n      if (options.type === 'selection') {\n        ;(options as any).renderer = undefined\n        return\n      }\n\n      options.headRenderer = data => {\n        if (typeof slots.head === 'function') {\n          return renderSlot(slots, 'head', data)\n        }\n\n        if (typeof props.headRenderer === 'function') {\n          return props.headRenderer(data)\n        }\n\n        return props.name\n      }\n    }\n\n    function setFilterRenderer() {\n      if (typeof slots.filter === 'function' || typeof props.filterRenderer === 'function') {\n        options.filterRenderer = data => {\n          if (typeof slots.filter === 'function') {\n            return renderSlot(slots, 'filter', data)\n          }\n\n          return props.filterRenderer(data)\n        }\n      } else {\n        options.filterRenderer = undefined\n      }\n    }\n\n    function setSummaryRenderer() {\n      if (typeof slots.summary === 'function' || typeof props.summaryRenderer === 'function') {\n        options.summaryRenderer = data => {\n          if (typeof slots.summary === 'function') {\n            return renderSlot(slots, 'summary', data)\n          }\n\n          if (typeof props.summaryRenderer === 'function') {\n            return props.summaryRenderer(data)\n          }\n\n          return ''\n        }\n      } else {\n        options.summaryRenderer = undefined\n      }\n    }\n\n    return () => null\n  }\n})\n", "import {\n  computed,\n  defineComponent,\n  inject,\n  onBeforeUnmount,\n  provide,\n  reactive,\n  renderSlot,\n  watch\n} from 'vue'\n\nimport TableColumn from './table-column'\nimport { useProps } from '@vexip-ui/config'\nimport { tableColumnGroupProps } from './props'\nimport { COLUMN_GROUP_ACTIONS, TABLE_ACTIONS } from './symbol'\n\nimport type { ColumnGroupWithKey, TableColumnOptions } from './symbol'\n\ntype GroupPropKey = keyof typeof tableColumnGroupProps\n\nconst propKeys = Object.keys(tableColumnGroupProps) as GroupPropKey[]\nconst ignoredProps: GroupPropKey[] = ['renderer', 'children']\nconst triggerProps: GroupPropKey[] = ['fixed', 'order']\n\nconst TableColumnGroup = defineComponent({\n  name: 'TableColumnGroup',\n  inheritAttrs: false,\n  props: tableColumnGroupProps,\n  setup(_props, { slots }) {\n    const props = useProps('tableColumn', _props, {\n      name: {\n        default: '',\n        static: true\n      },\n      fixed: {\n        default: false,\n        static: true\n      },\n      order: {\n        default: 0,\n        static: true\n      },\n      ellipsis: null,\n      textAlign: 'center',\n      renderer: {\n        default: null,\n        isFunc: true,\n        static: true\n      },\n      children: {\n        default: () => [],\n        static: true\n      }\n    })\n    const tableAction = inject(TABLE_ACTIONS, null)\n    const parentActions = inject(COLUMN_GROUP_ACTIONS, null)\n\n    const columns = reactive(new Set<TableColumnOptions>())\n    const children = computed(() => [...columns])\n    const options = reactive({ children }) as ColumnGroupWithKey\n\n    options.key = Symbol('TableColumnGroup')\n\n    for (const key of propKeys) {\n      if (ignoredProps.includes(key)) continue\n      ;(options[key as keyof ColumnGroupWithKey] as any) = props[key]\n\n      const trigger = triggerProps.includes(key)\n\n      watch(\n        () => props[key],\n        value => {\n          ;(options[key as keyof ColumnGroupWithKey] as any) = value\n          trigger\n            ? tableAction?.updateColumns()\n            : tableAction?.setColumnProp(options.key, key, value)\n        }\n      )\n    }\n\n    watch(() => props.renderer, setRenderer, { immediate: true })\n\n    provide(COLUMN_GROUP_ACTIONS, {\n      increaseColumn,\n      decreaseColumn\n    })\n\n    if (parentActions) {\n      parentActions.increaseColumn(options)\n\n      onBeforeUnmount(() => {\n        parentActions.decreaseColumn(options)\n      })\n    } else {\n      tableAction?.increaseColumn(options)\n\n      onBeforeUnmount(() => {\n        tableAction?.decreaseColumn(options)\n      })\n    }\n\n    function increaseColumn(column: TableColumnOptions) {\n      columns.add(column)\n    }\n\n    function decreaseColumn(column: TableColumnOptions) {\n      columns.delete(column)\n    }\n\n    function setRenderer() {\n      options.renderer = () => {\n        if (typeof slots.head === 'function') {\n          return renderSlot(slots, 'head')\n        }\n\n        if (typeof props.renderer === 'function') {\n          return props.renderer()\n        }\n\n        return props.name\n      }\n    }\n\n    function renderChildren() {\n      return props.children.map(child => {\n        if ('children' in child) {\n          return <TableColumnGroup {...child}></TableColumnGroup>\n        }\n\n        const { key, ...others } = child\n\n        return <TableColumn {...others} id-key={key}></TableColumn>\n      })\n    }\n\n    return () => [renderSlot(slots, 'default'), ...renderChildren()]\n  }\n})\n\nexport default TableColumnGroup\n", "import { defineComponent, inject, onBeforeUnmount, reactive, renderSlot, watch } from 'vue'\n\nimport { useProps } from '@vexip-ui/config'\nimport { isNull } from '@vexip-ui/utils'\nimport { tableSummaryProps } from './props'\nimport { TABLE_ACTIONS } from './symbol'\n\nimport type { SummaryWithKey } from './symbol'\n\ntype SummaryPropKey = keyof typeof tableSummaryProps\n\nconst propKeys = Object.keys(tableSummaryProps) as SummaryPropKey[]\nconst aliases: Partial<Record<SummaryPropKey, string>> = {\n  idKey: 'key'\n}\nconst ignoredProps: SummaryPropKey[] = ['renderer']\nconst triggerProps: SummaryPropKey[] = ['idKey', 'cellSpan', 'order', 'above']\n\nconst funcProp = {\n  default: null,\n  isFunc: true,\n  static: true\n}\n\nexport default defineComponent({\n  name: 'TableSummary',\n  props: tableSummaryProps,\n  setup(_props, { slots }) {\n    const props = useProps('tableSummary', _props, {\n      idKey: {\n        default: null,\n        validator: value => !isNull(value),\n        static: true\n      },\n      class: null,\n      style: null,\n      attrs: null,\n      cellSpan: funcProp,\n      order: {\n        default: 0,\n        static: true\n      },\n      above: {\n        default: false,\n        static: true\n      },\n      meta: null,\n      renderer: funcProp\n    })\n\n    const tableAction = inject(TABLE_ACTIONS, null)\n    const options = reactive({}) as SummaryWithKey\n\n    for (const key of propKeys) {\n      if (ignoredProps.includes(key)) continue\n\n      const aliasKey = (aliases[key] || key) as keyof SummaryWithKey\n      const trigger = triggerProps.includes(key)\n\n      ;(options[aliasKey] as any) = props[key]\n\n      watch(\n        () => props[key],\n        value => {\n          ;(options[aliasKey] as any) = value\n          trigger\n            ? tableAction?.updateSummaries()\n            : tableAction?.setSummaryProp(options.key, key, value)\n        }\n      )\n    }\n\n    watch(() => props.renderer, setRenderer)\n\n    setRenderer()\n    tableAction?.increaseSummary(options)\n\n    onBeforeUnmount(() => {\n      tableAction?.decreaseSummary(options)\n    })\n\n    function setRenderer() {\n      options.renderer = data => {\n        if (typeof data.column.summaryRenderer === 'function') {\n          return data.column.summaryRenderer({\n            ...data,\n            summary: options\n          })\n        }\n\n        if (typeof slots.default === 'function') {\n          return renderSlot(slots, 'default', data)\n        }\n\n        if (typeof props.renderer === 'function') {\n          return props.renderer(data)\n        }\n\n        return ''\n      }\n    }\n\n    return () => null\n  }\n})\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Renderer } from '@/components/renderer'\n\nimport { computed, inject } from 'vue'\n\nimport { isFunction } from '@vexip-ui/utils'\nimport { TABLE_ACTIONS, TABLE_SLOTS } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { TableIconName } from './symbol'\n\ndefineOptions({ name: 'TableIcon' })\n\nconst props = defineProps({\n  name: {\n    type: String as PropType<TableIconName>,\n    required: true\n  },\n  origin: {\n    type: Object,\n    default: null\n  }\n})\n\nconst tableActions = inject(TABLE_ACTIONS)!\nconst tableSlots = inject(TABLE_SLOTS)!\n\nconst customIcon = computed(() => tableActions.getIcon(props.name))\n</script>\n\n<template>\n  <Renderer\n    v-if=\"isFunction(tableSlots[`icon-${name}`])\"\n    :renderer=\"tableActions.renderTableSlot\"\n    :data=\"{ name: `icon-${name}` }\"\n  ></Renderer>\n  <Icon v-else-if=\"tableActions.hasIcon(name)\" :icon=\"customIcon\"></Icon>\n  <Icon v-else v-bind=\"origin\"></Icon>\n</template>\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { Checkbox } from '@/components/checkbox'\nimport { Ellipsis } from '@/components/ellipsis'\nimport { Renderer } from '@/components/renderer'\nimport { ResizeObserver } from '@/components/resize-observer'\nimport { Tooltip } from '@/components/tooltip'\n\nimport { computed, inject, ref, toRef } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport TableIcon from './table-icon.vue'\nimport { useMoving, useRtl } from '@vexip-ui/hooks'\nimport { getLast, isFunction, nextFrameOnce } from '@vexip-ui/utils'\nimport { TABLE_ACTIONS, TABLE_HEAD_PREFIX, TABLE_STORE, columnTypes } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { MovingState } from '@vexip-ui/hooks'\nimport type {\n  ColumnWithKey,\n  ParsedFilterOptions,\n  ParsedTableSorterOptions,\n  TableRowState,\n  TableSelectionColumn,\n  TableTypeColumn\n} from './symbol'\n\ndefineOptions({ name: 'TableHeadCell' })\n\nconst props = defineProps({\n  column: {\n    type: Object as PropType<ColumnWithKey>,\n    default: () => ({})\n  },\n  index: {\n    type: Number,\n    default: -1\n  },\n  row: {\n    type: Object as PropType<TableRowState>,\n    default: () => ({})\n  },\n  rowIndex: {\n    type: Number,\n    default: 0\n  },\n  fixed: {\n    type: String as PropType<'left' | 'right' | undefined>,\n    default: null\n  }\n})\n\nconst { state, getters, mutations } = inject(TABLE_STORE)!\nconst tableActions = inject(TABLE_ACTIONS)!\n// const tableSlots = inject(TABLE_SLOTS)!\n\nconst nh = useNameHelper('table')\nconst locale = toRef(state, 'locale')\nconst icons = useIcons()\nconst { isRtl } = useRtl()\n\nconst filterVisible = ref(false)\nconst resizable = toRef(state, 'colResizable')\nconst resizing = computed(() => state.colResizing)\n\nconst wrapper = ref<HTMLElement>()\n\nconst isGroup = computed(() => mutations.isGroupColumn(props.column))\nconst columns = computed(() => {\n  return props.fixed === 'left'\n    ? state.leftFixedColumns\n    : props.fixed === 'right'\n      ? state.rightFixedColumns\n      : state.normalColumns\n})\nconst cellSpan = computed(() => {\n  return (\n    state.cellSpanMap.get(props.fixed || 'default')!.get(`h${props.rowIndex},${props.index}`) || {\n      colSpan: 1,\n      rowSpan: 1\n    }\n  )\n})\nconst inLast = computed(() => {\n  return isGroup.value\n    ? props.column.last\n    : props.column.index + cellSpan.value.colSpan >= state.columns.length\n})\n\nconst minWidth = 10\n\nlet currentWidth = 0\n\nfunction processColResize(payload: MovingState, lazy = false) {\n  const width = Math.max(currentWidth + (payload.isRtl ? -1 : 1) * payload.deltaX, minWidth)\n\n  !lazy &&\n    mutations.handleColumnResize(\n      state.columns\n        .slice(props.column.index, props.column.index + cellSpan.value.colSpan)\n        .map(column => column.key),\n      width\n    )\n\n  return width\n}\n\nconst { target: resizer } = useMoving({\n  capture: false,\n  onStart: (payload, event) => {\n    if (!resizable.value || resizing.value || isGroup.value) return false\n\n    const table = tableActions.getTableElement()\n\n    if (!table || !wrapper.value) return false\n\n    payload.xStart = payload.clientX - table.getBoundingClientRect().left\n    payload.isRtl = isRtl.value\n    currentWidth = wrapper.value.getBoundingClientRect().width\n\n    mutations.setColumnResizing(true)\n    mutations.setResizeLeft(payload.xStart)\n    tableActions.emitColResize('Start', { ...buildEventPayload(event), width: currentWidth })\n  },\n  onMove: (payload, event) => {\n    payload.xEnd = Math.max(payload.xStart - currentWidth + minWidth, payload.xEnd)\n\n    mutations.setResizeLeft(payload.xEnd)\n    tableActions.emitColResize('Move', {\n      ...buildEventPayload(event),\n      width: processColResize(payload, state.colResizable !== 'responsive')\n    })\n  },\n  onEnd: (payload, event) => {\n    mutations.setColumnResizing(false)\n    tableActions.emitColResize('End', {\n      ...buildEventPayload(event),\n      width: processColResize(payload)\n    })\n  }\n})\n\nconst typed = computed(() => columnTypes.includes((props.column as TableTypeColumn).type))\nconst className = computed(() => {\n  let customClass = null\n\n  if (typeof state.headClass === 'function') {\n    customClass = state.headClass({\n      column: props.column,\n      index: props.column.colIndex,\n      rowIndex: props.rowIndex\n    })\n  } else {\n    customClass = state.headClass\n  }\n\n  return [\n    nh.be('head-cell'),\n    {\n      [nh.bem('head-cell', 'group')]: isGroup.value,\n      [nh.bem('head-cell', 'typed')]: typed.value,\n      [nh.bem('head-cell', 'center')]: typed.value || props.column.textAlign === 'center',\n      [nh.bem('head-cell', 'right')]: props.column.textAlign === 'right',\n      [nh.bem('head-cell', 'last')]: inLast.value\n    },\n    props.column.class,\n    customClass\n  ]\n})\nconst customStyle = computed(() => {\n  if (typeof state.headStyle === 'function') {\n    return state.headStyle({\n      column: props.column,\n      index: props.column.colIndex,\n      rowIndex: props.rowIndex\n    })\n  }\n\n  return state.headStyle\n})\nconst style = computed(() => {\n  const totalWidths =\n    props.fixed === 'left'\n      ? getters.leftFixedWidths\n      : props.fixed === 'right'\n        ? getters.rightFixedWidths\n        : getters.normalWidths\n  const { colSpan, rowSpan } = cellSpan.value\n  const noFixed = !getters.hasFixedColumn\n  const padLeft = noFixed || columns.value[0]?.fixed === 'left' ? state.sidePadding[0] || 0 : 0\n  const padRight =\n    noFixed || getLast(columns.value)?.fixed === 'right' ? state.sidePadding[1] || 0 : 0\n  const width = totalWidths[props.index + colSpan] - totalWidths[props.index]\n\n  let height: number | undefined\n\n  if (rowSpan > 1) {\n    height = 0\n\n    for (let i = 0; i < rowSpan; ++i) {\n      height += state.rowMap.get(`${TABLE_HEAD_PREFIX}${props.rowIndex + i}`)?.height ?? 0\n    }\n  }\n\n  return [\n    props.column.style || '',\n    customStyle.value,\n    {\n      display: !colSpan ? 'none' : undefined,\n      width: `${(props.column.index ? 0 : padLeft) + (inLast.value ? padRight : 0) + width}px`,\n      height: height ? `${height}px` : undefined,\n      visibility: props.column.fixed && !props.fixed ? 'hidden' : undefined,\n      borderRightWidth:\n        !state.border && colSpan > 1 && props.index + colSpan >= totalWidths.length - 1\n          ? 0\n          : undefined,\n      transform: `translate3d(${isRtl.value ? '-' : ''}${\n        (props.column.index ? padLeft : 0) + totalWidths[props.index]\n      }px, 0, 0)`\n    }\n  ]\n})\nconst attrs = computed(() => {\n  let customAttrs: Record<string, any>\n\n  if (typeof state.headAttrs === 'function') {\n    customAttrs = state.headAttrs({\n      column: props.column,\n      index: props.column.colIndex,\n      rowIndex: props.rowIndex\n    })\n  } else {\n    customAttrs = state.headAttrs\n  }\n\n  return { ...(props.column.attrs || {}), ...(customAttrs || {}) }\n})\nconst sorter = computed(() => {\n  return state.sorters.get(props.column.key) || ({} as ParsedTableSorterOptions)\n})\nconst filter = computed(() => {\n  return state.filters.get(props.column.key) || ({} as ParsedFilterOptions)\n})\nconst hasFilterActive = computed(() => {\n  const options = filter.value.options ?? []\n\n  for (let i = 0, len = options.length; i < len; ++i) {\n    if (options[i].active) {\n      return true\n    }\n  }\n\n  return false\n})\nconst checkboxDisabled = computed(() => {\n  if (!isSelection(props.column)) {\n    return false\n  }\n\n  const records = Object.values(getters.disableCheckRows)\n\n  return (\n    getters.processedData.length === records.length &&\n    !Object.values(getters.disableCheckRows).includes(false)\n  )\n})\n\nconst refreshXScroll = () => nextFrameOnce(tableActions.refreshXScroll)\n\nfunction isSelection(column: unknown): column is TableSelectionColumn {\n  return !isGroup.value && (column as TableTypeColumn).type === 'selection'\n}\n\nfunction buildEventPayload(event: Event) {\n  return {\n    column: props.column,\n    index: props.column.colIndex,\n    event\n  }\n}\n\nfunction handleMouseEnter(event: MouseEvent) {\n  tableActions?.emitHeadEvent('Enter', buildEventPayload(event))\n}\n\nfunction handleMouseLeave(event: MouseEvent) {\n  tableActions?.emitHeadEvent('Leave', buildEventPayload(event))\n}\n\nfunction handleClick(event: MouseEvent) {\n  tableActions?.emitHeadEvent('Click', buildEventPayload(event))\n}\n\nfunction handleDblclick(event: MouseEvent) {\n  tableActions?.emitHeadEvent('Dblclick', buildEventPayload(event))\n}\n\nfunction handleContextmenu(event: MouseEvent) {\n  tableActions?.emitHeadEvent('Contextmenu', buildEventPayload(event))\n}\n\nfunction handleSortAsc() {\n  const key = props.column.key\n  const type = sorter.value.type === 'asc' ? null : 'asc'\n\n  mutations.handleSort(key, type)\n  tableActions.emitRowSort()\n}\n\nfunction handleSortDesc() {\n  const key = props.column.key\n  const type = sorter.value.type === 'desc' ? null : 'desc'\n\n  mutations.handleSort(key, type)\n  tableActions.emitRowSort()\n}\n\nfunction handleFilter(value: ParsedFilterOptions['active']) {\n  mutations.handleFilter(props.column.key, value)\n}\n\nfunction handleFilterItemSelect(value: string | number, active: boolean) {\n  mutations.toggleFilterItemActive({\n    key: props.column.key,\n    value,\n    active,\n    disableOthers: true\n  })\n  handleFilter(value)\n  filterVisible.value = false\n  tableActions.emitRowFilter()\n}\n\nfunction handleFilterCheck(value: string | number, checked: boolean) {\n  mutations.toggleFilterItemActive({\n    key: props.column.key,\n    value,\n    active: checked\n  })\n}\n\nfunction handleFilterMultiple() {\n  const options = filter.value.options ?? []\n  const activeValues = []\n\n  for (let i = 0, len = options.length; i < len; ++i) {\n    const option = options[i]\n\n    if (option.active) {\n      activeValues.push(option.value)\n    }\n  }\n\n  handleFilter(activeValues)\n  filterVisible.value = false\n  tableActions.emitRowFilter()\n}\n\nfunction handleResetFilter() {\n  filterVisible.value = false\n  handleFilter(null)\n  mutations.toggleFilterItemActive({\n    key: props.column.key,\n    value: null,\n    disableOthers: true\n  })\n  tableActions.emitRowFilter()\n}\n\nfunction handleCheckAllRow() {\n  mutations.handleCheckAll()\n  tableActions.emitAllRowCheck(state.checkedAll, state.partial)\n}\n\nfunction handleCellResize(entry: ResizeObserverEntry) {\n  mutations.setCellHeight(\n    props.row.key,\n    props.column.key,\n    (entry.borderBoxSize?.[0]?.blockSize ?? entry.contentRect.height) + state.borderWidth\n  )\n}\n</script>\n\n<template>\n  <div\n    v-bind=\"attrs\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"columnheader\"\n    scope=\"col\"\n    :colspan=\"cellSpan.colSpan !== 1 ? cellSpan.colSpan : undefined\"\n    :rowspan=\"cellSpan.rowSpan !== 1 ? cellSpan.rowSpan : undefined\"\n    :style=\"style\"\n    :aria-sort=\"\n      !isGroup && sorter.able\n        ? sorter.type\n          ? sorter.type === 'asc'\n            ? 'ascending'\n            : 'descending'\n          : 'none'\n        : undefined\n    \"\n    @mouseenter=\"handleMouseEnter\"\n    @mouseleave=\"handleMouseLeave\"\n    @click=\"handleClick\"\n    @dblclick=\"handleDblclick\"\n    @contextmenu=\"handleContextmenu\"\n    @transitionend=\"refreshXScroll\"\n  >\n    <div\n      v-if=\"column.index === 0\"\n      :class=\"nh.be('side-pad')\"\n      role=\"none\"\n      aria-hidden\n    ></div>\n    <div v-if=\"isSelection(column)\" :class=\"nh.be('content')\">\n      <Checkbox\n        inherit\n        control\n        :class=\"nh.be('selection')\"\n        :checked=\"state.checkedAll\"\n        :partial=\"state.partial\"\n        :disabled=\"checkboxDisabled\"\n        :size=\"column.checkboxSize || 'default'\"\n        @click.prevent=\"handleCheckAllRow\"\n      ></Checkbox>\n    </div>\n    <ResizeObserver\n      v-else\n      :disabled=\"column.ellipsis ?? state.ellipsis\"\n      :on-resize=\"handleCellResize\"\n    >\n      <span :class=\"nh.be('content')\">\n        <Ellipsis\n          v-if=\"column.ellipsis ?? state.ellipsis\"\n          inherit\n          :class=\"nh.be('ellipsis')\"\n          :tooltip-theme=\"state.tooltipTheme\"\n          :tip-max-width=\"state.tooltipWidth\"\n        >\n          <Renderer\n            v-if=\"isGroup && isFunction((column as any).renderer)\"\n            :renderer=\"(column as any).renderer\"\n          ></Renderer>\n          <Renderer\n            v-else-if=\"isFunction(column.headRenderer)\"\n            :renderer=\"column.headRenderer\"\n            :data=\"{ column, index }\"\n          ></Renderer>\n          <template v-else>\n            {{ column.name }}\n          </template>\n        </Ellipsis>\n        <template v-else>\n          <Renderer\n            v-if=\"isGroup && isFunction((column as any).renderer)\"\n            :renderer=\"(column as any).renderer\"\n          ></Renderer>\n          <Renderer\n            v-else-if=\"isFunction(column.headRenderer)\"\n            :renderer=\"column.headRenderer\"\n            :data=\"{ column, index }\"\n          ></Renderer>\n          <template v-else>\n            {{ column.name }}\n          </template>\n        </template>\n        <template v-if=\"!isGroup\">\n          <div v-if=\"sorter.able\" :class=\"nh.be('sorter')\">\n            <span\n              :class=\"{\n                [nh.bem('sorter', 'asc')]: true,\n                [nh.bem('sorter', 'active')]: sorter.type === 'asc'\n              }\"\n              @click=\"handleSortAsc()\"\n            >\n              <TableIcon name=\"asc\" :origin=\"icons.angleUp\"></TableIcon>\n            </span>\n            <span\n              :class=\"{\n                [nh.bem('sorter', 'desc')]: true,\n                [nh.bem('sorter', 'active')]: sorter.type === 'desc'\n              }\"\n              @click=\"handleSortDesc()\"\n            >\n              <TableIcon name=\"desc\" :origin=\"icons.angleDown\"></TableIcon>\n            </span>\n          </div>\n          <template v-if=\"filter.able\">\n            <Renderer\n              v-if=\"isFunction(column.filterRenderer)\"\n              :renderer=\"column.filterRenderer\"\n              :data=\"{ column, index, filter, handleFilter }\"\n            ></Renderer>\n            <Tooltip\n              v-else\n              v-model:visible=\"filterVisible\"\n              transfer\n              placement=\"bottom\"\n              trigger=\"click\"\n              :class=\"{\n                [nh.be('filter')]: true,\n                [nh.bem('filter', 'visible')]: filterVisible,\n                [nh.bem('filter', 'active')]: filter.active\n              }\"\n              :tip-class=\"{\n                [nh.be('filter-wrapper')]: true,\n                [nh.bs('vars')]: true,\n                [nh.bem('filter-wrapper', 'multiple')]: filter.multiple\n              }\"\n            >\n              <template #trigger>\n                <div :class=\"nh.be('filter-trigger')\">\n                  <TableIcon name=\"filter\" :origin=\"icons.filter\"></TableIcon>\n                </div>\n              </template>\n              <template v-if=\"filter.multiple\" #default>\n                <div vertical :class=\"nh.be('filter-group')\">\n                  <Checkbox\n                    v-for=\"item in filter.options\"\n                    :key=\"item.value\"\n                    inherit\n                    :checked=\"item.active\"\n                    :label=\"item.label\"\n                    :value=\"item.value\"\n                    @change=\"handleFilterCheck(item.value, $event)\"\n                  ></Checkbox>\n                </div>\n                <div :class=\"nh.be('filter-actions')\">\n                  <Button\n                    inherit\n                    text\n                    size=\"small\"\n                    :disabled=\"!hasFilterActive\"\n                    @click=\"handleFilterMultiple()\"\n                  >\n                    {{ locale.filterConfirm }}\n                  </Button>\n                  <Button\n                    inherit\n                    text\n                    size=\"small\"\n                    @click=\"handleResetFilter\"\n                  >\n                    {{ locale.filterReset }}\n                  </Button>\n                </div>\n              </template>\n              <template v-else #default>\n                <div\n                  :class=\"{\n                    [nh.be('filter-item')]: true,\n                    [nh.bem('filter-item', 'active')]: !filter.active\n                  }\"\n                  @click=\"handleResetFilter\"\n                >\n                  {{ locale.filterAll }}\n                </div>\n                <div\n                  v-for=\"item in filter.options\"\n                  :key=\"item.value\"\n                  :class=\"{\n                    [nh.be('filter-item')]: true,\n                    [nh.bem('filter-item', 'active')]: item.active\n                  }\"\n                  @click=\"handleFilterItemSelect(item.value, !item.active)\"\n                >\n                  {{ item.label }}\n                </div>\n              </template>\n            </Tooltip>\n          </template>\n        </template>\n      </span>\n    </ResizeObserver>\n    <div\n      v-if=\"!isGroup && resizable && !typed && !column.last\"\n      ref=\"resizer\"\n      :class=\"nh.be('resizer')\"\n    ></div>\n    <div\n      v-if=\"inLast\"\n      :class=\"[nh.be('side-pad'), nh.bem('side-pad', 'right')]\"\n      role=\"none\"\n      aria-hidden\n    ></div>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Renderer } from '@/components/renderer'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport { computed, inject, nextTick, onMounted, reactive, ref, toRef, watchEffect } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useSetTimeout } from '@vexip-ui/hooks'\nimport { isFunction } from '@vexip-ui/utils'\nimport { TABLE_ACTIONS, TABLE_STORE } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { TableRowState } from './symbol'\n\ndefineOptions({ name: 'TableRow' })\n\nconst props = defineProps({\n  row: {\n    type: Object as PropType<TableRowState>,\n    default: () => ({})\n  },\n  index: {\n    type: Number,\n    default: null\n  },\n  isHead: {\n    type: Boolean,\n    default: false\n  },\n  isFoot: {\n    type: Boolean,\n    default: false\n  },\n  fixed: {\n    type: String as PropType<'left' | 'right' | undefined>,\n    default: null\n  }\n})\n\nconst { state, getters, mutations } = inject(TABLE_STORE)!\nconst tableAction = inject(TABLE_ACTIONS)!\n\nconst nh = useNameHelper('table')\n\nconst { timer } = useSetTimeout()\nconst dragging = ref(false)\nconst isDragOver = ref(false)\n\nconst wrapper = ref<HTMLElement>()\nconst rowEl = ref<HTMLElement>()\nconst expandEl = ref<HTMLElement>()\n\nconst instance = reactive({\n  el: wrapper,\n  row: toRef(props, 'row')\n})\n\nconst rowKey = computed(() => props.row.key)\nconst rowType = computed(() => (props.isHead ? 'head' : props.isFoot ? 'foot' : undefined))\nconst className = computed(() => {\n  let customClass = null\n\n  if (!rowType.value) {\n    if (typeof state.rowClass === 'function') {\n      customClass = state.rowClass(props.row.data, props.index)\n    } else {\n      customClass = state.rowClass\n    }\n  }\n\n  return [\n    nh.be('row'),\n    {\n      [nh.bem('row', 'fixed')]: state.rowHeight && state.rowHeight > 0,\n      [nh.bem('row', 'hover')]: !rowType.value && state.highlight && props.row.hover,\n      [nh.bem('row', 'stripe')]: state.stripe && props.index % 2 === 1,\n      [nh.bem('row', 'checked')]: props.row.checked,\n      [nh.bem('row', 'dragging')]: dragging.value,\n      [nh.bem('row', 'drag-over')]: isDragOver.value\n    },\n    customClass\n  ]\n})\nconst maxHeight = computed(() =>\n  Math.max(...Object.values(props.row.cellHeights || {}), state.rowMinHeight)\n)\nconst style = computed(() => {\n  let customStyle: any = ''\n\n  if (!rowType.value) {\n    if (typeof state.rowStyle === 'function') {\n      customStyle = state.rowStyle(props.row.data, props.index)\n    } else {\n      customStyle = state.rowStyle\n    }\n  }\n\n  return [\n    customStyle,\n    {\n      height: !state.rowHeight ? `${maxHeight.value}px` : `${state.rowHeight}px`,\n      minHeight: state.rowHeight ? undefined : `${state.rowMinHeight}px`,\n      border: '0'\n    }\n  ]\n})\nconst attrs = computed(() => {\n  if (!rowType.value) {\n    if (typeof state.rowAttrs === 'function') {\n      return state.rowAttrs(props.row.data, props.index)\n    } else {\n      return state.rowAttrs\n    }\n  }\n\n  return null\n})\nconst groupStyle = computed(() => {\n  if (props.isHead || props.isFoot) return undefined\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  state.heightTrigger\n\n  const offset =\n    state.heightBITree && !rowType.value && props.index ? state.heightBITree.sum(props.index) : 0\n\n  return {\n    transform: offset ? `translate3d(0, ${offset}px, 0)` : undefined\n  }\n})\nconst cellDraggable = computed(() => {\n  return getters.hasDragColumn && !getters.disableDragRows.has(rowKey.value)\n})\nconst rowDraggable = computed(() => !rowType.value && state.rowDraggable)\nconst draggable = computed(() => !rowType.value && (state.rowDraggable || cellDraggable.value))\nconst expandRenderer = computed(() => state.expandRenderer)\nconst hasExpand = computed(() => {\n  if (props.isHead || props.isFoot || !getters.expandColumn) return false\n  if (state.rightFixedColumns.length) return props.fixed === 'right'\n  if (state.leftFixedColumns.length) return props.fixed === 'left'\n\n  return !!state.normalColumns.length && !props.fixed\n})\n\nfunction setExpandHeight() {\n  let targetHeight: number\n\n  if (props.row.expanded && expandEl.value) {\n    targetHeight = expandEl.value.scrollHeight\n  } else {\n    targetHeight = 0\n  }\n\n  if (targetHeight !== props.row.expandHeight) {\n    mutations.setRowProp(rowKey.value, 'expandHeight', targetHeight)\n    updateTotalHeight(true)\n  }\n}\n\nfunction updateTotalHeight(force = false) {\n  if (state.heightBITree && getters.visibleKeys.has(rowKey.value) && (force || !props.fixed)) {\n    const height = props.row.height + props.row.expandHeight\n    const tree = state.heightBITree\n    const prev = tree.get(props.index)\n\n    if (height !== prev) {\n      tree.add(props.index, height - prev)\n      mutations.updateTotalHeight()\n      mutations.triggerHeightChange()\n    }\n  }\n}\n\nfunction handleResize(entry: ResizeObserverEntry) {\n  const height = entry.borderBoxSize?.[0]?.blockSize ?? entry.contentRect.height\n  mutations.setRowProp(rowKey.value, 'height', height)\n  !rowType.value && updateTotalHeight()\n}\n\nwatchEffect(() => {\n  if (props.isHead || props.isFoot) return\n\n  mutations.setRowProp(rowKey.value, 'height', state.rowHeight || maxHeight.value)\n  !rowType.value && updateTotalHeight()\n  nextTick(() => {\n    hasExpand.value && setExpandHeight()\n  })\n})\n\nonMounted(() => {\n  nextTick(() => {\n    mutations.setRowProp(rowKey.value, 'height', state.rowHeight || maxHeight.value)\n    nextTick(() => {\n      hasExpand.value && setExpandHeight()\n    })\n  })\n})\n\nfunction buildEventPayload(event: Event) {\n  return {\n    row: props.row.data,\n    key: props.row.key,\n    index: props.index,\n    event\n  }\n}\n\nfunction handleMouseEnter(event: MouseEvent) {\n  mutations.setRowProp(rowKey.value, 'hover', true)\n\n  if (!rowType.value && tableAction) {\n    tableAction.emitRowEvent('Enter', buildEventPayload(event))\n  }\n}\n\nfunction handleMouseLeave(event: MouseEvent) {\n  mutations.setRowProp(rowKey.value, 'hover', false)\n\n  if (!rowType.value && tableAction) {\n    tableAction.emitRowEvent('Leave', buildEventPayload(event))\n  }\n}\n\nfunction handleClick(event: MouseEvent) {\n  if (!rowType.value && tableAction) {\n    tableAction.emitRowEvent('Click', buildEventPayload(event))\n  }\n}\n\nfunction handleDblclick(event: MouseEvent) {\n  if (!rowType.value && tableAction) {\n    tableAction.emitRowEvent('Dblclick', buildEventPayload(event))\n  }\n}\n\nfunction handleContextmenu(event: MouseEvent) {\n  if (!rowType.value && tableAction) {\n    tableAction.emitRowEvent('Contextmenu', buildEventPayload(event))\n  }\n}\n\nfunction shouldProcessDrag() {\n  return draggable.value && state.dragging\n}\n\nfunction handleDragStart(event: DragEvent) {\n  if (!draggable.value && !cellDraggable.value) return\n\n  dragging.value = true\n  tableAction.handleRowDragStart(instance, event)\n}\n\nfunction handleDragOver(event: DragEvent) {\n  if (!shouldProcessDrag() || (cellDraggable.value && !getters.rowDragging)) return\n\n  clearTimeout(timer.drag)\n  event.stopPropagation()\n  event.preventDefault()\n\n  isDragOver.value = true\n\n  tableAction.handleRowDragOver(instance, event)\n}\n\nfunction handleDrop(event: DragEvent) {\n  if (!shouldProcessDrag()) return\n\n  clearTimeout(timer.drag)\n  event.stopPropagation()\n  event.preventDefault()\n\n  isDragOver.value = false\n\n  tableAction.handleRowDrop(instance, event)\n  nextTick(() => mutations.handleDrag(rowKey.value, false))\n}\n\nfunction handleDragEnd(event: DragEvent) {\n  if (!shouldProcessDrag()) return\n\n  event.stopPropagation()\n  dragging.value = true\n\n  tableAction.handleRowDragEnd(event)\n  nextTick(() => mutations.handleDrag(rowKey.value, false))\n}\n\nfunction handleDragLeave(event: DragEvent) {\n  if (!shouldProcessDrag()) return\n\n  clearTimeout(timer.drag)\n  event.preventDefault()\n\n  timer.drag = setTimeout(() => {\n    isDragOver.value = false\n  }, 100)\n}\n\nfunction afterExpand() {\n  mutations.setRowProp(rowKey.value, 'expandAnimate', false)\n}\n</script>\n\n<template>\n  <div\n    v-if=\"!row.hidden\"\n    ref=\"wrapper\"\n    :class=\"{\n      [nh.be('group')]: true,\n      [nh.bem('group', 'checked')]: row.checked,\n      [nh.bem('group', 'last')]: row.last\n    }\"\n    role=\"row\"\n    :draggable=\"rowDraggable || row.dragging\"\n    :style=\"groupStyle\"\n    @mouseenter=\"handleMouseEnter\"\n    @mouseleave=\"handleMouseLeave\"\n    @click=\"handleClick\"\n    @dblclick=\"handleDblclick\"\n    @contextmenu=\"handleContextmenu\"\n    @dragstart.stop=\"handleDragStart\"\n    @dragover=\"handleDragOver\"\n    @drop=\"handleDrop\"\n    @dragend=\"handleDragEnd\"\n    @dragleave=\"handleDragLeave\"\n  >\n    <ResizeObserver :on-resize=\"handleResize\">\n      <div\n        v-bind=\"attrs\"\n        ref=\"rowEl\"\n        :class=\"className\"\n        :style=\"style\"\n      >\n        <slot></slot>\n      </div>\n    </ResizeObserver>\n    <CollapseTransition\n      v-if=\"hasExpand\"\n      :disabled=\"!row.expandAnimate\"\n      @enter=\"setExpandHeight\"\n      @leave=\"setExpandHeight\"\n      @after-enter=\"afterExpand\"\n      @after-leave=\"afterExpand\"\n    >\n      <div\n        v-if=\"row.expanded\"\n        ref=\"expandEl\"\n        :class=\"[nh.be('expanded'), fixed === 'right' && nh.bem('expanded', 'fixed')]\"\n      >\n        <ResizeObserver :disabled=\"row.expandAnimate\" :on-resize=\"setExpandHeight\">\n          <div :class=\"nh.be('expanded-wrapper')\">\n            <Renderer\n              v-if=\"isFunction(getters.expandColumn!.renderer)\"\n              :renderer=\"getters.expandColumn!.renderer\"\n              :data=\"{ leftFixed: 0, rightFixed: 0, row: row.data, rowIndex: index }\"\n            ></Renderer>\n            <Renderer\n              v-else-if=\"isFunction(expandRenderer)\"\n              :renderer=\"expandRenderer\"\n              :data=\"{ leftFixed: 0, rightFixed: 0, row: row.data, rowIndex: index }\"\n            ></Renderer>\n          </div>\n        </ResizeObserver>\n      </div>\n    </CollapseTransition>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { computed, inject } from 'vue'\n\nimport TableHeadCell from './table-head-cell.vue'\nimport TableRow from './table-row.vue'\nimport { useNameHelper } from '@vexip-ui/config'\nimport { getLast } from '@vexip-ui/utils'\nimport { TABLE_HEAD_PREFIX, TABLE_STORE } from './symbol'\n\nimport type { PropType } from 'vue'\n\ndefineOptions({ name: 'TableHead' })\n\nconst props = defineProps({\n  fixed: {\n    type: String as PropType<'left' | 'right' | undefined>,\n    default: null\n  }\n})\n\nconst { state, getters, mutations } = inject(TABLE_STORE)!\n\nconst nh = useNameHelper('table')\nconst allColumns = computed(() => {\n  const left = state.leftFixedColumns.length\n  const right = state.allColumns[0].length - state.rightFixedColumns.length\n\n  if (props.fixed === 'left') {\n    return state.allColumns.map(columns => columns.slice(0, left))\n  } else if (props.fixed === 'right') {\n    return state.allColumns.map(columns => columns.slice(right, state.allColumns[0].length))\n  }\n\n  return state.allColumns.map(columns => columns.slice(left, right))\n})\nconst columns = computed(() => {\n  return props.fixed === 'left'\n    ? state.leftFixedColumns\n    : props.fixed === 'right'\n      ? state.rightFixedColumns\n      : state.normalColumns\n})\nconst style = computed(() => {\n  const width =\n    props.fixed === 'left'\n      ? getLast(getters.leftFixedWidths)\n      : props.fixed === 'right'\n        ? getLast(getters.rightFixedWidths)\n        : getLast(getters.normalWidths)\n  const padLeft = columns.value[0]?.fixed === 'left' ? state.sidePadding[0] || 0 : 0\n  const padRight = getLast(columns.value)?.fixed === 'right' ? state.sidePadding[1] || 0 : 0\n\n  return {\n    minWidth: width && `${width + padLeft + padRight}px`\n  }\n})\n\nfunction getRow(index: number) {\n  const key = `${TABLE_HEAD_PREFIX}${index}`\n\n  return state.rowMap.get(key) || mutations.createMinRowState(key)\n}\n</script>\n\n<template>\n  <div :class=\"nh.be('head')\" role=\"rowgroup\" :style=\"style\">\n    <TableRow\n      v-for=\"(rowColumns, rowIndex) in allColumns\"\n      :key=\"rowIndex\"\n      :index=\"rowIndex\"\n      is-head\n      :fixed=\"fixed\"\n      :row=\"getRow(rowIndex)\"\n      :aria-rowindex=\"rowIndex\"\n    >\n      <template v-for=\"(column, index) in rowColumns as any\" :key=\"index\">\n        <TableHeadCell\n          v-if=\"column\"\n          :column=\"column\"\n          :index=\"index\"\n          :row=\"getRow(rowIndex)\"\n          :row-index=\"rowIndex\"\n          :fixed=\"fixed\"\n          :aria-colindex=\"index\"\n        ></TableHeadCell>\n      </template>\n    </TableRow>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Checkbox } from '@/components/checkbox'\nimport { Ellipsis } from '@/components/ellipsis'\nimport { Renderer } from '@/components/renderer'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport { computed, inject, nextTick, ref, watchEffect } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport TableIcon from './table-icon.vue'\nimport { useRtl } from '@vexip-ui/hooks'\nimport { getLast, isFunction } from '@vexip-ui/utils'\nimport { TABLE_ACTIONS, TABLE_STORE, columnTypes, noopFormatter } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type {\n  ColumnWithKey,\n  TableDragColumn,\n  TableExpandColumn,\n  TableOrderColumn,\n  TableRowState,\n  TableSelectionColumn,\n  TableTypeColumn\n} from './symbol'\n\ndefineOptions({ name: 'TableCell' })\n\nconst props = defineProps({\n  row: {\n    type: Object as PropType<TableRowState>,\n    default: () => ({})\n  },\n  rowIndex: {\n    type: Number,\n    default: -1\n  },\n  column: {\n    type: Object as PropType<ColumnWithKey>,\n    default: () => ({})\n  },\n  colIndex: {\n    type: Number,\n    default: -1\n  },\n  fixed: {\n    type: String as PropType<'left' | 'right' | undefined>,\n    default: null\n  }\n})\n\nconst { state, getters, mutations } = inject(TABLE_STORE)!\nconst tableActions = inject(TABLE_ACTIONS)!\n\nconst nh = useNameHelper('table')\nconst icons = useIcons()\nconst { isRtl } = useRtl()\n\nconst contentHeight = ref(0)\n\nconst wrapper = ref<HTMLElement>()\n\nconst inLast = computed(() => {\n  return props.column.index + cellSpan.value.colSpan >= state.columns.length\n})\nconst className = computed(() => {\n  let customClass = null\n\n  if (typeof state.cellClass === 'function') {\n    customClass = state.cellClass({\n      row: props.row.data,\n      rowIndex: props.rowIndex,\n      column: props.column,\n      columnIndex: props.column.index\n    })\n  } else {\n    customClass = state.cellClass\n  }\n\n  const typed = columnTypes.includes((props.column as TableTypeColumn).type)\n\n  return [\n    nh.be('cell'),\n    {\n      [nh.bem('cell', 'typed')]: typed,\n      [nh.bem('cell', 'center')]: typed || props.column.textAlign === 'center',\n      [nh.bem('cell', 'right')]: props.column.textAlign === 'right',\n      [nh.bem('cell', 'last')]: inLast.value\n    },\n    props.column.class,\n    customClass\n  ]\n})\nconst columns = computed(() => {\n  return props.fixed === 'left'\n    ? state.leftFixedColumns\n    : props.fixed === 'right'\n      ? state.rightFixedColumns\n      : state.normalColumns\n})\nconst cellSpan = computed(() => {\n  return (\n    state.cellSpanMap\n      .get(props.fixed || 'default')!\n      .get(`${props.row.index},${props.column.index}`) || { colSpan: 1, rowSpan: 1 }\n  )\n})\nconst customStyle = computed(() => {\n  if (typeof state.cellStyle === 'function') {\n    return state.cellStyle({\n      row: props.row.data,\n      rowIndex: props.rowIndex,\n      column: props.column,\n      columnIndex: props.column.index\n    })\n  }\n\n  return state.cellStyle\n})\nconst style = computed(() => {\n  const totalWidths =\n    props.fixed === 'left'\n      ? getters.leftFixedWidths\n      : props.fixed === 'right'\n        ? getters.rightFixedWidths\n        : getters.normalWidths\n  const { colSpan, rowSpan } = cellSpan.value\n  const noFixed = !getters.hasFixedColumn\n  const padLeft = noFixed || columns.value[0]?.fixed === 'left' ? state.sidePadding[0] || 0 : 0\n  const padRight =\n    noFixed || getLast(columns.value)?.fixed === 'right' ? state.sidePadding[1] || 0 : 0\n  const width = totalWidths[props.colIndex + colSpan] - totalWidths[props.colIndex]\n\n  let height: number | undefined\n\n  if (rowSpan > 1 && state.heightBITree) {\n    height =\n      state.heightBITree.sum(props.row.listIndex + rowSpan) -\n      state.heightBITree.sum(props.row.listIndex)\n  }\n\n  return [\n    props.column.style || '',\n    customStyle.value,\n    {\n      display: !colSpan || !rowSpan ? 'none' : undefined,\n      width: `${(props.column.index ? 0 : padLeft) + (inLast.value ? padRight : 0) + width}px`,\n      height: height ? `${height}px` : undefined,\n      visibility: props.column.fixed && !props.fixed ? 'hidden' : undefined,\n      borderRightWidth:\n        !state.border && colSpan > 1 && props.colIndex + colSpan >= totalWidths.length - 1\n          ? 0\n          : undefined,\n      borderBottomWidth:\n        rowSpan > 1 && props.rowIndex + rowSpan >= getters.processedData.length ? 0 : undefined,\n      transform: `translate3d(${isRtl.value ? '-' : ''}${\n        (props.column.index ? padLeft : 0) + totalWidths[props.colIndex]\n      }px, 0, 0)`\n    }\n  ]\n})\nconst attrs = computed(() => {\n  let customAttrs: Record<string, any>\n\n  if (typeof state.cellAttrs === 'function') {\n    customAttrs = state.cellAttrs({\n      row: props.row.data,\n      rowIndex: props.rowIndex,\n      column: props.column,\n      columnIndex: props.colIndex\n    })\n  } else {\n    customAttrs = state.cellAttrs\n  }\n\n  return { ...(props.column.attrs || {}), ...(customAttrs || {}) }\n})\nconst formatter = computed(() => {\n  return isFunction(props.column.formatter) ? props.column.formatter : noopFormatter\n})\n\nwatchEffect(() => {\n  if (isTypeColumn(props.column)) return\n\n  mutations.setCellHeight(props.row.key, props.column.key, contentHeight.value)\n})\n\nfunction isSelectionColumn(column: unknown): column is TableSelectionColumn {\n  return (column as TableTypeColumn).type === 'selection'\n}\n\nfunction isOrderColumn(column: unknown): column is TableOrderColumn {\n  return (column as TableTypeColumn).type === 'order'\n}\n\nfunction isExpandColumn(column: unknown): column is TableExpandColumn {\n  return (column as TableTypeColumn).type === 'expand'\n}\n\nfunction isDragColumn(column: unknown): column is TableDragColumn {\n  return (column as TableTypeColumn).type === 'drag'\n}\n\nfunction isTypeColumn(column: unknown): column is TableTypeColumn {\n  return (\n    isSelectionColumn(column) ||\n    isOrderColumn(column) ||\n    isExpandColumn(column) ||\n    isDragColumn(column)\n  )\n}\n\nfunction buildEventPayload(event: Event) {\n  return {\n    row: props.row.data,\n    key: props.row.key,\n    rowIndex: props.rowIndex,\n    column: props.column,\n    columnIndex: props.colIndex,\n    event\n  }\n}\n\nfunction handleMouseEnter(event: MouseEvent) {\n  tableActions?.emitCellEvent('Enter', buildEventPayload(event))\n}\n\nfunction handleMouseLeave(event: MouseEvent) {\n  tableActions?.emitCellEvent('Leave', buildEventPayload(event))\n}\n\nfunction handleClick(event: MouseEvent) {\n  tableActions?.emitCellEvent('Click', buildEventPayload(event))\n}\n\nfunction handleDblclick(event: MouseEvent) {\n  tableActions?.emitCellEvent('Dblclick', buildEventPayload(event))\n}\n\nfunction handleContextmenu(event: MouseEvent) {\n  tableActions?.emitCellEvent('Contextmenu', buildEventPayload(event))\n}\n\nfunction handleCheckRow(row: TableRowState, event: MouseEvent) {\n  if (!getters.disableCheckRows.has(row.key)) {\n    const checked = !row.checked\n    const { data, key, index } = row\n\n    mutations.handleCheck(key, checked)\n    tableActions.emitRowCheck({ row: data, key, index, event, checked })\n  }\n}\n\nfunction handleExpandRow(row: TableRowState, event: MouseEvent) {\n  if (!getters.disableExpandRows.has(row.key)) {\n    const expanded = !row.expanded\n    const { data, key, index } = row\n\n    mutations.setRowProp(key, 'expandAnimate', true)\n    nextTick(() => {\n      mutations.handleExpand(key, expanded)\n      tableActions.emitRowExpand({ row: data, key, index, event, expanded })\n    })\n  }\n}\n\nfunction handleDragRow(row: TableRowState) {\n  if (!getters.disableDragRows.has(row.key)) {\n    mutations.handleDrag(row.key, true)\n  }\n}\n\nfunction handleExpandTree(row: TableRowState, event: MouseEvent) {\n  if (!row.children?.length) return\n\n  const expanded = !row.treeExpanded\n  const { data, key, index } = row\n\n  tableActions.runInLocked()\n  mutations.setTreeExpanded(row.key, expanded)\n  tableActions.emitRowExpand({ row: data, key, index, event, expanded })\n}\n\nfunction handleCellResize(entry: ResizeObserverEntry) {\n  contentHeight.value =\n    (entry.borderBoxSize?.[0]?.blockSize ?? entry.contentRect.height) + state.borderWidth\n}\n</script>\n\n<template>\n  <div\n    v-bind=\"attrs\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"cell\"\n    :scope=\"column.first ? 'row' : undefined\"\n    :colspan=\"cellSpan.colSpan !== 1 ? cellSpan.colSpan : undefined\"\n    :rowspan=\"cellSpan.rowSpan !== 1 ? cellSpan.rowSpan : undefined\"\n    :style=\"style\"\n    @mouseenter=\"handleMouseEnter\"\n    @mouseleave=\"handleMouseLeave\"\n    @click=\"handleClick\"\n    @dblclick=\"handleDblclick\"\n    @contextmenu=\"handleContextmenu\"\n  >\n    <div\n      v-if=\"column.index === 0\"\n      :class=\"nh.be('side-pad')\"\n      role=\"none\"\n      aria-hidden\n    ></div>\n    <div v-if=\"isTypeColumn(column)\" :class=\"nh.be('content')\">\n      <Checkbox\n        v-if=\"isSelectionColumn(column)\"\n        inherit\n        :class=\"nh.be('selection')\"\n        :checked=\"row.checked\"\n        :size=\"column.checkboxSize || 'default'\"\n        :disabled=\"getters.disableCheckRows.has(row.key)\"\n        :partial=\"row.partial\"\n        :control=\"!!row.children?.length\"\n        @click.prevent.stop=\"handleCheckRow(row, $event)\"\n      ></Checkbox>\n      <span v-else-if=\"isOrderColumn(column)\" :class=\"nh.be('order')\">\n        {{ column.orderLabel && column.orderLabel(column.truthIndex ? row.index : rowIndex) }}\n      </span>\n      <template v-else-if=\"isExpandColumn(column)\">\n        <button\n          v-if=\"!getters.disableExpandRows.has(row.key)\"\n          type=\"button\"\n          :class=\"{\n            [nh.be('expand')]: true,\n            [nh.bem('expand', 'active')]: row.expanded\n          }\"\n          @click.stop=\"handleExpandRow(row, $event)\"\n        >\n          <TableIcon name=\"expand\" :origin=\"icons.angleRight\"></TableIcon>\n        </button>\n      </template>\n      <template v-else-if=\"isDragColumn(column)\">\n        <button\n          v-if=\"!getters.disableDragRows.has(row.key)\"\n          type=\"button\"\n          :class=\"nh.be('dragger')\"\n          @mousedown=\"handleDragRow(row)\"\n        >\n          <TableIcon name=\"dragger\" :origin=\"icons.dragger\"></TableIcon>\n        </button>\n      </template>\n    </div>\n    <ResizeObserver v-else :on-resize=\"handleCellResize\">\n      <span :class=\"nh.be('content')\">\n        <template\n          v-if=\"\n            getters.usingTree &&\n              (getters.indentedColumn ? column.key === getters.indentedColumn.key : column.first)\n          \"\n        >\n          <span\n            :class=\"nh.be('pad')\"\n            :style=\"{\n              [nh.cv('row-depth')]: row.depth\n            }\"\n          ></span>\n          <button\n            type=\"button\"\n            :class=\"[\n              nh.be('tree-expand'),\n              !row.children?.length && nh.bem('tree-expand', 'hidden')\n            ]\"\n            @click=\"handleExpandTree(row, $event)\"\n          >\n            <TableIcon v-if=\"row.treeExpanded\" name=\"minus\" :origin=\"icons.minusSquare\"></TableIcon>\n            <TableIcon v-else name=\"plus\" :origin=\"icons.plusSquare\"></TableIcon>\n          </button>\n        </template>\n        <Ellipsis\n          v-if=\"column.ellipsis ?? state.ellipsis\"\n          inherit\n          :class=\"nh.be('ellipsis')\"\n          :tip-disabled=\"state.barScrolling\"\n          :tooltip-theme=\"state.tooltipTheme\"\n          :tip-max-width=\"state.tooltipWidth\"\n        >\n          <Renderer\n            v-if=\"isFunction(column.renderer)\"\n            :renderer=\"column.renderer\"\n            :data=\"{ row: row.data, rowIndex, column, columnIndex: column.index }\"\n          ></Renderer>\n          <template v-else-if=\"isFunction(column.accessor)\">\n            {{ formatter(column.accessor(row.data, rowIndex)) }}\n          </template>\n          <template v-else>\n            {{ formatter(row.data[column.key]) }}\n          </template>\n        </Ellipsis>\n        <template v-else>\n          <Renderer\n            v-if=\"isFunction(column.renderer)\"\n            :renderer=\"column.renderer\"\n            :data=\"{ row: row.data, rowIndex, column, columnIndex: column.index }\"\n          ></Renderer>\n          <template v-else-if=\"isFunction(column.accessor)\">\n            {{ formatter(column.accessor(row.data, rowIndex)) }}\n          </template>\n          <template v-else>\n            {{ formatter(row.data[column.key]) }}\n          </template>\n        </template>\n      </span>\n    </ResizeObserver>\n    <div\n      v-if=\"inLast\"\n      :class=\"[nh.be('side-pad'), nh.bem('side-pad', 'right')]\"\n      role=\"none\"\n      aria-hidden\n    ></div>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { computed, inject, toRef } from 'vue'\n\nimport TableCell from './table-cell.vue'\nimport TableRow from './table-row.vue'\nimport { useNameHelper } from '@vexip-ui/config'\nimport { getLast } from '@vexip-ui/utils'\nimport { TABLE_STORE } from './symbol'\n\nimport type { PropType } from 'vue'\n\ndefineOptions({ name: 'TableBody' })\n\nconst props = defineProps({\n  fixed: {\n    type: String as PropType<'left' | 'right' | undefined>,\n    default: null\n  }\n})\n\nconst { state, getters } = inject(TABLE_STORE)!\n\nconst nh = useNameHelper('table')\nconst locale = toRef(state, 'locale')\n\nconst columns = computed(() => {\n  return props.fixed === 'left'\n    ? state.leftFixedColumns\n    : props.fixed === 'right'\n      ? state.rightFixedColumns\n      : state.normalColumns\n})\nconst data = computed(() => (state.virtual ? state.virtualData : getters.processedData))\nconst style = computed(() => {\n  const width =\n    props.fixed === 'left'\n      ? getLast(getters.leftFixedWidths)\n      : props.fixed === 'right'\n        ? getLast(getters.rightFixedWidths)\n        : getLast(getters.normalWidths)\n  const padLeft = columns.value[0]?.fixed === 'left' ? state.sidePadding[0] || 0 : 0\n  const padRight = getLast(columns.value)?.fixed === 'right' ? state.sidePadding[1] || 0 : 0\n\n  return {\n    [nh.cv('expanded-fix-width')]:\n      props.fixed === 'right' && width ? `${width + padLeft + padRight}px` : '0px',\n    minWidth: width && `${width + padLeft + padRight}px`,\n    minHeight: `${state.totalHeight}px`\n  }\n})\nconst emptyStyle = computed(() => {\n  const { rowHeight, rowMinHeight } = state\n\n  return {\n    minHeight: `${rowHeight || rowMinHeight}px`\n  }\n})\n</script>\n\n<template>\n  <div :class=\"nh.be('body')\" role=\"rowgroup\" :style=\"style\">\n    <template v-if=\"data.length\">\n      <TableRow\n        v-for=\"(row, index) in data\"\n        :key=\"index\"\n        :row=\"row\"\n        :index=\"row.listIndex\"\n        :fixed=\"fixed\"\n        :aria-rowindex=\"row.index\"\n      >\n        <TableCell\n          v-for=\"(column, colIndex) in columns\"\n          :key=\"colIndex\"\n          :row=\"row\"\n          :row-index=\"row.listIndex\"\n          :column=\"column\"\n          :col-index=\"colIndex\"\n          :fixed=\"fixed\"\n          :aria-colindex=\"colIndex\"\n        ></TableCell>\n      </TableRow>\n    </template>\n    <div v-else :class=\"nh.be('empty')\" :style=\"emptyStyle\">\n      <slot name=\"empty\" :is-fixed=\"!!fixed\">\n        <template v-if=\"!fixed\">\n          {{ locale.empty }}\n        </template>\n      </slot>\n    </div>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Ellipsis } from '@/components/ellipsis'\nimport { Renderer } from '@/components/renderer'\nimport { ResizeObserver } from '@/components/resize-observer'\n\nimport { computed, inject, ref } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { useRtl } from '@vexip-ui/hooks'\nimport { getLast, isFunction } from '@vexip-ui/utils'\nimport { TABLE_ACTIONS, TABLE_STORE, columnTypes } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { ColumnWithKey, SummaryWithKey, TableRowState, TableTypeColumn } from './symbol'\n\ndefineOptions({ name: 'TableFootCell' })\n\nconst props = defineProps({\n  row: {\n    type: Object as PropType<TableRowState>,\n    default: () => ({})\n  },\n  column: {\n    type: Object as PropType<ColumnWithKey>,\n    default: () => ({})\n  },\n  colIndex: {\n    type: Number,\n    default: -1\n  },\n  summary: {\n    type: Object as PropType<SummaryWithKey>,\n    default: () => ({})\n  },\n  summaryIndex: {\n    type: Number,\n    default: -1\n  },\n  fixed: {\n    type: String as PropType<'left' | 'right' | undefined>,\n    default: null\n  },\n  above: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst { state, getters, mutations } = inject(TABLE_STORE)!\nconst tableActions = inject(TABLE_ACTIONS)!\n\nconst nh = useNameHelper('table')\nconst { isRtl } = useRtl()\n\nconst wrapper = ref<HTMLElement>()\n\nconst inLast = computed(() => {\n  return props.column.index + cellSpan.value.colSpan >= state.columns.length\n})\nconst columns = computed(() => {\n  return props.fixed === 'left'\n    ? state.leftFixedColumns\n    : props.fixed === 'right'\n      ? state.rightFixedColumns\n      : state.normalColumns\n})\n// We use 'a' and 'b' to distinguish above and below\nconst prefix = computed(() => (props.above ? 'af' : 'bf'))\nconst summaries = computed(() => (props.above ? state.aboveSummaries : state.belowSummaries))\nconst heights = computed(() => (props.above ? getters.topFixedHeights : getters.bottomFixedHeights))\nconst className = computed(() => {\n  let customClass = null\n\n  if (typeof state.footClass === 'function') {\n    customClass = state.footClass({\n      column: props.column,\n      columnIndex: props.column.index,\n      summary: props.summary,\n      summaryIndex: props.summaryIndex\n    })\n  } else {\n    customClass = state.footClass\n  }\n\n  const typed = columnTypes.includes((props.column as TableTypeColumn).type)\n\n  return [\n    nh.be('foot-cell'),\n    {\n      [nh.bem('foot-cell', 'typed')]: typed,\n      [nh.bem('foot-cell', 'center')]: typed || props.column.textAlign === 'center',\n      [nh.bem('foot-cell', 'right')]: props.column.textAlign === 'right',\n      [nh.bem('foot-cell', 'last')]: inLast.value\n    },\n    props.column.class,\n    customClass\n  ]\n})\nconst cellSpan = computed(() => {\n  return (\n    state.cellSpanMap\n      .get(props.fixed || 'default')!\n      .get(`${prefix.value}${props.summaryIndex},${props.column.index}`) || {\n      colSpan: 1,\n      rowSpan: 1\n    }\n  )\n})\nconst customStyle = computed(() => {\n  if (typeof state.footStyle === 'function') {\n    return state.footStyle({\n      column: props.column,\n      columnIndex: props.column.index,\n      summary: props.summary,\n      summaryIndex: props.summaryIndex\n    })\n  }\n\n  return state.cellStyle\n})\nconst style = computed(() => {\n  const totalWidths =\n    props.fixed === 'left'\n      ? getters.leftFixedWidths\n      : props.fixed === 'right'\n        ? getters.rightFixedWidths\n        : getters.normalWidths\n  const { colSpan, rowSpan } = cellSpan.value\n  const padLeft = columns.value[0]?.fixed === 'left' ? state.sidePadding[0] || 0 : 0\n  const padRight = getLast(columns.value)?.fixed === 'right' ? state.sidePadding[1] || 0 : 0\n  const width = totalWidths[props.colIndex + colSpan] - totalWidths[props.colIndex]\n\n  let height: number | undefined\n\n  if (rowSpan > 1) {\n    height = heights.value[props.summaryIndex + rowSpan] - heights.value[props.summaryIndex]\n  }\n\n  return [\n    props.column.style || '',\n    customStyle.value,\n    {\n      display: !colSpan || !rowSpan ? 'none' : undefined,\n      width: `${(props.column.index ? 0 : padLeft) + (inLast.value ? padRight : 0) + width}px`,\n      height: height ? `${height}px` : undefined,\n      visibility: props.column.fixed && !props.fixed ? 'hidden' : undefined,\n      borderRightWidth:\n        !state.border && colSpan > 1 && props.colIndex + colSpan >= totalWidths.length - 1\n          ? 0\n          : undefined,\n      borderBottomWidth:\n        rowSpan > 1 && props.summaryIndex + rowSpan >= summaries.value.length ? 0 : undefined,\n      transform: `translate3d(${isRtl.value ? '-' : ''}${\n        (props.column.index ? padLeft : 0) + totalWidths[props.colIndex]\n      }px, 0, 0)`\n    }\n  ]\n})\nconst attrs = computed(() => {\n  let customAttrs: Record<string, any>\n\n  if (typeof state.footAttrs === 'function') {\n    customAttrs = state.footAttrs({\n      column: props.column,\n      columnIndex: props.column.index,\n      summary: props.summary,\n      summaryIndex: props.summaryIndex\n    })\n  } else {\n    customAttrs = state.footAttrs\n  }\n\n  return { ...(props.column.attrs || {}), ...(customAttrs || {}) }\n})\nconst summaryData = computed(() => getters.summaryData.get(props.column.key))\n\nfunction buildEventPayload(event: Event) {\n  return {\n    column: props.column,\n    columnIndex: props.column.index,\n    summary: props.summary,\n    summaryIndex: props.summaryIndex,\n    event\n  }\n}\n\nfunction handleMouseEnter(event: MouseEvent) {\n  tableActions?.emitFootEvent('Enter', buildEventPayload(event))\n}\n\nfunction handleMouseLeave(event: MouseEvent) {\n  tableActions?.emitFootEvent('Leave', buildEventPayload(event))\n}\n\nfunction handleClick(event: MouseEvent) {\n  tableActions?.emitFootEvent('Click', buildEventPayload(event))\n}\n\nfunction handleDblclick(event: MouseEvent) {\n  tableActions?.emitFootEvent('Dblclick', buildEventPayload(event))\n}\n\nfunction handleContextmenu(event: MouseEvent) {\n  tableActions?.emitFootEvent('Contextmenu', buildEventPayload(event))\n}\n\nfunction handleCellResize(entry: ResizeObserverEntry) {\n  mutations.setCellHeight(\n    props.row.key,\n    props.column.key,\n    (entry.borderBoxSize?.[0]?.blockSize ?? entry.contentRect.height) + state.borderWidth\n  )\n}\n</script>\n\n<template>\n  <div\n    v-bind=\"attrs\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"cell\"\n    :scope=\"column.first ? 'row' : undefined\"\n    :colspan=\"cellSpan.colSpan !== 1 ? cellSpan.colSpan : undefined\"\n    :rowspan=\"cellSpan.rowSpan !== 1 ? cellSpan.rowSpan : undefined\"\n    :style=\"style\"\n    @mouseenter=\"handleMouseEnter\"\n    @mouseleave=\"handleMouseLeave\"\n    @click=\"handleClick\"\n    @dblclick=\"handleDblclick\"\n    @contextmenu=\"handleContextmenu\"\n  >\n    <div\n      v-if=\"column.index === 0\"\n      :class=\"nh.be('side-pad')\"\n      role=\"none\"\n      aria-hidden\n    ></div>\n    <ResizeObserver\n      v-if=\"isFunction(summary.renderer)\"\n      :disabled=\"column.ellipsis ?? state.ellipsis\"\n      :on-resize=\"handleCellResize\"\n    >\n      <span :class=\"nh.be('content')\">\n        <Ellipsis\n          v-if=\"column.ellipsis ?? state.ellipsis\"\n          inherit\n          :class=\"nh.be('ellipsis')\"\n          :tooltip-theme=\"state.tooltipTheme\"\n          :tip-max-width=\"state.tooltipWidth\"\n        >\n          <Renderer\n            :renderer=\"summary.renderer\"\n            :data=\"{ column, index: column.index, rows: state.data, meta: summaryData }\"\n          ></Renderer>\n        </Ellipsis>\n        <Renderer\n          v-else\n          :renderer=\"summary.renderer\"\n          :data=\"{ column, index: column.index, rows: state.data, meta: summaryData }\"\n        ></Renderer>\n      </span>\n    </ResizeObserver>\n    <div\n      v-if=\"inLast\"\n      :class=\"[nh.be('side-pad'), nh.bem('side-pad', 'right')]\"\n      role=\"none\"\n      aria-hidden\n    ></div>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { computed, inject } from 'vue'\n\nimport TableFootCell from './table-foot-cell.vue'\nimport TableRow from './table-row.vue'\nimport { useNameHelper } from '@vexip-ui/config'\nimport { getLast } from '@vexip-ui/utils'\nimport { TABLE_STORE } from './symbol'\n\nimport type { PropType } from 'vue'\n\ndefineOptions({ name: 'TableFoot' })\n\nconst props = defineProps({\n  fixed: {\n    type: String as PropType<'left' | 'right' | undefined>,\n    default: null\n  },\n  above: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst { state, getters, mutations } = inject(TABLE_STORE)!\n\nconst nh = useNameHelper('table')\n\nconst columns = computed(() => {\n  return props.fixed === 'left'\n    ? state.leftFixedColumns\n    : props.fixed === 'right'\n      ? state.rightFixedColumns\n      : state.normalColumns\n})\nconst summaries = computed(() => (props.above ? state.aboveSummaries : state.belowSummaries))\nconst summaryData = computed(() => {\n  return summaries.value.map(summary => {\n    const key = mutations.buildSummaryKey(summary.key)\n    const row = state.rowMap.get(key) || mutations.createMinRowState(key)\n\n    return { summary, row }\n  })\n})\nconst className = computed(() => {\n  return [nh.be('foot'), nh.bem('foot', props.above ? 'above' : 'below')]\n})\nconst style = computed(() => {\n  const width =\n    props.fixed === 'left'\n      ? getLast(getters.leftFixedWidths)\n      : props.fixed === 'right'\n        ? getLast(getters.rightFixedWidths)\n        : getLast(getters.normalWidths)\n  const padLeft = columns.value[0]?.fixed === 'left' ? state.sidePadding[0] || 0 : 0\n  const padRight = getLast(columns.value)?.fixed === 'right' ? state.sidePadding[1] || 0 : 0\n\n  return {\n    minWidth: width && `${width + padLeft + padRight}px`\n  }\n})\n</script>\n\n<template>\n  <div :class=\"className\" role=\"rowgroup\" :style=\"style\">\n    <TableRow\n      v-for=\"({ row, summary }, index) in summaryData\"\n      :key=\"row.key\"\n      is-foot\n      :fixed=\"fixed\"\n      :row=\"row\"\n      :aria-rowindex=\"index\"\n    >\n      <TableFootCell\n        v-for=\"(column, colIndex) in columns\"\n        :key=\"colIndex\"\n        :row=\"row\"\n        :column=\"column\"\n        :col-index=\"colIndex\"\n        :summary=\"summary\"\n        :summary-index=\"index\"\n        :fixed=\"fixed\"\n        :above=\"above\"\n        :aria-colindex=\"colIndex\"\n      ></TableFootCell>\n    </TableRow>\n  </div>\n</template>\n", "import { isNull, toFalse } from '@vexip-ui/utils'\n\nexport interface CascadedNode {\n  checked: boolean,\n  partial: boolean,\n  parent?: string | number | symbol,\n  children: CascadedNode[]\n}\n\nexport function useCascadedChecked<T extends CascadedNode>(options: {\n  getNode: (key: string | number | symbol) => T | null | undefined | void,\n  disableNode?: (node: T) => boolean\n}) {\n  function updateCheckedUpward(key: string | number | symbol) {\n    let node = options.getNode(key)\n\n    if (!node) return\n\n    while (!isNull(node.parent)) {\n      const parentId = node.parent\n      const parent = options.getNode(parentId)\n\n      if (!parent) break\n\n      if (node.checked === parent.checked && node.partial === parent.partial) {\n        break\n      }\n\n      if (node.checked) {\n        parent.checked = parent.children.every(item => item.checked)\n        parent.partial = !parent.checked\n      } else {\n        parent.checked = false\n        parent.partial = parent.children.some(item => item.checked || item.partial)\n      }\n\n      node = parent\n    }\n  }\n\n  function updateCheckedDown(key: string | number | symbol) {\n    const originNode = options.getNode(key)\n\n    if (!originNode) return\n\n    const disable = typeof options.disableNode === 'function' ? options.disableNode : toFalse\n    const checked = originNode.checked\n    const partial = originNode.partial\n\n    const loop = [...(originNode.children as T[])]\n\n    let node: T\n\n    while (loop.length) {\n      node = loop.shift()!\n\n      if (disable(node)) continue\n\n      node.checked = checked\n      node.partial = partial\n\n      if (node.children.length) {\n        loop.push(...(node.children as T[]))\n      }\n    }\n  }\n\n  return {\n    updateCheckedUpward,\n    updateCheckedDown\n  }\n}\n", "import { useCascadedChecked } from '@/components/tree/hooks'\n\nimport { computed, reactive, watchEffect } from 'vue'\n\nimport {\n  boundRange,\n  createBITree,\n  debounceMinor,\n  deepClone,\n  getLast,\n  isNull,\n  mapTree,\n  sortByProps,\n  toFalse,\n  toFixed,\n  toNumber,\n  walkTree\n} from '@vexip-ui/utils'\nimport { DEFAULT_KEY_FIELD, TABLE_FOOT_PREFIX, TABLE_HEAD_PREFIX, columnTypes } from './symbol'\n\nimport type { ClassType, LocaleConfig, StyleType } from '@vexip-ui/config'\nimport type { TooltipTheme } from '@/components/tooltip'\nimport type {\n  CellSpanResult,\n  ColumnCellSpanFn,\n  ColumnGroupWithKey,\n  ColumnRawWithKey,\n  ColumnWithKey,\n  Data,\n  ExpandRenderFn,\n  Key,\n  ParsedFilterOptions,\n  ParsedTableSorterOptions,\n  StoreOptions,\n  StoreState,\n  SummaryCellSpanFn,\n  SummaryWithKey,\n  TableCellPropFn,\n  TableCellSpanFn,\n  TableColResizeType,\n  TableColumnOptions,\n  TableColumnRawOptions,\n  TableColumnType,\n  TableDragColumn,\n  TableExpandColumn,\n  TableFilterOptions,\n  TableFootPropFn,\n  TableHeadPropFn,\n  TableKeyConfig,\n  TableRowPropFn,\n  TableRowState,\n  TableSelectionColumn,\n  TableSorterOptions,\n  TableSummaryData,\n  TableSummaryOptions\n} from './symbol'\n\nconst defaultSummaryData = Object.freeze<TableSummaryData>({\n  sum: NaN,\n  min: NaN,\n  max: NaN\n})\n\nlet indexId = 1\n\nfunction getIndexId() {\n  return `__vxp-table-key-${indexId++}`\n}\n\nfunction defaultIndexLabel(index: number) {\n  return index + 1\n}\n\nexport function useStore(options: StoreOptions) {\n  const state = reactive({\n    ...options,\n    columns: [],\n    normalColumns: [],\n    allColumns: [],\n    summaries: [],\n    data: [],\n    dataKey: options.dataKey ?? DEFAULT_KEY_FIELD,\n    rowData: [],\n    treeRowData: [],\n    width: 0,\n    rightFixedColumns: [],\n    leftFixedColumns: [],\n    aboveSummaries: [],\n    belowSummaries: [],\n    rowMinHeight: options.rowMinHeight || 36,\n    rowDraggable: !!options.rowDraggable,\n    columnMap: new Map(),\n    rowMap: new Map(),\n    summaryMap: new Map(),\n    idMaps: new WeakMap(),\n    checkedAll: false,\n    partial: false,\n    widths: new Map(),\n    sorters: new Map(),\n    filters: new Map(),\n    resized: new Set(),\n    bodyYScroll: 0,\n    bodyXScroll: 0,\n    padTop: 0,\n    startRow: 0,\n    endRow: 0,\n    dragging: false,\n    heightBITree: null!,\n    virtualData: [],\n    totalHeight: options.rowMinHeight * options.data.length,\n    colResizing: false,\n    resizeLeft: 0,\n    cellSpanMap: new Map(),\n    collapseMap: new Map(),\n    sidePadding: options.sidePadding || [0, 0],\n    locked: false,\n    barScrolling: false,\n    heightTrigger: 0\n  }) as StoreState\n\n  setColumns(options.columns)\n  setSummaries(options.summaries)\n  setData(options.data)\n\n  const userData = computed(() => {\n    return typeof state.dataFilter === 'function'\n      ? state.rowData.filter(row => state.dataFilter(row.data))\n      : state.rowData\n  })\n  const filteredData = computed(() => {\n    return state.customFilter\n      ? userData.value\n      : filterData(state.filters, userData.value, state.singleFilter)\n  })\n  const sortedData = computed(() => {\n    const data = state.customSorter\n      ? filteredData.value\n      : sortData(state.sorters, filteredData.value, state.columns, state.singleSorter)\n\n    return data\n  })\n  const processedData = computed(() => {\n    const data = pageData(state.currentPage, state.pageSize, sortedData.value)\n\n    for (let i = 0, len = data.length; i < len; ++i) {\n      data[i].listIndex = i\n      data[i].last = i === len - 1\n    }\n\n    return data\n  })\n  const visibleKeys = computed(() => new Set(processedData.value.map(row => row.key)))\n  const disableCheckRows = computed(() => {\n    const rowData = processedData.value\n    const selectionColumn = state.columns.find(\n      item => (item as TableSelectionColumn).type === 'selection'\n    ) as TableSelectionColumn | undefined\n    const disableCheckRows = new Set<Key>()\n\n    if (selectionColumn && typeof selectionColumn.disableRow === 'function') {\n      const isDisabled = selectionColumn.disableRow\n\n      for (let i = 0, len = rowData.length; i < len; ++i) {\n        const row = rowData[i]\n\n        if (isDisabled(row.data)) {\n          disableCheckRows.add(row.key)\n        }\n      }\n    }\n\n    return disableCheckRows\n  })\n  const disableExpandRows = computed(() => {\n    const rowData = processedData.value\n    const expandColumn = state.columns.find(\n      item => (item as TableExpandColumn).type === 'expand'\n    ) as TableExpandColumn | undefined\n    const disableExpandRows = new Set<Key>()\n\n    if (expandColumn && typeof expandColumn.disableRow === 'function') {\n      const isDisabled = expandColumn.disableRow\n\n      for (let i = 0, len = rowData.length; i < len; ++i) {\n        const row = rowData[i]\n\n        if (isDisabled(row.data)) {\n          disableExpandRows.add(row.key)\n        }\n      }\n    }\n\n    return disableExpandRows\n  })\n  const disableDragRows = computed(() => {\n    const rowData = processedData.value\n    const dragColumn = state.columns.find(item => (item as TableDragColumn).type === 'drag') as\n      | TableDragColumn\n      | undefined\n    const disableDragRows = new Set<Key>()\n\n    if (dragColumn && typeof dragColumn.disableRow === 'function') {\n      const isDisabled = dragColumn.disableRow\n\n      for (let i = 0, len = rowData.length; i < len; ++i) {\n        const row = rowData[i]\n\n        if (isDisabled(row.data)) {\n          disableDragRows.add(row.key)\n        }\n      }\n    }\n\n    return disableDragRows\n  })\n  const usingTree = computed(() => {\n    return !state.disabledTree && state.rowData.some(row => row.children?.length)\n  })\n  const hasDragColumn = computed(() => {\n    return !!state.columns.find(column => 'type' in column && column.type === 'drag')\n  })\n  const rowDragging = computed(() => !!processedData.value.find(row => row.dragging))\n  const totalWidths = computed(() => getColumnsWidths())\n  const normalWidths = computed(() => getColumnsWidths(state.normalColumns))\n  const leftFixedWidths = computed(() => getColumnsWidths(state.leftFixedColumns))\n  const rightFixedWidths = computed(() => getColumnsWidths(state.rightFixedColumns))\n  const expandColumn = computed(() => {\n    return state.columns.find(column => (column as TableExpandColumn).type === 'expand') as\n      | TableExpandColumn\n      | undefined\n  })\n  const summaryData = computed(() => {\n    const { columns, summaries, data } = state\n    const map = new Map<Key, TableSummaryData>()\n\n    if (!summaries.length) return map\n\n    for (const column of columns) {\n      const key = column.key\n\n      if (column.type || column.noSummary) {\n        map.set(key, defaultSummaryData)\n        continue\n      }\n\n      const accessor =\n        typeof column.accessor === 'function' ? column.accessor : (data: Data) => data[key]\n\n      let sum = 0\n      let min = Infinity\n      let max = -Infinity\n      let valid = false\n\n      for (let i = 0, len = data.length; i < len; ++i) {\n        const value = accessor(data[i], i)\n        const number = parseFloat(value as string)\n\n        if (Number.isNaN(number)) continue\n\n        sum += number\n        min = Math.min(min, number)\n        max = Math.max(max, number)\n        valid = true\n      }\n\n      valid ? map.set(key, { sum, min, max }) : map.set(key, defaultSummaryData)\n    }\n\n    return map\n  })\n  const topFixedHeights = computed(() => getSummariesHeights(state.aboveSummaries))\n  const bottomFixedHeights = computed(() => getSummariesHeights())\n  const indentedColumn = computed(() => {\n    return state.columns.find(column => !column.type && column.indented)\n  })\n  const hasFixedColumn = computed(() => {\n    return !!(state.leftFixedColumns.length || state.rightFixedColumns.length)\n  })\n\n  const getters = reactive({\n    filteredData,\n    sortedData,\n    processedData,\n    visibleKeys,\n    disableCheckRows,\n    disableExpandRows,\n    disableDragRows,\n    usingTree,\n    hasDragColumn,\n    rowDragging,\n    totalWidths,\n    normalWidths,\n    leftFixedWidths,\n    rightFixedWidths,\n    expandColumn,\n    summaryData,\n    topFixedHeights,\n    bottomFixedHeights,\n    indentedColumn,\n    hasFixedColumn\n  })\n\n  const mutations = {\n    // 这几个个方法被 deep watch 回调\n    // 需要防止在一个微任务内被多次调用\n    setColumns: debounceMinor(setColumns),\n    // setColumns,\n    setSummaries: debounceMinor(setSummaries),\n    setData: debounceMinor(setData),\n\n    // 这个方法被大量的 watch 回调，需要防抖\n    updateTotalHeight: debounceMinor(updateTotalHeight),\n\n    isGroupColumn,\n    buildSummaryKey,\n    setColumnProp,\n    setSummaryProp,\n    setDataKey,\n    setCurrentPage,\n    setPageSize,\n    setRowClass,\n    setRowStyle,\n    setRowAttrs,\n    setCellClass,\n    setCellStyle,\n    setCellAttrs,\n    setHeadClass,\n    setHeadStyle,\n    setHeadAttrs,\n    setFootClass,\n    setFootStyle,\n    setFootAttrs,\n    setTableWidth,\n    setRowHeight,\n    setRowMinHeight,\n    setCellHeight,\n    setVirtual,\n    setRowDraggable,\n    setBodyYScroll,\n    setBodyXScroll,\n    setBorder,\n    setStripe,\n    setHighlight,\n    setRowProp,\n    setLocale,\n    setTooltipTheme,\n    setTooltipWidth,\n    setSingleSorter,\n    setSingleFilter,\n    setDragging,\n    setKeyConfig,\n    setDisabledTree,\n    setNoCascaded,\n    setColResizable,\n    setCustomSorter,\n    setCustomFilter,\n    setColumnResizing,\n    setResizeLeft,\n    setExpandRenderer,\n    setCellSpan,\n    setSidePadding,\n    setBorderWidth,\n    setDataFilter,\n    setEllipsis,\n    setLocked,\n    setBarScrolling,\n\n    handleSort,\n    clearSort,\n    handleFilter,\n    clearFilter,\n    toggleFilterItemActive,\n    refreshRowIndex,\n    handleCheck,\n    handleCheckAll,\n    clearCheckAll,\n    setRenderRows,\n    handleExpand,\n    handleDrag,\n    collectUnderRows,\n    setTreeExpanded,\n    getParentRow,\n    handleColumnResize,\n    getCurrentData,\n    createMinRowState,\n    flatTreeRows,\n    refreshRowDepth,\n    triggerHeightChange,\n    queryRow\n  }\n\n  watchEffect(() => {\n    state.heightBITree = createBITree(\n      processedData.value.length,\n      state.rowHeight || state.rowMinHeight\n    )\n\n    state.totalHeight = -1\n    updateTotalHeight()\n  })\n  watchEffect(computeCellSpan)\n\n  function triggerHeightChange() {\n    ++state.heightTrigger\n\n    if (state.heightTrigger >= Number.MAX_SAFE_INTEGER) {\n      state.heightTrigger = 0\n    }\n  }\n\n  function getColumnsWidths(columns = state.columns) {\n    const widths = state.widths\n    const combinedWidths: number[] = [0]\n\n    let width = 0\n\n    for (let i = 0, len = columns.length; i < len; ++i) {\n      const column = columns[i]\n      const key = column.key\n      const columnWidth = widths.get(key) || 0\n\n      width += columnWidth\n      combinedWidths.push(width)\n    }\n\n    return combinedWidths\n  }\n\n  function getSummariesHeights(summaries = state.belowSummaries) {\n    const rowMap = state.rowMap\n    const heights: number[] = [0]\n\n    let height = 0\n\n    for (let i = 0, len = summaries.length; i < len; ++i) {\n      const summary = summaries[i]\n      const key = buildSummaryKey(summary.key)\n      const row = rowMap.get(key)\n\n      if (row) {\n        height += row.height || 0\n      }\n\n      heights.push(height)\n    }\n\n    return heights\n  }\n\n  function createMinRowState(key: Key) {\n    return { key, cellHeights: {}, height: state.rowHeight ?? state.rowMinHeight } as TableRowState\n  }\n\n  function isGroupColumn(column: any): column is ColumnGroupWithKey {\n    return !!column.children?.length\n  }\n\n  function buildColumns(columns: TableColumnRawOptions[]) {\n    const allColumns: ColumnRawWithKey[][] = []\n    const baseColumns: ColumnWithKey[] = []\n    const columnMap = new Map<Key, ColumnRawWithKey>()\n    const existedTypes = new Set<TableColumnType>()\n\n    const getFixedOrder = (fixed?: boolean | 'left' | 'right') => {\n      return fixed === true || fixed === 'left' ? -1 : fixed === 'right' ? 1 : 0\n    }\n    const build = (\n      _columns: TableColumnRawOptions[],\n      fixed?: boolean | 'left' | 'right',\n      row = 0,\n      result: ColumnRawWithKey[][] = []\n    ) => {\n      _columns = _columns\n        .filter(column => !('children' in column) || isGroupColumn(column))\n        .sort((prev, next) => (prev.order || 0) - (next.order || 0))\n        .sort((prev, next) => getFixedOrder(prev.fixed) - getFixedOrder(next.fixed))\n      fixed = fixed === true ? 'left' : fixed\n\n      const columns = _columns as ColumnRawWithKey[]\n      const rowColumns = result[row] ?? (result[row] = [])\n\n      let index = row > 0 ? result[row - 1].length - 1 : 0\n\n      for (const { ...column } of columns) {\n        if (!isNull(fixed)) {\n          column.fixed = fixed\n        }\n\n        rowColumns[index] = column\n\n        if (isGroupColumn(column)) {\n          const endIndex = build(column.children, column.fixed, row + 1, result)\n\n          column.key = Symbol('TableColumnGroup')\n          column.headSpan = endIndex - index\n          index = endIndex\n        } else {\n          const validType = column.type && columnTypes.includes(column.type)\n\n          if (validType) {\n            if (existedTypes.has(column.type)) {\n              console.warn(`[vexip-ui:Table] Table has duplicate column with type '${column.type}'`)\n            }\n\n            existedTypes.add(column.type)\n          }\n\n          let key = column.key\n\n          if (isNull(key)) {\n            if (validType) {\n              key = `__vxp_${column.type}`\n            } else {\n              console.warn('[vexip-ui:Table] Table column requires key prop, but missing')\n\n              key = getIndexId()\n            }\n          }\n\n          column.key = key\n          baseColumns.push(column)\n          index += 1\n        }\n\n        columnMap.set(column.key, column)\n      }\n\n      return index\n    }\n\n    build(columns, undefined, 0, allColumns)\n\n    let length = 0\n\n    for (const rowColumns of allColumns) {\n      length = Math.max(rowColumns.length, length)\n    }\n\n    for (const rowColumns of allColumns) {\n      if (rowColumns.length) {\n        getLast(rowColumns)!.last = true\n      }\n\n      rowColumns.length = length\n    }\n\n    for (let i = 0, rowCount = allColumns.length; i < length; ++i) {\n      let span = 1\n\n      for (let j = rowCount - 1; j >= 0; --j) {\n        const column = allColumns[j][i]\n\n        if (column) {\n          column.colIndex = i\n          column.rowSpan = span\n          span = 1\n        } else {\n          ++span\n        }\n      }\n    }\n\n    return { allColumns, baseColumns, columnMap }\n  }\n\n  function setColumns(columns: TableColumnRawOptions[]) {\n    const { widths, sorters, filters } = state\n    const { allColumns, baseColumns, columnMap } = buildColumns(columns)\n\n    const normalColumns: ColumnWithKey[] = []\n    const rightFixedColumns: ColumnWithKey[] = []\n    const leftFixedColumns: ColumnWithKey[] = []\n\n    for (let i = 0, len = baseColumns.length; i < len; ++i) {\n      const column = baseColumns[i]\n\n      column.first = false\n      column.last = false\n      column.index = i\n\n      if (column.type && columnTypes.includes(column.type)) {\n        switch (column.type) {\n          case 'order': {\n            column.truthIndex = !!column.truthIndex\n\n            if (typeof column.orderLabel !== 'function') {\n              column.orderLabel = defaultIndexLabel\n            }\n\n            if (isNull(column.width)) column.width = 60\n\n            break\n          }\n          case 'selection': {\n            column.checkboxSize = column.checkboxSize || 'default'\n\n            if (typeof column.disableRow !== 'function') {\n              column.disableRow = toFalse\n            }\n\n            if (isNull(column.width)) column.width = 40\n\n            break\n          }\n          case 'expand': {\n            if (typeof column.disableRow !== 'function') {\n              column.disableRow = toFalse\n            }\n\n            if (isNull(column.width)) column.width = 40\n\n            break\n          }\n          case 'drag': {\n            if (typeof column.disableRow !== 'function') {\n              column.disableRow = toFalse\n            }\n\n            if (isNull(column.width)) column.width = 40\n\n            break\n          }\n        }\n\n        if (!column.key) {\n          column.key = `__vxp_${column.type}-${i}`\n        }\n      } else {\n        column.type = undefined\n      }\n\n      // 独立属性解析时注意隔断同对象引用\n      widths.set(column.key, column.width || 100)\n      sorters.set(column.key, parseSorter(column.sorter))\n      filters.set(column.key, parseFilter(column.filter))\n\n      const fixed = column.fixed\n\n      if (fixed === true || fixed === 'left') {\n        leftFixedColumns.push(column)\n      } else if (fixed === 'right') {\n        rightFixedColumns.push(column)\n      } else {\n        normalColumns.push(column)\n      }\n    }\n\n    if (state.allColumns.length > allColumns.length) {\n      for (let i = allColumns.length - 1, len = state.allColumns.length; i < len; ++i) {\n        state.rowMap.delete(`${TABLE_HEAD_PREFIX}${i}`)\n      }\n    }\n\n    for (let i = 0, len = allColumns.length; i < len; ++i) {\n      const rowKey = `${TABLE_HEAD_PREFIX}${i}`\n\n      state.rowMap.set(rowKey, createMinRowState(rowKey))\n    }\n\n    state.columnMap = columnMap\n    state.columns = Array.from(leftFixedColumns).concat(normalColumns, rightFixedColumns)\n    state.normalColumns = normalColumns\n    state.allColumns = allColumns\n\n    if (state.columns.length) {\n      for (const column of state.columns) {\n        if (!column.type) {\n          column.first = true\n          break\n        }\n      }\n\n      getLast(state.columns)!.last = true\n    }\n\n    if (leftFixedColumns.length) {\n      state.leftFixedColumns = leftFixedColumns\n    }\n\n    if (rightFixedColumns.length) {\n      state.rightFixedColumns = rightFixedColumns\n    }\n  }\n\n  function setColumnProp(key: Key, prop: string, value: any) {\n    if (state.columnMap.has(key)) {\n      ;(state.columnMap.get(key) as any)[prop] = value\n    }\n  }\n\n  function buildSummaryKey(key: Key) {\n    return typeof key === 'symbol' ? key : `${TABLE_FOOT_PREFIX}${key}`\n  }\n\n  function setSummaries(summaries: TableSummaryOptions[]) {\n    summaries = Array.from(summaries).sort((prev, next) => {\n      return (prev.order || 0) - (next.order || 0)\n    })\n\n    const prevKeys = new Set(state.summaries.map(summary => summary.key))\n    const aboveSummaries: SummaryWithKey[] = []\n    const belowSummaries: SummaryWithKey[] = []\n    const summaryMap = new Map<Key, SummaryWithKey>()\n\n    for (let i = 0, len = summaries.length; i < len; ++i) {\n      const summary = { ...summaries[i] } as SummaryWithKey\n\n      let key = summary.key\n\n      if (isNull(key)) {\n        console.error('[vexip-ui:Table] Table summary requires key prop, but missing')\n\n        key = getIndexId()\n      }\n\n      summary.key = key\n      ;(summary.above ? aboveSummaries : belowSummaries).push(summary)\n\n      if (!prevKeys.has(summary.key)) {\n        const rowKey = buildSummaryKey(summary.key)\n\n        state.rowMap.set(rowKey, createMinRowState(rowKey))\n      }\n\n      prevKeys.delete(summary.key)\n      summaryMap.set(summary.key, summary)\n    }\n\n    state.summaries = Array.from(aboveSummaries).concat(belowSummaries)\n    state.summaryMap = summaryMap\n\n    if (aboveSummaries.length) {\n      state.aboveSummaries = aboveSummaries\n    }\n\n    if (belowSummaries.length) {\n      state.belowSummaries = belowSummaries\n    }\n\n    if (prevKeys.size) {\n      for (const key of prevKeys) {\n        state.rowMap.delete(buildSummaryKey(key))\n      }\n    }\n  }\n\n  function setSummaryProp(key: Key, prop: string, value: any) {\n    if (state.summaryMap.has(key)) {\n      ;(state.summaryMap.get(key) as any)[prop] = value\n    }\n  }\n\n  function setDataKey(field: string) {\n    const oldDataKey = state.dataKey\n\n    if (!isNull(field) && oldDataKey !== field) {\n      const { rowData, idMaps } = state\n\n      state.dataKey = field\n\n      rowData.forEach(row => {\n        let key = row.data[field] as Key\n\n        if (isNull(key)) {\n          key = getIndexId()\n        }\n\n        row.key = key\n        idMaps.set(row.data, key)\n      })\n    }\n  }\n\n  function collectUnderRows(row: TableRowState, result: TableRowState[] = []) {\n    if (row.treeExpanded && row.children?.length) {\n      for (const childRow of row.children) {\n        result.push(childRow)\n        collectUnderRows(childRow, result)\n      }\n    }\n\n    return result\n  }\n\n  function setData(data: Data[]) {\n    const clonedData: TableRowState[] = []\n    const rowMap = new Map<Key, TableRowState>()\n    const { allColumns, dataKey, keyConfig, idMaps, disabledTree } = state\n    const oldDataMap = state.rowMap\n    const hidden = !!state.virtual\n\n    const {\n      children: childrenKey,\n      checked: checkedKey,\n      height: heightKey,\n      expanded: expandedKey,\n      treeExpanded: treeExpandedKey\n    } = keyConfig\n\n    for (let i = 0, len = allColumns.length; i < len; ++i) {\n      const key = `${TABLE_HEAD_PREFIX}${i}`\n\n      rowMap.set(key, oldDataMap.get(key) || createMinRowState(key))\n    }\n\n    for (const summary of state.summaries) {\n      const key = buildSummaryKey(summary.key)\n\n      rowMap.set(key, oldDataMap.get(key) || createMinRowState(key))\n    }\n\n    const parseRow = (origin: Data[], result: TableRowState[], parent?: TableRowState) => {\n      for (let i = 0, len = origin.length; i < len; ++i) {\n        const item = origin[i]\n\n        let key = item[dataKey] as Key\n\n        if (isNull(key)) {\n          key = idMaps.get(item)!\n\n          if (isNull(key)) {\n            key = getIndexId()\n          }\n        }\n\n        let row: TableRowState\n\n        if (oldDataMap.has(key)) {\n          row = oldDataMap.get(key)!\n\n          const {\n            [checkedKey]: checked,\n            [heightKey]: height,\n            [expandedKey]: expanded,\n            [treeExpandedKey]: treeExpanded\n          } = row.data !== item ? Object.assign(row.data, item) : row.data\n\n          row.checked = !isNull(checked) ? !!checked : row.checked\n          row.height = !isNull(height) ? toNumber(height) : row.height\n          row.expanded = !isNull(expanded) ? !!expanded : row.expanded\n          row.treeExpanded = !isNull(treeExpanded) ? !!treeExpanded : row.treeExpanded\n        } else {\n          const {\n            [checkedKey]: checked,\n            [heightKey]: height,\n            [expandedKey]: expanded,\n            [treeExpandedKey]: treeExpanded\n          } = item\n\n          row = {\n            key,\n            hidden,\n            checked: !!checked,\n            height: toNumber(height),\n            expanded: !!expanded,\n            hover: false,\n            expandHeight: 0,\n            index: -1,\n            children: [],\n            depth: 0,\n            treeExpanded: !!treeExpanded,\n            partial: false,\n            dragging: false,\n            listIndex: 0,\n            cellHeights: reactive({}),\n            last: false,\n            expandAnimate: false,\n            data: item\n          }\n\n          idMaps.set(item, key)\n        }\n\n        if (parent) {\n          row.parent = parent.key\n          row.depth = parent.depth + 1\n        }\n\n        row.children = []\n\n        const children = row.data[childrenKey]\n        children?.length && parseRow(children, row.children, row)\n\n        result.push(row)\n        rowMap.set(key, row)\n      }\n    }\n\n    parseRow(data, clonedData)\n\n    state.rowMap = rowMap\n    state.treeRowData = clonedData\n\n    if (!disabledTree) {\n      flatTreeRows()\n    } else {\n      state.rowData = clonedData\n    }\n\n    state.data = data\n\n    refreshRowIndex()\n    computePartial()\n  }\n\n  function flatTreeRows() {\n    if (state.disabledTree) return\n\n    const rowData: TableRowState[] = []\n\n    for (const row of state.treeRowData) {\n      rowData.push(row)\n      collectUnderRows(row, rowData)\n    }\n\n    state.rowData = rowData\n  }\n\n  function refreshRowDepth() {\n    walkTree(state.treeRowData, (row, depth) => {\n      row.depth = depth\n    })\n  }\n\n  function setCurrentPage(currentPage: number) {\n    state.currentPage = currentPage ?? 1\n  }\n\n  function setPageSize(pageSize: number) {\n    state.pageSize = pageSize || 0\n  }\n\n  function setRowClass(rowClass: ClassType | TableRowPropFn<ClassType>) {\n    state.rowClass = rowClass ?? ''\n  }\n\n  function setRowStyle(rowStyle: StyleType | TableRowPropFn<StyleType>) {\n    state.rowStyle = rowStyle ?? ''\n  }\n\n  function setRowAttrs(rowAttrs: Record<string, any> | TableRowPropFn<Record<string, any>>) {\n    state.rowAttrs = rowAttrs ?? null!\n  }\n\n  function setCellClass(cellClass: ClassType | TableCellPropFn<ClassType>) {\n    state.cellClass = cellClass ?? ''\n  }\n\n  function setCellStyle(cellStyle: StyleType | TableCellPropFn<StyleType>) {\n    state.cellStyle = cellStyle ?? ''\n  }\n\n  function setCellAttrs(cellAttrs: Record<string, any> | TableCellPropFn<Record<string, any>>) {\n    state.cellAttrs = cellAttrs ?? null!\n  }\n\n  function setHeadClass(headClass: ClassType | TableHeadPropFn<ClassType>) {\n    state.headClass = headClass ?? ''\n  }\n\n  function setHeadStyle(headStyle: StyleType | TableHeadPropFn<StyleType>) {\n    state.headStyle = headStyle ?? ''\n  }\n\n  function setHeadAttrs(headAttrs: Record<string, any> | TableHeadPropFn<Record<string, any>>) {\n    state.headAttrs = headAttrs ?? null!\n  }\n\n  function setFootClass(footClass: ClassType | TableFootPropFn<ClassType>) {\n    state.footClass = footClass ?? ''\n  }\n\n  function setFootStyle(footStyle: StyleType | TableFootPropFn<StyleType>) {\n    state.footStyle = footStyle ?? ''\n  }\n\n  function setFootAttrs(footAttrs: Record<string, any> | TableFootPropFn<Record<string, any>>) {\n    state.footAttrs = footAttrs ?? null!\n  }\n\n  function setTableWidth(width: number) {\n    if (state.resized.size) return\n\n    width = toNumber(width)\n\n    const { columns, widths, resized, sidePadding } = state\n\n    const hasWidthColumns = []\n    const flexColumns = []\n\n    let flexWidth = width - (sidePadding[0] || 0) - (sidePadding[1] || 0)\n\n    for (let i = 0, len = columns.length; i < len; ++i) {\n      const column = columns[i]\n\n      if (column.width || resized.has(column.key)) {\n        flexWidth -= column.width ?? widths.get(column.key)!\n        hasWidthColumns.push(column)\n      } else {\n        flexColumns.push(column)\n      }\n    }\n\n    const flexColumnCount = flexColumns.length\n\n    let flexUnitWidth = 100\n\n    // 剩余空间有多时, 均分到弹性列\n    // if (flexColumnCount && flexWidth > flexColumnCount * flexUnitWidth) {\n    if (flexColumnCount) {\n      flexUnitWidth = Math.max(flexWidth / flexColumnCount, 100)\n    }\n\n    let usedWidth = 0\n\n    for (let i = 0; i < flexColumnCount; ++i) {\n      const column = flexColumns[i]\n      const width = Math[i % 2 ? 'ceil' : 'floor'](flexUnitWidth)\n\n      if (i < flexColumnCount - 1) {\n        usedWidth += width\n      }\n\n      widths.set(column.key, width)\n    }\n\n    if (flexColumnCount && flexWidth >= flexColumnCount * flexUnitWidth) {\n      widths.set(getLast(flexColumns)!.key, flexWidth - usedWidth)\n    }\n\n    state.width = width\n  }\n\n  function setRowHeight(height: number) {\n    state.rowHeight = height\n  }\n\n  function setRowMinHeight(height: number) {\n    state.rowMinHeight = height\n  }\n\n  function setCellHeight(rowKey: Key, columnKey: Key, height: number) {\n    if (!isNull(height) && state.rowMap.has(rowKey)) {\n      state.rowMap.get(rowKey)!.cellHeights[columnKey] = height\n    }\n  }\n\n  function setRowDraggable(draggable: boolean) {\n    state.rowDraggable = !!draggable\n  }\n\n  function setBodyYScroll(scroll: number) {\n    state.bodyYScroll = scroll\n  }\n\n  function setBodyXScroll(scroll: number) {\n    state.bodyXScroll = scroll\n  }\n\n  function setBorder(able: boolean) {\n    state.border = !!able\n  }\n\n  function setStripe(able: boolean) {\n    state.stripe = !!able\n  }\n\n  function setHighlight(able: boolean) {\n    state.highlight = !!able\n  }\n\n  function setVirtual(virtual: boolean) {\n    state.virtual = !!virtual\n  }\n\n  function setRowProp(key: Key, prop: Exclude<keyof TableRowState, 'key'>, value: any) {\n    const row = state.rowMap.get(key)\n\n    if (row && row[prop] !== value) {\n      ;(row as any)[prop] = value\n    }\n  }\n\n  function setLocale(locale: LocaleConfig['table']) {\n    state.locale = locale\n  }\n\n  function setTooltipTheme(theme: TooltipTheme) {\n    state.tooltipTheme = theme\n  }\n\n  function setTooltipWidth(theme: number | string) {\n    state.tooltipWidth = theme\n  }\n\n  function setSingleSorter(able: boolean) {\n    state.singleSorter = !!able\n  }\n\n  function setSingleFilter(able: boolean) {\n    state.singleFilter = !!able\n  }\n\n  function setDragging(dragging: boolean) {\n    state.dragging = !!dragging\n  }\n\n  function setKeyConfig(keyConfig: Required<TableKeyConfig>) {\n    state.keyConfig = keyConfig\n  }\n\n  function setDisabledTree(disabled: boolean) {\n    state.disabledTree = !!disabled\n  }\n\n  function setNoCascaded(noCascaded: boolean) {\n    state.noCascaded = !!noCascaded\n  }\n\n  function setColResizable(resizable: boolean | TableColResizeType) {\n    state.colResizable = resizable === true ? 'lazy' : resizable\n  }\n\n  function setCustomSorter(able: boolean) {\n    state.customSorter = !!able\n  }\n\n  function setCustomFilter(able: boolean) {\n    state.customFilter = !!able\n  }\n\n  function setColumnResizing(resizing: boolean) {\n    state.colResizing = !!resizing\n  }\n\n  function setResizeLeft(left: number) {\n    state.resizeLeft = left\n  }\n\n  function setExpandRenderer(renderer: ExpandRenderFn | null) {\n    state.expandRenderer = renderer\n  }\n\n  function setCellSpan(spanFn: TableCellSpanFn | null) {\n    state.cellSpan = spanFn\n  }\n\n  function setSidePadding(padding: number | number[]) {\n    state.sidePadding = Array.isArray(padding) ? padding : [padding, padding]\n  }\n\n  function setBorderWidth(width: number) {\n    state.borderWidth = Math.max(width, 0)\n  }\n\n  function setDataFilter(filter: (data: Data) => boolean) {\n    state.dataFilter = filter\n  }\n\n  function setEllipsis(ellipsis: boolean) {\n    state.ellipsis = ellipsis\n  }\n\n  function setLocked(locked: boolean) {\n    state.locked = locked\n  }\n\n  function setBarScrolling(scrolling: boolean) {\n    state.barScrolling = scrolling\n  }\n\n  function handleSort(key: Key, type: ParsedTableSorterOptions['type']) {\n    if (state.sorters.has(key)) {\n      if (state.singleSorter && type) {\n        clearSort()\n      }\n\n      state.sorters.get(key)!.type = type\n    }\n  }\n\n  function clearSort() {\n    const sorters = state.sorters\n\n    for (const sorter of sorters.values()) {\n      sorter.type = null\n    }\n  }\n\n  function handleFilter(key: Key, active: ParsedFilterOptions['active']) {\n    if (state.filters.has(key)) {\n      if (state.singleFilter && (Array.isArray(active) ? active.length : active)) {\n        clearFilter()\n      }\n\n      state.filters.get(key)!.active = Array.isArray(active) ? Array.from(active) : active\n    }\n  }\n\n  function clearFilter() {\n    const filters = state.filters\n\n    for (const filter of filters.values()) {\n      filter.active = null\n\n      for (const option of filter.options) {\n        option.active = false\n      }\n    }\n  }\n\n  const { updateCheckedUpward, updateCheckedDown } = useCascadedChecked({\n    getNode: key => state.rowMap.get(key),\n    disableNode: row => disableCheckRows.value.has(row.key)\n  })\n\n  function computeChecked(key: Key) {\n    const { rowMap, rowData } = state\n    const { disableCheckRows } = getters\n\n    if (!rowMap.has(key)) return\n\n    const rowList = [rowMap.get(key)!].concat(\n      // 需要包含被禁用且被勾选的节点\n      rowData.filter(row => disableCheckRows.has(row.key) && row.checked)\n    )\n\n    for (let i = 0, len = rowList.length; i < len; ++i) {\n      updateCheckedUpward(rowList[i].key)\n      updateCheckedDown(rowList[i].key)\n    }\n  }\n\n  function handleCheck(key: Key, checked: boolean) {\n    const { rowMap, noCascaded } = state\n    const { disableCheckRows } = getters\n    const row = rowMap.get(key)\n\n    if (row && !disableCheckRows.has(key)) {\n      row.checked = !!checked\n      row.partial = false\n    }\n\n    !noCascaded && computeChecked(key)\n    computePartial()\n  }\n\n  function handleCheckAll() {\n    const { rowData, checkedAll } = state\n    const { disableCheckRows } = getters\n\n    let checked = !checkedAll\n\n    // 阻断 disabled 元素对全选的影响\n    if (disableCheckRows.size) {\n      // 由于被禁用的元素不可被操作，如果存在被禁用的元素且该状态为未被选中，则全选时仍然是 partial 状态\n      // 假设除了禁用的元素，其余元素均为选中状态（此时对于用户来说属于已经全选，点击的期望是取消全选）\n      let partialCheckedAll = true\n\n      for (const row of rowData) {\n        // 检查是否存在非禁用的且未被选中的元素（如有则证明现在不是全选，用户点击的期望是进行全选）\n        if (!disableCheckRows.has(row.key) && !row.checked) {\n          partialCheckedAll = false\n\n          break\n        }\n      }\n\n      checked = !partialCheckedAll\n    }\n\n    for (const row of rowData) {\n      if (!disableCheckRows.has(row.key)) {\n        row.checked = checked\n      }\n    }\n\n    state.checkedAll = checked\n    state.partial = false\n\n    computePartial()\n  }\n\n  function clearCheckAll() {\n    const { rowData } = state\n    const { disableCheckRows } = getters\n\n    for (const row of rowData) {\n      if (!disableCheckRows.has(row.key)) {\n        row.checked = false\n      }\n    }\n\n    state.checkedAll = false\n    state.partial = false\n\n    computePartial()\n  }\n\n  function computePartial() {\n    const data = state.rowData\n\n    let hasChecked = false\n    let hasNotChecked = false\n    let partial = false\n\n    for (let i = 0, len = data.length; i < len; ++i) {\n      const row = data[i]\n\n      if (row.checked) {\n        hasChecked = true\n      } else {\n        hasNotChecked = true\n      }\n\n      if (hasChecked && hasNotChecked) {\n        partial = true\n\n        break\n      }\n    }\n\n    if (hasChecked && !partial) {\n      state.checkedAll = true\n    } else {\n      state.checkedAll = false\n    }\n\n    state.partial = partial\n  }\n\n  function setRenderRows(start: number, end: number, force = false) {\n    const { startRow, endRow, heightBITree, virtualData } = state\n\n    if (!force && start === startRow && end === endRow) return\n\n    const { processedData } = getters\n\n    if (!processedData.length) {\n      virtualData.length = 0\n      return\n    }\n\n    const prevData = new Set([...virtualData])\n    const added: TableRowState[] = []\n    const removed: TableRowState[] = []\n\n    for (let i = 0, len = processedData.length; i < len; ++i) {\n      const data = processedData[i]\n\n      data.hidden = !(i >= start && i < end)\n\n      if (data.hidden) {\n        data.hover = false\n\n        if (prevData.has(data)) {\n          removed.push(data)\n        }\n      } else if (!prevData.has(data)) {\n        added.push(data)\n      }\n\n      prevData.delete(data)\n    }\n\n    removed.push(...prevData)\n\n    const length = Math.min(added.length, removed.length)\n\n    for (let i = 0; i < length; ++i) {\n      virtualData[virtualData.indexOf(removed[i])] = added[i]\n    }\n\n    if (added.length > removed.length) {\n      virtualData.push(...added.slice(length))\n    } else if (added.length < removed.length) {\n      state.virtualData = virtualData.filter(data => !removed.includes(data))\n    }\n\n    state.padTop = heightBITree?.sum(start) ?? 0\n    state.startRow = start\n    state.endRow = end\n  }\n\n  function handleExpand(key: Key, expanded: boolean) {\n    const { rowMap } = state\n    const { disableExpandRows } = getters\n\n    if (rowMap.has(key) && !disableExpandRows.has(key)) {\n      rowMap.get(key)!.expanded = !!expanded\n    }\n  }\n\n  function handleDrag(key: Key, dragging: boolean) {\n    const { rowMap } = state\n    const { disableDragRows } = getters\n\n    if (rowMap.has(key) && !disableDragRows.has(key)) {\n      rowMap.get(key)!.dragging = !!dragging\n    }\n  }\n\n  function setTreeExpanded(key: Key, expanded: boolean) {\n    if (!usingTree.value) return\n\n    const { rowMap, rowData, virtual } = state\n    const row = rowMap.get(key)\n\n    if (!row?.children?.length) return\n\n    const underRows = collectUnderRows({ ...row, treeExpanded: true })\n\n    if (expanded) {\n      rowData.splice(row.index + 1, 0, ...underRows)\n    } else {\n      rowData.splice(row.index + 1, underRows.length)\n    }\n\n    row.treeExpanded = !!expanded\n\n    refreshRowIndex()\n    virtual && setRenderRows(state.startRow, state.endRow, true)\n  }\n\n  function toggleFilterItemActive(options: {\n    key: Key,\n    value: number | string | null,\n    active?: boolean,\n    disableOthers?: boolean\n  }) {\n    const { key, value, active = false, disableOthers = false } = options\n\n    if (state.filters.has(key)) {\n      const filterOptions = state.filters.get(key)!.options\n\n      if (disableOthers) {\n        for (let i = 0, len = filterOptions.length; i < len; ++i) {\n          filterOptions[i].active = false\n        }\n      }\n\n      const item = filterOptions.find(item => item.value === value)\n\n      if (item) {\n        item.active = active\n      }\n    }\n  }\n\n  function refreshRowIndex() {\n    const data = state.rowData\n\n    for (let i = 0, len = data.length; i < len; ++i) {\n      data[i].index = i\n    }\n  }\n\n  function updateTotalHeight() {\n    const { heightBITree } = state\n\n    if (heightBITree) {\n      state.totalHeight = heightBITree.sum() ?? 0\n    } else {\n      state.totalHeight = 0\n    }\n  }\n\n  function parseSorter(sorter: boolean | TableSorterOptions = false): ParsedTableSorterOptions {\n    const raw = typeof sorter === 'boolean' ? { able: sorter } : sorter\n    const { able = true, type = null, order = 0, method = null } = raw\n\n    return { able, type, order, method }\n  }\n\n  function parseFilter(filter?: TableFilterOptions | null): ParsedFilterOptions {\n    filter = filter || { able: false, options: [] }\n\n    const {\n      able = true,\n      custom = false,\n      multiple = false,\n      active = null,\n      method = null,\n      meta\n    } = filter\n    // 防止内部变化触发 deep watch\n    const options = deepClone(filter.options ?? [])\n    const formattedOptions = []\n\n    for (let i = 0, len = options.length; i < len; ++i) {\n      const item = options[i]\n      const option = typeof item === 'string' ? { value: item } : { ...item }\n\n      option.label = option.label ?? option.value.toString()\n\n      let isActive = false\n\n      if (multiple && Array.isArray(active)) {\n        isActive = active.includes(option.value)\n      } else if (!isNull(active)) {\n        isActive = Object.is(option.value, active)\n      }\n\n      option.active = isActive\n\n      formattedOptions.push(option as { value: string | number, label: string, active: boolean })\n    }\n\n    return { able, custom, meta, options: formattedOptions, multiple, active, method }\n  }\n\n  function filterData(\n    filters: Map<Key, ParsedFilterOptions>,\n    data: TableRowState[],\n    isSingle: boolean\n  ) {\n    const usedFilter: ParsedFilterOptions[] = []\n    const usedData: TableRowState[] = []\n\n    for (const filter of filters.values()) {\n      const { able, active, method } = filter\n\n      if (able && active && typeof method === 'function') {\n        usedFilter.push(filter)\n\n        if (isSingle) break\n      }\n    }\n\n    const usedFilterCount = usedFilter.length\n\n    for (let i = 0, len = data.length; i < len; ++i) {\n      const row = data[i]\n\n      let isFilter = true\n\n      for (let j = 0; j < usedFilterCount; j++) {\n        const { active, method } = usedFilter[j]\n\n        isFilter = method!(active! as any, row.data)\n\n        if (!isFilter) {\n          break\n        }\n      }\n\n      if (isFilter) {\n        usedData.push(row)\n      }\n    }\n\n    return usedData\n  }\n\n  function sortData(\n    sorters: Map<Key, ParsedTableSorterOptions>,\n    data: TableRowState[],\n    columns: TableColumnOptions[],\n    isSingle: boolean\n  ) {\n    const usedSorter = []\n\n    for (const [_key, sorter] of sorters) {\n      const key = _key as keyof TableRowState\n      const { able, type, order, method } = sorter\n\n      if (able && type) {\n        const column = columns.find(item => item.key === key)\n        const accessor = column?.accessor\n\n        usedSorter.push({\n          able,\n          key,\n          order,\n          type,\n          method: method ?? undefined,\n          accessor(row: TableRowState) {\n            if (typeof accessor === 'function') {\n              return accessor(row.data, row.index)\n            }\n\n            return row.data[key]\n          }\n        })\n\n        if (isSingle) break\n      }\n    }\n\n    // 多列排序优先级\n    usedSorter.sort((prev, next) => prev.order - next.order)\n\n    return sortByProps(data, usedSorter)\n  }\n\n  function pageData(currentPage: number, pageSize: number, data: TableRowState[]) {\n    return pageSize > 0 ? data.slice((currentPage - 1) * pageSize, currentPage * pageSize) : data\n  }\n\n  function getParentRow(key: Key) {\n    const { rowMap } = state\n    const row = rowMap.get(key)\n\n    if (!isNull(row?.parent)) {\n      return rowMap.get(row!.parent) ?? null\n    }\n\n    return null\n  }\n\n  let lastColumnWidth: number | undefined\n\n  function handleColumnResize(keys: Key[], newWidth: number) {\n    const { resized, widths, columns, width: tableWidth } = state\n    const length = keys.length\n\n    if (!columns.length || !length) return\n\n    const deltaWidth = newWidth / length\n    const lastKey = getLast(columns)!.key\n\n    for (let i = 0; i < length; ++i) {\n      const key = keys[i]\n\n      resized.add(key)\n      widths.set(\n        key,\n        length === 1 ? Math.round(deltaWidth) : Math[i % 2 ? 'ceil' : 'floor'](deltaWidth)\n      )\n    }\n\n    let totalWidth = 0\n\n    for (const width of widths.values()) {\n      totalWidth += width\n    }\n\n    totalWidth = toFixed(totalWidth, 1)\n\n    if (\n      totalWidth - widths.get(lastKey)! <\n      tableWidth - (lastColumnWidth ?? widths.get(lastKey)!)\n    ) {\n      if (!lastColumnWidth) {\n        lastColumnWidth = widths.get(lastKey)\n      }\n\n      widths.set(lastKey, widths.get(lastKey)! + tableWidth - totalWidth)\n    } else if (lastColumnWidth) {\n      widths.set(lastKey, lastColumnWidth!)\n      lastColumnWidth = undefined\n    }\n  }\n\n  function computeCellSpan() {\n    const {\n      normalColumns,\n      leftFixedColumns,\n      rightFixedColumns,\n      aboveSummaries,\n      belowSummaries,\n      rowData,\n      cellSpanMap,\n      collapseMap\n    } = state\n    const { processedData } = getters\n\n    for (const type of ['left', 'default', 'right'] as const) {\n      cellSpanMap.set(type, new Map())\n      collapseMap.set(type, new Map())\n    }\n\n    function setCellSpan(\n      rowIndex: number,\n      columnIndex: number,\n      fixed: 'left' | 'default' | 'right',\n      getSpan: () => Required<CellSpanResult>,\n      prefix = ''\n    ) {\n      const masterKey = `${prefix}${rowIndex},${columnIndex}`\n      const collapsed = collapseMap.get(fixed)!\n\n      if (collapsed.has(masterKey)) {\n        cellSpanMap.get(fixed)!.set(masterKey, { colSpan: 0, rowSpan: 0 })\n        return\n      }\n\n      const span = getSpan()\n      const { colSpan, rowSpan } = span\n\n      for (let i = 0; i < colSpan; ++i) {\n        for (let j = 0; j < rowSpan; ++j) {\n          if (!i && !j) continue\n\n          const key = `${prefix}${rowIndex + j},${columnIndex + i}`\n\n          let masterSet = collapsed.get(key)\n\n          if (!masterSet) {\n            masterSet = new Set()\n            collapsed.set(key, masterSet)\n          }\n\n          masterSet.add(masterKey)\n        }\n      }\n\n      cellSpanMap.get(fixed)!.set(masterKey, span)\n    }\n\n    for (const columns of [normalColumns, leftFixedColumns, rightFixedColumns]) {\n      if (!columns.length) continue\n\n      const fixed = columns[0].fixed === true ? 'left' : columns[0].fixed || 'default'\n      const columnFixed = columns[0].fixed === true ? 'left' : columns[0].fixed || undefined\n\n      const left = state.leftFixedColumns.length\n      const right = state.allColumns[0].length - state.rightFixedColumns.length\n\n      let allColumns: ColumnRawWithKey[][]\n\n      if (fixed === 'left') {\n        allColumns = state.allColumns.map(columns => columns.slice(0, left))\n      } else if (fixed === 'right') {\n        allColumns = state.allColumns.map(columns =>\n          columns.slice(right, state.allColumns[0].length)\n        )\n      } else {\n        allColumns = state.allColumns.map(columns => columns.slice(left, right))\n      }\n\n      for (let i = 0, len1 = allColumns.length; i < len1; ++i) {\n        const rowColumns = allColumns[i]\n\n        for (let j = 0, len2 = rowColumns.length; j < len2; ++j) {\n          const column = rowColumns[j]\n\n          if (!column) continue\n\n          const fixed = column.fixed === true ? 'left' : column.fixed || 'default'\n\n          setCellSpan(\n            i,\n            j,\n            fixed,\n            () => {\n              const columns =\n                fixed === 'left'\n                  ? leftFixedColumns\n                  : fixed === 'right'\n                    ? rightFixedColumns\n                    : normalColumns\n              const colSpan = boundRange(column.headSpan ?? 1, 0, columns.length - j)\n              const span = { colSpan, rowSpan: column.rowSpan }\n\n              return span\n            },\n            'h'\n          )\n        }\n      }\n\n      for (let colIndex = 0, len = columns.length; colIndex < len; ++colIndex) {\n        const column = columns[colIndex]\n\n        for (const row of rowData) {\n          setCellSpan(row.index, column.index, fixed, () => {\n            let result: ReturnType<ColumnCellSpanFn>\n\n            if (typeof column.cellSpan === 'function') {\n              result = column.cellSpan({\n                row: row.data,\n                index: row.index,\n                fixed: columnFixed\n              })\n            } else if (typeof state.cellSpan === 'function') {\n              result = state.cellSpan({\n                row: row.data,\n                rowIndex: row.index,\n                column,\n                columnIndex: column.index,\n                fixed: columnFixed\n              })\n            }\n\n            result = result! || { colSpan: 1, rowSpan: 1 }\n\n            const span = { colSpan: result.colSpan ?? 1, rowSpan: result.rowSpan ?? 1 }\n\n            span.colSpan = boundRange(span.colSpan, 0, columns.length - colIndex)\n            span.rowSpan = boundRange(span.rowSpan, 0, processedData.length - row.listIndex)\n\n            return span\n          })\n        }\n\n        for (const { prefix, summaries } of [\n          { prefix: 'af', summaries: aboveSummaries },\n          { prefix: 'bf', summaries: belowSummaries }\n        ]) {\n          for (let i = 0, len = summaries.length; i < len; ++i) {\n            const summary = summaries[i]\n\n            setCellSpan(\n              i,\n              column.index,\n              fixed,\n              () => {\n                let result: ReturnType<SummaryCellSpanFn>\n\n                if (typeof summary.cellSpan === 'function') {\n                  result = summary.cellSpan({\n                    column,\n                    index: column.index,\n                    fixed: columnFixed\n                  })\n                }\n\n                const { colSpan, rowSpan } = result! || { colSpan: 1, rowSpan: 1 }\n                const span = { colSpan: colSpan ?? 1, rowSpan: rowSpan ?? 1 }\n\n                span.colSpan = boundRange(span.colSpan, 0, columns.length - colIndex)\n                span.rowSpan = boundRange(span.rowSpan, 0, summaries.length - i)\n\n                return span\n              },\n              prefix\n            )\n          }\n        }\n      }\n    }\n  }\n\n  function getCurrentData() {\n    const { treeRowData, disabledTree, keyConfig } = state\n\n    if (disabledTree) {\n      return treeRowData.map(row => ({ ...row.data }))\n    }\n\n    return mapTree(treeRowData, row => ({ ...row.data }), {\n      childField: keyConfig.children as 'children'\n    })\n  }\n\n  function queryRow(keyOrData: Key | Record<any, any>) {\n    const { dataKey, rowMap, idMaps } = state\n\n    let key: Key\n\n    if (typeof keyOrData === 'object') {\n      key = idMaps.get(keyOrData) ?? keyOrData[dataKey]\n    } else {\n      key = keyOrData\n    }\n\n    return isNull(key) ? undefined : rowMap.get(key)\n  }\n\n  type Store = Readonly<{\n    state: Readonly<typeof state>,\n    getters: Readonly<typeof getters>,\n    mutations: Readonly<typeof mutations>\n  }>\n\n  return { state, getters, mutations } as Store\n}\n\nexport type TableStore = ReturnType<typeof useStore>\n", "<script setup lang=\"ts\">\nimport { NativeScroll } from '@/components/native-scroll'\nimport { Scrollbar } from '@/components/scrollbar'\n\nimport {\n  computed,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  renderSlot,\n  toRef,\n  watch\n} from 'vue'\n\nimport TableColumn from './table-column'\nimport TableColumnGroup from './table-column-group'\nimport TableSummary from './table-summary'\nimport TableHead from './table-head.vue'\nimport TableBody from './table-body.vue'\nimport TableFoot from './table-foot.vue'\nimport { emitEvent, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport {\n  debounce,\n  debounceMinor,\n  getLast,\n  isDefined,\n  isValidNumber,\n  nextFrameOnce,\n  noop,\n  removeArrayItem,\n  toNumber,\n  transformListToMap\n} from '@vexip-ui/utils'\nimport { useSetTimeout } from '@vexip-ui/hooks'\nimport { tableProps } from './props'\nimport { useStore } from './store'\nimport { DropType, TABLE_ACTIONS, TABLE_SLOTS, TABLE_STORE } from './symbol'\n\nimport type { StyleType } from '@vexip-ui/config'\nimport type { NativeScrollExposed, NativeScrollPayload } from '@/components/native-scroll'\nimport type { ScrollbarExposed } from '@/components/scrollbar'\nimport type {\n  Key,\n  MouseEventType,\n  MoveEventType,\n  StoreOptions,\n  TableCellPayload,\n  TableColResizePayload,\n  TableColumnGroupOptions,\n  TableColumnOptions,\n  TableFootPayload,\n  TableHeadPayload,\n  TableKeyConfig,\n  TableRowInstance,\n  TableRowPayload,\n  TableRowState,\n  TableSummaryOptions\n} from './symbol'\n\nconst defaultKeyConfig: Required<TableKeyConfig> = {\n  id: 'id',\n  children: 'children',\n  checked: 'checked',\n  height: 'height',\n  expanded: 'expanded',\n  treeExpanded: 'treeExpanded'\n}\n\ndefineOptions({ name: 'Table' })\n\nconst _props = defineProps(tableProps)\nconst props = useProps('table', _props, {\n  locale: null,\n  columns: {\n    default: () => [],\n    static: true\n  },\n  summaries: {\n    default: () => [],\n    static: true\n  },\n  data: {\n    default: () => [],\n    static: true\n  },\n  width: null,\n  height: null,\n  rowClass: null,\n  rowStyle: null,\n  rowAttrs: null,\n  stripe: false,\n  border: false,\n  highlight: false,\n  useXBar: false,\n  useYBar: false,\n  barFade: 1500,\n  rowDraggable: false,\n  rowHeight: {\n    default: null,\n    validator: value => value > 0\n  },\n  rowMinHeight: {\n    default: 36,\n    validator: value => value > 0\n  },\n  virtual: false,\n  bufferCount: {\n    default: 5,\n    validator: value => value >= 0\n  },\n  scrollClass: () => ({}),\n  expandRenderer: {\n    default: null,\n    isFunc: true\n  },\n  currentPage: {\n    default: 1,\n    validator: value => value > 0,\n    static: true\n  },\n  pageSize: 0,\n  transparent: false,\n  tooltipTheme: {\n    default: 'dark',\n    validator: value => ['light', 'dark'].includes(value)\n  },\n  tooltipWidth: 500,\n  singleSorter: false,\n  singleFilter: false,\n  cellClass: null,\n  cellStyle: null,\n  cellAttrs: null,\n  headClass: null,\n  headStyle: null,\n  headAttrs: null,\n  footClass: null,\n  footStyle: null,\n  footAttrs: null,\n  customSorter: false,\n  customFilter: false,\n  keyConfig: () => ({}),\n  disabledTree: false,\n  rowIndent: '16px',\n  noCascaded: false,\n  colResizable: false,\n  cellSpan: {\n    default: null,\n    isFunc: true\n  },\n  sidePadding: 0,\n  icons: () => ({}),\n  borderWidth: 1,\n  dataFilter: {\n    default: null,\n    isFunc: true\n  },\n  noTransition: false,\n  ellipsis: false\n})\n\n// only for dnd end payload\nconst emit = defineEmits(['update:data'])\n\nconst slots = defineSlots<{\n  default: () => any,\n  empty: (params: { isFixed: boolean }) => any\n}>()\n\nconst nh = useNameHelper('table')\nconst { timer } = useSetTimeout()\n\nconst bodyHeight = ref<number | undefined>(props.height)\nconst xScrollEnabled = ref(false)\nconst yScrollEnabled = ref(false)\nconst xScrollPercent = ref(0)\nconst yScrollPercent = ref(0)\nconst headHeight = ref(0)\nconst footHeight = ref(0)\nconst indicatorShow = ref(false)\nconst indicatorType = ref(DropType.BEFORE)\nconst tempColumns = reactive(new Set<TableColumnGroupOptions | TableColumnOptions>())\nconst tempSummaries = reactive(new Set<TableSummaryOptions>())\nconst tableWidth = ref<number | string>()\nconst hasDragColumn = ref(false)\nconst bodyWidth = ref(0)\n\nconst wrapper = ref<HTMLElement>()\nconst mainScroll = ref<NativeScrollExposed>()\nconst xHeadScroll = ref<NativeScrollExposed>()\nconst xAboveScroll = ref<NativeScrollExposed>()\nconst xBelowScroll = ref<NativeScrollExposed>()\nconst thead = ref<HTMLElement>()\nconst aboveTfoot = ref<HTMLElement>()\nconst belowTfoot = ref<HTMLElement>()\nconst indicator = ref<HTMLElement>()\nconst xScrollbar = ref<ScrollbarExposed>()\nconst yScrollbar = ref<ScrollbarExposed>()\n\nlet isMounted = false\n\nconst locale = useLocale('table', toRef(props, 'locale'))\nconst keyConfig = computed(() => ({ ...defaultKeyConfig, ...props.keyConfig }))\nconst allColumns = computed(() => Array.from(tempColumns))\nconst allSummaries = computed(() => Array.from(tempSummaries))\n\nconst syncToStoreProps = [\n  'rowClass',\n  'rowStyle',\n  'rowAttrs',\n  'cellClass',\n  'cellStyle',\n  'cellAttrs',\n  'headClass',\n  'headStyle',\n  'headAttrs',\n  'footClass',\n  'footStyle',\n  'footAttrs',\n  'border',\n  'stripe',\n  'highlight',\n  'currentPage',\n  'pageSize',\n  'rowHeight',\n  'rowMinHeight',\n  'rowDraggable',\n  'tooltipTheme',\n  'tooltipWidth',\n  'singleSorter',\n  'singleFilter',\n  'customSorter',\n  'customFilter',\n  'noCascaded',\n  'colResizable',\n  'expandRenderer',\n  'cellSpan',\n  'sidePadding',\n  'borderWidth',\n  'dataFilter',\n  'ellipsis'\n] as const\n\nconst store = useStore({\n  ...(syncToStoreProps.reduce(\n    (prev, current) => ((prev[current] = props[current]), prev),\n    {} as any\n  ) as StoreOptions),\n  columns: allColumns.value,\n  summaries: allSummaries.value,\n  data: props.data,\n  dataKey: keyConfig.value.id,\n  virtual: props.virtual,\n  locale: locale.value,\n  keyConfig: keyConfig.value,\n  disabledTree: props.disabledTree,\n  colResizable: props.colResizable === true ? 'lazy' : props.colResizable,\n  sidePadding: Array.isArray(props.sidePadding)\n    ? props.sidePadding\n    : [props.sidePadding, props.sidePadding]\n})\n\nprovide(TABLE_STORE, store)\nprovide(TABLE_ACTIONS, {\n  increaseColumn,\n  decreaseColumn,\n  increaseSummary,\n  decreaseSummary,\n  getTableElement,\n  refreshXScroll,\n  emitRowCheck,\n  emitAllRowCheck,\n  emitRowExpand,\n  emitRowTreeExpand,\n  emitRowFilter,\n  emitRowSort,\n  handleRowDragStart,\n  handleRowDragOver,\n  handleRowDrop,\n  handleRowDragEnd,\n  emitRowEvent,\n  emitCellEvent,\n  emitHeadEvent,\n  emitColResize,\n  emitFootEvent,\n  hasIcon: name => !!props.icons[name],\n  getIcon: name => props.icons[name],\n  renderTableSlot,\n  runInLocked,\n  updateColumns: () => debounceMinor(updateColumns),\n  setColumnProp,\n  updateSummaries: () => debounceMinor(updateSummaries),\n  setSummaryProp\n})\nprovide(TABLE_SLOTS, slots)\n\nconst { state, getters, mutations } = store\n\nconst mergedLocked = computed(() => props.noTransition || state.locked || state.barScrolling)\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('stripe')]: props.stripe,\n    [nh.bm('border')]: props.border,\n    [nh.bm('highlight')]: props.highlight,\n    [nh.bm('use-y-bar')]: props.useYBar,\n    [nh.bm('transparent')]: props.transparent,\n    [nh.bm('virtual')]: props.virtual,\n    [nh.bm('col-resizable')]: props.colResizable,\n    [nh.bm('col-resizing')]: state.colResizing,\n    [nh.bm('locked')]: mergedLocked.value,\n    [nh.bm('above-foot')]: state.aboveSummaries.length,\n    [nh.bm('below-foot')]: state.belowSummaries.length,\n    [nh.bm('using-bar')]: state.barScrolling\n  }\n})\nconst style = computed(() => {\n  const width = tableWidth.value ?? props.width\n  const [padLeft, padRight] = state.sidePadding\n\n  const style: StyleType = {\n    [nh.cv('row-indent-width')]:\n      typeof props.rowIndent === 'number' ? `${props.rowIndent}px` : props.rowIndent,\n    [nh.cv('b-width')]: `${props.borderWidth}px`,\n    [nh.cv('expanded-width')]: `${bodyWidth.value}px`\n  }\n\n  if (padLeft) {\n    style[nh.cv('side-pad-left')] = `${padLeft}px`\n  }\n\n  if (padRight) {\n    style[nh.cv('side-pad-right')] = `${padRight}px`\n  }\n\n  if (isDefined(width)) {\n    if (typeof width === 'number' || isValidNumber(width, true)) {\n      style.width = `${width}px`\n      style.minWidth = `${width}px`\n    } else {\n      style.width = width\n    }\n  }\n\n  return style\n})\nconst useXScroll = computed(() => {\n  return !!(\n    isDefined(props.width) ||\n    state.leftFixedColumns.length ||\n    state.rightFixedColumns.length\n  )\n})\nconst bodyScrollHeight = computed(() => {\n  const { totalHeight } = state\n\n  return bodyHeight.value ? Math.min(bodyHeight.value, totalHeight) : undefined\n})\nconst xBarLength = computed(() => mainScroll.value?.xBarLength || 35)\nconst yBarLength = computed(() => {\n  const { totalHeight } = state\n\n  if (bodyScrollHeight.value && totalHeight) {\n    return Math.max(Math.min((bodyScrollHeight.value / totalHeight) * 100, 99), 5) || 35\n  }\n\n  return 35\n})\nconst totalWidths = computed(() => {\n  return (\n    (getLast(getters.totalWidths) || 0) + (state.sidePadding[0] || 0) + (state.sidePadding[1] || 0)\n  )\n})\nconst leftFixedActive = computed(() => xScrollEnabled.value && xScrollPercent.value > 0)\nconst rightFixedActive = computed(() => xScrollEnabled.value && xScrollPercent.value < 100)\n\nconst {\n  setColumns,\n  setSummaries,\n  setData,\n  setDataKey,\n  setTableWidth,\n  setBodyYScroll,\n  setBodyXScroll,\n  setRenderRows,\n  setVirtual,\n  setLocale,\n  setDragging,\n  setKeyConfig,\n  setDisabledTree,\n  setLocked,\n  setBarScrolling,\n  clearSort,\n  clearFilter,\n  refreshRowIndex,\n  clearCheckAll,\n  getParentRow,\n  getCurrentData,\n  flatTreeRows,\n  refreshRowDepth,\n  queryRow,\n  handleCheck,\n  setTreeExpanded\n} = mutations\n\nwatch(allColumns, updateColumns)\nwatch(allSummaries, updateSummaries)\nwatch(() => keyConfig.value.id, setDataKey)\nwatch(() => props.data, forceRefreshData, { deep: true })\nwatch(() => props.width, computeTableWidth)\nwatch([() => props.height, () => props.borderWidth], () => {\n  nextTick(computeBodyHeight)\n})\nwatch(locale, setLocale, { deep: true })\nwatch(\n  () => props.virtual,\n  value => {\n    setVirtual(value)\n    setData(props.data)\n    refreshPercentScroll()\n  }\n)\nwatch(\n  keyConfig,\n  config => {\n    setKeyConfig(config)\n    setData(props.data)\n  },\n  { deep: true }\n)\nwatch(\n  () => props.disabledTree,\n  value => {\n    setDisabledTree(value)\n    setData(props.data)\n  }\n)\nwatch([() => props.rowHeight, () => props.rowMinHeight], () => {\n  refresh()\n})\n\nfor (const prop of syncToStoreProps) {\n  const watchCallback =\n    mutations[\n      `set${prop.charAt(0).toLocaleUpperCase()}${prop.slice(1)}` as `set${Capitalize<typeof prop>}`\n    ]\n\n  watch(() => props[prop], watchCallback as any)\n}\n\nfunction syncBarScroll() {\n  xScrollbar.value?.handleScroll(xScrollPercent.value)\n  yScrollbar.value?.handleScroll(yScrollPercent.value)\n}\n\nconst handlerResize = debounce(refresh)\n\nonMounted(() => {\n  isMounted = true\n\n  watch(bodyScrollHeight, refreshPercentScroll)\n  refresh()\n  window.addEventListener('resize', handlerResize)\n  nextTick(() => {\n    hasDragColumn.value = getters.hasDragColumn\n  })\n\n  if (mainScroll.value) {\n    xScrollEnabled.value = mainScroll.value.enableXScroll\n    yScrollEnabled.value = mainScroll.value.enableYScroll\n  }\n})\n\nonBeforeUnmount(() => {\n  isMounted = false\n\n  window.removeEventListener('resize', handlerResize)\n})\n\ndefineExpose({\n  bodyHeight,\n  xScrollEnabled,\n  yScrollEnabled,\n  xScrollPercent,\n  yScrollPercent,\n  headHeight,\n  footHeight,\n  indicatorShow,\n  bodyScrollHeight,\n  totalWidths,\n  totalHeight: computed(() => state.totalHeight),\n  locked: mergedLocked,\n\n  store,\n\n  wrapper,\n  mainScroll,\n  xHeadScroll,\n  xAboveScroll,\n  xBelowScroll,\n  thead,\n  aboveTfoot,\n  belowTfoot,\n  indicator,\n  xScrollbar,\n  yScrollbar,\n\n  clearSort,\n  clearFilter,\n  clearSelected: clearCheckAll,\n  refresh,\n  refreshData: forceRefreshData,\n  getSelected,\n  getData: getCurrentData,\n  selectRow: setRowChecked,\n  treeExpandRow: setRowTreeExpanded\n})\n\nfunction forceRefreshData(data = props.data) {\n  return runInLocked(() => {\n    setData(data)\n    nextTick(() => computeRenderRows(true))\n    refreshPercentScroll()\n  })\n}\n\nfunction computeTableWidth() {\n  const width = props.width\n\n  if (isDefined(width)) {\n    if (typeof width === 'string' && parseFloat(width).toString() !== width) {\n      tableWidth.value = width\n    } else {\n      tableWidth.value = `${toNumber(width)}px`\n    }\n  }\n\n  nextTick(() => {\n    mainScroll.value?.content && setTableWidth(mainScroll.value.content.offsetWidth)\n    refreshXScroll()\n  })\n}\n\nfunction computeBodyHeight() {\n  const height = props.height\n  const borderWidth = props.borderWidth\n\n  if (isDefined(height)) {\n    headHeight.value = 0\n    footHeight.value = 0\n\n    if (thead.value || aboveTfoot.value || belowTfoot.value) {\n      if (thead.value) {\n        headHeight.value = thead.value.offsetHeight\n      }\n\n      if (aboveTfoot.value) {\n        headHeight.value += aboveTfoot.value.offsetHeight\n      }\n\n      if (belowTfoot.value) {\n        footHeight.value = belowTfoot.value.offsetHeight\n      }\n\n      bodyHeight.value = height - headHeight.value - footHeight.value - 2 * borderWidth\n    } else {\n      // one row as head placeholder\n      bodyHeight.value = height - (props.rowHeight || props.rowMinHeight) - 2 * borderWidth\n    }\n  } else {\n    bodyHeight.value = undefined\n  }\n}\n\nfunction handleMainScroll(payload: NativeScrollPayload) {\n  if (state.barScrolling) return\n\n  if (payload.type !== 'vertical') {\n    handleXScroll(payload)\n  }\n\n  if (payload.type !== 'horizontal') {\n    handleYScroll(payload)\n  }\n}\n\nfunction handleXScroll({ clientX, percentX }: { clientX: number, percentX: number }) {\n  if (state.barScrolling) return\n\n  xScrollPercent.value = percentX\n  setBodyXScroll(clientX)\n  syncBarScroll()\n  emitEvent(props.onScroll, { type: 'horizontal', client: clientX, percent: percentX })\n}\n\nfunction handleYScroll({ clientY, percentY }: { clientY: number, percentY: number }) {\n  if (state.barScrolling) return\n\n  yScrollPercent.value = percentY\n  setBodyYScroll(clientY)\n  syncBarScroll()\n  emitYScroll(clientY, percentY)\n}\n\nfunction handleXBarScroll(percent: number) {\n  if (!mainScroll.value) return\n\n  const client = (mainScroll.value.xScrollLimit * percent) / 100\n\n  xScrollPercent.value = percent\n  setBodyXScroll(client)\n  emitEvent(props.onScroll, { type: 'horizontal', client, percent })\n}\n\nfunction handleYBarScroll(percent: number) {\n  const { totalHeight } = state\n  const client = (percent * (totalHeight - (bodyScrollHeight.value ?? 0))) / 100\n\n  yScrollPercent.value = percent\n  setBodyYScroll(client)\n  emitYScroll(client, percent)\n}\n\nfunction emitYScroll(client: number, percent: number) {\n  runInLocked()\n  nextFrameOnce(computeRenderRows)\n  emitEvent(props.onScroll, { type: 'vertical', client, percent })\n}\n\nfunction handleResize() {\n  if (mainScroll.value?.content) {\n    bodyWidth.value = mainScroll.value.content.offsetWidth\n  }\n\n  isMounted && refresh()\n}\n\nfunction increaseColumn(column: TableColumnOptions) {\n  tempColumns.add(column)\n}\n\nfunction decreaseColumn(column: TableColumnOptions) {\n  tempColumns.delete(column)\n}\n\nfunction increaseSummary(summary: TableSummaryOptions) {\n  tempSummaries.add(summary)\n}\n\nfunction decreaseSummary(summary: TableSummaryOptions) {\n  tempSummaries.delete(summary)\n}\n\nfunction updateColumns() {\n  runInLocked(() => {\n    setColumns(allColumns.value)\n    isMounted && computeTableWidth()\n    nextTick(() => {\n      hasDragColumn.value = getters.hasDragColumn\n    })\n  })\n}\n\nfunction setColumnProp(key: Key, prop: string, value: any) {\n  mutations.setColumnProp(key, prop, value)\n}\n\nfunction updateSummaries() {\n  runInLocked(() => {\n    setSummaries(allSummaries.value)\n  })\n}\n\nfunction setSummaryProp(key: Key, prop: string, value: any) {\n  mutations.setSummaryProp(key, prop, value)\n}\n\nfunction getTableElement() {\n  return wrapper.value\n}\n\nfunction refreshXScroll() {\n  mainScroll.value?.refresh()\n  xHeadScroll.value?.refresh()\n  xAboveScroll.value?.refresh()\n  xBelowScroll.value?.refresh()\n}\n\nfunction emitRowCheck(payload: TableRowPayload & { checked: boolean }) {\n  emitEvent(props.onRowCheck, payload)\n}\n\nfunction emitAllRowCheck(checked: boolean, partial: boolean) {\n  emitEvent(props.onRowCheckAll, checked, partial)\n}\n\nfunction emitRowExpand(payload: TableRowPayload & { expanded: boolean }) {\n  emitEvent(props.onRowExpand, payload)\n}\n\nfunction emitRowTreeExpand(payload: TableRowPayload & { expanded: boolean }) {\n  emitEvent(props.onRowTreeExpand, payload)\n}\n\nfunction emitRowFilter() {\n  const { columns, filters } = state\n  const columnMap = transformListToMap(columns, 'key')\n  const profiles = Array.from(filters.keys())\n    .filter(key => filters.get(key)!.active)\n    .map(key => {\n      const column = columnMap[key as string]\n\n      return {\n        name: column.name,\n        key: column.key,\n        meta: column.meta!,\n        active: filters.get(key)!.active!\n      }\n    })\n\n  computeRenderRows(true)\n  emitEvent(\n    props.onRowFilter,\n    profiles,\n    getters.filteredData.map(row => row.data)\n  )\n}\n\nfunction emitRowSort() {\n  const { columns, sorters } = state\n  const columnMap = transformListToMap(columns, 'key')\n  const profiles = Array.from(sorters.keys())\n    .filter(key => sorters.get(key)!.type)\n    .map(key => {\n      const column = columnMap[key as string]\n      const sorter = sorters.get(key)!\n\n      return {\n        name: column.name,\n        key: column.key,\n        meta: column.meta!,\n        type: sorter.type!,\n        order: sorter.order\n      }\n    })\n\n  computeRenderRows(true)\n  emitEvent(\n    props.onRowSort,\n    profiles,\n    getters.sortedData.map(row => row.data)\n  )\n}\n\nlet dragState: {\n  draggingRow: TableRowState,\n  tableRect: DOMRect,\n  willDropRow: TableRowState | null,\n  dropType: DropType,\n  dropped: boolean\n} | null\n\nfunction handleRowDragStart(rowInstance: TableRowInstance, event: DragEvent) {\n  dragState = {\n    draggingRow: rowInstance.row,\n    tableRect: wrapper.value!.getBoundingClientRect(),\n    willDropRow: null,\n    dropType: DropType.BEFORE,\n    dropped: false\n  }\n\n  setDragging(true)\n  emitEvent(props.onRowDragStart, rowInstance.row.data, event)\n}\n\nfunction handleRowDragOver(rowInstance: TableRowInstance, event: DragEvent) {\n  if (!dragState || !rowInstance.el) return\n\n  const dropRowRect = rowInstance.el.getBoundingClientRect()\n  const tableRect = dragState.tableRect\n  const prevPercent = state.disabledTree ? 0.5 : 0.25\n  const nextPercent = state.disabledTree ? 0.5 : 0.75\n  const distance = event.clientY - dropRowRect.top\n  const dropRowHeight = dropRowRect.height\n\n  let dropType: DropType\n  let indicatorTop = -9999\n  let isIndicatorShow = true\n\n  if (distance < dropRowHeight * prevPercent) {\n    dropType = DropType.BEFORE\n    indicatorTop = dropRowRect.top - tableRect.top\n  } else if (distance >= dropRowHeight * nextPercent) {\n    dropType = DropType.AFTER\n    indicatorTop = dropRowRect.bottom - tableRect.top\n  } else {\n    dropType = DropType.INNER\n    isIndicatorShow = false\n  }\n\n  if (indicator.value) {\n    indicator.value.style.top = `${indicatorTop - 2}px`\n  }\n\n  dragState.willDropRow = rowInstance.row\n  dragState.dropType = dropType\n\n  indicatorShow.value = isIndicatorShow\n  indicatorType.value = dropType\n\n  emitEvent(props.onRowDragOver, rowInstance.row.data, event)\n}\n\nfunction isLeftInsideRight(left: TableRowState, right: TableRowState) {\n  if (!left || !right) return true\n\n  while (left) {\n    if (left === right || left.key === right.key) {\n      return true\n    }\n\n    left = getParentRow(left.key)!\n  }\n\n  return false\n}\n\nfunction handleRowDrop(rowInstance: TableRowInstance, event: DragEvent) {\n  if (!dragState) return\n\n  const { draggingRow, willDropRow, dropType } = dragState\n\n  if (!willDropRow || isLeftInsideRight(willDropRow, draggingRow)) return\n\n  let currentKey: Key\n  let parent: TableRowState | null\n\n  if (draggingRow) {\n    parent = getParentRow(draggingRow.key)\n\n    if (!parent) {\n      parent = {\n        children: state.treeRowData\n      } as TableRowState\n    }\n\n    currentKey = draggingRow.key\n    removeArrayItem(parent.children, item => item.key === currentKey)\n\n    if (!parent.children?.length) {\n      parent.treeExpanded = false\n    }\n  }\n\n  if (dropType === DropType.INNER) {\n    if (!Array.isArray(willDropRow.children)) {\n      willDropRow.children = []\n    }\n\n    const children = Array.from(willDropRow.children)\n\n    children.push(draggingRow)\n\n    willDropRow.children = children\n    willDropRow.treeExpanded = true\n    draggingRow.parent = willDropRow.key\n  } else {\n    currentKey = willDropRow.key\n    parent = getParentRow(willDropRow.key)\n\n    if (!parent) {\n      parent = {\n        children: state.treeRowData\n      } as TableRowState\n    }\n\n    const index = parent.children.findIndex(row => row.key === currentKey)\n\n    if (~index) {\n      parent.children.splice(+(dropType === DropType.AFTER) + index, 0, draggingRow)\n\n      draggingRow.parent = parent.key\n    }\n  }\n\n  dragState.dropped = true\n\n  refreshRowDepth()\n  flatTreeRows()\n  refreshRowIndex()\n  emitEvent(props.onRowDrop, rowInstance.row.data, dropType!, event)\n}\n\nfunction handleRowDragEnd(event: DragEvent) {\n  if (!dragState) return\n\n  const { draggingRow, dropped } = dragState\n\n  dragState = null\n  indicatorShow.value = false\n\n  nextTick(() => {\n    const allDataPayload = dropped ? getCurrentData() : state.data\n\n    setDragging(false)\n    dropped && emit('update:data', allDataPayload)\n    emitEvent(props.onRowDragEnd, draggingRow.data, allDataPayload, event)\n  })\n}\n\nfunction emitRowEvent(type: MouseEventType, payload: TableRowPayload) {\n  emitEvent(props[`onRow${type}`], payload)\n}\n\nfunction emitCellEvent(type: MouseEventType, payload: TableCellPayload) {\n  emitEvent(props[`onCell${type}`], payload)\n}\n\nfunction emitHeadEvent(type: MouseEventType, payload: TableHeadPayload) {\n  emitEvent(props[`onHead${type}`], payload)\n}\n\nfunction emitColResize(type: MoveEventType, payload: TableColResizePayload) {\n  emitEvent(props[`onColResize${type}`], payload)\n}\n\nfunction emitFootEvent(type: MouseEventType, payload: TableFootPayload) {\n  emitEvent(props[`onFoot${type}`], payload)\n}\n\nfunction computeRenderRows(force = false) {\n  const { totalHeight, bodyYScroll, heightBITree } = state\n  const { processedData } = getters\n  const rowCount = processedData.length\n\n  if (!props.virtual) {\n    setRenderRows(0, rowCount, force)\n\n    return\n  }\n\n  const viewHeight = Math.min(bodyHeight.value || 0, bodyScrollHeight.value || 0)\n\n  if (!viewHeight) {\n    setRenderRows(0, 0, force)\n  }\n\n  let viewStart = bodyYScroll\n  let viewEnd = bodyYScroll + viewHeight\n\n  if (viewEnd > totalHeight) {\n    viewEnd = totalHeight\n    viewStart = viewEnd - viewHeight\n  }\n\n  const start = heightBITree.boundIndex(viewStart)\n  const end = heightBITree.boundIndex(viewEnd)\n  const renderStart = Math.max(start - props.bufferCount, 0)\n  const renderEnd = Math.min(end + props.bufferCount + 1, rowCount)\n\n  setRenderRows(renderStart, renderEnd, force)\n}\n\nfunction refresh() {\n  return runInLocked(() => {\n    nextTick(computeTableWidth)\n    setTimeout(() => {\n      computeBodyHeight()\n      refreshPercentScroll()\n      nextFrameOnce(computeRenderRows)\n    }, 0)\n  })\n}\n\nasync function runInLocked(handler = noop, delay = 250) {\n  clearTimeout(timer.locked)\n\n  setLocked(true)\n  await handler()\n\n  return new Promise<void>(resolve => {\n    timer.locked = setTimeout(() => {\n      setLocked(false)\n      resolve()\n    }, delay)\n  })\n}\n\nfunction refreshPercentScroll() {\n  clearTimeout(timer.scroll)\n\n  timer.scroll = setTimeout(() => {\n    const { totalHeight, bodyYScroll } = state\n\n    yScrollPercent.value = Math.max(\n      Math.min((bodyYScroll / (totalHeight - (bodyScrollHeight.value ?? 0) || 1)) * 100, 100),\n      0\n    )\n    syncBarScroll()\n    nextTick(() => {\n      computeBodyHeight()\n    })\n    runInLocked()\n    nextFrameOnce(computeRenderRows)\n  }, 10)\n}\n\nfunction getSelected() {\n  const data = state.rowData\n  const selectedData = []\n\n  for (let i = 0, len = data.length; i < len; ++i) {\n    const row = data[i]\n\n    if (row.checked) {\n      selectedData.push(row.data)\n    }\n  }\n\n  return selectedData\n}\n\nfunction setRowChecked(keyOrData: Key | Record<any, any>, checked?: boolean) {\n  const row = queryRow(keyOrData)\n\n  if (!row || getters.disableCheckRows.has(row.key)) return\n\n  handleCheck(row.key, checked ?? !row.checked)\n}\n\nfunction setRowTreeExpanded(keyOrData: Key | Record<any, any>, expanded?: boolean) {\n  const row = queryRow(keyOrData)\n\n  if (!row) return\n\n  runInLocked()\n  setTreeExpanded(row.key, expanded ?? !row.treeExpanded)\n}\n\nfunction renderTableSlot({ name }: { name: string }) {\n  return renderSlot(slots, name)\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"className\"\n    role=\"table\"\n    :style=\"style\"\n    :aria-rowcount=\"props.data.length\"\n  >\n    <div v-show=\"false\" role=\"none\" aria-hidden>\n      <slot></slot>\n      <template\n        v-for=\"(column, index) in props.columns\"\n        :key=\"column.key ?? `__inner-column-${index}`\"\n      >\n        <TableColumnGroup v-if=\"'children' in column\" v-bind=\"column\"></TableColumnGroup>\n        <TableColumn v-else v-bind=\"column\" :id-key=\"column.key\"></TableColumn>\n      </template>\n      <TableSummary\n        v-for=\"({ key, ...others }, index) in props.summaries\"\n        v-bind=\"others\"\n        :key=\"`__inner-summary-${index}`\"\n        :id-key=\"key\"\n      ></TableSummary>\n    </div>\n    <div ref=\"thead\" :class=\"nh.be('head-wrapper')\">\n      <NativeScroll\n        ref=\"xHeadScroll\"\n        inherit\n        mode=\"horizontal\"\n        scroll-only\n        :class=\"[nh.be('wrapper'), props.scrollClass.horizontal]\"\n        :scroll-x=\"state.bodyXScroll\"\n        @scroll=\"handleXScroll\"\n      >\n        <div\n          v-if=\"state.leftFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'left')]: true,\n            [nh.bem('fixed', 'active')]: leftFixedActive\n          }\"\n        >\n          <TableHead fixed=\"left\"></TableHead>\n        </div>\n        <TableHead></TableHead>\n        <div\n          v-if=\"state.rightFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'right')]: true,\n            [nh.bem('fixed', 'active')]: rightFixedActive\n          }\"\n        >\n          <TableHead fixed=\"right\"></TableHead>\n        </div>\n      </NativeScroll>\n    </div>\n    <div\n      v-if=\"state.aboveSummaries.length\"\n      ref=\"aboveTfoot\"\n      :class=\"[nh.be('foot-wrapper'), nh.bem('foot-wrapper', 'above')]\"\n    >\n      <NativeScroll\n        ref=\"xAboveScroll\"\n        inherit\n        mode=\"horizontal\"\n        scroll-only\n        :class=\"[nh.be('wrapper'), props.scrollClass.horizontal]\"\n        :scroll-x=\"state.bodyXScroll\"\n        @scroll=\"handleXScroll\"\n      >\n        <div\n          v-if=\"state.leftFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'left')]: true,\n            [nh.bem('fixed', 'active')]: leftFixedActive\n          }\"\n        >\n          <TableFoot fixed=\"left\" above></TableFoot>\n        </div>\n        <TableFoot above></TableFoot>\n        <div\n          v-if=\"state.rightFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'right')]: true,\n            [nh.bem('fixed', 'active')]: rightFixedActive\n          }\"\n        >\n          <TableFoot fixed=\"right\" above></TableFoot>\n        </div>\n      </NativeScroll>\n    </div>\n    <div\n      :class=\"nh.be('body-wrapper')\"\n      :style=\"\n        !bodyScrollHeight && state.totalHeight\n          ? {\n            height: `${state.totalHeight}px`,\n            transition:\n              props.noTransition || state.locked\n                ? undefined\n                : `height ${nh.gnv('transition-base')}`\n          }\n          : undefined\n      \"\n    >\n      <NativeScroll\n        ref=\"mainScroll\"\n        inherit\n        mode=\"both\"\n        scroll-only\n        observe-deep\n        :class=\"[nh.be('wrapper'), props.scrollClass.major]\"\n        :bar-class=\"nh.bem('bar', 'horizontal')\"\n        :height=\"bodyScrollHeight\"\n        :scroll-x=\"state.bodyXScroll\"\n        :scroll-y=\"state.bodyYScroll\"\n        @scroll=\"handleMainScroll\"\n        @x-enabled-change=\"xScrollEnabled = $event\"\n        @y-enabled-change=\"yScrollEnabled = $event\"\n        @resize=\"handleResize\"\n      >\n        <div\n          v-if=\"state.leftFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'left')]: true,\n            [nh.bem('fixed', 'active')]: leftFixedActive\n          }\"\n          :style=\"{ minHeight: `${state.totalHeight}px` }\"\n        >\n          <TableBody fixed=\"left\">\n            <template #empty=\"{ isFixed }\">\n              <slot name=\"empty\" :is-fixed=\"isFixed\"></slot>\n            </template>\n          </TableBody>\n        </div>\n        <TableBody>\n          <template #empty=\"{ isFixed }\">\n            <slot name=\"empty\" :is-fixed=\"isFixed\"></slot>\n          </template>\n        </TableBody>\n        <div\n          v-if=\"state.rightFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'right')]: true,\n            [nh.bem('fixed', 'active')]: rightFixedActive\n          }\"\n          :style=\"{ minHeight: `${state.totalHeight}px` }\"\n        >\n          <TableBody fixed=\"right\">\n            <template #empty=\"{ isFixed }\">\n              <slot name=\"empty\" :is-fixed=\"isFixed\"></slot>\n            </template>\n          </TableBody>\n        </div>\n      </NativeScroll>\n    </div>\n    <div\n      v-if=\"state.belowSummaries.length\"\n      ref=\"belowTfoot\"\n      :class=\"[nh.be('foot-wrapper'), nh.bem('foot-wrapper', 'below')]\"\n    >\n      <NativeScroll\n        ref=\"xBelowScroll\"\n        inherit\n        mode=\"horizontal\"\n        scroll-only\n        :class=\"[nh.be('wrapper'), props.scrollClass.horizontal]\"\n        :bar-class=\"nh.bem('bar', 'horizontal')\"\n        :bar-fade=\"props.barFade\"\n        :scroll-x=\"state.bodyXScroll\"\n        @scroll=\"handleXScroll\"\n      >\n        <div\n          v-if=\"state.leftFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'left')]: true,\n            [nh.bem('fixed', 'active')]: leftFixedActive\n          }\"\n        >\n          <TableFoot fixed=\"left\"></TableFoot>\n        </div>\n        <TableFoot></TableFoot>\n        <div\n          v-if=\"state.rightFixedColumns.length\"\n          :class=\"{\n            [nh.bem('fixed', 'right')]: true,\n            [nh.bem('fixed', 'active')]: rightFixedActive\n          }\"\n        >\n          <TableFoot fixed=\"right\"></TableFoot>\n        </div>\n      </NativeScroll>\n    </div>\n    <Scrollbar\n      v-if=\"props.useXBar && useXScroll\"\n      ref=\"xScrollbar\"\n      inherit\n      placement=\"bottom\"\n      :class=\"nh.bem('bar', 'horizontal')\"\n      :fade=\"props.barFade\"\n      :disabled=\"!xScrollEnabled\"\n      :bar-length=\"xBarLength\"\n      :style=\"{ bottom: `${footHeight}px` }\"\n      @scroll-start=\"setBarScrolling(true)\"\n      @scroll=\"handleXBarScroll\"\n      @scroll-end=\"setBarScrolling(false)\"\n    ></Scrollbar>\n    <Scrollbar\n      v-if=\"props.useYBar && bodyScrollHeight\"\n      ref=\"yScrollbar\"\n      inherit\n      placement=\"right\"\n      :class=\"nh.bem('bar', 'vertical')\"\n      :fade=\"props.barFade\"\n      :disabled=\"!yScrollEnabled\"\n      :bar-length=\"yBarLength\"\n      :style=\"{ top: `${headHeight}px`, bottom: `${footHeight}px` }\"\n      @scroll-start=\"setBarScrolling(true)\"\n      @scroll=\"handleYBarScroll\"\n      @scroll-end=\"setBarScrolling(false)\"\n    ></Scrollbar>\n    <div\n      v-if=\"props.rowDraggable || hasDragColumn\"\n      v-show=\"indicatorShow\"\n      ref=\"indicator\"\n      :class=\"[\n        nh.be('indicator'),\n        indicatorType === 'before' && nh.bem('indicator', 'before'),\n        indicatorType === 'after' && nh.bem('indicator', 'after')\n      ]\"\n    ></div>\n    <div\n      v-if=\"state.colResizable === 'lazy'\"\n      v-show=\"state.colResizing\"\n      :class=\"nh.be('resize-indicator')\"\n      :style=\"{ left: `${state.resizeLeft}px` }\"\n    ></div>\n  </div>\n</template>\n", "import type {\n  Data,\n  TableColumnOptions,\n  TableFilterOptions,\n  TableSorterOptions,\n  TableSummaryOptions\n} from './symbol'\n\nexport function defineTableFilter<D = Data, Val extends string | number = string | number>(\n  filter: TableFilterOptions<D, Val>\n) {\n  return filter as TableFilterOptions<any, any>\n}\n\nexport function defineTableSorter<D = Data>(sorter: TableSorterOptions<D>) {\n  return sorter as TableSorterOptions<any>\n}\n\nexport function defineTableColumn<D = Data, Val extends string | number = string | number>(\n  column: TableColumnOptions<D, Val>\n) {\n  return column\n}\n\nexport function defineTableColumns<D = Data, Val extends string | number = string | number>(\n  columns: TableColumnOptions<D, Val>[]\n) {\n  return columns\n}\n\nexport function defineTableSummary<D = Data, Val extends string | number = string | number>(\n  summary: TableSummaryOptions<D, Val>\n) {\n  return summary\n}\n\nexport function defineTableSummaries<D = Data, Val extends string | number = string | number>(\n  summaries: TableSummaryOptions<D, Val>[]\n) {\n  return summaries\n}\n\nexport {\n  /** @deprecated Please use `defineTableFilter` to replace it */\n  defineTableFilter as defineFilter,\n  /** @deprecated Please use `defineTableSorter` to replace it */\n  defineTableSorter as defineSorter,\n  /** @deprecated Please use `defineTableColumn` to replace it */\n  defineTableColumn as defineColumn,\n  /** @deprecated Please use `defineTableColumns` to replace it */\n  defineTableColumns as defineColumns,\n  /** @deprecated Please use `defineTableSummary` to replace it */\n  defineTableSummary as defineSummary,\n  /** @deprecated Please use `defineTableSummaries` to replace it */\n  defineTableSummaries as defineSummaries\n}\n", "<template>\n  <div :class=\"[nh.b(), nh.bm(props.placement), props.inherit && nh.bm('inherit')]\">\n    <div :class=\"nh.be('header')\">\n      <TabNav\n        inherit\n        :active=\"currentActive\"\n        :card=\"props.card\"\n        :align=\"props.align\"\n        :placement=\"props.placement\"\n        :closable=\"props.closable\"\n        :show-add=\"props.showAdd\"\n        @change=\"handleActive\"\n        @add=\"handleAdd\"\n        @close=\"handleClose\"\n      >\n        <template v-if=\"$slots.prefix\" #prefix>\n          <slot name=\"prefix\"></slot>\n        </template>\n        <TabNavItem\n          v-for=\"(item, index) in itemList\"\n          :key=\"index\"\n          :label=\"item.label\"\n          :icon=\"item.icon\"\n          :disabled=\"item.disabled\"\n          :closable=\"item.closable\"\n        >\n          <template v-if=\"isFunction(item.labelRenderer)\">\n            <Renderer\n              :renderer=\"item.labelRenderer\"\n              :data=\"{ label: item.label, disabled: item.disabled }\"\n            ></Renderer>\n          </template>\n          <template v-else>\n            {{ item.name || item.label }}\n          </template>\n        </TabNavItem>\n        <template v-if=\"$slots.suffix\" #suffix>\n          <slot name=\"suffix\"></slot>\n        </template>\n        <template v-if=\"$slots.add\">\n          <slot name=\"add\"></slot>\n        </template>\n      </TabNav>\n    </div>\n    <div\n      :class=\"{\n        [nh.be('main')]: true,\n        [nh.bem('main', 'transition')]: isTransition\n      }\"\n      @transitionend=\"isTransition = false\"\n    >\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Renderer } from '@/components/renderer'\nimport { TabNav } from '@/components/tab-nav'\nimport { TabNavItem } from '@/components/tab-nav-item'\n\nimport { computed, defineComponent, onMounted, provide, reactive, ref, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { debounceMinor, isFunction, isNull } from '@vexip-ui/utils'\nimport { tabsProps } from './props'\nimport { TABS_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\ntype ChangeEvent = (label: string | number) => void\n\nexport default defineComponent({\n  name: 'Tabs',\n  components: {\n    Renderer,\n    TabNav,\n    TabNavItem\n  },\n  props: tabsProps,\n  emits: ['update:active'],\n  setup(_props, { emit }) {\n    const props = useProps('tabs', _props, {\n      active: {\n        default: null,\n        static: true\n      },\n      card: false,\n      align: 'left',\n      placement: 'top',\n      closable: false,\n      showAdd: false\n    })\n\n    const currentActive = ref(props.active)\n    const currentIndex = ref(0)\n    const itemStates = reactive(new Set<ItemState>())\n    const isTransition = ref(false)\n\n    const mainStyle = computed(() => {\n      return {\n        transform: `translateX(-${currentIndex.value}00%) translateZ(0)`\n      }\n    })\n    const itemList = computed(() => Array.from(itemStates))\n\n    const refreshLabels = debounceMinor(() => {\n      itemList.value.forEach((item, index) => {\n        if (isNull(item.label)) {\n          item.label = index + 1\n        }\n      })\n\n      if (itemList.value.length >= 1 && isActiveEmpty()) {\n        currentActive.value = itemList.value[0].label\n      }\n    })\n    const computeIndex = debounceMinor(() => {\n      const index = itemList.value.findIndex(item => item.label === currentActive.value)\n\n      if (~index) {\n        currentIndex.value = index\n      }\n    })\n\n    provide(\n      TABS_STATE,\n      reactive({\n        currentActive,\n        handleActive,\n        increaseItem,\n        decreaseItem,\n        refreshLabels\n      })\n    )\n\n    watch(\n      () => props.active,\n      value => {\n        currentActive.value = value\n      }\n    )\n\n    onMounted(computeIndex)\n\n    function isActiveEmpty() {\n      return isNull(currentActive.value) || currentActive.value === ''\n    }\n\n    function increaseItem(item: ItemState) {\n      itemStates.add(item)\n      refreshLabels()\n    }\n\n    function decreaseItem(item: ItemState) {\n      itemStates.delete(item)\n      refreshLabels()\n    }\n\n    function handleActive(label: string | number) {\n      currentActive.value = label\n\n      computeIndex()\n      emit('update:active', label)\n      emitEvent(props.onChange as ChangeEvent, label)\n    }\n\n    function handleAdd() {\n      emitEvent(props.onAdd)\n    }\n\n    function handleClose(label: string | number) {\n      emitEvent(props.onClose as ChangeEvent, label)\n    }\n\n    return {\n      props,\n      nh: useNameHelper('tabs'),\n      currentActive,\n      isTransition,\n\n      mainStyle,\n      itemList,\n\n      isFunction,\n      handleActive,\n      handleAdd,\n      handleClose\n    }\n  }\n})\n</script>\n", "<template>\n  <div :class=\"[nh.b(), nh.bm(props.placement), props.inherit && nh.bm('inherit')]\">\n    <div :class=\"nh.be('header')\">\n      <TabNav\n        inherit\n        :active=\"currentActive\"\n        :card=\"props.card\"\n        :align=\"props.align\"\n        :placement=\"props.placement\"\n        :closable=\"props.closable\"\n        :show-add=\"props.showAdd\"\n        @change=\"handleActive\"\n        @add=\"handleAdd\"\n        @close=\"handleClose\"\n      >\n        <template v-if=\"$slots.prefix\" #prefix>\n          <slot name=\"prefix\"></slot>\n        </template>\n        <TabNavItem\n          v-for=\"(item, index) in itemList\"\n          :key=\"index\"\n          :label=\"item.label\"\n          :icon=\"item.icon\"\n          :disabled=\"item.disabled\"\n          :closable=\"item.closable\"\n        >\n          <template v-if=\"isFunction(item.labelRenderer)\">\n            <Renderer\n              :renderer=\"item.labelRenderer\"\n              :data=\"{ label: item.label, disabled: item.disabled }\"\n            ></Renderer>\n          </template>\n          <template v-else>\n            {{ item.name || item.label }}\n          </template>\n        </TabNavItem>\n        <template v-if=\"$slots.suffix\" #suffix>\n          <slot name=\"suffix\"></slot>\n        </template>\n        <template v-if=\"$slots.add\">\n          <slot name=\"add\"></slot>\n        </template>\n      </TabNav>\n    </div>\n    <div\n      :class=\"{\n        [nh.be('main')]: true,\n        [nh.bem('main', 'transition')]: isTransition\n      }\"\n      @transitionend=\"isTransition = false\"\n    >\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Renderer } from '@/components/renderer'\nimport { TabNav } from '@/components/tab-nav'\nimport { TabNavItem } from '@/components/tab-nav-item'\n\nimport { computed, defineComponent, onMounted, provide, reactive, ref, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { debounceMinor, isFunction, isNull } from '@vexip-ui/utils'\nimport { tabsProps } from './props'\nimport { TABS_STATE } from './symbol'\n\nimport type { ItemState } from './symbol'\n\ntype ChangeEvent = (label: string | number) => void\n\nexport default defineComponent({\n  name: 'Tabs',\n  components: {\n    Renderer,\n    TabNav,\n    TabNavItem\n  },\n  props: tabsProps,\n  emits: ['update:active'],\n  setup(_props, { emit }) {\n    const props = useProps('tabs', _props, {\n      active: {\n        default: null,\n        static: true\n      },\n      card: false,\n      align: 'left',\n      placement: 'top',\n      closable: false,\n      showAdd: false\n    })\n\n    const currentActive = ref(props.active)\n    const currentIndex = ref(0)\n    const itemStates = reactive(new Set<ItemState>())\n    const isTransition = ref(false)\n\n    const mainStyle = computed(() => {\n      return {\n        transform: `translateX(-${currentIndex.value}00%) translateZ(0)`\n      }\n    })\n    const itemList = computed(() => Array.from(itemStates))\n\n    const refreshLabels = debounceMinor(() => {\n      itemList.value.forEach((item, index) => {\n        if (isNull(item.label)) {\n          item.label = index + 1\n        }\n      })\n\n      if (itemList.value.length >= 1 && isActiveEmpty()) {\n        currentActive.value = itemList.value[0].label\n      }\n    })\n    const computeIndex = debounceMinor(() => {\n      const index = itemList.value.findIndex(item => item.label === currentActive.value)\n\n      if (~index) {\n        currentIndex.value = index\n      }\n    })\n\n    provide(\n      TABS_STATE,\n      reactive({\n        currentActive,\n        handleActive,\n        increaseItem,\n        decreaseItem,\n        refreshLabels\n      })\n    )\n\n    watch(\n      () => props.active,\n      value => {\n        currentActive.value = value\n      }\n    )\n\n    onMounted(computeIndex)\n\n    function isActiveEmpty() {\n      return isNull(currentActive.value) || currentActive.value === ''\n    }\n\n    function increaseItem(item: ItemState) {\n      itemStates.add(item)\n      refreshLabels()\n    }\n\n    function decreaseItem(item: ItemState) {\n      itemStates.delete(item)\n      refreshLabels()\n    }\n\n    function handleActive(label: string | number) {\n      currentActive.value = label\n\n      computeIndex()\n      emit('update:active', label)\n      emitEvent(props.onChange as ChangeEvent, label)\n    }\n\n    function handleAdd() {\n      emitEvent(props.onAdd)\n    }\n\n    function handleClose(label: string | number) {\n      emitEvent(props.onClose as ChangeEvent, label)\n    }\n\n    return {\n      props,\n      nh: useNameHelper('tabs'),\n      currentActive,\n      isTransition,\n\n      mainStyle,\n      itemList,\n\n      isFunction,\n      handleActive,\n      handleAdd,\n      handleClose\n    }\n  }\n})\n</script>\n", "import {\n  booleanProp,\n  buildProps,\n  classProp,\n  eventProp,\n  iconProp,\n  localeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\n\nexport const textareaProps = buildProps({\n  state: stateProp,\n  locale: localeProp('input'),\n  value: String,\n  placeholder: String,\n  rows: Number,\n  noResize: booleanProp,\n  autofocus: booleanProp,\n  spellcheck: booleanProp,\n  autocomplete: booleanProp,\n  readonly: booleanProp,\n  disabled: booleanProp,\n  debounce: booleanProp,\n  delay: Number,\n  maxLength: Number,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  sync: booleanProp,\n  controlClass: classProp,\n  controlAttrs: Object as PropType<Record<string, any>>,\n  name: String,\n  onFocus: eventProp<(event: FocusEvent) => void>(),\n  onBlur: eventProp<(event: FocusEvent) => void>(),\n  onInput: eventProp<(value: string) => void>(),\n  onChange: eventProp<(value: string) => void>(),\n  onEnter: eventProp(),\n  onKeyDown: eventProp<(event: KeyboardEvent) => void>(),\n  onKeyPress: eventProp<(event: KeyboardEvent) => void>(),\n  onKeyUp: eventProp<(event: KeyboardEvent) => void>(),\n  onCompositionStart: eventProp<(event: CompositionEvent) => void>(),\n  onCompositionEnd: eventProp<(event: CompositionEvent) => void>()\n})\n\nexport type TextareaProps = ExtractPropTypes<typeof textareaProps>\nexport type TextareaCProps = ConfigurableProps<TextareaProps>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, ref, toRef, watch } from 'vue'\n\nimport {\n  createIconProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { debounce, isNull, throttle, toNumber } from '@vexip-ui/utils'\nimport { textareaProps } from './props'\n\ndefineOptions({ name: 'Textarea' })\n\nconst { idFor, state, disabled, loading, validateField, getFieldValue, setFieldValue } =\n  useFieldStore<string>(() => textarea.value?.focus())\n\nconst _props = defineProps(textareaProps)\nconst props = useProps('textarea', _props, {\n  state: createStateProp(state),\n  locale: null,\n  value: {\n    default: () => getFieldValue(''),\n    static: true\n  },\n  placeholder: null,\n  rows: 2,\n  noResize: false,\n  autofocus: false,\n  spellcheck: false,\n  autocomplete: false,\n  readonly: false,\n  disabled: () => disabled.value,\n  debounce: false,\n  delay: null,\n  maxLength: 0,\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  sync: false,\n  controlClass: null,\n  controlAttrs: null,\n  name: {\n    default: '',\n    static: true\n  }\n})\n\nconst emit = defineEmits(['update:value'])\n\nconst nh = useNameHelper('textarea')\nconst locale = useLocale('input', toRef(props, 'locale'))\nconst icons = useIcons()\n\nconst focused = ref(false)\nconst currentValue = ref(props.value)\nconst currentLength = ref(props.value ? props.value.length : 0)\nconst composing = ref(false)\n\nconst textarea = ref<HTMLTextAreaElement>()\n\nlet lastValue = props.value\n\nconst isReadonly = computed(() => {\n  return (props.loading && props.loadingLock) || props.readonly\n})\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.ns('input-vars')]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('focused')]: focused.value,\n    [nh.bm('disabled')]: props.disabled,\n    [nh.bm('readonly')]: isReadonly.value,\n    [nh.bm('loading')]: props.loading,\n    [nh.bm('no-resize')]: props.noResize,\n    [nh.bm(props.state)]: props.state !== 'default'\n  }\n})\n\nwatch(\n  () => props.value,\n  value => {\n    currentValue.value = value\n    lastValue = value\n    limitValueLength()\n  }\n)\n\ndefineExpose({\n  idFor,\n  currentValue,\n  currentLength,\n  composing,\n  isReadonly,\n  textarea,\n  copyValue,\n  focus: (options?: FocusOptions) => textarea.value?.focus(options),\n  blur: () => textarea.value?.blur()\n})\n\nfunction handleFocus(event: FocusEvent) {\n  focused.value = true\n  emitEvent(props.onFocus, event)\n}\n\nfunction handleBlur(event: FocusEvent) {\n  focused.value = false\n  emitEvent(props.onBlur, event)\n}\n\nfunction handleChange(event: Event) {\n  const type = event.type as 'change' | 'input'\n\n  if (composing.value) {\n    if (type === 'input') return\n\n    composing.value = false\n  }\n\n  currentValue.value = (event.target as HTMLTextAreaElement).value\n  limitValueLength()\n\n  if (type === 'change') {\n    if (lastValue === currentValue.value) return\n\n    lastValue = currentValue.value\n\n    if (!props.sync) {\n      emit('update:value', currentValue.value)\n      setFieldValue(currentValue.value)\n    }\n\n    emitEvent(props.onChange, currentValue.value)\n\n    if (!props.sync) {\n      validateField()\n    }\n  } else {\n    if (props.sync) {\n      emit('update:value', currentValue.value)\n      setFieldValue(currentValue.value)\n    }\n\n    emitEvent(props.onInput, currentValue.value)\n\n    if (props.sync) {\n      validateField()\n    }\n  }\n}\n\nfunction handleEnter() {\n  emitEvent(props.onEnter)\n}\n\nfunction handleKeyDown(event: KeyboardEvent) {\n  emitEvent(props.onKeyDown, event)\n}\n\nfunction handleKeyPress(event: KeyboardEvent) {\n  emitEvent(props.onKeyPress, event)\n}\n\nfunction handleKeyUp(event: KeyboardEvent) {\n  emitEvent(props.onKeyUp, event)\n}\n\nfunction limitValueLength() {\n  let value = currentValue.value\n\n  if (isNull(value)) {\n    currentLength.value = 0\n\n    return\n  }\n\n  const maxLength = props.maxLength\n\n  if (maxLength && value.length > maxLength) {\n    value = value.slice(0, maxLength)\n  }\n\n  currentLength.value = value.length\n  currentValue.value = value\n}\n\nfunction copyValue() {\n  const textarea = document.createElement('textarea')\n\n  textarea.style.height = '0'\n  textarea.setAttribute('readonly', 'readonly')\n  textarea.value = currentValue.value\n  document.body.appendChild(textarea)\n  textarea.select()\n\n  const isSuccess = document.execCommand('copy')\n\n  document.body.removeChild(textarea)\n\n  return isSuccess\n}\n\nconst delay = toNumber(props.delay)\nconst handleInput = props.debounce\n  ? debounce(handleChange, delay || 100)\n  : throttle(handleChange, delay || 16)\n\nfunction handleCompositionStart(event: CompositionEvent) {\n  composing.value = true\n  emitEvent(props.onCompositionStart, event)\n}\n\nfunction handleCompositionEnd(event: CompositionEvent) {\n  if (composing.value) {\n    composing.value = false\n\n    if (textarea.value) {\n      textarea.value.dispatchEvent(new Event('input'))\n    }\n  }\n\n  emitEvent(props.onCompositionStart, event)\n}\n</script>\n\n<template>\n  <div :id=\"idFor\" :class=\"className\" @click=\"textarea?.focus()\">\n    <textarea\n      v-bind=\"props.controlAttrs\"\n      ref=\"textarea\"\n      :class=\"[nh.be('control'), props.controlAttrs?.class, props.controlClass]\"\n      :value=\"currentValue\"\n      :rows=\"props.rows\"\n      :autofocus=\"props.autofocus\"\n      :autocomplete=\"props.autocomplete ? 'on' : 'off'\"\n      :spellcheck=\"props.spellcheck\"\n      :disabled=\"props.disabled\"\n      :readonly=\"isReadonly\"\n      :placeholder=\"props.placeholder ?? locale.placeholder\"\n      :maxlength=\"props.maxLength > 0 ? props.maxLength : undefined\"\n      :name=\"props.name || props.controlAttrs?.name\"\n      @blur=\"handleBlur\"\n      @focus=\"handleFocus\"\n      @keyup.enter=\"handleEnter\"\n      @keyup=\"handleKeyUp\"\n      @keypress=\"handleKeyPress\"\n      @keydown=\"handleKeyDown\"\n      @input=\"handleInput\"\n      @change=\"handleChange\"\n      @compositionstart=\"handleCompositionStart\"\n      @compositionend=\"handleCompositionEnd\"\n    ></textarea>\n    <div :class=\"nh.be('extra')\">\n      <Transition :name=\"nh.ns('fade')\" appear>\n        <div v-if=\"props.loading\" :class=\"nh.be('loading')\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n            label=\"loading\"\n          ></Icon>\n        </div>\n      </Transition>\n      <div v-if=\"props.maxLength > 0\" :class=\"nh.be('count')\">\n        <slot name=\"count\" :value=\"currentValue\">\n          {{ props.maxLength === Infinity ? currentLength : `${currentLength}/${props.maxLength}` }}\n        </slot>\n      </div>\n    </div>\n  </div>\n</template>\n", "import { getCountWord, makeSentence } from '@vexip-ui/config'\nimport {\n  DAY_ON_MILLISECONDS,\n  HOUR_ON_MILLISECONDS,\n  MINUTE_ON_MILLISECONDS,\n  SECOND_ON_MILLISECONDS\n} from '@vexip-ui/utils'\n\nimport type { Ref } from 'vue'\n\nexport interface TimeAgoRecord {\n  datetime: Date,\n  timeAgo: Ref<string>,\n  locale: Ref<Record<string, string>>,\n  wordSpace: Ref<boolean>,\n  interval: false | number,\n  updated: number\n}\n\nlet id = 1\n\nexport function getId() {\n  return id++\n}\n\nconst recordMap = new Map<number, TimeAgoRecord>()\n\nlet timer: ReturnType<typeof setInterval>\nlet isRunning: boolean\n\nexport function subscribe(id: number, record: TimeAgoRecord) {\n  recordMap.set(id, record)\n\n  if (recordMap.size && !isRunning) {\n    clearInterval(timer)\n\n    timer = setInterval(() => {\n      isRunning = true\n\n      const current = Date.now()\n\n      recordMap.forEach(record => {\n        if (!record.interval) return\n\n        if (current - record.updated > record.interval) {\n          record.timeAgo.value = computeTimeAgo(\n            record.datetime,\n            current,\n            record.locale.value,\n            record.wordSpace.value\n          )\n          record.updated = current\n        }\n      })\n    }, 5000)\n  }\n}\n\nexport function unsubscribe(id: number) {\n  recordMap.delete(id)\n\n  if (!recordMap.size) {\n    clearInterval(timer)\n    isRunning = false\n  }\n}\n\nexport function computeTimeAgo(\n  date: Date,\n  current: number,\n  locale: Record<string, string>,\n  wordSpace: boolean\n) {\n  const diff = Math.abs(current - date.getTime())\n  const type = current > date.getTime() ? locale.ago : locale.late\n\n  let label: string\n  let usedDiff: number\n  let noFormat = false\n\n  if (diff < 10 * SECOND_ON_MILLISECONDS) {\n    label = locale.justNow\n    noFormat = true\n  } else if (diff < MINUTE_ON_MILLISECONDS) {\n    label = locale.second\n    usedDiff = Math.floor(diff / SECOND_ON_MILLISECONDS)\n  } else if (diff < HOUR_ON_MILLISECONDS) {\n    label = locale.minute\n    usedDiff = Math.floor(diff / MINUTE_ON_MILLISECONDS)\n  } else if (diff < DAY_ON_MILLISECONDS) {\n    label = locale.hour\n    usedDiff = Math.floor(diff / HOUR_ON_MILLISECONDS)\n  } else if (diff < 30 * DAY_ON_MILLISECONDS) {\n    usedDiff = Math.floor(diff / DAY_ON_MILLISECONDS)\n\n    if (usedDiff === 1) {\n      label = locale.yesterday\n      noFormat = true\n    } else {\n      label = locale.days\n    }\n  } else if (diff < 365 * DAY_ON_MILLISECONDS) {\n    usedDiff = Math.floor(diff / (30 * DAY_ON_MILLISECONDS))\n\n    if (usedDiff === 1) {\n      label = locale.lastMonth\n      noFormat = true\n    } else {\n      label = locale.months\n    }\n  } else {\n    usedDiff = Math.floor(diff / 365 / DAY_ON_MILLISECONDS)\n\n    if (usedDiff === 1) {\n      label = locale.lastYear\n      noFormat = true\n    } else {\n      label = locale.years\n    }\n  }\n\n  if (noFormat) {\n    return label\n  }\n\n  return makeSentence(`${getCountWord(label, usedDiff!)} ${type}`, wordSpace)\n}\n", "import { booleanNumberProp, booleanStringProp, buildProps, localeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Dateable } from '@vexip-ui/utils'\n\nexport const timeAgoProps = buildProps({\n  locale: localeProp('timeAgo'),\n  datetime: [String, Number, Date] as PropType<Dateable>,\n  interval: booleanNumberProp,\n  title: booleanStringProp,\n  titleFormat: String\n})\n\nexport type TimeAgoProps = ExtractPropTypes<typeof timeAgoProps>\nexport type TimeAgoCProps = ConfigurableProps<TimeAgoProps, 'datetime'>\n", "<script setup lang=\"ts\">\nimport { computed, onBeforeUnmount, ref, toRef, watch } from 'vue'\n\nimport { useLocale, useNameHelper, useProps, useWordSpace } from '@vexip-ui/config'\nimport { format, toDate } from '@vexip-ui/utils'\nimport { computeTimeAgo, getId, subscribe, unsubscribe } from './helper'\nimport { timeAgoProps } from './props'\n\nimport type { Dateable } from '@vexip-ui/utils'\n\ndefineOptions({ name: 'TimeAgo' })\n\nconst _props = defineProps(timeAgoProps)\nconst props = useProps('timeAgo', _props, {\n  locale: null,\n  datetime: {\n    default: () => Date.now(),\n    static: true\n  },\n  interval: {\n    default: false,\n    validator: value => typeof value === 'boolean' || value >= 1\n  },\n  title: false,\n  titleFormat: 'yyyy-MM-dd HH:mm:ss'\n})\n\nconst nh = useNameHelper('time-ago')\nconst datetime = toDateValue(props.datetime)\nconst locale = useLocale('timeAgo', toRef(props, 'locale'))\nconst wordSpace = useWordSpace()\nconst timeAgo = ref(computeTimeAgo(datetime, Date.now(), locale.value, wordSpace.value))\n\nconst id = getId()\nconst record = {\n  datetime,\n  timeAgo,\n  locale,\n  wordSpace,\n  interval: parseInterval(props.interval),\n  updated: Date.now()\n}\n\nconst currentTitle = computed(() => {\n  if (!props.title) return undefined\n\n  if (typeof props.title === 'string') return props.title\n\n  return format(props.datetime, props.titleFormat)\n})\n\nsubscribe(id, record)\n\nwatch(\n  () => props.datetime,\n  value => {\n    record.datetime = toDateValue(value)\n    timeAgo.value = computeTimeAgo(datetime, Date.now(), locale.value, wordSpace.value)\n  }\n)\nwatch(\n  () => props.interval,\n  value => {\n    record.interval = parseInterval(value)\n  }\n)\n\nonBeforeUnmount(() => {\n  unsubscribe(id)\n})\n\nfunction parseInterval(interval: boolean | number) {\n  return interval && (interval === true ? 1e4 : interval * 1000)\n}\n\nfunction toDateValue(value: Dateable) {\n  if (typeof value === 'string') {\n    value = value.replace(/-/g, '/')\n  }\n\n  return toDate(value)\n}\n\ndefineExpose({ timeAgo })\n</script>\n\n<template>\n  <span :class=\"[nh.b(), props.inherit && nh.bm('inherit')]\" :title=\"currentTitle\">\n    {{ timeAgo }}\n  </span>\n</template>\n", "<script setup lang=\"ts\">\nimport { computed, ref } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { doubleDigits } from '@vexip-ui/utils'\nimport { handleKeyEnter } from './helper'\n\nimport type { PropType } from 'vue'\nimport type { TimeType } from './symbol'\n\ndefineOptions({ name: 'TimeControl' })\n\nconst props = defineProps({\n  unitType: {\n    type: String as PropType<TimeType | ''>,\n    default: ''\n  },\n  enabled: {\n    type: Object as PropType<Record<TimeType, boolean>>,\n    default: () => ({})\n  },\n  activated: {\n    type: Object as PropType<Record<TimeType, boolean>>,\n    default: () => ({})\n  },\n  timeValue: {\n    type: Object as PropType<Record<TimeType, number>>,\n    default: () => ({})\n  },\n  separator: {\n    type: String,\n    default: ':'\n  },\n  visible: {\n    type: Boolean,\n    default: false\n  },\n  focused: {\n    type: Boolean,\n    default: false\n  },\n  filler: {\n    type: String,\n    default: '-',\n    validator: (value: string) => value.length === 1\n  },\n  steps: {\n    type: Array as PropType<number[]>,\n    default: () => [1, 1, 1]\n  },\n  ctrlSteps: {\n    type: Array as PropType<number[]>,\n    default: () => [5, 5, 5]\n  },\n  labels: {\n    type: Object as PropType<Partial<Record<TimeType, string>>>,\n    default: () => ({})\n  },\n  hasError: {\n    type: Boolean,\n    default: false\n  },\n  placeholder: {\n    type: String,\n    default: ''\n  },\n  readonly: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits([\n  'input',\n  'plus',\n  'minus',\n  'enter',\n  'cancel',\n  'unit-focus',\n  'unit-blur',\n  'prev-unit',\n  'next-unit',\n  'blur'\n])\n\nconst nh = useNameHelper('time-picker')\n\nconst wrapper = ref<HTMLElement>()\n\nconst isActivated = computed(() => {\n  return (Object.keys(props.enabled) as TimeType[]).every(type => {\n    return !props.enabled[type] || props.activated[type]\n  })\n})\nconst formattedHour = computed(() => {\n  return formatValue('hour')\n})\nconst formattedMinute = computed(() => {\n  return formatValue('minute')\n})\nconst formattedSecond = computed(() => {\n  return formatValue('second')\n})\n\ndefineExpose({\n  isActivated,\n  wrapper,\n  focus: () => {\n    wrapper.value?.focus()\n  },\n  blur: () => {\n    wrapper.value?.blur()\n  }\n})\n\nfunction formatValue(type: TimeType) {\n  return props.activated[type]\n    ? doubleDigits(props.timeValue[type])\n    : `${props.filler}${props.filler}`\n}\n\nfunction getUnitFocusClass(type: TimeType) {\n  return props.visible && props.unitType === type ? nh.bem('unit', 'focused') : null\n}\n\nfunction handleInputFocus(type: TimeType) {\n  if (props.readonly) return\n\n  emit('unit-focus', type)\n}\n\nfunction handleInput(event: KeyboardEvent) {\n  if (!props.visible) return\n\n  const type = handleKeyEnter(event)\n\n  if (props.readonly) {\n    switch (type) {\n      case 'ok': {\n        emit('enter')\n        break\n      }\n      case 'esc': {\n        emit('cancel')\n        break\n      }\n    }\n\n    return\n  }\n\n  switch (type) {\n    case 'next': {\n      emit('next-unit')\n      break\n    }\n    case 'prev': {\n      emit('prev-unit')\n      break\n    }\n    case 'up': {\n      emit('minus', event.ctrlKey)\n      break\n    }\n    case 'down': {\n      emit('plus', event.ctrlKey)\n      break\n    }\n    case 'ok': {\n      handleEnter()\n      break\n    }\n    case 'esc': {\n      handleCancel()\n      break\n    }\n    default: {\n      if (typeof type === 'number') {\n        emit('input', type)\n      }\n    }\n  }\n}\n\nfunction handleEnter() {\n  emit('enter')\n}\n\nfunction handleCancel() {\n  emit('cancel')\n}\n\nfunction handleBlur() {\n  emit('blur')\n}\n</script>\n\n<template>\n  <div\n    ref=\"wrapper\"\n    :class=\"[nh.be('input'), hasError && nh.bem('input', 'error')]\"\n    tabindex=\"-1\"\n    @keydown=\"handleInput\"\n    @blur=\"handleBlur\"\n  >\n    <div v-if=\"!focused && !isActivated\" :class=\"nh.be('placeholder')\">\n      {{ placeholder }}\n    </div>\n    <template v-else>\n      <div\n        v-if=\"enabled.hour\"\n        :class=\"[nh.be('unit'), getUnitFocusClass('hour')]\"\n        @click=\"handleInputFocus('hour')\"\n      >\n        {{ formattedHour }}\n      </div>\n      <div v-if=\"labels.hour\" :class=\"nh.be('label')\" @click=\"handleInputFocus('hour')\">\n        {{ labels.hour }}\n      </div>\n      <template v-if=\"enabled.minute\">\n        <div v-if=\"enabled.hour\" :class=\"nh.be('separator')\">\n          {{ separator }}\n        </div>\n        <div\n          :class=\"[nh.be('unit'), getUnitFocusClass('minute')]\"\n          @click=\"handleInputFocus('minute')\"\n        >\n          {{ formattedMinute }}\n        </div>\n        <div v-if=\"labels.minute\" :class=\"nh.be('label')\" @click=\"handleInputFocus('minute')\">\n          {{ labels.minute }}\n        </div>\n      </template>\n      <template v-if=\"enabled.second\">\n        <div v-if=\"enabled.minute || enabled.hour\" :class=\"nh.be('separator')\">\n          {{ separator }}\n        </div>\n        <div\n          :class=\"[nh.be('unit'), getUnitFocusClass('second')]\"\n          @click=\"handleInputFocus('second')\"\n        >\n          {{ formattedSecond }}\n        </div>\n        <div v-if=\"labels.second\" :class=\"nh.be('label')\" @click=\"handleInputFocus('second')\">\n          {{ labels.second }}\n        </div>\n      </template>\n    </template>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { Popper } from '@/components/popper'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, nextTick, reactive, ref, toRef, watch } from 'vue'\n\nimport TimeWheel from './time-wheel.vue'\nimport TimeControl from './time-control.vue'\nimport {\n  createIconProp,\n  createSizeProp,\n  createStateProp,\n  emitEvent,\n  makeSentence,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps,\n  useWordSpace\n} from '@vexip-ui/config'\nimport {\n  placementWhileList,\n  useClickOutside,\n  useHover,\n  usePopper,\n  useSetTimeout\n} from '@vexip-ui/hooks'\nimport { USE_TOUCH, boundRange, doubleDigits } from '@vexip-ui/utils'\nimport { timePickerProps } from './props'\nimport { useColumn, useTimeBound } from './helper'\nimport { TIME_REG } from './symbol'\n\nimport type { PopperExposed } from '@/components/popper'\nimport type { TimePickerChangeEvent, TimeType } from './symbol'\n\ndefineOptions({ name: 'TimePicker' })\n\nconst {\n  idFor,\n  state,\n  disabled,\n  loading,\n  size,\n  validateField,\n  clearField,\n  getFieldValue,\n  setFieldValue\n} = useFieldStore<string | string[]>(() => reference.value?.focus())\n\nconst nh = useNameHelper('time-picker')\n\nconst _props = defineProps(timePickerProps)\nconst props = useProps('timePicker', _props, {\n  size: createSizeProp(size),\n  state: createStateProp(state),\n  locale: null,\n  visible: false,\n  placement: {\n    default: 'bottom-start',\n    validator: value => placementWhileList.includes(value)\n  },\n  transfer: false,\n  format: 'HH:mm:ss',\n  separator: ':',\n  value: {\n    default: () => getFieldValue(''),\n    static: true\n  },\n  filler: {\n    default: '-',\n    validator: value => value.length === 1\n  },\n  clearable: false,\n  noAction: false,\n  noArrow: false,\n  pointer: USE_TOUCH,\n  candidate: {\n    default: 3,\n    validator: value => [0, 1, 2, 3].includes(value)\n  },\n  steps: () => [1, 1, 1],\n  labels: () => ({}),\n  shortcuts: () => [],\n  range: null,\n  disabled: () => disabled.value,\n  transitionName: () => nh.ns('drop'),\n  confirmText: null,\n  cancelText: null,\n  ctrlSteps: () => [5, 5, 5],\n  prefix: createIconProp(),\n  prefixColor: '',\n  suffix: createIconProp(),\n  suffixColor: '',\n  noSuffix: false,\n  exchange: false,\n  loading: () => loading.value,\n  loadingIcon: createIconProp(),\n  loadingLock: false,\n  loadingEffect: null,\n  min: null,\n  max: null,\n  outsideClose: true,\n  outsideCancel: false,\n  placeholder: null,\n  unitReadonly: false,\n  popperAlive: null,\n  shortcutsPlacement: 'left'\n})\n\nconst emit = defineEmits(['update:value', 'update:visible'])\n\nconst slots = defineSlots<{\n  prefix: () => any,\n  exchange: () => any,\n  suffix: () => any\n}>()\n\nconst locale = useLocale('timePicker', toRef(props, 'locale'))\nconst icons = useIcons()\nconst wordSpace = useWordSpace()\n\nconst placement = toRef(props, 'placement')\nconst transfer = toRef(props, 'transfer')\nconst currentVisible = ref(props.visible)\nconst focused = ref(false)\nconst lastValue = ref('')\nconst startState = createTimeState()\nconst endState = createTimeState()\nconst currentState = ref<'start' | 'end'>('start')\nconst staticWheel = ref(false)\n\nconst { timer } = useSetTimeout()\n\nconst wrapper = useClickOutside(handleClickOutside)\nconst popper = ref<PopperExposed>()\nconst { reference, transferTo, updatePopper } = usePopper({\n  placement,\n  transfer,\n  wrapper,\n  popper: computed(() => popper.value?.wrapper),\n  isDrop: true\n})\nconst { isHover } = useHover(reference)\nconst { isTimeDisabled } = useTimeBound(toRef(props, 'min'), toRef(props, 'max'))\n\nconst startInput = ref<InstanceType<typeof TimeControl>>()\nconst endInput = ref<InstanceType<typeof TimeControl>>()\n\nconst startPlaceholder = computed(() => {\n  if (props.placeholder) {\n    return Array.isArray(props.placeholder) ? props.placeholder[0] : props.placeholder\n  }\n\n  const { select, start, time } = locale.value.placeholder\n\n  return makeSentence(props.range ? `${start} ${time}` : `${select} ${time}`, wordSpace.value)\n})\nconst endPlaceholder = computed(() => {\n  if (props.placeholder) {\n    return Array.isArray(props.placeholder)\n      ? props.placeholder[1] || props.placeholder[0]\n      : props.placeholder\n  }\n\n  const { end, time } = locale.value.placeholder\n\n  return makeSentence(`${end} ${time}`, wordSpace.value)\n})\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.ns('input-vars'),\n    nh.bs('vars'),\n    {\n      [nh.bm('inherit')]: props.inherit,\n      [nh.bm('disabled')]: props.disabled,\n      [nh.bm(props.size)]: props.size !== 'default',\n      [nh.bm('no-hour')]: !startState.enabled.hour,\n      [nh.bm('no-minute')]: !startState.enabled.minute,\n      [nh.bm('no-second')]: !startState.enabled.second,\n      [nh.bm('visible')]: currentVisible.value,\n      [nh.bm(props.state)]: props.state !== 'default',\n      [nh.bm('is-range')]: props.range\n    }\n  ]\n})\nconst readonly = computed(() => props.loading && props.loadingLock)\nconst selectorClass = computed(() => {\n  const baseCls = nh.be('selector')\n\n  return {\n    [baseCls]: true,\n    [`${baseCls}--disabled`]: props.disabled,\n    [`${baseCls}--readonly`]: readonly.value,\n    [`${baseCls}--loading`]: props.loading,\n    [`${baseCls}--${props.size}`]: props.size !== 'default',\n    [`${baseCls}--focused`]: focused.value,\n    [`${baseCls}--${props.state}`]: props.state !== 'default'\n  }\n})\nconst hasPrefix = computed(() => {\n  return !!(slots.prefix || props.prefix)\n})\nconst currentValue = computed(() => {\n  const values = [startState, endState].map(state => {\n    return Object.values(state.timeValue).map(doubleDigits).join(':')\n  })\n\n  return props.range ? values : values[0]\n})\nconst showClear = computed(() => {\n  return !props.disabled && !readonly.value && props.clearable && isHover.value && !!lastValue.value\n})\nconst startError = computed(() => {\n  const { hour, minute, second } = startState.timeValue\n\n  return (\n    isTimeDisabled.hour(hour) ||\n    isTimeDisabled.minute(hour, minute) ||\n    isTimeDisabled.second(hour, minute, second)\n  )\n})\nconst endError = computed(() => {\n  if (!props.range) return false\n\n  const { hour, minute, second } = endState.timeValue\n\n  return (\n    isTimeDisabled.hour(hour) ||\n    isTimeDisabled.minute(hour, minute) ||\n    isTimeDisabled.second(hour, minute, second)\n  )\n})\n\nwatch(\n  () => props.value,\n  value => {\n    parseValue(value)\n    lastValue.value = (Array.isArray(value) ? value[0] || value[1] : value) ? getStringValue() : ''\n  },\n  { immediate: true }\n)\nwatch(() => props.format, parseFormat, { immediate: true })\nwatch(\n  () => props.visible,\n  value => {\n    currentVisible.value = value\n  }\n)\nwatch(currentVisible, value => {\n  if (value) {\n    updatePopper()\n  }\n})\nwatch(focused, value => {\n  if (value) {\n    emitEvent(props.onFocus)\n  } else {\n    emitEvent(props.onBlur)\n  }\n})\nwatch(currentState, value => {\n  if (!props.unitReadonly && currentVisible.value) {\n    emitEvent(props.onChangeCol, getCurrentState().column, value)\n  }\n})\nwatch(\n  () => startState.column,\n  value => {\n    if (!props.unitReadonly && currentVisible.value && currentState.value === 'start') {\n      emitEvent(props.onChangeCol, value, 'start')\n    }\n  }\n)\nwatch(\n  () => endState.column,\n  value => {\n    if (!props.unitReadonly && currentVisible.value && currentState.value === 'end') {\n      emitEvent(props.onChangeCol, value, 'end')\n    }\n  }\n)\nwatch(\n  () => props.disabled,\n  value => {\n    if (value) {\n      setVisible(false)\n      handleBlur()\n    }\n  }\n)\nwatch(readonly, value => {\n  if (value) {\n    setVisible(false)\n  }\n})\n\ndefineExpose({\n  idFor,\n  isHover,\n  currentVisible,\n  focused,\n  startState,\n  endState,\n  currentState,\n  currentValue,\n  startError,\n  endError,\n  wrapper,\n  reference,\n  popper,\n  start: startInput,\n  end: endInput,\n  updatePopper,\n  focus: (options?: FocusOptions) => reference.value?.focus(options),\n  blur: () => reference.value?.blur()\n})\n\nfunction createTimeState() {\n  const { currentColumn, enabled, resetColumn, enterColumn } = useColumn([\n    'hour',\n    'minute',\n    'second'\n  ] as TimeType[])\n\n  const timeValue = reactive({\n    hour: 0,\n    minute: 0,\n    second: 0\n  })\n  const activated = reactive({\n    hour: false,\n    minute: false,\n    second: false\n  })\n\n  return reactive({\n    column: currentColumn,\n    enabled,\n    activated,\n    timeValue,\n    resetColumn,\n    enterColumn\n  })\n}\n\nfunction getCurrentState() {\n  return currentState.value === 'start' ? startState : endState\n}\n\nfunction parseValue<T extends string | null>(value: T | T[]) {\n  if (!Array.isArray(value)) {\n    value = [value, value]\n  }\n\n  const defaultDate = new Date()\n\n  for (let i = 0; i < 2; ++i) {\n    const match = TIME_REG.exec(value[i] || '')\n    const state = i === 0 ? startState : endState\n    const { timeValue } = state\n\n    if (match) {\n      toggleActivated(true, i === 0 ? 'start' : 'end')\n\n      const hour = parseInt(match[1])\n      const minute = match[2] ? parseInt(match[2].slice(1)) : 0\n      const second = match[3] ? parseInt(match[3].slice(1)) : 0\n\n      const date = new Date(2000, 1, 1, hour, minute, second)\n\n      timeValue.hour = date.getHours()\n      timeValue.minute = date.getMinutes()\n      timeValue.second = date.getSeconds()\n    } else {\n      timeValue.hour = defaultDate.getHours()\n      timeValue.minute = defaultDate.getMinutes()\n      timeValue.second = defaultDate.getSeconds()\n\n      toggleActivated(false, i === 0 ? 'start' : 'end')\n    }\n\n    if (!props.range) break\n  }\n}\n\nfunction parseFormat() {\n  ;[startState, endState].forEach(state => {\n    state.enabled.hour = props.format.includes('H')\n    state.enabled.minute = props.format.includes('m')\n    state.enabled.second = props.format.includes('s')\n  })\n}\n\nfunction toggleActivated(value: boolean, valueType?: 'start' | 'end') {\n  const states = valueType\n    ? valueType === 'start'\n      ? [startState]\n      : [endState]\n    : [startState, endState]\n\n  states.forEach(state => {\n    ;(Object.keys(state.activated) as TimeType[]).forEach(type => {\n      state.activated[type] = value\n    })\n  })\n}\n\nfunction getStringValue() {\n  return Array.isArray(currentValue.value) ? currentValue.value.join('|') : currentValue.value\n}\n\nfunction verifyTime() {\n  if (startError.value || (props.range && endError.value)) {\n    parseValue(props.value)\n  }\n}\n\nfunction setVisible(visible: boolean) {\n  if (currentVisible.value === visible) return\n\n  currentVisible.value = visible\n\n  emit('update:visible', visible)\n  emitEvent(props.onToggle, visible)\n}\n\nfunction emitChange() {\n  verifyTime()\n\n  if (lastValue.value !== getStringValue()) {\n    lastValue.value = getStringValue()\n\n    toggleActivated(true)\n    emit('update:value', currentValue.value)\n    setFieldValue(currentValue.value)\n    emitEvent(props.onChange as TimePickerChangeEvent, currentValue.value)\n    validateField()\n  }\n}\n\nfunction handleFocused() {\n  if (props.disabled) return\n\n  focused.value = true\n\n  timer.focus = setTimeout(() => {\n    if (focused.value) {\n      if (currentState.value === 'start') {\n        startInput.value?.focus()\n      } else {\n        endInput.value?.focus()\n      }\n    }\n  }, 120)\n}\n\nfunction handleBlur() {\n  clearTimeout(timer.focus)\n\n  focused.value = false\n  startInput.value?.blur()\n  endInput.value?.blur()\n}\n\nfunction showPanel(event: Event) {\n  if (props.disabled || readonly.value) return\n\n  const target = event.target as Node\n\n  setVisible(true)\n  handleFocused()\n\n  if (wrapper.value && target) {\n    const units = Array.from(wrapper.value.querySelectorAll(`.${nh.be('unit')}`))\n\n    if (!units.some(unit => unit === target || unit.contains(target))) {\n      startState.column = null\n      endState.column = null\n    }\n  }\n}\n\nfunction finishInput(shouldChange = true) {\n  setVisible(false)\n\n  shouldChange && emitChange()\n  startState.resetColumn()\n  endState.resetColumn()\n}\n\nfunction handleClear(finish = true) {\n  if (props.disabled || readonly.value) return\n\n  if (props.clearable) {\n    nextTick(() => {\n      const emitValue = props.range ? ([] as string[]) : ''\n\n      parseValue(null)\n      finish && finishInput(false)\n      emit('update:value', emitValue)\n      emitEvent(props.onChange as TimePickerChangeEvent, emitValue)\n      emitEvent(props.onClear)\n      clearField(emitValue)\n      finish && handleBlur()\n\n      lastValue.value = ''\n\n      nextTick(() => {\n        toggleActivated(false)\n      })\n    })\n  }\n}\n\nfunction handleWheelChange(type: TimeType) {\n  if (currentVisible.value) {\n    getCurrentState().activated[type] = true\n  }\n}\n\nfunction handleInputFocus(type: TimeType) {\n  getCurrentState().column = type\n}\n\nfunction handleInput(value: number) {\n  const state = getCurrentState()\n  const type = state.column\n\n  if (!type) return\n\n  handleInputNumber(type, value)\n\n  if (state.column !== 'second' && state.timeValue[type] >= 10) {\n    state.enterColumn('next', false)\n  }\n}\n\nfunction handleInputNumber(type: TimeType, number: number) {\n  const state = getCurrentState()\n  const prev = state.timeValue[type]\n\n  if (state.activated[type] && prev > 0 && prev < 10) {\n    state.timeValue[type] = prev * 10 + number\n  } else {\n    state.timeValue[type] = number\n  }\n\n  verifyValue(type)\n\n  state.activated[type] = true\n  emitEvent(props.onInput, type, state.timeValue[type])\n}\n\nfunction verifyValue(type: TimeType) {\n  const timeValue = getCurrentState().timeValue\n\n  timeValue[type] = boundRange(timeValue[type], 0, type === 'hour' ? 23 : 59)\n  timeValue[type] = Math.round(timeValue[type] / getStep(type)) * getStep(type)\n}\n\nfunction handlePlus(ctrlKey: boolean) {\n  const state = getCurrentState()\n  const type = state.column\n\n  if (!type) return\n\n  if (state.enabled[type]) {\n    state.timeValue[type] += ctrlKey ? getCtrlStep(type) : getStep(type)\n\n    verifyValue(type)\n    emitEvent(props.onPlus, type, state.timeValue[type])\n  }\n}\n\nfunction handleMinus(ctrlKey: boolean) {\n  const state = getCurrentState()\n  const type = state.column\n\n  if (!type) return\n\n  if (state.enabled[type]) {\n    state.timeValue[type] -= ctrlKey ? getCtrlStep(type) : getStep(type)\n\n    verifyValue(type)\n    emitEvent(props.onMinus, type, state.timeValue[type])\n  }\n}\n\nfunction getStep(type: TimeType) {\n  return props.steps[type === 'hour' ? 0 : type === 'minute' ? 1 : 2] || 1\n}\n\nfunction getCtrlStep(type: TimeType) {\n  return props.ctrlSteps[type === 'hour' ? 0 : type === 'minute' ? 1 : 2] || 1\n}\n\nfunction fallbackFocus() {\n  requestAnimationFrame(() => {\n    handleBlur()\n    reference.value?.focus()\n  })\n}\n\nfunction handleEnter() {\n  fallbackFocus()\n  finishInput()\n  emitEvent(props.onEnter)\n}\n\nfunction handleCancel() {\n  fallbackFocus()\n  parseValue(props.value)\n  finishInput(false)\n  emitEvent(props.onCancel)\n}\n\nfunction handleShortcut(index: number) {\n  let { value, name } = props.shortcuts[index]\n\n  if (typeof value === 'function') {\n    value = value()\n  }\n\n  fallbackFocus()\n  parseValue(value)\n  emitEvent(props.onShortcut as (name: string, value: string | string[]) => void, name, value)\n  finishInput()\n}\n\nfunction toggleCurrentState(type: 'start' | 'end') {\n  currentState.value = type\n}\n\nfunction enterColumn(type: 'prev' | 'next') {\n  if (props.range) {\n    if (type === 'prev' && currentState.value === 'start' && !startState.column) {\n      toggleCurrentState('end')\n    }\n\n    const state = getCurrentState()\n    const currentColumn = state.column\n\n    state.enterColumn(type, !currentColumn)\n\n    if (currentColumn === state.column) {\n      const isStart = currentState.value === 'start'\n      const otherState = isStart ? endState : startState\n\n      otherState.resetColumn(type === 'prev' ? 'second' : 'hour', type === 'prev')\n      toggleCurrentState(isStart ? 'end' : 'start')\n    }\n  } else {\n    startState.enterColumn(type)\n  }\n}\n\nfunction handleStartInput(type: TimeType) {\n  toggleCurrentState('start')\n  handleInputFocus(type)\n}\n\nfunction handleEndInput(type: TimeType) {\n  toggleCurrentState('end')\n  handleInputFocus(type)\n}\n\nfunction exchangeValue() {\n  ;(Object.keys(startState.timeValue) as TimeType[]).forEach(type => {\n    const temp = endState.timeValue[type]\n    endState.timeValue[type] = startState.timeValue[type]\n    startState.timeValue[type] = temp\n  })\n}\n\nfunction handleExchangeClick(event: MouseEvent) {\n  if (props.exchange) {\n    !currentVisible.value && event.stopPropagation()\n    exchangeValue()\n  }\n}\n\nfunction handleClickOutside() {\n  emitEvent(props.onClickOutside)\n\n  if (props.outsideClose && currentVisible.value) {\n    finishInput(!props.outsideCancel)\n    handleBlur()\n    emitEvent(props.onOutsideClose)\n  }\n}\n</script>\n\n<template>\n  <div\n    :id=\"idFor\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    @click=\"showPanel\"\n  >\n    <div\n      ref=\"reference\"\n      :class=\"selectorClass\"\n      tabindex=\"0\"\n      @keydown.space.prevent=\"showPanel\"\n      @keydown.backspace.prevent=\"handleClear(false)\"\n    >\n      <div\n        v-if=\"hasPrefix\"\n        :class=\"[nh.be('icon'), nh.be('prefix')]\"\n        :style=\"{ color: props.prefixColor }\"\n      >\n        <slot name=\"prefix\">\n          <Icon :icon=\"props.prefix\"></Icon>\n        </slot>\n      </div>\n      <div :class=\"nh.be('control')\">\n        <TimeControl\n          ref=\"startInput\"\n          :unit-type=\"currentState === 'start' ? startState.column! : ''\"\n          :enabled=\"startState.enabled\"\n          :activated=\"startState.activated\"\n          :time-value=\"startState.timeValue\"\n          :steps=\"props.steps\"\n          :ctrl-steps=\"props.ctrlSteps\"\n          :focused=\"focused\"\n          :visible=\"currentVisible\"\n          :separator=\"props.separator\"\n          :filler=\"props.filler\"\n          :labels=\"props.labels\"\n          :has-error=\"startError\"\n          :placeholder=\"startPlaceholder\"\n          :readonly=\"props.unitReadonly\"\n          @input=\"handleInput\"\n          @plus=\"handlePlus\"\n          @minus=\"handleMinus\"\n          @enter=\"handleEnter\"\n          @cancel=\"handleCancel\"\n          @unit-focus=\"handleStartInput\"\n          @prev-unit=\"enterColumn('prev')\"\n          @next-unit=\"enterColumn('next')\"\n          @blur=\"startState.column = null\"\n        ></TimeControl>\n        <template v-if=\"props.range\">\n          <div\n            :class=\"[nh.be('exchange'), props.exchange ? nh.bem('exchange', 'enabled') : '']\"\n            @click=\"handleExchangeClick\"\n          >\n            <slot name=\"exchange\">\n              <Icon v-bind=\"icons.exchange\" style=\"padding-top: 1px\"></Icon>\n            </slot>\n          </div>\n          <TimeControl\n            ref=\"endInput\"\n            :unit-type=\"currentState === 'end' ? endState.column! : ''\"\n            :enabled=\"endState.enabled\"\n            :activated=\"endState.activated\"\n            :time-value=\"endState.timeValue\"\n            :steps=\"props.steps\"\n            :ctrl-steps=\"props.ctrlSteps\"\n            :focused=\"focused\"\n            :visible=\"currentVisible\"\n            :separator=\"props.separator\"\n            :filler=\"props.filler\"\n            :labels=\"props.labels\"\n            :has-error=\"endError\"\n            :placeholder=\"endPlaceholder\"\n            :readonly=\"props.unitReadonly\"\n            @input=\"handleInput\"\n            @plus=\"handlePlus\"\n            @minus=\"handleMinus\"\n            @enter=\"handleEnter\"\n            @cancel=\"handleCancel\"\n            @unit-focus=\"handleEndInput\"\n            @prev-unit=\"enterColumn('prev')\"\n            @next-unit=\"enterColumn('next')\"\n            @blur=\"endState.column = null\"\n          ></TimeControl>\n        </template>\n      </div>\n      <div\n        v-if=\"!props.noSuffix\"\n        :class=\"[nh.be('icon'), nh.be('suffix')]\"\n        :style=\"{\n          color: props.suffixColor,\n          opacity: showClear || props.loading ? '0%' : ''\n        }\"\n      >\n        <slot name=\"suffix\">\n          <Icon v-bind=\"icons.clock\" :icon=\"props.suffix || icons.clock.icon\"></Icon>\n        </slot>\n      </div>\n      <div\n        v-else-if=\"props.clearable || props.loading\"\n        :class=\"[nh.be('icon'), nh.bem('icon', 'placeholder'), nh.be('suffix')]\"\n      ></div>\n      <Transition :name=\"nh.ns('fade')\" appear>\n        <div v-if=\"showClear\" :class=\"[nh.be('icon'), nh.be('clear')]\" @click.stop=\"handleClear()\">\n          <Icon v-bind=\"icons.clear\"></Icon>\n        </div>\n        <div v-else-if=\"props.loading\" :class=\"[nh.be('icon'), nh.be('loading')]\">\n          <Icon\n            v-bind=\"icons.loading\"\n            :effect=\"props.loadingEffect || icons.loading.effect\"\n            :icon=\"props.loadingIcon || icons.loading.icon\"\n          ></Icon>\n        </div>\n      </Transition>\n    </div>\n    <Popper\n      ref=\"popper\"\n      :class=\"[nh.be('popper'), nh.bs('vars')]\"\n      :visible=\"currentVisible\"\n      :to=\"transferTo\"\n      :transition=\"props.transitionName\"\n      :alive=\"props.popperAlive ?? !transferTo\"\n      @click.stop=\"handleFocused\"\n      @before-enter=\"staticWheel = true\"\n      @before-leave=\"staticWheel = true\"\n      @after-enter=\"staticWheel = false\"\n      @after-leave=\"staticWheel = false\"\n    >\n      <div\n        :class=\"{\n          [nh.be('panel')]: true,\n          [nh.bem('panel', 'vertical')]:\n            props.shortcuts.length &&\n            (props.shortcutsPlacement === 'top' || props.shortcutsPlacement === 'bottom')\n        }\"\n      >\n        <div\n          v-if=\"props.shortcuts.length\"\n          :class=\"[\n            nh.be('list'),\n            nh.bem('list', 'sub'),\n            nh.be('shortcuts'),\n            nh.bem('shortcuts', props.shortcutsPlacement)\n          ]\"\n        >\n          <div\n            v-for=\"(item, index) in props.shortcuts\"\n            :key=\"index\"\n            :class=\"nh.be('shortcut')\"\n            :title=\"item.name\"\n            @click=\"handleShortcut(index)\"\n          >\n            {{ item.name }}\n          </div>\n        </div>\n        <div :class=\"nh.be('list')\">\n          <div :class=\"nh.be('wheels')\">\n            <TimeWheel\n              v-model:hour=\"startState.timeValue.hour\"\n              v-model:minute=\"startState.timeValue.minute\"\n              v-model:second=\"startState.timeValue.second\"\n              :no-arrow=\"props.noArrow\"\n              :candidate=\"props.candidate\"\n              :steps=\"props.steps\"\n              :pointer=\"props.pointer\"\n              :disabled-time=\"isTimeDisabled\"\n              :no-transition=\"staticWheel\"\n              @change=\"handleWheelChange\"\n              @toggle-col=\"toggleCurrentState('start')\"\n            ></TimeWheel>\n            <TimeWheel\n              v-if=\"props.range\"\n              v-model:hour=\"endState.timeValue.hour\"\n              v-model:minute=\"endState.timeValue.minute\"\n              v-model:second=\"endState.timeValue.second\"\n              :no-arrow=\"props.noArrow\"\n              :candidate=\"props.candidate\"\n              :steps=\"props.steps\"\n              :pointer=\"props.pointer\"\n              :disabled-time=\"isTimeDisabled\"\n              :no-transition=\"staticWheel\"\n              @change=\"handleWheelChange\"\n              @toggle-col=\"toggleCurrentState('end')\"\n            ></TimeWheel>\n          </div>\n          <div v-if=\"!props.noAction\" :class=\"nh.be('action')\">\n            <Button\n              inherit\n              text\n              size=\"small\"\n              @click.stop=\"handleCancel\"\n            >\n              {{ props.cancelText || locale.cancel }}\n            </Button>\n            <Button\n              inherit\n              type=\"primary\"\n              size=\"small\"\n              :disabled=\"startError || endError\"\n              @click.stop=\"handleEnter\"\n            >\n              {{ props.confirmText || locale.confirm }}\n            </Button>\n          </div>\n        </div>\n      </div>\n    </Popper>\n  </div>\n</template>\n", "import { booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { TimelineItemType } from './symbol'\n\nexport const timelineProps = buildProps({\n  pending: booleanProp,\n  dashed: booleanProp,\n  lineColor: String,\n  spacing: [Number, String],\n  flip: booleanProp,\n  horizontal: booleanProp,\n  alternate: booleanProp,\n  onSignalClick: eventProp<(label: string | number) => void>()\n})\n\nexport type TimelineProps = ExtractPropTypes<typeof timelineProps>\nexport type TimelineCProps = ConfigurableProps<TimelineProps>\n\nexport const timelineItemProps = buildProps({\n  type: String as PropType<TimelineItemType>,\n  color: String,\n  label: [Number, String],\n  dashed: booleanProp,\n  lineColor: String,\n  spacing: [Number, String],\n  onSignalClick: eventProp<(label: string | number) => void>()\n})\n\nexport type TimelineItemProps = ExtractPropTypes<typeof timelineItemProps>\nexport type TimelineItemCProps = ConfigurableProps<TimelineItemProps>\n", "import type { InjectionKey } from 'vue'\n\nexport type TimelineItemType = 'primary' | 'info' | 'success' | 'error' | 'warning' | 'disabled'\n\nexport interface ItemState {\n  label: string | number,\n  index: number,\n  total: number,\n  height: number\n}\n\nexport interface TimelineState {\n  dashed: boolean,\n  lineColor: string,\n  spacing: number | string,\n  alternate: boolean,\n  horizontal: boolean,\n  increaseItem: (item: ItemState) => void,\n  decreaseItem: (item: ItemState) => void,\n  handleSignalClick: (label: string | number) => void\n}\n\nexport const TIMELINE_STATE: InjectionKey<TimelineState> = Symbol('TIMELINE_STATE')\n\nexport const timelineItemTypes = Object.freeze<TimelineItemType[]>([\n  'primary',\n  'info',\n  'success',\n  'error',\n  'warning',\n  'disabled'\n])\n", "<script setup lang=\"ts\">\nimport { computed, provide, reactive, toRef } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { debounceMinor, isNull } from '@vexip-ui/utils'\nimport { timelineProps } from './props'\nimport { TIMELINE_STATE } from './symbol'\n\nimport type { ItemState, TimelineState } from './symbol'\n\ndefineOptions({ name: 'Timeline' })\n\nconst _props = defineProps(timelineProps)\nconst props = useProps('timeline', _props, {\n  pending: false,\n  dashed: false,\n  lineColor: null,\n  spacing: null,\n  flip: false,\n  horizontal: false,\n  alternate: false\n})\n\nconst nh = useNameHelper('timeline')\nconst itemStates = reactive(new Set<ItemState>())\n\nconst className = computed(() => {\n  return {\n    [nh.b()]: true,\n    [nh.bs('vars')]: true,\n    [nh.bm('inherit')]: props.inherit,\n    [nh.bm('pending')]: props.pending,\n    [nh.bm('alternate')]: props.alternate,\n    [nh.bm('flip')]: props.flip,\n    [nh.bm('horizontal')]: props.horizontal\n  }\n})\nconst height = computed(() => {\n  return Math.max(...Array.from(itemStates).map(state => state.height)) * 2\n})\n\ndefineExpose({ itemStates })\n\nconst refreshLabels = debounceMinor(() => {\n  const total = itemStates.size\n\n  Array.from(itemStates).forEach((item, index) => {\n    item.index = index + 1\n    item.total = total\n\n    if (isNull(item.label)) {\n      item.label = index + 1\n    }\n  })\n})\n\nconst state: TimelineState = reactive({\n  dashed: toRef(props, 'dashed'),\n  lineColor: toRef(props, 'lineColor'),\n  spacing: toRef(props, 'spacing'),\n  alternate: toRef(props, 'alternate'),\n  horizontal: toRef(props, 'horizontal'),\n  increaseItem,\n  decreaseItem,\n  handleSignalClick\n})\n\nprovide(TIMELINE_STATE, state)\n\nfunction increaseItem(item: ItemState) {\n  itemStates.add(item)\n  refreshLabels()\n}\n\nfunction decreaseItem(item: ItemState) {\n  itemStates.delete(item)\n  refreshLabels()\n}\n\nfunction handleSignalClick(label: string | number) {\n  emitEvent(props.onSignalClick, label)\n}\n</script>\n\n<template>\n  <div\n    :class=\"className\"\n    :style=\"{ height: props.horizontal && props.alternate ? `${height}px` : undefined }\"\n  >\n    <slot></slot>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { computed, inject, onBeforeUnmount, onMounted, onUpdated, reactive, ref, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { timelineItemProps } from './props'\nimport { TIMELINE_STATE, timelineItemTypes } from './symbol'\n\nimport type { ItemState } from './symbol'\n\ndefineOptions({ name: 'TimelineItem' })\n\nconst _props = defineProps(timelineItemProps)\nconst props = useProps('timelineItem', _props, {\n  type: {\n    default: 'primary',\n    validator: value => timelineItemTypes.includes(value)\n  },\n  color: '',\n  label: {\n    default: null,\n    static: true\n  },\n  dashed: null,\n  lineColor: null,\n  spacing: null\n})\n\ndefineSlots<{\n  default: () => any,\n  signal: () => any,\n  line: () => any\n}>()\n\nconst timelineState = inject(TIMELINE_STATE, null)\n\nconst nh = useNameHelper('timeline')\nconst currentLabel = ref(props.label)\nconst content = ref<HTMLElement>()\n\nconst className = computed(() => {\n  return {\n    [nh.be('item')]: true,\n    [nh.bem('item', props.type)]: timelineItemTypes.includes(props.type)\n  }\n})\nconst itemStyle = computed(() => {\n  const spacing = props.spacing || props.spacing === 0 ? props.spacing : timelineState?.spacing\n  const style: Record<string, any> = {\n    [nh.cv('item-span')]: typeof spacing === 'number' ? `${spacing}px` : spacing\n  }\n\n  if (props.color) {\n    style[nh.cv('pointer-color')] = props.color\n    style[nh.cv('pointer-b-color')] = props.color\n  }\n\n  return style\n})\nconst lineStyle = computed(() => {\n  const isDashed = props.dashed ?? timelineState?.dashed ?? false\n  const color = props.lineColor ?? timelineState?.lineColor\n\n  return {\n    borderInlineStartStyle: isDashed ? ('dashed' as const) : undefined,\n    borderInlineStartColor: color\n  }\n})\n\ndefineExpose({ currentLabel, content })\n\nif (timelineState) {\n  const state: ItemState = reactive({\n    label: currentLabel,\n    index: 0,\n    total: 0,\n    height: 0\n  })\n\n  timelineState.increaseItem(state)\n\n  watch(() => timelineState.alternate, updateHeight)\n  watch(() => timelineState.horizontal, updateHeight)\n\n  onMounted(updateHeight)\n  onUpdated(updateHeight)\n\n  onBeforeUnmount(() => {\n    timelineState.decreaseItem(state)\n  })\n\n  function updateHeight() {\n    requestAnimationFrame(() => {\n      if (timelineState?.horizontal && content.value) {\n        state.height = content.value.scrollHeight\n      }\n    })\n  }\n}\n\nfunction handleSignalClick() {\n  emitEvent(props.onSignalClick, currentLabel.value)\n  timelineState?.handleSignalClick(currentLabel.value)\n}\n</script>\n\n<template>\n  <div :class=\"className\" :style=\"itemStyle\">\n    <div :class=\"nh.be('signal')\" @click=\"handleSignalClick\">\n      <slot name=\"signal\">\n        <div :class=\"nh.be('pointer')\"></div>\n      </slot>\n    </div>\n    <div :class=\"nh.be('line')\" :style=\"lineStyle\">\n      <slot name=\"line\"></slot>\n    </div>\n    <div ref=\"content\" :class=\"nh.be('content')\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n", "import { booleanProp, buildProps, classProp, iconProp, styleProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { IconMinorProps } from '@/components/icon'\nimport type { ToastOptions, ToastPosition } from './symbol'\n\nexport const toastProps = buildProps({\n  bodyWidth: Number,\n  icon: iconProp,\n  iconProps: Object as PropType<IconMinorProps>,\n  position: String as PropType<ToastPosition>,\n  transitionName: String,\n  closable: booleanProp,\n  maskClose: booleanProp,\n  showMask: booleanProp,\n  maskClass: classProp,\n  maskStyle: styleProp,\n  parseHtml: booleanProp,\n  renderer: Function as PropType<(options: ToastOptions) => any>\n})\n\nexport type ToastProps = ExtractPropTypes<typeof toastProps>\nexport type ToastCProps = ConfigurableProps<ToastProps, 'renderer'>\n", "import type { ComponentPublicInstance } from 'vue'\nimport type { ClassType, StyleType } from '@vexip-ui/config'\nimport type { IconMinorProps } from '@/components/icon'\n\nexport type ToastType = 'success' | 'warning' | 'error' | 'loading'\nexport type ToastPosition = 'top' | 'center' | 'bottom'\n\nexport interface ToastOptions extends Record<string, any> {\n  type?: ToastType | null,\n  content?: string,\n  icon?: Record<string, any> | (() => any) | null,\n  iconProps?: IconMinorProps,\n  position?: ToastPosition,\n  transitionName?: string,\n  closable?: boolean,\n  maskClose?: boolean,\n  showMask?: boolean,\n  maskClass?: ClassType,\n  maskStyle?: StyleType,\n  parseHtml?: boolean,\n  onClose?: () => void\n}\n\nexport interface ToastInstance extends ComponentPublicInstance {\n  openToast: (options: ToastOptions) => Promise<void>,\n  closeToast: () => void\n}\n\nexport const effectiveTypes = Object.freeze(['success', 'warning', 'error', 'loading'])\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Renderer } from '@/components/renderer'\n\nimport { computed, nextTick, onMounted, reactive } from 'vue'\n\nimport { createIconProp, useIcons, useNameHelper, useProps, useZIndex } from '@vexip-ui/config'\nimport { isFunction } from '@vexip-ui/utils'\nimport { toastProps } from './props'\nimport { effectiveTypes } from './symbol'\n\nimport type { ToastOptions, ToastType } from './symbol'\n\ndefineOptions({ name: 'Toast' })\n\nconst nh = useNameHelper('toast')\n\nconst _props = defineProps(toastProps)\nconst props = useProps('toast', _props, {\n  bodyWidth: 100,\n  icon: createIconProp(),\n  iconProps: () => ({}),\n  position: 'center',\n  transitionName: () => nh.ns('ease'),\n  closable: false,\n  maskClose: false,\n  showMask: false,\n  maskClass: null,\n  maskStyle: null,\n  renderer: {\n    default: null,\n    isFunc: true,\n    static: true\n  },\n  parseHtml: false\n})\n\nconst getIndex = useZIndex()\nconst icons = useIcons()\n\nconst predefinedIcons = computed(() => ({\n  success: icons.value.success,\n  warning: icons.value.warning,\n  error: icons.value.error,\n  loading: icons.value.loading\n}))\n\nconst state = reactive({\n  visible: false,\n  zIndex: 0,\n  type: null as ToastType | null,\n  content: '',\n  icon: props.icon,\n  iconProps: props.iconProps as any,\n  position: props.position,\n  transition: props.transitionName,\n  closable: props.closable,\n  maskClose: props.maskClose,\n  showMask: props.showMask,\n  maskClass: props.maskClass as any,\n  maskStyle: props.maskStyle as any,\n  parseHtml: props.parseHtml,\n  textOnly: false,\n  renderer: props.renderer,\n  onClose: null as (() => void) | null\n})\n\nconst mountedPromise = new Promise<void>(resolve => {\n  onMounted(() => {\n    nextTick(resolve)\n  })\n})\n\ndefineExpose({ state, openToast, closeToast, handleReset })\n\nasync function openToast(options: ToastOptions) {\n  await mountedPromise\n\n  state.zIndex = getIndex()\n  state.type = options.type ?? null\n  state.content = options.content ?? ''\n  state.icon = options.icon ?? props.icon\n  state.iconProps = options.iconProps ?? props.iconProps\n  state.position = options.position ?? props.position\n  state.transition = options.transitionName ?? props.transitionName\n  state.closable = options.closable ?? props.closable\n  state.maskClose = options.maskClose ?? props.maskClose\n  state.showMask = options.showMask ?? props.showMask\n  state.maskClass = options.maskClass ?? props.maskClass\n  state.maskStyle = options.maskStyle ?? props.maskStyle\n  state.parseHtml = options.parseHtml ?? props.parseHtml\n  state.renderer = isFunction(options.renderer) ? options.renderer : props.renderer\n  state.onClose = options.onClose || null\n\n  state.textOnly = !state.icon && !(state.type && effectiveTypes.includes(state.type))\n\n  if (isFunction(state.renderer)) {\n    const render = state.renderer\n\n    state.renderer = () => render(options)\n    state.textOnly = false\n  }\n\n  state.visible = true\n}\n\nfunction closeToast() {\n  state.visible = false\n\n  if (isFunction(state.onClose)) {\n    state.onClose()\n  }\n}\n\nfunction handleReset() {\n  if (state.visible) return\n\n  state.type = null\n  state.content = ''\n  state.icon = props.icon\n  state.iconProps = props.iconProps\n  state.position = props.position\n  state.transition = props.transitionName\n  state.closable = props.closable\n  state.maskClose = props.maskClose\n  state.showMask = props.showMask\n  state.maskClass = props.maskClass\n  state.maskStyle = props.maskStyle\n  state.parseHtml = props.parseHtml\n  state.textOnly = false\n  state.renderer = props.renderer\n  state.onClose = null\n}\n\nfunction handleWrapperClick() {\n  if (state.visible && state.closable) {\n    closeToast()\n  }\n}\n\nfunction handleMaskClick() {\n  if (state.visible && state.maskClose) {\n    closeToast()\n  }\n}\n</script>\n\n<template>\n  <div\n    :class=\"{\n      [nh.b()]: true,\n      [nh.bs('vars')]: true,\n      [nh.bm('text-only')]: state.textOnly\n    }\"\n    role=\"alert\"\n    :style=\"{\n      zIndex: state.zIndex\n    }\"\n    aria-atomic=\"true\"\n    aria-live=\"assertive\"\n  >\n    <Transition :name=\"nh.ns('fade')\">\n      <div\n        v-if=\"state.showMask && state.visible\"\n        :class=\"[nh.be('mask'), state.maskClass]\"\n        :style=\"state.maskStyle\"\n        @click=\"handleMaskClick\"\n        @wheel.stop.prevent\n      ></div>\n    </Transition>\n    <Transition :name=\"state.transition\">\n      <div\n        v-if=\"state.visible\"\n        :class=\"{\n          [nh.be('wrapper')]: true,\n          [nh.bem('wrapper', state.position)]: state.position !== 'center',\n          [nh.bem('wrapper', 'closable')]: state.closable\n        }\"\n        @click=\"handleWrapperClick\"\n        @wheel.stop.prevent\n      >\n        <Renderer v-if=\"isFunction(state.renderer)\" :renderer=\"state.renderer\"></Renderer>\n        <template v-else>\n          <div\n            v-if=\"state.icon || (state.type && effectiveTypes.includes(state.type))\"\n            :class=\"nh.be('icon')\"\n          >\n            <Icon\n              v-if=\"state.icon\"\n              :icon=\"state.icon\"\n              :scale=\"1.8\"\n              v-bind=\"state.iconProps\"\n            ></Icon>\n            <Icon\n              v-else\n              v-bind=\"{ ...predefinedIcons[state.type!], scale: 1.8, ...state.iconProps }\"\n            ></Icon>\n          </div>\n          <div v-if=\"state.parseHtml\" :class=\"nh.be('content')\" v-html=\"state.content\"></div>\n          <div v-else :class=\"nh.be('content')\">\n            {{ state.content }}\n          </div>\n        </template>\n      </div>\n    </Transition>\n  </div>\n</template>\n", "import { createApp, createVNode, markRaw, render } from 'vue'\n\nimport Component from './toast.vue'\nimport { proxyExposed, unrefElement } from '@vexip-ui/hooks'\nimport { destroyObject, isClient, noop, toNumber } from '@vexip-ui/utils'\n\nimport type { App, MaybeRef } from 'vue'\nimport type { MaybeInstance } from '@vexip-ui/hooks'\nimport type { ToastInstance, ToastOptions, ToastType } from './symbol'\n\nexport { toastProps } from './props'\n\nexport type { ToastProps, ToastCProps } from './props'\nexport type { ToastType, ToastOptions }\n\ntype FuzzyOptions = string | ToastOptions\n\ninterface AipMethod {\n  (options: ToastOptions): () => void,\n  (content: string, duration?: number): () => void,\n  /** @internal */\n  (options: FuzzyOptions, duration?: number): () => void\n}\n\nconst conveniences: Record<ToastType, Record<string, any>> = {\n  success: {},\n  warning: {},\n  error: {},\n  loading: {\n    showMask: true\n  }\n}\n\nexport class ToastManager {\n  name: string\n  defaults: Record<string, unknown>\n\n  open: AipMethod\n  success: AipMethod\n  warning: AipMethod\n  error: AipMethod\n  loading: AipMethod\n\n  private _mountedApp: App<unknown> | null\n  private _instance: ToastInstance | null\n  private _innerApp: App<unknown> | null\n  private _container: HTMLElement | null\n  private _timer: ReturnType<typeof setTimeout> | null\n  private _wrapper: HTMLElement | SVGElement | null\n  private _mountedEl: HTMLElement | null\n\n  constructor(options: Partial<ToastOptions> = {}) {\n    options = {\n      ...options,\n      duration: options.duration ? toNumber(options.duration) : 2000\n    }\n\n    this._mountedApp = null\n    this._instance = null\n    this._innerApp = null\n    this._container = null\n    this._timer = null\n    this._wrapper = null\n    this._mountedEl = null\n    this.name = 'Toast'\n    this.defaults = {}\n\n    this.config(options)\n\n    this.open = (content: FuzzyOptions, duration?: number) => {\n      return this._open(null, content, duration)\n    }\n\n    this.success = (content: FuzzyOptions, duration?: number) => {\n      return this._open('success', content, duration)\n    }\n\n    this.warning = (content: FuzzyOptions, duration?: number) => {\n      return this._open('warning', content, duration)\n    }\n\n    this.error = (content: FuzzyOptions, duration?: number) => {\n      return this._open('error', content, duration)\n    }\n\n    this.loading = (content: FuzzyOptions, duration?: number) => {\n      return this._open('loading', content, duration)\n    }\n  }\n\n  close() {\n    this._timer && clearTimeout(this._timer)\n    this._getInstance()?.closeToast()\n  }\n\n  config(options: Record<string, unknown>) {\n    this.defaults = { ...this.defaults, ...options }\n  }\n\n  clone() {\n    const manager = new ToastManager(this.defaults)\n\n    manager._mountedApp = this._mountedApp\n\n    return manager\n  }\n\n  destroy() {\n    this._mountedEl && this._wrapper?.removeChild(this._mountedEl)\n    this._innerApp?.unmount()\n    this._container && render(null, this._container)\n    destroyObject(this)\n  }\n\n  isDestroyed() {\n    return false\n  }\n\n  install(app: App, options: Partial<ToastOptions> & { property?: string } = {}) {\n    const { property, ...others } = options\n\n    this.config(others)\n    this._mountedApp = app\n\n    if (property || !app.config.globalProperties.$toast) {\n      app.config.globalProperties[property || '$toast'] = this\n    }\n  }\n\n  transferTo(target: MaybeRef<string | MaybeInstance>) {\n    if (!isClient) return\n\n    const el = unrefElement(target)\n\n    if (el) {\n      this._wrapper = el\n\n      if (this._instance) {\n        this._mountedEl && this._wrapper.appendChild(this._mountedEl)\n      } else {\n        this._getInstance()\n      }\n    }\n  }\n\n  private _getInstance() {\n    if (!this._instance && isClient) {\n      if (!this._mountedApp) {\n        console.warn('[vexip-ui:Toast]: App missing, the plugin maybe not installed.')\n\n        this._container = document.createElement('div')\n        this._innerApp = createApp(Component)\n        this._instance = this._innerApp.mount(this._container) as ToastInstance\n      } else {\n        const vnode = createVNode(Component, null, null)\n\n        this._container = document.createElement('div')\n        vnode.appContext = this._mountedApp._context\n\n        render(vnode, this._container, false)\n\n        this._instance = proxyExposed<ToastInstance>(vnode)\n      }\n\n      this._mountedEl = this._container.firstElementChild as HTMLElement\n      ;(this._wrapper || document.body).appendChild(this._mountedEl)\n    }\n\n    return this._instance\n  }\n\n  private _open(type: null | ToastType, content: FuzzyOptions, _duration?: number) {\n    if (!isClient) {\n      return noop\n    }\n\n    this._timer && clearTimeout(this._timer)\n\n    const options = typeof content === 'string' ? { content, duration: _duration } : content\n    const convenienceOptions = type ? conveniences[type] ?? {} : {}\n\n    const userCloseFn = options.onClose\n    const onClose = () => {\n      this._timer && clearTimeout(this._timer)\n\n      if (typeof userCloseFn === 'function') {\n        return userCloseFn()\n      }\n    }\n\n    const toast = this._getInstance()!\n    const item: ToastOptions = {\n      ...this.defaults,\n      ...convenienceOptions,\n      ...options,\n      type,\n      onClose\n    }\n\n    if (item.icon && typeof item.icon !== 'function') {\n      item.icon = markRaw(item.icon)\n    }\n\n    toast.openToast(item)\n\n    const duration = typeof item.duration === 'number' ? item.duration : 2000\n\n    if (duration >= 500) {\n      this._timer = setTimeout(() => {\n        toast.closeToast()\n      }, duration)\n    }\n\n    return () => {\n      this._timer && clearTimeout(this._timer)\n      toast.closeToast()\n    }\n  }\n}\n\nexport const Toast = new ToastManager()\n", "import { booleanProp, booleanStringProp, buildProps, eventProp, localeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { Placement } from '@vexip-ui/hooks'\nimport type { TourSignType, TourStepOptions, TourStepRenderFn, TourType } from './symbol'\n\nexport const tourProps = buildProps({\n  locale: localeProp('tour'),\n  active: booleanProp,\n  index: Number,\n  steps: Array as PropType<TourStepOptions[]>,\n  type: String as PropType<TourType>,\n  hideMask: booleanProp,\n  signType: String as PropType<TourSignType>,\n  padding: [Number, Array] as PropType<number | number[]>,\n  closable: booleanProp,\n  permeable: booleanProp,\n  transfer: booleanStringProp,\n  onToggle: eventProp<(active: boolean) => void>(),\n  onChange: eventProp<(index: number, step: TourStepOptions) => void>(),\n  onClose: eventProp(),\n  onMaskClick: eventProp<(event: MouseEvent) => void>()\n})\n\nexport type TourProps = ExtractPropTypes<typeof tourProps>\nexport type TourCProps = ConfigurableProps<ExtractPropTypes<typeof tourProps>>\n\nexport const tourStepProps = buildProps({\n  target: [String, Object, Function] as PropType<string | object | (() => any)>,\n  placement: String as PropType<Placement>,\n  title: String,\n  content: String,\n  order: Number,\n  type: String as PropType<TourType>,\n  renderer: Function as PropType<TourStepRenderFn>,\n  onPrev: eventProp(),\n  onNext: eventProp()\n})\n\nexport type TourStepProps = ExtractPropTypes<typeof tourStepProps>\nexport type TourStepCProps = ConfigurableProps<ExtractPropTypes<typeof tourStepProps>>\n", "import type { InjectionKey, MaybeRef } from 'vue'\nimport type { MaybeElement, MaybeInstance, Placement } from '@vexip-ui/hooks'\nimport type { BubbleType } from '@/components/bubble'\n\nexport type TourType = BubbleType\nexport type TourSignType = 'dot' | 'bar' | 'count'\n\nexport interface TourVirtual {\n  getBoundingClientRect(): { top: number, left: number, width: number, height: number }\n}\n\nexport type TourTarget =\n  | MaybeRef<string | MaybeInstance | TourVirtual>\n  | (() => string | MaybeElement | TourVirtual)\n\nexport interface TourPayload {\n  start(): void,\n  prev(): void,\n  next(autoClose?: boolean): void,\n  close(): void\n}\n\nexport type TourStepRenderFn = (payload: TourPayload) => any\n\nexport interface TourStepOptions {\n  target?: TourTarget,\n  placement?: Placement,\n  title?: string,\n  content?: string,\n  order?: number,\n  type?: TourType,\n  renderer?: TourStepRenderFn\n}\n\nexport type TourSlotParams = TourPayload & { step: TourStepOptions, index: number }\nexport type TourCommonSLot = (params: TourSlotParams) => any\n\nexport interface TourState {\n  increaseStep(step: TourStepOptions): void,\n  decreaseStep(step: TourStepOptions): void\n}\n\nexport const TOUR_STATE = Symbol('TOUR_STATE') as InjectionKey<TourState>\n\nlet index = 0\n\nexport function getIdIndex() {\n  return index++\n}\n", "<script setup lang=\"ts\">\nimport { Bubble } from '@/components/bubble'\nimport { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { Masker } from '@/components/masker'\nimport { Renderer } from '@/components/renderer'\n\nimport { computed, provide, reactive, ref, shallowReadonly, toRef, watch } from 'vue'\n\nimport {\n  emitEvent,\n  getStepByWord,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { unrefElement, useModifier, usePopper } from '@vexip-ui/hooks'\nimport { callIfFunc, decide, isClient, isFunction } from '@vexip-ui/utils'\nimport { tourProps } from './props'\nimport { TOUR_STATE, getIdIndex } from './symbol'\n\nimport type { BubbleExposed } from '@/components/bubble'\nimport type { MaskerExposed } from '@/components/masker'\nimport type { TourCommonSLot, TourStepOptions } from './symbol'\n\ndefineOptions({\n  name: 'Tour',\n  inheritAttrs: false\n})\n\nconst _props = defineProps(tourProps)\nconst props = useProps('tour', _props, {\n  locale: null,\n  active: false,\n  index: {\n    static: true,\n    default: 0,\n    validator: value => value >= 0\n  },\n  steps: {\n    static: true,\n    default: () => []\n  },\n  type: 'default',\n  hideMask: false,\n  signType: 'dot',\n  padding: 10,\n  closable: true,\n  permeable: false,\n  transfer: false\n})\n\nconst emit = defineEmits(['update:active', 'update:index'])\n\ndefineSlots<{\n  default: () => any,\n  header: TourCommonSLot,\n  title: TourCommonSLot,\n  close: TourCommonSLot,\n  body: TourCommonSLot,\n  footer: TourCommonSLot,\n  sign: TourCommonSLot,\n  actions: TourCommonSLot\n}>()\n\nconst idIndex = `${getIdIndex()}`\n\nconst nh = useNameHelper('tour')\nconst locale = useLocale('tour', toRef(props, 'locale'))\nconst icons = useIcons()\n\nconst currentActive = ref(props.active)\nconst currentIndex = ref(props.index)\nconst tempSteps: Set<TourStepOptions> = reactive(new Set<any>())\nconst currentRect = ref<number[]>()\nconst sideRects = ref<(number | string)[][]>()\n\nconst masker = ref<MaskerExposed>()\nconst bubble = ref<BubbleExposed>()\nconst wrapper = computed(() => masker.value?.wrapper)\n\nuseModifier({\n  target: wrapper,\n  passive: false,\n  onKeyDown: (event, modifier) => {\n    if (!currentActive.value) return\n\n    decide(\n      [\n        [() => modifier.left || modifier.up, prev],\n        [() => modifier.right || modifier.down, next],\n        [() => modifier.escape, handleClose]\n      ],\n      {\n        beforeMatchAny: () => {\n          event.preventDefault()\n          event.stopPropagation()\n        },\n        afterMatchAny: modifier.resetAll\n      }\n    )\n  }\n})\n\nconst allSteps = computed(() => {\n  return Array.from(tempSteps)\n    .concat(props.steps)\n    .sort((prev, next) => (prev.order || 0) - (next.order || 0))\n})\nconst currentStep = computed(() => allSteps.value[currentIndex.value])\nconst type = computed(() => {\n  const type = currentStep.value?.type || props.type\n\n  return type === 'default' ? undefined : type\n})\nconst className = computed(() => {\n  return [\n    nh.b(),\n    nh.bs('vars'),\n    {\n      [nh.bm('hide-mask')]: props.hideMask,\n      [nh.bm('permeable')]: props.permeable\n    }\n  ]\n})\nconst padding = computed(() => {\n  if (Array.isArray(props.padding)) {\n    return props.padding.length === 2\n      ? [props.padding[0], props.padding[1], props.padding[0], props.padding[1]]\n      : props.padding\n  } else {\n    return new Array<number>(4).fill(props.padding)\n  }\n})\nconst maskId = computed(() => `${nh.bs(idIndex)}__mask`)\n\nconst { reference, placement, updatePopper } = usePopper({\n  wrapper,\n  placement: computed(() => currentStep.value?.placement || 'bottom'),\n  popper: computed(() => bubble.value?.$el),\n  arrow: computed(() => bubble.value?.arrow),\n  shift: { crossAxis: true },\n  autoUpdate: false\n})\n\nwatch(\n  () => props.active,\n  value => {\n    if (value) {\n      start()\n    } else {\n      currentActive.value = value\n    }\n  }\n)\nwatch(\n  () => props.index,\n  value => {\n    currentIndex.value = Math.max(0, value)\n  }\n)\nwatch(\n  [currentActive, currentStep],\n  () => {\n    sideRects.value = undefined\n\n    if (!isClient || !currentActive.value || !currentStep.value) return\n\n    const target = unrefElement(callIfFunc(currentStep.value.target) as HTMLElement)\n\n    if (!target) {\n      currentRect.value = undefined\n      return\n    }\n\n    const { top, left, width, height } = target.getBoundingClientRect()\n\n    currentRect.value = [\n      left - padding.value[3],\n      top - padding.value[0],\n      width + padding.value[1] + padding.value[3],\n      height + padding.value[0] + padding.value[2]\n    ]\n\n    if (props.permeable) {\n      const [x, y, w, h] = currentRect.value\n\n      sideRects.value = [\n        [0, 0, '100%', y],\n        [x + w, 0, `calc(100% - ${x + w}px)`, '100%'],\n        [0, y + h, '100%', `calc(100% - ${y + h}px)`],\n        [0, 0, x, '100%']\n      ]\n    }\n\n    updatePopper()\n  },\n  { immediate: true, flush: 'post' }\n)\n\nprovide(TOUR_STATE, {\n  increaseStep,\n  decreaseStep\n})\n\ndefineExpose({\n  wrapper,\n  currentActive,\n  currentIndex,\n  currentStep,\n  allSteps,\n  start,\n  prev,\n  next,\n  close\n})\n\nconst actions = { start, prev, next, close }\nconst slotParams = shallowReadonly(\n  reactive({\n    ...actions,\n    step: currentStep,\n    index: currentIndex\n  })\n)\n\nfunction increaseStep(step: TourStepOptions) {\n  tempSteps.add(step)\n}\n\nfunction decreaseStep(step: TourStepOptions) {\n  tempSteps.delete(step)\n}\n\nfunction start() {\n  if (currentActive.value) return\n\n  currentActive.value = true\n  emit('update:active', true)\n  emitEvent(props.onToggle, true)\n\n  if (currentIndex.value) {\n    currentIndex.value = 0\n    emit('update:index', 0)\n  }\n}\n\nfunction prev() {\n  if (!currentActive.value || currentIndex.value <= 0) return\n\n  --currentIndex.value\n  emit('update:index', currentIndex.value)\n  emitEvent(props.onChange, currentIndex.value, currentStep.value)\n}\n\nfunction next(autoClose = true) {\n  if (!currentActive.value) return\n\n  if (currentIndex.value >= allSteps.value.length - 1) {\n    if (autoClose) {\n      close()\n    }\n\n    return\n  }\n\n  ++currentIndex.value\n  emit('update:index', currentIndex.value)\n  emitEvent(props.onChange, currentIndex.value, currentStep.value)\n}\n\nfunction close() {\n  if (!currentActive.value) return\n\n  currentActive.value = false\n  emit('update:active', false)\n  emitEvent(props.onToggle, false)\n}\n\nfunction handleClose() {\n  if (!currentActive.value) return\n\n  close()\n  emitEvent(props.onClose)\n}\n</script>\n\n<template>\n  <div v-show=\"false\" role=\"none\" aria-hidden=\"true\">\n    <slot></slot>\n  </div>\n  <Masker\n    v-bind=\"$attrs\"\n    ref=\"masker\"\n    v-model:active=\"currentActive\"\n    :inherit=\"props.inherit\"\n    :class=\"className\"\n    :transfer=\"transfer\"\n    auto-remove\n    transition-name=\"\"\n    :disabled=\"props.hideMask\"\n    @show=\"updatePopper\"\n    @hide=\"currentRect = undefined\"\n    @mask-click=\"emitEvent(props.onMaskClick, $event)\"\n  >\n    <template #default=\"{ show }\">\n      <div\n        v-if=\"currentRect\"\n        ref=\"reference\"\n        :class=\"nh.be('reference')\"\n        role=\"none\"\n        aria-hidden=\"true\"\n        :style=\"{\n          top: `${currentRect[1]}px`,\n          left: `${currentRect[0]}px`,\n          width: `${currentRect[2]}px`,\n          height: `${currentRect[3]}px`\n        }\"\n      ></div>\n      <Transition appear :name=\"nh.ns('fade')\">\n        <Bubble\n          v-if=\"show && currentStep\"\n          ref=\"bubble\"\n          inherit\n          :class=\"[\n            nh.be('bubble'),\n            !currentRect && nh.bem('bubble', 'center'),\n            type && nh.bem('bubble', 'typed'),\n            type && nh.bem('bubble', type)\n          ]\"\n          :content-class=\"nh.be('step')\"\n          :placement=\"placement\"\n          :type=\"currentStep.type || props.type\"\n        >\n          <Renderer\n            v-if=\"isFunction(currentStep.renderer)\"\n            :renderer=\"currentStep.renderer\"\n            :data=\"actions\"\n          ></Renderer>\n          <template v-else>\n            <div :class=\"nh.be('header')\">\n              <slot name=\"header\" v-bind=\"slotParams\">\n                <div :class=\"nh.be('title')\">\n                  <slot name=\"title\" v-bind=\"slotParams\">\n                    {{ currentStep.title ?? getStepByWord(locale.stepCount, currentIndex) }}\n                  </slot>\n                </div>\n                <button\n                  v-if=\"props.closable\"\n                  type=\"button\"\n                  :class=\"nh.be('close')\"\n                  @click=\"handleClose\"\n                >\n                  <slot name=\"close\" v-bind=\"slotParams\">\n                    <Icon\n                      v-bind=\"icons.close\"\n                      :scale=\"+(icons.close.scale || 1) * 1.2\"\n                      label=\"close\"\n                    ></Icon>\n                  </slot>\n                </button>\n              </slot>\n            </div>\n            <div :class=\"nh.be('content')\">\n              <slot name=\"body\" v-bind=\"slotParams\">\n                {{ currentStep.content }}\n              </slot>\n            </div>\n            <div :class=\"nh.be('footer')\">\n              <slot name=\"footer\" v-bind=\"slotParams\">\n                <div :class=\"[nh.be('sign'), nh.bem('sign', props.signType)]\">\n                  <slot name=\"sign\" v-bind=\"slotParams\">\n                    <template v-if=\"props.signType === 'count'\">\n                      <span>{{ currentIndex + 1 }}</span>\n                      <span :class=\"nh.be('count-sep')\">/</span>\n                      <span>{{ allSteps.length }}</span>\n                    </template>\n                    <template v-else>\n                      <span\n                        v-for=\"n in allSteps.length\"\n                        :key=\"n\"\n                        :class=\"[\n                          nh.be(`sign-${props.signType === 'dot' ? 'dot' : 'bar'}`),\n                          n - 1 === currentIndex &&\n                            nh.bem(`sign-${props.signType === 'dot' ? 'dot' : 'bar'}`, 'active')\n                        ]\"\n                      ></span>\n                    </template>\n                  </slot>\n                </div>\n                <span style=\"flex: auto\" role=\"none\"></span>\n                <slot name=\"actions\" v-bind=\"slotParams\">\n                  <Button\n                    v-if=\"currentIndex > 0\"\n                    inherit\n                    :class=\"[nh.be('action'), nh.bem('action', 'prev')]\"\n                    size=\"small\"\n                    :text=\"!!type\"\n                    @click=\"prev\"\n                  >\n                    {{ locale.prev }}\n                  </Button>\n                  <Button\n                    v-if=\"currentIndex <= allSteps.length - 1\"\n                    inherit\n                    :class=\"[nh.be('action'), nh.bem('action', 'next')]\"\n                    :type=\"type ? 'default' : 'primary'\"\n                    size=\"small\"\n                    @click=\"next()\"\n                  >\n                    {{ currentIndex === allSteps.length - 1 ? locale.done : locale.next }}\n                  </Button>\n                </slot>\n              </slot>\n            </div>\n          </template>\n        </Bubble>\n      </Transition>\n    </template>\n    <template #mask>\n      <svg style=\"width: 100%; height: 100%\">\n        <defs>\n          <mask :id=\"maskId\">\n            <rect\n              x=\"0\"\n              y=\"0\"\n              width=\"100%\"\n              height=\"100%\"\n              fill=\"white\"\n            />\n            <rect\n              v-if=\"currentRect\"\n              :class=\"[nh.be('hollow'), nh.bem('hollow', 'active')]\"\n              :x=\"currentRect[0]\"\n              :y=\"currentRect[1]\"\n              :width=\"currentRect[2]\"\n              :height=\"currentRect[3]\"\n              fill=\"black\"\n            />\n          </mask>\n        </defs>\n        <rect\n          x=\"0\"\n          y=\"0\"\n          width=\"100%\"\n          height=\"100%\"\n          fill=\"rgba(0, 0, 0, 45%)\"\n          :mask=\"`url(#${maskId})`\"\n        />\n        <g v-if=\"sideRects?.length\" fill=\"transparent\" style=\"pointer-events: auto\">\n          <rect\n            v-for=\"(rect, index) in sideRects\"\n            :key=\"index\"\n            :x=\"rect[0]\"\n            :y=\"rect[1]\"\n            :width=\"rect[2]\"\n            :height=\"rect[3]\"\n          />\n        </g>\n      </svg>\n    </template>\n  </Masker>\n</template>\n", "import { defineComponent, inject, onBeforeUnmount, reactive, renderSlot, watch } from 'vue'\n\nimport { useProps } from '@vexip-ui/config'\nimport { tourStepProps } from './props'\nimport { TOUR_STATE } from './symbol'\n\nimport type { TourPayload, TourStepOptions } from './symbol'\n\ntype StepPropKey = keyof typeof tourStepProps\n\nconst propKeys = Object.keys(tourStepProps) as StepPropKey[]\nconst deepProps: StepPropKey[] = []\nconst ignoredProps: StepPropKey[] = ['renderer']\n\nconst funcProp = {\n  default: null,\n  isFunc: true,\n  static: true\n}\n\nexport default defineComponent({\n  name: 'TourStep',\n  props: tourStepProps,\n  setup(_props, { slots }) {\n    const props = useProps('tableColumn', _props, {\n      target: {\n        default: null,\n        static: true\n      },\n      placement: 'bottom',\n      title: '',\n      content: '',\n      order: {\n        default: 0,\n        static: true\n      },\n      type: 'default',\n      renderer: funcProp\n    })\n\n    const tourState = inject(TOUR_STATE, null)\n    const options = reactive({}) as TourStepOptions\n\n    for (const key of propKeys) {\n      if (ignoredProps.includes(key)) continue\n\n      watch(\n        () => props[key],\n        value => {\n          (options[key as keyof TourStepOptions] as any) = value\n        },\n        { immediate: true, deep: deepProps.includes(key) }\n      )\n    }\n\n    watch(() => props.renderer, setRenderer)\n\n    setRenderer()\n\n    tourState?.increaseStep(options)\n\n    onBeforeUnmount(() => {\n      tourState?.decreaseStep(options)\n    })\n\n    function setRenderer() {\n      if (typeof slots.default === 'function') {\n        options.renderer = (payload: TourPayload) => renderSlot(slots, 'default', payload as any)\n      } else if (typeof props.renderer === 'function') {\n        options.renderer = props.renderer\n      } else {\n        options.renderer = undefined\n      }\n    }\n\n    return () => null\n  }\n})\n", "import { Checkbox } from '@/components/checkbox'\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Icon } from '@/components/icon'\nimport { Input } from '@/components/input'\nimport { NumberInput } from '@/components/number-input'\nimport { ResizeObserver } from '@/components/resize-observer'\nimport { VirtualList } from '@/components/virtual-list'\n\nimport {\n  computed,\n  defineComponent,\n  reactive,\n  ref,\n  renderSlot,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport { stateProp, useIcons, useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useRtl } from '@vexip-ui/hooks'\nimport { boundRange, decide } from '@vexip-ui/utils'\n\nimport type { PropType } from 'vue'\nimport type { VirtualListExposed } from '@/components/virtual-list'\nimport type { LocaleConfig } from '@vexip-ui/config'\nimport type { TransferOptionState } from './symbol'\n\nexport default defineComponent({\n  name: 'TransferPanel',\n  props: {\n    type: {\n      type: String as PropType<'source' | 'target'>,\n      default: null\n    },\n    state: {\n      type: stateProp,\n      default: 'default'\n    },\n    selected: {\n      type: Set as PropType<Set<string | number>>,\n      default: () => new Set()\n    },\n    paged: {\n      type: Boolean,\n      default: false\n    },\n    filter: {\n      type: Function as PropType<(value: string, options: TransferOptionState) => boolean>,\n      default: null\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    title: {\n      type: String,\n      default: ''\n    },\n    options: {\n      type: Array as PropType<TransferOptionState[]>,\n      default: () => []\n    },\n    emptyText: {\n      type: String,\n      default: '暂无数据'\n    },\n    optionHeight: {\n      type: Number,\n      default: 32\n    },\n    deepState: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    loadingIcon: {\n      type: Object,\n      default: null\n    },\n    loadingLock: {\n      type: Boolean,\n      default: false\n    },\n    loadingEffect: {\n      type: String,\n      default: null\n    },\n    locale: {\n      type: Object as PropType<LocaleConfig['transfer']>,\n      default: () => ({})\n    }\n  },\n  emits: ['update:selected', 'select', 'enter', 'switch'],\n  setup(props, { slots, emit }) {\n    const nh = useNameHelper('transfer')\n    const icons = useIcons()\n\n    const { isRtl } = useRtl()\n\n    const currentSelected = ref(new Set(props.selected))\n    const pageSize = ref(10)\n    const currentPage = ref(1)\n    const currentMark = ref<string | number | null>(null)\n    const currentHitting = ref(-1)\n    const currentFilter = ref('')\n    const searching = ref(false)\n\n    const header = ref<HTMLElement>()\n    const body = ref<HTMLElement>()\n    const footer = ref<HTMLElement>()\n    const search = ref<HTMLElement>()\n    const input = ref<InstanceType<typeof Input>>()\n    const list = ref<VirtualListExposed>()\n\n    let bodyRealHeight = 0\n    let lastSelected: string | number | null = null\n    let keyUsed = false\n\n    const { target: wrapper, modifier } = useModifier({\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        decide(\n          [\n            [\n              () => modifier.up || modifier.down,\n              () => {\n                if (!keyUsed && currentHitting.value < 0) {\n                  keyUsed = true\n\n                  if (lastSelected) {\n                    currentHitting.value = props.options.findIndex(\n                      option => option.value === lastSelected\n                    )\n                  } else if (list.value) {\n                    currentHitting.value = Math.round(list.value.scrollOffset / props.optionHeight)\n                  }\n\n                  currentHitting.value = currentHitting.value === -1 ? 0 : currentHitting.value\n                } else {\n                  currentHitting.value = boundRange(\n                    findEnabledIndex(\n                      currentHitting.value + (modifier.up ? -1 : 1),\n                      modifier.up ? -1 : 1\n                    ),\n                    0,\n                    currentOptions.value.length - 1\n                  )\n                }\n\n                if (!props.paged) {\n                  ensureOptionInView(currentHitting.value, modifier.up ? 'top' : 'bottom')\n                }\n              }\n            ],\n            [\n              () => props.paged && (modifier.left || modifier.right) && event.ctrlKey,\n              () => {\n                handlePageChange(currentPage.value + (modifier.left ? -1 : 1))\n                currentHitting.value = 0\n              }\n            ],\n            [\n              () =>\n                (props.type === 'source' && modifier.right) ||\n                (props.type === 'target' && modifier.left),\n              () => {\n                keyUsed = false\n                currentHitting.value = -1\n                lastSelected = null\n                emit('switch')\n              }\n            ],\n            [\n              () => modifier.space,\n              () => {\n                const option = currentOptions.value[currentHitting.value]\n\n                if (option) {\n                  currentSelected.value[currentSelected.value.has(option.value) ? 'delete' : 'add'](\n                    option.value\n                  )\n                  emitSelectedChange()\n                }\n              }\n            ],\n            [() => modifier.enter, () => emit('enter')],\n            [\n              () => typeof props.filter === 'function' && !!input.value && modifier['ctrl+f'],\n              () => {\n                event.stopPropagation()\n                input.value!.focus()\n              }\n            ]\n          ],\n          {\n            beforeMatchAny: () => event.preventDefault(),\n            afterMatchAny: modifier.resetAll\n          }\n        )\n      }\n    })\n\n    const className = computed(() => {\n      return {\n        [nh.be('panel')]: true,\n        [nh.bem('panel', props.state)]: props.state !== 'default',\n        [nh.bem('panel', 'disabled')]: props.disabled\n      }\n    })\n    const visibleOptions = computed(() => {\n      const filter = props.filter\n      const filterValue = currentFilter.value\n\n      if (filter && filterValue) {\n        return props.options.filter(option => filter(filterValue, option))\n      }\n\n      return props.options\n    })\n    const optionSize = computed(() => visibleOptions.value.length)\n    const pagedOptions = computed(() => {\n      return visibleOptions.value.slice(\n        (currentPage.value - 1) * pageSize.value,\n        currentPage.value * pageSize.value\n      )\n    })\n    const currentOptions = computed(() => (props.paged ? pagedOptions.value : visibleOptions.value))\n    const totalPages = computed(() => Math.ceil(optionSize.value / (pageSize.value || 1)))\n\n    watch(\n      () => props.selected,\n      value => {\n        currentSelected.value = value\n      }\n    )\n    watch(optionSize, () => {\n      keyUsed = false\n      currentHitting.value = -1\n      lastSelected = null\n    })\n\n    const partial = ref(false)\n    const allSelected = ref(false)\n\n    watchEffect(() => {\n      const options = visibleOptions.value\n      const selected = currentSelected.value\n\n      let hasSelected = false\n      let hasUnselected = false\n\n      for (let i = 0, len = optionSize.value; i < len; ++i) {\n        const option = options[i]\n\n        if (!option.disabled) {\n          if (selected.has(option.value)) {\n            hasSelected = true\n          } else {\n            hasUnselected = true\n          }\n        }\n\n        if (hasSelected && hasUnselected) {\n          break\n        }\n      }\n\n      allSelected.value = hasSelected && !hasUnselected\n      partial.value = !allSelected.value && selected.size > 0\n    })\n\n    function computePageSize() {\n      requestAnimationFrame(() => {\n        const bodyEl = body.value || list.value?.wrapper\n\n        if (bodyEl) {\n          const style = getComputedStyle(bodyEl)\n          const paddingTop = parseInt(style.paddingTop)\n          const paddingBottom = parseInt(style.paddingBottom)\n          const innerHeight = bodyEl.offsetHeight - paddingTop - paddingBottom\n\n          bodyRealHeight = innerHeight\n          pageSize.value = Math.floor(innerHeight / (props.optionHeight || 1))\n        }\n      })\n    }\n\n    function toggleSelect(option: TransferOptionState) {\n      if (props.disabled || option.disabled) return\n\n      if (currentMark.value && modifier.shift) {\n        handleRangeSelect(currentMark.value, option.value)\n        return\n      }\n\n      if (currentSelected.value.has(option.value)) {\n        currentSelected.value.delete(option.value)\n      } else {\n        currentSelected.value.add(option.value)\n      }\n\n      keyUsed = false\n      currentHitting.value = -1\n      lastSelected = option.value\n      currentMark.value = option.value\n      emitSelectedChange()\n    }\n\n    function handleRangeSelect(start: string | number, end: string | number) {\n      const options = visibleOptions.value\n\n      let startIndex = -1\n      let endIndex = -1\n\n      for (let i = 0, len = options.length; i < len; ++i) {\n        const option = options[i]\n\n        if (option.value === start) {\n          startIndex = i\n        } else if (option.value === end) {\n          endIndex = i\n        }\n\n        if (startIndex > 0 && endIndex > 0) break\n      }\n\n      const method = currentSelected.value.has(options[startIndex]?.value) ? 'add' : 'delete'\n\n      if (startIndex > endIndex) {\n        ;[startIndex, endIndex] = [endIndex, startIndex]\n      }\n\n      for (let i = startIndex; i <= endIndex; ++i) {\n        const option = options[i]\n\n        if (!option.disabled) {\n          currentSelected.value[method](option.value)\n        }\n      }\n\n      emitSelectedChange()\n    }\n\n    function toggleSelectAll(event?: Event) {\n      event?.preventDefault()\n\n      if (props.disabled) return\n\n      if (allSelected.value) {\n        for (const option of visibleOptions.value) {\n          !option.disabled && currentSelected.value.delete(option.value)\n        }\n      } else {\n        for (const option of visibleOptions.value) {\n          !option.disabled && currentSelected.value.add(option.value)\n        }\n      }\n\n      currentMark.value = null\n      emitSelectedChange()\n    }\n\n    function handleReverse() {\n      if (props.disabled) return\n\n      if (partial.value) {\n        const prevSelected = new Set(currentSelected.value)\n\n        for (const option of visibleOptions.value) {\n          if (!option.disabled) {\n            if (prevSelected.has(option.value)) {\n              currentSelected.value.delete(option.value)\n            } else {\n              currentSelected.value.add(option.value)\n            }\n          }\n        }\n\n        currentMark.value = null\n        emitSelectedChange()\n      } else {\n        toggleSelectAll()\n      }\n    }\n\n    function handleBlur() {\n      currentMark.value = null\n      modifier.resetAll()\n    }\n\n    function emitSelectedChange() {\n      emit('update:selected', currentSelected.value)\n      emit('select')\n    }\n\n    function handlePageChange(page: number) {\n      currentPage.value = boundRange(page, 1, totalPages.value)\n    }\n\n    function queryEnabledIndex(index: number, step: number) {\n      const options = currentOptions.value\n      step = step / Math.abs(step)\n\n      while (options[index]?.disabled) {\n        index += step\n\n        if (index < 0 || index >= options.length) break\n      }\n\n      return index\n    }\n\n    function findEnabledIndex(index: number, sign: 1 | -1 = 1) {\n      const options = currentOptions.value\n\n      if (options[index]?.disabled) {\n        index = queryEnabledIndex(index, sign)\n\n        if (sign > 0 ? index >= options.length : index < 0) {\n          index = queryEnabledIndex(index, -sign)\n\n          // 全禁用\n          if (sign > 0 ? index < 0 : index >= options.length) index = -1\n        }\n      }\n\n      return index\n    }\n\n    function ensureOptionInView(index: number, direction: 'top' | 'bottom') {\n      const option = props.options[index]\n\n      if (props.paged || !option || !list.value) return\n\n      if (direction === 'bottom') {\n        const target = (index + 1) * props.optionHeight\n\n        if (list.value.scrollOffset + bodyRealHeight < target) {\n          list.value.scrollTo((index - pageSize.value + 1) * props.optionHeight)\n        }\n      } else {\n        const target = index * props.optionHeight\n\n        if (list.value.scrollOffset > target) {\n          list.value.scrollTo(target)\n        }\n      }\n    }\n\n    const slotParams = reactive({\n      type: toRef(props, 'type'),\n      currentPage,\n      pageSize,\n      totalPages,\n      allSelected,\n      partial,\n      selected: computed(() => Array.from(currentSelected.value)),\n      options: computed(() => visibleOptions.value),\n      toggleSelectAll,\n      handleReverse\n    })\n\n    function renderOption({ option, index }: { option: TransferOptionState, index: number }) {\n      const disabled = props.disabled || option.disabled\n      const handleCheck = (event: MouseEvent) => {\n        event.preventDefault()\n        event.stopPropagation()\n        toggleSelect(option)\n      }\n\n      return (\n        <li\n          class={{\n            [nh.be('option')]: true,\n            [nh.bem('option', 'disabled')]: disabled,\n            [nh.bem('option', 'hitting')]: currentHitting.value === index\n          }}\n          role={'option'}\n          aria-disabled={disabled ? 'true' : undefined}\n          onClick={() => toggleSelect(option)}\n        >\n          {slots.option\n            ? renderSlot(slots, 'option', { type: props.type, option, index })\n            : [\n              <Checkbox\n                key={1}\n                class={nh.be('checkbox')}\n                state={props.deepState ? props.state : undefined}\n                checked={currentSelected.value.has(option.value)}\n                disabled={disabled}\n                tab-index={-1}\n                onClick={handleCheck}\n              ></Checkbox>,\n              <span key={2} class={nh.be('label')}>\n                {slots.label ? renderSlot(slots, 'label', { option, index }) : option.label}\n              </span>\n              ]}\n        </li>\n      )\n    }\n\n    function renderHeader() {\n      return (\n        <div ref={header} class={nh.be('header')}>\n          {slots.header\n            ? (\n                renderSlot(slots, 'header', slotParams)\n              )\n            : (\n              <>\n                <Checkbox\n                  inherit\n                  control\n                  class={nh.be('checkbox')}\n                  state={props.deepState ? props.state : undefined}\n                  checked={allSelected.value}\n                  partial={partial.value}\n                  disabled={props.disabled}\n                  tab-index={-1}\n                  onClick={toggleSelectAll}\n                ></Checkbox>\n                <div\n                  class={[nh.be('reverse'), props.disabled && nh.bem('reverse', 'disabled')]}\n                  title={props.locale.reverse}\n                  onClick={handleReverse}\n                >\n                  <Icon\n                    {...icons.value.retweet}\n                    scale={+(icons.value.retweet.scale || 1) * 1.2}\n                  ></Icon>\n                </div>\n                <div class={nh.be('counter')}>\n                  {`${currentSelected.value.size}/${visibleOptions.value.length}`}\n                </div>\n                {(props.title || slots.title) && (\n                  <span class={nh.be('title')}>\n                    {slots.title ? renderSlot(slots, 'title', slotParams) : props.title}\n                  </span>\n                )}\n                <CollapseTransition appear horizontal fade-effect>\n                  {props.loading && (\n                    <div class={nh.be('loading')}>\n                      <Icon\n                        {...icons.value.loading}\n                        effect={props.loadingEffect || icons.value.loading.effect}\n                        icon={props.loadingIcon || icons.value.loading.icon}\n                        label={'loading'}\n                      ></Icon>\n                    </div>\n                  )}\n                </CollapseTransition>\n              </>\n              )}\n        </div>\n      )\n    }\n\n    function renderFilter() {\n      if (typeof props.filter !== 'function') return null\n\n      const stop = (e: Event) => e.stopPropagation()\n      // const setFilter = (value: string) => (currentFilter.value = value)\n\n      return (\n        <div ref={search} class={nh.be('filter')}>\n          <Input\n            ref={input}\n            v-model:value={currentFilter.value}\n            inherit\n            clearable\n            sync\n            disabled={props.disabled}\n            placeholder={searching.value ? undefined : props.locale.search}\n            onKeydown={stop}\n            onFocus={() => (searching.value = true)}\n            onBlur={() => (searching.value = false)}\n          >\n            {{\n              suffix: () => <Icon {...icons.value.search}></Icon>\n            }}\n          </Input>\n        </div>\n      )\n    }\n\n    function renderBody() {\n      if (props.paged || slots.body) {\n        return (\n          <ResizeObserver throttle onResize={computePageSize}>\n            <ul ref={body} class={nh.be('body')} role={'listbox'}>\n              {slots.body\n                ? (\n                    renderSlot(slots, 'body', slotParams)\n                  )\n                : pagedOptions.value.length\n                  ? (\n                      pagedOptions.value.map((option, index) => renderOption({ option, index }))\n                    )\n                  : (\n                    <div class={nh.be('empty')}>{props.emptyText || props.locale.empty}</div>\n                    )}\n            </ul>\n          </ResizeObserver>\n        )\n      }\n\n      return (\n        <VirtualList\n          ref={list}\n          inherit\n          class={nh.be('body')}\n          items={visibleOptions.value}\n          item-size={props.optionHeight}\n          item-fixed\n          use-y-bar\n          id-key={'value'}\n          items-attrs={{ role: 'listbox', ariaLabel: props.type }}\n          onResize={computePageSize}\n        >\n          {{\n            default: ({ item, index }: { item: TransferOptionState, index: number }) =>\n              renderOption({ option: item, index }),\n            empty: () => <div class={nh.be('empty')}>{props.emptyText || props.locale.empty}</div>\n          }}\n        </VirtualList>\n      )\n    }\n\n    function renderFooter() {\n      if (!props.paged && !slots.footer) return null\n\n      return (\n        <div ref={footer} class={nh.be('footer')}>\n          {slots.footer\n            ? (\n                renderSlot(slots, 'footer', slotParams)\n              )\n            : (\n              <div class={nh.be('pagination')}>\n                <Icon\n                  {...(isRtl.value ? icons.value.angleRight : icons.value.angleLeft)}\n                  class={[\n                    nh.be('page-plus'),\n                    currentPage.value <= 1 && nh.bem('page-plus', 'disabled')\n                  ]}\n                  onClick={() => handlePageChange(currentPage.value - 1)}\n                ></Icon>\n                <NumberInput\n                  inherit\n                  value={currentPage.value}\n                  class={nh.be('page-input')}\n                  size={'small'}\n                  min={1}\n                  max={totalPages.value}\n                  onChange={handlePageChange}\n                ></NumberInput>\n                <span style={'margin: 0 4px'}>{'/'}</span>\n                <span>{totalPages.value}</span>\n                <Icon\n                  {...(isRtl.value ? icons.value.angleLeft : icons.value.angleRight)}\n                  class={[\n                    nh.be('page-minus'),\n                    currentPage.value >= totalPages.value && nh.bem('page-minus', 'disabled')\n                  ]}\n                  onClick={() => handlePageChange(currentPage.value + 1)}\n                ></Icon>\n              </div>\n              )}\n        </div>\n      )\n    }\n\n    return () => (\n      <div ref={wrapper} class={className.value} tabindex={0} onBlur={handleBlur}>\n        {renderHeader()}\n        {renderFilter()}\n        {renderBody()}\n        {renderFooter()}\n      </div>\n    )\n  }\n})\n", "import {\n  booleanProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  localeProp,\n  stateProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { TransferFilter, TransferKeyConfig } from './symbol'\n\nexport type RawOption = string | Record<string, any>\nexport type Values = (string | number)[]\n\nexport type SelectHandler = (\n  type: 'source' | 'target',\n  selected: { source: Values, target: Values },\n  data: { source: RawOption[], target: RawOption[] }\n) => void\n\nexport const transferProps = buildProps({\n  state: stateProp,\n  locale: localeProp('transfer'),\n  options: Array as PropType<RawOption[]>,\n  value: Array as PropType<Values>,\n  disabled: booleanProp,\n  paged: booleanProp,\n  filter: {\n    type: [Boolean, Function] as PropType<boolean | TransferFilter>,\n    default: null\n  },\n  emptyText: String,\n  keyConfig: Object as PropType<TransferKeyConfig>,\n  optionHeight: Number,\n  ignoreCase: booleanProp,\n  sourceTitle: String,\n  targetTitle: String,\n  deepState: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  onChange: eventProp<(values: Values) => void>(),\n  onSelect: eventProp<SelectHandler>()\n})\n\nexport type TransferProps = ExtractPropTypes<typeof transferProps>\nexport type TransferCProps = ConfigurableProps<TransferProps>\n", "import { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { useFieldStore } from '@/components/form'\n\nimport {\n  computed,\n  defineComponent,\n  reactive,\n  ref,\n  renderSlot,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport {\n  createIconProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { isNull } from '@vexip-ui/utils'\nimport { useRtl } from '@vexip-ui/hooks'\nimport TransferPanel from './transfer-panel'\nimport { transferProps } from './props'\n\nimport type { TransferKeyConfig, TransferOptionState } from './symbol'\n\nconst defaultKeyConfig: Required<TransferKeyConfig> = {\n  value: 'value',\n  label: 'label',\n  disabled: 'disabled'\n}\n\nexport default defineComponent({\n  name: 'Transfer',\n  components: {\n    Button,\n    TransferPanel\n  },\n  props: transferProps,\n  emits: ['update:value'],\n  setup(_props, { slots, emit, expose }) {\n    const { idFor, state, disabled, loading, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<(string | number)[]>(() => source.value?.$el?.focus())\n\n    const props = useProps('transfer', _props, {\n      state: createStateProp(state),\n      locale: null,\n      options: {\n        default: () => [],\n        static: true\n      },\n      value: {\n        default: () => getFieldValue([]),\n        static: true\n      },\n      disabled: () => disabled.value,\n      paged: false,\n      filter: false,\n      emptyText: null,\n      keyConfig: () => ({}),\n      optionHeight: {\n        default: 32,\n        validator: value => value > 0\n      },\n      ignoreCase: false,\n      sourceTitle: null,\n      targetTitle: null,\n      deepState: false,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingLock: false,\n      loadingEffect: null\n    })\n\n    const { isRtl } = useRtl()\n\n    const nh = useNameHelper('transfer')\n    const locale = useLocale('transfer', toRef(props, 'locale'))\n    const icons = useIcons()\n\n    const currentValue = ref<Set<string | number>>(null!)\n    const sourceSelected = ref(new Set<string | number>())\n    const targetSelected = ref(new Set<string | number>())\n    const sourceOptions = ref<TransferOptionState[]>([])\n    const targetOptions = ref<TransferOptionState[]>([])\n    const optionStates = ref<TransferOptionState[]>([])\n\n    const source = ref<InstanceType<typeof TransferPanel>>()\n    const target = ref<InstanceType<typeof TransferPanel>>()\n\n    const keyConfig = computed(() => ({ ...defaultKeyConfig, ...props.keyConfig }))\n\n    let optionValueMap = new Map<string | number, TransferOptionState>()\n    let emittedValue = props.value\n\n    const updateTrigger = ref(0)\n\n    watchEffect(() => {\n      /* eslint-disable @typescript-eslint/no-unused-expressions */\n      props.keyConfig.value\n      props.keyConfig.label\n      props.keyConfig.disabled\n\n      for (let i = 0, len = props.options.length; i < len; ++i) {\n        props.options[i]\n      }\n      /* eslint-enable */\n\n      updateTrigger.value++\n    })\n\n    watch(updateTrigger, initOptions, { immediate: true })\n\n    watchEffect(() => {\n      if (!currentValue.value.size) {\n        sourceOptions.value = Array.from(optionStates.value)\n        targetOptions.value = []\n        return\n      }\n\n      const selectedValues = new Set(currentValue.value)\n      const target: TransferOptionState[] = []\n      const source: TransferOptionState[] = []\n\n      for (const option of optionStates.value) {\n        if (selectedValues.has(option.value)) {\n          target.push(option)\n        } else {\n          source.push(option)\n        }\n      }\n\n      targetOptions.value = target\n      sourceOptions.value = source\n    })\n\n    function initOptions() {\n      const { value: valueKey, label: labelKey, disabled: disabledKey } = keyConfig.value\n      const oldMap = optionValueMap\n      const map = new Map<string | number, TransferOptionState>()\n\n      props.options.forEach(option => {\n        const rawOption = typeof option === 'string' ? { [valueKey]: option } : option\n        const value = rawOption[valueKey]\n\n        if (isNull(value)) return\n\n        const label = rawOption[labelKey] || String(value)\n        const { [disabledKey]: disabled = false } = rawOption\n        const oldState = oldMap.get(rawOption.value)\n        const optionState = reactive({\n          disabled,\n          value,\n          label,\n          hidden: oldState?.hidden ?? false,\n          hitting: oldState?.hitting ?? false,\n          data: option\n        })\n\n        map.set(value, optionState)\n      })\n\n      optionValueMap = map\n      optionStates.value = Array.from(map.values())\n      currentValue.value = new Set(emittedValue)\n    }\n\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm(props.state)]: props.state !== 'default',\n          [nh.bm('readonly')]: readonly.value,\n          [nh.bm('loading')]: props.loading\n        }\n      ]\n    })\n    const actionType = computed(() => {\n      return props.deepState && props.state !== 'default' ? props.state : 'primary'\n    })\n    const toTargetEnabled = computed(() => !!sourceSelected.value.size)\n    const toSourceEnabled = computed(() => !!targetSelected.value.size)\n    const defaultFilter = computed(() => {\n      return props.ignoreCase\n        ? (value: string, option: TransferOptionState) =>\n            option.label.toLocaleLowerCase().includes(value)\n        : (value: string, option: TransferOptionState) => option.label.includes(value)\n    })\n    const sourceFilter = computed(() => getFilterMethod('source'))\n    const targetFilter = computed(() => getFilterMethod('target'))\n\n    watch(\n      () => props.value,\n      value => {\n        emittedValue = value\n        currentValue.value = new Set(emittedValue)\n      }\n    )\n\n    expose({\n      handleToTarget,\n      handleToSource,\n      handlePanelFocus,\n      handlePanelBlur,\n      focus: (options?: FocusOptions) => source.value?.$el?.focus(options),\n      blur: () => {\n        source.value?.$el?.blur()\n        target.value?.$el?.blur()\n      }\n    })\n\n    function getFilterMethod(type: 'source' | 'target') {\n      const filter = props.filter\n\n      if (!filter) return undefined\n\n      if (typeof filter === 'function') {\n        return (value: string, option: TransferOptionState) => filter(value, option, type)\n      }\n\n      return defaultFilter.value\n    }\n\n    function handleChange() {\n      emittedValue = Array.from(currentValue.value)\n\n      emit('update:value', emittedValue)\n      setFieldValue(emittedValue)\n      emitEvent(props.onChange, emittedValue)\n      validateField()\n    }\n\n    function handleToTarget() {\n      for (const value of sourceSelected.value) {\n        currentValue.value.add(value)\n      }\n\n      sourceSelected.value.clear()\n      handleChange()\n    }\n\n    function handleToSource() {\n      for (const value of targetSelected.value) {\n        currentValue.value.delete(value)\n      }\n\n      targetSelected.value.clear()\n      handleChange()\n    }\n\n    function handleSelect(type: 'source' | 'target') {\n      const selected = {\n        source: Array.from(sourceSelected.value),\n        target: Array.from(targetSelected.value)\n      }\n      const data = {\n        source: selected.source.map(value => optionValueMap.get(value)?.data ?? ''),\n        target: selected.target.map(value => optionValueMap.get(value)?.data ?? '')\n      }\n\n      emitEvent(props.onSelect, type, selected, data)\n    }\n\n    function handlePanelFocus(type: 'source' | 'target') {\n      if (type === 'source') {\n        source.value?.$el.focus()\n      } else {\n        target.value?.$el.focus()\n      }\n    }\n\n    function handlePanelBlur() {\n      source.value?.$el.blur()\n      target.value?.$el.blur()\n    }\n\n    function createSlotRender(names: string[]) {\n      for (const name of names) {\n        if (slots[name]) {\n          return (params: any) => renderSlot(slots, name, params)\n        }\n      }\n\n      return null\n    }\n\n    return () => {\n      return (\n        <div id={idFor.value} class={className.value}>\n          <TransferPanel\n            ref={source}\n            v-model:selected={sourceSelected.value}\n            type={'source'}\n            class={nh.bem('panel', 'source')}\n            state={props.state}\n            paged={props.paged}\n            filter={sourceFilter.value}\n            disabled={props.disabled}\n            title={props.sourceTitle || locale.value.source}\n            options={sourceOptions.value}\n            empty-text={props.emptyText || locale.value.empty}\n            option-height={props.optionHeight}\n            ignore-case={props.ignoreCase}\n            deep-state={props.deepState}\n            loading={props.loading}\n            loading-icon={props.loadingIcon}\n            loading-lock={props.loadingLock}\n            loading-effect={props.loadingEffect}\n            locale={locale.value}\n            onSelect={() => handleSelect('source')}\n            onEnter={handleToTarget}\n            onSwitch={() => handlePanelFocus('target')}\n          >\n            {{\n              header: createSlotRender(['source-header', 'sourceHeader', 'header']),\n              title: createSlotRender(['source-title', 'sourceTitle', 'title']),\n              body: createSlotRender(['source-body', 'sourceBody', 'body']),\n              footer: createSlotRender(['source-footer', 'sourceFooter', 'footer']),\n              option: createSlotRender(['source-option', 'sourceOption', 'option'])\n            }}\n          </TransferPanel>\n          <div class={nh.be('actions')}>\n            {slots.actions\n              ? renderSlot(slots, 'actions', { handleToTarget, handleToSource })\n              : [\n                <Button\n                  key={1}\n                  inherit\n                  class={nh.be('action')}\n                  type={actionType.value}\n                  size={'small'}\n                  disabled={props.disabled || !toTargetEnabled.value}\n                  loading={readonly.value}\n                  loading-icon={props.loadingIcon}\n                  loading-effect={props.loadingEffect}\n                  style={{ marginBottom: '6px' }}\n                  onClick={handleToTarget}\n                >\n                  {{\n                    icon: () => (\n                      <Icon\n                        {...(isRtl.value ? icons.value.angleLeft : icons.value.angleRight)}\n                        label={isRtl.value ? 'to left' : 'to right'}\n                      ></Icon>\n                    )\n                  }}\n                </Button>,\n                <Button\n                  key={2}\n                  inherit\n                  class={nh.be('action')}\n                  type={actionType.value}\n                  size={'small'}\n                  disabled={props.disabled || !toSourceEnabled.value}\n                  loading={readonly.value}\n                  loading-icon={props.loadingIcon}\n                  loading-effect={props.loadingEffect}\n                  style={{ margin: '0' }}\n                  onClick={handleToSource}\n                >\n                  {{\n                    icon: () => (\n                      <Icon\n                        {...(isRtl.value ? icons.value.angleRight : icons.value.angleLeft)}\n                        label={isRtl.value ? 'to right' : 'to left'}\n                      ></Icon>\n                    )\n                  }}\n                </Button>\n                ]}\n          </div>\n          <TransferPanel\n            ref={target}\n            v-model:selected={targetSelected.value}\n            type={'target'}\n            class={nh.bem('panel', 'target')}\n            state={props.state}\n            paged={props.paged}\n            filter={targetFilter.value}\n            disabled={props.disabled}\n            title={props.targetTitle || locale.value.target}\n            options={targetOptions.value}\n            empty-text={props.emptyText || locale.value.empty}\n            option-height={props.optionHeight}\n            ignore-case={props.ignoreCase}\n            deep-state={props.deepState}\n            loading={props.loading}\n            loading-icon={props.loadingIcon}\n            loading-lock={props.loadingLock}\n            loading-effect={props.loadingEffect}\n            locale={locale.value}\n            onSelect={() => handleSelect('target')}\n            onEnter={handleToSource}\n            onSwitch={() => handlePanelFocus('source')}\n          >\n            {{\n              header: createSlotRender(['target-header', 'targetHeader', 'header']),\n              title: createSlotRender(['target-title', 'targetTitle', 'title']),\n              body: createSlotRender(['target-body', 'targetBody', 'body']),\n              footer: createSlotRender(['target-footer', 'targetFooter', 'footer']),\n              option: createSlotRender(['target-option', 'targetOption', 'option'])\n            }}\n          </TransferPanel>\n        </div>\n      )\n    }\n  }\n})\n", "import type { InjectionKey } from 'vue'\n// import type { BITree } from '@vexip-ui/utils'\n\nexport type Key = string | number | symbol\nexport type Data = any\nexport type TreeNodeDropType = 'before' | 'inner' | 'after'\nexport type TreeLinkLine = 'dashed' | 'solid' | 'dotted' | 'none'\n\nexport interface TreeNodeKeyConfig {\n  id?: string,\n  parent?: string,\n  label?: string,\n  children?: string,\n  visible?: string,\n  selected?: string,\n  expanded?: string,\n  disabled?: string,\n  checked?: string,\n  loading?: string,\n  loaded?: string,\n  loadFail?: string,\n  readonly?: string,\n  arrow?: string,\n  checkbox?: string,\n  selectDisabled?: string,\n  expandDisabled?: string,\n  checkDisabled?: string,\n  isLeaf?: string\n}\n\nexport const enum DropType {\n  BEFORE = 'before',\n  INNER = 'inner',\n  AFTER = 'after'\n}\n\nexport type TreeNodeProps<D = Data> = {\n  id: Key,\n  parent?: Key,\n  children: TreeNodeProps[],\n  visible: boolean,\n  selected: boolean,\n  expanded: boolean,\n  disabled: boolean,\n  checked: boolean,\n  loading: boolean,\n  loaded: boolean,\n  loadFail: boolean,\n  readonly: boolean,\n  arrow: boolean | 'auto',\n  checkbox: boolean,\n  selectDisabled: boolean,\n  expandDisabled: boolean,\n  checkDisabled: boolean,\n  isLeaf: boolean | 'auto',\n  data: D,\n  /** @internal */\n  partial: boolean,\n  /** @internal */\n  matched: boolean,\n  /** @internal */\n  childMatched: boolean,\n  /** @internal */\n  upperMatched: boolean,\n  /** @internal */\n  depth: number,\n  /** @internal */\n  last: boolean,\n  /** @internal */\n  upstreamLast: boolean[],\n  /** @internal */\n  lineIndexes: number[]\n}\n\nexport type TreeNodePostCreate<D = Data> = (node: TreeNodeProps<D>) => void\nexport type TreeNodeRenderFn<D = Data> = (params: { data: D, node: TreeNodeProps<D> }) => any\nexport type AsyncLoadFn<D = Data> = (\n  data: D,\n  node: Readonly<TreeNodeProps<D>>\n) => void | boolean | Promise<any>\nexport type FilterFn<D = Data> = (data: D, node: TreeNodeProps<D>) => boolean\nexport type NodePropsFn<D = Data> = (data: D, node: TreeNodeProps<D>) => Data\n\nexport interface TreeCommonSlotParams {\n  data: Data,\n  node: TreeNodeProps,\n  depth: number,\n  focused: boolean\n}\n\nexport interface TreeNodeSlotParams extends TreeCommonSlotParams {\n  /** @deprecated */\n  lineCount: number,\n  lineIndexes: number[],\n  toggleCheck: (checked?: boolean) => void,\n  toggleExpand: (expanded?: boolean) => Promise<void>,\n  toggleSelect: (able?: boolean) => Promise<void>\n}\n\nexport interface TreeNodeInstance {\n  el?: HTMLElement | null,\n  arrow?: HTMLElement | null,\n  node: TreeNodeProps\n}\n\nexport interface TreeNodeState {\n  el?: HTMLElement | null,\n  depth: number,\n  disabled: boolean,\n  readonly: boolean\n}\n\nexport interface TreeCollapseProps {\n  id: symbol,\n  placeholder: true,\n  type: 'expand' | 'reduce',\n  height: number,\n  nodes: TreeNodeProps[]\n}\n\nexport interface TreeState {\n  arrow: boolean | 'auto',\n  checkbox: boolean,\n  suffixCheckbox: boolean,\n  noCascaded: boolean,\n  linkLine: false | TreeLinkLine,\n  virtual: boolean,\n  labelKey: string,\n  draggable: boolean,\n  floorSelect: boolean,\n  renderer: TreeNodeRenderFn,\n  prefixRenderer: TreeNodeRenderFn,\n  suffixRenderer: TreeNodeRenderFn,\n  arrowIcon: Record<string, any>,\n  blockEffect: boolean,\n  dragging: boolean,\n  boundAsyncLoad: boolean,\n  nodeStates: Map<Key, TreeNodeState>,\n  expanding: boolean,\n  getParentNode(node: TreeNodeProps): TreeNodeProps | null,\n  updateVisibleNodeEls(): void,\n  computeCheckedState(originNode: TreeNodeProps, able: boolean): void,\n  handleNodeClick(node: TreeNodeProps): void,\n  handleNodeSelect(node: TreeNodeProps): void,\n  handleNodeCancel(node: TreeNodeProps): void,\n  handleNodeExpand(node: TreeNodeProps): void,\n  handleNodeReduce(node: TreeNodeProps): void,\n  handleAsyncLoad(node: TreeNodeProps): Promise<boolean>,\n  handleNodeDragStart(nodeInstance: TreeNodeInstance): void,\n  handleNodeDragOver(nodeInstance: TreeNodeInstance, event: DragEvent): void,\n  handleNodeDrop(nodeInstance: TreeNodeInstance): void,\n  handleNodeDragEnd(nodeInstance: TreeNodeInstance): void,\n  handleHittingChange(type: 'up' | 'down'): void,\n  handleNodeHitting(nodeEl?: HTMLElement | null): void,\n  handleLabelClick(node: TreeNodeProps): void\n}\n\nexport const TREE_STATE: InjectionKey<TreeState> = Symbol('TREE_STATE')\nexport const TREE_NODE_STATE: InjectionKey<TreeNodeState> = Symbol('TREE_NODE_STATE')\n\nexport const defaultKeyConfig: Required<TreeNodeKeyConfig> = {\n  id: 'id',\n  parent: 'parent',\n  label: 'label',\n  children: 'children',\n  visible: 'visible',\n  selected: 'selected',\n  expanded: 'expanded',\n  disabled: 'disabled',\n  checked: 'checked',\n  loading: 'loading',\n  loaded: 'loaded',\n  loadFail: 'loadFail',\n  readonly: 'readonly',\n  arrow: 'arrow',\n  checkbox: 'checkbox',\n  selectDisabled: 'selectDisabled',\n  expandDisabled: 'expandDisabled',\n  checkDisabled: 'checkDisabled',\n  isLeaf: 'isLeaf'\n}\n\nlet idIndex = 1\n\nexport function getIndexId() {\n  return `__vxp-tree-key-${idIndex++}`\n}\n", "<script setup lang=\"ts\">\nimport { Checkbox } from '@/components/checkbox'\nimport { Icon } from '@/components/icon'\nimport { Renderer } from '@/components/renderer'\n\nimport { computed, inject, nextTick, onBeforeUnmount, reactive, ref, watch } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport { useModifier, useRtl } from '@vexip-ui/hooks'\nimport { decide, isNull } from '@vexip-ui/utils'\nimport { TREE_STATE } from './symbol'\n\nimport type { PropType } from 'vue'\nimport type { TreeNodeProps } from './symbol'\n\ndefineOptions({ name: 'TreeNode', inheritAttrs: false })\n\nconst props = defineProps({\n  node: {\n    type: Object as PropType<TreeNodeProps>,\n    default: () => ({})\n  }\n})\n\nconst treeState = inject(TREE_STATE)!\n\nconst nh = useNameHelper('tree')\nconst icons = useIcons()\n\nconst { isRtl } = useRtl()\n\nconst wrapper = ref<HTMLElement>()\nconst arrowEl = ref<HTMLElement>()\n\nconst parentState = computed(() => {\n  return props.node.parent ? treeState.nodeStates.get(props.node.parent) : undefined\n})\n\nuseModifier({\n  target: wrapper,\n  passive: false,\n  onKeyDown: (event, modifier) => {\n    if (treeState.expanding) return\n\n    decide(\n      [\n        [\n          () => modifier.up || modifier.down,\n          () => treeState.handleHittingChange(modifier.up ? 'up' : 'down')\n        ],\n        [\n          () => modifier.left || modifier.right,\n          () => {\n            const hasChild = props.node.children?.length > 0\n\n            if (modifier.right && props.node.expanded && hasChild) {\n              treeState.handleHittingChange('down')\n            } else if (modifier.left && (!props.node.expanded || !hasChild)) {\n              treeState.handleNodeHitting(parentState.value?.el)\n            } else {\n              toggleExpanded(modifier.right)\n            }\n          }\n        ],\n        [() => hasCheckbox.value && modifier.space, handleToggleCheck],\n        [() => modifier.enter, handleToggleSelect]\n      ],\n      {\n        beforeMatchAny: () => {\n          event.preventDefault()\n          event.stopPropagation()\n        },\n        afterMatchAny: modifier.resetAll\n      }\n    )\n  }\n})\n\nconst loaded = ref(!treeState.boundAsyncLoad || props.node.loaded)\nconst loadFail = ref(treeState.boundAsyncLoad && props.node.loadFail)\nconst dragging = ref(false)\nconst isDragOver = ref(false)\nconst focused = ref(false)\n\nconst isDisabled = computed(() => {\n  return (!treeState.noCascaded && parentState.value?.disabled) || props.node.disabled\n})\nconst isReadonly = computed(() => {\n  return (!treeState.noCascaded && parentState.value?.readonly) || props.node.readonly\n})\n// const depth = computed(() => parentState.depth + 1)\nconst secondary = computed(\n  () => !props.node.matched && (props.node.childMatched || props.node.upperMatched)\n)\nconst hasLinkLine = computed(() => !!treeState.linkLine && props.node.depth > 0)\nconst className = computed(() => {\n  return {\n    [nh.be('node')]: true,\n    [nh.bem('node', 'last')]: props.node.last,\n    [nh.bem('node', 'focused')]: focused.value,\n    [nh.bem('node', 'selected')]: props.node.selected,\n    [nh.bem('node', 'expanded')]: props.node.expanded,\n    [nh.bem('node', 'disabled')]: isDisabled.value,\n    [nh.bem('node', 'readonly')]: isReadonly.value,\n    [nh.bem('node', 'secondary')]: secondary.value,\n    [nh.bem('node', 'dragging')]: dragging.value,\n    [nh.bem('node', 'drag-over')]: isDragOver.value,\n    [nh.bem('node', 'link-line')]: hasLinkLine.value,\n    [nh.bem('node', 'no-arrow')]: !hasArrow.value,\n    [nh.bem('node', 'is-floor')]: treeState.floorSelect && props.node.children?.length,\n    [nh.bem('node', 'loaded')]: loaded.value,\n    [nh.bem('node', 'load-fail')]: loadFail.value\n  }\n})\nconst isLeaf = computed(() => {\n  const isLeaf = props.node.isLeaf\n\n  let leafSign: boolean | 'auto' = 'auto'\n  let asyncLoad = false\n\n  if (isNull(isLeaf) || isLeaf === 'auto') {\n    leafSign = 'auto'\n    asyncLoad = treeState.boundAsyncLoad\n  } else {\n    leafSign = isLeaf\n  }\n\n  return leafSign === 'auto'\n    ? !(props.node.children?.length || (asyncLoad && !loaded.value))\n    : !!leafSign\n})\nconst hasArrow = computed(() => {\n  return isNull(props.node.arrow) || props.node.arrow === 'auto'\n    ? treeState.arrow === 'auto'\n      ? !isLeaf.value\n      : treeState.arrow\n    : props.node.arrow\n})\nconst hasCheckbox = computed(() => {\n  const checkbox = props.node.checkbox\n\n  return isNull(checkbox) ? treeState.checkbox : checkbox\n})\n// const renderer = computed(() => treeState.renderer)\nconst suffixCheckbox = computed(() => treeState.suffixCheckbox)\nconst nodeState = reactive({\n  el: wrapper,\n  depth: computed(() => props.node.depth),\n  disabled: isDisabled,\n  readonly: isReadonly\n})\n\nwatch([() => treeState.boundAsyncLoad, () => props.node.loaded], values => {\n  loaded.value = !values[0] || values[1]\n})\nwatch([() => treeState.boundAsyncLoad, () => props.node.loadFail], values => {\n  loadFail.value = !values[0] || values[1]\n})\nwatch(\n  () => props.node.id,\n  (value, prev) => {\n    treeState.nodeStates.delete(prev)\n    treeState.nodeStates.set(value, nodeState)\n  }\n)\n\ntreeState.nodeStates.set(props.node.id, nodeState)\n\nlet dragTimer: ReturnType<typeof setTimeout>\n\nonBeforeUnmount(() => {\n  clearTimeout(dragTimer)\n  treeState.nodeStates.set(props.node.id, nodeState)\n})\n\n// function updateVisible() {\n//   treeState.updateVisibleNodeEls()\n// }\n\nfunction setValue<T = unknown>(key: keyof TreeNodeProps, value: T) {\n  ;(props.node as any)[key] = value\n}\n\nfunction handleClick() {\n  treeState.handleNodeClick(props.node)\n\n  if (treeState.blockEffect) {\n    handleLabelClick()\n  }\n}\n\nfunction handleToggleCheck(able = !props.node.checked) {\n  if (isDisabled.value || props.node.checkDisabled) return\n\n  setValue('checked', able)\n  setValue('partial', false)\n\n  nextTick(() => {\n    treeState.computeCheckedState(props.node, able)\n  })\n}\n\nasync function toggleExpanded(able = !props.node.expanded) {\n  if (\n    treeState.expanding ||\n    props.node.loading ||\n    isDisabled.value ||\n    props.node.expandDisabled ||\n    isLeaf.value\n  ) {\n    return\n  }\n\n  if (able && treeState.boundAsyncLoad && !loaded.value) {\n    setValue('loading', true)\n\n    const result = await treeState.handleAsyncLoad(props.node)\n\n    asyncLoadCallback(result)\n  } else {\n    setValue('expanded', able)\n\n    if (able) {\n      treeState.handleNodeExpand(props.node)\n    } else {\n      treeState.handleNodeReduce(props.node)\n    }\n  }\n}\n\nfunction handleToggleSelect(able = !props.node.selected) {\n  if (isDisabled.value || props.node.selectDisabled) return\n\n  if (treeState.floorSelect) {\n    return toggleExpanded()\n  }\n\n  setValue('selected', !isReadonly.value && able)\n\n  if (isReadonly.value || able) {\n    treeState.handleNodeSelect(props.node)\n  } else {\n    treeState.handleNodeCancel(props.node)\n  }\n}\n\nfunction handleLabelClick() {\n  treeState.handleLabelClick(props.node)\n  handleToggleSelect()\n}\n\nfunction asyncLoadCallback(success = true) {\n  setValue('loading', false)\n  setValue('expanded', success !== false)\n\n  if (success) {\n    setValue('loaded', true)\n    setValue('loadFail', false)\n    treeState.handleNodeExpand(props.node)\n  } else {\n    setValue('loadFail', true)\n  }\n}\n\nfunction getNodeState() {\n  return {\n    el: wrapper.value,\n    arrow: arrowEl.value,\n    node: props.node\n  }\n}\n\nfunction handleDragStart() {\n  if (!treeState.draggable) return\n\n  dragging.value = true\n  treeState.handleNodeDragStart(getNodeState())\n}\n\nfunction handleDragOver(event: DragEvent) {\n  if (!treeState.draggable || !treeState.dragging) return\n\n  clearTimeout(dragTimer)\n  event.stopPropagation()\n  event.preventDefault()\n\n  isDragOver.value = true\n\n  treeState.handleNodeDragOver(getNodeState(), event)\n}\n\nfunction handleDragLeave(event: DragEvent) {\n  if (!treeState.draggable) return\n\n  clearTimeout(dragTimer)\n  event.preventDefault()\n\n  dragTimer = setTimeout(() => {\n    isDragOver.value = false\n  }, 100)\n}\n\nfunction handleDrop(event: DragEvent) {\n  if (!treeState.draggable || !treeState.dragging) return\n\n  clearTimeout(dragTimer)\n  event.stopPropagation()\n  event.preventDefault()\n\n  isDragOver.value = false\n\n  treeState.handleNodeDrop(getNodeState())\n}\n\nfunction handleDragEnd(event: DragEvent) {\n  if (!treeState.draggable || !treeState.dragging) return\n\n  event.stopPropagation()\n  dragging.value = false\n  treeState.handleNodeDragEnd(getNodeState())\n}\n</script>\n\n<template>\n  <li\n    v-bind=\"$attrs\"\n    ref=\"wrapper\"\n    :class=\"className\"\n    :draggable=\"treeState.draggable\"\n    tabindex=\"-1\"\n    :aria-disabled=\"isDisabled\"\n    :aria-grabbed=\"treeState.draggable && dragging ? 'true' : undefined\"\n    :style=\"{ [nh.cv('depth')]: node.depth }\"\n    @click.left=\"handleClick\"\n    @focus=\"focused = true\"\n    @blur=\"focused = false\"\n    @dragstart.stop=\"handleDragStart\"\n    @dragover=\"handleDragOver\"\n    @dragleave=\"handleDragLeave\"\n    @dragend=\"handleDragEnd\"\n    @drop=\"handleDrop\"\n  >\n    <slot\n      :data=\"node.data\"\n      :node=\"node\"\n      :depth=\"node.depth\"\n      :focused=\"focused\"\n      :line-count=\"0\"\n      :line-indexes=\"node.lineIndexes\"\n      :toggle-check=\"handleToggleCheck\"\n      :toggle-expand=\"toggleExpanded\"\n      :toggle-select=\"handleToggleSelect\"\n    >\n      <template v-if=\"hasLinkLine\">\n        <div\n          v-for=\"(lineIndex, index) in node.lineIndexes\"\n          :key=\"index\"\n          :class=\"[\n            nh.be('link-line'),\n            nh.bem('link-line', 'vertical'),\n            !index && nh.bem('link-line', 'first')\n          ]\"\n          :style=\"{ [nh.cv('link-line-index')]: lineIndex }\"\n          aria-hidden=\"true\"\n        ></div>\n\n        <div\n          :class=\"[nh.be('link-line'), nh.bem('link-line', 'horizontal')]\"\n          aria-hidden=\"true\"\n        ></div>\n      </template>\n      <div\n        :class=\"{\n          [nh.be('content')]: true,\n          [nh.bem('content', 'effect')]: treeState.blockEffect,\n          [nh.bem('content', 'disabled')]:\n            treeState.blockEffect && (isDisabled || node.selectDisabled)\n        }\"\n      >\n        <span\n          ref=\"arrowEl\"\n          :class=\"{\n            [nh.be('arrow')]: true,\n            [nh.bem('arrow', 'transparent')]: !node.loading && !hasArrow,\n            [nh.bem('arrow', 'expanded')]: node.expanded,\n            [nh.bem('arrow', 'disabled')]: isDisabled || node.expandDisabled\n          }\"\n          :aria-hidden=\"!node.loading && !hasArrow\"\n          @click.stop=\"toggleExpanded()\"\n        >\n          <Icon v-if=\"node.loading\" v-bind=\"icons.loading\" label=\"loading\"></Icon>\n          <slot\n            v-else\n            name=\"arrow\"\n            :data=\"node.data\"\n            :node=\"node\"\n            :depth=\"node.depth\"\n            :focused=\"focused\"\n          >\n            <Icon v-if=\"treeState.arrowIcon\" :icon=\"treeState.arrowIcon\"></Icon>\n            <Icon v-else v-bind=\"isRtl ? icons.angleLeft : icons.angleRight\"></Icon>\n          </slot>\n        </span>\n        <Checkbox\n          v-if=\"hasCheckbox && !suffixCheckbox\"\n          inherit\n          :class=\"nh.be('checkbox')\"\n          :tab-index=\"-1\"\n          :control=\"hasArrow\"\n          :checked=\"node.checked\"\n          :disabled=\"isDisabled || node.checkDisabled\"\n          :partial=\"node.partial\"\n          @click.prevent.stop=\"handleToggleCheck()\"\n        ></Checkbox>\n        <div\n          :class=\"{\n            [nh.be('label')]: true,\n            [nh.bem('label', 'effect')]: !treeState.blockEffect,\n            [nh.bem('label', 'disabled')]:\n              !treeState.blockEffect && (isDisabled || node.selectDisabled)\n          }\"\n          @click=\"!treeState.blockEffect && handleLabelClick()\"\n        >\n          <div v-if=\"treeState.prefixRenderer || $slots.prefix\" :class=\"nh.be('prefix')\">\n            <Renderer\n              v-if=\"treeState.prefixRenderer\"\n              :renderer=\"treeState.prefixRenderer\"\n              :data=\"{ node, depth: node.depth, data: node.data, focused }\"\n            ></Renderer>\n            <slot\n              v-else\n              name=\"prefix\"\n              :data=\"node.data\"\n              :node=\"node\"\n              :depth=\"node.depth\"\n              :focused=\"focused\"\n            ></slot>\n          </div>\n          <div :class=\"nh.be('text')\">\n            <Renderer\n              v-if=\"treeState.renderer\"\n              :renderer=\"treeState.renderer\"\n              :data=\"{ node, depth: node.depth, data: node.data, focused }\"\n            ></Renderer>\n            <slot\n              v-else\n              name=\"label\"\n              :data=\"node.data\"\n              :node=\"node\"\n              :depth=\"node.depth\"\n              :focused=\"focused\"\n            >\n              {{ node.data[treeState.labelKey] }}\n            </slot>\n          </div>\n          <div v-if=\"treeState.suffixRenderer || $slots.suffix\" :class=\"nh.be('suffix')\">\n            <Renderer\n              v-if=\"treeState.suffixRenderer\"\n              :renderer=\"treeState.suffixRenderer\"\n              :data=\"{ node, depth: node.depth, data: node.data, focused }\"\n            ></Renderer>\n            <slot\n              v-else\n              name=\"suffix\"\n              :data=\"node.data\"\n              :node=\"node\"\n              :depth=\"node.depth\"\n              :focused=\"focused\"\n            ></slot>\n          </div>\n        </div>\n        <Checkbox\n          v-if=\"hasCheckbox && suffixCheckbox\"\n          inherit\n          :class=\"[nh.be('checkbox'), nh.bem('checkbox', 'suffix')]\"\n          :tab-index=\"-1\"\n          :control=\"hasArrow\"\n          :checked=\"node.checked\"\n          :disabled=\"isDisabled || node.checkDisabled\"\n          :partial=\"node.partial\"\n          @click.prevent.stop=\"handleToggleCheck()\"\n        ></Checkbox>\n      </div>\n    </slot>\n  </li>\n</template>\n", "import { booleanProp, buildProps, eventProp, iconProp, localeProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type {\n  AsyncLoadFn,\n  Data,\n  FilterFn,\n  NodePropsFn,\n  TreeLinkLine,\n  TreeNodeDropType,\n  TreeNodeKeyConfig,\n  TreeNodePostCreate,\n  TreeNodeProps,\n  TreeNodeRenderFn\n} from './symbol'\n\nexport const treeProps = buildProps({\n  locale: localeProp('tree'),\n  arrow: {\n    type: [Boolean, String] as PropType<boolean | 'auto'>,\n    default: null\n  },\n  data: Array as PropType<Data[]>,\n  noBuildTree: booleanProp,\n  emptyText: String,\n  disabled: booleanProp,\n  readonly: booleanProp,\n  checkbox: booleanProp,\n  suffixCheckbox: booleanProp,\n  renderer: Function as PropType<TreeNodeRenderFn>,\n  prefixRenderer: Function as PropType<TreeNodeRenderFn>,\n  suffixRenderer: Function as PropType<TreeNodeRenderFn>,\n  multiple: booleanProp,\n  indent: [String, Number],\n  accordion: booleanProp,\n  draggable: booleanProp,\n  appear: booleanProp,\n  floorSelect: booleanProp,\n  onAsyncLoad: Function as PropType<AsyncLoadFn>,\n  cacheNode: booleanProp,\n  rootId: [String, Number],\n  keyConfig: Object as PropType<TreeNodeKeyConfig>,\n  noCascaded: booleanProp,\n  filter: [String, Function] as PropType<string | FilterFn>,\n  ignoreCase: booleanProp,\n  nodeProps: [Object, Function] as PropType<Data | NodePropsFn>,\n  linkLine: {\n    type: [Boolean, String] as PropType<boolean | TreeLinkLine>,\n    default: null\n  },\n  postCreate: Function as PropType<TreeNodePostCreate>,\n  virtual: booleanProp,\n  nodeMinHeight: Number,\n  useYBar: booleanProp,\n  noTransition: booleanProp,\n  arrowIcon: iconProp,\n  blockEffect: booleanProp,\n  filterLeaf: booleanProp,\n  onNodeChange: eventProp<(data: Data, node: TreeNodeProps, checked: boolean) => void>(),\n  onNodeClick: eventProp<(data: Data, node: TreeNodeProps) => void>(),\n  onNodeSelect: eventProp<(data: Data | Data[], node: TreeNodeProps | TreeNodeProps[]) => void>(),\n  onNodeCancel: eventProp<(data: Data, node: TreeNodeProps) => void>(),\n  onNodeExpand: eventProp<(data: Data, node: TreeNodeProps) => void>(),\n  onNodeReduce: eventProp<(data: Data, node: TreeNodeProps) => void>(),\n  onDragStart: eventProp<(data: Data, node: TreeNodeProps) => void>(),\n  onDragOver: eventProp<(data: Data, node: TreeNodeProps) => void>(),\n  onDrop: eventProp<(data: Data, node: TreeNodeProps, type: TreeNodeDropType) => void>(),\n  onDragEnd: eventProp<(data: Data, node: TreeNodeProps) => void>(),\n  onLabelClick: eventProp<(data: Data, node: TreeNodeProps) => void>()\n})\n\nexport type TreeProps = ExtractPropTypes<typeof treeProps>\nexport type TreeCProps = ConfigurableProps<TreeProps, 'data', 'onAsyncLoad'>\n", "<script setup lang=\"ts\">\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { VirtualList } from '@/components/virtual-list'\n\nimport {\n  computed,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  toRef,\n  watch,\n  watchEffect\n} from 'vue'\n\nimport TreeNode from './tree-node.vue'\nimport { createIconProp, emitEvent, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { useMounted, useSetTimeout } from '@vexip-ui/hooks'\nimport {\n  debounce,\n  filterTree,\n  flatTree,\n  getLast,\n  isNull,\n  isPromise,\n  mapTree,\n  queryAll,\n  removeArrayItem,\n  transformTree,\n  walkTree\n} from '@vexip-ui/utils'\nimport { treeProps } from './props'\nimport { useCascadedChecked } from './hooks'\nimport { DropType, TREE_NODE_STATE, TREE_STATE, defaultKeyConfig, getIndexId } from './symbol'\n\nimport type { VirtualListExposed } from '@/components/virtual-list'\nimport type {\n  Data,\n  FilterFn,\n  Key,\n  TreeCollapseProps,\n  TreeNodeInstance,\n  TreeNodeProps,\n  TreeNodeState\n} from './symbol'\n\ndefineOptions({ name: 'Tree' })\n\nconst _props = defineProps(treeProps)\nconst props = useProps('tree', _props, {\n  arrow: {\n    default: 'auto',\n    validator: value => typeof value === 'boolean' || value === 'auto'\n  },\n  data: {\n    default: () => [],\n    static: true\n  },\n  noBuildTree: false,\n  emptyText: null,\n  disabled: false,\n  readonly: false,\n  checkbox: false,\n  suffixCheckbox: false,\n  renderer: {\n    default: null,\n    isFunc: true\n  },\n  prefixRenderer: {\n    default: null,\n    isFunc: true\n  },\n  suffixRenderer: {\n    default: null,\n    isFunc: true\n  },\n  multiple: false,\n  indent: '16px',\n  accordion: false,\n  draggable: false,\n  appear: false,\n  floorSelect: false,\n  onAsyncLoad: {\n    default: null,\n    isFunc: true\n  },\n  cacheNode: false,\n  rootId: null,\n  keyConfig: () => ({}),\n  noCascaded: false,\n  filter: '',\n  ignoreCase: false,\n  nodeProps: null,\n  linkLine: false,\n  postCreate: {\n    default: null,\n    isFunc: true\n  },\n  virtual: false,\n  nodeMinHeight: {\n    default: 26,\n    validator: value => value > 0\n  },\n  useYBar: false,\n  noTransition: false,\n  arrowIcon: createIconProp(),\n  blockEffect: false,\n  filterLeaf: false\n})\n\nconst nh = useNameHelper('tree')\nconst locale = useLocale('tree', toRef(props, 'locale'))\n\nconst nodeMap = new Map<Key, TreeNodeProps>()\nconst nodeDataMap = new Map<Data, TreeNodeProps>()\nconst treeNodes = ref<TreeNodeProps[]>([])\nconst flattedNodes = ref<TreeNodeProps[]>([])\nconst dragging = ref(false)\nconst indicatorShow = ref(false)\nconst keyConfig = reactive({ ...defaultKeyConfig })\nconst nodeStates = reactive(new Map<Key, TreeNodeState>())\nconst expanding = ref(false)\nconst expandingNodes = ref<TreeNodeProps[]>([])\nconst expandedNodeIds = ref(new Set<Key>())\n\nconst { timer } = useSetTimeout()\nconst { isMounted } = useMounted()\n\nconst virtualList = ref<VirtualListExposed>()\nconst trap = ref<HTMLElement>()\nconst indicator = ref<HTMLElement>()\n\nconst wrapper = computed(() => virtualList.value?.wrapper)\n\nlet visibleNodeEls: HTMLElement[] = []\n\nconst defaultNodeProperties = {\n  visible: true,\n  selected: false,\n  expanded: false,\n  disabled: false,\n  checked: false,\n  loading: false,\n  loaded: false,\n  loadFail: false,\n  readonly: false,\n  arrow: 'auto' as boolean | 'auto',\n  // will follow checkbox prop of tree when not set (be null)\n  checkbox: null! as boolean,\n  selectDisabled: false,\n  expandDisabled: false,\n  checkDisabled: false,\n  isLeaf: 'auto' as boolean | 'auto'\n}\n\nconst boundAsyncLoad = computed(() => typeof props.onAsyncLoad === 'function')\nconst linkLine = computed(() => {\n  return props.linkLine === true ? 'dashed' : props.linkLine === 'none' ? false : props.linkLine\n})\nconst style = computed(() => {\n  return {\n    [nh.cv('indent-width')]: typeof props.indent === 'number' ? `${props.indent}px` : props.indent,\n    [nh.cv('link-line-type')]: linkLine.value || undefined\n  }\n})\nconst visibleNodes = computed(() => flatNodes(treeNodes.value))\nconst renderedNodes = computed(() => {\n  return expanding.value ? expandingNodes.value : visibleNodes.value\n})\nconst toNodeProps = computed(() => {\n  return typeof props.nodeProps === 'function' ? props.nodeProps : () => props.nodeProps\n})\n\nfunction createDefaultFilter(value: string) {\n  const pattern = props.ignoreCase ? String(value).toLocaleLowerCase() : value\n  const defaultFilter: FilterFn = data => {\n    const label = data[keyConfig.label]\n\n    return props.ignoreCase\n      ? String(label).toLocaleLowerCase().includes(pattern)\n      : String(label).includes(pattern)\n  }\n\n  return defaultFilter\n}\n\nconst updateVisibleNodeEls = debounce(() => {\n  if (wrapper.value) {\n    visibleNodeEls = queryAll(`.${nh.be('node')}`, wrapper.value)\n  }\n}, 300)\n\nlet disableExpand = false\n\nfunction disableExpandTick() {\n  disableExpand = true\n\n  nextTick(() => {\n    disableExpand = false\n  })\n}\nwatchEffect(() => {\n  const nodes = flattedNodes.value\n\n  disableExpandTick()\n\n  if (!props.filter) {\n    for (let i = 0, len = nodes.length; i < len; ++i) {\n      const node = nodes[i]\n\n      node.matched = true\n      node.childMatched = false\n      node.upperMatched = false\n    }\n  } else {\n    const filter =\n      typeof props.filter === 'function' ? props.filter : createDefaultFilter(props.filter)\n    const leafOnly = props.filterLeaf\n\n    for (let i = 0, len = nodes.length; i < len; ++i) {\n      const node = nodes[i]\n\n      if (leafOnly && !isLeafNode(node)) {\n        node.matched = false\n        node.childMatched = false\n        node.upperMatched = false\n\n        continue\n      }\n\n      const parent = node.parent ? nodeMap.get(node.parent) : undefined\n\n      node.matched = filter(node.data, node)\n      node.childMatched = false\n      node.upperMatched = !!parent && (parent.matched || parent.upperMatched)\n\n      if (node.matched) {\n        let upper = parent\n\n        while (upper && !upper.childMatched) {\n          upper.childMatched = true\n          upper.expanded = true\n          upper = upper.parent ? nodeMap.get(upper.parent) : undefined\n        }\n      }\n    }\n  }\n\n  resetExpanded()\n})\nwatchEffect(() => Object.assign(keyConfig, props.keyConfig))\nwatchEffect(() => {\n  const oldIds = expandedNodeIds.value\n  const ids = new Set<Key>()\n\n  let changed = false\n\n  for (const node of flattedNodes.value) {\n    if (node.expanded) {\n      ids.add(node.id)\n\n      if (!changed && !oldIds.has(node.id)) {\n        changed = true\n      }\n    }\n  }\n\n  if (changed || ids.size !== oldIds.size) {\n    expandedNodeIds.value = ids\n  }\n})\nwatch(\n  [\n    () => props.data,\n    () => props.data.length,\n    () => keyConfig.id,\n    () => keyConfig.children,\n    () => keyConfig.parent,\n    () => props.rootId\n  ],\n  parseAndTransformData,\n  { immediate: true }\n)\nwatch(\n  [treeNodes, () => props.rootId],\n  () => {\n    flattedNodes.value = flatTree(treeNodes.value, {\n      keyField: 'id',\n      parentField: 'parent',\n      childField: 'children',\n      rootId: props.rootId,\n      injectId: false,\n      depthFirst: true\n    })\n  },\n  { immediate: true }\n)\nwatch(expandedNodeIds, (value, prev) => {\n  if (props.noTransition) {\n    updateVisibleNodeEls()\n  }\n\n  if (props.noTransition || disableExpand || !wrapper.value) return\n\n  let addedId: Key | undefined\n  let removedId: Key | undefined\n\n  for (const id of value) {\n    if (!prev.has(id)) {\n      if (addedId != null) return\n\n      addedId = id\n    }\n  }\n\n  for (const id of prev) {\n    if (!value.has(id)) {\n      if (removedId != null) return\n\n      removedId = id\n    }\n  }\n\n  if (addedId == null && removedId == null) return\n\n  clearTimeout(timer.expand)\n\n  transferring.value = false\n  expanding.value = true\n\n  let baseExpandedIds: Set<Key> | undefined\n\n  if (addedId != null) {\n    baseExpandedIds = prev\n  }\n\n  if (removedId != null) {\n    if (!baseExpandedIds) {\n      baseExpandedIds = value\n    } else {\n      baseExpandedIds = new Set(baseExpandedIds)\n      baseExpandedIds.delete(removedId)\n    }\n  }\n\n  const baseNodes = flatNodes(treeNodes.value, baseExpandedIds!)\n\n  const virtual = props.virtual\n  const viewHeight = wrapper.value.offsetHeight\n  const nodeHeight = props.nodeMinHeight || 1\n  const viewCount = Math.ceil(viewHeight / nodeHeight) + 1\n\n  const loop = [\n    addedId != null && { id: addedId, type: 'expand' },\n    removedId != null && { id: removedId, type: 'reduce' }\n  ]\n\n  for (const meta of loop) {\n    if (!meta) continue\n\n    const { id, type } = meta\n    const index = baseNodes.findIndex(node => node.id === id)\n\n    if (~index) {\n      const children = baseNodes[index].children\n\n      if (children?.length) {\n        const addedNodes = flatNodes(children, value)\n\n        baseNodes.splice(index + 1, 0, {\n          id: Symbol(''),\n          collapse: true,\n          type,\n          height: virtual ? addedNodes.length * nodeHeight : undefined,\n          nodes: virtual ? addedNodes.slice(0, viewCount) : addedNodes\n        } as any)\n      }\n    }\n  }\n\n  expandingNodes.value = baseNodes\n})\n\nprovide(\n  TREE_STATE,\n  reactive({\n    arrow: toRef(props, 'arrow'),\n    checkbox: toRef(props, 'checkbox'),\n    suffixCheckbox: toRef(props, 'suffixCheckbox'),\n    noCascaded: toRef(props, 'noCascaded'),\n    linkLine,\n    virtual: toRef(props, 'virtual'),\n    labelKey: toRef(keyConfig, 'label'),\n    draggable: toRef(props, 'draggable'),\n    floorSelect: toRef(props, 'floorSelect'),\n    renderer: toRef(props, 'renderer'),\n    prefixRenderer: toRef(props, 'prefixRenderer'),\n    suffixRenderer: toRef(props, 'suffixRenderer'),\n    arrowIcon: toRef(props, 'arrowIcon'),\n    blockEffect: toRef(props, 'blockEffect'),\n    dragging,\n    boundAsyncLoad,\n    nodeStates,\n    expanding,\n    getParentNode,\n    updateVisibleNodeEls,\n    computeCheckedState,\n    handleNodeClick,\n    handleNodeSelect,\n    handleNodeCancel,\n    handleNodeExpand,\n    handleNodeReduce,\n    handleAsyncLoad,\n    handleNodeDragStart,\n    handleNodeDragOver,\n    handleNodeDrop,\n    handleNodeDragEnd,\n    handleHittingChange,\n    handleNodeHitting,\n    handleLabelClick\n  })\n)\nprovide(\n  TREE_NODE_STATE,\n  reactive({\n    depth: -1,\n    disabled: toRef(props, 'disabled'),\n    readonly: toRef(props, 'readonly')\n  })\n)\n\ndefineExpose({\n  treeNodes,\n  flattedNodes,\n  dragging,\n  expanding,\n\n  virtualList,\n  trap,\n  indicator,\n\n  refreshScroll,\n  isLeafNode,\n  parseAndTransformData,\n  forceUpdateData,\n  syncNodeStateIntoData,\n  getCheckedNodes,\n  getCheckedNodeData,\n  getSelectedNodes,\n  getSelectedNodeData,\n  getExpandedNodes,\n  getDisabledNodes,\n  getParentNode,\n  getNodeChildren,\n  getSiblingNodes,\n  getPrevSiblingNode,\n  getNextSiblingNode,\n  getNodeByData,\n  expandNodeByData,\n  selectNodeByData,\n  checkNodeByData,\n  toggleNodeLoadingByData,\n  toggleAllExpanded,\n  getTreeData,\n  getFlattedData,\n  updateVisibleNodeEls\n})\n\nonMounted(updateVisibleNodeEls)\n\nconst { updateCheckedUpward, updateCheckedDown } = useCascadedChecked({\n  getNode: key => nodeMap.get(key),\n  disableNode: node => node.disabled\n})\n\nfunction isLeafNode(node: TreeNodeProps) {\n  const isLeaf = node.isLeaf\n\n  let leafSign: boolean | 'auto' = 'auto'\n  let asyncLoad = false\n\n  if (isNull(isLeaf) || isLeaf === 'auto') {\n    leafSign = 'auto'\n    asyncLoad = boundAsyncLoad.value\n  } else {\n    leafSign = isLeaf\n  }\n\n  return leafSign === 'auto' ? !(node.children?.length || (asyncLoad && !node.loaded)) : !!leafSign\n}\n\nfunction flatNodes(nodes: TreeNodeProps[], expandedIds?: Set<Key>) {\n  const rootNodes = new Set(nodes)\n\n  return flatTree(nodes, {\n    keyField: 'id',\n    parentField: 'parent',\n    childField: 'children',\n    injectId: false,\n    depthFirst: true,\n    cascaded: true,\n    filter: node => {\n      if (rootNodes.has(node)) {\n        return node.matched || node.childMatched || node.upperMatched\n      }\n\n      const parentNode = getParentNode(node)\n\n      return (\n        node.visible &&\n        (node.matched || node.childMatched || node.upperMatched) &&\n        (!parentNode || (expandedIds ? expandedIds.has(parentNode.id) : parentNode.expanded))\n      )\n    }\n  })\n}\n\nfunction isCollapse(node: any): node is TreeCollapseProps {\n  return node.collapse\n}\n\nfunction refreshNodesDepth() {\n  walkTree(treeNodes.value, (node, depth) => {\n    node.depth = depth\n    node.lineIndexes = [0]\n\n    if (node.parent && nodeMap.has(node.parent)) {\n      const parent = nodeMap.get(node.parent)!\n\n      node.last = getLast(parent.children) === node\n      node.upstreamLast = [parent.last, ...parent.upstreamLast]\n    } else {\n      node.last = getLast(treeNodes.value) === node\n      node.upstreamLast = []\n    }\n\n    for (let i = 1; i < depth; ++i) {\n      if (!node.upstreamLast[i - 1]) {\n        node.lineIndexes.push(i)\n      }\n    }\n  })\n}\n\nfunction buildTreeNodes(nodes: TreeNodeProps[]) {\n  treeNodes.value = transformTree(nodes, {\n    keyField: 'id',\n    parentField: 'parent',\n    childField: 'children',\n    rootId: props.rootId\n  })\n\n  refreshNodesDepth()\n}\n\nfunction parseAndTransformData() {\n  const idKey = keyConfig.id\n  const oldDataMap = new Map<Data, TreeNodeProps>()\n  const oldIdMap = new Map<any, TreeNodeProps>()\n\n  for (const node of nodeMap.values()) {\n    oldDataMap.set(node.data, node)\n    oldIdMap.set(node.data[idKey], node)\n  }\n\n  nodeMap.clear()\n  nodeDataMap.clear()\n\n  const nodes: TreeNodeProps[] = []\n\n  if (props.noBuildTree) {\n    walkTree(\n      props.data,\n      (item, _, parent) => {\n        const oldNode = oldDataMap.get(item)\n        const id = oldNode?.id ?? getIndexId()\n        const node = props.cacheNode\n          ? oldNode ?? createNodeItem(item)\n          : createNodeItem(item, oldNode)\n\n        node.id = id\n        node.parent = parent ? nodeDataMap.get(parent)?.id : undefined\n\n        nodeMap.set(node.id, node)\n        nodes.push(node)\n        nodeDataMap.set(item, node)\n      },\n      { childField: keyConfig.children, depthFirst: true }\n    )\n  } else {\n    const data = props.data\n\n    for (let i = 0, len = data.length; i < len; ++i) {\n      const item = data[i]\n      const oldNode = oldDataMap.get(item) ?? oldIdMap.get(item[idKey])\n      const node = props.cacheNode ? oldNode ?? createNodeItem(item) : createNodeItem(item, oldNode)\n\n      nodeMap.set(node.id, node)\n      nodes.push(node)\n      nodeDataMap.set(item, node)\n    }\n  }\n\n  buildTreeNodes(nodes)\n\n  if (!props.noCascaded) {\n    const checkedNodes = flattedNodes.value.filter(item => item.checked)\n\n    for (let i = 0, len = checkedNodes.length; i < len; ++i) {\n      const item = checkedNodes[i]\n      const parentKey = item.parent\n\n      updateCheckedDown(item.id)\n\n      if (parentKey && nodeMap.has(parentKey)) {\n        const parent = nodeMap.get(parentKey)!\n\n        if (!parent.checked) {\n          updateCheckedUpward(item.id)\n        }\n      }\n    }\n  }\n\n  resetExpanded()\n}\n\nfunction forceUpdateData() {\n  const nodes: TreeNodeProps[] = []\n\n  const {\n    id: idKey,\n    visible: visibleKey,\n    selected: selectedKey,\n    expanded: expandedKey,\n    disabled: disabledKey,\n    checked: checkedKey,\n    loading: loadingKey,\n    loaded: loadedKey,\n    loadFail: loadFailKey,\n    readonly: readonlyKey,\n    arrow: arrowKey,\n    checkbox: checkboxKey,\n    selectDisabled: selectDisabledKey,\n    expandDisabled: expandDisabledKey,\n    checkDisabled: checkDisabledKey,\n    isLeaf: isLeafKey\n  } = keyConfig\n\n  const refresh = (node: TreeNodeProps, item: Data) => {\n    const {\n      [visibleKey]: visible = node.visible,\n      [selectedKey]: selected = node.selected,\n      [expandedKey]: expanded = node.expanded,\n      [disabledKey]: disabled = node.disabled,\n      [checkedKey]: checked = node.checked,\n      [loadingKey]: loading = node.loading,\n      [loadedKey]: loaded = node.loaded,\n      [loadFailKey]: loadFail = node.loadFail,\n      [readonlyKey]: readonly = node.readonly,\n      [arrowKey]: arrow = node.arrow,\n      [checkboxKey]: checkbox = node.checkbox,\n      [selectDisabledKey]: selectDisabled = node.selectDisabled,\n      [expandDisabledKey]: expandDisabled = node.expandDisabled,\n      [checkDisabledKey]: checkDisabled = node.checkDisabled,\n      [isLeafKey]: isLeaf = node.isLeaf\n    } = item\n\n    node.visible = visible\n    node.selected = selected\n    node.expanded = expanded\n    node.disabled = disabled\n    node.checked = checked\n    node.loading = loading\n    node.loaded = loaded\n    node.loadFail = loadFail\n    node.readonly = readonly\n    node.arrow = arrow\n    node.checkbox = checkbox\n    node.selectDisabled = selectDisabled\n    node.expandDisabled = expandDisabled\n    node.checkDisabled = checkDisabled\n    node.isLeaf = isLeaf\n  }\n\n  if (props.noBuildTree) {\n    walkTree(\n      props.data,\n      (item, _, parent) => {\n        let node = nodeDataMap.get(item)\n\n        if (node) {\n          refresh(node, item)\n        } else {\n          node = createNodeItem(item)\n          node.id = getIndexId()\n          node.parent = parent ? nodeDataMap.get(parent)?.id : undefined\n\n          nodeMap.set(node.id, node)\n          nodeDataMap.set(item, node)\n        }\n\n        nodes.push(node)\n      },\n      { childField: keyConfig.children, depthFirst: true }\n    )\n  } else {\n    const data = props.data\n\n    for (let i = 0, len = data.length; i < len; ++i) {\n      const item = data[i]\n      const id = item[idKey] as Key\n\n      let node = nodeMap.get(id)\n\n      if (node) {\n        refresh(node, item)\n      } else {\n        node = createNodeItem(item)\n        nodeMap.set(id, node)\n      }\n\n      nodes.push(node)\n    }\n  }\n\n  buildTreeNodes(nodes)\n  resetExpanded()\n}\n\nfunction syncNodeStateIntoData() {\n  flattedNodes.value.forEach(node => {\n    if (!node.data) return\n\n    const { data, visible, selected, expanded, disabled, checked, loading, readonly } = node\n\n    data.visible = visible\n    data.selected = selected\n    data.expanded = expanded\n    data.disabled = disabled\n    data.checked = checked\n    data.loading = loading\n    data.readonly = readonly\n  })\n\n  resetExpanded()\n}\n\nfunction createNodeItem(data: Data, defaults = defaultNodeProperties): TreeNodeProps {\n  const {\n    id: idKey,\n    parent: parentKey,\n    visible: visibleKey,\n    selected: selectedKey,\n    expanded: expandedKey,\n    disabled: disabledKey,\n    checked: checkedKey,\n    loading: loadingKey,\n    loaded: loadedKey,\n    loadFail: loadFailKey,\n    readonly: readonlyKey,\n    arrow: arrowKey,\n    checkbox: checkboxKey,\n    selectDisabled: selectDisabledKey,\n    expandDisabled: expandDisabledKey,\n    checkDisabled: checkDisabledKey,\n    isLeaf: isLeafKey\n  } = keyConfig\n\n  const {\n    [visibleKey]: visible = defaults.visible,\n    [selectedKey]: selected = defaults.selected,\n    [expandedKey]: expanded = defaults.expanded,\n    [disabledKey]: disabled = defaults.disabled,\n    [checkedKey]: checked = defaults.checked,\n    [loadingKey]: loading = defaults.loading,\n    [loadedKey]: loaded = defaults.loaded,\n    [loadFailKey]: loadFail = defaults.loadFail,\n    [readonlyKey]: readonly = defaults.readonly,\n    [arrowKey]: arrow = defaults.arrow,\n    [checkboxKey]: checkbox = defaults.checkbox,\n    [selectDisabledKey]: selectDisabled = defaults.selectDisabled,\n    [expandDisabledKey]: expandDisabled = defaults.expandDisabled,\n    [checkDisabledKey]: checkDisabled = defaults.checkDisabled,\n    [isLeafKey]: isLeaf = defaults.isLeaf\n  } = data\n  const id = props.noBuildTree ? null : data[idKey]\n  const parent = props.noBuildTree ? null : data[parentKey]\n\n  const node = {\n    id,\n    parent,\n    data,\n    visible,\n    selected,\n    expanded,\n    disabled,\n    checked,\n    loading,\n    loaded,\n    loadFail,\n    readonly,\n    arrow,\n    checkbox,\n    selectDisabled,\n    expandDisabled,\n    checkDisabled,\n    isLeaf\n  }\n\n  if (typeof props.postCreate === 'function') {\n    props.postCreate(node as TreeNodeProps)\n  }\n\n  return reactive({\n    ...node,\n    id,\n    parent,\n    children: [],\n    partial: false,\n    matched: false,\n    childMatched: false,\n    upperMatched: false,\n    depth: -1,\n    last: false,\n    // inLastCount: 0,\n    upstreamLast: [],\n    lineIndexes: []\n  })\n}\n\nfunction computeCheckedState(originNode: TreeNodeProps, able: boolean) {\n  if (!props.noCascaded) {\n    const nodeList = [originNode].concat(\n      // 需要包含被禁用且被勾选的节点\n      flattedNodes.value.filter(item => (item.disabled || item.checkDisabled) && item.checked)\n    )\n\n    for (let i = 0, len = nodeList.length; i < len; ++i) {\n      const item = nodeList[i]\n\n      updateCheckedUpward(item.id)\n      updateCheckedDown(item.id)\n    }\n  }\n\n  emitEvent(props.onNodeChange, originNode.data, originNode, able)\n}\n\nfunction handleNodeClick(node: TreeNodeProps) {\n  emitEvent(props.onNodeClick, node.data, node)\n}\n\nfunction handleLabelClick(node: TreeNodeProps) {\n  emitEvent(props.onLabelClick, node.data, node)\n}\n\nfunction handleNodeSelect(node: TreeNodeProps) {\n  const selectedNodes = flattedNodes.value.filter(item => item.selected)\n\n  if (props.multiple) {\n    emitEvent(\n      props.onNodeSelect,\n      selectedNodes.map(item => item.data),\n      selectedNodes\n    )\n  } else {\n    const currentId = node.id\n\n    for (let i = 0, len = selectedNodes.length; i < len; ++i) {\n      const item = selectedNodes[i]\n\n      item.selected = item.id === currentId\n    }\n\n    emitEvent(props.onNodeSelect, node.data, node)\n  }\n}\n\nfunction handleNodeCancel(node: TreeNodeProps) {\n  emitEvent(props.onNodeCancel, node.data, node)\n}\n\nfunction handleNodeExpand(node: TreeNodeProps) {\n  if (props.accordion) {\n    const siblingNodes = getSiblingNodes(node)\n\n    for (let i = 0, len = siblingNodes.length; i < len; ++i) {\n      siblingNodes[i].expanded = false\n    }\n  }\n\n  emitEvent(props.onNodeExpand, node.data, node)\n}\n\nfunction handleNodeReduce(node: TreeNodeProps) {\n  emitEvent(props.onNodeReduce, node.data, node)\n}\n\nasync function handleAsyncLoad(node: TreeNodeProps) {\n  if (!boundAsyncLoad.value) return false\n\n  let result = props.onAsyncLoad(node.data, node)\n\n  if (isPromise(result)) {\n    result = await result\n  }\n\n  return result !== false\n}\n\nlet dragState: {\n  draggingNode: TreeNodeProps,\n  treeRect: DOMRect,\n  willDropNode: TreeNodeProps | null,\n  dropType: DropType\n} | null = null\n\nfunction handleNodeDragStart(nodeInstance: TreeNodeInstance) {\n  if (!wrapper.value) return\n\n  dragState = {\n    draggingNode: nodeInstance.node,\n    treeRect: wrapper.value.getBoundingClientRect(),\n    willDropNode: null,\n    dropType: DropType.BEFORE\n  }\n\n  dragging.value = true\n  emitEvent(props.onDragStart, nodeInstance.node.data, nodeInstance.node)\n}\n\nfunction handleNodeDragOver(nodeInstance: TreeNodeInstance, event: DragEvent) {\n  if (!dragState || !nodeInstance.el || !nodeInstance.arrow) return\n\n  const dropNodeRect = nodeInstance.el.getBoundingClientRect()\n  const treeRect = dragState.treeRect\n  const dropArrowRect = nodeInstance.arrow.getBoundingClientRect()\n  const prevPercent = 0.25\n  const nextPercent = 0.75\n  const distance = event.clientY - dropNodeRect.top\n  const dropNodeHeight = dropArrowRect.height\n\n  let dropType: DropType\n  let indicatorTop = -9999\n  let isIndicatorShow = true\n\n  if (distance < dropNodeHeight * prevPercent) {\n    dropType = DropType.BEFORE\n    indicatorTop = dropArrowRect.top - treeRect.top\n  } else if (distance > dropNodeHeight * nextPercent) {\n    dropType = DropType.AFTER\n    indicatorTop = dropArrowRect.bottom - treeRect.top\n  } else {\n    dropType = DropType.INNER\n    isIndicatorShow = false\n  }\n\n  if (indicator.value) {\n    indicator.value.style.top = `${indicatorTop}px`\n    indicator.value.style.insetInlineStart = `${dropArrowRect.right - treeRect.left}px`\n  }\n\n  dragState.willDropNode = nodeInstance.node\n  dragState.dropType = dropType\n\n  indicatorShow.value = isIndicatorShow\n  emitEvent(props.onDragOver, nodeInstance.node.data, nodeInstance.node)\n}\n\nfunction isLeftInsideRight(left: TreeNodeProps, right: TreeNodeProps) {\n  if (!left || !right) return true\n\n  while (left) {\n    if (left === right || left.id === right.id) {\n      return true\n    }\n\n    left = getParentNode(left)!\n  }\n\n  return false\n}\n\nfunction handleNodeDrop(nodeInstance: TreeNodeInstance) {\n  if (!dragState) return\n\n  const { draggingNode, willDropNode, dropType } = dragState\n\n  if (!willDropNode || isLeftInsideRight(willDropNode, draggingNode)) return\n\n  let currentId: Key\n  let parent: TreeNodeProps | null\n\n  if (draggingNode) {\n    parent = getParentNode(draggingNode)\n\n    if (!parent) {\n      parent = {\n        children: treeNodes.value\n      } as TreeNodeProps\n    }\n\n    currentId = draggingNode.id as Key\n    removeArrayItem(parent.children, item => item.id === currentId)\n  }\n\n  if (dropType === DropType.INNER) {\n    if (!Array.isArray(willDropNode.children)) {\n      willDropNode.children = []\n    }\n\n    const children = Array.from(willDropNode.children as TreeNodeProps[])\n\n    children.push(draggingNode)\n\n    willDropNode.children = children\n    draggingNode.parent = willDropNode.id\n  } else {\n    parent = getParentNode(willDropNode)\n\n    if (!parent) {\n      parent = {\n        parent: undefined! as Key,\n        children: treeNodes.value\n      } as TreeNodeProps\n    }\n\n    currentId = willDropNode.id\n    const index = parent.children.findIndex(item => item.id === currentId)\n\n    if (~index) {\n      parent.children.splice(+(dropType === DropType.AFTER) + index, 0, draggingNode)\n\n      draggingNode.parent = parent.id\n    }\n  }\n\n  refreshNodesDepth()\n  emitEvent(props.onDrop, nodeInstance.node.data, nodeInstance.node, dropType)\n}\n\nfunction handleNodeDragEnd(nodeInstance: TreeNodeInstance) {\n  dragging.value = true\n  indicatorShow.value = false\n  dragState = null\n  emitEvent(props.onDragEnd, nodeInstance.node.data, nodeInstance.node)\n}\n\nfunction handleHittingChange(type: 'up' | 'down') {\n  const activeEl = document.activeElement\n\n  if (!visibleNodeEls.length || !activeEl) return\n\n  const index = visibleNodeEls.findIndex(nodeEl => nodeEl === activeEl)\n\n  if (~index) {\n    visibleNodeEls[\n      (index + (type === 'up' ? -1 : 1) + visibleNodeEls.length) % visibleNodeEls.length\n    ]?.focus()\n  }\n}\n\nfunction handleNodeHitting(nodeEl?: HTMLElement | null) {\n  if (!nodeEl || !visibleNodeEls.length) return\n\n  if (visibleNodeEls.includes(nodeEl)) {\n    nodeEl.focus()\n  }\n}\n\nfunction handleScroll() {\n  // onScroll()\n  updateVisibleNodeEls()\n}\n\nfunction handleTreeFocus(event: FocusEvent) {\n  const target = event.target as HTMLElement\n\n  if (!visibleNodeEls.length || !target || !trap.value) {\n    return\n  }\n\n  if (target === trap.value) {\n    visibleNodeEls[0].focus()\n  }\n}\n\nfunction refreshScroll() {\n  virtualList.value?.refresh()\n}\n\nfunction resetExpanded() {\n  expanding.value = false\n  isMounted.value && updateVisibleNodeEls()\n}\n\nfunction afterExpand() {\n  if (props.virtual) {\n    resetExpanded()\n    return\n  }\n\n  transferring.value = true\n\n  requestAnimationFrame(() => {\n    resetExpanded()\n    timer.expand = setTimeout(() => {\n      transferring.value = false\n    }, 300)\n  })\n}\n\nfunction getCheckedNodes(includePartial = false): TreeNodeProps[] {\n  return flattedNodes.value.filter(item => item.checked || (includePartial && item.partial))\n}\n\nfunction getCheckedNodeData(includePartial = false) {\n  return getCheckedNodes(includePartial).map(node => node.data)\n}\n\nfunction getSelectedNodes(): TreeNodeProps[] {\n  return flattedNodes.value.filter(item => item.selected)\n}\n\nfunction getSelectedNodeData() {\n  return getSelectedNodes().map(node => node.data)\n}\n\nfunction getExpandedNodes(): TreeNodeProps[] {\n  return flattedNodes.value.filter(item => item.expanded)\n}\n\nfunction getDisabledNodes(): TreeNodeProps[] {\n  return flattedNodes.value.filter(item => item.disabled)\n}\n\nfunction getParentNode(node: TreeNodeProps): TreeNodeProps | null {\n  if (node.parent) {\n    return nodeMap.get(node.parent) ?? null\n  }\n\n  return null\n}\n\nfunction getNodeChildren(node: TreeNodeProps) {\n  return node.children\n}\n\nfunction getSiblingNodes(node: TreeNodeProps, includeSelf = false): TreeNodeProps[] {\n  const parent = getParentNode(node)\n\n  const currentId = node.id as Key\n  const parentId = parent ? (parent.id as Key) : null\n\n  return flattedNodes.value.filter(item => {\n    const isChild = parentId === null ? !item.parent : item.parent === parentId\n\n    if (isChild && !includeSelf) {\n      return item.id !== currentId\n    }\n\n    return isChild\n  })\n}\n\nfunction getPrevSiblingNode(node: TreeNodeProps): TreeNodeProps | null {\n  const parent = getParentNode(node)\n\n  if (!parent) return null\n\n  const currentId = node.id\n  const parentId = parent.id\n  const children = flattedNodes.value.filter(item => item.parent === parentId)\n\n  if (children && children.length) {\n    const index = children.findIndex(item => item.id === currentId)\n\n    if (index > 0) {\n      return children[index - 1]\n    }\n  }\n\n  return null\n}\n\nfunction getNextSiblingNode(node: TreeNodeProps): TreeNodeProps | null {\n  const parent = getParentNode(node)\n\n  if (!parent) return null\n\n  const currentId = node.id\n  const parentId = parent.id\n  const children = flattedNodes.value.filter(item => item.parent === parentId)\n\n  if (children && children.length) {\n    const index = children.findIndex(item => item.id === currentId)\n\n    if (!~index && index < children.length - 1) {\n      return children[index + 1]\n    }\n  }\n\n  return null\n}\n\nfunction getNodeByData<T extends Data>(data: T): TreeNodeProps | null {\n  if (props.noBuildTree) {\n    return flattedNodes.value.find(item => item.data === data) ?? null\n  }\n\n  const idKey = keyConfig.id\n\n  return (\n    flattedNodes.value.find(\n      item => item.data === data || item.data[idKey] === data[idKey as keyof T]\n    ) ?? null\n  )\n}\n\nfunction expandNodeByData<T extends Data>(data: T, expanded?: boolean, upstream = false) {\n  const node = getNodeByData(data)\n\n  if (node) {\n    node.expanded = isNull(expanded) ? !node.expanded : !!expanded\n\n    if (upstream) {\n      let parentNode = getParentNode(node)\n\n      while (parentNode) {\n        parentNode.expanded = node.expanded\n        parentNode = getParentNode(parentNode)\n      }\n    }\n  }\n}\n\nfunction selectNodeByData<T extends Data>(data: T, selected?: boolean) {\n  const node = getNodeByData(data)\n\n  if (node) {\n    node.selected = isNull(selected) ? !node.selected : !!selected\n  }\n}\n\nfunction checkNodeByData<T extends Data>(data: T, checked?: boolean) {\n  const node = getNodeByData(data)\n\n  if (node) {\n    node.checked = isNull(checked) ? !node.checked : !!checked\n\n    if (!props.noCascaded) {\n      const nodeList = [node].concat(\n        flattedNodes.value.filter(item => item.disabled && item.checked)\n      )\n\n      for (let i = 0, len = nodeList.length; i < len; ++i) {\n        const item = nodeList[i]\n\n        updateCheckedUpward(item.id)\n        updateCheckedDown(item.id)\n      }\n    }\n  }\n}\n\nfunction toggleNodeLoadingByData<T extends Data>(data: T, loading?: boolean) {\n  const node = getNodeByData(data)\n\n  if (node) {\n    node.checked = isNull(loading) ? !node.loading : !!loading\n  }\n}\n\nfunction toggleAllExpanded(expanded: boolean) {\n  for (const node of flattedNodes.value) {\n    if (!node.disabled && !node.expandDisabled && !node.loading && node.children?.length) {\n      node.expanded = expanded\n    }\n  }\n}\n\nfunction getTreeData(withFilter = false) {\n  return mapTree(\n    withFilter\n      ? filterTree(treeNodes.value, node => node.matched, {\n        childField: 'children',\n        leafOnly: props.filterLeaf,\n        isLeaf: isLeafNode\n      })\n      : treeNodes.value,\n    node => ({ ...node.data })\n  )\n}\n\nfunction getFlattedData(withFilter = false) {\n  return (\n    withFilter\n      ? flattedNodes.value.filter(node => node.matched || node.childMatched || node.upperMatched)\n      : flattedNodes.value\n  ).map(node => ({ ...node.data }))\n}\n\nconst transferring = ref(false)\n</script>\n\n<template>\n  <VirtualList\n    ref=\"virtualList\"\n    :class=\"[nh.b(), nh.bs('vars'), props.inherit && nh.bm('inherit')]\"\n    :inherit=\"props.inherit\"\n    :items=\"renderedNodes\"\n    :item-size=\"props.nodeMinHeight\"\n    items-tag=\"ul\"\n    :items-attrs=\"{ class: nh.be('list') }\"\n    :hide-bar=\"!props.useYBar\"\n    :ignore-resize=\"transferring\"\n    role=\"tree\"\n    tabindex=\"-1\"\n    :aria-disabled=\"props.disabled\"\n    :aria-readonly=\"props.readonly\"\n    :style=\"style\"\n    @scroll=\"handleScroll\"\n  >\n    <template #prefix-trap>\n      <span\n        ref=\"trap\"\n        tabindex=\"0\"\n        aria-hidden=\"true\"\n        style=\"width: 0; height: 0; overflow: hidden; outline: none\"\n        @focus=\"handleTreeFocus\"\n      ></span>\n    </template>\n    <template #default=\"{ item: node }: { item: TreeNodeProps }\">\n      <CollapseTransition\n        v-if=\"isCollapse(node)\"\n        appear\n        :reverse=\"node.type === 'reduce'\"\n        @after-enter=\"afterExpand\"\n      >\n        <div :class=\"nh.be('collapse')\" :style=\"{ height: `${node.height}px` }\">\n          <TreeNode\n            v-for=\"(innerNode, index) in node.nodes\"\n            :key=\"innerNode.id ?? index\"\n            v-bind=\"toNodeProps(innerNode.data, innerNode)\"\n            :node=\"innerNode\"\n          >\n            <template #default=\"payload\">\n              <slot name=\"node\" v-bind=\"payload\"></slot>\n            </template>\n            <template v-if=\"$slots.arrow\" #arrow=\"payload\">\n              <slot name=\"arrow\" v-bind=\"payload\"></slot>\n            </template>\n            <template #label=\"payload\">\n              <slot name=\"label\" v-bind=\"payload\"></slot>\n            </template>\n            <template v-if=\"$slots.prefix\" #prefix=\"payload\">\n              <slot name=\"prefix\" v-bind=\"payload\"></slot>\n            </template>\n            <template v-if=\"$slots.suffix\" #suffix=\"payload\">\n              <slot name=\"suffix\" v-bind=\"payload\"></slot>\n            </template>\n          </TreeNode>\n        </div>\n      </CollapseTransition>\n      <TreeNode v-else v-bind=\"toNodeProps(node.data, node)\" :node=\"node\">\n        <template #default=\"payload\">\n          <slot name=\"node\" v-bind=\"payload\"></slot>\n        </template>\n        <template v-if=\"$slots.arrow\" #arrow=\"payload\">\n          <slot name=\"arrow\" v-bind=\"payload\"></slot>\n        </template>\n        <template #label=\"payload\">\n          <slot name=\"label\" v-bind=\"payload\"></slot>\n        </template>\n        <template v-if=\"$slots.prefix\" #prefix=\"payload\">\n          <slot name=\"prefix\" v-bind=\"payload\"></slot>\n        </template>\n        <template v-if=\"$slots.suffix\" #suffix=\"payload\">\n          <slot name=\"suffix\" v-bind=\"payload\"></slot>\n        </template>\n      </TreeNode>\n    </template>\n    <template #empty>\n      <div :class=\"nh.be('empty-tip')\">\n        <slot name=\"empty\">\n          {{ props.emptyText ?? locale.empty }}\n        </slot>\n      </div>\n    </template>\n    <template #suffix-trap>\n      <div\n        v-if=\"props.draggable\"\n        v-show=\"indicatorShow\"\n        ref=\"indicator\"\n        :class=\"nh.be('indicator')\"\n      ></div>\n    </template>\n  </VirtualList>\n</template>\n", "import {\n  booleanProp,\n  buildProps,\n  eventProp,\n  iconProp,\n  localeProp,\n  stateProp,\n  styleProp\n} from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { IconEffect } from '@/components/icon'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type {\n  BeforeSelect,\n  BeforeUpload,\n  RenderFn,\n  UploadFileOptions,\n  UploadFileState,\n  UploadHttpError,\n  UploadListType\n} from './symbol'\n\nexport const uploadProps = buildProps({\n  state: stateProp,\n  locale: localeProp('upload'),\n  url: String,\n  fileList: Array as PropType<UploadFileOptions[]>,\n  multiple: booleanProp,\n  tip: String,\n  accept: [String, Array] as PropType<string | string[]>,\n  filter: [String, Array] as PropType<string | string[]>,\n  maxSize: Number,\n  field: String,\n  data: Object as PropType<Record<string, string | Blob>>,\n  headers: Object as PropType<Record<string, string>>,\n  withCredentials: booleanProp,\n  manual: booleanProp,\n  hiddenFiles: booleanProp,\n  countLimit: Number,\n  allowDrag: booleanProp,\n  onBeforeUpload: Function as PropType<BeforeUpload>,\n  onBeforeSelect: Function as PropType<BeforeSelect>,\n  iconRenderer: Function as PropType<RenderFn>,\n  selectToAdd: booleanProp,\n  listType: String as PropType<UploadListType>,\n  block: booleanProp,\n  loadingText: String,\n  directory: booleanProp,\n  pathField: String,\n  disabledClick: booleanProp,\n  buttonLabel: String,\n  disabled: booleanProp,\n  loading: booleanProp,\n  loadingIcon: iconProp,\n  loadingLock: booleanProp,\n  loadingEffect: String as PropType<IconEffect>,\n  image: booleanProp,\n  defaultFiles: Array as PropType<UploadFileOptions[]>,\n  canPreview: Function as PropType<(file: UploadFileState) => boolean>,\n  listStyle: styleProp,\n  name: String,\n  onExceed: eventProp<(files: UploadFileState[]) => void>(),\n  onChange: eventProp<(files: UploadFileState[]) => void>(),\n  onFilterError: eventProp<(files: UploadFileState) => void>(),\n  onSizeError: eventProp<(files: UploadFileState) => void>(),\n  onDelete: eventProp<(file: UploadFileState) => void>(),\n  onPreview: eventProp<(file: UploadFileState) => void>(),\n  onProgress: eventProp<(file: UploadFileState, percent: number) => void>(),\n  onSuccess: eventProp<(file: UploadFileState, response: any) => void>(),\n  onError: eventProp<(file: UploadFileState, error: UploadHttpError) => void>()\n})\n\nexport type UploadProps = ExtractPropTypes<typeof uploadProps>\nexport type UploadCProps = ConfigurableProps<\n  UploadProps,\n  'url' | 'fileList',\n  'onBeforeUpload' | 'onBeforeSelect'\n>\n\nexport const uploadListProps = buildProps({\n  files: Array as PropType<UploadFileState[]>,\n  selectToAdd: booleanProp,\n  iconRenderer: Function as PropType<RenderFn>,\n  type: String as PropType<UploadListType>,\n  loadingText: String,\n  style: styleProp,\n  precision: Number,\n  canPreview: Function as PropType<(file: UploadFileState) => boolean>,\n  onDelete: eventProp<(file: UploadFileState) => void>(),\n  onPreview: eventProp<(file: UploadFileState) => void>()\n})\n\nexport type UploadListProps = ExtractPropTypes<typeof uploadListProps>\nexport type UploadListCProps = ConfigurableProps<UploadListProps, 'files'>\n\nexport const uploadFileProps = buildProps({\n  locale: localeProp('upload'),\n  file: Object as PropType<UploadFileState>,\n  iconRenderer: Function as PropType<RenderFn>,\n  listType: String as PropType<UploadListType>,\n  loadingText: String,\n  selectToAdd: booleanProp,\n  precision: Number,\n  canPreview: Function as PropType<(file: UploadFileState) => boolean>,\n  onDelete: eventProp<(file: UploadFileState) => void>(),\n  onPreview: eventProp<(file: UploadFileState) => void>()\n})\n\nexport type UploadFileProps = ExtractPropTypes<typeof uploadFileProps>\nexport type UploadFileCProps = ConfigurableProps<UploadFileProps, 'file'>\n", "import { computed } from 'vue'\n\nimport { useIcons } from '@vexip-ui/config'\n\nimport type { IconsConfig } from '@vexip-ui/config'\n\nconst iconConfig = new Map<keyof IconsConfig, string[]>()\n\n// iconConfig.set('fileWord', ['doc', 'docx'])\niconConfig.set('fileVideo', [\n  'mp4',\n  'flv',\n  'mkv',\n  'rm',\n  'rmvb',\n  'mov',\n  'mtv',\n  'wnv',\n  'avi',\n  '3gp',\n  'amv',\n  'dmv'\n])\n// iconConfig.set('filePdf', ['pdf'])\niconConfig.set('fileImage', [\n  'bmp',\n  'jpg',\n  'jpeg',\n  'png',\n  'tif',\n  'gif',\n  'pcx',\n  'tga',\n  'exif',\n  'fpx',\n  'svg',\n  'psd',\n  'cdr',\n  'pcd',\n  'dxf',\n  'ufo',\n  'eps',\n  'ai',\n  'raw',\n  'wmf',\n  'webp'\n])\n// iconConfig.set('fileExcel', ['xls', 'xlsx', 'xlsm', 'xlsb', 'xlam', 'csv'])\niconConfig.set(\n  'fileCode',\n  [\n    [\n      'json',\n      'xml',\n      'property',\n      'class',\n      'c',\n      'cpp',\n      'cc',\n      'cxx',\n      'h',\n      'hpp',\n      'hxx',\n      'cs',\n      'yml',\n      'yaml',\n      'ts',\n      'tsx'\n    ],\n    ['js', 'jsx', 'mjs', 'cjs', 'ts', 'tsx', 'mts', 'cts'],\n    ['css', 'styl', 'pcss'],\n    ['sass', 'scss'],\n    ['less'],\n    ['java', 'class', 'jsp'],\n    ['vue'],\n    ['html', 'htm'],\n    ['py', 'pyc', 'pyw', 'pyo', 'pyd']\n  ].flat()\n)\niconConfig.set('fileAudio', [\n  'cd',\n  'wave',\n  'aiff',\n  'mpeg',\n  'mp3',\n  'mpeg-4',\n  'midi',\n  'wma',\n  'ra',\n  'rm',\n  'rmx',\n  'vqf',\n  'amr',\n  'ape',\n  'flac',\n  'aac'\n])\niconConfig.set('fileZip', [\n  'rar',\n  'zip',\n  '7z',\n  'cab',\n  'arj',\n  'lzh',\n  'tar',\n  'gz',\n  'ace',\n  'uue',\n  'bz2',\n  'jar',\n  'iso'\n])\niconConfig.set(\n  'fileText',\n  [\n    ['doc', 'docx'],\n    ['xls', 'xlsx', 'xlsm', 'xlsb', 'xlam', 'csv'],\n    ['pdf', 'txt', 'md']\n  ].flat()\n)\niconConfig.set('file', ['default'])\n\nexport function useFileIcons(icons = useIcons()) {\n  return computed(() => {\n    const map: Record<string, Record<string, any>> = {}\n\n    for (const [iconName, types] of iconConfig.entries()) {\n      if (types?.length) {\n        for (const type of types) {\n          map[type] = icons.value[iconName]\n        }\n      }\n    }\n\n    return map\n  })\n}\n", "import type { ComponentPublicInstance } from 'vue'\n\nexport type UploadListType = 'name' | 'detail' | 'thumbnail' | 'card'\nexport type UploadStatus = 'pending' | 'uploading' | 'fail' | 'success' | 'delete'\n\nexport type UploadSourceFile = File & { path?: string }\n\nexport type UploadHttpError = Error & {\n  response: any,\n  url: string,\n  status: number,\n  method: string\n}\n\nexport const enum StatusType {\n  PENDING = 'pending',\n  UPLOADING = 'uploading',\n  FAIL = 'fail',\n  SUCCESS = 'success',\n  DELETE = 'delete'\n}\n\nexport interface UploadFileState {\n  id: string | number,\n  name: string,\n  size: number,\n  type: string,\n  base64: string | null,\n  status: UploadStatus,\n  percentage: number,\n  source: UploadSourceFile | null,\n  url: string | null,\n  path: string,\n  xhr: XMLHttpRequest | null,\n  response: any,\n  error: UploadHttpError | null\n}\n\nexport type UploadFileOptions = Partial<Omit<UploadFileState, 'xhr' | 'response' | 'error'>>\n\ntype MaybePromise<T> = T | Promise<T>\n\nexport type BeforeUpload = (\n  file: UploadFileState,\n  files: UploadFileState[]\n) => MaybePromise<boolean | Blob | UploadSourceFile | void>\nexport type BeforeSelect = (\n  file: UploadFileState,\n  files: UploadFileState[]\n) => MaybePromise<boolean | void>\nexport type RenderFn = (data: { file: UploadFileState }) => any\n\nexport interface UploadOptions {\n  url: string,\n  file: UploadSourceFile,\n  headers?: Record<string, string>,\n  withCredentials?: boolean,\n  data?: Record<string, string | Blob>,\n  field?: string,\n  pathField?: string,\n  onProgress?: (percent: number) => void,\n  onSuccess?: (response: any) => void,\n  onError?: (error: UploadHttpError) => void,\n  onAbort?: () => void\n}\nexport interface DirectoryEntity {\n  name: string,\n  fullPath: string,\n  isFile: boolean,\n  isDirectory: boolean,\n  file: (callback: (file: UploadSourceFile) => void) => void,\n\n  createReader: () => DirectoryReader\n}\n\nexport interface DirectoryReader {\n  readEntries: (\n    onSuccess: (entities: DirectoryEntity[]) => void,\n    onError?: (errors: any) => void\n  ) => void\n}\n\nexport interface UploadExposed extends ComponentPublicInstance {\n  isDragOver: boolean,\n  execute: () => Promise<false | any[]>,\n  handleDelete: (file: UploadFileState) => void,\n  focus: (options?: FocusOptions) => void,\n  blur: () => void\n}\n\nexport const uploadListTypes = Object.freeze<UploadListType[]>([\n  'name',\n  'detail',\n  'thumbnail',\n  'card'\n])\n\n/**\n * @deprecated Use `UploadHttpError` to replace it\n */\nexport type HttpError = UploadHttpError\n/**\n * @deprecated Use `UploadSourceFile` to replace it\n */\nexport type SourceFile = UploadSourceFile\n/**\n * @deprecated Use `UploadFileState` to replace it\n */\nexport type FileState = UploadFileState\n/**\n * @deprecated Use `UploadFileOptions` to replace it\n */\nexport type FileOptions = UploadFileOptions\n", "<script setup lang=\"ts\">\nimport { CollapseTransition } from '@/components/collapse-transition'\nimport { Icon } from '@/components/icon'\nimport { Progress } from '@/components/progress'\nimport { Renderer } from '@/components/renderer'\n\nimport { computed, toRef } from 'vue'\n\nimport { emitEvent, useIcons, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport { toFixed } from '@vexip-ui/utils'\nimport { uploadFileProps } from './props'\nimport { useFileIcons } from './file-icon'\nimport { StatusType, uploadListTypes } from './symbol'\n\nimport type { UploadFileState, UploadStatus } from './symbol'\n\ndefineOptions({ name: 'UploadFile' })\n\nconst imageExtRE = /\\.(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico)$/i\nconst imageBase64RE = /^data:image\\//\n\nfunction isImage(file: UploadFileState) {\n  if (file.type) {\n    return file.type.startsWith('image/')\n  }\n\n  const { name, url, base64 } = file\n\n  return !!(\n    imageExtRE.test(name) ||\n    (url && (imageExtRE.test(url) || imageBase64RE.test(url))) ||\n    (base64 && imageBase64RE.test(base64))\n  )\n}\n\nconst _props = defineProps(uploadFileProps)\nconst props = useProps('uploadFile', _props, {\n  locale: null,\n  file: {\n    default: () => ({}) as UploadFileState,\n    static: true\n  },\n  iconRenderer: {\n    default: null,\n    isFunc: true\n  },\n  listType: {\n    default: 'name',\n    validator: value => uploadListTypes.includes(value)\n  },\n  loadingText: null,\n  selectToAdd: false,\n  precision: 2,\n  canPreview: {\n    default: isImage,\n    isFunc: true\n  }\n})\n\ndefineSlots<{\n  default: (params: { file: UploadFileState, status: UploadStatus, percentage: number }) => any,\n  icon: (params: { file: UploadFileState }) => any\n}>()\n\nconst nh = useNameHelper('upload')\nconst locale = useLocale('upload', toRef(props, 'locale'))\nconst icons = useIcons()\nconst fileIcons = useFileIcons(icons)\n\nconst useIconRenderer = computed(() => typeof props.iconRenderer === 'function')\nconst fileName = computed(() => props.file.path || props.file.name)\nconst percentage = computed(() => toFixed(props.file.percentage, props.precision))\nconst showThumb = computed(() => isImage(props.file) && (props.file.url || props.file.base64))\n\nfunction getFileExtension(file: UploadFileState) {\n  return file.name.split('.').pop()!.toLocaleLowerCase()\n}\n\nfunction getFileIcon(file: UploadFileState, scale = 1) {\n  const extension = getFileExtension(file)\n  const icon = extension\n    ? fileIcons.value[extension] || fileIcons.value.default\n    : fileIcons.value.default\n\n  return { ...icon, scale: +(icon.scale || 1) * scale }\n}\n\nfunction handleDelete(file: UploadFileState) {\n  emitEvent(props.onDelete, file)\n}\n\nfunction handlePreview(file: UploadFileState) {\n  emitEvent(props.onPreview, file)\n}\n\nfunction imageToBase64(file: UploadFileState) {\n  if (!file.source || !isImage(props.file)) return\n\n  const reader = new FileReader()\n\n  reader.readAsDataURL(file.source)\n  reader.onload = () => {\n    if (file.status !== StatusType.DELETE) {\n      file.base64 = reader.result?.toString() ?? null\n    }\n  }\n}\n</script>\n\n<template>\n  <li\n    :class=\"[\n      nh.be('file'),\n      nh.bem('file', props.listType),\n      nh.bem('file', props.file.status),\n      props.inherit && nh.bem('file', 'inherit')\n    ]\"\n    :title=\"fileName\"\n    tabindex=\"-1\"\n  >\n    <slot :file=\"props.file\" :status=\"props.file.status\" :percentage=\"percentage\">\n      <template v-if=\"props.listType === 'name'\">\n        <div :class=\"nh.be('label')\">\n          <div :class=\"[nh.be('icon'), nh.be('file-icon')]\">\n            <slot name=\"icon\" :file=\"props.file\">\n              <Renderer\n                v-if=\"useIconRenderer\"\n                :renderer=\"props.iconRenderer\"\n                :data=\"{ file: props.file }\"\n              ></Renderer>\n              <Icon v-else v-bind=\"getFileIcon(props.file)\"></Icon>\n            </slot>\n          </div>\n          <span :class=\"nh.be('filename')\">\n            {{ fileName }}\n          </span>\n        </div>\n        <div :class=\"nh.be('actions')\">\n          <span\n            v-if=\"props.file.status === 'uploading'\"\n            style=\"margin-inline-end: 0.5em\"\n            :class=\"nh.be('percentage')\"\n          >\n            {{ `${percentage}%` }}\n          </span>\n          <div v-if=\"props.file.status === 'success'\" :class=\"[nh.be('icon'), nh.be('success')]\">\n            <Icon v-bind=\"icons.success\"></Icon>\n          </div>\n          <div v-else-if=\"props.file.status === 'fail'\" :class=\"[nh.be('icon'), nh.be('fail')]\">\n            <Icon v-bind=\"icons.warning\"></Icon>\n          </div>\n          <div\n            v-else-if=\"props.file.status === 'uploading'\"\n            :class=\"[nh.be('icon'), nh.be('loading')]\"\n          >\n            <Icon v-bind=\"icons.loading\"></Icon>\n          </div>\n          <button\n            type=\"button\"\n            :class=\"[nh.be('icon'), nh.be('close')]\"\n            @click=\"handleDelete(props.file)\"\n          >\n            <Icon v-bind=\"icons.delete\"></Icon>\n          </button>\n        </div>\n        <div v-if=\"props.file.status === 'uploading'\" :class=\"nh.be('progress')\">\n          <Progress\n            inherit\n            info-type=\"none\"\n            :stroke-width=\"2\"\n            :percentage=\"props.file.percentage\"\n            :precision=\"props.precision\"\n          ></Progress>\n        </div>\n      </template>\n      <template v-else-if=\"props.listType === 'thumbnail' || props.listType === 'card'\">\n        <div :class=\"nh.be('card')\">\n          <div :class=\"nh.be('thumbnail')\">\n            <template v-if=\"props.file.status === 'uploading'\">\n              <div v-if=\"props.listType === 'thumbnail'\" :class=\"nh.be('progress')\">\n                <span style=\"margin-bottom: 0.3em\">\n                  {{ props.loadingText ?? locale.uploading }}\n                </span>\n                <Progress\n                  inherit\n                  info-type=\"none\"\n                  :stroke-width=\"2\"\n                  :percentage=\"props.file.percentage\"\n                  :precision=\"props.precision\"\n                ></Progress>\n                <span style=\"margin-top: 3px\" :class=\"nh.be('percentage')\">\n                  {{ `${percentage}%` }}\n                </span>\n              </div>\n              <Icon\n                v-else\n                v-bind=\"icons.loading\"\n                :scale=\"+(icons.loading.scale || 1) * 1.8\"\n                label=\"loading\"\n              ></Icon>\n            </template>\n            <img\n              v-else-if=\"showThumb\"\n              :class=\"nh.be('image')\"\n              :src=\"props.file.url || props.file.base64 || ''\"\n              :alt=\"fileName\"\n            />\n            <template v-else>\n              {{ imageToBase64(props.file) }}\n              <slot name=\"icon\" :file=\"props.file\">\n                <Renderer\n                  v-if=\"useIconRenderer\"\n                  :renderer=\"props.iconRenderer\"\n                  :data=\"{ file: props.file }\"\n                ></Renderer>\n                <Icon v-else v-bind=\"getFileIcon(props.file, 2.8)\"></Icon>\n              </slot>\n            </template>\n          </div>\n          <div v-if=\"props.listType === 'card'\" :class=\"nh.be('info')\">\n            <span :class=\"nh.be('filename')\">\n              {{ fileName }}\n            </span>\n            <CollapseTransition>\n              <div v-if=\"props.file.status === 'uploading'\" :class=\"nh.be('progress')\">\n                <Progress\n                  inherit\n                  info-type=\"none\"\n                  :stroke-width=\"4\"\n                  :percentage=\"props.file.percentage\"\n                  :precision=\"props.precision\"\n                ></Progress>\n              </div>\n            </CollapseTransition>\n          </div>\n          <div\n            v-if=\"props.listType === 'card' || props.file.status !== 'uploading'\"\n            :class=\"nh.be('actions')\"\n          >\n            <div v-if=\"props.listType === 'thumbnail'\" :class=\"nh.be('mask')\"></div>\n            <button\n              type=\"button\"\n              :class=\"[\n                nh.be('icon'),\n                nh.be('action'),\n                {\n                  [nh.bem('action', 'disabled')]: !props.canPreview(props.file)\n                }\n              ]\"\n              :disabled=\"!props.canPreview(props.file)\"\n              @click=\"handlePreview(props.file)\"\n            >\n              <Icon v-bind=\"icons.preview\" :scale=\"+(icons.preview.scale || 1) * 1.4\"></Icon>\n            </button>\n            <button\n              type=\"button\"\n              :class=\"[nh.be('icon'), nh.be('action')]\"\n              @click=\"handleDelete(props.file)\"\n            >\n              <Icon v-bind=\"icons.delete\" :scale=\"+(icons.delete.scale || 1) * 1.4\"></Icon>\n            </button>\n          </div>\n        </div>\n      </template>\n    </slot>\n  </li>\n</template>\n", "<script setup lang=\"ts\">\nimport { UploadFile } from '@/components/upload-file'\n\nimport { computed } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { uploadListProps } from './props'\nimport { uploadListTypes } from './symbol'\n\nimport type { UploadFileState, UploadStatus } from './symbol'\n\ndefineOptions({ name: 'UploadList' })\n\nconst _props = defineProps(uploadListProps)\nconst props = useProps('uploadList', _props, {\n  files: {\n    default: () => [],\n    static: true\n  },\n  selectToAdd: false,\n  iconRenderer: {\n    default: null,\n    isFunc: true\n  },\n  type: {\n    default: 'name',\n    validator: value => uploadListTypes.includes(value)\n  },\n  loadingText: null,\n  style: null,\n  precision: 2\n  // 'canPreview' using UploadFile default\n})\n\ndefineSlots<{\n  item: (params: { file: UploadFileState, status: UploadStatus, percentage: number }) => any,\n  icon: (params: { file: UploadFileState }) => any,\n  suffix: () => any\n}>()\n\nconst nh = useNameHelper('upload')\nconst transitionName = computed(() => nh.ns('fade'))\n\nfunction handleDelete(file: UploadFileState) {\n  emitEvent(props.onDelete, file)\n}\n\nfunction handlePreview(file: UploadFileState) {\n  emitEvent(props.onPreview, file)\n}\n</script>\n\n<template>\n  <ul\n    :class=\"[nh.be('files'), nh.bs('vars'), props.inherit && nh.bem('files', 'inherit')]\"\n    :style=\"props.style\"\n  >\n    <Transition\n      v-for=\"item in props.files\"\n      :key=\"item.id\"\n      appear\n      :name=\"props.selectToAdd ? transitionName : undefined\"\n    >\n      <UploadFile\n        inherit\n        :file=\"item\"\n        :icon-renderer=\"props.iconRenderer\"\n        :list-type=\"props.type\"\n        :loading-text=\"props.loadingText\"\n        :select-to-add=\"props.selectToAdd\"\n        :precision=\"props.precision\"\n        :can-preview=\"props.canPreview\"\n        @delete=\"handleDelete\"\n        @preview=\"handlePreview\"\n      >\n        <template #default=\"{ file, status, percentage }\">\n          <slot\n            name=\"item\"\n            :file=\"file\"\n            :status=\"status\"\n            :percentage=\"percentage\"\n          ></slot>\n        </template>\n        <template #icon=\"{ file }\">\n          <slot name=\"icon\" :file=\"file\"></slot>\n        </template>\n      </UploadFile>\n    </Transition>\n    <slot name=\"suffix\"></slot>\n  </ul>\n</template>\n", "import { has, isDefined } from '@vexip-ui/utils'\n\nimport type { UploadHttpError, UploadOptions } from './symbol'\n\nfunction getError(url: string, xhr: XMLHttpRequest) {\n  const message = `fail to post ${url} ${xhr.status}'`\n  const error = new Error(message) as UploadHttpError\n\n  error.response = getBody(xhr)\n  error.url = url\n  error.status = xhr.status\n  error.method = 'POST'\n\n  return error\n}\n\nfunction getBody(xhr: XMLHttpRequest) {\n  const text = xhr.responseText || xhr.response\n\n  if (!text) {\n    return text\n  }\n\n  try {\n    return JSON.parse(text)\n  } catch (e) {\n    return text\n  }\n}\n\nexport function upload(options: UploadOptions) {\n  if (typeof XMLHttpRequest === 'undefined') {\n    return null\n  }\n\n  const xhr = new XMLHttpRequest()\n  const url = options.url\n\n  if (xhr.upload && options.onProgress) {\n    xhr.upload.onprogress = event => {\n      let percent = 0\n\n      if (event.total > 0) {\n        percent = (event.loaded / event.total) * 100\n      }\n\n      options.onProgress!(percent)\n    }\n  }\n\n  const formData = new FormData()\n\n  if (options.data) {\n    const data = options.data\n\n    Object.keys(data).forEach(key => {\n      formData.append(key, data[key])\n    })\n  }\n\n  formData.append(options.field || 'file', options.file)\n  options.file.path && formData.append(options.pathField || 'path', options.file.path)\n\n  if (options.onError) {\n    xhr.onerror = () => {\n      options.onError!(getError(url, xhr))\n    }\n  }\n\n  xhr.onload = () => {\n    if (xhr.status < 200 || xhr.status >= 300) {\n      if (options.onError) {\n        options.onError(getError(url, xhr))\n      }\n\n      return\n    }\n\n    const body = getBody(xhr)\n\n    options.onSuccess?.(body)\n  }\n\n  if (options.onAbort) {\n    xhr.onabort = () => {\n      options.onAbort!()\n    }\n  }\n\n  xhr.open('POST', url, true)\n\n  if (options.withCredentials && 'withCredentials' in xhr) {\n    xhr.withCredentials = true\n  }\n\n  const headers = options.headers ?? {}\n\n  Object.keys(headers).forEach(header => {\n    if (has(headers, header) && isDefined(headers[header])) {\n      xhr.setRequestHeader(header, headers[header])\n    }\n  })\n\n  xhr.send(formData)\n\n  return xhr\n}\n", "import { Button } from '@/components/button'\nimport { Icon } from '@/components/icon'\nimport { UploadList } from '@/components/upload-list'\nimport { useFieldStore } from '@/components/form'\n\nimport { computed, defineComponent, onBeforeUnmount, ref, renderSlot, toRef, watch } from 'vue'\n\nimport {\n  createIconProp,\n  createStateProp,\n  emitEvent,\n  useIcons,\n  useLocale,\n  useNameHelper,\n  useProps\n} from '@vexip-ui/config'\nimport { isClient, isDefined, isFalse, isPromise, noop, randomString } from '@vexip-ui/utils'\nimport { uploadProps } from './props'\nimport { upload } from './request'\nimport { StatusType, uploadListTypes } from './symbol'\n\nimport type { Ref } from 'vue'\nimport type {\n  DirectoryEntity,\n  UploadFileOptions,\n  UploadFileState,\n  UploadHttpError,\n  UploadSourceFile\n} from './symbol'\n\nfunction getDefaultFileState(): UploadFileState {\n  return {\n    id: randomString(),\n    name: '',\n    size: 0,\n    type: '',\n    base64: null,\n    status: StatusType.PENDING,\n    percentage: 0,\n    source: null,\n    url: null,\n    path: '',\n    xhr: null,\n    response: null,\n    error: null\n  }\n}\n\nexport default defineComponent({\n  name: 'Upload',\n  components: {\n    Button,\n    Icon,\n    UploadList\n  },\n  props: uploadProps,\n  emits: ['update:file-list'],\n  setup(_props, { slots, emit, expose }) {\n    const { idFor, state, disabled, loading, size, validateField, getFieldValue, setFieldValue } =\n      useFieldStore<UploadFileOptions[]>(focus)\n\n    const props = useProps('upload', _props, {\n      state: createStateProp(state),\n      locale: null,\n      url: {\n        default: '',\n        static: true\n      },\n      fileList: {\n        default: () => getFieldValue([]),\n        static: true\n      },\n      multiple: false,\n      tip: '',\n      accept: null,\n      filter: '',\n      maxSize: {\n        default: null,\n        validator: value => value >= 0\n      },\n      field: 'file',\n      data: () => ({}),\n      headers: () => ({}),\n      withCredentials: false,\n      manual: false,\n      hiddenFiles: false,\n      countLimit: {\n        default: 0,\n        validator: value => value >= 0\n      },\n      allowDrag: false,\n      onBeforeUpload: {\n        default: null,\n        isFunc: true\n      },\n      onBeforeSelect: {\n        default: null,\n        isFunc: true\n      },\n      iconRenderer: {\n        default: null,\n        isFunc: true\n      },\n      selectToAdd: false,\n      listType: {\n        default: 'name',\n        validator: value => uploadListTypes.includes(value)\n      },\n      block: false,\n      loadingText: null,\n      directory: false,\n      pathField: 'path',\n      disabledClick: false,\n      buttonLabel: null,\n      disabled: () => disabled.value,\n      loading: () => loading.value,\n      loadingIcon: createIconProp(),\n      loadingLock: false,\n      loadingEffect: null,\n      image: false,\n      defaultFiles: () => [],\n      // canPreview: don't set, using UploadFile default value\n      listStyle: null,\n      name: {\n        default: '',\n        static: true\n      }\n    })\n\n    const nh = useNameHelper('upload')\n    const locale = useLocale('upload', toRef(props, 'locale'))\n    const icons = useIcons()\n    const fileStates = ref([]) as Ref<UploadFileState[]>\n    const isDragOver = ref(false)\n\n    const input = ref<HTMLInputElement>()\n    const button = ref<InstanceType<typeof Button>>()\n    const panel = ref<HTMLElement>()\n\n    const readonly = computed(() => props.loading && props.loadingLock)\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        nh.bm(`type-${props.listType}`),\n        {\n          [nh.bm('inherit')]: props.inherit,\n          [nh.bm(props.state)]: props.state !== 'default',\n          [nh.bm('multiple')]: props.multiple,\n          [nh.bm('drag')]: props.allowDrag,\n          [nh.bm('to-add')]: props.selectToAdd,\n          [nh.bm('block')]: props.block,\n          [nh.bm('drag-only')]: props.disabledClick,\n          [nh.bm('image')]: props.image,\n          [nh.bm('has-file')]: !props.hiddenFiles && renderFiles.value.length,\n          [nh.bm('readonly')]: readonly.value,\n          [nh.bm('loading')]: props.loading\n        }\n      ]\n    })\n    const controlClass = computed(() => {\n      if (props.image) {\n        return {\n          [nh.be('image-control')]: true,\n          [nh.bem('image-control', 'drag-over')]: isDragOver.value,\n          [nh.bem('image-control', 'disabled')]: props.disabled\n        }\n      }\n\n      return {\n        [nh.be('control')]: true,\n        [nh.bem('control', 'drag-over')]: isDragOver.value\n      }\n    })\n    const acceptString = computed(() => {\n      const accept = props.image ? (props.accept?.length ? props.accept : 'image/*') : props.accept\n\n      return accept && (typeof accept === 'string' ? accept : accept.join())\n    })\n    const defaultList = computed(() => props.defaultFiles.map(file => createFileState(file)))\n    const renderFiles = computed(() => {\n      return defaultList.value\n        .concat(fileStates.value)\n        .filter(item => item.status !== StatusType.DELETE)\n    })\n\n    watch(\n      () => props.fileList,\n      value => {\n        const idMap = new Map<string | number, UploadFileState>()\n        const fileMap = new Map<UploadSourceFile, UploadFileState>()\n\n        for (const state of fileStates.value) {\n          if (isDefined(state.id)) {\n            idMap.set(state.id, state)\n          }\n\n          if (state.source) {\n            fileMap.set(state.source, state)\n          }\n        }\n\n        fileStates.value = (value || []).map(file =>\n          createFileState(\n            file,\n            file.id ? idMap.get(file.id) : file.source ? fileMap.get(file.source) : undefined\n          )\n        )\n        syncInputFiles()\n      },\n      { immediate: true, deep: true }\n    )\n\n    expose({\n      isDragOver,\n      execute,\n      handleDelete,\n      focus,\n      blur: () => {\n        button.value?.$el.blur()\n        panel.value?.blur()\n      }\n    })\n\n    function focus(options?: FocusOptions) {\n      if (button.value?.$el) {\n        button.value.$el.focus(options)\n      } else {\n        panel.value?.focus(options)\n      }\n    }\n\n    function handleClick() {\n      if (props.disabled || readonly.value) return\n\n      !props.disabledClick && input.value?.click()\n    }\n\n    function handleKeyDown(event: KeyboardEvent) {\n      const key = event.code || event.key\n\n      if (key === 'Enter' || key === 'Space') {\n        handleClick()\n      }\n    }\n\n    function handleInputChange(event: Event) {\n      const target = event.target as HTMLInputElement\n\n      if (target?.files) {\n        handleFilesChange(target.files)\n      }\n    }\n\n    async function handleFilesChange(inputFiles: FileList | UploadSourceFile[]) {\n      const originFiles = Array.from(inputFiles || []) as UploadSourceFile[]\n      const shouldAdd = props.selectToAdd\n      const files = shouldAdd ? Array.from(fileStates.value) : []\n\n      for (const file of originFiles) {\n        if (!file.path) {\n          file.path = file.webkitRelativePath\n        }\n\n        let fileState = getFileStateBySource(file)\n\n        if (fileState) {\n          if (\n            fileState.status !== StatusType.SUCCESS &&\n            fileState.status !== StatusType.UPLOADING\n          ) {\n            fileState.status = StatusType.PENDING\n          }\n        } else {\n          fileState = createFileState({\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            source: file\n          })\n        }\n\n        if (typeof props.onBeforeSelect === 'function') {\n          let result = props.onBeforeSelect(fileState, files)\n\n          if (isPromise(result)) {\n            result = await result\n          }\n\n          if (isFalse(result)) continue\n        }\n\n        if (!files.includes(fileState)) {\n          files.push(fileState)\n        }\n      }\n\n      const countLimit = props.countLimit\n\n      if (countLimit > 0 && files.length > countLimit) {\n        const exceedFiles = files.slice(countLimit)\n\n        emitEvent(props.onExceed, exceedFiles)\n        fileStates.value = files.slice(0, countLimit)\n      } else {\n        fileStates.value = files\n      }\n\n      syncInputFiles()\n      emitChangeEvent()\n\n      if (!props.manual) {\n        execute()\n      }\n    }\n\n    function emitChangeEvent() {\n      emit('update:file-list', fileStates.value)\n      setFieldValue(fileStates.value)\n      emitEvent(props.onChange, fileStates.value)\n      validateField()\n    }\n\n    function getFileStateBySource(file: UploadSourceFile) {\n      const { name, size, type } = file\n      const path = file.path || file.webkitRelativePath\n\n      return fileStates.value.find(({ source }) => {\n        return (\n          source &&\n          (source.path || source.webkitRelativePath) === path &&\n          source.name === name &&\n          source.size === size &&\n          source.type === type\n        )\n      })\n    }\n\n    function createFileState(\n      file: UploadFileOptions,\n      defaults = getDefaultFileState()\n    ): UploadFileState {\n      const { id, name, size, type, base64, status, percentage, source, url, path } = file\n\n      Object.assign(defaults, {\n        id: id ?? defaults.id ?? randomString(),\n        name: name || '',\n        size: size || 0,\n        type: type || '',\n        base64: base64 || null,\n        status: status ?? StatusType.PENDING,\n        percentage: percentage || 0,\n        source: source || null,\n        url: url || null,\n        path: path || '',\n        xhr: null,\n        response: null,\n        error: null\n      })\n\n      return defaults\n    }\n\n    function getFileExtension(file: UploadFileState) {\n      return file.name.split('.').pop()!.toLocaleLowerCase()\n    }\n\n    async function execute() {\n      if (!props.url || !verifyFiles()) {\n        return false\n      }\n\n      const uploadFiles = fileStates.value.filter(\n        item => item.status !== StatusType.SUCCESS && item.status !== StatusType.DELETE\n      )\n      const requests: Promise<any>[] = []\n\n      for (const file of uploadFiles) {\n        requests.push(uploadFile(file).catch(noop))\n      }\n\n      return await Promise.all(requests).then(responses => responses.filter(response => response))\n    }\n\n    async function uploadFile(file: UploadFileState) {\n      if (typeof props.onBeforeUpload === 'function') {\n        let result = props.onBeforeUpload(\n          file,\n          fileStates.value.filter(\n            item => item.status !== StatusType.SUCCESS && item.status !== StatusType.DELETE\n          )\n        )\n\n        if (isPromise(result)) {\n          try {\n            result = await result\n          } catch (e) {\n            return\n          }\n        }\n\n        if (isFalse(result)) return\n\n        if (result instanceof Blob) {\n          if (result instanceof File) {\n            file.source = result\n          } else {\n            file.source = new File([result], file.name, {\n              type: file.type\n            })\n          }\n        }\n      }\n\n      if (!file.source) return\n\n      file.status = StatusType.UPLOADING\n\n      const { url, headers, withCredentials, data, field, pathField } = props\n\n      return await new Promise((resolve, reject) => {\n        file.xhr = upload({\n          url,\n          headers,\n          withCredentials,\n          data,\n          field,\n          pathField,\n          file: file.source!,\n          onProgress: percent => {\n            handleProgress(percent, file)\n          },\n          onSuccess: response => {\n            handleSuccess(response, file)\n            resolve(response)\n          },\n          onError: error => {\n            handleError(error, file)\n            reject(error)\n          },\n          onAbort: () => {\n            resolve(null)\n          }\n        })\n      })\n    }\n\n    function verifyFiles() {\n      const limitSize = props.maxSize ? props.maxSize * 1024 : Infinity\n      const filter =\n        typeof props.filter === 'string'\n          ? props.filter\n            ? [props.filter]\n            : []\n          : props.filter.filter(item => item)\n\n      for (let i = 0, len = fileStates.value.length; i < len; ++i) {\n        const file = fileStates.value[i]\n        const extension = getFileExtension(file)\n\n        if (filter.length && !filter.includes(extension)) {\n          emitEvent(props.onFilterError, file)\n\n          return false\n        }\n\n        if (file.size > limitSize) {\n          emitEvent(props.onSizeError, file)\n\n          return false\n        }\n      }\n\n      return true\n    }\n\n    function handleDelete(file: UploadFileState) {\n      file.status = StatusType.DELETE\n\n      if (file.xhr) {\n        file.xhr.abort()\n      }\n\n      syncInputFiles()\n      emitEvent(props.onDelete, file)\n      emitChangeEvent()\n    }\n\n    function handlePreview(file: UploadFileState) {\n      emitEvent(props.onPreview, file)\n    }\n\n    function syncInputFiles() {\n      if (!isClient) return\n\n      const dataTransfer = new DataTransfer()\n      fileStates.value = fileStates.value.filter(item => item.status !== StatusType.DELETE)\n\n      fileStates.value.forEach(item => {\n        item.source && dataTransfer.items.add(item.source)\n      })\n\n      if (input.value) {\n        input.value.files = dataTransfer.files\n      }\n    }\n\n    function handleProgress(percent: number, file: UploadFileState) {\n      if (file.status === StatusType.DELETE) return\n\n      file.percentage = percent\n\n      emitEvent(props.onProgress, file, percent)\n      emitChangeEvent()\n    }\n\n    function handleSuccess(response: any, file: UploadFileState) {\n      if (file.status === StatusType.DELETE) return\n\n      file.status = StatusType.SUCCESS\n      file.response = response\n      file.error = null\n\n      emitEvent(props.onSuccess, file, response)\n      emitChangeEvent()\n    }\n\n    function handleError(error: UploadHttpError, file: UploadFileState) {\n      if (file.status === StatusType.DELETE) return\n\n      file.status = StatusType.FAIL\n      file.error = error\n\n      emitEvent(props.onError, file, error)\n      emitChangeEvent()\n    }\n\n    let dragTimer: ReturnType<typeof setTimeout>\n\n    onBeforeUnmount(() => {\n      clearTimeout(dragTimer)\n    })\n\n    async function handleDrop(event: DragEvent) {\n      if (!props.allowDrag || props.disabled || readonly.value) return\n\n      clearTimeout(dragTimer)\n      event.preventDefault()\n\n      isDragOver.value = false\n\n      if (event.dataTransfer) {\n        const files = await collectDropFiles(event.dataTransfer)\n\n        files.length && handleFilesChange(files)\n      }\n    }\n\n    function handleDragEnter(event: DragEvent) {\n      if (!props.allowDrag || props.disabled || readonly.value) return\n\n      clearTimeout(dragTimer)\n      event.preventDefault()\n\n      isDragOver.value = true\n    }\n\n    function handleDragLeave(event: DragEvent) {\n      if (!props.allowDrag || props.disabled || readonly.value) return\n\n      event.preventDefault()\n\n      dragTimer = setTimeout(() => {\n        isDragOver.value = false\n      }, 100)\n    }\n\n    async function collectDropFiles(dataTransfer: DataTransfer) {\n      const { items, files } = dataTransfer\n\n      if (!items.length) return []\n\n      const collectedFiles: File[] = []\n      const dirLoop: Array<{ dir: DirectoryEntity, prefix: string }> = []\n      const processes: Promise<void>[] = []\n\n      for (let i = 0, len = items.length; i < len; ++i) {\n        const entity = items[i].webkitGetAsEntry?.()\n\n        // 内核不支持\n        if (!entity) return files\n\n        if (entity.isFile) {\n          collectedFiles.push(files[i])\n        } else {\n          dirLoop.push({ dir: entity as unknown as DirectoryEntity, prefix: '' })\n          // directories.push(entity as unknown as DirectoryEntity)\n        }\n      }\n\n      if (!props.directory || !dirLoop.length) return collectedFiles\n\n      const fileEntries: Array<{ entry: DirectoryEntity, prefix: string }> = []\n\n      let countLimit = props.countLimit - (props.selectToAdd ? fileStates.value.length : 0)\n      countLimit = Math.round(countLimit) > 0 ? countLimit : 100\n\n      const doProcess = () => {\n        while (dirLoop.length) {\n          const loop = dirLoop.shift()!\n          const dir = loop.dir\n          const prefix = loop.prefix ? `${loop.prefix}/${dir.name}` : dir.name\n          const reader = dir.createReader()\n\n          processes.push(\n            new Promise<void>(resolve => {\n              reader.readEntries(entries => {\n                entries.forEach(entry => {\n                  if (entry.isFile) {\n                    fileEntries.push({ entry, prefix })\n                  } else {\n                    dirLoop.push({ dir: entry, prefix })\n                  }\n                })\n\n                resolve()\n              })\n            })\n          )\n        }\n      }\n\n      while (true) {\n        doProcess()\n        await Promise.all(processes)\n\n        if (!dirLoop.length || fileEntries.length >= countLimit) {\n          break\n        }\n      }\n\n      if (fileEntries.length > 0) {\n        return collectedFiles.concat(\n          await Promise.all(\n            fileEntries.map(\n              ({ entry, prefix }) =>\n                new Promise<File>(resolve =>\n                  entry.file(file => {\n                    file.path = `${prefix}/${file.name}`\n                    resolve(file)\n                  })\n                )\n            )\n          )\n        )\n      }\n\n      return collectedFiles\n    }\n\n    function preventDefault(event: Event) {\n      event.preventDefault()\n    }\n\n    function renderNormalAction() {\n      return !props.allowDrag && !props.disabledClick\n        ? (\n          <>\n            <Button\n              ref={button}\n              inherit\n              size={size.value}\n              type={props.state}\n              disabled={props.disabled}\n              loading={props.loading}\n            >\n              {{\n                default: () => props.buttonLabel ?? locale.value.upload,\n                icon: () => <Icon {...icons.value.upload} />,\n                loading: () => (\n                  <Icon\n                    {...icons.value.loading}\n                    class={nh.be('loading-icon')}\n                    effect={props.loadingEffect || icons.value.loading.effect}\n                    icon={props.loadingIcon || icons.value.loading.icon}\n                    label={'loading'}\n                  />\n                )\n              }}\n            </Button>\n            {slots.tip\n              ? renderSlot(slots, 'tip')\n              : props.tip && <p class={nh.be('tip')}>{props.tip}</p>}\n          </>\n          )\n        : (\n          <div\n            ref={panel}\n            class={[nh.be('drag-panel'), props.disabled && nh.bem('drag-panel', 'disabled')]}\n            tabindex={0}\n          >\n            <Icon\n              {...icons.value.uploadCloud}\n              class={[nh.be('cloud'), props.disabled && nh.bem('cloud', 'disabled')]}\n              scale={+(icons.value.uploadCloud.scale || 1) * 4}\n            />\n            {slots.tip\n              ? (\n                  renderSlot(slots, 'tip')\n                )\n              : (\n                <p class={nh.be('tip')}>{props.tip || locale.value.dragOrClick}</p>\n                )}\n            <Icon\n              {...icons.value.loading}\n              class={nh.be('loading-icon')}\n              effect={props.loadingEffect || icons.value.loading.effect}\n              icon={props.loadingIcon || icons.value.loading.icon}\n              label={'loading'}\n              style={{ opacity: props.loading ? '100%' : '0%' }}\n            />\n          </div>\n          )\n    }\n\n    function renderImageAction() {\n      return (\n        <div class={[nh.be('image-action'), props.disabled && nh.bem('image-action', 'disabled')]}>\n          {slots.default\n            ? (\n                renderSlot(slots, 'default', {\n                  isDragOver: (props.allowDrag || props.disabledClick) && isDragOver.value\n                })\n              )\n            : (\n              <>\n                {props.loading\n                  ? (\n                    <Icon\n                      {...icons.value.loading}\n                      class={nh.be('loading-icon')}\n                      effect={props.loadingEffect || icons.value.loading.effect}\n                      icon={props.loadingIcon || icons.value.loading.icon}\n                      label={'loading'}\n                      style={{ marginBottom: '6px' }}\n                    />\n                    )\n                  : (\n                    <Icon\n                      {...icons.value.plus}\n                      class={[nh.be('cloud'), props.disabled && nh.bem('cloud', 'disabled')]}\n                      scale={+(icons.value.plus.scale || 1) * 1.2}\n                      style={{ marginBottom: '6px' }}\n                    />\n                    )}\n                <span>{props.buttonLabel ?? locale.value.upload}</span>\n              </>\n              )}\n        </div>\n      )\n    }\n\n    function renderControl() {\n      const HtmlTag = props.image ? 'li' : 'div'\n\n      return (\n        <HtmlTag\n          class={controlClass.value}\n          tabindex={-1}\n          onClick={handleClick}\n          onDrop={handleDrop}\n          onDragover={handleDragEnter}\n          onDragleave={handleDragLeave}\n          onKeydown={handleKeyDown}\n        >\n          {!props.disabledClick && (\n            <input\n              ref={input}\n              type={'file'}\n              class={nh.be('input')}\n              disabled={props.disabled}\n              multiple={props.multiple}\n              name={props.name}\n              accept={acceptString.value}\n              webkitdirectory={props.directory}\n              onChange={handleInputChange}\n              onSubmit={preventDefault}\n            />\n          )}\n          {props.image\n            ? renderImageAction()\n            : slots.default\n              ? renderSlot(slots, 'default', {\n                isDragOver: (props.allowDrag || props.disabledClick) && isDragOver.value\n              })\n              : renderNormalAction()}\n        </HtmlTag>\n      )\n    }\n\n    function renderFileList() {\n      return (\n        <UploadList\n          inherit\n          files={renderFiles.value}\n          select-to-add={props.selectToAdd}\n          type={props.image ? 'thumbnail' : props.listType}\n          icon-renderer={props.iconRenderer}\n          loading-text={props.loadingText}\n          can-preview={props.canPreview}\n          style={props.listStyle}\n          onDelete={handleDelete}\n          onPreview={handlePreview}\n        >\n          {{\n            item: (params: any) => renderSlot(slots, 'item', params),\n            icon: (params: any) => renderSlot(slots, 'icon', params),\n            suffix: () =>\n              props.image && (!props.countLimit || renderFiles.value.length < props.countLimit)\n                ? renderControl()\n                : null\n          }}\n        </UploadList>\n      )\n    }\n\n    return () => (\n      <div id={idFor.value} class={className.value}>\n        {!props.image && renderControl()}\n        {!props.hiddenFiles && renderFileList()}\n      </div>\n    )\n  },\n  methods: {\n    execute: noop as () => Promise<false | any[]>,\n    handleDelete: noop as (file: UploadFileState) => void,\n    focus: noop as (options?: FocusOptions) => void,\n    blur: noop as () => void\n  }\n})\n", "import { booleanProp, buildProps, eventProp } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { FullScreenType } from '@/components/full-screen'\nimport type { IconEffect } from '@/components/icon'\nimport type { ClassType, ConfigurableProps } from '@vexip-ui/config'\nimport type {\n  VideoControlLayout,\n  VideoControlOption,\n  VideoControlType,\n  // VideoKernel,\n  VideoPlaybackRate,\n  VideoSegment,\n  VideoShortcutOptions\n} from './symbol'\n\nexport const videoProps = buildProps({\n  src: String,\n  srcList: Array as PropType<string[]>,\n  noControls: booleanProp,\n  videoAttrs: Object,\n  time: Number,\n  volume: Number,\n  playbackRate: Number,\n  playbackRates: Array as PropType<(number | VideoPlaybackRate)[]>,\n  // kernel: Object as PropType<VideoKernel>,\n  controlLayout: Object as PropType<VideoControlLayout>,\n  poster: String,\n  video: Object as PropType<HTMLVideoElement>,\n  segments: Array as PropType<(number | VideoSegment)[]>,\n  loading: booleanProp,\n  loadingIcon: Object,\n  loadingEffect: String as PropType<IconEffect>,\n  shortcuts: Object as PropType<VideoShortcutOptions>,\n  onPlay: eventProp(),\n  onPause: eventProp(),\n  onEnded: eventProp(),\n  onTimeChange: eventProp<(time: number) => void>(),\n  onVolumeChange: eventProp<(volume: number) => void>(),\n  onRateChange: eventProp<(rate: number) => void>(),\n  onToggleFlip: eventProp<(flip: boolean) => void>(),\n  onTogglePip: eventProp<(pip: boolean) => void>(),\n  onToggleFull: eventProp<(full: false | FullScreenType) => void>(),\n  onPrev: eventProp(),\n  onNext: eventProp(),\n  onRefresh: eventProp()\n})\n\nexport type VideoProps = ExtractPropTypes<typeof videoProps>\nexport type VideoCProps = ConfigurableProps<ExtractPropTypes<typeof videoProps>>\n\nexport const videoControlProps = buildProps({\n  type: String as PropType<VideoControlType>,\n  label: String,\n  tipClass: [String, Array, Object] as PropType<ClassType>,\n  disabled: booleanProp,\n  shortcut: String,\n  focusable: booleanProp,\n  value: [Number, String],\n  options: Array as PropType<(string | VideoControlOption)[]>,\n  onClick: eventProp(),\n  onEnter: eventProp(),\n  onLeave: eventProp(),\n  onFocus: eventProp<(event: FocusEvent) => void>(),\n  onBlur: eventProp<(event: FocusEvent) => void>(),\n  onSelect: eventProp<(option: VideoControlOption) => void>()\n})\n\nexport type VideoControlProps = ExtractPropTypes<typeof videoControlProps>\nexport type VideoControlCProps = ConfigurableProps<ExtractPropTypes<typeof videoControlProps>>\n", "import type { InjectionKey } from 'vue'\n\nexport type VideoPresetControl =\n  | 'play'\n  | 'play-prev'\n  | 'play-next'\n  | 'refresh'\n  | 'timer'\n  | 'playback-rate'\n  | 'flip'\n  | 'volume'\n  | 'pip'\n  | 'full-window'\n  | 'full-browser'\nexport type VideoShortcutOptions = Partial<Record<VideoPresetControl, string>>\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type VideoControlName = VideoPresetControl | (string & {})\nexport type VideoControlConfig = VideoControlName | [VideoControlName, any]\n\nexport interface VideoControlLayout {\n  left?: VideoControlConfig[],\n  center?: VideoControlConfig[],\n  right?: VideoControlConfig[]\n}\n\nexport interface VideoPlaybackRate {\n  label?: string,\n  value: number\n}\n\nexport type VideoControlType = 'button' | 'select' | 'panel'\n\nexport interface VideoControlOption {\n  value: string | number,\n  label?: string,\n  selectedLabel?: string,\n  disabled?: boolean,\n  divided?: boolean,\n  title?: string\n}\n\nexport interface VideoSegment {\n  time: number,\n  title?: string\n}\n\n// export interface VideoKernel {\n//   play: () => void,\n//   pause: () => void,\n//   mute: () => void,\n//   unmute: () => void,\n//   prev: () => void,\n//   next: () => void,\n//   refresh: () => void | boolean\n// }\n\nexport interface VideoState {\n  placeId?: string,\n  iconScale: number,\n  addShortcut: (key: string, cb: () => void) => () => void\n}\n\nconst defaultLayout: Required<VideoControlLayout> = {\n  left: ['play-prev', 'play', 'play-next', 'refresh', 'timer'],\n  center: [],\n  right: ['playback-rate', 'volume', 'flip', 'pip', 'full-window', 'full-browser']\n}\n\nfor (const key of Object.keys(defaultLayout) as (keyof VideoControlLayout)[]) {\n  defaultLayout[key] = Object.freeze(defaultLayout[key]) as any\n}\n\nexport const videoDefaultControlLayout = Object.freeze(defaultLayout)\n\nexport const videoDefaultShortcuts = Object.freeze({\n  play: 'Space',\n  'play-prev': 'PageUp',\n  'play-next': 'PageDown',\n  refresh: 'R',\n  flip: 'C',\n  volume: 'M',\n  pip: 'P',\n  'full-window': 'G',\n  'full-browser': 'F'\n})\n\nexport const VIDEO_STATE: InjectionKey<VideoState> = Symbol('VIDEO_STATE')\n", "<script setup lang=\"ts\">\nimport { Option } from '@/components/option'\nimport { Tooltip } from '@/components/tooltip'\n\nimport { computed, inject, onBeforeUnmount, ref, watch } from 'vue'\n\nimport { emitEvent, useNameHelper, useProps } from '@vexip-ui/config'\nimport { listToMap } from '@vexip-ui/utils'\nimport { videoControlProps } from './props'\nimport { VIDEO_STATE } from './symbol'\n\nimport type { VideoControlOption } from './symbol'\n\ndefineOptions({ name: 'VideoControl' })\n\nconst _props = defineProps(videoControlProps)\nconst props = useProps('videoControl', _props, {\n  type: 'button',\n  label: {\n    static: true,\n    default: ''\n  },\n  tipClass: null,\n  disabled: false,\n  shortcut: {\n    static: true,\n    default: ''\n  },\n  focusable: false,\n  value: null,\n  options: () => []\n})\n\ndefineSlots<{\n  selected: (params: { option: VideoControlOption }) => any,\n  default: () => any,\n  label: () => any,\n  panel: () => any,\n  option: (params: { option: VideoControlOption, index: number, selected: boolean }) => any\n}>()\n\nconst nh = useNameHelper('video')\n\nconst videoState = inject(VIDEO_STATE)!\n\nconst currentValue = ref(props.value)\n\nconst className = computed(() => {\n  return {\n    [nh.be('control')]: true,\n    [nh.bem('control', props.type)]: props.type !== 'button',\n    [nh.bem('control', 'disabled')]: props.disabled\n  }\n})\nconst tipClass = computed(() => {\n  return props.type === 'button' ? nh.be('control-tip') : nh.be('control-panel')\n})\nconst objectOptions = computed(() => {\n  return props.options.map(option => {\n    return typeof option === 'string' ? { value: option } : option\n  })\n})\nconst optionMap = computed(() => listToMap(objectOptions.value, 'value', undefined, true))\nconst currentOption = computed(() => optionMap.value.get(currentValue.value))\n\nlet removeShortcut: (() => void) | undefined\n\nwatch(\n  () => props.shortcut,\n  value => {\n    removeShortcut?.()\n\n    if (value) {\n      removeShortcut = videoState.addShortcut(value, handleClick)\n    }\n  },\n  { immediate: true }\n)\n\nonBeforeUnmount(() => removeShortcut?.())\n\nfunction handleClick() {\n  !props.disabled && emitEvent(props.onClick)\n}\n\nfunction handleSelect(option: VideoControlOption) {\n  if (props.disabled || option.disabled) return\n\n  currentValue.value = option.value\n  emitEvent(props.onSelect, option)\n}\n</script>\n\n<template>\n  <div :class=\"className\">\n    <Tooltip\n      :trigger=\"props.focusable ? 'hover-focus' : 'hover'\"\n      raw\n      shift\n      :transfer=\"videoState.placeId && `#${videoState.placeId}`\"\n      :tip-class=\"[tipClass, props.tipClass]\"\n      :no-hover=\"props.type === 'button'\"\n      :disabled=\"props.type === 'button' ? !props.label : props.disabled\"\n      @tip-enter=\"emitEvent(props.onEnter)\"\n      @tip-leave=\"emitEvent(props.onLeave)\"\n    >\n      <template #trigger>\n        <button\n          :class=\"nh.be('control-button')\"\n          type=\"button\"\n          @focus=\"emitEvent(props.onFocus, $event)\"\n          @blur=\"emitEvent(props.onBlur, $event)\"\n          @click=\"handleClick\"\n        >\n          <slot v-if=\"currentOption\" name=\"selected\" :option=\"currentOption\">\n            {{ currentOption.selectedLabel || currentOption.label || currentOption.value }}\n          </slot>\n          <slot v-else></slot>\n        </button>\n      </template>\n      <template v-if=\"props.type === 'button'\">\n        <span :class=\"nh.be('control-name')\">\n          <slot name=\"label\">\n            {{ props.label }}\n            <span v-if=\"props.shortcut\" :class=\"nh.be('control-shortcut')\">\n              {{ `(${props.shortcut})` }}\n            </span>\n          </slot>\n        </span>\n      </template>\n      <slot v-else name=\"panel\">\n        <ul v-if=\"props.type === 'select'\" :class=\"nh.be('control-options')\">\n          <Option\n            v-for=\"(option, index) in objectOptions\"\n            :key=\"option.value\"\n            :class=\"{\n              [nh.be('control-option')]: true,\n              [nh.bem('control-option', 'selected')]: option.value === currentValue\n            }\"\n            :label=\"option.label\"\n            :value=\"option.value\"\n            :disabled=\"option.disabled\"\n            :divided=\"option.disabled\"\n            :title=\"option.title\"\n            no-hover\n            @select=\"handleSelect(option)\"\n          >\n            <slot\n              name=\"option\"\n              :option=\"option\"\n              :index=\"index\"\n              :selected=\"option.value === currentValue\"\n            >\n              {{ option.label || option.value }}\n            </slot>\n          </Option>\n        </ul>\n      </slot>\n    </Tooltip>\n  </div>\n</template>\n", "import { doubleDigits, leaveNumber } from '@vexip-ui/utils'\n\nimport type { IconOptions, IconValue } from '@vexip-ui/config'\n\nexport function formatSeconds(seconds: number) {\n  if (seconds <= 0) return '00:00'\n\n  const remainders = leaveNumber(Math.ceil(seconds), 60, 2)\n\n  if (remainders.length < 2) {\n    remainders.unshift(0)\n  }\n\n  return remainders.length < 3\n    ? remainders.map(doubleDigits).join(':')\n    : remainders.map((r, i) => (i ? doubleDigits(r) : r)).join(':')\n}\n\nexport function mergeIconScale(scale: number, icon: IconOptions & { icon: IconValue }) {\n  return {\n    ...icon,\n    scale: +(icon.scale || 1) * scale\n  }\n}\n", "<script setup lang=\"ts\">\nimport { ResizeObserver } from '@/components/resize-observer'\nimport { Slider } from '@/components/slider'\n\nimport { computed, ref } from 'vue'\n\nimport { getStepByWord, useLocale, useNameHelper } from '@vexip-ui/config'\nimport { useListener, useSetTimeout } from '@vexip-ui/hooks'\nimport { boundRange, throttle } from '@vexip-ui/utils'\nimport { formatSeconds } from './helper'\n\nimport type { PropType } from 'vue'\nimport type { SliderExposed } from '@/components/slider'\nimport type { VideoSegment } from './symbol'\n\ninterface PointState {\n  start: number,\n  startPercent: number,\n  end: number,\n  endPercent: number,\n  duration: number,\n  durationPercent: number,\n  width: number\n}\n\ndefineOptions({ name: 'VideoProgress' })\n\nconst props = defineProps({\n  time: {\n    type: Number,\n    default: 0\n  },\n  duration: {\n    type: Number,\n    default: 0\n  },\n  segments: {\n    type: Array as PropType<VideoSegment[]>,\n    default: () => []\n  },\n  noPreview: {\n    type: Boolean,\n    default: false\n  },\n  previewSrc: {\n    type: String,\n    default: ''\n  }\n})\n\nconst emit = defineEmits(['change'])\n\nconst nh = useNameHelper('video')\nconst locale = useLocale('video')\n\nconst { timer } = useSetTimeout()\n\nconst slidTime = ref(0)\nconst hovered = ref(false)\nconst hoveredTime = ref(0)\nconst indicatorLeft = ref(0)\nconst previewLeft = ref(0)\n\nlet paddingX = [0, 0]\nlet sliderWidth = 100\nlet previewWidth = 60\n\nconst wrapper = ref<HTMLElement>()\nconst slider = ref<SliderExposed>()\nconst sliderEl = computed(() => slider.value?.$el as HTMLElement | undefined)\nconst preview = ref<HTMLElement>()\n\nconst sliding = computed(() => !!slider.value?.sliding[1])\nconst percent = computed(() => {\n  return props.duration ? ((sliding.value ? slidTime.value : props.time) / props.duration) * 100 : 0\n})\nconst className = computed(() => {\n  return {\n    [nh.be('progress')]: true,\n    [nh.bem('progress', 'sliding')]: sliding.value,\n    [nh.bem('progress', 'disabled')]: props.duration <= 0\n  }\n})\nconst points = computed<PointState[]>(() => {\n  const duration = Math.max(1, props.duration)\n\n  let times = props.segments.map(segment => segment.time)\n\n  if (!times.length) times = [0, duration]\n\n  times = times.at(-1) === duration ? times : [...times, duration]\n  times = times[0] === 0 ? times : [0, ...times]\n\n  const points: PointState[] = []\n\n  for (let i = 0, len = times.length - 1; i < len; ++i) {\n    const start = times[i]\n    const end = times[i + 1]\n    const pointDuration = end - start\n\n    points.push({\n      start,\n      startPercent: (start / duration) * 100,\n      end,\n      endPercent: (end / duration) * 100,\n      duration: pointDuration,\n      durationPercent: (pointDuration / duration) * 100,\n      width: ((end - start) / duration) * 100\n    })\n  }\n\n  return points\n})\nconst segmentLabel = computed(() => {\n  const time = hoveredTime.value\n  const segments = props.segments\n\n  if (!segments.length) return ''\n\n  let index = -1\n\n  if (time <= 0) {\n    index = 0\n  } else {\n    for (let i = 1, len = segments.length; i < len; ++i) {\n      if (segments[i].time > time) {\n        index = i - 1\n        break\n      }\n    }\n  }\n\n  if (index < 0) {\n    index = segments.length - 1\n  }\n\n  const title = segments[index]?.title || getStepByWord(locale.value.chapterCount, index + 1)\n\n  return title && ` (${title})`\n})\n\nuseListener(sliderEl, 'pointerenter', () => {\n  clearTimeout(timer.hover)\n\n  timer.hover = setTimeout(() => {\n    hovered.value = true\n  }, 100)\n})\nuseListener(sliderEl, 'pointerleave', () => {\n  clearTimeout(timer.hover)\n\n  timer.hover = setTimeout(() => {\n    hovered.value = false\n  }, 100)\n})\nuseListener(\n  sliderEl,\n  'pointermove',\n  throttle((event: PointerEvent) => {\n    if (!sliding.value) {\n      processMoveOnTrack(event)\n    }\n  })\n)\n\nfunction processMoveOnTrack(event: PointerEvent) {\n  if (!sliderEl.value) return\n\n  const offsetX = boundRange(\n    event.clientX - sliderEl.value.getBoundingClientRect().left,\n    0,\n    sliderWidth\n  )\n\n  hoveredTime.value = (offsetX / sliderWidth) * props.duration\n  indicatorLeft.value = offsetX + paddingX[0]\n  previewLeft.value = boundRange(\n    offsetX - previewWidth * 0.5 + paddingX[0],\n    0,\n    sliderWidth - previewWidth + paddingX[0] + paddingX[1]\n  )\n}\n\nfunction onSliderResize(entry: ResizeObserverEntry) {\n  if (!wrapper.value) return\n\n  const style = getComputedStyle(wrapper.value)\n\n  paddingX = [parseFloat(style.paddingLeft), parseFloat(style.paddingRight)]\n  sliderWidth = entry.borderBoxSize?.[0]?.inlineSize ?? entry.contentRect.width\n}\n\nfunction onPreviewResize(entry: ResizeObserverEntry) {\n  previewWidth = entry.borderBoxSize?.[0]?.inlineSize ?? entry.contentRect.width\n}\n\nfunction handleChange(permillage: number) {\n  emit('change', (permillage / 1000) * props.duration)\n}\n\nconst onSlideMove = throttle(processMoveOnTrack)\n\nfunction onSlideStart() {\n  slidTime.value = props.time\n\n  document.addEventListener('pointermove', onSlideMove)\n  document.addEventListener('pointerup', onSlideEnd)\n}\n\nfunction onSlideEnd() {\n  document.removeEventListener('pointermove', onSlideMove)\n  document.removeEventListener('pointerup', onSlideEnd)\n}\n</script>\n\n<template>\n  <div ref=\"wrapper\" :class=\"className\">\n    <ResizeObserver :on-resize=\"onSliderResize\">\n      <Slider\n        ref=\"slider\"\n        :class=\"nh.be('progress-slider')\"\n        :value=\"percent * 10\"\n        :max=\"1000\"\n        :vertical=\"false\"\n        :range=\"false\"\n        hide-tip\n        trigger-fade\n        flip-marker\n        :disabled=\"duration <= 0\"\n        @change=\"handleChange\"\n        @pointerdown=\"onSlideStart\"\n      >\n        <template #filler=\"state\">\n          <div\n            v-for=\"(point, index) in points\"\n            :key=\"index\"\n            :class=\"nh.be('progress-segment')\"\n            :style=\"{ width: `${point.width}%` }\"\n          >\n            <div :class=\"nh.be('progress-track')\">\n              <div\n                :class=\"nh.be('progress-filler')\"\n                :style=\"{\n                  visibility: state.percent[1] < point.startPercent ? 'hidden' : undefined,\n                  transform: `translateX(${Math.min(\n                    (Math.max(state.percent[1] - point.startPercent, 0) / point.durationPercent) *\n                      100 -\n                      100,\n                    0\n                  )}%) translateZ(0)`\n                }\"\n              ></div>\n            </div>\n          </div>\n        </template>\n        <template #trigger>\n          <slot name=\"trigger\">\n            <div :class=\"nh.be('progress-trigger')\"></div>\n          </slot>\n        </template>\n      </Slider>\n    </ResizeObserver>\n    <div\n      :class=\"{\n        [nh.be('progress-indicator')]: true,\n        [nh.bem('progress-indicator', 'active')]: hovered && !sliding\n      }\"\n      :style=\"{ transform: `translateX(${indicatorLeft}px) translateZ(0)` }\"\n    ></div>\n    <ResizeObserver v-if=\"!noPreview\" :on-resize=\"onPreviewResize\">\n      <div\n        ref=\"preview\"\n        :class=\"{\n          [nh.be('preview')]: true,\n          [nh.bem('preview', 'has-image')]: previewSrc,\n          [nh.bem('preview', 'active')]: hovered || sliding\n        }\"\n        :style=\"{ transform: `translateX(${previewLeft}px) translateZ(0)` }\"\n      >\n        <slot name=\"preview\">\n          <div v-if=\"previewSrc\" :class=\"nh.be('preview-image')\">\n            <img :src=\"previewSrc\" />\n          </div>\n          <div :class=\"nh.be('preview-time')\">\n            {{ formatSeconds(hoveredTime) + segmentLabel }}\n          </div>\n        </slot>\n      </div>\n    </ResizeObserver>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Input } from '@/components/input'\n\nimport { computed, nextTick, onMounted, ref, watch } from 'vue'\n\nimport { useNameHelper } from '@vexip-ui/config'\nimport { getRangeWidth, isValidNumber, toNumber } from '@vexip-ui/utils'\nimport { formatSeconds } from './helper'\n\ndefineOptions({ name: 'VideoTimer' })\n\nconst props = defineProps({\n  time: {\n    type: Number,\n    default: 0\n  },\n  duration: {\n    type: Number,\n    default: 0\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['change'])\n\nconst nh = useNameHelper('video')\n\nconst currentTime = ref(props.time)\nconst editing = ref(false)\nconst width = ref(84)\nconst inputTime = ref('')\n\nconst input = ref<HTMLInputElement>()\nconst durationEl = ref<HTMLElement>()\n\nconst formattedTime = computed(() => formatSeconds(currentTime.value))\n\nwatch(\n  () => props.time,\n  value => {\n    currentTime.value = value\n  }\n)\nwatch(\n  () => props.disabled,\n  value => {\n    if (value) {\n      editing.value = false\n    }\n  }\n)\n\nonMounted(() => {\n  watch(\n    () => props.duration,\n    () => {\n      nextTick(() => {\n        width.value = durationEl.value ? getRangeWidth(durationEl.value) * 2 + 20 : 84\n      })\n    },\n    { immediate: true }\n  )\n})\n\nfunction handleClick() {\n  if (!props.disabled && !editing.value) {\n    editing.value = true\n    inputTime.value = formattedTime.value\n    nextTick(() => {\n      input.value?.focus()\n    })\n  }\n}\n\nfunction finishInput(confirm: boolean) {\n  editing.value = false\n\n  if (confirm) {\n    const units = inputTime.value.trim().split(':')\n\n    if (units.every(unit => isValidNumber(unit))) {\n      currentTime.value = units\n        .map(toNumber)\n        .reverse()\n        .slice(0, 3)\n        .reduce((seconds, unit, i) => seconds + 60 ** i * unit, 0)\n      currentTime.value = Math.min(currentTime.value, props.duration)\n      emit('change', currentTime.value)\n    }\n  }\n}\n</script>\n\n<template>\n  <div\n    :class=\"[nh.be('control'), nh.be('timer'), props.disabled && nh.bem('control', 'disabled')]\"\n    :style=\"{ width: `${width}px` }\"\n    @click=\"handleClick\"\n  >\n    <Input\n      v-if=\"editing\"\n      ref=\"input\"\n      v-model:value=\"inputTime\"\n      :class=\"nh.be('timer-input')\"\n      size=\"small\"\n      transparent\n      @blur=\"finishInput(false)\"\n      @enter=\"finishInput(true)\"\n    ></Input>\n    <template v-else>\n      <span>\n        {{ formattedTime }}\n      </span>\n      <span :class=\"nh.be('timer-separator')\">/</span>\n      <span ref=\"durationEl\">\n        {{ formatSeconds(duration) }}\n      </span>\n    </template>\n  </div>\n</template>\n", "<script setup lang=\"ts\">\nimport { Icon } from '@/components/icon'\nimport { Slider } from '@/components/slider'\n\nimport { computed, inject, ref, watch } from 'vue'\n\nimport { useIcons, useNameHelper } from '@vexip-ui/config'\nimport VideoControl from './video-control.vue'\nimport { mergeIconScale } from './helper'\nimport { VIDEO_STATE } from './symbol'\n\ndefineOptions({ name: 'VideoVolume' })\n\nconst props = defineProps({\n  volume: {\n    type: Number,\n    default: 1\n  }\n})\n\nconst emit = defineEmits(['change'])\n\nconst nh = useNameHelper('video')\nconst icons = useIcons()\n\nconst videoState = inject(VIDEO_STATE)!\n\nconst currentVolume = ref(props.volume)\nconst muted = ref(false)\n// const visible = ref(true)\n\nconst volumeIcon = computed(() => {\n  return muted.value\n    ? icons.value.volumeMute\n    : currentVolume.value < 0.5\n      ? icons.value.volumeLow\n      : icons.value.volume\n})\n\nwatch(\n  () => props.volume,\n  value => {\n    currentVolume.value = value\n  }\n)\n\ndefineExpose({ toggleMute })\n\nlet prevVolume = currentVolume.value\n\nfunction toggleMute() {\n  if (muted.value) {\n    currentVolume.value = prevVolume <= 0 ? 0.5 : prevVolume\n  } else {\n    prevVolume = currentVolume.value\n    currentVolume.value = 0\n  }\n\n  muted.value = !muted.value\n\n  emit('change', currentVolume.value)\n}\n\nfunction handleSlide(value: number) {\n  value /= 100\n  prevVolume = value\n  currentVolume.value = value\n  muted.value = value <= 0\n\n  emit('change', currentVolume.value)\n}\n</script>\n\n<template>\n  <VideoControl\n    :class=\"nh.be('volume')\"\n    type=\"panel\"\n    :tip-class=\"nh.be('volume-panel')\"\n    @click=\"toggleMute\"\n  >\n    <Icon v-bind=\"mergeIconScale(videoState.iconScale, volumeIcon)\"></Icon>\n    <template #panel>\n      <div :class=\"nh.be('volume-text')\">\n        {{ (currentVolume * 100).toFixed() }}\n      </div>\n      <Slider\n        :value=\"currentVolume * 100\"\n        :class=\"nh.be('volume-slider')\"\n        :min=\"0\"\n        :max=\"100\"\n        vertical\n        hide-tip\n        reverse\n        :range=\"false\"\n        @input=\"handleSlide\"\n      ></Slider>\n    </template>\n  </VideoControl>\n</template>\n", "import { FullScreen } from '@/components/full-screen'\nimport { Icon } from '@/components/icon'\nimport { Progress } from '@/components/progress'\n\nimport {\n  Transition,\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  provide,\n  reactive,\n  ref,\n  renderSlot,\n  shallowReadonly,\n  watch\n} from 'vue'\n\nimport { emitEvent, useIcons, useLocale, useNameHelper, useProps } from '@vexip-ui/config'\nimport VideoControl from './video-control.vue'\nimport VideoProgress from './video-progress.vue'\nimport VideoTimer from './video-timer.vue'\nimport VideoVolume from './video-volume.vue'\nimport { createSlotRender, useListener, useModifier, useSetTimeout } from '@vexip-ui/hooks'\nimport { decide, decimalLength, isClient, noop, toCapitalCase, toNumber } from '@vexip-ui/utils'\nimport { videoProps } from './props'\nimport { VIDEO_STATE, videoDefaultControlLayout, videoDefaultShortcuts } from './symbol'\n\nimport type { FullScreenExposed, FullScreenType } from '@/components/full-screen'\nimport type { VideoControlConfig, VideoPlaybackRate } from './symbol'\n\nexport default defineComponent({\n  name: 'Video',\n  props: videoProps,\n  emits: ['update:src', 'update:time', 'update:volume', 'update:playback-rate'],\n  setup(_props, { slots, emit, expose }) {\n    const props = useProps('video', _props, {\n      src: {\n        static: true,\n        default: ''\n      },\n      srcList: {\n        static: true,\n        default: null\n      },\n      noControls: false,\n      videoAttrs: null,\n      time: {\n        static: true,\n        default: 0\n      },\n      volume: 1,\n      playbackRate: 1,\n      playbackRates: () => [0.5, 1, 1.25, 1.5, 2],\n      // kernel: null,\n      controlLayout: () => videoDefaultControlLayout,\n      poster: '',\n      video: {\n        static: true,\n        default: null\n      },\n      segments: () => [],\n      loading: false,\n      loadingIcon: null,\n      loadingEffect: null,\n      shortcuts: () => ({})\n    })\n\n    const nh = useNameHelper('video')\n    const locale = useLocale('video')\n    const icons = useIcons()\n\n    const { timer } = useSetTimeout()\n\n    const pipEnabled = isClient && document.pictureInPictureEnabled\n\n    const currentSrc = ref(\n      props.src || props.srcList?.[0] || (props.videoAttrs?.src as string) || ''\n    )\n    const playing = ref(false)\n    const currentTime = ref(props.time)\n    const canPlay = ref(false)\n    const duration = ref(0)\n    const currentVolume = ref(props.volume) // 0 ~ 1\n    const pip = ref(false)\n    const stateShow = ref(true)\n    // record the state is invisible (whether finish transition)\n    const stateHidden = ref(false)\n    const currentRate = ref(props.playbackRate)\n    // const loadedData = ref(false)\n    const interacting = ref(false)\n    const hasPlayed = ref(false)\n    const flipped = ref(false)\n    const iconScale = ref(1.3)\n\n    const screen = ref<FullScreenExposed>()\n    const wrapper = computed(() => screen.value?.wrapper as HTMLElement | undefined)\n    const video = ref<HTMLVideoElement>()\n    const volumeRef = ref<InstanceType<typeof VideoVolume>>()\n\n    const placeId = computed(() => screen.value?.placeId)\n    const full = computed<false | FullScreenType>(() => screen.value?.full ?? false)\n    const videoRef = computed<HTMLVideoElement | undefined>(() => video.value || props.video)\n\n    const shortcutRecord = reactive({} as Record<string, () => void>)\n    const shortcuts = computed(() => ({ ...videoDefaultShortcuts, ...props.shortcuts }))\n\n    function addShortcut(key: string, cb: () => void) {\n      if (shortcutRecord[key]) {\n        console.warn(`[vexip-ui:Video] duplicate shortcut key '${key}' and it will be ignored`)\n\n        return noop\n      }\n\n      shortcutRecord[key] = cb\n\n      return () => {\n        delete shortcutRecord[key]\n      }\n    }\n\n    useModifier({\n      target: wrapper,\n      passive: false,\n      onKeyDown: (event, modifier) => {\n        if (event.ctrlKey || event.shiftKey || event.altKey || event.metaKey) return\n\n        decide(\n          [\n            [\n              () => modifier.up,\n              () => (currentVolume.value = Math.min(1, currentVolume.value + 0.05))\n            ],\n            [\n              () => modifier.down,\n              () => (currentVolume.value = Math.max(0, currentVolume.value - 0.05))\n            ],\n            [\n              () => modifier.right,\n              () => (currentTime.value = Math.min(duration.value, currentTime.value + 5))\n            ],\n            [() => modifier.left, () => (currentTime.value = Math.max(0, currentTime.value - 5))],\n            [() => modifier[shortcuts.value.volume || 'M'], () => volumeRef.value?.toggleMute()],\n            ...Object.keys(shortcutRecord).map(key => {\n              return [() => modifier[key], shortcutRecord[key]] as [() => boolean, () => void]\n            })\n          ],\n          { afterMatchAny: modifier.resetAll }\n        )\n      }\n    })\n\n    const className = computed(() => {\n      return [\n        nh.b(),\n        nh.bs('vars'),\n        {\n          [nh.bm('loading')]: props.loading\n        }\n      ]\n    })\n    const playIcon = computed(() => (playing.value ? icons.value.pause : icons.value.play))\n    const stateIcon = computed(() => {\n      return playing.value ? icons.value.pauseState : icons.value.playState\n    })\n    const rateOptions = computed(() => {\n      const rates = props.playbackRates\n        .map(raw => {\n          const rate = typeof raw === 'number' ? { value: raw } : raw\n\n          rate.value = toNumber(rate.value)\n          rate.label =\n            rate.label || `${decimalLength(rate.value) ? rate.value : rate.value.toFixed(1)}x`\n\n          return rate\n        })\n        .filter(rate => rate.value > 0)\n        .sort((prev, next) => next.value - prev.value)\n\n      if (!rates.find(rate => rate.value === 1)) {\n        const index = rates.findIndex(rate => rate.value < 1)\n\n        rates.splice((index + rates.length) % rates.length, 0, { value: 1, label: '1.0x' })\n      }\n\n      return rates\n    })\n    const segments = computed(() => {\n      return props.segments\n        .map(segment => (typeof segment === 'number' ? { time: segment } : segment))\n        .filter(segment => segment.time >= 0 && segment.time <= duration.value)\n        .sort((prev, next) => prev.time - next.time)\n    })\n    const percent = computed(() => {\n      return duration.value ? (currentTime.value / duration.value) * 100 : 0\n    })\n    const srcFullList = computed(() => {\n      const src = props.src || (props.videoAttrs?.src as string) || ''\n\n      if (src && props.srcList && !props.srcList.includes(src)) {\n        return [src].concat(props.srcList)\n      }\n\n      return props.srcList || [src]\n    })\n    const srcIndex = computed(() => {\n      return srcFullList.value ? srcFullList.value.indexOf(currentSrc.value) : -1\n    })\n\n    const slotParams = shallowReadonly(\n      reactive({\n        playing,\n        currentTime,\n        currentVolume,\n        currentRate,\n        interacting,\n        flipped,\n        canPlay,\n        duration,\n        pip,\n        hasPlayed,\n        togglePlaying,\n        togglePip,\n        changeRate,\n        changeTime,\n        changeVolume,\n        toggleFull\n      })\n    )\n\n    watch(\n      () => props.src,\n      value => {\n        resetMetaState()\n        currentSrc.value = value\n      },\n      { flush: 'pre' }\n    )\n    watch(\n      () => props.time,\n      value => {\n        changeTime(value, false)\n      }\n    )\n    watch(\n      () => props.volume,\n      value => {\n        changeVolume(value, false)\n      }\n    )\n    watch(\n      () => props.playbackRate,\n      value => {\n        changeRate(value, false)\n      }\n    )\n    watch(playing, value => {\n      if (value) {\n        requestAnimationFrame(() => {\n          stateShow.value = false\n        })\n      } else {\n        stateShow.value = true\n      }\n    })\n    watch(canPlay, value => {\n      if (!value) {\n        playing.value = false\n      }\n    })\n    watch(stateShow, value => {\n      if (value) {\n        stateHidden.value = false\n      }\n    })\n\n    onMounted(() => {\n      nextTick(() => {\n        if (isClient && !videoRef.value && screen.value?.wrapper) {\n          video.value = screen.value.wrapper.querySelector('video')\n        }\n\n        if (videoRef.value && currentTime.value > 0) {\n          videoRef.value.currentTime = currentTime.value\n        }\n      })\n    })\n\n    provide(VIDEO_STATE, reactive({ placeId, iconScale, addShortcut }))\n\n    useListener(videoRef, 'canplay', () => {\n      canPlay.value = true\n      duration.value = videoRef.value?.duration ?? 0\n    })\n    useListener(videoRef, 'timeupdate', () => {\n      currentTime.value = videoRef.value?.currentTime ?? 0\n\n      emit('update:time', currentTime.value)\n      emitEvent(props.onTimeChange, currentTime.value)\n    })\n    useListener(videoRef, 'ended', handleEnded)\n    // useListener(videoRef, 'loadeddata', () => {\n    //   loadedData.value = true\n    // })\n    useListener(videoRef, 'enterpictureinpicture', () => {\n      pip.value = true\n      emitEvent(props.onTogglePip, true)\n    })\n    useListener(videoRef, 'leavepictureinpicture', () => {\n      pip.value = false\n      emitEvent(props.onTogglePip, false)\n    })\n\n    expose({\n      currentSrc,\n      playing,\n      currentTime,\n      duration,\n      pip,\n      interacting,\n      stateHidden,\n      wrapper,\n      video,\n      resetMetaState\n    })\n\n    function togglePlaying(value = !playing.value) {\n      if (!canPlay.value) {\n        playing.value = false\n\n        return\n      }\n\n      playing.value = value\n\n      if (playing.value) {\n        hasPlayed.value = true\n        videoRef.value?.play()\n      } else {\n        videoRef.value?.pause()\n      }\n\n      wrapper.value?.focus()\n      emitEvent(playing.value ? props.onPlay : props.onPause)\n    }\n\n    function handleEnded() {\n      playing.value = false\n\n      videoRef.value?.pause()\n      emitEvent(props.onEnded)\n    }\n\n    async function togglePip() {\n      if (!pipEnabled || !videoRef.value) return\n\n      if (pip.value) {\n        await document.exitPictureInPicture()\n      } else {\n        await videoRef.value.requestPictureInPicture()\n      }\n    }\n\n    function changeRate(rate: number, dispatch = true) {\n      currentRate.value = rate\n\n      if (videoRef.value) {\n        videoRef.value.playbackRate = rate\n      }\n\n      if (dispatch) {\n        emit('update:playback-rate', rate)\n        emitEvent(props.onRateChange, rate)\n      }\n    }\n\n    function changeTime(time: number, dispatch = true) {\n      currentTime.value = time\n\n      if (videoRef.value && time !== videoRef.value.currentTime) {\n        videoRef.value.currentTime = time\n        time = videoRef.value.currentTime\n      }\n\n      if (dispatch) {\n        emit('update:time', time)\n        emitEvent(props.onTimeChange, time)\n      }\n    }\n\n    function changeVolume(volume: number, dispatch = true) {\n      currentVolume.value = volume\n\n      if (videoRef.value) {\n        videoRef.value.volume = volume\n      }\n\n      if (dispatch) {\n        emit('update:volume', volume)\n        emitEvent(props.onVolumeChange, volume)\n      }\n    }\n\n    function toggleFlip(value = !flipped.value, dispatch = true) {\n      flipped.value = value\n\n      if (dispatch) {\n        emitEvent(props.onToggleFlip, flipped.value)\n      }\n    }\n\n    function onFullChange(full: false | FullScreenType) {\n      nextTick(() => {\n        wrapper.value?.focus()\n        emitEvent(props.onToggleFull, full)\n      })\n    }\n\n    function resetMetaState() {\n      playing.value = false\n      currentTime.value = 0\n      canPlay.value = false\n      duration.value = 0\n      // loadedData.value = false\n      pip.value = false\n      hasPlayed.value = false\n\n      videoRef.value?.pause()\n    }\n\n    function handleInteract() {\n      clearTimeout(timer.interact)\n\n      interacting.value = true\n      timer.interact = setTimeout(() => {\n        interacting.value = false\n      }, 3000)\n    }\n\n    function handlePointerLeave() {\n      clearTimeout(timer.interact)\n      timer.interact = setTimeout(() => {\n        interacting.value = false\n      }, 500)\n    }\n\n    function adjustSrc(amount: number) {\n      const list = srcFullList.value\n\n      if (props.srcList) {\n        currentSrc.value = list[(srcIndex.value + amount + list.length) % list.length]\n        emit('update:src', currentSrc.value)\n      }\n    }\n\n    function playPrev() {\n      adjustSrc(-1)\n      emitEvent(props.onPrev)\n    }\n\n    function playNext() {\n      adjustSrc(1)\n      emitEvent(props.onNext)\n    }\n\n    function toggleFull(type: FullScreenType) {\n      screen.value?.toggle(type)\n    }\n\n    function handleRefresh() {\n      emitEvent(props.onRefresh)\n    }\n\n    function renderPlayPrev() {\n      return (\n        <VideoControl\n          class={nh.be('play-prev')}\n          label={locale.value.playPrev}\n          shortcut={shortcuts.value['play-prev']}\n          disabled={!!props.srcList && !srcIndex.value}\n          onClick={playPrev}\n        >\n          <Icon\n            {...icons.value.playPrev}\n            scale={+(icons.value.playPrev.scale || 1) * iconScale.value}\n          ></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderPlay() {\n      return (\n        <VideoControl\n          class={nh.be('play')}\n          label={playing.value ? locale.value.pause : locale.value.play}\n          shortcut={shortcuts.value.play}\n          disabled={!canPlay.value}\n          onClick={togglePlaying}\n        >\n          <Icon\n            {...playIcon.value}\n            scale={+(playIcon.value.scale || 1) * iconScale.value * 1.16}\n          ></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderPlayNext() {\n      return (\n        <VideoControl\n          class={nh.be('play-next')}\n          label={locale.value.playNext}\n          shortcut={shortcuts.value['play-next']}\n          disabled={!!props.srcList && srcIndex.value === srcFullList.value.length - 1}\n          onClick={playNext}\n        >\n          <Icon\n            {...icons.value.playNext}\n            scale={+(icons.value.playNext.scale || 1) * iconScale.value}\n          ></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderRefresh() {\n      return (\n        <VideoControl\n          class={nh.be('play-refresh')}\n          label={locale.value.refresh}\n          shortcut={shortcuts.value.refresh}\n          onClick={handleRefresh}\n        >\n          <Icon\n            {...icons.value.refresh}\n            scale={+(icons.value.refresh.scale || 1) * iconScale.value}\n          ></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderTimer() {\n      return (\n        <VideoTimer\n          time={currentTime.value}\n          duration={duration.value}\n          disabled={!canPlay.value}\n          onChange={changeTime}\n        ></VideoTimer>\n      )\n    }\n\n    function renderPlaybackRate() {\n      return (\n        <VideoControl\n          class={nh.be('playback-rate')}\n          type={'select'}\n          value={currentRate.value}\n          options={rateOptions.value}\n          onSelect={(rate: VideoPlaybackRate) => changeRate(rate.value)}\n        ></VideoControl>\n      )\n    }\n\n    function renderVolume() {\n      return (\n        <VideoVolume\n          ref={volumeRef}\n          volume={currentVolume.value}\n          onChange={changeVolume}\n        ></VideoVolume>\n      )\n    }\n\n    function renderFlip() {\n      return (\n        <VideoControl\n          class={nh.be('flip')}\n          label={locale.value.flip}\n          shortcut={shortcuts.value.flip}\n          onClick={toggleFlip}\n        >\n          <Icon\n            {...icons.value.flipX}\n            scale={+(icons.value.flipX.scale || 1) * iconScale.value}\n          ></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderPip() {\n      if (!pipEnabled || !video.value) return null\n\n      return (\n        <VideoControl\n          class={nh.be('pip')}\n          label={pip.value ? locale.value.exitPip : locale.value.requestPip}\n          shortcut={shortcuts.value.pip}\n          disabled={!canPlay.value}\n          onClick={togglePip}\n        >\n          <Icon {...icons.value.pip} scale={+(icons.value.pip.scale || 1) * iconScale.value}></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderFullWindow() {\n      return (\n        <VideoControl\n          class={nh.be('full-window')}\n          label={full.value === 'window' ? locale.value.fullWindowExit : locale.value.fullWindow}\n          shortcut={shortcuts.value['full-window']}\n          onClick={() => toggleFull('window')}\n        >\n          <Icon\n            {...icons.value.fullWindow}\n            scale={+(icons.value.fullWindow.scale || 1) * iconScale.value}\n          ></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderFullBrowser() {\n      return (\n        <VideoControl\n          class={nh.be('full-browser')}\n          label={full.value === 'browser' ? locale.value.fullScreenExit : locale.value.fullScreen}\n          shortcut={shortcuts.value['full-browser']}\n          onClick={() => toggleFull('browser')}\n        >\n          <Icon\n            {...icons.value.fullScreen}\n            scale={+(icons.value.fullScreen.scale || 1) * iconScale.value}\n          ></Icon>\n        </VideoControl>\n      )\n    }\n\n    function renderControl(name: VideoControlConfig) {\n      switch (name) {\n        case 'play-prev':\n          return renderPlayPrev()\n        case 'play':\n          return renderPlay()\n        case 'play-next':\n          return renderPlayNext()\n        case 'refresh':\n          return renderRefresh()\n        case 'timer':\n          return renderTimer()\n        case 'playback-rate':\n          return renderPlaybackRate()\n        case 'volume':\n          return renderVolume()\n        case 'flip':\n          return renderFlip()\n        case 'pip':\n          return renderPip()\n        case 'full-window':\n          return renderFullWindow()\n        case 'full-browser':\n          return renderFullBrowser()\n        default:\n          return createSlotRender(slots, [\n            `control-${name}`,\n            `control${toCapitalCase(name as string)}`\n          ])?.(slotParams)\n      }\n    }\n\n    function renderControls() {\n      if (props.noControls) {\n        return (\n          <Progress\n            class={nh.be('progress-line')}\n            percentage={percent.value}\n            stroke-width={1}\n            info-type={'none'}\n          ></Progress>\n        )\n      }\n\n      return (\n        <div\n          class={{\n            [nh.be('controls')]: true,\n            [nh.bem('controls', 'collapsed')]: hasPlayed.value && !interacting.value\n          }}\n        >\n          <section class={nh.be('controls-top')}>\n            <VideoProgress\n              time={currentTime.value}\n              duration={duration.value}\n              segments={segments.value}\n              onChange={changeTime}\n            ></VideoProgress>\n          </section>\n          <section class={nh.be('controls-bottom')}>\n            <div class={nh.be('controls-left')}>\n              {(props.controlLayout.left ?? videoDefaultControlLayout.left).map(renderControl)}\n            </div>\n            <div class={nh.be('controls-center')}>\n              {(props.controlLayout.center ?? videoDefaultControlLayout.center).map(renderControl)}\n            </div>\n            <div class={nh.be('controls-right')}>\n              {(props.controlLayout.right ?? videoDefaultControlLayout.right).map(renderControl)}\n            </div>\n          </section>\n        </div>\n      )\n    }\n\n    function renderMain() {\n      return (\n        <div class={nh.be('main')}>\n          <div\n            class={[nh.be('player'), flipped.value && nh.bem('player', 'flipped')]}\n            onClick={() => togglePlaying()}\n          >\n            {renderSlot(slots, 'player', {}, () => [\n              <video\n                {...props.videoAttrs}\n                ref={video}\n                class={nh.be('video')}\n                src={currentSrc.value || props.videoAttrs?.src}\n              >\n                {renderSlot(slots, 'default')}\n              </video>\n            ])}\n          </div>\n          {!hasPlayed.value && (props.poster || slots.poster) && (\n            <div class={nh.be('poster')}>\n              {renderSlot(slots, 'poster', {}, () => [<img src={props.poster} />])}\n            </div>\n          )}\n          <Transition name={nh.bs('state-effect')} onAfterLeave={() => (stateHidden.value = true)}>\n            {canPlay.value && stateShow.value && (\n              <div class={nh.be('state')}>\n                {renderSlot(slots, 'state', { active: stateShow.value }, () => [\n                  <Icon {...stateIcon.value} scale={+(stateIcon.value.scale || 1) * 5}></Icon>\n                ])}\n              </div>\n            )}\n          </Transition>\n          <Transition name={nh.ns('fade')}>\n            {((!canPlay.value && !stateShow.value) || (props.loading && stateHidden.value)) && (\n              <div class={nh.be('loading')}>\n                {renderSlot(slots, 'loading', {}, () => [\n                  <Icon\n                    {...icons.value.loading}\n                    icon={props.loadingIcon || icons.value.loading.icon}\n                    label={'loading'}\n                    effect={props.loadingEffect || icons.value.loading.effect}\n                    scale={+(stateIcon.value.scale || 1) * 5}\n                  ></Icon>\n                ])}\n              </div>\n            )}\n          </Transition>\n          {renderControls()}\n          {renderSlot(slots, 'extra')}\n        </div>\n      )\n    }\n\n    return () => {\n      return (\n        <FullScreen\n          ref={screen}\n          class={className.value}\n          tabindex={'-1'}\n          onToggle={onFullChange}\n          onPointermove={handleInteract}\n          onPointerleave={handlePointerLeave}\n        >\n          {{ default: renderMain }}\n        </FullScreen>\n      )\n    }\n  }\n})\n", "import { booleanProp, buildProps, omitProps } from '@vexip-ui/config'\n\nimport type { ExtractPropTypes, PropType } from 'vue'\nimport type { ConfigurableProps } from '@vexip-ui/config'\nimport type { TitleLevel, TypographyType } from './symbol'\n\nexport const textProps = buildProps({\n  type: String as PropType<TypographyType>,\n  tag: String,\n  delete: booleanProp,\n  strong: booleanProp,\n  italic: booleanProp,\n  underline: booleanProp,\n  code: booleanProp,\n  mark: booleanProp,\n  disabled: booleanProp,\n  keyboard: booleanProp,\n  thin: booleanProp,\n  reversed: booleanProp\n})\n\nexport type TextProps = ExtractPropTypes<typeof textProps>\nexport type TextCProps = ConfigurableProps<TextProps>\n\nexport const pProps = omitProps(textProps, ['tag', 'code'])\n\nexport type PProps = ExtractPropTypes<typeof pProps>\nexport type PCProps = ConfigurableProps<PProps>\n\nexport const strongProps = omitProps(textProps, ['tag', 'strong', 'code'])\n\nexport type StrongProps = ExtractPropTypes<typeof strongProps>\nexport type StrongCProps = ConfigurableProps<StrongProps>\n\nexport const titleProps = buildProps({\n  type: String as PropType<TypographyType>,\n  level: Number as PropType<TitleLevel>,\n  top: booleanProp,\n  marker: booleanProp,\n  aligned: booleanProp,\n  thin: booleanProp,\n  markerType: String\n})\n\nexport type TitleProps = ExtractPropTypes<typeof titleProps>\nexport type TitleCProps = ConfigurableProps<TitleProps>\n\nexport const hProps = omitProps(titleProps, ['level'])\n\nexport const h1Props = hProps\nexport const h2Props = hProps\nexport const h3Props = hProps\nexport const h4Props = hProps\nexport const h5Props = hProps\nexport const h6Props = hProps\n\nexport type HProps = ExtractPropTypes<typeof hProps>\nexport type HCProps = ConfigurableProps<HProps>\n\nexport type H1Props = HProps\nexport type H2Props = HProps\nexport type H3Props = HProps\nexport type H4Props = HProps\nexport type H5Props = HProps\nexport type H6Props = HProps\n\nexport type H1CProps = HCProps\nexport type H2CProps = HCProps\nexport type H3CProps = HCProps\nexport type H4CProps = HCProps\nexport type H5CProps = HCProps\nexport type H6CProps = HCProps\n\nexport const blockquoteProps = buildProps({\n  type: String as PropType<TypographyType>\n})\n\nexport type BlockquoteProps = ExtractPropTypes<typeof blockquoteProps>\nexport type BlockquoteCProps = ConfigurableProps<BlockquoteProps>\n\nexport const olProps = buildProps({\n  type: String as PropType<'a' | 'A' | 'i' | 'I' | '1'>\n})\n\nexport type OLProps = ExtractPropTypes<typeof olProps>\nexport type OLCProps = ConfigurableProps<OLProps>\n\nexport const ulProps = buildProps({\n  listStyle: String\n})\n\nexport type ULProps = ExtractPropTypes<typeof ulProps>\nexport type ULCProps = ConfigurableProps<ULProps>\n", "import { computed, defineComponent } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { boundRange, isColor } from '@vexip-ui/utils'\nimport { titleProps } from './props'\n\nexport default defineComponent({\n  name: 'Title',\n  props: titleProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('title', _props, {\n      type: 'default',\n      level: 5,\n      top: false,\n      marker: false,\n      aligned: false,\n      thin: false,\n      markerType: null\n    })\n\n    const nh = useNameHelper('title')\n\n    const coloredMarker = computed(() => isColor(props.markerType))\n    const markerType = computed(() => props.markerType || props.type)\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.type)]: props.type !== 'default',\n        [nh.bm('top')]: props.top,\n        [nh.bm('marker')]: props.marker,\n        [nh.bm('aligned')]: props.aligned,\n        [nh.bm('thin')]: props.thin,\n        [nh.bm(`marker-${markerType.value}`)]:\n          !coloredMarker.value && markerType.value !== 'default'\n      }\n    })\n    const level = computed(() => boundRange(Math.round(props.level), 1, 6) || 5)\n    const style = computed(() => {\n      return coloredMarker.value\n        ? {\n            [nh.cv('marker-color')]: props.markerType\n          }\n        : null\n    })\n\n    return () => {\n      const CustomTag = `h${level.value}` as any\n\n      return (\n        <CustomTag class={className.value} style={style.value}>\n          {slots.default?.()}\n        </CustomTag>\n      )\n    }\n  }\n})\n", "import { computed, defineComponent, renderSlot } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { textProps } from './props'\n\nexport default defineComponent({\n  name: 'Text',\n  props: textProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('text', _props, {\n      type: 'default',\n      tag: 'span',\n      delete: false,\n      strong: false,\n      italic: false,\n      underline: false,\n      code: false,\n      mark: false,\n      disabled: false,\n      keyboard: false,\n      thin: false,\n      reversed: false\n    })\n\n    const nh = useNameHelper('text')\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.type)]: props.type !== 'default',\n        [nh.bm('delete')]: props.delete,\n        [nh.bm('strong')]: props.strong,\n        [nh.bm('italic')]: props.italic,\n        [nh.bm('underline')]: props.underline,\n        [nh.bm('code')]: props.code,\n        [nh.bm('mark')]: props.mark,\n        [nh.bm('disabled')]: props.disabled,\n        [nh.bm('keyboard')]: props.keyboard,\n        [nh.bm('thin')]: props.thin,\n        [nh.bm('reversed')]: props.reversed\n      }\n    })\n\n    return () => {\n      const CustomTag = props.tag || ('span' as any)\n      const children = renderSlot(slots, 'default')\n\n      return props.code\n        ? (\n          <code class={className.value}>{props.delete ? <del>{children}</del> : children}</code>\n          )\n        : props.keyboard\n          ? (\n            <kbd class={className.value}>{props.delete ? <del>{children}</del> : children}</kbd>\n            )\n          : props.delete\n            ? (\n              <del class={className.value}>{children}</del>\n              )\n            : (\n              <CustomTag class={className.value}>{children}</CustomTag>\n              )\n    }\n  }\n})\n", "import { computed, defineComponent } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { blockquoteProps } from './props'\n\nexport default defineComponent({\n  name: 'Blockquote',\n  props: blockquoteProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('blockquote', _props, {\n      type: 'default'\n    })\n\n    const nh = useNameHelper('blockquote')\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bs('vars')]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm(props.type)]: props.type !== 'default'\n      }\n    })\n\n    return () => <blockquote class={className.value}>{slots.default?.()}</blockquote>\n  }\n})\n", "import { defineComponent } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { olProps } from './props'\n\nexport default defineComponent({\n  name: 'OL',\n  props: olProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('ol', _props, {\n      type: '1'\n    })\n\n    const nh = useNameHelper('ol')\n\n    return () => (\n      <ol class={[nh.b(), props.inherit && nh.bm('inherit')]} type={props.type}>\n        {slots.default?.()}\n      </ol>\n    )\n  }\n})\n", "import { computed, defineComponent } from 'vue'\n\nimport { useNameHelper, useProps } from '@vexip-ui/config'\nimport { ulProps } from './props'\n\nexport default defineComponent({\n  name: 'UL',\n  props: ulProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('ul', _props, {\n      listStyle: 'circle'\n    })\n\n    const nh = useNameHelper('ul')\n\n    const className = computed(() => {\n      return {\n        [nh.b()]: true,\n        [nh.bm('inherit')]: props.inherit,\n        [nh.bm('no-marker')]: props.listStyle === 'none'\n      }\n    })\n\n    return () => (\n      <ul class={className.value} style={{ listStyleType: props.listStyle }}>\n        {slots.default?.()}\n      </ul>\n    )\n  }\n})\n", "import { defineComponent } from 'vue'\n\nimport { useProps } from '@vexip-ui/config'\nimport Title from './title'\nimport { hProps } from './props'\n\nimport type { TitleLevel } from './symbol'\n\nfunction createHComponent(level: TitleLevel) {\n  return defineComponent({\n    name: `H${level}`,\n    props: hProps,\n    emits: [],\n    setup(_props, { slots }) {\n      const props = useProps(`h${level}`, _props, {\n        type: 'default',\n        top: false,\n        marker: false,\n        aligned: false,\n        thin: false\n      })\n\n      return () => (\n        <Title {...props} level={level}>\n          {slots.default?.()}\n        </Title>\n      )\n    }\n  })\n}\n\nexport const H1 = createHComponent(1)\nexport const H2 = createHComponent(2)\nexport const H3 = createHComponent(3)\nexport const H4 = createHComponent(4)\nexport const H5 = createHComponent(5)\nexport const H6 = createHComponent(6)\n", "import { defineComponent } from 'vue'\n\nimport { useProps } from '@vexip-ui/config'\nimport Text from './text'\nimport { pProps } from './props'\n\nexport default defineComponent({\n  name: 'P',\n  props: pProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('p', _props, {\n      type: 'default',\n      delete: false,\n      strong: false,\n      italic: false,\n      underline: false,\n      mark: false,\n      disabled: false,\n      keyboard: false,\n      thin: false,\n      reversed: false\n    })\n\n    return () => (\n      <Text {...props} tag={'p'}>\n        {slots.default?.()}\n      </Text>\n    )\n  }\n})\n", "import { defineComponent } from 'vue'\n\nimport { useProps } from '@vexip-ui/config'\nimport Text from './text'\nimport { strongProps } from './props'\n\nexport default defineComponent({\n  name: 'Strong',\n  props: strongProps,\n  emits: [],\n  setup(_props, { slots }) {\n    const props = useProps('strong', _props, {\n      type: 'default',\n      delete: false,\n      italic: false,\n      underline: false,\n      mark: false,\n      disabled: false,\n      keyboard: false,\n      thin: false,\n      reversed: false\n    })\n\n    return () => (\n      <Text {...props} tag={'strong'} strong>\n        {slots.default?.()}\n      </Text>\n    )\n  }\n})\n", "import { computed, unref } from 'vue'\n\nimport {\n  configHoverDelay,\n  configIcons,\n  configLocale,\n  configNamespace,\n  configProps,\n  configZIndex\n} from '@vexip-ui/config'\nimport { isEmpty, toCapitalCase } from '@vexip-ui/utils'\n\nimport type { App, MaybeRef } from 'vue'\nimport type { IconsOptions, LocaleConfig, LocaleOptions } from '@vexip-ui/config'\nimport type { PropsOptions } from './props'\n\nexport interface InstallOptions {\n  prefix?: string,\n  namespace?: MaybeRef<string>,\n  props?: MaybeRef<PropsOptions>,\n  locale?: MaybeRef<LocaleOptions>,\n  zIndex?: MaybeRef<number>,\n  icons?: MaybeRef<IconsOptions>,\n  hoverDelay?: MaybeRef<number>\n}\n\nexport function buildInstall(components: any[] = [], defaultLocale?: LocaleConfig) {\n  return function install(app: App, options: InstallOptions = {}) {\n    const {\n      prefix = '',\n      namespace = '',\n      props = {},\n      locale = defaultLocale,\n      zIndex,\n      icons = {},\n      hoverDelay = 100\n    } = options\n\n    const withDefaultLocale = computed(() => {\n      return { ...defaultLocale, ...unref(locale) }\n    })\n\n    configNamespace(namespace, app)\n    configProps(props, app)\n    configLocale(withDefaultLocale, app)\n    configIcons(icons, app)\n    configHoverDelay(hoverDelay, app)\n\n    if (typeof unref(zIndex) === 'number') {\n      configZIndex(zIndex!, app)\n    }\n\n    const normalizedPrefix = toCapitalCase(prefix || '')\n\n    components.forEach(component => {\n      if (typeof component === 'function' || typeof component.install === 'function') {\n        app.use(component)\n      } else {\n        app.component(`${normalizedPrefix}${component.name}`, component)\n      }\n    })\n  }\n}\n\n/**\n * Provide a props config for under components.\n *\n * @param props props config\n * @param app the app of Vue, will use app.provide if specify\n */\nfunction proxyConfigProps(props: MaybeRef<PropsOptions>, app?: App) {\n  !isEmpty(props) && configProps(props, app)\n}\n\n/**\n * Provide supported config for under components.\n *\n * @param config supported config\n * @param app the app of Vue, will use app.provide if specify\n */\nexport function provideConfig(\n  config: Omit<InstallOptions, 'prefix' | 'namespace'> = {},\n  app?: App\n) {\n  const { props = {}, locale = {}, zIndex, icons = {} } = config\n\n  proxyConfigProps(props, app)\n  !isEmpty(locale) && configLocale(locale, app)\n  !isEmpty(icons) && configIcons(icons, app)\n\n  if (typeof unref(zIndex) === 'number') {\n    configZIndex(zIndex!, app)\n  }\n}\n\nexport { proxyConfigProps as configProps, configLocale, configZIndex, configIcons }\n", "export const version = __VERSION__\n", "import { installDirectives } from '@/directives'\n\nimport { Affix } from './affix'\nimport { Alert } from './alert'\nimport { Anchor } from './anchor'\nimport { AnchorLink } from './anchor-link'\nimport { AutoComplete } from './auto-complete'\nimport { Avatar } from './avatar'\nimport { AvatarGroup } from './avatar-group'\nimport { Badge } from './badge'\nimport { Breadcrumb } from './breadcrumb'\nimport { BreadcrumbItem } from './breadcrumb-item'\nimport { Bubble } from './bubble'\nimport { Button } from './button'\nimport { ButtonGroup } from './button-group'\nimport { Calendar } from './calendar'\nimport { CalendarPanel } from './calendar-panel'\nimport { Captcha } from './captcha'\nimport { CaptchaSlider } from './captcha-slider'\nimport { Card } from './card'\nimport { Carousel } from './carousel'\nimport { CarouselItem } from './carousel-item'\nimport { Cascader } from './cascader'\nimport { Cell } from './cell'\nimport { Checkbox } from './checkbox'\nimport { CheckboxGroup } from './checkbox-group'\nimport { Collapse } from './collapse'\nimport { CollapsePanel } from './collapse-panel'\nimport { CollapseTransition } from './collapse-transition'\nimport { ColorPicker } from './color-picker'\nimport { Column } from './column'\nimport { ConfigProvider } from './config-provider'\nimport { Confirm } from './confirm'\nimport { Contextmenu } from './contextmenu'\nimport { DatePicker } from './date-picker'\nimport { Divider } from './divider'\nimport { Drawer } from './drawer'\nimport { Dropdown } from './dropdown'\nimport { DropdownItem } from './dropdown-item'\nimport { DropdownList } from './dropdown-list'\nimport { Ellipsis } from './ellipsis'\nimport { Form } from './form'\nimport { FormItem } from './form-item'\nimport { FormReset } from './form-reset'\nimport { FormSubmit } from './form-submit'\nimport { FullScreen } from './full-screen'\nimport { Grid } from './grid'\nimport { Highlight } from './highlight'\nimport { Icon } from './icon'\nimport { Image } from './image'\nimport { ImageGroup } from './image-group'\nimport { ImageViewer } from './image-viewer'\nimport { Input } from './input'\nimport { Layout } from './layout'\nimport { LayoutAside } from './layout-aside'\nimport { LayoutFooter } from './layout-footer'\nimport { LayoutHeader } from './layout-header'\nimport { LayoutMain } from './layout-main'\nimport { Linker } from './linker'\nimport { Loading } from './loading'\nimport { Masker } from './masker'\nimport { Menu } from './menu'\nimport { MenuGroup } from './menu-group'\nimport { MenuItem } from './menu-item'\nimport { Message } from './message'\nimport { Modal } from './modal'\nimport { NativeScroll } from './native-scroll'\nimport { Notice } from './notice'\nimport { NumberInput } from './number-input'\nimport { Option } from './option'\nimport { OptionGroup } from './option-group'\nimport { Overflow } from './overflow'\nimport { Pagination } from './pagination'\nimport { Popper } from './popper'\nimport { Popup } from './popup'\nimport { Portal } from './portal'\nimport { Progress } from './progress'\nimport { Radio } from './radio'\nimport { RadioGroup } from './radio-group'\nimport { Renderer } from './renderer'\nimport { ResizeObserver } from './resize-observer'\nimport { Result } from './result'\nimport { Row } from './row'\nimport { Scroll } from './scroll'\nimport { Scrollbar } from './scrollbar'\nimport { Select } from './select'\nimport { Skeleton } from './skeleton'\nimport { SkeletonGroup } from './skeleton-group'\nimport { Slider } from './slider'\nimport { Space } from './space'\nimport { Spin } from './spin'\nimport { Split } from './split'\nimport { Switch } from './switch'\nimport { TabNav } from './tab-nav'\nimport { TabNavItem } from './tab-nav-item'\nimport { TabPanel } from './tab-panel'\nimport { Table } from './table'\nimport { TableColumn } from './table-column'\nimport { TableColumnGroup } from './table-column-group'\nimport { TableSummary } from './table-summary'\nimport { Tabs } from './tabs'\nimport { Tag } from './tag'\nimport { Textarea } from './textarea'\nimport { TimeAgo } from './time-ago'\nimport { TimePicker } from './time-picker'\nimport { Timeline } from './timeline'\nimport { TimelineItem } from './timeline-item'\nimport { Toast } from './toast'\nimport { Tooltip } from './tooltip'\nimport { Tour } from './tour'\nimport { TourStep } from './tour-step'\nimport { Transfer } from './transfer'\nimport { Tree } from './tree'\nimport { Upload } from './upload'\nimport { UploadFile } from './upload-file'\nimport { UploadList } from './upload-list'\nimport { Video } from './video'\nimport { Viewer } from './viewer'\nimport { VirtualList } from './virtual-list'\nimport { Wheel } from './wheel'\n\nimport { Blockquote, H1, H2, H3, H4, H5, H6, OL, P, Strong, Text, Title, UL } from './typography'\n\nimport { buildInstall } from './create'\n\nexport { version } from './version'\nexport * from './create'\n\nexport type { PropsOptions } from './props'\n\nconst components = [\n  Affix,\n  Alert,\n  Anchor,\n  AnchorLink,\n  AutoComplete,\n  Avatar,\n  AvatarGroup,\n  Badge,\n  Breadcrumb,\n  BreadcrumbItem,\n  Bubble,\n  Button,\n  ButtonGroup,\n  Calendar,\n  CalendarPanel,\n  Captcha,\n  CaptchaSlider,\n  Card,\n  Carousel,\n  CarouselItem,\n  Cascader,\n  Cell,\n  Checkbox,\n  CheckboxGroup,\n  Collapse,\n  CollapsePanel,\n  CollapseTransition,\n  ColorPicker,\n  Column,\n  ConfigProvider,\n  DatePicker,\n  Divider,\n  Drawer,\n  Dropdown,\n  DropdownItem,\n  DropdownList,\n  Ellipsis,\n  Form,\n  FormItem,\n  FormReset,\n  FormSubmit,\n  FullScreen,\n  Grid,\n  Highlight,\n  Icon,\n  Image,\n  ImageGroup,\n  ImageViewer,\n  Input,\n  Layout,\n  LayoutAside,\n  LayoutFooter,\n  LayoutHeader,\n  LayoutMain,\n  Linker,\n  Masker,\n  Menu,\n  MenuGroup,\n  MenuItem,\n  Modal,\n  NativeScroll,\n  NumberInput,\n  Option,\n  OptionGroup,\n  Overflow,\n  Pagination,\n  Popper,\n  Popup,\n  Portal,\n  Progress,\n  Radio,\n  RadioGroup,\n  Renderer,\n  ResizeObserver,\n  Result,\n  Row,\n  Scroll,\n  Scrollbar,\n  Select,\n  Skeleton,\n  SkeletonGroup,\n  Slider,\n  Space,\n  Spin,\n  Split,\n  Switch,\n  TabNav,\n  TabNavItem,\n  TabPanel,\n  Table,\n  TableColumn,\n  TableColumnGroup,\n  TableSummary,\n  Tabs,\n  Tag,\n  Textarea,\n  TimeAgo,\n  TimePicker,\n  Timeline,\n  TimelineItem,\n  Tooltip,\n  Tour,\n  TourStep,\n  Transfer,\n  Tree,\n  Upload,\n  UploadFile,\n  UploadList,\n  Video,\n  Viewer,\n  VirtualList,\n  Wheel,\n  // plugins\n  Confirm,\n  Contextmenu,\n  Loading,\n  Message,\n  Notice,\n  Toast,\n  // typography\n  Title,\n  Text,\n  Blockquote,\n  OL,\n  UL,\n  H1,\n  H2,\n  H3,\n  H4,\n  H5,\n  H6,\n  P,\n  Strong,\n  // directives\n  installDirectives\n]\n\nexport const install = buildInstall(components)\n\nexport * from './affix'\nexport * from './alert'\nexport * from './anchor'\nexport * from './anchor-link'\nexport * from './auto-complete'\nexport * from './avatar'\nexport * from './avatar-group'\nexport * from './badge'\nexport * from './breadcrumb'\nexport * from './breadcrumb-item'\nexport * from './bubble'\nexport * from './button'\nexport * from './button-group'\nexport * from './calendar'\nexport * from './calendar-panel'\nexport * from './captcha'\nexport * from './captcha-slider'\nexport * from './card'\nexport * from './carousel'\nexport * from './carousel-item'\nexport * from './cascader'\nexport * from './cell'\nexport * from './checkbox'\nexport * from './checkbox-group'\nexport * from './collapse'\nexport * from './collapse-panel'\nexport * from './collapse-transition'\nexport * from './color-picker'\nexport * from './column'\nexport * from './config-provider'\nexport * from './confirm'\nexport * from './contextmenu'\nexport * from './date-picker'\nexport * from './divider'\nexport * from './drawer'\nexport * from './dropdown'\nexport * from './dropdown-item'\nexport * from './dropdown-list'\nexport * from './ellipsis'\nexport * from './form'\nexport * from './form-item'\nexport * from './form-reset'\nexport * from './form-submit'\nexport * from './full-screen'\nexport * from './grid'\nexport * from './highlight'\nexport * from './icon'\nexport * from './image'\nexport * from './image-group'\nexport * from './image-viewer'\nexport * from './input'\nexport * from './layout'\nexport * from './layout-aside'\nexport * from './layout-footer'\nexport * from './layout-header'\nexport * from './layout-main'\nexport * from './linker'\nexport * from './loading'\nexport * from './masker'\nexport * from './menu'\nexport * from './menu-group'\nexport * from './menu-item'\nexport * from './message'\nexport * from './modal'\nexport * from './native-scroll'\nexport * from './notice'\nexport * from './number-input'\nexport * from './option'\nexport * from './option-group'\nexport * from './overflow'\nexport * from './pagination'\nexport * from './popper'\nexport * from './popup'\nexport * from './portal'\nexport * from './progress'\nexport * from './radio'\nexport * from './radio-group'\nexport * from './renderer'\nexport * from './resize-observer'\nexport * from './result'\nexport * from './row'\nexport * from './scroll'\nexport * from './scrollbar'\nexport * from './select'\nexport * from './skeleton'\nexport * from './skeleton-group'\nexport * from './slider'\nexport * from './space'\nexport * from './spin'\nexport * from './split'\nexport * from './switch'\nexport * from './tab-nav'\nexport * from './tab-nav-item'\nexport * from './tab-panel'\nexport * from './table'\nexport * from './table-column'\nexport * from './table-column-group'\nexport * from './table-summary'\nexport * from './tabs'\nexport * from './tag'\nexport * from './textarea'\nexport * from './time-ago'\nexport * from './time-picker'\nexport * from './timeline'\nexport * from './timeline-item'\nexport * from './toast'\nexport * from './tooltip'\nexport * from './tour'\nexport * from './tour-step'\nexport * from './transfer'\nexport * from './tree'\nexport * from './typography'\nexport * from './upload'\nexport * from './upload-file'\nexport * from './upload-list'\nexport * from './video'\nexport * from './viewer'\nexport * from './virtual-list'\nexport * from './wheel'\n\nexport * from '@/directives'\n"],
  "mappings": "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;ACkIvB,IAAMC,KAAa;EACjBC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;;EAEAC;EACAC;EACAC;EACAC;EACAC;EACAC;;EAEAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;EACAC;;EAEAC;AACF;AAxIA,IA0IaC,KAAUC,IAAatI,EAAU;",
  "names": ["spinProps", "buildProps", "booleanProp", "iconProp", "classProp", "eventProp", "_sfc_main", "defineComponent", "Icon", "spinProps", "_props", "slots", "nh", "useNameHelper", "props", "useProps", "createIconProp", "currentActive", "ref", "hasTip", "computed", "maskStyle", "style", "delayTime", "toNumber", "timer", "watch", "value", "delay", "handleMaskClick", "event", "emitEvent", "handleShow", "handleHide", "useIcons", "_resolveComponent", "_ctx", "_openBlock", "_createBlock", "_Transition", "_withCtx", "_normalizeClass", "_createCommentVNode", "_createElementBlock", "_normalizeStyle", "r", "l", "e", "_renderSlot", "_createElementVNode", "_createVNode", "_component_Icon", "_mergeProps", "_hoisted_1", "createSpin", "el", "binding", "props", "isObject", "spin", "createVNode", "Spin", "position", "render", "vLoading", "nextTick", "component", "key", "observeResize", "unobserveResize", "useResize", "createObserver", "el", "binding", "options", "useThrottle", "throttleResize", "throttle", "vResize", "getHandler", "prevOptions", "noop", "_a", "installDirectives", "app", "vLoading", "vResize", "affixProps", "buildProps", "eventProp", "lastScroller", "handleLastScroller", "target", "unref", "targetAffix", "clearLastScroller", "props", "useProps", "__props", "nh", "useNameHelper", "instance", "getCurrentInstance", "wrapper", "shallowRef", "target", "container", "isRawViewer", "scroller", "fixed", "ref", "affixHeight", "affixWidth", "scrollTop", "clientHeight", "transform", "affixStyle", "computed", "fixedStyle", "_top", "_bottom", "isElement", "watchEffect", "update", "watch", "emitEvent", "__expose", "onMounted", "_target", "callIfFunc", "updateContainer", "onBeforeUnmount", "removeListener", "wrapperRect", "targetRect", "handleContainerScroll", "handleLastScroller", "isClient", "_container", "refName", "name", "_a", "exposeProxy", "exposed", "proxy", "_scroller", "_", "key", "_b", "refTemp", "_c", "clearLastScroller", "alertProps", "buildProps", "booleanProp", "eventProp", "alertTypes", "props", "useProps", "__props", "value", "alertTypes", "slots", "_useSlots", "nh", "useNameHelper", "icons", "useIcons", "predefinedIcons", "computed", "closed", "ref", "hidden", "scrollDuration", "scrollOffset", "scrollWidth", "content", "scrollEl", "hasTitle", "hasIcon", "className", "style", "rootStyle", "isClient", "black", "parseColorToRgba", "baseColor", "adjustAlpha", "mixColor", "iconComp", "scrollStyle", "watch", "startScroll", "onMounted", "handleClose", "emitEvent", "handleAfterLeave", "contentRect", "rangeWidth", "getRangeWidth", "duration", "handleScrollEnd", "anchorProps", "buildProps", "booleanProp", "eventProp", "anchorLinkProps", "wrapProps", "baseIndentWidth", "LINK_STATE", "ANCHOR_STATE", "props", "__props", "anchorState", "inject", "ANCHOR_STATE", "parentLinkState", "LINK_STATE", "nh", "useNameHelper", "indent", "ref", "active", "link", "state", "reactive", "toRef", "linkClass", "computed", "linkStyle", "baseIndentWidth", "provide", "watch", "value", "onMounted", "onBeforeUnmount", "handleSelect", "animateScrollTo", "el", "from", "to", "duration", "callback", "distance", "step", "current", "scroll", "nh", "useNameHelper", "props", "useProps", "__props", "emit", "__emit", "currentActive", "ref", "animating", "markerTop", "linkStates", "wrapper", "timer", "isRawViewer", "container", "scroller", "prevScrollTop", "isClient", "provide", "ANCHOR_STATE", "reactive", "increaseLink", "decreaseLink", "handleActive", "watch", "value", "updateContainer", "onMounted", "computeMarkerPosition", "onBeforeUnmount", "removeListener", "state", "instance", "getCurrentInstance", "nextTick", "viewer", "_container", "refName", "isElement", "handleContainerScroll", "isVNode", "name", "_a", "proxyExposed", "refTemp", "_b", "_d", "_c", "getContainerEl", "computeCurrentLink", "scrollTop", "containerTop", "offsetList", "offset", "id", "element", "prev", "next", "currentLink", "i", "len", "current", "emitEvent", "event", "link", "elementTop", "duration", "containerEl", "to", "animateScrollTo", "min", "max", "clientY", "linkRect", "wrapperTop", "scrollbarProps", "buildProps", "booleanProp", "eventProp", "ScrollbarType", "ScrollbarType2", "scrollbarPlacements", "useTrack", "currentScroll", "ref", "trackSpeed", "track", "bar", "tracking", "type", "ScrollbarType", "barLength", "disabled", "onDown", "noop", "onMove", "onUp", "onScroll", "length", "startAt", "cursorAt", "targetScroll", "forward", "processing", "animateMoveBar", "speedRate", "computeSpeedRate", "changed", "verifyScroll", "handleMouseDown", "event", "handleMouseMove", "handleMouseUp", "rect", "barRect", "position", "USE_TOUCH", "start", "end", "span", "i", "props", "useProps", "__props", "value", "scrollbarPlacements", "nh", "useNameHelper", "active", "ref", "scrolling", "manualRef", "triggerUpdate", "useManualRef", "isRtl", "useRtl", "currentScroll", "container", "bar", "track", "timer", "useSetTimeout", "type", "computed", "ScrollbarType", "tracking", "handleTrackMouseDown", "useTrack", "toRef", "scroll", "emitEvent", "setScrollbarFade", "className", "style", "watch", "watchEffect", "position", "length", "isDefined", "handleWrapperMouseMove", "throttle", "wrapperElement", "onMounted", "instance", "getCurrentInstance", "nextTick", "_a", "_b", "_c", "onBeforeUnmount", "__expose", "handleScroll", "startAt", "cursorAt", "handleMouseDown", "event", "handleMouseMove", "handleMouseUp", "rect", "barRect", "USE_TOUCH", "verifyScroll", "boundRange", "disableEvent", "resizeObserverProps", "buildProps", "booleanNumberProp", "booleanProp", "eventProp", "ResizeObserver", "defineComponent", "resizeObserverProps", "_props", "slots", "props", "useProps", "value", "observeResize", "unobserveResize", "useResize", "observed", "handleResize", "entry", "emitEvent", "throttleResize", "throttle", "instance", "getCurrentInstance", "onMounted", "watch", "unobserve", "observe", "onBeforeUnmount", "el", "_b", "_a", "renderSlot", "nativeScrollProps", "buildProps", "classProp", "styleProp", "booleanProp", "booleanNumberProp", "eventProp", "animateScrollTo", "options", "el", "xFrom", "xTo", "yFrom", "yTo", "duration", "callback", "xDistance", "yDistance", "xStep", "yStep", "currentX", "currentY", "scroll", "useScrollWrapper", "mode", "disabled", "appear", "scrollX", "scrollY", "onResize", "onBeforeRefresh", "onAfterRefresh", "manualRef", "triggerUpdate", "useManualRef", "isRtl", "useRtl", "syncing", "ref", "contentEl", "content", "reactive", "x", "y", "percentX", "percentY", "xScrollLimit", "computed", "yScrollLimit", "enableXScroll", "enableYScroll", "xBarLength", "boundRange", "yBarLength", "watch", "computeContentSize", "value", "setScrollX", "setScrollY", "syncScroll", "isMounted", "useMounted", "isHiddenElement", "computePercent", "multipleFixed", "handleResize", "entity", "refresh", "onMounted", "scrollTo", "debounceMinor", "resolve", "clientX", "clientY", "duration", "animateScrollTo", "scrollBy", "deltaX", "deltaY", "scrollToElement", "el", "offset", "isElement", "wrapperRect", "elRect", "debounce", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "scrollModes", "freeze", "MOVE_EVENT", "UP_EVENT", "defineComponent", "name", "inheritAttrs", "props", "nativeScrollProps", "emits", "setup", "_props", "attrs", "slots", "expose", "useProps", "scrollClass", "scrollStyle", "scrollAttrs", "mode", "default", "validator", "value", "includes", "width", "height", "disabled", "pointer", "scrollX", "static", "scrollY", "useXBar", "useYBar", "barFade", "barClass", "autoplay", "playWaiting", "appear", "barDuration", "useBarTrack", "scrollTag", "observeDeep", "scrollOnly", "emitter", "createEventEmitter", "nh", "useNameHelper", "isRtl", "useRtl", "usingBar", "ref", "scrolling", "wrapper", "xBar", "yBar", "initialized", "contentEl", "syncing", "content", "x", "y", "percentX", "percentY", "xScrollLimit", "yScrollLimit", "enableXScroll", "enableYScroll", "xBarLength", "yBarLength", "handleResize", "setScrollX", "setScrollY", "computePercent", "refresh", "scrollTo", "scrollBy", "scrollToElement", "triggerUpdate", "useScrollWrapper", "toRef", "onResize", "entry", "emitEvent", "onAfterRefresh", "syncBarScroll", "startAutoplay", "slotParams", "shallowReadonly", "getState", "ensureInView", "canPlay", "canAutoplay", "computed", "isTrue", "watch", "stopAutoplay", "nextTick", "playTimer", "startTimer", "endTimer", "onBeforeUnmount", "distance", "limit", "prop", "waiting", "setScroll", "playSpeed", "scroll", "setTimeout", "requestAnimationFrame", "clearTimeout", "className", "b", "bm", "inherit", "style", "Number", "isNaN", "undefined", "wrapperClass", "class", "be", "willMutate", "handleMutate", "observer", "createMutation", "isClient", "MutationObserver", "observe", "childList", "clearMutation", "disconnect", "immediate", "onXEnabledChange", "onYEnabledChange", "getXScrollLimit", "getYScrollLimit", "addScrollListener", "removeScrollListener", "getCommonPayload", "clientX", "clientY", "handleScroll", "handleMouseDown", "event", "button", "USE_TOUCH", "handlePointerDown", "xScrollStartAt", "yScrollStartAt", "cursorXPosition", "cursorYPosition", "prepareScroll", "document", "addEventListener", "handlePointerMove", "handlePointerUp", "onScrollStart", "stopPropagation", "preventDefault", "emitScrollEvent", "removeEventListener", "onScrollEnd", "handleWheel", "type", "isVerticalScroll", "isHorizontalScroll", "sign", "deltaY", "onWheel", "maxLimit", "scrollLeft", "scrollTop", "handleBarScrollStart", "onBarScrollStart", "handleBarScrollEnd", "onBarScrollEnd", "handleXBarScroll", "percent", "onBarScroll", "handleYBarScroll", "onScroll", "emit", "el", "duration", "offset", "querySelector", "isElement", "Promise", "resolve", "wrapperRect", "getBoundingClientRect", "elRect", "left", "right", "top", "bottom", "listener", "on", "off", "renderContent", "Content", "children", "renderSlot", "_createVNode", "_mergeProps", "shiftKey", "extra", "scrollWidth", "scrollHeight", "offsetWidth", "offsetHeight", "flatVNodes", "map", "vnode", "index", "ResizeObserver", "key", "_slot2", "_slot", "createSlotRender", "Scrollbar", "bem", "optionProps", "wrapProps", "valueProp", "eventProp", "optionGroupProps", "_sfc_main", "defineComponent", "optionProps", "props", "nh", "useNameHelper", "className", "computed", "handleSelect", "emitEvent", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "args", "e", "overflowProps", "buildProps", "booleanStringProp", "booleanProp", "eventProp", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "TEXT_VNODE", "createTextVNode", "type", "defineComponent", "name", "inheritAttrs", "props", "overflowProps", "emits", "setup", "_props", "attrs", "slots", "expose", "useProps", "items", "default", "static", "tag", "attrFlag", "maxCount", "nh", "useNameHelper", "restCount", "ref", "wrapper", "counter", "suffix", "className", "computed", "b", "bs", "bm", "inherit", "hiddenFlag", "watch", "length", "nextTick", "refresh", "onMounted", "toggleDisplay", "el", "show", "value", "removeAttribute", "setAttribute", "style", "display", "computeHorizontalMargin", "getComputedStyle", "marginLeft", "parseFloat", "marginRight", "computeHorizontalPadding", "paddingLeft", "paddingRight", "computeOuterWidth", "offsetWidth", "lastOverflow", "lastRestCount", "counterEl", "children", "childCount", "overflow", "i", "len", "child", "postRefresh", "suffixEl", "wrapperWidth", "childWidths", "totalWidth", "counterMargin", "childWidth", "j", "maxWidth", "onRestChange", "onToggle", "syncCounterRef", "nextElementSibling", "undefined", "_slot", "CustomTag", "itemSlot", "staticItem", "counterVNode", "count", "renderCounter", "_createVNode", "ResizeObserver", "_mergeProps", "isDefined", "map", "item", "index", "vnode", "key", "_Fragment", "be", "tagProps", "buildProps", "sizeProp", "booleanProp", "eventProp", "tagTypes", "Object", "freeze", "defineComponent", "name", "components", "Icon", "props", "tagProps", "emits", "setup", "_props", "slots", "useProps", "size", "createSizeProp", "type", "default", "validator", "value", "includes", "border", "closable", "color", "simple", "circle", "prefix", "prefixBg", "prefixColor", "suffix", "suffixBg", "suffixColor", "disabled", "nh", "useNameHelper", "icons", "useIcons", "className", "computed", "b", "bs", "bm", "inherit", "style", "rootStyle", "isClient", "getComputedStyle", "document", "documentElement", "white", "parseColorToRgba", "getPropertyValue", "nv", "baseColor", "base", "toString", "cvm", "mixColor", "adjustAlpha", "handleClose", "event", "button", "stopPropagation", "emitEvent", "onClose", "renderClose", "_createVNode", "be", "_mergeProps", "close", "hasSuffix", "backgroundColor", "borderColor", "virtualListProps", "buildProps", "booleanProp", "eventProp", "defineComponent", "name", "components", "NativeScroll", "ResizeObserver", "inheritAttrs", "props", "virtualListProps", "emits", "setup", "_props", "slots", "attrs", "expose", "useProps", "items", "default", "static", "itemSize", "itemFixed", "idKey", "defaultKeyAt", "bufferSize", "listTag", "itemsTag", "itemsAttrs", "hideBar", "lockItems", "autoplay", "ignoreResize", "nh", "useNameHelper", "toRefs", "scroll", "ref", "list", "wrapper", "computed", "value", "content", "indexMap", "heightTree", "scrollOffset", "visibleItems", "listStyle", "itemsStyle", "handleScroll", "handleResize", "handleItemResize", "scrollTo", "scrollBy", "scrollToKey", "scrollToIndex", "ensureIndexInView", "ensureKeyInView", "useVirtual", "autoResize", "refresh", "watch", "length", "nextTick", "onScroll", "payload", "onResize", "entry", "onItemResize", "key", "Promise", "resolve", "keyField", "keyIndexMap", "class", "itemsClass", "style", "itemsOtherStyle", "ListTag", "ItemsTag", "renderingItems", "_createVNode", "_mergeProps", "b", "inherit", "bm", "be", "map", "item", "index", "get", "vnode", "renderSlot", "bind", "empty", "prefixTrap", "createSlotRender", "suffixTrap", "rowProps", "buildProps", "mediaProp", "columnProps", "breakPoints", "ROW_STATE", "justifyList", "alignList", "Row", "defineComponent", "rowProps", "_props", "slots", "props", "useProps", "value", "nh", "useNameHelper", "className", "computed", "style", "horizontal", "vertical", "columnFlex", "provide", "ROW_STATE", "reactive", "toRef", "h", "formProps", "buildProps", "booleanProp", "sizeProp", "mediaProp", "formItemProps", "localeProp", "formSubmitProps", "iconProp", "eventProp", "formResetProps", "FORM_PROPS", "FORM_FIELDS", "FORM_ACTIONS", "FIELD_OPTIONS", "submitMethods", "labelAligns", "props", "useProps", "__props", "value", "submitMethods", "labelAligns", "createSizeProp", "nh", "useNameHelper", "fieldSet", "reactive", "className", "computed", "labelWidth", "field", "provide", "FORM_PROPS", "FORM_FIELDS", "FORM_ACTIONS", "getLabelWidth", "validate", "validateFields", "reset", "resetFields", "clearError", "clearFieldsError", "__expose", "getPropMap", "propMap", "validateItems", "fields", "prop", "items", "validations", "item", "resolve", "errors", "getValueByPath", "obj", "path", "strict", "lastKey", "i", "len", "key", "isNull", "setValueByPath", "value", "defaultProp", "computed", "defaultState", "defaultFalse", "defaultSize", "getEmptyActions", "noop", "v", "useFieldStore", "onFocus", "instance", "getCurrentInstance", "fieldOptions", "inject", "FIELD_OPTIONS", "provide", "onBeforeUnmount", "clearField", "defaultValue", "DEFAULT_MESSAGE", "N_100_200", "IPV4_FIRST", "IPV4_UNIT", "IPV4_REG", "HOST_REG", "PARAM_REG", "URL_REG", "EMAIL_REG", "TYPE_LIST", "validate", "rules", "value", "model", "validateAll", "defaultMsg", "errors", "rule", "message", "validator", "result", "isPromise", "error", "errorMessage", "validateRequirement", "isDefined", "validateEnumeration", "validateType", "isObject", "options", "enumSet", "item", "type", "validateString", "validateNumber", "validateBoolean", "validateInt", "validateFloat", "validateDate", "validateUrl", "isColor", "validateEmail", "length", "range", "min", "max", "strict", "number", "toNumber", "toDate", "selectProps", "buildProps", "sizeProp", "stateProp", "localeProp", "booleanProp", "iconProp", "valuesProp", "classProp", "booleanStringProp", "booleanNumberProp", "eventProp", "defaultKeyConfig", "isSameValue", "newValue", "oldValue", "isNewArray", "isOldArray", "i", "len", "isNull", "_sfc_main", "defineComponent", "Icon", "NativeScroll", "Option", "Overflow", "Popper", "Tag", "Tooltip", "VirtualList", "selectProps", "_props", "emit", "slots", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "focus", "nh", "useNameHelper", "props", "useProps", "createSizeProp", "createStateProp", "createIconProp", "value", "placementWhileList", "locale", "useLocale", "toRef", "currentVisible", "ref", "currentLabels", "currentValues", "currentIndex", "placement", "transfer", "baseOptions", "currentFilter", "anchorWidth", "userOptions", "restTagCount", "restTipShow", "composing", "isMounted", "useMounted", "dynamicOption", "reactive", "optionValues", "hittingOption", "optionStates", "computed", "visibleOptions", "keyConfig", "wrapper", "useClickOutside", "handleClickOutside", "input", "device", "virtualList", "popper", "restTip", "reference", "transferTo", "updatePopper", "usePopper", "_a", "isHover", "useHover", "cachedSelected", "optionValueMap", "emittedValue", "updateTrigger", "watchEffect", "watch", "initOptionState", "valueKey", "labelKey", "disabledKey", "dividedKey", "titleKey", "groupKey", "childrenKey", "oldMap", "map", "states", "loop", "option", "depth", "parent", "rawOption", "group", "label", "divided", "title", "children", "oldState", "optionState", "child", "initValueAndLabel", "useModifier", "event", "modifier", "toggleVisible", "setVisible", "decide", "options", "length", "step", "index", "updateHitting", "handleSelect", "totalOptions", "showDynamic", "className", "readonly", "selectorClass", "baseCls", "hasPrefix", "hasValue", "normalOptions", "optionParentMap", "showClear", "previewOption", "limited", "showPlaceholder", "getOptionFromMap", "fitPopperWidth", "initHittingIndex", "syncInputValue", "filterOptions", "onMounted", "normalizedValue", "valueSet", "selectedValues", "selectedLabels", "cachedValue", "t", "visible", "emitEvent", "hitting", "ensureInView", "isSelected", "inputValue", "filter", "ignoreCaseValue", "parentMap", "handleTagClose", "handleRestTagClose", "selected", "a", "item", "removeArrayItem", "newOption", "handleChange", "v", "prevValue", "handleClear", "focused", "handleFocus", "handleBlur", "handleFilterInput", "hittingIndex", "getRangeWidth", "handleCompositionEnd", "handleFilterKeyDown", "getLast", "toggleShowRestTip", "nextTick", "_b", "useIcons", "_resolveComponent", "_openBlock", "_createElementBlock", "_ctx", "_normalizeClass", "_cache", "args", "$event", "_normalizeStyle", "_renderSlot", "_createVNode", "_component_Icon", "e", "_createCommentVNode", "_createElementVNode", "_Fragment", "_component_Overflow", "_withCtx", "value", "index", "_component_Tag", "_withModifiers", "m", "count", "_createBlock", "_hoisted_2", "_component_Tooltip", "_component_NativeScroll", "_renderList", "C", "l", "_hoisted_3", "s", "R", "_toDisplayString", "_mergeProps", "_Transition", "_component_Popper", "_component_VirtualList", "option", "_hoisted_5", "_component_Option", "autoCompleteProps", "buildProps", "sizeProp", "stateProp", "localeProp", "booleanStringProp", "iconProp", "booleanProp", "eventProp", "select", "ref", "control", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "nh", "useNameHelper", "props", "useProps", "__props", "createSizeProp", "createStateProp", "createIconProp", "value", "placementWhileList", "emit", "__emit", "slots", "_useSlots", "locale", "useLocale", "toRef", "timer", "useSetTimeout", "currentValue", "currentIndex", "currentVisible", "composing", "changed", "lastValue", "lastInput", "isReadonly", "computed", "optionStates", "filteredOptions", "hasPrefix", "hasSuffix", "watch", "computeHitting", "watchEffect", "__expose", "options", "onMounted", "nextTick", "isNull", "hitting", "index", "focused", "handleFocus", "event", "emitEvent", "handleBlur", "handleChange", "handleSelect", "data", "prevValue", "handleInputInternal", "testOptionCanDrop", "delay", "toNumber", "handleInput", "debounce", "throttle", "valid", "option", "beforeVisible", "inClickProcess", "beforeClick", "handleClick", "handleToggle", "visible", "handleKeyDown", "key", "handleEnter", "length", "step", "i", "handleClear", "handleCompositionEnd", "avatarProps", "buildProps", "iconProp", "booleanProp", "eventProp", "avatarGroupProps", "GROUP_STATE", "objectFitValues", "props", "useProps", "__props", "createIconProp", "value", "objectFitValues", "groupState", "inject", "GROUP_STATE", "nh", "useNameHelper", "loadFail", "ref", "fallbackFail", "wrapper", "text", "size", "computed", "className", "style", "watch", "scaleText", "__expose", "handleError", "event", "emitEvent", "lastText", "avatarEl", "textEl", "avatarWidth", "avatarHeight", "textWidth", "textHeight", "padding", "ratio", "handleClick", "props", "useProps", "__props", "nh", "useNameHelper", "renderAvatars", "ref", "restAvatars", "watchEffect", "size", "provide", "GROUP_STATE", "className", "computed", "style", "badgeProps", "buildProps", "booleanProp", "eventProp", "badgeTypes", "props", "useProps", "__props", "value", "badgeTypes", "slots", "_useSlots", "nh", "useNameHelper", "hasSlot", "computed", "className", "renderContent", "transitionName", "title", "showSub", "handleBadgeClick", "event", "emitEvent", "rendererProps", "wrapProps", "Renderer", "defineComponent", "rendererProps", "props", "slots", "renderSlot", "breadcrumbProps", "buildProps", "booleanProp", "eventProp", "breadcrumbItemProps", "wrapProps", "BREADCRUMB_STATE", "props", "__props", "nh", "useNameHelper", "breadcrumbState", "inject", "BREADCRUMB_STATE", "currentLabel", "ref", "separator", "separatorRenderer", "watch", "value", "state", "reactive", "onBeforeUnmount", "handleClick", "emitEvent", "handleSeparatorClick", "props", "useProps", "__props", "slots", "_useSlots", "nh", "useNameHelper", "itemStates", "className", "computed", "normalizedOptions", "_a", "matched", "options", "route", "meta", "option", "refreshLabels", "debounceMinor", "item", "index", "isNull", "state", "reactive", "toRef", "increaseItem", "decreaseItem", "handleSelect", "handleSeparatorClick", "provide", "BREADCRUMB_STATE", "watch", "value", "data", "label", "emitEvent", "bubbleProps", "buildProps", "booleanStringProp", "classProp", "bubbleTypes", "props", "useProps", "__props", "value", "placementWhileList", "bubbleTypes", "nh", "useNameHelper", "wrapper", "ref", "arrow", "className", "computed", "style", "__expose", "r", "B", "buttonProps", "buildProps", "sizeProp", "booleanProp", "iconProp", "eventProp", "buttonGroupProps", "GROUP_STATE", "buttonTypes", "defineComponent", "name", "props", "buttonProps", "emits", "setup", "_props", "slots", "fieldActions", "inject", "FIELD_OPTIONS", "useProps", "size", "createSizeProp", "undefined", "type", "default", "validator", "value", "buttonTypes", "includes", "dashed", "text", "simple", "ghost", "disabled", "loading", "circle", "loadingIcon", "createIconProp", "loadingEffect", "icon", "color", "buttonType", "block", "tag", "noPulse", "badge", "groupState", "GROUP_STATE", "nh", "useNameHelper", "icons", "useIcons", "pulsing", "ref", "index", "isLast", "isIconOnly", "computed", "className", "b", "bs", "bm", "inherit", "colorMap", "rootStyle", "isClient", "getComputedStyle", "document", "documentElement", "black", "parseColorToRgba", "getPropertyValue", "nv", "white", "baseColor", "base", "toString", "light2", "mixColor", "dark1", "opacity1", "adjustAlpha", "opacity3", "opacity4", "opacity7", "opacity8", "white8", "white9", "style", "cvm", "gnv", "state", "reactive", "increaseItem", "onBeforeUnmount", "decreaseItem", "handleClick", "event", "button", "requestAnimationFrame", "emitEvent", "onClick", "handleAnimationEnd", "renderLoadingIcon", "_createVNode", "be", "bem", "Icon", "_mergeProps", "effect", "renderSingleIcon", "renderCollapseIcon", "CollapseTransition", "renderBadge", "badgeType", "Badge", "Button", "props", "useProps", "__props", "value", "buttonTypes", "nh", "useNameHelper", "itemStates", "reactive", "size", "toRef", "type", "className", "computed", "itemList", "refreshIndexes", "debounceMinor", "i", "len", "item", "provide", "GROUP_STATE", "increaseItem", "decreaseItem", "colProps", "Column", "defineComponent", "columnProps", "_props", "slots", "props", "useProps", "rowState", "inject", "ROW_STATE", "nh", "useNameHelper", "provide", "className", "computed", "columnFlex", "prop", "breakPoints", "size", "sizeProp", "value", "style", "flex", "numberInputProps", "buildProps", "sizeProp", "stateProp", "localeProp", "iconProp", "booleanProp", "classProp", "eventProp", "isEmpty", "value", "isNullOrNaN", "isNull", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "focus", "props", "useProps", "__props", "createSizeProp", "createStateProp", "createIconProp", "emit", "__emit", "slots", "_useSlots", "nh", "useNameHelper", "locale", "useLocale", "toRef", "icons", "useIcons", "timeout", "interval", "useTimerRecord", "focused", "ref", "currentValue", "inputting", "plusHolding", "minusHolding", "control", "wrapper", "isHover", "useHover", "useModifier", "event", "modifier", "emitEvent", "plusDisabled", "minusDisabled", "changeStep", "emitChangeEvent", "handleEnter", "lastValue", "outOfRange", "computed", "toNumber", "isReadonly", "className", "display", "fade", "hasPrefix", "hasSuffix", "preciseNumber", "toFixed", "formattedValue", "hasValue", "showClear", "inputValue", "delay", "handleInput", "debounce", "handleChange", "throttle", "watch", "parseValue", "__expose", "_a", "boundValueRange", "boundRange", "isValidNumber", "getEmptyValue", "options", "handleFocus", "handleBlur", "handleHold", "type", "change", "plusNumber", "minusNumber", "cancelStep", "step", "stringValue", "plus", "minus", "setValue", "floatValue", "sync", "empty", "boundValue", "changed", "handleClear", "handlePrefixClick", "handleSuffixClick", "handleKeyPress", "calendarProps", "buildProps", "localeProp", "eventProp", "calendarPanelProps", "booleanProp", "props", "useProps", "__props", "value", "e", "toFalse", "emit", "__emit", "nh", "useNameHelper", "startValue", "ref", "endValue", "dateRange", "hoveredDate", "wrapper", "isHover", "useHover", "locale", "useLocale", "toRef", "min", "computed", "startOfDay", "max", "endOfDay", "reversed", "updateDateRange", "debounceMinor", "setDateRange", "parseValue", "watch", "emitEvent", "__expose", "isSelected", "isHovered", "isPrevMonth", "isNextMonth", "isDisabled", "isToday", "isInRange", "getWeekLabel", "index", "_a", "rangeDate", "startOfWeek", "i", "date", "differenceDays", "time", "year", "month", "dateYear", "dateMonth", "handleClick", "handleHover", "startTime", "endTime", "hoveredTime", "selectedTime", "minTime", "maxTime", "props", "useProps", "__props", "value", "e", "emit", "__emit", "nh", "useNameHelper", "locale", "useLocale", "toRef", "calendarValue", "ref", "calendarYear", "calendarMonth", "watch", "__expose", "formatYearInput", "formatMonthInput", "isDisabled", "date", "handleClick", "emitEvent", "handleYearChange", "handleMonthChange", "captchaProps", "buildProps", "iconProp", "booleanProp", "sizeProp", "booleanStringProp", "eventProp", "captchaSliderProps", "idFor", "disabled", "loading", "size", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "focus", "props", "useProps", "__props", "createSizeProp", "value", "e", "createIconProp", "nh", "useNameHelper", "locale", "useLocale", "icons", "useIcons", "timer", "useSetTimeout", "currentLeft", "ref", "testing", "resetting", "isSuccess", "testLoading", "track", "readonly", "computed", "widthLimit", "trigger", "dragging", "useMoving", "_", "event", "verifyPosition", "emitEvent", "state", "matched", "matchTarget", "customResult", "nextTick", "_a", "isLoading", "className", "baseCls", "fillerStyle", "tipStyle", "triggerStyle", "watch", "reset", "__expose", "toFixed", "boundRange", "afterReset", "options", "squarePath", "ctx", "x", "y", "width", "height", "side", "halfSide", "puzzlePath", "left", "top", "radius", "shieldPath", "heartPath", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "defineComponent", "name", "props", "captchaProps", "emits", "setup", "_props", "slots", "expose", "idFor", "disabled", "loading", "validateField", "setFieldValue", "useFieldStore", "focus", "useProps", "type", "slideTarget", "default", "validator", "value", "isNull", "Array", "isArray", "title", "tip", "successTip", "failTip", "image", "tolerance", "canvasSize", "refreshIcon", "createIconProp", "loadingIcon", "loadingEffect", "onBeforeTest", "isFunc", "texts", "find", "text", "length", "failLimit", "remotePoint", "useTrigger", "triggerSize", "createSizeProp", "triggerText", "transfer", "hideDelay", "hollowShape", "squarePath", "nh", "useNameHelper", "locale", "useLocale", "icons", "useIcons", "timer", "useSetTimeout", "currentTarget", "ref", "parseTarget", "dragging", "pointers", "reactive", "testLoading", "success", "failed", "failedCount", "visible", "wrapper", "canvas", "subCanvas", "slider", "track", "computed", "isSuccess", "currentLeft", "resetting", "usedTarget", "imageLoading", "imagePromise", "shallowRef", "Promise", "resolve", "pointerTargets", "fontRate", "imageLoaded", "memoryCanvas", "isLoading", "failLocked", "className", "b", "bs", "bm", "subCanvasStyle", "left", "cv", "undefined", "actionLocked", "watch", "loadImage", "drawImageNextFrame", "console", "warn", "immediate", "clearTimeout", "hideTrigger", "setTimeout", "onMounted", "drawImage", "reset", "loadFlag", "Date", "now", "Math", "round", "random", "flag", "src", "isClient", "Image", "trim", "startsWith", "onload", "finally", "drawImageWithTexts", "canvasEl", "ctx", "getContext", "width", "height", "fontSize", "max", "textBaseline", "textAlign", "font", "lineWidth", "strokeStyle", "drawText", "x", "y", "radian", "color", "randomHardColor", "save", "translate", "rotate", "PI", "fillStyle", "fillText", "strokeText", "restore", "metrics", "measureText", "xLimit", "yLimit", "fontBoundingBoxAscent", "fontBoundingBoxDescent", "prevX", "prevY", "abs", "push", "getHollowProcess", "puzzlePath", "shieldPath", "heartPath", "subCanvasEl", "subCtx", "document", "createElement", "pathCtx", "clearRect", "canvasRect", "getBoundingClientRect", "trackRect", "widthFix", "targetX", "targetY", "hollowProcess", "beginPath", "clipX", "clipY", "clipWidth", "clipHeight", "stroke", "clip", "xLeftWidth", "translateFix", "style", "transform", "fill", "globalCompositeOperation", "nextFrameOnce", "newImage", "target", "ensureArray", "options", "handleDragStart", "percent", "emitEvent", "onDragStart", "handleDrag", "onDrag", "handleDragEnd", "onDragEnd", "handleSlideSuccess", "onSuccess", "handleSlideFail", "onFail", "handleRefresh", "onRefresh", "stopPropagation", "event", "verifyPointers", "result", "customResult", "xTolerance", "yTolerance", "i", "len", "nextTick", "flat", "handleImageClick", "clientWidth", "canvasWidth", "clientHeight", "canvasHeight", "offsetX", "offsetY", "cancelPointer", "index", "pop", "handleTrigger", "renderImage", "_slot", "_createVNode", "be", "bem", "TransitionGroup", "ns", "map", "top", "bind", "Transition", "fail", "renderSlider", "CaptchaSlider", "renderSlot", "slide", "renderTextList", "pointInOrder", "toRef", "renderFooter", "renderPanel", "doCaptcha", "Icon", "_mergeProps", "refresh", "icon", "Spin", "createSlotRender", "renderTrigger", "Button", "completed", "trigger", "Tooltip", "cardProps", "buildProps", "styleProp", "props", "useProps", "__props", "value", "slots", "_useSlots", "nh", "useNameHelper", "className", "computed", "hasTitle", "hasExtra", "hasHeader", "carouselProps", "buildProps", "booleanProp", "booleanNumberProp", "eventProp", "CAROUSEL_STATE", "_sfc_main", "defineComponent", "Icon", "carouselProps", "_props", "emit", "props", "useProps", "t", "value", "nh", "useNameHelper", "icons", "useIcons", "hoverDelay", "useHoverDelay", "isRtl", "useRtl", "itemStates", "ref", "currentActive", "isLocked", "arrowActive", "listRect", "reactive", "trackRect", "itemRect", "wrapper", "isHover", "useHover", "prev", "next", "isDisabled", "computed", "className", "style", "listStyle", "trackStyle", "disabledPrev", "disabledNext", "arrowIcons", "watch", "handleWheel", "handleMouseEnter", "handleMouseLeave", "refresh", "setAutoplay", "refreshLabels", "debounceMinor", "item", "index", "updateItemRect", "state", "updateListRect", "provide", "CAROUSEL_STATE", "toRef", "increaseItem", "decreaseItem", "isItemActive", "handleSelect", "inTransition", "shouldReset", "observer", "onMounted", "computeItemRect", "handleAfterMove", "onBeforeUnmount", "label", "prevFix", "nextFix", "handlePrev", "handleNext", "emitChangeEvent", "active", "emitEvent", "amount", "itemLength", "itemList", "itemCount", "targetIndex", "prevActive", "i", "anchorIndex", "len", "forward", "back", "handlePrevClick", "handleNextClick", "timer", "useSetTimeout", "waiting", "isPointerDisabled", "_resolveComponent", "_openBlock", "_createElementBlock", "_normalizeClass", "_ctx", "_normalizeStyle", "e", "_createElementVNode", "_cache", "args", "_renderSlot", "_createVNode", "_component_Icon", "_mergeProps", "_createCommentVNode", "_withModifiers", "_Fragment", "_renderList", "index", "$event", "_sfc_main", "defineComponent", "carouselState", "inject", "CAROUSEL_STATE", "nh", "useNameHelper", "state", "reactive", "active", "computed", "className", "style", "width", "height", "offset", "onBeforeUnmount", "handleClick", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "_normalizeStyle", "args", "e", "checkboxProps", "buildProps", "sizeProp", "stateProp", "booleanProp", "classProp", "eventProp", "checkboxGroupProps", "localeProp", "booleanStringProp", "GROUP_STATE", "_sfc_main", "defineComponent", "checkboxProps", "_props", "slots", "emit", "idFor", "state", "disabled", "loading", "size", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "input", "props", "useProps", "createSizeProp", "createStateProp", "groupState", "inject", "GROUP_STATE", "nh", "useNameHelper", "currentChecked", "ref", "currentPartial", "controlState", "reactive", "computedSize", "computed", "computedState", "isDisabled", "isLoading", "isLoadingLock", "stateColor", "readonly", "className", "colorMap", "baseColor", "parseColorToRgba", "adjustAlpha", "style", "base", "opacity6", "hasLabel", "isDefined", "hasSlot", "currentValue", "watch", "value", "setCurrentChecked", "increased", "prevValue", "isFunction", "onMounted", "onBeforeUnmount", "emitCheckEvent", "checked", "emitEvent", "handleChange", "handleClick", "event", "options", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeStyle", "args", "_createElementVNode", "_normalizeClass", "_withModifiers", "$event", "_hoisted_2", "e", "_sfc_main", "defineComponent", "Checkbox", "Icon", "Option", "VirtualList", "props", "emit", "nh", "useNameHelper", "icons", "useIcons", "isRtl", "useRtl", "currentHitting", "ref", "list", "wrapper", "useModifier", "event", "modifier", "decide", "isSelected", "boundRange", "findEnabledIndex", "ensureOptionInView", "option", "hasChildren", "handleToggleCheck", "handleSelect", "listHeight", "hoverTimer", "watch", "computeListHeight", "_a", "onMounted", "onBeforeUnmount", "handleMouseLeave", "isCheckboxDisabled", "index", "handleMouseEnter", "el", "style", "paddingTop", "paddingBottom", "queryEnabledIndex", "step", "options", "sign", "direction", "optionHeight", "target", "_resolveComponent", "_openBlock", "_createElementBlock", "_normalizeClass", "_ctx", "_cache", "args", "_createVNode", "_component_VirtualList", "e", "_withCtx", "item", "index", "_component_Option", "$event", "_renderSlot", "_createBlock", "_component_Checkbox", "t", "l", "_createCommentVNode", "_createElementVNode", "_component_Icon", "_normalizeProps", "_mergeProps", "_Fragment", "cascaderProps", "buildProps", "sizeProp", "stateProp", "localeProp", "booleanProp", "iconProp", "booleanStringProp", "eventProp", "ID_KEY", "PARENT_KEY", "defaultKeyConfig", "_sfc_main", "defineComponent", "CascaderPanel", "Icon", "NativeScroll", "Overflow", "Popper", "Tag", "Tooltip", "cascaderProps", "_props", "emit", "slots", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "reference", "nh", "useNameHelper", "props", "useProps", "createSizeProp", "createStateProp", "createIconProp", "value", "placementWhileList", "icons", "useIcons", "locale", "useLocale", "toRef", "currentVisible", "ref", "currentValues", "currentLabels", "mergedValues", "mergedLabels", "isPopperShow", "placement", "transfer", "emittedValue", "optionTree", "isAsyncLoad", "computed", "optionList", "optionIdMap", "optionValueMap", "outsideClosed", "prevClosedId", "flattedOptions", "updateTrigger", "watchEffect", "flatTree", "watch", "initOptionStates", "separator", "isAsync", "createOptionStates", "i", "len", "option", "initOptionFull", "queryChildrenLoaded", "transformTree", "initValueAndLabel", "openedIds", "optionsList", "id", "wrapper", "useClickOutside", "handleClickOutside", "popper", "transferTo", "updatePopper", "usePopper", "isHover", "useHover", "panelElList", "restTagCount", "restTipShow", "selectorWidth", "className", "readonly", "selectorClass", "baseCls", "hasPrefix", "usingMerged", "templateValues", "templateLabels", "hasValue", "usingHover", "showClear", "nextTick", "_b", "getLast", "outsideChanged", "brief", "l", "updateMergedProps", "originalOptions", "updateCheckedUpward", "updateCheckedDown", "emitMultipleChange", "setVisible", "onBeforeUpdate", "rawOptions", "valueKey", "labelKey", "disabledKey", "hasChildKey", "rawOption", "parent", "label", "hasChild", "reactive", "loop", "child", "baseValues", "values", "briefLabel", "isFlatArray", "isComplexArray", "normalizedValue", "valueSet", "v", "selectedValues", "selectedLabels", "selectedOptions", "stringValue", "firstValue", "ids", "visible", "emitEvent", "handlePanelOpen", "depth", "result", "isPromise", "options", "parentId", "idCount", "queryUpstreamOptions", "handleOptionSelect", "handleSingleSelect", "originalOption", "isNull", "s", "item", "checked", "partial", "handleOptionCheck", "dataList", "data", "queryArrayMeta", "fullValue", "emitChangeEvent", "toggleVisible", "handleClear", "prev", "toggleShowRestTip", "handleTipClose", "handlePanelKeyOpen", "panel", "handlePanelBack", "handlePanelsEnter", "_resolveComponent", "_openBlock", "_createElementBlock", "_ctx", "_normalizeClass", "_cache", "$event", "_normalizeStyle", "_renderSlot", "_createVNode", "_component_Icon", "e", "_createCommentVNode", "_createElementVNode", "_createBlock", "_component_Overflow", "_withCtx", "item", "index", "_component_Tag", "_withModifiers", "count", "_hoisted_2", "_component_Tooltip", "_component_NativeScroll", "_Fragment", "_renderList", "_createTextVNode", "_toDisplayString", "_mergeProps", "_Transition", "n", "a", "args", "_normalizeProps", "_guardReactiveProps", "_component_Popper", "items", "panel", "o", "payload", "layoutProp", "gridProps", "buildProps", "booleanProp", "mediaProp", "cellProps", "breakPoints", "currentBreakPoint", "ref", "isClient", "handleBreakPointChange", "point", "query", "queryEntries", "computedStyle", "queryMap", "media", "GRID_STATE", "Cell", "defineComponent", "cellProps", "_props", "slots", "props", "useProps", "gridState", "inject", "GRID_STATE", "nh", "useNameHelper", "provide", "layoutState", "reactive", "layoutKeys", "defaultWidth", "computed", "isDefined", "watch", "currentBreakPoint", "value", "matchSize", "queryBreakPointOptions", "key", "has", "className", "cellFlex", "style", "topSet", "isPositionSet", "rightSet", "bottomSet", "leftSet", "parsePosition", "breakPoint", "index", "breakPoints", "v", "i", "h", "_a", "_sfc_main", "defineComponent", "Checkbox", "checkboxGroupProps", "_props", "emit", "idFor", "state", "disabled", "loading", "size", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "focus", "props", "useProps", "createSizeProp", "createStateProp", "nh", "useNameHelper", "locale", "useLocale", "toRef", "valueMap", "inputSet", "controlSet", "currentValues", "ref", "readonly", "computed", "className", "controlLabel", "colorMap", "baseColor", "parseColorToRgba", "adjustAlpha", "updateValue", "debounceMinor", "checked", "value", "handleChange", "updateControl", "valueLength", "partial", "provide", "GROUP_STATE", "reactive", "increaseItem", "decreaseItem", "increaseControl", "decreaseControl", "handleControlChange", "setItemChecked", "replaceValue", "watch", "checkedValues", "allValues", "input", "isDefined", "emitEvent", "prevValue", "newValue", "options", "_a", "isClient", "isObject", "_resolveComponent", "_openBlock", "_createElementBlock", "_ctx", "_normalizeClass", "o", "_createBlock", "_component_Checkbox", "_Fragment", "_renderList", "item", "index", "e", "COLLAPSE_STATE", "_sfc_main", "defineComponent", "collapseProps", "_props", "emit", "props", "useProps", "value", "nh", "useNameHelper", "panelStates", "reactive", "currentExpanded", "ref", "wrapper", "useModifier", "event", "modifier", "tabs", "index", "panel", "target", "clearExpanded", "className", "computed", "refreshLabels", "debounceMinor", "item", "isNull", "expandPanel", "provide", "COLLAPSE_STATE", "toRef", "registerPanel", "unregisterPanel", "watchEffect", "rawExpanded", "expanded", "onMounted", "nextTick", "updateItemExpanded", "label", "removeArrayItem", "emitChangeEvent", "emitEvent", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "e", "idCount", "_sfc_main", "defineComponent", "CollapseTransition", "Icon", "collapsePanelProps", "_props", "emit", "props", "useProps", "value", "createIconProp", "collapseState", "inject", "COLLAPSE_STATE", "nh", "useNameHelper", "icons", "useIcons", "currentExpanded", "ref", "currentLabel", "tab", "id", "tabId", "computed", "bodyId", "useCard", "useGhost", "useArrowType", "className", "state", "reactive", "setExpanded", "watch", "prevValue", "onBeforeUnmount", "expanded", "emitEvent", "handleToggle", "_resolveComponent", "_normalizeClass", "_ctx", "_createElementVNode", "_cache", "$event", "_createVNode", "_component_Icon", "_normalizeProps", "_guardReactiveProps", "_renderSlot", "_openBlock", "_createElementBlock", "t", "_hoisted_1", "_component_CollapseTransition", "_withCtx", "_normalizeStyle", "e", "inputProps", "buildProps", "sizeProp", "stateProp", "localeProp", "iconProp", "booleanProp", "classProp", "eventProp", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "inputTypes", "freeze", "toNotNullString", "value", "isNull", "String", "defineComponent", "name", "props", "inputProps", "emits", "setup", "_props", "slots", "emit", "expose", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "inputControl", "focus", "useProps", "createSizeProp", "createStateProp", "locale", "type", "default", "validator", "includes", "prefix", "createIconProp", "prefixColor", "suffix", "suffixColor", "formatter", "isFunc", "static", "placeholder", "autofocus", "spellcheck", "autocomplete", "readonly", "controlClass", "debounce", "delay", "maxLength", "before", "after", "plainPassword", "clearable", "loadingIcon", "loadingLock", "loadingEffect", "transparent", "sync", "controlAttrs", "initValue", "nh", "useNameHelper", "icons", "useIcons", "focused", "ref", "currentValue", "showPassword", "currentLength", "length", "beforeHover", "afterHover", "composing", "wrapper", "control", "isHover", "useHover", "useLocale", "toRef", "lastValue", "hasBefore", "computed", "beforeAction", "hasAfter", "afterAction", "basisClass", "bs", "bm", "inherit", "className", "b", "wrapperClass", "hasPrefix", "hasSuffix", "inputType", "formattedValue", "passwordIcon", "plainText", "cipherText", "hasValue", "showClear", "watch", "limitValueLength", "immediate", "flush", "input", "copyValue", "options", "blur", "handleFocus", "event", "emitEvent", "onFocus", "handleBlur", "setTimeout", "onBlur", "emitChangeEvent", "handleChange", "target", "setValue", "parseFloat", "onChange", "onInput", "slice", "toggleShowPassword", "nextTick", "handleClear", "stopPropagation", "onClear", "handleEnter", "onEnter", "handlePrefixClick", "onPrefixClick", "handleSuffixClick", "onSuffixClick", "handleKeyDown", "onKeyDown", "handleKeyPress", "onKeyPress", "handleKeyUp", "key", "onKeyUp", "handleCompositionStart", "onCompositionStart", "handleCompositionEnd", "dispatchEvent", "Event", "document", "createElement", "style", "height", "setAttribute", "body", "appendChild", "select", "isSuccess", "execCommand", "removeChild", "preventDefault", "toNumber", "handleInput", "throttle", "renderPrefix", "_createVNode", "be", "color", "renderSlot", "undefined", "Icon", "renderCustomSuffix", "opacity", "bem", "renderSuffixAction", "_mergeProps", "clear", "effect", "icon", "renderSuffix", "_slot", "Transition", "ns", "renderCount", "Infinity", "renderPlainPassword", "plain", "renderControl", "onClick", "class", "renderAside", "buttonSlot", "onMouseenter", "onMouseleave", "methods", "noop", "_sfc_main", "defineComponent", "value", "props", "emit", "currentTop", "ref", "currentLeft", "prevTop", "prevLeft", "widthLimit", "heightLimit", "topStartAt", "leftStartAt", "wrapper", "useModifier", "event", "modifier", "step", "sign", "delta", "verifyPosition", "handleChange", "editing", "useMoving", "state", "rect", "top", "left", "width", "height", "changed", "watch", "toFixed", "boundRange", "useNameHelper", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "_createElementVNode", "_normalizeStyle", "e", "_sfc_main", "defineComponent", "value", "props", "emit", "currentLeft", "ref", "prevLeft", "widthLimit", "leftStartAt", "wrapper", "useModifier", "event", "modifier", "delta", "verifyPosition", "handleChange", "editing", "useMoving", "state", "rect", "left", "width", "watch", "toFixed", "boundRange", "useNameHelper", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "_createElementVNode", "e", "_sfc_main", "defineComponent", "value", "props", "emit", "currentLeft", "ref", "prevLeft", "widthLimit", "leftStartAt", "wrapper", "useModifier", "event", "modifier", "delta", "verifyPosition", "handleChange", "editing", "useMoving", "state", "rect", "left", "width", "rgbString", "computed", "r", "g", "b", "watch", "toFixed", "boundRange", "useNameHelper", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "_createElementVNode", "e", "colorPickerProps", "buildProps", "sizeProp", "stateProp", "localeProp", "booleanProp", "booleanStringProp", "iconProp", "eventProp", "defaultShortcuts", "getDefaultHsv", "rgbToHsv", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "reference", "nh", "useNameHelper", "props", "useProps", "__props", "createSizeProp", "createStateProp", "e", "value", "placementWhileList", "createIconProp", "emit", "__emit", "slots", "_useSlots", "icons", "useIcons", "locale", "useLocale", "toRef", "isEmpty", "ref", "currentVisible", "currentValue", "currentAlpha", "editing", "placement", "transfer", "shortcutHitting", "shortcutsFocused", "parseValue", "palette", "hue", "alphaEl", "shortcutEl", "input", "cancel", "confirm", "wrapper", "useClickOutside", "handleClickOutside", "popper", "transferTo", "updatePopper", "usePopper", "computed", "isHover", "useHover", "unitList", "lastValue", "className", "readonly", "selectorClass", "baseCls", "rgb", "h", "s", "v", "hsvToRgb", "hex", "r", "g", "b", "rgbaToHex", "rgbToHex", "shortcutList", "defaultShortcuts", "hasPrefix", "showClear", "formattedColor", "getFormattedColor", "labelColor", "watch", "setVisible", "__expose", "toggleVisible", "focus", "blur", "a", "parseColorToRgba", "rgbToHsv", "getDefaultHsv", "visible", "emitEvent", "format", "color", "hsvToHsl", "toFixed", "handleClear", "nextTick", "handleConfirm", "handleChange", "handlePaletteChange", "handleHueChange", "handleAlphaChange", "alpha", "handleInputColor", "handleShortcutClick", "toggleEditing", "able", "handleTabDown", "event", "isClient", "activeEl", "shift", "elList", "index", "unit", "el", "isElement", "maybeEl", "getLast", "handleShortcutsFocus", "handleShortcutsKeydown", "key", "shortcutCount", "handleSpaceDown", "handleEscDown", "options", "configProviderProps", "wrapProps", "defineComponent", "name", "props", "configProviderProps", "setup", "_props", "slots", "locale", "icons", "zIndex", "theme", "hoverDelay", "toRefs", "nh", "useNameHelper", "configProps", "configLocale", "configIcons", "configZIndex", "configHoverDelay", "value", "_createVNode", "b", "ns", "renderSlot", "maskerProps", "buildProps", "booleanProp", "booleanStringProp", "eventProp", "nh", "useNameHelper", "props", "useProps", "__props", "emit", "__emit", "getIndex", "useZIndex", "currentActive", "ref", "zIndex", "wrapShow", "wrapper", "topTrap", "bottomTrap", "showing", "prevFocusedEl", "transferTo", "computed", "className", "watch", "value", "afterOpen", "afterClose", "disableWheel", "__expose", "event", "toggleActive", "active", "emitEvent", "handleClose", "result", "isPromise", "nextTick", "activeEl", "_a", "handleMaskClick", "handleFocusIn", "target", "tabables", "queryTabables", "getLast", "handleResize", "entry", "positionType", "positionValidator", "value", "positionProp", "modalProps", "buildProps", "localeProp", "booleanStringProp", "booleanProp", "classProp", "styleProp", "sizeProp", "eventProp", "index", "getIdIndex", "nh", "useNameHelper", "props", "useProps", "__props", "positionProp", "createSizeProp", "emit", "__emit", "slots", "_useSlots", "locale", "useLocale", "toRef", "icons", "useIcons", "isSpecified", "value", "isNull", "normalizeStyle", "isValidNumber", "toNumber", "currentActive", "ref", "rect", "reactive", "maskerRect", "modalRect", "idIndex", "getIdIndex", "transformed", "masker", "wrapper", "footer", "uselessTop", "computed", "uselessLeft", "header", "dragging", "useMoving", "state", "event", "transferRect", "emitEvent", "resizer", "resizing", "minHeight", "width", "height", "className", "wrapperClass", "transform", "transforms", "wrapperStyle", "transformOrigin", "origin", "top", "bottom", "left", "right", "hasTitle", "titleId", "bodyId", "style", "watch", "handleResize", "nextTick", "computeTop", "computeLeft", "_a", "__expose", "handleConfirm", "handleCancel", "handleClose", "slotParams", "shallowReadonly", "setActive", "active", "findPositionalParent", "parentElement", "currentHeight", "currentWidth", "withSize", "offsetWidth", "offsetHeight", "offsetTop", "offsetLeft", "isConfirm", "result", "isPromise", "handleShow", "handleHide", "handleMaskClose", "handleModalResize", "entry", "box", "useModal", "options", "isClient", "noop", "appContext", "renderer", "headerRenderer", "titleRenderer", "closeRenderer", "footerRenderer", "onHide", "props", "active", "ref", "instance", "getCurrentInstance", "container", "app", "vnode", "createVNode", "createModal", "render", "createApp", "nextTick", "h", "Component", "destroy", "Modal", "positionType", "confirmProps", "buildProps", "localeProp", "booleanProp", "classProp", "styleProp", "positionValidator", "value", "positionProp", "confirmButtonTypes", "props", "useProps", "__props", "nh", "useNameHelper", "icons", "useIcons", "locale", "useLocale", "toRef", "commonProps", "state", "reactive", "prev", "current", "rendererR", "ref", "beforeConfirmR", "onConfirm", "onCancel", "mountedPromise", "resolve", "onMounted", "nextTick", "__expose", "openConfirm", "handleReset", "options", "prop", "isFunction", "render", "handleConfirm", "handleCancel", "result", "isPromise", "Component", "ConfirmManager", "options", "__publicField", "title", "type", "isClient", "item", "markRaw", "_a", "manager", "_b", "render", "destroyObject", "app", "property", "others", "target", "el", "unrefElement", "createApp", "vnode", "createVNode", "proxyExposed", "Confirm", "SELECT_HANDLER", "DROPDOWN_STATE", "DropdownDrop", "defineComponent", "_", "slots", "dropdownState", "inject", "DROPDOWN_STATE", "provide", "SELECT_HANDLER", "renderSlot", "dropdownProps", "buildProps", "booleanProp", "booleanStringProp", "classProp", "eventProp", "dropdownItemProps", "wrapProps", "useLabel", "rawLabel", "element", "label", "ref", "setLabel", "value", "_a", "watch", "onMounted", "nextTick", "nh", "useNameHelper", "props", "useProps", "__props", "value", "placementWhileList", "e", "emit", "__emit", "parentState", "inject", "DROPDOWN_STATE", "isRtl", "useRtl", "hoverDelay", "useHoverDelay", "isNested", "label", "toRef", "placement", "ref", "currentVisible", "popperAlive", "transfer", "wrapper", "useClickOutside", "handleClickOutside", "popper", "reference", "transferTo", "updatePopper", "usePopper", "computed", "_a", "currentLabel", "useLabel", "className", "isAlive", "provide", "SELECT_HANDLER", "reactive", "handleSelect", "handleTriggerEnter", "handleTriggerLeave", "watch", "setPlacement", "onMounted", "nextTick", "__expose", "handleTriggerClick", "setVisible", "visible", "emitEvent", "labels", "metaList", "xPlacement", "timer", "useSetTimeout", "nh", "useNameHelper", "props", "__props", "parentSelectHandler", "inject", "SELECT_HANDLER", "nh", "useNameHelper", "wrapper", "ref", "label", "toRef", "isReference", "currentLabel", "useLabel", "className", "computed", "baseClass", "__expose", "handleSelect", "emitEvent", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "renderItemIcon", "item", "nh", "icon", "_createVNode", "be", "Icon", "color", "iconColor", "style", "renderItemShortcut", "shortcut", "renderGroupItem", "icons", "useIcons", "isRtl", "useRtl", "Dropdown", "_mergeProps", "onContextmenu", "event", "preventDefault", "stopPropagation", "default", "DropdownItem", "key", "divided", "disabled", "renderer", "label", "value", "angleLeft", "angleRight", "drop", "_slot", "DropdownList", "children", "some", "c", "bem", "length", "map", "i", "renderItem", "config", "nh", "useNameHelper", "isRtl", "useRtl", "visible", "ref", "configs", "appear", "position", "reactive", "onSelect", "onCancel", "openContextmenu", "options", "resolve", "keys", "afterContextmenu", "handleSelect", "isFunction", "handleCancel", "__expose", "l", "r", "De", "ContextmenuManager", "__publicField", "options", "isClient", "target", "others", "_a", "_b", "render", "destroyObject", "app", "property", "innerApp", "container", "unmount", "createApp", "Component", "vnode", "createVNode", "proxyExposed", "unrefElement", "Contextmenu", "DisabledType", "DisabledType2", "datePickerTypes", "invalidDate", "TIME_REG", "numberKeys", "_", "i", "isNumberKey", "key", "num", "handleKeyEnter", "event", "type", "isMatch", "inputtedNumber", "f", "useColumn", "colTypes", "currentColumn", "ref", "columnTypes", "columnCount", "enabled", "reactive", "prev", "current", "findEnabledColumn", "types", "resetColumn", "reverse", "index", "column", "enterColumn", "canLoop", "getLast", "rawTypes", "nextIndex", "defaultMin", "defaultMax", "useTimeBound", "originMin", "originMax", "minUnits", "computed", "toNumber", "maxUnits", "reversed", "min", "max", "isTimeDisabled", "isHourDisabled", "hour", "minute", "isMinuteDisabled", "DisabledType", "second", "isSecondDisabled", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "wrapper", "ref", "isActivated", "computed", "type", "className", "showTimeUnits", "formattedYear", "formatValue", "formattedMonth", "formattedDate", "formattedHour", "formattedMinute", "formattedSecond", "__expose", "_a", "isYear", "filler", "doubleDigits", "getUnitFocusClass", "handleInputFocus", "handleInput", "event", "handleKeyEnter", "handleBlur", "scrollProps", "buildProps", "classProp", "styleProp", "booleanProp", "booleanNumberProp", "eventProp", "useScrollWrapper", "mode", "disabled", "width", "height", "scrollX", "scrollY", "onResize", "onBeforeRefresh", "onAfterRefresh", "manualRef", "triggerUpdate", "useManualRef", "wrapperEl", "ref", "contentEl", "wrapper", "reactive", "toNumber", "content", "x", "y", "isReady", "percentX", "percentY", "xScrollLimit", "computed", "yScrollLimit", "enableXScroll", "enableYScroll", "xBarLength", "yBarLength", "watch", "refreshWrapper", "computeContentSize", "value", "verifyScroll", "computeWrapperSize", "sizeType", "nextTick", "size", "titleCaseSizeType", "promises", "timer", "resolve", "computePercent", "multipleFixed", "handleResize", "entity", "refresh", "isMounted", "onMounted", "scrollModes", "MOVE_EVENT", "USE_TOUCH", "UP_EVENT", "props", "useProps", "__props", "value", "scrollModes", "USE_TOUCH", "emitter", "createEventEmitter", "nh", "useNameHelper", "isRtl", "useRtl", "timer", "useSetTimeout", "usingBar", "ref", "scrolling", "transitionDuration", "mode", "computed", "waitDelay", "xBar", "yBar", "initialized", "wrapperEl", "contentEl", "wrapper", "isReady", "x", "y", "percentX", "percentY", "xScrollLimit", "yScrollLimit", "enableXScroll", "enableYScroll", "xBarLength", "yBarLength", "handleResize", "verifyScroll", "computePercent", "refresh", "triggerUpdate", "useScrollWrapper", "toRef", "entry", "emitEvent", "syncBarScroll", "startAutoplay", "slotParams", "shallowReadonly", "getState", "scrollTo", "scrollBy", "scrollToElement", "ensureInView", "canPlay", "canAutoplay", "isTrue", "watch", "stopAutoplay", "nextTick", "distance", "limit", "prop", "waiting", "playSpeed", "precessScroll", "emitScrollEvent", "scroll", "className", "style", "width", "height", "wrapperClass", "_a", "wrapperStyle", "watchEffect", "onMounted", "isClient", "duration", "onBeforeUnmount", "__expose", "getXScrollLimit", "getYScrollLimit", "addScrollListener", "removeScrollListener", "getCommonPayload", "_b", "handleMouseDown", "event", "handlePointerDown", "handleTouchStart", "xScrollStartAt", "yScrollStartAt", "cursorXPosition", "cursorYPosition", "moved", "target", "lastDate", "prepareScroll", "pointer", "MOVE_EVENT", "handlePointerMove", "UP_EVENT", "handlePointerUp", "signX", "signY", "handleBuffer", "handleWheel", "type", "isVerticalScroll", "isHorizontalScroll", "sign", "computedDelta", "handleBarScrollStart", "handleBarScrollEnd", "handleXBarScroll", "percent", "handleYBarScroll", "ensureScrollOffset", "scrollX", "scrollY", "waitTransition", "resolve", "clientX", "clientY", "setDuration", "changed", "deltaX", "deltaY", "el", "offset", "isElement", "wrapperRect", "elRect", "listener", "WHEEL_STATE", "_sfc_main", "defineComponent", "props", "wheelState", "inject", "WHEEL_STATE", "width", "ref", "height", "wrapper", "state", "reactive", "toRef", "style", "computed", "onMounted", "onBeforeUnmount", "useNameHelper", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "_normalizeStyle", "e", "wheelProps", "buildProps", "stateProp", "booleanProp", "booleanStringProp", "eventProp", "idFor", "state", "disabled", "loading", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "wrapper", "props", "useProps", "__props", "createStateProp", "e", "value", "USE_TOUCH", "toFalse", "emit", "__emit", "nh", "useNameHelper", "icons", "useIcons", "items", "ref", "currentActive", "wrapperWidth", "wrapperHeight", "targetWidth", "targetHeight", "horizontalPadding", "verticalPadding", "isInit", "isRtl", "useRtl", "useDisplay", "displayInit", "scroll", "useModifier", "event", "modifier", "handlePrev", "handleNext", "normalizedOptions", "computed", "options", "option", "label", "itemList", "readonly", "className", "listStyle", "maskStyle", "borderStyle", "style", "prevDisabled", "item", "isItemDisabled", "nextDisabled", "prevIcon", "nextIcon", "provide", "WHEEL_STATE", "increaseItem", "decreaseItem", "updateActive", "debounceMinor", "active", "a", "setActive", "findEnabledActive", "computeSize", "nextTick", "horizontal", "candidate", "showCount", "refreshScroll", "debounce", "targetXScroll", "targetYScroll", "watch", "__expose", "emitEvent", "queryEnabledActive", "step", "sign", "boundRange", "beforeScroll", "signX", "signY", "handleScrollEnd", "clientX", "clientY", "aboutActive", "handleWheel", "handleItemClick", "data", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "currentHour", "ref", "currentMinute", "currentSecond", "hourRange", "minuteRange", "secondRange", "hourWheel", "minuteWheel", "secondWheel", "watch", "updateTimeRange", "value", "__expose", "refreshWheel", "isHourDisabled", "hour", "isMinuteDisabled", "minute", "isSecondDisabled", "second", "hourStep", "minuteStep", "secondStep", "range", "handleToggleColumn", "type", "wheel", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "icons", "useIcons", "isRtl", "useRtl", "today", "toDate", "monthRange", "rangeNumbers", "currentPane", "ref", "calendarYear", "calendarMonth", "hoveredYear", "hoveredMonth", "yearRange", "startActivated", "computed", "activated", "endActivated", "isDatetime", "calendarValue", "getStringValue", "watch", "value", "onMounted", "refreshCalendar", "__expose", "type", "getMonthLabel", "index", "togglePane", "adjustCalendar", "amount", "date", "handleClick", "event", "handleShortcut", "name", "handleSelectDate", "emitChange", "handleSelectYear", "year", "isDisabledYear", "handleSelectMonth", "month", "isDisabledMonth", "values", "handleStartTimeChange", "time", "handleEndTimeChange", "handleDoublePrevClick", "handleDoubleNextClick", "handleCancel", "handleConfirm", "handleHoverDate", "isSelectedYear", "isSelectedMonth", "monthYear", "i", "current", "dayCount", "handleYearHover", "handleMonthHover", "isYearInRange", "startYear", "endYear", "min", "max", "selectedYear", "minYear", "maxYear", "isMonthInRange", "startMonthYear", "endMonthYear", "hoveredMonthYear", "selectedMonthYear", "minMonthYear", "maxMonthYear", "valueType", "datePickerProps", "buildProps", "sizeProp", "stateProp", "booleanProp", "booleanStringProp", "iconProp", "eventProp", "timePickerProps", "localeProp", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "reference", "nh", "useNameHelper", "props", "useProps", "__props", "createSizeProp", "createStateProp", "value", "datePickerTypes", "placementWhileList", "toFalse", "createIconProp", "e", "emit", "__emit", "slots", "_useSlots", "calendarLocale", "useLocale", "datePickerLocale", "icons", "useIcons", "wordSpace", "useWordSpace", "placement", "toRef", "transfer", "currentVisible", "ref", "focused", "startState", "createDateState", "endState", "currentState", "lastValue", "firstSelected", "hoveredDate", "staticWheel", "timer", "useSetTimeout", "wrapper", "useClickOutside", "handleClickOutside", "popper", "transferTo", "updatePopper", "usePopper", "computed", "isHover", "useHover", "startInput", "endInput", "datePanel", "mergedLocale", "startPlaceholder", "select", "start", "type", "makeSentence", "endPlaceholder", "end", "className", "readonly", "selectorClass", "baseCls", "hasPrefix", "currentValue", "values", "doubleDigits", "hoveredLarge", "year", "month", "date", "firstTime", "hoverTime", "showClear", "min", "rawValueToDate", "invalidDate", "max", "startOfMonth", "reversed", "startMinTime", "differenceDays", "getTime", "startMaxTime", "endMinTime", "endMaxTime", "startReversed", "startValue", "endValue", "types", "startTimeBound", "useTimeBound", "endTimeBound", "isTimeDisabled", "startError", "hour", "minute", "second", "isDateDisabled", "endError", "noActionMode", "watch", "parseFormat", "parseValue", "getStringValue", "hasMonth", "hasDate", "emitEvent", "getCurrentState", "setVisible", "handleBlur", "__expose", "options", "currentColumn", "enabled", "resetColumn", "enterColumn", "useColumn", "dateValue", "reactive", "activated", "valueRecord", "activatedRecord", "withTime", "defaultValue", "toDate", "i", "toggleActivated", "isDatetime", "inQuotation", "len", "char", "valueType", "time", "verifyDate", "visible", "emitChange", "emitValues", "formattedValues", "valueFormat", "formatValue", "timestamp", "format", "emitValue", "formattedValue", "finishInput", "shouldChange", "verifyValue", "boundRange", "lastDay", "isLeapYear", "getStep", "handleFocused", "_b", "showPanel", "event", "target", "units", "index", "unit", "toggleCurrentState", "handleInput", "handleInputNumber", "number", "prev", "setActivatedTrue", "handleInputFocus", "isTimeType", "handleAdjust", "adjustType", "ctrlKey", "isPlus", "sign", "getCtrlStep", "computeDate", "updateDateActivated", "handlePlus", "handleMinus", "fallbackFocus", "handleEnter", "handleCancel", "handleClear", "finish", "nextTick", "handleShortcut", "name", "handleDateHover", "hoverDate", "hoverValues", "handlePanelChange", "secondTime", "verifyRangeValue", "handleTimeChange", "startDate", "endDate", "isStart", "handleStartInput", "handleEndInput", "dividerProps", "buildProps", "booleanProp", "props", "useProps", "__props", "o", "value", "slots", "_useSlots", "nh", "useNameHelper", "hasText", "computed", "className", "margin", "toCssSize", "style", "drawerProps", "buildProps", "localeProp", "booleanStringProp", "booleanProp", "classProp", "sizeProp", "eventProp", "drawerPlacements", "index", "getIdIndex", "props", "useProps", "__props", "value", "drawerPlacements", "createSizeProp", "emit", "__emit", "slots", "_useSlots", "nh", "useNameHelper", "icons", "useIcons", "locale", "useLocale", "toRef", "currentActive", "ref", "currentWidth", "currentHeight", "wrapper", "idIndex", "getIdIndex", "resizer", "resizing", "useMoving", "state", "event", "width", "toNumber", "height", "emitEvent", "deltaX", "deltaY", "className", "computed", "moveTransition", "wrapperClass", "wrapperStyle", "placement", "hasTitle", "titleId", "bodyId", "watch", "__expose", "handleConfirm", "handleCancel", "handleClose", "slotParams", "shallowReadonly", "reactive", "setActive", "active", "isConfirm", "result", "isPromise", "nextTick", "handleMaskClose", "handleShow", "handleHide", "ellipsisProps", "buildProps", "booleanStringProp", "booleanProp", "classProp", "nh", "useNameHelper", "props", "useProps", "__props", "value", "placementWhileList", "hoverDelay", "useHoverDelay", "visible", "ref", "content", "timer", "useSetTimeout", "wrapper", "className", "computed", "ellipsisStyle", "tipStyle", "__expose", "handleTriggerEnter", "scrollHeight", "clientHeight", "getRangeWidth", "handleTriggerLeave", "nh", "useNameHelper", "props", "useProps", "__props", "slots", "_useSlots", "formProps", "inject", "FORM_PROPS", "formActions", "FORM_ACTIONS", "formFields", "FORM_FIELDS", "emitter", "createEventEmitter", "locale", "useLocale", "toRef", "icons", "useIcons", "wordSpace", "useWordSpace", "initValue", "ref", "isError", "errorTip", "validating", "disabledValidate", "labelWidth", "labelEl", "isRequired", "computed", "requiredTip", "makeSentence", "allRules", "requiredRule", "selfRules", "formRules", "getValueByPath", "currentValue", "getValue", "isValidateAll", "isNull", "useAsterisk", "rule", "hideLabel", "hasLabel", "labelAlign", "computedLabelWidth", "getLabelWidth", "className", "controlStyle", "inputValue", "value", "isObject", "columnFlex", "instances", "fieldObject", "validate", "clearError", "reset", "setValue", "instance", "provide", "FIELD_OPTIONS", "watch", "onMounted", "getRangeWidth", "onBeforeUnmount", "__expose", "width", "initialized", "defaultValue", "setValueByPath", "strict", "handleValidate", "resetValue", "isFunction", "handleValidateEnd", "useRules", "model", "errors", "asyncValidate", "handleLabelClick", "isNative", "props", "useProps", "__props", "createIconProp", "actions", "inject", "FORM_ACTIONS", "nh", "useNameHelper", "locale", "useLocale", "toRef", "isInherit", "computed", "handleReset", "result", "isPromise", "emitEvent", "props", "useProps", "__props", "createIconProp", "fieldActions", "inject", "FIELD_OPTIONS", "formProps", "FORM_PROPS", "actions", "FORM_ACTIONS", "nh", "useNameHelper", "locale", "useLocale", "toRef", "timer", "useSetTimeout", "loading", "ref", "submit", "isNative", "computed", "isInherit", "isLoading", "__expose", "handleSubmit", "errors", "emitEvent", "result", "isPromise", "_a", "fullScreenProps", "buildProps", "eventProp", "indexId", "getIndexId", "props", "useProps", "__props", "nh", "useNameHelper", "placeId", "getIndexId", "isEntered", "ref", "zIndex", "fullType", "full", "computed", "className", "transferTo", "browserEnter", "browserExit", "wrapper", "browserFull", "useFullScreen", "watch", "value", "emitEvent", "enter", "type", "customZIndex", "exit", "toggle", "__expose", "e", "r", "E", "numberRE", "justifyList", "alignList", "Grid", "defineComponent", "gridProps", "_props", "slots", "props", "useProps", "value", "nh", "useNameHelper", "className", "computed", "style", "parseSizeLayout", "parseAutoLayout", "cellFlex", "provide", "GRID_STATE", "reactive", "toRef", "item", "h", "_a", "highlightProps", "buildProps", "booleanProp", "props", "useProps", "__props", "nh", "useNameHelper", "splitRE", "computed", "keyWords", "_a", "p", "n", "renderTexts", "text", "viewerProps", "buildProps", "localeProp", "booleanProp", "booleanNumberProp", "eventProp", "InternalActionName", "defaultActionLayout", "i", "len", "viewerDefaultActionLayout", "props", "useProps", "__props", "nh", "useNameHelper", "locale", "useLocale", "toRef", "icons", "useIcons", "timer", "useSetTimeout", "toolbarActive", "ref", "zoom", "rotate", "flipX", "flipY", "viewer", "transition", "fullSupported", "full", "enterFull", "exitFull", "useFullScreen", "container", "currentLeft", "currentTop", "moving", "useMoving", "_", "event", "emitEvent", "getState", "state", "reactive", "zoomOrigin", "useModifier", "modifier", "current", "step", "getActionProp", "action", "prop", "callIfFunc", "getActionClass", "name", "internalActions", "InternalActionName", "handleRotate", "Icon", "toggleFlipX", "toggleFlipY", "handleZoom", "toggleFull", "handleReset", "className", "computed", "style", "toCssSize", "toolbarVertical", "layout", "toolbarFade", "toolbarClass", "contentStyle", "transitionStyle", "allActions", "map", "actions", "_a", "viewerDefaultActionLayout", "names", "group", "__expose", "onMounted", "rect", "handleWheel", "sign", "deg", "emit", "nextTick", "normalizeProps", "target", "ratio", "containerRect", "x", "y", "offsetWidth", "offsetHeight", "prevZoom", "toFixed", "boundRange", "delta", "originX", "originY", "isFull", "queue", "run", "handleEnterToolbar", "handleLeaveToolbar", "imageProps", "buildProps", "booleanProp", "booleanStringProp", "eventProp", "imageGroupProps", "imageViewerProps", "props", "useProps", "__props", "emit", "__emit", "nh", "useNameHelper", "icons", "useIcons", "currentActive", "ref", "currentIndex", "viewer", "className", "computed", "srcArray", "ensureArray", "isDefined", "prevDisabled", "nextDisabled", "watch", "value", "verifyIndex", "__expose", "setActive", "active", "emitEvent", "boundRange", "handleChange", "_a", "handlePrev", "prev", "handleNext", "handleClose", "handleShow", "handleHide", "skeletonProps", "buildProps", "sizeProp", "booleanProp", "iconProp", "skeletonGroupProps", "booleanStringProp", "GROUP_STATE", "defineComponent", "name", "inheritAttrs", "props", "skeletonProps", "setup", "_props", "attrs", "slots", "useProps", "size", "width", "height", "repeat", "default", "validator", "value", "tag", "activated", "image", "imageIcon", "createIconProp", "iconScale", "round", "circle", "block", "spread", "loading", "groupState", "inject", "GROUP_STATE", "nh", "useNameHelper", "icons", "useIcons", "computed", "itemTag", "className", "b", "bs", "bm", "Object", "keys", "length", "inherit", "style", "cv", "parseSize", "trim", "test", "renderSkeleton", "h", "class", "_createVNode", "Icon", "_mergeProps", "icon", "renderSlot", "Array", "from", "GROUP_STATE", "objectFitValues", "useImageLoading", "supportImgLoading", "props", "useProps", "__props", "value", "objectFitValues", "groupState", "inject", "GROUP_STATE", "nh", "useNameHelper", "locale", "useLocale", "shouldLoad", "ref", "loading", "loadSrc", "loadFail", "fallbackFail", "viewerActive", "hidden", "wrapper", "showError", "computed", "hasPreview", "className", "style", "toCssSize", "imageSrc", "_a", "imageLoading", "skeletonProps", "watch", "state", "reactive", "stopWatch", "watchEffect", "onBeforeUnmount", "disconnect", "isClient", "root", "useIntersection", "__expose", "handleLoad", "event", "emitEvent", "handleError", "handlePreview", "props", "useProps", "__props", "nh", "useNameHelper", "currentActive", "ref", "currentIndex", "imageStates", "reactive", "className", "computed", "srcList", "state", "refreshIndex", "debounceMinor", "total", "item", "index", "provide", "GROUP_STATE", "toRef", "increaseItem", "decreaseItem", "handlePreview", "__expose", "emitEvent", "layoutProps", "buildProps", "localeProp", "booleanProp", "booleanStringProp", "eventProp", "layoutAsideProps", "layoutHeaderProps", "layoutMainProps", "layoutFooterProps", "LAYOUT_STATE", "rootEl", "isClient", "rootStyle", "computeSeriesColors", "value", "storageName", "colors", "black", "parseColorToRgba", "white", "style", "i", "light", "mixColor", "opacity", "adjustAlpha", "toFixed", "dark", "useLayoutState", "inject", "LAYOUT_STATE", "reactive", "noop", "breakPoints", "useMediaQuery", "query", "matched", "ref", "updateTrigger", "computedStyle", "computedQuery", "computed", "usedQuery", "media", "isMounted", "mediaQuery", "update", "watch", "onMounted", "onBeforeUnmount", "useUpdateCounter", "counter", "onUpdated", "defineComponent", "name", "props", "layoutMainProps", "setup", "_props", "slots", "useProps", "tag", "fixed", "nh", "useNameHelper", "state", "useLayoutState", "className", "computed", "be", "bem", "classes", "main", "CustomTag", "_createVNode", "value", "default", "defineComponent", "name", "props", "menus", "type", "Array", "default", "setup", "menuState", "inject", "MENU_STATE", "nh", "useNameHelper", "icons", "useIcons", "hoverDelay", "useHoverDelay", "groupExpanded", "ref", "sonSelected", "popperShow", "transfer", "computed", "dropTrigger", "trigger", "wrapper", "useClickOutside", "handleClickOutside", "popper", "reference", "transferTo", "updatePopper", "usePopper", "placement", "value", "itemState", "reactive", "el", "label", "indent", "showGroup", "isUsePopper", "parentState", "cachedExpanded", "updateSonSelected", "toggleGroupExpanded", "handleMouseEnter", "handleMouseLeave", "provide", "MENU_ITEM_STATE", "watch", "selected", "expanded", "timer", "useSetTimeout", "mouseInList", "reproduce", "clearTimeout", "hover", "setTimeout", "handleClick", "nextTick", "handlePopperHide", "renderMenuItems", "length", "map", "item", "_createVNode", "MenuItem", "icon", "iconProps", "disabled", "children", "route", "meta", "callIfFunc", "be", "bem", "Icon", "ellipsis", "Popper", "bs", "ns", "onMouseenter", "onMouseleave", "menuMarkerTypes", "Object", "freeze", "defineComponent", "name", "components", "MenuRest", "MenuItem", "MenuGroup", "Overflow", "props", "menuProps", "emits", "setup", "_props", "slots", "emit", "expose", "useProps", "active", "default", "static", "accordion", "markerType", "validator", "value", "includes", "reduced", "horizontal", "transfer", "trigger", "groupType", "tooltipReverse", "options", "router", "manualRoute", "indent", "nh", "useNameHelper", "menuItemSet", "Set", "currentActive", "ref", "isReduced", "wrapper", "rest", "computed", "className", "b", "bs", "bm", "inherit", "style", "isDefined", "cv", "menus", "length", "routes", "parseRoutesToMenus", "currentRoute", "provide", "MENU_STATE", "reactive", "toRef", "handleSelect", "handleExpand", "increaseItem", "decreaseItem", "doForEachItem", "watch", "handleMenuReduce", "handleMenuExpand", "meta", "label", "path", "onMounted", "nextTick", "route", "expandItemByLabel", "root", "children", "loop", "Array", "from", "map", "parent", "shift", "routeMeta", "menu", "push", "state", "add", "delete", "cb", "item", "emitEvent", "onSelect", "expanded", "onExpand", "onReduce", "firstExpandedItem", "cachedExpanded", "showGroup", "toggleGroupExpanded", "el", "callback", "requestAnimationFrame", "removeEventListener", "selectedItem", "find", "groupExpanded", "parentState", "addEventListener", "renderMenuItem", "_createVNode", "icon", "iconProps", "disabled", "callIfFunc", "renderMenus", "group", "renderSlot", "be", "counter", "count", "slice", "switchProps", "buildProps", "sizeProp", "stateProp", "booleanProp", "iconProp", "eventProp", "_sfc_main", "defineComponent", "Icon", "switchProps", "_props", "emit", "idFor", "state", "disabled", "loading", "size", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "input", "props", "useProps", "createSizeProp", "createStateProp", "createIconProp", "nh", "useNameHelper", "currentValue", "ref", "className", "computed", "style", "signalStyle", "isDisabled", "watch", "value", "handleChange", "checked", "result", "isPromise", "emitEvent", "useIcons", "options", "_resolveComponent", "_openBlock", "_createElementBlock", "_ctx", "_normalizeStyle", "_createElementVNode", "_cache", "_withModifiers", "$event", "_hoisted_2", "_normalizeClass", "e", "_renderSlot", "_createVNode", "_component_Icon", "_mergeProps", "_createBlock", "defineComponent", "name", "props", "layoutHeaderProps", "emits", "setup", "_props", "slots", "emit", "expose", "useProps", "locale", "tag", "logo", "signName", "user", "default", "static", "userDropped", "avatarCircle", "config", "actions", "signType", "colors", "color", "menus", "menuProps", "darkMode", "nh", "useNameHelper", "icons", "useIcons", "useLocale", "toRef", "layoutState", "useLayoutState", "currentSignType", "ref", "currentUserDropped", "menu", "isRtl", "useRtl", "isMounted", "useMounted", "rootEl", "computed", "value", "isClient", "document", "documentElement", "currentColor", "getBaseColor", "isDark", "className", "be", "bs", "isLayout", "bem", "inherit", "affixMatched", "affixed", "classes", "header", "userActions", "length", "label", "signOut", "icon", "iconProps", "hasLeft", "left", "hasMenu", "router", "slotParams", "shallowReadonly", "reactive", "expanded", "reduced", "toggleExpanded", "toggleReduced", "handleColorChange", "toggleUserDropped", "expandMenuByLabel", "watch", "computeSeriesColors", "classList", "contains", "immediate", "onBeforeMount", "getComputedStyle", "getPropertyValue", "handleUserActionSelect", "meta", "emitEvent", "onUserAction", "handleSignTypeChange", "type", "changeInLock", "onNavChange", "onExpandedChange", "onReducedChange", "onColorChange", "handleSignClick", "event", "onSignClick", "dropped", "onDroppedChange", "handleMenuSelect", "onMenuSelect", "expandItemByLabel", "toggleTheme", "onToggleTheme", "requestAnimationFrame", "add", "remove", "renderCheck", "_createVNode", "Icon", "check", "renderLayoutConfig", "onClick", "renderThemeConfig", "Switch", "dark", "light", "renderColorConfig", "map", "backgroundColor", "renderUserAvatar", "avatar", "renderSlot", "Avatar", "_mergeProps", "renderUserDrop", "DropdownList", "email", "renderConfigs", "action", "DropdownItem", "disabled", "divided", "onSelect", "marginRight", "includes", "navConfig", "themeMode", "majorColor", "CustomTag", "headerLeft", "headerMain", "Menu", "right", "headerRight", "Dropdown", "headerUser", "onClickOutside", "drop", "linkerProps", "buildProps", "iconProp", "booleanProp", "eventProp", "linkerTypes", "props", "useProps", "__props", "value", "createIconProp", "nh", "useNameHelper", "className", "computed", "handleClick", "event", "emitEvent", "defineComponent", "name", "props", "layoutFooterProps", "setup", "_props", "slots", "useProps", "tag", "copyright", "links", "verticalLinks", "nh", "useNameHelper", "layoutState", "useLayoutState", "horizontalMatched", "useMediaQuery", "toRef", "className", "computed", "be", "bs", "isLayout", "bem", "inherit", "classes", "footer", "renderLinks", "length", "_createVNode", "value", "footerLinks", "map", "group", "index", "to", "Linker", "icon", "target", "default", "Icon", "subname", "children", "link", "CustomTag", "renderSlot", "defineComponent", "name", "props", "layoutAsideProps", "emits", "setup", "_props", "slots", "emit", "expose", "useProps", "tag", "expanded", "reduced", "menus", "default", "static", "menuProps", "logo", "signName", "fixed", "signType", "nh", "useNameHelper", "icons", "useIcons", "layoutState", "useLayoutState", "currentReduced", "ref", "currentExpanded", "scrollHeight", "matched", "useMediaQuery", "toRef", "counter", "useUpdateCounter", "top", "bottom", "menu", "className", "computed", "be", "bs", "isLayout", "bem", "inherit", "value", "classes", "aside", "hasTop", "hasMenu", "length", "router", "slotParams", "shallowReadonly", "reactive", "toggleExpanded", "toggleReduced", "expandMenuByLabel", "watch", "useExpand", "immediate", "computeScrollHeight", "topHeight", "bottomHeight", "offsetHeight", "emitEvent", "onExpandedChange", "onReducedChange", "handleSignClick", "event", "onSignClick", "handleMenuSelect", "label", "meta", "onMenuSelect", "expandItemByLabel", "CustomTag", "_createVNode", "asideTop", "renderSlot", "NativeScroll", "main", "Menu", "_mergeProps", "asideBottom", "onClick", "Icon", "indent", "outdent", "expandHandler", "expand", "angleRight", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "defineComponent", "name", "props", "layoutProps", "emits", "setup", "_props", "slots", "emit", "expose", "useProps", "locale", "noAside", "footer", "tag", "menus", "default", "static", "menuProps", "logo", "signName", "config", "user", "actions", "expanded", "reduced", "avatarCircle", "signType", "headerFixed", "asideFixed", "copyright", "links", "colors", "color", "miniHeaderSign", "verticalLinks", "darkMode", "fixedMain", "fitWindow", "innerClasses", "noHeader", "nh", "useNameHelper", "locked", "ref", "asideExpanded", "asideReduced", "currentSignType", "userDropped", "currentColor", "isMounted", "useMounted", "section", "scroll", "header", "aside", "affixMatched", "useMediaQuery", "toRef", "expandMatched", "signNameMatched", "state", "reactive", "isLayout", "computed", "value", "affixed", "scrollY", "useExpand", "navConfig", "classes", "changeInLock", "className", "b", "bs", "bm", "inherit", "rootEl", "isClient", "document", "documentElement", "signInHeader", "menu", "isDark", "viewHeight", "style", "cv", "slotParams", "shallowReadonly", "toggleExpanded", "toggleReduced", "provide", "LAYOUT_STATE", "expandMenuByLabel", "watch", "emitEvent", "onNavChange", "getBaseColor", "onColorChange", "getComputedStyle", "getPropertyValue", "onExpandedChange", "onReducedChange", "handleSignClick", "event", "onSignClick", "handleMenuSelect", "label", "meta", "onMenuSelect", "handleToggleTheme", "onToggleTheme", "handleUserAction", "onUserAction", "expandItemByLabel", "handleResize", "$el", "offsetHeight", "getYBorder", "onContentResize", "cancelChange", "doChange", "runQueueFrame", "stopAndPrevent", "stopPropagation", "preventDefault", "renderSign", "sign", "renderSlot", "showSignName", "_createVNode", "be", "bem", "renderHeader", "LayoutHeader", "_mergeProps", "$event", "onWheel", "onMousemove", "left", "createSlotRender", "right", "avatar", "renderAside", "sidebar", "LayoutAside", "top", "bottom", "expand", "renderMain", "LayoutMain", "renderFooter", "LayoutFooter", "renderWrapper", "CustomTag", "wrapper", "_slot2", "_slot", "ResizeObserver", "NativeScroll", "scrollbar", "nh", "useNameHelper", "isRtl", "useRtl", "visible", "ref", "strokeWidth", "state", "position", "percent", "maxPercent", "className", "computed", "style", "fillerStyle", "timer", "interval", "rafId", "__expose", "startLoading", "onBeforeUnmount", "options", "setLoading", "boundRange", "LoadingManager", "options", "__publicField", "isClient", "manager", "_a", "_b", "render", "destroyObject", "app", "property", "others", "target", "el", "unrefElement", "createApp", "Component", "vnode", "createVNode", "proxyExposed", "Loading", "DELETE_HANDLER", "popupPlacements", "globalIndex", "getIndex", "props", "__props", "emit", "__emit", "handleDelete", "inject", "DELETE_HANDLER", "noop", "nh", "useNameHelper", "getIndex", "useZIndex", "wrapper", "ref", "transition", "computed", "onMounted", "nextTick", "state", "r", "t", "props", "__props", "nh", "useNameHelper", "items", "ref", "queue", "wrapper", "pending", "placementArray", "computed", "transition", "watch", "value", "prevValue", "item", "provide", "DELETE_HANDLER", "deleteItem", "__expose", "add", "remove", "has", "find", "clear", "getItemStyle", "verticalStyle", "horizontalStyle", "style", "zIndex", "options", "resolve", "onOpen", "isFunction", "noop", "key", "queueOut", "onClose", "result", "state", "renderItem", "removeItem", "index", "getIndex", "currentVertical", "existingItem", "reactive", "removeHeight", "i", "len", "enterItem", "leaveItem", "effectiveTypes", "assertiveTypes", "nh", "useNameHelper", "icons", "useIcons", "predefinedIcons", "computed", "placement", "ref", "popup", "placementCenter", "add", "options", "remove", "key", "config", "clear", "__expose", "reactive", "s", "j", "ae", "placementWhiteList", "count", "getKey", "MessageManager", "options", "__publicField", "toNumber", "content", "duration", "state", "success", "error", "key", "isNull", "_a", "placement", "others", "manager", "_b", "render", "destroyObject", "app", "property", "target", "isClient", "el", "unrefElement", "createApp", "Component", "vnode", "createVNode", "proxyExposed", "type", "_duration", "noop", "message", "timer", "userCloseFn", "onClose", "userEnterFn", "onEnter", "userLeaveFn", "onLeave", "setDelayClose", "item", "markRaw", "Message", "effectiveTypes", "assertiveTypes", "nh", "useNameHelper", "icons", "useIcons", "predefinedIcons", "computed", "placement", "ref", "popup", "add", "options", "remove", "key", "clear", "config", "__expose", "reactive", "s", "j", "ae", "placementWhiteList", "count", "getKey", "NoticeManager", "options", "__publicField", "toNumber", "title", "content", "duration", "state", "success", "error", "key", "isNull", "_a", "placement", "others", "manager", "_b", "render", "destroyObject", "app", "property", "target", "isClient", "el", "unrefElement", "createApp", "Component", "vnode", "createVNode", "proxyExposed", "type", "_duration", "noop", "isObject", "notice", "timer", "userCloseFn", "onClose", "userEnterFn", "onEnter", "userLeaveFn", "onLeave", "setDelayClose", "item", "markRaw", "Notice", "_sfc_main", "defineComponent", "optionGroupProps", "useNameHelper", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_normalizeClass", "e", "_createElementVNode", "paginationProps", "buildProps", "sizeProp", "localeProp", "booleanProp", "eventProp", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "PaginationMode", "defineComponent", "name", "props", "paginationProps", "emits", "setup", "_props", "slots", "emit", "expose", "useProps", "size", "createSizeProp", "locale", "total", "default", "validator", "value", "static", "noBorder", "background", "pageSize", "sizeOptions", "itemCount", "Number", "isInteger", "active", "disabled", "disableItem", "isFunc", "turnPageCount", "itemUnit", "plugins", "Array", "isArray", "noTitle", "itemTag", "listTag", "isRtl", "useRtl", "nh", "useNameHelper", "icons", "useIcons", "midPagers", "ref", "currentActive", "currentPageSize", "mode", "LEFT", "inPrevEllipsis", "inNextEllipsis", "jumpValue", "itemElList", "reactive", "useLocale", "toRef", "target", "wrapper", "useModifier", "passive", "onKeyDown", "event", "modifier", "decide", "up", "down", "left", "right", "sign", "isClient", "document", "activeElement", "index", "findIndex", "el", "boundRange", "length", "focus", "enter", "space", "activeClass", "bem", "activeEl", "find", "classList", "contains", "beforeMatchAny", "preventDefault", "afterMatchAny", "resetAll", "className", "computed", "b", "bs", "bm", "inherit", "pagerCount", "Math", "ceil", "useEllipsis", "disabledPrev", "count", "queryEnabledActive", "disabledNext", "prevTurnPageTitle", "prev", "getCountWord", "page", "nextTurnPageTitle", "next", "prevEllipsisTarget", "nextEllipsisTarget", "sizeObjectOptions", "map", "label", "perPage", "pluginOrders", "pagerPosition", "isNull", "p", "jump", "jumpInputWidth", "includes", "pageCount", "min", "watch", "changeActive", "computePagers", "prevValue", "emitEvent", "onPageSizeChange", "anchor", "handlePrev", "handleNext", "onMounted", "nextTick", "onUpdated", "push", "from", "querySelectorAll", "cbe", "cbem", "step", "abs", "handleChange", "onChange", "parseInt", "blur", "tabIndex", "pagers", "range", "numberCount", "criticalCount", "unshift", "CENTER", "RIGHT", "slice", "enterPrevEllipsis", "leavePrevEllipsis", "clickPrevEllipsis", "enterNextEllipsis", "leaveNextEllipsis", "clickNextEllipsis", "handleJumpPage", "max", "originActive", "renderPrev", "Tag", "arrow", "angleRight", "angleLeft", "_createVNode", "be", "undefined", "prevPage", "renderSlot", "Icon", "_mergeProps", "scale", "renderNext", "nextPage", "renderPrevEllipsis", "_slot", "createSlotRender", "anglesRight", "anglesLeft", "Transition", "ns", "ellipsis", "entered", "renderNextEllipsis", "_slot2", "renderItem", "onClick", "onKeydownEnter", "onKeydownSpace", "item", "renderTotalPlugin", "order", "renderSizePlugin", "Select", "$event", "renderJumpPlugin", "jumpTo", "NumberInput", "width", "getCountWordOnly", "ItemTag", "ListTag", "progressProps", "buildProps", "stateProp", "booleanProp", "infoTypes", "_sfc_main", "defineComponent", "Bubble", "progressProps", "_props", "props", "useProps", "value", "createStateProp", "nh", "useNameHelper", "className", "computed", "style", "trackStyle", "fillerStyle", "strokeColor", "callIfFunc", "useBubble", "bubbleType", "bubbleStyle", "percentValue", "toFixed", "_resolveComponent", "_openBlock", "_createElementBlock", "_normalizeClass", "_ctx", "_normalizeStyle", "e", "_renderSlot", "_createElementVNode", "_createCommentVNode", "_component_Bubble", "_withCtx", "radioProps", "buildProps", "sizeProp", "stateProp", "valueProp", "classProp", "booleanProp", "eventProp", "radioGroupProps", "iconProp", "GROUP_STATE", "radioShapes", "radioGroupShapes", "props", "useProps", "__props", "createSizeProp", "createStateProp", "value", "radioShapes", "emit", "__emit", "groupState", "inject", "GROUP_STATE", "nh", "useNameHelper", "icons", "useIcons", "currentValue", "ref", "input", "size", "computed", "state", "isDisabled", "isLoading", "loadingIcon", "isLoadingLock", "loadingEffect", "shape", "readonly", "className", "isButton", "watch", "emitChange", "onMounted", "onBeforeUnmount", "__expose", "emitEvent", "handleChange", "idFor", "state", "disabled", "loading", "size", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "focus", "props", "useProps", "__props", "createSizeProp", "createStateProp", "createIconProp", "value", "radioGroupShapes", "emit", "__emit", "nh", "useNameHelper", "currentValue", "ref", "inputSet", "readonly", "computed", "className", "groupState", "reactive", "toRef", "debounceMinor", "updateValue", "registerInput", "unregisterInput", "provide", "GROUP_STATE", "watch", "__expose", "input", "_a", "emitEvent", "options", "isClient", "resultProps", "buildProps", "sizeProp", "iconProp", "resultTypes", "props", "useProps", "__props", "createSizeProp", "value", "resultTypes", "createIconProp", "slots", "_useSlots", "nh", "useNameHelper", "icons", "useIcons", "predefinedIcons", "computed", "iconComp", "hasTitle", "hasIcon", "hasDescription", "className", "style", "SkeletonGroup", "defineComponent", "skeletonGroupProps", "_props", "slots", "props", "useProps", "nh", "useNameHelper", "provide", "GROUP_STATE", "h", "_a", "renderSlot", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "hoverDelay", "useHoverDelay", "isTipShow", "ref", "tooltip", "handler", "timer", "useSetTimeout", "wrapper", "useModifier", "event", "modifier", "disableEvent", "extraType", "tipClass", "computed", "_a", "__expose", "updateTooltip", "focus", "blur", "showTooltip", "hideTooltip", "options", "sliderProps", "buildProps", "stateProp", "booleanProp", "booleanStringProp", "eventProp", "idFor", "state", "disabled", "loading", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "focus", "props", "useProps", "__props", "createStateProp", "e", "value", "emit", "__emit", "nh", "useNameHelper", "hoverDelay", "useHoverDelay", "timer", "useSetTimeout", "stepOneValue", "ref", "sliding", "triggerType", "hovered", "triggerShow", "track", "startTrigger", "endTrigger", "markerList", "computed", "markers", "list", "raw", "marker", "number", "prev", "next", "hasMarkerLabel", "readonly", "className", "stepDigit", "decimalLength", "stepOneMin", "stepOneMax", "truthValue", "toFixed", "stepOneTotal", "triggerPercent", "toPercent", "fillerStyle", "vertical", "reverse", "offset", "afterOffset", "startTriggerStyle", "endTriggerStyle", "isDisabled", "lastValue", "lastInputValue", "parseValue", "verifyValue", "watch", "isEqualValue", "__expose", "isValueInRange", "blur", "values", "computedValue", "nearest", "nearestMarker", "delta", "setTriggerFade", "handlePointerEnter", "handlePointerLeave", "emitChange", "type", "sync", "start", "end", "emitEvent", "trackRect", "computePointedValue", "event", "client", "current", "throttleMove", "throttle", "handleTrackDown", "downPercent", "handleMove", "handleMoveEnd", "disableEvent", "getPointStyle", "getMarkerStyle", "min", "max", "adjustValue", "handlePlus", "extra", "markerValue", "handleMinus", "i", "options", "_a", "spaceProps", "buildProps", "booleanProp", "styleProp", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "justifyList", "freeze", "alignList", "useFlexGap", "supportFlexGap", "parseFlexStyle", "value", "defineComponent", "name", "props", "spaceProps", "setup", "_props", "slots", "useProps", "vertical", "inline", "tag", "align", "default", "validator", "includes", "justify", "noWrap", "size", "itemStyle", "gapDisabled", "nh", "useNameHelper", "varMap", "h", "cv", "hh", "mhh", "v", "hv", "mhv", "className", "computed", "b", "bs", "bm", "inherit", "style", "alignItems", "justifyContent", "normalizedSize", "Array", "isArray", "marginTop", "marginBottom", "_slot", "CustomTag", "children", "renderSlot", "length", "_createVNode", "vnodes", "flatVNodes", "lastIndex", "justifySpace", "startsWith", "notBetween", "map", "vnode", "index", "be", "undefined", "paddingTop", "paddingBottom", "marginRight", "marginLeft", "splitProps", "buildProps", "booleanProp", "eventProp", "_sfc_main", "defineComponent", "Icon", "splitProps", "_props", "emit", "props", "useProps", "value", "nh", "useNameHelper", "icons", "useIcons", "currentValue", "ref", "currentFull", "transition", "wrapper", "guide", "offset", "computed", "position", "handler", "moving", "useMoving", "state", "event", "min", "max", "vertical", "lazy", "outer", "computedMin", "computedMax", "emitEvent", "delta", "start", "handleChange", "target", "setTransition", "className", "fullType", "leftPaneStyle", "rightPaneStyle", "triggerStyle", "fullIcons", "watch", "type", "removeTransition", "handleFull", "_resolveComponent", "_openBlock", "_createElementBlock", "_normalizeClass", "_ctx", "_cache", "args", "_normalizeStyle", "_renderSlot", "_createElementVNode", "_Fragment", "_withModifiers", "$event", "u", "e", "l", "_renderList", "n", "tabNavProps", "buildProps", "booleanProp", "eventProp", "tabNavItemProps", "iconProp", "TAB_NAV_STATE", "_sfc_main", "defineComponent", "Icon", "tabNavItemProps", "_props", "props", "useProps", "createIconProp", "tabNavState", "inject", "TAB_NAV_STATE", "nh", "useNameHelper", "active", "ref", "currentLabel", "index", "total", "wrapper", "contentClass", "computed", "baseClass", "isClosable", "isDefined", "watch", "value", "emitEvent", "state", "reactive", "onBeforeUnmount", "handleSelect", "handleClose", "useIcons", "_resolveComponent", "_openBlock", "_createElementBlock", "_normalizeClass", "_ctx", "_createElementVNode", "_cache", "args", "_withKeys", "_withModifiers", "_createBlock", "_component_Icon", "e", "_createCommentVNode", "_createTextVNode", "_toDisplayString", "a", "trackStyleMap", "_sfc_main", "defineComponent", "Icon", "ResizeObserver", "Scroll", "TabNavItem", "tabNavProps", "_props", "emit", "props", "useProps", "nh", "useNameHelper", "currentActive", "ref", "markerPosition", "markerSize", "itemStates", "wrapper", "useDisplay", "updateMarkerPosition", "scroll", "className", "computed", "markerStyle", "position", "length", "items", "item", "scrollMode", "refreshLabels", "debounceMinor", "total", "index", "isNull", "isActiveEmpty", "provide", "TAB_NAV_STATE", "reactive", "toRef", "increaseItem", "decreaseItem", "handleActive", "handleClose", "watch", "value", "onMounted", "label", "emitEvent", "handleAdd", "activeItem", "useIcons", "_resolveComponent", "_openBlock", "_createElementBlock", "_normalizeClass", "_ctx", "_component_ResizeObserver", "_withCtx", "_createElementVNode", "e", "_createVNode", "_component_Scroll", "_renderSlot", "_Fragment", "_renderList", "item", "_createBlock", "_component_TabNavItem", "s", "_cache", "args", "_component_Icon", "_mergeProps", "_createCommentVNode", "_normalizeStyle", "tabsProps", "omitProps", "tabNavProps", "tabPanelProps", "wrapProps", "tabNavItemProps", "TABS_STATE", "_sfc_main", "defineComponent", "tabPanelProps", "props", "slots", "tabsState", "inject", "TABS_STATE", "nh", "useNameHelper", "active", "ref", "currentLabel", "className", "computed", "baseClass", "watch", "value", "emitEvent", "state", "reactive", "toRef", "data", "onBeforeUnmount", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "e", "tableProps", "buildProps", "localeProp", "booleanProp", "eventProp", "tableColumnProps", "classProp", "styleProp", "sizeProp", "tableColumnGroupProps", "tableSummaryProps", "DropType", "DEFAULT_KEY_FIELD", "TABLE_STORE", "TABLE_ACTIONS", "TABLE_SLOTS", "TABLE_HEAD_PREFIX", "TABLE_FOOT_PREFIX", "COLUMN_GROUP_ACTIONS", "columnTypes", "noopFormatter", "v", "propKeys", "tableColumnProps", "aliases", "ignoredProps", "triggerProps", "aligns", "funcProp", "TableColumn", "defineComponent", "_props", "slots", "props", "useProps", "value", "isNull", "columnTypes", "createSizeProp", "tableAction", "inject", "TABLE_ACTIONS", "parentActions", "COLUMN_GROUP_ACTIONS", "options", "reactive", "key", "aliasKey", "update", "watch", "filterWithoutMeta", "computed", "meta", "filter", "trigger", "setRenderer", "setHeadRenderer", "setFilterRenderer", "setSummaryRenderer", "onBeforeUnmount", "data", "renderSlot", "row", "rowIndex", "result", "noopFormatter", "propKeys", "Object", "keys", "tableColumnGroupProps", "ignoredProps", "triggerProps", "TableColumnGroup", "defineComponent", "name", "inheritAttrs", "props", "setup", "_props", "slots", "useProps", "default", "static", "fixed", "order", "ellipsis", "textAlign", "renderer", "isFunc", "children", "tableAction", "inject", "TABLE_ACTIONS", "parentActions", "COLUMN_GROUP_ACTIONS", "columns", "reactive", "Set", "computed", "options", "key", "Symbol", "includes", "trigger", "watch", "value", "updateColumns", "setColumnProp", "setRenderer", "immediate", "provide", "increaseColumn", "decreaseColumn", "onBeforeUnmount", "column", "add", "delete", "head", "renderSlot", "renderChildren", "map", "child", "_createVNode", "others", "TableColumn", "_mergeProps", "propKeys", "tableSummaryProps", "aliases", "ignoredProps", "triggerProps", "funcProp", "TableSummary", "defineComponent", "_props", "slots", "props", "useProps", "value", "isNull", "tableAction", "inject", "TABLE_ACTIONS", "options", "reactive", "key", "aliasKey", "trigger", "watch", "setRenderer", "onBeforeUnmount", "data", "renderSlot", "props", "__props", "tableActions", "inject", "TABLE_ACTIONS", "tableSlots", "TABLE_SLOTS", "customIcon", "computed", "minWidth", "props", "__props", "state", "getters", "mutations", "inject", "TABLE_STORE", "tableActions", "TABLE_ACTIONS", "nh", "useNameHelper", "locale", "toRef", "icons", "useIcons", "isRtl", "useRtl", "filterVisible", "ref", "resizable", "resizing", "computed", "wrapper", "isGroup", "columns", "cellSpan", "inLast", "currentWidth", "processColResize", "payload", "lazy", "width", "column", "resizer", "useMoving", "event", "table", "buildEventPayload", "typed", "columnTypes", "className", "customClass", "customStyle", "style", "totalWidths", "colSpan", "rowSpan", "noFixed", "padLeft", "_a", "padRight", "_b", "getLast", "height", "i", "_c", "TABLE_HEAD_PREFIX", "attrs", "customAttrs", "sorter", "filter", "hasFilterActive", "options", "len", "checkboxDisabled", "isSelection", "records", "refreshXScroll", "nextFrameOnce", "handleMouseEnter", "handleMouseLeave", "handleClick", "handleDblclick", "handleContextmenu", "handleSortAsc", "key", "type", "handleSortDesc", "handleFilter", "value", "handleFilterItemSelect", "active", "handleFilterCheck", "checked", "handleFilterMultiple", "activeValues", "option", "handleResetFilter", "handleCheckAllRow", "handleCellResize", "entry", "props", "__props", "state", "getters", "mutations", "inject", "TABLE_STORE", "tableAction", "TABLE_ACTIONS", "nh", "useNameHelper", "timer", "useSetTimeout", "dragging", "ref", "isDragOver", "wrapper", "rowEl", "expandEl", "instance", "reactive", "toRef", "rowKey", "computed", "rowType", "className", "customClass", "maxHeight", "style", "customStyle", "attrs", "groupStyle", "offset", "cellDraggable", "rowDraggable", "draggable", "expandRenderer", "hasExpand", "setExpandHeight", "targetHeight", "updateTotalHeight", "force", "height", "tree", "prev", "handleResize", "entry", "_b", "_a", "watchEffect", "nextTick", "onMounted", "buildEventPayload", "event", "handleMouseEnter", "handleMouseLeave", "handleClick", "handleDblclick", "handleContextmenu", "shouldProcessDrag", "handleDragStart", "handleDragOver", "handleDrop", "handleDragEnd", "handleDragLeave", "afterExpand", "props", "__props", "state", "getters", "mutations", "inject", "TABLE_STORE", "nh", "useNameHelper", "allColumns", "computed", "left", "right", "columns", "style", "width", "getLast", "padLeft", "_a", "padRight", "_b", "getRow", "index", "key", "TABLE_HEAD_PREFIX", "props", "__props", "state", "getters", "mutations", "inject", "TABLE_STORE", "tableActions", "TABLE_ACTIONS", "nh", "useNameHelper", "icons", "useIcons", "isRtl", "useRtl", "contentHeight", "ref", "wrapper", "inLast", "computed", "cellSpan", "className", "customClass", "typed", "columnTypes", "columns", "customStyle", "style", "totalWidths", "colSpan", "rowSpan", "noFixed", "padLeft", "_a", "padRight", "_b", "getLast", "width", "height", "attrs", "customAttrs", "formatter", "isFunction", "noopFormatter", "watchEffect", "isTypeColumn", "isSelectionColumn", "column", "isOrderColumn", "isExpandColumn", "isDragColumn", "buildEventPayload", "event", "handleMouseEnter", "handleMouseLeave", "handleClick", "handleDblclick", "handleContextmenu", "handleCheckRow", "row", "checked", "data", "key", "index", "handleExpandRow", "expanded", "nextTick", "handleDragRow", "handleExpandTree", "handleCellResize", "entry", "props", "__props", "state", "getters", "inject", "TABLE_STORE", "nh", "useNameHelper", "locale", "toRef", "columns", "computed", "data", "style", "width", "getLast", "padLeft", "_a", "padRight", "_b", "emptyStyle", "rowHeight", "rowMinHeight", "props", "__props", "state", "getters", "mutations", "inject", "TABLE_STORE", "tableActions", "TABLE_ACTIONS", "nh", "useNameHelper", "isRtl", "useRtl", "wrapper", "ref", "inLast", "computed", "cellSpan", "columns", "prefix", "summaries", "heights", "className", "customClass", "typed", "columnTypes", "customStyle", "style", "totalWidths", "colSpan", "rowSpan", "padLeft", "_a", "padRight", "_b", "getLast", "width", "height", "attrs", "customAttrs", "summaryData", "buildEventPayload", "event", "handleMouseEnter", "handleMouseLeave", "handleClick", "handleDblclick", "handleContextmenu", "handleCellResize", "entry", "props", "__props", "state", "getters", "mutations", "inject", "TABLE_STORE", "nh", "useNameHelper", "columns", "computed", "summaries", "summaryData", "summary", "key", "row", "className", "style", "width", "getLast", "padLeft", "_a", "padRight", "_b", "useCascadedChecked", "options", "updateCheckedUpward", "key", "node", "isNull", "parentId", "parent", "item", "d", "updateCheckedDown", "originNode", "disable", "toFalse", "checked", "partial", "loop", "defaultSummaryData", "indexId", "getIndexId", "defaultIndexLabel", "index", "useStore", "options", "state", "reactive", "DEFAULT_KEY_FIELD", "setColumns", "setSummaries", "setData", "userData", "computed", "row", "filteredData", "filterData", "sortedData", "sortData", "processedData", "data", "pageData", "i", "len", "visibleKeys", "disableCheckRows", "rowData", "selectionColumn", "item", "isDisabled", "disableExpandRows", "expandColumn", "disableDragRows", "dragColumn", "usingTree", "_a", "hasDragColumn", "e", "column", "rowDragging", "totalWidths", "getColumnsWidths", "normalWidths", "leftFixedWidths", "rightFixedWidths", "summaryData", "columns", "summaries", "map", "key", "accessor", "sum", "min", "max", "valid", "value", "number", "topFixedHeights", "getSummariesHeights", "bottomFixedHeights", "indentedColumn", "hasFixedColumn", "getters", "mutations", "debounceMinor", "updateTotalHeight", "isGroupColumn", "buildSummaryKey", "setColumnProp", "setSummaryProp", "setDataKey", "setCurrentPage", "setPageSize", "setRowClass", "setRowStyle", "setRowAttrs", "setCellClass", "setCellStyle", "setCellAttrs", "setHeadClass", "setHeadStyle", "setHeadAttrs", "setFootClass", "setFootStyle", "setFootAttrs", "setTableWidth", "setRowHeight", "setRowMinHeight", "setCellHeight", "setVirtual", "setRowDraggable", "setBodyYScroll", "setBodyXScroll", "setBorder", "setStripe", "setHighlight", "setRowProp", "setLocale", "setTooltipTheme", "setTooltipWidth", "setSingleSorter", "setSingleFilter", "setDragging", "setKeyConfig", "setDisabledTree", "setNoCascaded", "setColResizable", "setCustomSorter", "setCustomFilter", "setColumnResizing", "setResizeLeft", "setExpandRenderer", "setCellSpan", "setSidePadding", "setBorderWidth", "setDataFilter", "setEllipsis", "setLocked", "setBarScrolling", "handleSort", "clearSort", "handleFilter", "clearFilter", "toggleFilterItemActive", "refreshRowIndex", "handleCheck", "handleCheckAll", "clearCheckAll", "setRenderRows", "handleExpand", "handleDrag", "collectUnderRows", "setTreeExpanded", "getParentRow", "handleColumnResize", "getCurrentData", "createMinRowState", "flatTreeRows", "refreshRowDepth", "triggerHeightChange", "queryRow", "watchEffect", "createBITree", "computeCellSpan", "widths", "combinedWidths", "width", "columnWidth", "rowMap", "heights", "height", "summary", "buildColumns", "allColumns", "baseColumns", "columnMap", "existedTypes", "getFixedOrder", "fixed", "build", "_columns", "result", "prev", "next", "rowColumns", "isNull", "endIndex", "validType", "columnTypes", "length", "getLast", "rowCount", "span", "j", "sorters", "filters", "normalColumns", "rightFixedColumns", "leftFixedColumns", "toFalse", "parseSorter", "parseFilter", "TABLE_HEAD_PREFIX", "rowKey", "prop", "TABLE_FOOT_PREFIX", "prevKeys", "aboveSummaries", "belowSummaries", "summaryMap", "field", "oldDataKey", "idMaps", "childRow", "clonedData", "dataKey", "keyConfig", "disabledTree", "oldDataMap", "hidden", "childrenKey", "checkedKey", "heightKey", "expandedKey", "treeExpandedKey", "parseRow", "origin", "parent", "checked", "expanded", "treeExpanded", "toNumber", "children", "computePartial", "walkTree", "depth", "currentPage", "pageSize", "rowClass", "rowStyle", "rowAttrs", "cellClass", "cellStyle", "cellAttrs", "headClass", "headStyle", "headAttrs", "footClass", "footStyle", "footAttrs", "resized", "sidePadding", "hasWidthColumns", "flexColumns", "flexWidth", "flexColumnCount", "flexUnitWidth", "usedWidth", "columnKey", "draggable", "scroll", "able", "virtual", "locale", "theme", "dragging", "disabled", "noCascaded", "resizable", "resizing", "left", "renderer", "spanFn", "padding", "filter", "ellipsis", "locked", "scrolling", "type", "sorter", "active", "option", "updateCheckedUpward", "updateCheckedDown", "useCascadedChecked", "computeChecked", "rowList", "checkedAll", "partialCheckedAll", "hasChecked", "hasNotChecked", "partial", "start", "end", "force", "startRow", "endRow", "heightBITree", "virtualData", "prevData", "added", "removed", "underRows", "disableOthers", "filterOptions", "raw", "order", "method", "custom", "multiple", "meta", "deepClone", "formattedOptions", "isActive", "isSingle", "usedFilter", "usedData", "usedFilterCount", "isFilter", "usedSorter", "_key", "sortByProps", "lastColumnWidth", "keys", "newWidth", "tableWidth", "deltaWidth", "lastKey", "totalWidth", "toFixed", "cellSpanMap", "collapseMap", "rowIndex", "columnIndex", "getSpan", "prefix", "masterKey", "collapsed", "colSpan", "rowSpan", "masterSet", "columnFixed", "right", "len1", "len2", "boundRange", "colIndex", "treeRowData", "mapTree", "keyOrData", "defaultKeyConfig", "props", "useProps", "__props", "e", "value", "emit", "__emit", "slots", "_useSlots", "nh", "useNameHelper", "timer", "useSetTimeout", "bodyHeight", "ref", "xScrollEnabled", "yScrollEnabled", "xScrollPercent", "yScrollPercent", "headHeight", "footHeight", "indicatorShow", "indicatorType", "DropType", "tempColumns", "reactive", "tempSummaries", "tableWidth", "hasDragColumn", "bodyWidth", "wrapper", "mainScroll", "xHeadScroll", "xAboveScroll", "xBelowScroll", "thead", "aboveTfoot", "belowTfoot", "indicator", "xScrollbar", "yScrollbar", "isMounted", "locale", "useLocale", "toRef", "keyConfig", "computed", "allColumns", "allSummaries", "syncToStoreProps", "store", "useStore", "prev", "current", "provide", "TABLE_STORE", "TABLE_ACTIONS", "increaseColumn", "decreaseColumn", "increaseSummary", "decreaseSummary", "getTableElement", "refreshXScroll", "emitRowCheck", "emitAllRowCheck", "emitRowExpand", "emitRowTreeExpand", "emitRowFilter", "emitRowSort", "handleRowDragStart", "handleRowDragOver", "handleRowDrop", "handleRowDragEnd", "emitRowEvent", "emitCellEvent", "emitHeadEvent", "emitColResize", "emitFootEvent", "name", "renderTableSlot", "runInLocked", "debounceMinor", "updateColumns", "setColumnProp", "updateSummaries", "setSummaryProp", "TABLE_SLOTS", "state", "getters", "mutations", "mergedLocked", "className", "style", "width", "padLeft", "padRight", "isDefined", "isValidNumber", "useXScroll", "bodyScrollHeight", "totalHeight", "xBarLength", "_a", "yBarLength", "totalWidths", "getLast", "leftFixedActive", "rightFixedActive", "setColumns", "setSummaries", "setData", "setDataKey", "setTableWidth", "setBodyYScroll", "setBodyXScroll", "setRenderRows", "setVirtual", "setLocale", "setDragging", "setKeyConfig", "setDisabledTree", "setLocked", "setBarScrolling", "clearSort", "clearFilter", "refreshRowIndex", "clearCheckAll", "getParentRow", "getCurrentData", "flatTreeRows", "refreshRowDepth", "queryRow", "handleCheck", "setTreeExpanded", "watch", "forceRefreshData", "computeTableWidth", "nextTick", "computeBodyHeight", "refreshPercentScroll", "config", "refresh", "prop", "watchCallback", "syncBarScroll", "_b", "handlerResize", "debounce", "onMounted", "onBeforeUnmount", "__expose", "getSelected", "setRowChecked", "setRowTreeExpanded", "data", "computeRenderRows", "toNumber", "height", "borderWidth", "handleMainScroll", "payload", "handleXScroll", "handleYScroll", "clientX", "percentX", "emitEvent", "clientY", "percentY", "emitYScroll", "handleXBarScroll", "percent", "client", "handleYBarScroll", "nextFrameOnce", "handleResize", "column", "summary", "key", "_c", "_d", "checked", "partial", "columns", "filters", "columnMap", "transformListToMap", "profiles", "row", "sorters", "sorter", "dragState", "rowInstance", "event", "dropRowRect", "tableRect", "prevPercent", "nextPercent", "distance", "dropRowHeight", "dropType", "indicatorTop", "isIndicatorShow", "isLeftInsideRight", "left", "right", "draggingRow", "willDropRow", "currentKey", "parent", "removeArrayItem", "item", "children", "index", "dropped", "allDataPayload", "type", "force", "bodyYScroll", "heightBITree", "processedData", "rowCount", "viewHeight", "viewStart", "viewEnd", "start", "end", "renderStart", "renderEnd", "handler", "noop", "delay", "resolve", "selectedData", "i", "len", "keyOrData", "expanded", "renderSlot", "defineTableFilter", "filter", "defineTableSorter", "sorter", "defineTableColumn", "column", "defineTableColumns", "columns", "defineTableSummary", "summary", "defineTableSummaries", "summaries", "_sfc_main", "defineComponent", "Renderer", "TabNav", "TabNavItem", "tabsProps", "_props", "emit", "props", "useProps", "currentActive", "ref", "currentIndex", "itemStates", "reactive", "isTransition", "mainStyle", "computed", "itemList", "refreshLabels", "debounceMinor", "item", "index", "isNull", "isActiveEmpty", "computeIndex", "i", "provide", "TABS_STATE", "handleActive", "increaseItem", "decreaseItem", "watch", "value", "onMounted", "label", "emitEvent", "handleAdd", "handleClose", "useNameHelper", "isFunction", "_resolveComponent", "_normalizeClass", "_ctx", "_component_TabNav", "e", "_createElementBlock", "_Fragment", "_renderList", "item", "index", "_openBlock", "_createBlock", "_component_TabNavItem", "n", "_withCtx", "_component_Renderer", "_renderSlot", "_createCommentVNode", "_createElementVNode", "_cache", "$event", "textareaProps", "buildProps", "stateProp", "localeProp", "booleanProp", "iconProp", "classProp", "eventProp", "idFor", "state", "disabled", "loading", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "textarea", "props", "useProps", "__props", "createStateProp", "createIconProp", "emit", "__emit", "nh", "useNameHelper", "locale", "useLocale", "toRef", "icons", "useIcons", "focused", "ref", "currentValue", "currentLength", "composing", "lastValue", "isReadonly", "computed", "className", "watch", "value", "limitValueLength", "__expose", "copyValue", "options", "handleFocus", "event", "emitEvent", "handleBlur", "handleChange", "type", "handleEnter", "handleKeyDown", "handleKeyPress", "handleKeyUp", "isNull", "maxLength", "isSuccess", "delay", "toNumber", "handleInput", "debounce", "throttle", "handleCompositionStart", "handleCompositionEnd", "id", "getId", "recordMap", "timer", "isRunning", "subscribe", "record", "current", "computeTimeAgo", "unsubscribe", "date", "locale", "wordSpace", "diff", "type", "label", "usedDiff", "noFormat", "SECOND_ON_MILLISECONDS", "MINUTE_ON_MILLISECONDS", "HOUR_ON_MILLISECONDS", "DAY_ON_MILLISECONDS", "makeSentence", "getCountWord", "timeAgoProps", "buildProps", "localeProp", "booleanNumberProp", "booleanStringProp", "props", "useProps", "__props", "value", "nh", "useNameHelper", "datetime", "toDateValue", "locale", "useLocale", "toRef", "wordSpace", "useWordSpace", "timeAgo", "ref", "computeTimeAgo", "id", "getId", "record", "parseInterval", "currentTitle", "computed", "format", "subscribe", "watch", "onBeforeUnmount", "unsubscribe", "interval", "toDate", "__expose", "e", "N", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "wrapper", "ref", "isActivated", "computed", "type", "formattedHour", "formatValue", "formattedMinute", "formattedSecond", "__expose", "_a", "doubleDigits", "getUnitFocusClass", "handleInputFocus", "handleInput", "event", "handleKeyEnter", "handleEnter", "handleCancel", "handleBlur", "idFor", "state", "disabled", "loading", "size", "validateField", "clearField", "getFieldValue", "setFieldValue", "useFieldStore", "_a", "reference", "nh", "useNameHelper", "props", "useProps", "__props", "createSizeProp", "createStateProp", "value", "placementWhileList", "USE_TOUCH", "e", "createIconProp", "emit", "__emit", "slots", "_useSlots", "locale", "useLocale", "toRef", "icons", "useIcons", "wordSpace", "useWordSpace", "placement", "transfer", "currentVisible", "ref", "focused", "lastValue", "startState", "createTimeState", "endState", "currentState", "staticWheel", "timer", "useSetTimeout", "wrapper", "useClickOutside", "handleClickOutside", "popper", "transferTo", "updatePopper", "usePopper", "computed", "isHover", "useHover", "isTimeDisabled", "useTimeBound", "startInput", "endInput", "startPlaceholder", "select", "start", "time", "makeSentence", "endPlaceholder", "end", "className", "readonly", "selectorClass", "baseCls", "hasPrefix", "currentValue", "values", "doubleDigits", "showClear", "startError", "hour", "minute", "second", "endError", "watch", "parseValue", "getStringValue", "parseFormat", "emitEvent", "getCurrentState", "setVisible", "handleBlur", "__expose", "options", "currentColumn", "enabled", "resetColumn", "enterColumn", "useColumn", "timeValue", "reactive", "activated", "defaultDate", "i", "match", "TIME_REG", "toggleActivated", "date", "valueType", "type", "verifyTime", "visible", "emitChange", "handleFocused", "_b", "showPanel", "event", "target", "unit", "finishInput", "shouldChange", "handleClear", "finish", "nextTick", "emitValue", "handleWheelChange", "handleInputFocus", "handleInput", "handleInputNumber", "number", "prev", "verifyValue", "boundRange", "getStep", "handlePlus", "ctrlKey", "getCtrlStep", "handleMinus", "fallbackFocus", "handleEnter", "handleCancel", "handleShortcut", "index", "name", "toggleCurrentState", "isStart", "handleStartInput", "handleEndInput", "exchangeValue", "temp", "handleExchangeClick", "timelineProps", "buildProps", "booleanProp", "eventProp", "timelineItemProps", "TIMELINE_STATE", "timelineItemTypes", "props", "useProps", "__props", "nh", "useNameHelper", "itemStates", "reactive", "className", "computed", "height", "state", "__expose", "refreshLabels", "debounceMinor", "total", "item", "index", "isNull", "toRef", "increaseItem", "decreaseItem", "handleSignalClick", "provide", "TIMELINE_STATE", "label", "emitEvent", "props", "useProps", "__props", "value", "timelineItemTypes", "timelineState", "inject", "TIMELINE_STATE", "nh", "useNameHelper", "currentLabel", "ref", "content", "className", "computed", "itemStyle", "spacing", "style", "lineStyle", "isDashed", "color", "__expose", "updateHeight", "state", "reactive", "watch", "onMounted", "onUpdated", "onBeforeUnmount", "handleSignalClick", "emitEvent", "toastProps", "buildProps", "iconProp", "booleanProp", "classProp", "styleProp", "effectiveTypes", "nh", "useNameHelper", "props", "useProps", "__props", "createIconProp", "getIndex", "useZIndex", "icons", "useIcons", "predefinedIcons", "computed", "state", "reactive", "mountedPromise", "resolve", "onMounted", "nextTick", "__expose", "openToast", "closeToast", "handleReset", "options", "isFunction", "effectiveTypes", "render", "handleWrapperClick", "handleMaskClick", "conveniences", "ToastManager", "options", "__publicField", "toNumber", "content", "duration", "_a", "manager", "_b", "render", "destroyObject", "app", "property", "others", "target", "isClient", "el", "unrefElement", "createApp", "Component", "vnode", "createVNode", "proxyExposed", "type", "_duration", "noop", "convenienceOptions", "userCloseFn", "onClose", "toast", "item", "markRaw", "Toast", "tourProps", "buildProps", "localeProp", "booleanProp", "booleanStringProp", "eventProp", "tourStepProps", "TOUR_STATE", "index", "getIdIndex", "props", "useProps", "__props", "t", "value", "emit", "__emit", "idIndex", "getIdIndex", "nh", "useNameHelper", "locale", "useLocale", "toRef", "icons", "useIcons", "currentActive", "ref", "currentIndex", "tempSteps", "reactive", "currentRect", "sideRects", "masker", "bubble", "wrapper", "computed", "_a", "useModifier", "event", "modifier", "decide", "prev", "next", "handleClose", "allSteps", "currentStep", "type", "className", "padding", "maskId", "reference", "placement", "updatePopper", "usePopper", "watch", "start", "isClient", "target", "unrefElement", "callIfFunc", "top", "left", "width", "height", "x", "y", "w", "h", "provide", "TOUR_STATE", "increaseStep", "decreaseStep", "__expose", "close", "actions", "slotParams", "shallowReadonly", "step", "emitEvent", "autoClose", "propKeys", "tourStepProps", "deepProps", "ignoredProps", "funcProp", "TourStep", "defineComponent", "_props", "slots", "props", "useProps", "tourState", "inject", "TOUR_STATE", "options", "reactive", "key", "watch", "value", "setRenderer", "onBeforeUnmount", "payload", "renderSlot", "defineComponent", "name", "props", "type", "String", "default", "state", "stateProp", "selected", "Set", "paged", "Boolean", "filter", "Function", "disabled", "title", "options", "Array", "emptyText", "optionHeight", "Number", "deepState", "loading", "loadingIcon", "Object", "loadingLock", "loadingEffect", "locale", "emits", "setup", "slots", "emit", "nh", "useNameHelper", "icons", "useIcons", "isRtl", "useRtl", "currentSelected", "ref", "pageSize", "currentPage", "currentMark", "currentHitting", "currentFilter", "searching", "header", "body", "footer", "search", "input", "list", "bodyRealHeight", "lastSelected", "keyUsed", "target", "wrapper", "modifier", "useModifier", "passive", "onKeyDown", "event", "decide", "up", "down", "value", "findIndex", "option", "Math", "round", "scrollOffset", "boundRange", "findEnabledIndex", "currentOptions", "length", "ensureOptionInView", "left", "right", "ctrlKey", "handlePageChange", "space", "has", "emitSelectedChange", "enter", "stopPropagation", "focus", "beforeMatchAny", "preventDefault", "afterMatchAny", "resetAll", "className", "computed", "be", "bem", "visibleOptions", "filterValue", "optionSize", "pagedOptions", "slice", "totalPages", "ceil", "watch", "partial", "allSelected", "watchEffect", "hasSelected", "hasUnselected", "i", "len", "size", "computePageSize", "requestAnimationFrame", "bodyEl", "style", "getComputedStyle", "paddingTop", "parseInt", "paddingBottom", "innerHeight", "offsetHeight", "floor", "toggleSelect", "shift", "handleRangeSelect", "delete", "add", "start", "end", "startIndex", "endIndex", "method", "toggleSelectAll", "handleReverse", "prevSelected", "handleBlur", "page", "queryEnabledIndex", "index", "step", "abs", "sign", "direction", "scrollTo", "slotParams", "reactive", "toRef", "from", "renderOption", "handleCheck", "_createVNode", "undefined", "onClick", "renderSlot", "Checkbox", "label", "renderHeader", "_Fragment", "reverse", "Icon", "_mergeProps", "retweet", "scale", "CollapseTransition", "effect", "icon", "renderFilter", "stop", "e", "Input", "$event", "onFocus", "onBlur", "suffix", "renderBody", "ResizeObserver", "map", "empty", "VirtualList", "role", "ariaLabel", "item", "renderFooter", "angleRight", "angleLeft", "NumberInput", "transferProps", "buildProps", "stateProp", "localeProp", "booleanProp", "iconProp", "eventProp", "defaultKeyConfig", "value", "label", "disabled", "defineComponent", "name", "components", "Button", "TransferPanel", "props", "transferProps", "emits", "setup", "_props", "slots", "emit", "expose", "idFor", "state", "loading", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "source", "$el", "focus", "useProps", "createStateProp", "locale", "options", "default", "static", "paged", "filter", "emptyText", "keyConfig", "optionHeight", "validator", "ignoreCase", "sourceTitle", "targetTitle", "deepState", "loadingIcon", "createIconProp", "loadingLock", "loadingEffect", "isRtl", "useRtl", "nh", "useNameHelper", "useLocale", "toRef", "icons", "useIcons", "currentValue", "ref", "sourceSelected", "Set", "targetSelected", "sourceOptions", "targetOptions", "optionStates", "target", "computed", "optionValueMap", "Map", "emittedValue", "updateTrigger", "watchEffect", "i", "len", "length", "watch", "initOptions", "immediate", "size", "Array", "from", "selectedValues", "option", "has", "push", "valueKey", "labelKey", "disabledKey", "oldMap", "map", "forEach", "rawOption", "isNull", "String", "oldState", "get", "optionState", "reactive", "hidden", "hitting", "data", "set", "values", "readonly", "className", "b", "bs", "bm", "inherit", "actionType", "toTargetEnabled", "toSourceEnabled", "defaultFilter", "toLocaleLowerCase", "includes", "sourceFilter", "getFilterMethod", "targetFilter", "handleToTarget", "handleToSource", "handlePanelFocus", "handlePanelBlur", "blur", "type", "handleChange", "emitEvent", "onChange", "add", "clear", "delete", "handleSelect", "selected", "onSelect", "createSlotRender", "names", "params", "renderSlot", "_createVNode", "$event", "bem", "empty", "onSwitch", "header", "title", "body", "footer", "be", "actions", "marginBottom", "icon", "Icon", "_mergeProps", "angleLeft", "angleRight", "margin", "DropType", "TREE_STATE", "TREE_NODE_STATE", "defaultKeyConfig", "idIndex", "getIndexId", "props", "__props", "treeState", "inject", "TREE_STATE", "nh", "useNameHelper", "icons", "useIcons", "isRtl", "useRtl", "wrapper", "ref", "arrowEl", "parentState", "computed", "useModifier", "event", "modifier", "decide", "hasChild", "_a", "_b", "toggleExpanded", "hasCheckbox", "handleToggleCheck", "handleToggleSelect", "loaded", "loadFail", "dragging", "isDragOver", "focused", "isDisabled", "isReadonly", "secondary", "hasLinkLine", "className", "hasArrow", "isLeaf", "leafSign", "asyncLoad", "isNull", "checkbox", "suffixCheckbox", "nodeState", "reactive", "watch", "values", "value", "prev", "dragTimer", "onBeforeUnmount", "setValue", "key", "handleClick", "handleLabelClick", "able", "nextTick", "result", "asyncLoadCallback", "success", "getNodeState", "handleDragStart", "handleDragOver", "handleDragLeave", "handleDrop", "handleDragEnd", "treeProps", "buildProps", "localeProp", "booleanProp", "iconProp", "eventProp", "props", "useProps", "__props", "value", "e", "createIconProp", "nh", "useNameHelper", "locale", "useLocale", "toRef", "nodeMap", "nodeDataMap", "treeNodes", "ref", "flattedNodes", "dragging", "indicatorShow", "keyConfig", "reactive", "defaultKeyConfig", "nodeStates", "expanding", "expandingNodes", "expandedNodeIds", "timer", "useSetTimeout", "isMounted", "useMounted", "virtualList", "trap", "indicator", "wrapper", "computed", "_a", "visibleNodeEls", "defaultNodeProperties", "boundAsyncLoad", "linkLine", "style", "visibleNodes", "flatNodes", "renderedNodes", "toNodeProps", "createDefaultFilter", "pattern", "data", "label", "updateVisibleNodeEls", "debounce", "queryAll", "disableExpand", "disableExpandTick", "nextTick", "watchEffect", "nodes", "filter", "leafOnly", "i", "len", "node", "isLeafNode", "parent", "upper", "resetExpanded", "oldIds", "ids", "changed", "watch", "parseAndTransformData", "flatTree", "prev", "addedId", "removedId", "id", "transferring", "baseExpandedIds", "baseNodes", "virtual", "viewHeight", "nodeHeight", "viewCount", "loop", "meta", "type", "index", "children", "addedNodes", "provide", "TREE_STATE", "getParentNode", "computeCheckedState", "handleNodeClick", "handleNodeSelect", "handleNodeCancel", "handleNodeExpand", "handleNodeReduce", "handleAsyncLoad", "handleNodeDragStart", "handleNodeDragOver", "handleNodeDrop", "handleNodeDragEnd", "handleHittingChange", "handleNodeHitting", "handleLabelClick", "TREE_NODE_STATE", "__expose", "refreshScroll", "forceUpdateData", "syncNodeStateIntoData", "getCheckedNodes", "getCheckedNodeData", "getSelectedNodes", "getSelectedNodeData", "getExpandedNodes", "getDisabledNodes", "getNodeChildren", "getSiblingNodes", "getPrevSiblingNode", "getNextSiblingNode", "getNodeByData", "expandNodeByData", "selectNodeByData", "checkNodeByData", "toggleNodeLoadingByData", "toggleAllExpanded", "getTreeData", "getFlattedData", "onMounted", "updateCheckedUpward", "updateCheckedDown", "useCascadedChecked", "key", "isLeaf", "leafSign", "asyncLoad", "isNull", "expandedIds", "rootNodes", "parentNode", "isCollapse", "refreshNodesDepth", "walkTree", "depth", "getLast", "buildTreeNodes", "transformTree", "idKey", "oldDataMap", "oldIdMap", "item", "_", "oldNode", "getIndexId", "createNodeItem", "checkedNodes", "parentKey", "visibleKey", "selectedKey", "expandedKey", "disabledKey", "checkedKey", "loadingKey", "loadedKey", "loadFailKey", "readonlyKey", "arrowKey", "checkboxKey", "selectDisabledKey", "expandDisabledKey", "checkDisabledKey", "isLeafKey", "refresh", "visible", "selected", "expanded", "disabled", "checked", "loading", "loaded", "loadFail", "readonly", "arrow", "checkbox", "selectDisabled", "expandDisabled", "checkDisabled", "defaults", "originNode", "able", "nodeList", "emitEvent", "selectedNodes", "currentId", "siblingNodes", "result", "isPromise", "dragState", "nodeInstance", "DropType", "event", "dropNodeRect", "treeRect", "dropArrowRect", "prevPercent", "nextPercent", "distance", "dropNodeHeight", "dropType", "indicatorTop", "isIndicatorShow", "isLeftInsideRight", "left", "right", "draggingNode", "willDropNode", "removeArrayItem", "activeEl", "nodeEl", "handleScroll", "handleTreeFocus", "target", "afterExpand", "includePartial", "includeSelf", "parentId", "isChild", "a", "upstream", "n", "withFilter", "mapTree", "filterTree", "t", "uploadProps", "buildProps", "stateProp", "localeProp", "booleanProp", "iconProp", "styleProp", "eventProp", "uploadListProps", "uploadFileProps", "iconConfig", "useFileIcons", "icons", "useIcons", "computed", "map", "iconName", "types", "type", "StatusType", "uploadListTypes", "imageExtRE", "imageBase64RE", "isImage", "file", "name", "url", "base64", "props", "useProps", "__props", "value", "uploadListTypes", "nh", "useNameHelper", "locale", "useLocale", "toRef", "icons", "useIcons", "fileIcons", "useFileIcons", "useIconRenderer", "computed", "fileName", "percentage", "toFixed", "showThumb", "getFileExtension", "getFileIcon", "scale", "extension", "icon", "handleDelete", "emitEvent", "handlePreview", "imageToBase64", "reader", "StatusType", "_a", "props", "useProps", "__props", "value", "uploadListTypes", "nh", "useNameHelper", "transitionName", "computed", "handleDelete", "file", "emitEvent", "handlePreview", "getError", "url", "xhr", "message", "error", "getBody", "text", "upload", "options", "event", "percent", "formData", "data", "key", "body", "_a", "headers", "header", "has", "isDefined", "getDefaultFileState", "id", "randomString", "name", "size", "type", "base64", "status", "StatusType", "PENDING", "percentage", "source", "url", "path", "xhr", "response", "error", "defineComponent", "components", "Button", "Icon", "UploadList", "props", "uploadProps", "emits", "setup", "_props", "slots", "emit", "expose", "idFor", "state", "disabled", "loading", "validateField", "getFieldValue", "setFieldValue", "useFieldStore", "focus", "useProps", "createStateProp", "locale", "default", "static", "fileList", "multiple", "tip", "accept", "filter", "maxSize", "validator", "value", "field", "data", "headers", "withCredentials", "manual", "hiddenFiles", "countLimit", "allowDrag", "onBeforeUpload", "isFunc", "onBeforeSelect", "iconRenderer", "selectToAdd", "listType", "uploadListTypes", "includes", "block", "loadingText", "directory", "pathField", "disabledClick", "buttonLabel", "loadingIcon", "createIconProp", "loadingLock", "loadingEffect", "image", "defaultFiles", "listStyle", "nh", "useNameHelper", "useLocale", "toRef", "icons", "useIcons", "fileStates", "ref", "isDragOver", "input", "button", "panel", "readonly", "computed", "className", "b", "bs", "bm", "inherit", "renderFiles", "length", "controlClass", "be", "bem", "acceptString", "join", "defaultList", "map", "file", "createFileState", "concat", "item", "DELETE", "watch", "idMap", "Map", "fileMap", "isDefined", "set", "get", "undefined", "syncInputFiles", "immediate", "deep", "execute", "handleDelete", "blur", "$el", "options", "handleClick", "click", "handleKeyDown", "event", "key", "code", "handleInputChange", "target", "files", "handleFilesChange", "inputFiles", "originFiles", "Array", "from", "webkitRelativePath", "fileState", "getFileStateBySource", "SUCCESS", "UPLOADING", "result", "isPromise", "isFalse", "push", "exceedFiles", "slice", "emitEvent", "onExceed", "emitChangeEvent", "onChange", "find", "defaults", "Object", "assign", "getFileExtension", "split", "pop", "toLocaleLowerCase", "verifyFiles", "uploadFiles", "requests", "uploadFile", "catch", "noop", "Promise", "all", "then", "responses", "Blob", "File", "resolve", "reject", "upload", "onProgress", "percent", "handleProgress", "onSuccess", "handleSuccess", "onError", "handleError", "onAbort", "limitSize", "Infinity", "i", "len", "extension", "onFilterError", "onSizeError", "abort", "onDelete", "handlePreview", "onPreview", "isClient", "dataTransfer", "DataTransfer", "forEach", "items", "add", "FAIL", "dragTimer", "onBeforeUnmount", "clearTimeout", "handleDrop", "preventDefault", "collectDropFiles", "handleDragEnter", "handleDragLeave", "setTimeout", "collectedFiles", "dirLoop", "processes", "entity", "webkitGetAsEntry", "isFile", "dir", "prefix", "fileEntries", "Math", "round", "doProcess", "loop", "shift", "reader", "createReader", "readEntries", "entries", "entry", "renderNormalAction", "_createVNode", "_Fragment", "icon", "_mergeProps", "effect", "renderSlot", "uploadCloud", "scale", "dragOrClick", "opacity", "renderImageAction", "marginBottom", "plus", "renderControl", "HtmlTag", "renderFileList", "canPreview", "params", "suffix", "methods", "videoProps", "buildProps", "booleanProp", "eventProp", "videoControlProps", "defaultLayout", "key", "videoDefaultControlLayout", "videoDefaultShortcuts", "VIDEO_STATE", "props", "useProps", "__props", "nh", "useNameHelper", "videoState", "inject", "VIDEO_STATE", "currentValue", "ref", "className", "computed", "tipClass", "objectOptions", "option", "optionMap", "listToMap", "currentOption", "removeShortcut", "watch", "value", "handleClick", "onBeforeUnmount", "emitEvent", "handleSelect", "formatSeconds", "seconds", "remainders", "leaveNumber", "doubleDigits", "r", "i", "mergeIconScale", "scale", "icon", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "locale", "useLocale", "timer", "useSetTimeout", "slidTime", "ref", "hovered", "hoveredTime", "indicatorLeft", "previewLeft", "paddingX", "sliderWidth", "previewWidth", "wrapper", "slider", "sliderEl", "computed", "_a", "preview", "sliding", "percent", "className", "points", "duration", "times", "segment", "i", "len", "start", "end", "pointDuration", "segmentLabel", "time", "segments", "index", "title", "getStepByWord", "useListener", "throttle", "event", "processMoveOnTrack", "offsetX", "boundRange", "onSliderResize", "entry", "style", "_b", "onPreviewResize", "handleChange", "permillage", "onSlideMove", "onSlideStart", "onSlideEnd", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "currentTime", "ref", "editing", "width", "inputTime", "input", "durationEl", "formattedTime", "computed", "formatSeconds", "watch", "value", "onMounted", "nextTick", "getRangeWidth", "handleClick", "_a", "finishInput", "confirm", "units", "unit", "isValidNumber", "toNumber", "seconds", "i", "props", "__props", "emit", "__emit", "nh", "useNameHelper", "icons", "useIcons", "videoState", "inject", "VIDEO_STATE", "currentVolume", "ref", "muted", "volumeIcon", "computed", "watch", "value", "__expose", "toggleMute", "prevVolume", "handleSlide", "defineComponent", "name", "props", "videoProps", "emits", "setup", "_props", "slots", "emit", "expose", "useProps", "src", "static", "default", "srcList", "noControls", "videoAttrs", "time", "volume", "playbackRate", "playbackRates", "controlLayout", "videoDefaultControlLayout", "poster", "video", "segments", "loading", "loadingIcon", "loadingEffect", "shortcuts", "nh", "useNameHelper", "locale", "useLocale", "icons", "useIcons", "timer", "useSetTimeout", "pipEnabled", "isClient", "document", "pictureInPictureEnabled", "currentSrc", "ref", "playing", "currentTime", "canPlay", "duration", "currentVolume", "pip", "stateShow", "stateHidden", "currentRate", "interacting", "hasPlayed", "flipped", "iconScale", "screen", "wrapper", "computed", "value", "volumeRef", "placeId", "full", "videoRef", "shortcutRecord", "reactive", "videoDefaultShortcuts", "addShortcut", "key", "cb", "console", "warn", "noop", "useModifier", "target", "passive", "onKeyDown", "event", "modifier", "ctrlKey", "shiftKey", "altKey", "metaKey", "decide", "up", "Math", "min", "down", "max", "right", "left", "toggleMute", "Object", "keys", "map", "afterMatchAny", "resetAll", "className", "b", "bs", "bm", "playIcon", "pause", "play", "stateIcon", "pauseState", "playState", "rateOptions", "rates", "raw", "rate", "toNumber", "label", "decimalLength", "toFixed", "filter", "sort", "prev", "next", "find", "index", "findIndex", "splice", "length", "segment", "percent", "srcFullList", "includes", "concat", "srcIndex", "indexOf", "slotParams", "shallowReadonly", "togglePlaying", "togglePip", "changeRate", "changeTime", "changeVolume", "toggleFull", "watch", "resetMetaState", "flush", "requestAnimationFrame", "onMounted", "nextTick", "querySelector", "provide", "VIDEO_STATE", "useListener", "emitEvent", "onTimeChange", "handleEnded", "onTogglePip", "focus", "onPlay", "onPause", "onEnded", "exitPictureInPicture", "requestPictureInPicture", "dispatch", "onRateChange", "onVolumeChange", "toggleFlip", "onToggleFlip", "onFullChange", "onToggleFull", "handleInteract", "clearTimeout", "interact", "setTimeout", "handlePointerLeave", "adjustSrc", "amount", "list", "playPrev", "onPrev", "playNext", "onNext", "type", "toggle", "handleRefresh", "onRefresh", "renderPlayPrev", "_createVNode", "VideoControl", "be", "Icon", "_mergeProps", "scale", "renderPlay", "renderPlayNext", "renderRefresh", "refresh", "renderTimer", "VideoTimer", "renderPlaybackRate", "renderVolume", "VideoVolume", "renderFlip", "flip", "flipX", "renderPip", "exitPip", "requestPip", "renderFullWindow", "fullWindowExit", "fullWindow", "onClick", "renderFullBrowser", "fullScreenExit", "fullScreen", "renderControl", "createSlotRender", "toCapitalCase", "renderControls", "Progress", "bem", "VideoProgress", "center", "renderMain", "renderSlot", "Transition", "onAfterLeave", "active", "ns", "icon", "effect", "FullScreen", "textProps", "buildProps", "booleanProp", "pProps", "omitProps", "strongProps", "titleProps", "hProps", "h1Props", "h2Props", "h3Props", "h4Props", "h5Props", "h6Props", "blockquoteProps", "olProps", "ulProps", "defineComponent", "name", "props", "titleProps", "emits", "setup", "_props", "slots", "useProps", "type", "level", "top", "marker", "aligned", "thin", "markerType", "nh", "useNameHelper", "coloredMarker", "computed", "isColor", "className", "b", "bs", "bm", "inherit", "value", "boundRange", "Math", "round", "style", "cv", "CustomTag", "_createVNode", "default", "_isSlot", "s", "Object", "prototype", "toString", "call", "_isVNode", "defineComponent", "name", "props", "textProps", "emits", "setup", "_props", "slots", "useProps", "type", "tag", "delete", "strong", "italic", "underline", "code", "mark", "disabled", "keyboard", "thin", "reversed", "nh", "useNameHelper", "className", "computed", "b", "bs", "bm", "inherit", "CustomTag", "children", "renderSlot", "_createVNode", "value", "default", "defineComponent", "name", "props", "blockquoteProps", "emits", "setup", "_props", "slots", "useProps", "type", "nh", "useNameHelper", "className", "computed", "b", "bs", "bm", "inherit", "_createVNode", "value", "default", "defineComponent", "name", "props", "olProps", "emits", "setup", "_props", "slots", "useProps", "type", "nh", "useNameHelper", "_createVNode", "b", "inherit", "bm", "default", "defineComponent", "name", "props", "ulProps", "emits", "setup", "_props", "slots", "useProps", "listStyle", "nh", "useNameHelper", "className", "computed", "b", "bm", "inherit", "_createVNode", "value", "listStyleType", "default", "createHComponent", "level", "name", "props", "hProps", "emits", "setup", "_props", "slots", "useProps", "type", "top", "marker", "aligned", "thin", "_createVNode", "Title", "_mergeProps", "default", "H1", "H2", "H3", "H4", "H5", "H6", "defineComponent", "name", "props", "pProps", "emits", "setup", "_props", "slots", "useProps", "type", "delete", "strong", "italic", "underline", "mark", "disabled", "keyboard", "thin", "reversed", "_createVNode", "Text", "_mergeProps", "default", "defineComponent", "name", "props", "strongProps", "emits", "setup", "_props", "slots", "useProps", "type", "delete", "italic", "underline", "mark", "disabled", "keyboard", "thin", "reversed", "_createVNode", "Text", "_mergeProps", "default", "buildInstall", "components", "defaultLocale", "app", "options", "prefix", "namespace", "props", "locale", "zIndex", "icons", "hoverDelay", "withDefaultLocale", "computed", "unref", "configNamespace", "configProps", "configLocale", "configIcons", "configHoverDelay", "configZIndex", "normalizedPrefix", "toCapitalCase", "component", "proxyConfigProps", "isEmpty", "provideConfig", "config", "version", "components", "Affix", "Alert", "Anchor", "AnchorLink", "AutoComplete", "Avatar", "AvatarGroup", "Badge", "Breadcrumb", "BreadcrumbItem", "Bubble", "Button", "ButtonGroup", "Calendar", "CalendarPanel", "Captcha", "CaptchaSlider", "Card", "Carousel", "CarouselItem", "Cascader", "Cell", "Checkbox", "CheckboxGroup", "Collapse", "CollapsePanel", "CollapseTransition", "ColorPicker", "Column", "ConfigProvider", "DatePicker", "Divider", "Drawer", "Dropdown", "DropdownItem", "DropdownList", "Ellipsis", "Form", "FormItem", "FormReset", "FormSubmit", "FullScreen", "Grid", "Highlight", "Icon", "Image", "ImageGroup", "ImageViewer", "Input", "Layout", "LayoutAside", "LayoutFooter", "LayoutHeader", "LayoutMain", "Linker", "Masker", "Menu", "MenuGroup", "MenuItem", "Modal", "NativeScroll", "NumberInput", "Option", "OptionGroup", "Overflow", "Pagination", "Popper", "Popup", "Portal", "Progress", "Radio", "RadioGroup", "Renderer", "ResizeObserver", "Result", "Row", "Scroll", "Scrollbar", "Select", "Skeleton", "SkeletonGroup", "Slider", "Space", "Spin", "Split", "Switch", "TabNav", "TabNavItem", "TabPanel", "Table", "TableColumn", "TableColumnGroup", "TableSummary", "Tabs", "Tag", "Textarea", "TimeAgo", "TimePicker", "Timeline", "TimelineItem", "Tooltip", "Tour", "TourStep", "Transfer", "Tree", "Upload", "UploadFile", "UploadList", "Video", "Viewer", "VirtualList", "Wheel", "Confirm", "Contextmenu", "Loading", "Message", "Notice", "Toast", "Title", "Text", "Blockquote", "OL", "UL", "H1", "H2", "H3", "H4", "H5", "H6", "P", "Strong", "installDirectives", "install", "buildInstall"]
}
